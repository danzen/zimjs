"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }var hi=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(mt,Mt)=>(typeof require<"u"?require:mt)[Mt]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});require('@danzen/createjs');var j=window||{},Fe=j.createjs,kt=j.zns,ht=j.zon==null?!0:j.zon,on,Gn=ht?console.log.bind(console):function(){},$n=" border:thin solid black; color: black",ti=ht?console.log.bind(console,"%c Z ","background: #acd241;"+$n):function(){},pi=ht?console.log.bind(console,"%c Z ","background: #e472c4;"+$n):function(){},Rr=ht?console.log.bind(console,"%c Z ","background: #50c4b7;"+$n):function(){},ni=ht?console.log.bind(console,"%c Z ","background: #fb4758;"+$n):function(){},je=ht?console.log.bind(console,"%c Z ","background: #ebcb35;"+$n):function(){},ri=ht?console.log.bind(console,"%c Z ","background: #f58e25;"+$n):function(){},Ar=ht?console.log.bind(console,"%c Z ","background: #eeeeee;"+$n):function(){},kr=ht?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function xn(t){return De("1"),document.getElementById(t)}function gi(t){if(De("2"),document.getElementById(t))return document.getElementById(t).style;ht&&je("zss(): id not found")}function nr(t,mt,Mt,It,Ot,Tt){if(De("3"),n(mt)&&mt!=""||mt=="_self")j.location.href=t;else{var Dt="";return Mt&&(Dt+="width="+Mt+","),It&&(Dt+="height="+It+","),Ot&&(Dt+="fullscreen=yes,"),Tt&&(Dt+="modal=yes,alwaysRaised=yes"),j.open(t,mt,Dt)}}function Qn(t){if(De("4"),!n(t))return Number(String(t).replace(/[^\d.-]/g,""))}function n(t){return t==null}function vi(t){De("5"),!n(t)&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),j.event&&(j.event.cancelBubble=!0))}function Yr(){return De("6"),j.zilK&&(j.removeEventListener("keydown",j.zilK),j.removeEventListener("wheel",j.zilW),j.removeEventListener("DOMMouseScroll",j.zilS)),j.zilK=function(t){t||(t=event),t.keyCode&&t.keyCode>=32&&t.keyCode<=40&&t.preventDefault()},j.zilW=function(t){t||(t=event),t.preventDefault()},j.zilS=j.zilW,j.addEventListener("keydown",j.zilK,{passive:!1}),j.addEventListener("wheel",j.zilW,{passive:!1}),j.addEventListener("DOMMouseScroll",j.zilS,{passive:!1}),[j.zilK,j.zilW,j.zilS]}function fr(t,mt){De("6.1");function Mt(){var It=this;this.on=function(Ot,Tt){if(!(n(t)||n(Ot)||n(Tt)))for(var Dt=It.tags,Qt=0;Qt<Dt.length;Qt++)Dt[Qt].addEventListener(Ot,Tt)},this.off=function(Ot,Tt){if(!(n(t)||n(Ot)||n(Tt)))for(var Dt=It.tags,Qt=0;Qt<Dt.length;Qt++)Dt[Qt].removeEventListener(Ot,Tt)},Object.defineProperty(It,"tags",{get:function(){return n(t)?[]:typeof t=="string"||t instanceof String?(mt&&ri(t,document.querySelector(t)),mt?[document.querySelector(t)]:document.querySelectorAll(t)):typeof t.innerHTML=="string"?[t]:[]},set:function(){}}),this.css=function(Ot,Tt){for(var Dt=It.tags,Qt=0;Qt<Dt.length;Qt++)if(arguments.length==1&&arguments[0].constructor==={}.constructor)for(var At in Ot)Dt[Qt].style[At]=Ot[At];else{if(arguments.length==1)return It.tags[0].style[Ot];Dt[Qt].style[Ot]=Tt}},this.prop=function(Ot,Tt){if(!n(Ot)){for(var Dt=It.tags,Qt=[],At=0;At<Dt.length;At++)if(n(Tt))if(Ot.constructor==={}.constructor)for(var Xt in Ot)Dt[At][Xt]=Ot[Xt];else Qt.push(Dt[At][Ot]);else Dt[At][Ot]=Tt;if(n(Tt))return Qt}}}return new Mt}function cn(t){return t.length==1&&t[0]!=null&&t[0].constructor==={}.constructor}function at(t,mt,Mt,It){var Ot=ge&&(ge.ZIMONON||ii);if(cn(mt)){De("7");var Tt=mt[0],Dt;for(var Qt in Tt)(Dt=Qt.match(/^(.+)gColor$/))&&(Tt[Dt[1]+"ackgroundColor"]=Tt[Qt],delete Tt[Qt]);var At=n(Mt)?t.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):Mt.replace(/\s+/g,"").split(","),Xt=[],We,e;for(We=0;We<At.length;We++)e=At[We].split("=")[0],At[We]=e,Xt.push(Tt[e]);for(We in Tt)At.indexOf(We)<0&&ht&&je(t,"bad argument "+We);var r;return(r=Object.prototype.isPrototypeOf.call(t.prototype,It)?new(t.bind.apply(t,[null].concat(Xt))):t.apply(null,Xt))?(Ot&&!r.arguments&&(r.arguments=[Tt]),r):!0}else Ot&&It&&mt&&n(It.arguments)&&(It.arguments=Array.prototype.slice.call(mt))}function et(t){if(De("7.5"),De("17.6"),!n(t))return ge.Pick.choose(t)}var yi=console.table&&ht?console.table.bind(console):function(){},xi=function(){for(var t=0;t<arguments.length;t++)if(!n(arguments[t]))return arguments[t]},ge=function(t){t.chop=function(e,r,i,l,a,s){if(De("7.8"),!n(e)){n(r)&&(r=3),n(i)&&(i=3),n(l)&&(l=!0),n(a)&&(a=0),n(s)&&(s=1),e.getBounds||(e=new t.Bitmap(e));var f=e.getBounds();n(f)&&je("ZIM chop() - obj must have bounds");var u=f.width/r,v=f.height/i,C=a,h=[];return t.loop(i,function(g){t.loop(r,function(k){var y=new t.Bitmap(e,u+C*2,v+C*2,k*u-C,g*v-C,s);a!=0?(y.setBounds(C,C,u,v),y.regX=C,y.regY=C):y.setBounds(C,C,u,v),h.push(y)})}),l?new t.Tile(h,r,i,0,0,!0).sca(e.scaleX,e.scaleY):h}},t.shuffle=function(e,r){if(De("8"),!n(e)){Array.isArray(e)||(e=Object.values(arguments));var i=e.length,l,a;if(i==0)return e;if(r){for(var s=t.copy(e);t.arraysEqual(s,e);)t.shuffle(e);return e}else{for(;--i;)l=Math.floor(Math.random()*(i+1)),a=e[i],e[i]=e[l],e[l]=a;return e}}},t.pluck=function(e,r){if(De("9.26"),n(e)||e.length==0)return null;Array.isArray(e)||(e=Object.values(arguments));var i=Math.floor(Math.random()*e.length),l=e[i];return r&&e.splice(i,1),l},t.rand=function(e,r,i,l){if(De("9"),n(e)&&n(r))return Math.random();(n(e)||isNaN(e))&&(e=0),(n(r)||isNaN(r))&&(r=0),(e%1!=0||r%1!=0)&&(i=!1),n(i)&&(i=!0),l&&Math.random()>.5&&(e*=-1,r*=-1),i&&(e>r?e++:r>e&&r++);var a;return e==0&&r==0?0:(r==0?a=Math.random()*e:a=Math.min(e,r)+Math.random()*(Math.max(e,r)-Math.min(e,r)),i?Math.floor(a):a)},t.seedRandom=function(e){return De("9.01"),function(r,i,l,a,s,f,u,v,C){function h(B){var F,D=B.length,P=this,Y=0,_=P.i=P.j=0,V=P.S=[];for(D||(B=[D++]);a>Y;)V[Y]=Y++;for(Y=0;a>Y;Y++)V[Y]=V[_=p&_+B[Y%D]+(F=V[Y])],V[_]=F;(P.g=function(b){for(var Z,$=0,Q=P.i,re=P.j,G=P.S;b--;)Z=G[Q=p&Q+1],$=$*a+G[p&(G[Q]=G[re=p&re+Z])+(G[re]=Z)];return P.i=Q,P.j=re,$})(a)}function g(B,F){var D,P=[],Y=typeof B;if(F&&Y=="object")for(D in B)try{P.push(g(B[D],F-1))}catch (e2){+function(){}()}return P.length?P:Y=="string"?B:B+"\0"}function k(B,F){for(var D,P=B+"",Y=0;Y<P.length;)F[p&Y]=p&(D^=19*F[p&Y])+P.charCodeAt(Y++);return x(F)}function y(B){try{return I?x(I.randomBytes(a)):(r.crypto.getRandomValues(B=new Uint8Array(a)),x(B))}catch (e3){return[+new Date,r,(B=r.navigator)&&B.plugins,r.screen,x(i)]}}function x(B){return String.fromCharCode.apply(0,B)}var I,w=l.pow(a,s),E=l.pow(2,f),A=2*E,p=a-1,T=l["seed"+C]=function(B,F,D){var P=[];F=F==1?{entropy:!0}:F||{};var Y=k(g(F.entropy?[B,x(i)]:_nullishCoalesce(B, () => (y())),3),P),_=new h(P);return k(x(_.S),i),(F.pass||D||function(V,b,Z){return Z?(l[C]=V,b):V})(function(){for(var V=_.g(s),b=w,Z=0;E>V;)V=(V+Z)*a,b*=a,Z=_.g(1);for(;V>=A;)V/=2,b/=2,Z>>>=1;return(V+Z)/b},Y,"global"in F?F.global:this==l)};if(k(l[C](),i),u&&u.exports){u.exports=T;try{I=hi("crypto")}catch (e4){}}else v&&v.amd&&v(function(){return T})}(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random"),t.randomO||(t.randomO=Math.random),n(e)?Math.random=t.randomO:Math.seedrandom(e),e},t.odds=function(e){return De("9.1"),(n(e)||isNaN(e))&&(e=50),Math.random()<=e/100},t.rarity=function(e,r,i,l){if(De("9.2"),n(e)||e.constructor!={}.constructor)return[];n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!1);var a=[];return t.loop(e,function(s,f){var u=t.colors.indexOf(s);u!=-1&&(s=t.colorsHex[u]);var v;Array.isArray(f)?(+s==+s?s=new Number(s):s=new String(s),s._payload=f[1],s.dynamicPayload=l,Object.defineProperty(s,"payload",{get:function(){return!this.dynamicPayload&&this._lastPayload!=null?this._lastPayload:(this._lastPayload=t.Pick.choose(this._payload),this._lastPayload)},set:function(C){this._lastPayload=null,this._payload=C}}),v=f[0],t.loop(v,function(){a.push(s)})):(v=f,t.loop(v,function(){+s==+s&&(s=+s),a.push(s)}))}),r&&t.shuffle(a),a},t.repeats=function(e,r){if(De("9.25"),n(e)||!Array.isArray(e))return 0;var i={},l=0,a=0;return t.loop(e,function(s){i[s]!=null?(i[s]++,a++):i[s]=0,i[s]>l&&(l=i[s])}),r?a:l},t.series=function(){De("13.61");var e,r;if(arguments.length==0)return function(){};arguments.length==1&&Array.isArray(arguments[0])?e=arguments[0]:arguments.length==1&&arguments[0].constructor=={}.constructor?(r=arguments[0],n(r.min)&&(r.min=0),n(r.max)&&(r.max=1),n(r.step)&&(r.step=1),e=[],t.loop(Math.floor(Math.abs(r.max-r.min)+r.step),function(w){e.push(w+r.min)},null,null,r.step),r=null):e=Array.prototype.slice.call(arguments);var i=0,l=1,a=1,s=0,f=0,u=!1,v=!1,C=!1,h=!1,g=!1,k,y,x=function(w,E){if(s&&f%s!=0)return f++,y;f++;var A=e.length,p;if((h||g)&&i%A==0&&t.shuffle(e),p=e[(A*10+i)%A],i==0&&(k=p),g&&i%A==0&&A>1)for(;p==y;)t.shuffle(e),p=e[(A*10+i)%A];return u?l>0&&i+l*a>=A?(l=-1,i=A-1-(i+a-(A-1))):l<0&&i+l*a<0?(l=1,i=a-i):i+=l*a:v?l>0&&i+l*a>=A?(l=-1,i=A-1-(i+a-(A-1))+a):l<0&&i+l*a<0?(l=1,i=a-i-a):i+=l*a:C?l>0&&i+l*a>=A?i=A-1:l<0&&i+l*a<0?i=0:i+=l*a:i+=l*a,y=p,t.isPick(p)?p.noPick&&E?p:t.Pick.choose(p):p},I=x.original=t.copy(e);return x.array=e,x.type="series",Object.defineProperty(x,"index",{get:function(){var w=e.length;return(w*10+i)%w},set:function(w){i=w,f=0}}),Object.defineProperty(x,"length",{get:function(){return e.length},set:function(){}}),x.jump=function(w){return i=w,x},x.reverse=function(w){return n(w)&&(w=!0),w?l=-1:l=1,i=e.length-1,x},x.bounce=function(w){n(w)&&(w=!0);var E=e.length;return i=(E*10+i)%E,u=w,x},x.flip=function(w){n(w)&&(w=!0);var E=e.length;return i=(E*10+i)%E,v=w,x},x.step=function(w){return n(w)&&(w=1),a=Math.floor(w),x},x.every=function(w){return n(w)&&(w=1),s=Math.abs(w),f=0,x},x.constrain=function(w){return n(w)&&(w=!0),C=w,x},x.random=function(w){return n(w)&&(w=!0),w||(e=I),h=w==!0,x},x.mix=function(w){return n(w)&&(w=!0),w||(e=I),g=w==!0,x},x.shuffle=function(w){return n(w)&&(w=!0),w?t.shuffle(e):e=I,x},x},t.makeSeries=function(e){if(De("13.6"),n(e))return function(){};var r=0,i=function(){return e[r++%e.length]};return i.array=e,i},t.loop=function(e,r,i,l,a,s,f,u){var v="obj, call, reverse, interval, step, start, end, immediate",C;if(C=at(t.loop,arguments,v))return C;if(De("9.5"),n(e)||n(r))return;n(i)&&(i=!1),n(l)&&(l=0),(n(a)||a<=0)&&(a=1),n(u)&&(u=!0),e.constructor===Number&&(e=Number(e)),e.constructor===String&&(e=String(e));var h=typeof e=="number"?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":typeof e=="string"?"string":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":e.type&&e.type=="Dictionary"?"Dictionary":"invalid";if(h=="invalid")return;var g,k,y,x;if(h=="number"||h=="string"||h=="array"||h=="nodelist"||h=="htmlcollection"||h=="Dictionary"){if(h=="Dictionary"){var I=t.copy(e.values);e=t.copy(e.objects)}if(g=h=="number"?e:e.length,k=E(g-1),k==0)return;if(i)if(l===0){for(y=s;y>=f;y-=a)if(h=="number"?x=r(y,k,s,f,e):h=="array"||h=="string"?x=r(e[y],y,k,s,f,e):h=="Dictionary"?x=r(e[y],I[y],y,k,s,f,e):x=r(e.item(y),y,k,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(y=A.count,u||y--,a&&(y*=a),y=s-y,h=="number"?x=r(y,k,s,f,e):h=="array"||h=="string"?x=r(e[y],y,k,s,f,e):h=="Dictionary"?x=r(e[y],I[y],y,k,s,f,e):x=r(e.item(y),y,k,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},k,u);else if(l===0){for(y=s;y<=f;y+=a)if(h=="number"?x=r(y,k,s,f,e):h=="array"||h=="string"?x=r(e[y],y,k,s,f,e):h=="Dictionary"?x=r(e[y],I[y],y,k,s,f,e):x=r(e.item(y),y,k,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(y=A.count,u||y--,a&&(y*=a),h=="number"?x=r(y,k,s,f,e,A):h=="array"||h=="string"?x=r(e[y],y,k,s,f,e,A):h=="Dictionary"?x=r(e[y],I[y],y,k,s,f,e):x=r(e.item(y),y,k,s,f,e,A),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},k,u);return!0}else if(h=="object"){g=0;var w=[];for(y in e)g++,w.push(y);if(k=E(g-1),k==0)return;if(i)if(l===0){for(y=s;y>=f;y-=a)if(x=r(w[y],e[w[y]],y,k,s,f,e),typeof x<"u")return x}else t.interval(l,function(A){if(y=A.count,u||y--,a&&(y*=a),y=s-y,x=r(w[y],e[w[y]],y,k,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},k,u);else if(l===0){for(y=s;y<=f;y+=a)if(x=r(w[y],e[w[y]],y,k,s,f,e),typeof x<"u")return x}else t.interval(l,function(A){if(y=A.count,u||y--,a&&(y*=a),x=r(w[y],e[w[y]],y,k,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},k,u);return!0}function E(A){return n(s)&&(s=i?A:0),n(f)&&(f=i?0:A),i&&f>s||!i&&s>f||(s<0&&f)<0||s>A&&f>A?0:(s=Math.max(0,Math.min(s,A)),f=Math.max(0,Math.min(f,A)),Math.floor((i?s-f:f-s)/a)+1)}};function mt(e,r,i,l,a){t.timeCheck||(De("9.99"),t.timeCheck=!0);var s=n(j.TIME)?n(t.TIME)?"seconds":t.TIME:j.TIME;return s&&s.toLowerCase&&(s=s.toLowerCase()),s!="milliseconds"&&s!="ms"&&(s="seconds"),r&&r.toLowerCase&&(r=r.toLowerCase()),(r=="ms"||r=="milliseconds"||r=="seconds"||r=="s")&&(s=r),n(e)?s.charAt(0):(s=="ms"&&(s="milliseconds"),s=="s"&&(s="seconds"),s=s.charAt(0),a||Mt(e,s,i,l),s)}function Mt(e,r,i,l){n(i)&&(i=10),n(l)&&(l=9),!(!t.TIMECHECK&&!j.TIMECHECK)&&(r!="m"&&e>i||r=="m"&&e<l)&&ht&&je("TIME - warning: time is in "+(r=="m"?"milliseconds":"seconds")+" ("+e+")")}if(t.timeout=function(e,r,i,l){var a="time, call, pauseOnBlur, timeUnit",s;if(s=at(t.timeout,arguments,a,this))return s;if(De("9.7"),!n(r)&&typeof r=="function"){var f=t.interval(e,r,1,!1,i,l);return f.type="timeoutObj",f}},t.interval=function(e,r,i,l,a,s){var f="time, call, total, immediate, pauseOnBlur, timeUnit",u;if(u=at(t.interval,arguments,f,this))return u;if(De("9.8"),n(r)||typeof r!="function")return;var v=mt(e,s);if(n(e)&&(e=v=="s"?1:1e3),n(l)&&(l=!1),!n(i)&&(isNaN(i)||i<=0))return;n(i)&&(i=-1);var C={count:0,total:i,paused:!1,time:e,active:!0,timeUnit:s};a&&(n(t.blurCheck)&&t.setBlurDetect(),t.pauseOnBlur.push(C));function h(){C.startTime=Date.now(),C.interval=t.Pick.choose(C.time),C.id=setTimeout(function(){C.paused||C.active&&(C.count++,r(C),h(),g())},C.interval*(v=="s"?1e3:1))}l&&setTimeout(function(){r(C),g()},10);function g(){i!=-1&&C.count>=(l?C.total-1:C.total)&&C.clear()}var k;return C.type="intervalOjbect",C.pause=function(y,x,I){n(y)&&(y=!0),y?(clearTimeout(k),clearTimeout(C.id),cancelAnimationFrame(C.rid),C.pauseTimeLeft=C.interval-(Date.now()-C.startTime)/(v=="s"?1e3:1)):(C.paused||C.pause(!0),k=setTimeout(function(){C.count++,r(C),h(),g()},x?0:(I?C.interval:C.pauseTimeLeft)*(v=="s"?1e3:1)),C.pauseTimeLeft=null),C.paused=y},C.next=function(){C.count++,r(C),g()},C.clear=function(){C.active=!1,clearTimeout(k),cancelAnimationFrame(C.rid),clearTimeout(C.id);var y=C.count;for(var x in C)delete C[x];C.active=!1,C.count=y,C.pause=function(){},C.clear=function(){}},h(),C},t.async=function(e,r,i,l,a){if(De("29"),!n(e)){var s=document.createElement("script"),f=mt(l);n(l)&&(l=f=="s"?2:2e3);var u;r?(i?u=i:u=r.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],t.asyncList||(t.asyncList={}),t.asyncList[u]||(t.asyncList[u]=[]),t.asyncList[u].push(r),t.async[u]=function(){var v=s,C=!1,h=setTimeout(function(){C=a,typeof r=="function"&&r("asyncError",a?"cancelled":"timeout")},l*(f=="s"?1e3:1));return function(g){clearTimeout(h),t.asyncList[u]&&(r=t.asyncList[u].shift()),typeof r=="function"&&!C&&r(g),v&&v.parentNode.removeChild(v),v=null}}()):(t.async.z_s&&t.async.z_s.parentNode&&t.async.z_s.parentNode.removeChild(t.async.z_s),t.async.z_s=s),e.match(/\?/)||(e+="?"),s.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(s)}},t.couple=function(e){if(De("29.2"),!t.isJSON(e))return e;var r=JSON.parse(e),i={};for(var l in r){var a=r[l];for(var s in a)i[l+"_"+s]=a[s]}return JSON.stringify(i)},t.decouple=function(e){if(De("29.3"),!t.isJSON(e))return e;var r=JSON.parse(e),i={};for(var l in r){var a=l.split("_",2);if(a.length!=2)return e;i[a[0]]||(i[a[0]]={}),i[a[0]][a[1]]=r[l]}return JSON.stringify(i)},t.convertColor=function(e,r,i){if(t.convertColorCheck||(De("27.5"),t.convertColorCheck=!0),n(r)&&(r="hex"),n(e)||!e.toLowerCase)return;e=et(e),e=e.toLowerCase(),r=r.toLowerCase();var l=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],a=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(r=="zim"){var s=t.colorsHex.indexOf(e);return s<0?e:t.colors[t.colorsHex.indexOf(e)]}r=="hsv"&&r=="hsl";var f,u;if(f=e.match(/rgba\((.*)\)/)){u=f[1].split(",");var v=u.pop();if(n(i)&&(i=v),r=="array")return u.push(v),u;if(e="rgb("+u.join(",")+")",r=="rgb")return e;if(r=="hsl")return g(u[0],u[1],u[2])}function C(A){var p=Number(A).toString(16);return p.length<2&&(p="0"+p),p}function h(A,p,T,B,F){return(F-B)*(A-p)/(T-p)+B}function g(A,p,T){A/=255,p/=255,T/=255;let B=Math.max(A,p,T),F=B-Math.min(A,p,T),D=F?B===A?(p-T)/F:B===p?2+(T-A)/F:4+(A-p)/F:0;return[60*D<0?60*D+360:60*D,100*(F?B<=.5?F/(2*B-F):F/(2-(2*B-F)):0),100*(2*B-F)/2]}function k(A){var p=A.split(","),T=C(p[0]),B=C(p[1]),F=C(p[2]),D=n(D)?"":C(Math.round(Number(p[3])*255));return[T,B,F,D]}n(i)&&(i=1);var y,x,I;if(f=e.match(/rgb\((.*)\)/))return r=="rgba"?"rgba("+f[1]+","+i+")":r=="hex"?(y=i!=1?","+i:"",x=k(f[1]+y),"#"+x[0]+x[1]+x[2]+x[3]):r=="hexnumber"?(y=i!=1?","+i:0,x=k(f[1]+y),parseInt(x[0]+""+x[1]+x[2],16)):r=="string"?(e=k(f[1]).join("").toLowerCase(),I=a.indexOf(e),I==-1?"#"+e:l[I]):r=="array"?(y=i!=1?","+i:0,k(f[1]+y)):r=="hsl"?(u=f[1].split(","),g(u[0],u[1],u[2])):e;function w(A){var p;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(A)?(p=A.substring(1).split(""),p.length==3&&(p=[p[0],p[0],p[1],p[1],p[2],p[2]]),p="0x"+p.join(""),r=="rgb"?"rgb("+[p>>16&255,p>>8&255,p&255]+")":r=="array"?[p>>16&255,p>>8&255,p&255,i]:"rgba("+[p>>16&255,p>>8&255,p&255].join(",")+","+i+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(A)?(p=A.substring(1).split(""),p.length==8&&(i=p.slice(-2).join(""),p=p.slice(0,6)),p.length==4&&(i=p[3]+""+p[3],p=[p[0],p[0],p[1],p[1],p[2],p[2]]),i=parseInt(i,16)/255,p="0x"+p.join(""),r=="rgb"?"rgb("+[p>>16&255,p>>8&255,p&255]+")":"rgba("+[p>>16&255,p>>8&255,p&255].join(",")+","+i+")"):r=="rgb"?"rgb(0,0,0)":"rgba(0,0,0,1)"}if(r=="hsl")return t.convertColor(t.convertColor(e,"rgb"),"hsl");if(r=="array"||r=="rgb"||r=="rgba")return e.charAt(0)=="#"?w(e):w(t.convertColor(e));if(r=="hex"){if(e.charAt(0)=="#")if(i!=1)if(y=C(Math.round(i*255)),e.length==4||e.length==5){var E=e.split("");return E[1]=E[1]+""+E[1],E[2]=E[2]+""+E[2],E[3]=E[3]+""+E[3],E[4]=y,E.join("")}else return e.length==9?e.substring(0,l.length-2)+y:e+y;else return e}else if(r=="hexnumber"){if(e.charAt(0)=="#")return parseInt(e.replace(/^#/,""),16)}else e.charAt(0)=="#"&&(e=e.replace("#",""),e.length==3&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)));return r=="string"?(I=a.indexOf(e),I==-1?"#"+e:l[I]):r=="hexnumber"?parseInt(a[l.indexOf(e.toLowerCase())!=-1?l.indexOf(e):0],16):(y=i!=1?C(Math.round(i*255)):"","#"+a[l.indexOf(e.toLowerCase())!=-1?l.indexOf(e):0]+y)},t.colorRange=function(e,r,i){t.colorRangeCheck||(De("27.6"),t.colorRangeCheck=!0),n(i)&&(i=.5),i=Math.max(0,Math.min(1,i)),n(e)&&(e="white"),n(r)&&(r="black");var l=e,a=r,s=t.convertColor(e,"rgb"),f=t.convertColor(r,"rgb");e=s.substring(4,s.length-1).split(","),r=f.substring(4,f.length-1).split(",");var u,v="#",C;if(i==0)v=l;else if(i==1)v=a;else for(var h=0;h<e.length;h++)u=r[h]-e[h],C=Math.floor(parseInt(e[h],10)+u*i).toString(16),C.length<2&&(C="0"+C),v+=C;return v},t.lighten=function(e,r){return t.lightenCheck||(De("27.65"),t.lightenCheck=!0),n(r)&&(r=.5),r>=0?t.colorRange(String(e),"#FFFFFF",r):t.colorRange(String(e),"#000000",-r)},t.darken=function(e,r){return n(r)&&(r=.5),t.darkenCheck||(De("27.66"),t.darkenCheck=!0),r>=0?t.colorRange(String(e),"#000000",r):t.colorRange(String(e),"#ffffff",-r)},t.toColor=function(e,r,i){return t.toColorCheck||(De("27.67"),t.toColorCheck=!0),n(i)&&(i=.5),t.colorRange(String(e),r,i)},t.toAlpha=function(e,r){return t.toAlphaCheck||(De("27.68"),t.toAlphaCheck=!0),n(r)&&(r=.5),t.convertColor(String(e),"rgba",r)},t.toBW=function(e){if(e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)return je("ZIM toBW() - needs hex input"),e;var r=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);return r*.299+i*.587+l*.114>186?"#000000":"#FFFFFF"},t.invertColor=function(e){if(t.invertColorCheck||(De("27.86"),t.invertColorCheck=!0),e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)return je("ZIM invertColor() - needs hex input"),e;var r=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);r=(255-r).toString(16),i=(255-i).toString(16),l=(255-l).toString(16);function a(s,f){f=f||2;var u=new Array(f).join("0");return(u+s).slice(-f)}return"#"+a(r)+a(i)+a(l)},t.zimEase=function(e,r,i,l,a){De("27.69");var s=!1;n(a)&&(a=!0);var f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D;if(e){if(Array.isArray(e[1])){s=!0,D=e[1],e=e[0];var P=0,Y=D[0],_=D[1],V=D[2],b=D[3],Z=1,$=5*(Y-P),Q=10*(_-P)-4*$,re=10*(V-P)+30*(Y-_),G=5*(b+P)-20*(V+Y)+30*_,L=Z-P-G-re-Q-$}f=0,u=e[0],v=e[1],C=e[2],h=e[3],g=1,k=5*(u-f),y=10*(v-f)-4*k,x=10*(C-f)+30*(u-v),I=5*(h+f)-20*(C+u)+30*v,w=g-f-I-x-y-k}else r?(w=r[0],I=r[1],x=r[2],y=r[3],k=r[4],u=k/5,v=(y+4*k)/10,C=(x+6*k+3*y)/10,h=(I+4*k+3*y+2*x)/5):(w=0,I=0,x=0,y=0,k=1);return i?(B=function(){return t.zimEase(null,[w,I,x,y,k],!0)},F={reverse:B,points:[u,v,C,h],polynomials:[w,I,x,y,k]},F.noPick=function(c){if(a){if(c<.025)return 0;if(c>.975)return 1}return c<.5?(c*=2,E=c*100,A=100,p=(E/=A)*E,T=p*E,(w*T*p+I*p*p+x*T+y*p+k*E)/2):(c=1-(c-.5)*2,E=c*100,A=100,p=(E/=A)*E,T=p*E,1-(w*T*p+I*p*p+x*T+y*p+k*E)/2)}):s?(B=function(){return ht&&je("zimEase - multi array points cannot be reversed"),t.zimEase(null,[w,I,x,y,k])},F={reverse:B,points:[[u,v,C,h],[Y,_,V,b]],polynomials:[[w,I,x,y,k],[L,G,re,Q,$]]},F.noPick=function(c){if(a){if(c<.025)return 0;if(c>.975)return 1}return c<.5?(c*=2,E=c*100,A=100,p=(E/=A)*E,T=p*E,(w*T*p+I*p*p+x*T+y*p+k*E)/2):(c=(c-.5)*2,E=c*100,A=100,p=(E/=A)*E,T=p*E,.5+(L*T*p+G*p*p+re*T+Q*p+$*E)/2)}):(B=function(){return t.zimEase(null,[w,I,x,y,k],null,!0)},F={reverse:B,points:[u,v,C,h],polynomials:[w,I,x,y,k]},l?F.noPick=function(c){if(a){if(c<.025)return 0;if(c>.975)return 1}return E=100-c*100,A=100,p=(E/=A)*E,T=p*E,1-(w*T*p+I*p*p+x*T+y*p+k*E)}:F.noPick=function(c){if(a){if(c<.025)return 0;if(c>.975)return 1}return E=c*100,A=100,p=(E/=A)*E,T=p*E,w*T*p+I*p*p+x*T+y*p+k*E}),F.noPick.reverse=B,F},t.spline=function(e,r,i,l,a){De("27.695"),n(e)&&(e=[]),n(r)&&(r=1),n(i)&&(i=!1),n(a)&&(a=i);var s;function f(b,Z){if(!Array.isArray(b[0]))for(s=0;s<b.length;s++)b[s]=[b[s].x,b[s].y];if(Z){var $=b[b.length-1],Q=b[b.length-2],re=b[0],G=b[1];b.unshift($),b.unshift(Q),b.push(re),b.push(G)}var L=[];for(s=0;s<b.length;s++)L.push(b[s][0],b[s][1]);return L}e=f(e,i);var u=e.length,v=u-4,C=i?e[2]:e[0],h=i?e[3]:e[1],g="M"+[C,h];l&&l.mt(C,h);var k=i?2:0,y=i?u-4:u-2,x=2;for(s=k;s<y;s+=x){var I=s?e[s-2]:e[0],w=s?e[s-1]:e[1],E=e[s+0],A=e[s+1],p=e[s+2],T=e[s+3],B=s!==v?e[s+4]:p,F=s!==v?e[s+5]:T,D=E+(p-I)/6*r,P=A+(T-w)/6*r,Y=p-(B-E)/6*r,_=T-(F-A)/6*r;g+="C"+[D,P,Y,_,p,T],l&&l.bt(D,P,Y,_,p,T)}if(a){var V=g.split("C");V.pop(),g=V.join("C")}return g},t.pointAlongCurve=function(e,r,i,l){if(De("27.7"),!(!e||!e[0]||!e[1]||!e[2]||!e[3])){n(l)&&(l=!1);var a=new t.Bezier(e[0],e[1],e[2],e[3]),s,f,u,v,C,h;if(l?(s=a.mx(r),f=a.my(r)):(s=a.x(r),f=a.y(r)),i){var g=r-.05,k=r+.05;g<0&&(g=0),k>1&&(k=1),l?(u=a.mx(g),v=a.my(g),C=a.mx(k),h=a.my(k)):(u=a.x(g),v=a.y(g),C=a.x(k),h=a.y(k));var y=t.angle(u,v,C,h);return{x:s,y:f,angle:y}}return{x:s,y:f}}},t.distanceAlongCurve=function(e){De("27.8");var r=t.dist(e[0],e[3]),i=t.dist(e[0],e[1])+t.dist(e[1],e[2])+t.dist(e[2],e[3]);return(r+i)/2},t.closestPointAlongCurve=function(e,r,i,l,a){De("27.9");var s=1e7,f,u=0,v=0;return n(i)&&(i=10),t.loop(r,function(C,h){var g=new t.Bezier(C[0],C[1],C[2],C[3]);t.loop(i,function(k,y){var x={x:g.x(k/y),y:g.y(k/y)},I=t.dist(e,x);I<s&&(s=I,f=x,u=h,v=k)})}),a?(u*i+v)/(r.length*i)*100:l?f:u},t.transformPoints=function(e,r,i,l,a){if(De("27.95"),!(n(e)||!Array.isArray(e))){n(l)&&(l=0),n(a)&&(a=0),e=t.copy(e);var s=l,f=a;r=="rotation"&&(l!=0&&(e=t.transformPoints(e,"x",-s)),a!=0&&(e=t.transformPoints(e,"y",-f)));for(var u,v=0;v<e.length;v++)if(u=e[v],!!Array.isArray(u)){if(r=="x")u[0]+=i;else if(r=="y")u[1]+=i;else if(r=="scaleX")u[0]=(u[0]-l)*i+l,u[4]=u[4]*i,u[6]=u[6]*i;else if(r=="scaleY")u[1]=(u[1]-a)*i+a,u[5]=u[5]*i,u[7]=u[7]*i;else if(r=="scale")u[0]=(u[0]-l)*i+l,u[4]=u[4]*i,u[6]=u[6]*i,u[1]=(u[1]-a)*i+a,u[5]=u[5]*i,u[7]=u[7]*i;else if(r=="rotation"){var C=i*Math.PI/180,h=u[0],g=u[1];u[0]=h*Math.cos(C)-g*Math.sin(C),u[1]=g*Math.cos(C)+h*Math.sin(C),h=u[4],g=u[5],u[4]=h*Math.cos(C)-g*Math.sin(C),u[5]=g*Math.cos(C)+h*Math.sin(C),h=u[6],g=u[7],u[6]=h*Math.cos(C)-g*Math.sin(C),u[7]=g*Math.cos(C)+h*Math.sin(C)}}return r=="rotation"&&(l!=0&&(e=t.transformPoints(e,"x",s)),a!=0&&(e=t.transformPoints(e,"y",f))),e}},t.trimPointEnds=function(e){De("27.97"),e[0][4]=0,e[0][5]=0,e[0][8]="free",e[e.length-1][6]=0,e[e.length-1][7]=0,e[e.length-1][8]="free"},t.reversePoints=function(e){return De("27.975"),e.reverse(),t.loop(e,function(r){var i=r[6];r[6]=r[4],r[4]=i;var l=r[7];r[7]=r[5],r[5]=l}),e},t.appendPoints=function(e,r,i){return De("27.98"),n(e)&&n(r)?[]:n(e)?r:(n(r)||(e[e.length-1][6]=r[0][6],e[e.length-1][7]=r[0][7],i&&(e[e.length-1][8]=i),r.shift(),e=e.concat(r)),e)},t.prependPoints=function(e,r,i){return De("27.985"),n(e)&&n(r)?[]:n(e)?r:(n(r)||(r[r.length-1][6]=e[0][6],r[r.length-1][7]=e[0][7],i&&(e[e.length-1][8]=i),e.shift(),e=r.concat(e)),e)},t.splitPoints=function(e,r,i){if(De("27.99"),!n(e)&&(n(r)&&(r=Math.floor(e.length/2)),!(r<0||r>e.length-1))){n(i)&&(i=!0);var l=t.copy(e.slice(0,r+1)),a=t.copy(e.slice(r));return i&&(t.trimPointEnds(l),t.trimPointEnds(a)),[l,a]}},t.makeID=function(e,r,i){De("13.5"),n(e)&&(e="mixed"),n(r)&&(r=5),n(i)&&(i="uppercase");var l,a=[2,3,4,5,6,7,8,9],s="abcdefghjkmnpqrstuvwxyz".split("");e.constructor===Array?l=e:e=="numbers"?l=a:e=="letters"?l=s:l=a.concat(s);for(var f="",u,v,C=0;C<r;C++)u=l[Math.floor(Math.random()*l.length)],v=Math.random(),i=="uppercase"||i=="mixed"&&v>.5?u.toUpperCase&&(u=u.toUpperCase()):u.toLowerCase&&(u=u.toLowerCase()),f+=String(u);return f},t.makeSyllable=function(e,r){De("13.55");var i="bcdfghjklmnprstvwxz",l="aeiouaeiouaeiouy";n(e)&&(e=3),n(r)&&(r=t.rand()<.3);function a(u){var v=t.rand(u.length-1),C=u.substring(v,v+1);return C}var s="",f=r?l:i;return t.loop(e,function(){s+=a(f),f=f==l?i:l}),s},t.makePrimitive=function(e){De("13.56");function r(i){return Array.isArray(i)?(t.loop(i,function(l){l=r(l)}),i):i.constructor==={}.constructor?(t.loop(i,function(l,a){i[l]=r(a)}),i):i instanceof String?String(i):i instanceof Number?Number(i):i instanceof Boolean?!!i:i}return r(e)},t.makeMath=function(){De("13.565");for(var e=Object.getOwnPropertyNames(Math),r=0;r<e.length;r++)j[e[r]]=Math[e[r]]},t.swapProperties=function(e,r,i){if(De("17.1"),n(r)||n(i)||n(r[e])||n(i[e]))return!1;var l=i[e];return i[e]=r[e],r[e]=l,!0},t.mobile=function(e){return De("28"),!n(j.MOBILE)&&j.MOBILE!="default"?j.MOBILE:!n(t.MOBILE)&&t.MOBILE!="default"?t.MOBILE:(n(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":e&&j.orientation!==void 0?/safari/i.test(navigator.userAgent)?"ios":!0:!1)},t.vee=function(e){return De("28.5"),!n(e)&&(e.type=="Pick"||Array.isArray(e)||e.constructor=={}.constructor&&(!n(e.max)||!n(e.noPick))||typeof e=="function")},t.extend=function(e,r,i,l,a){var s="subclass, superclass, override, prefix, prototype",f;if(f=at(t.extend,arguments,s))return f;if(n(e)||n(r)){ht&&e!=t.StageGL&&je("zim.extend() - please supply a class and its superclass");return}n(l)&&(l="super"),n(i)&&(i=[]),Array.isArray(i)||(i=[i]),n(a)&&(a=!0);var u={};for(var v in e.prototype)Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(e.prototype,v));function C(){this.constructor=e}C.prototype=r.prototype,e.prototype=new C;for(v in u)Object.defineProperty(e.prototype,v,Object.getOwnPropertyDescriptor(u,v));var h=e.prototype,g=Object.getPrototypeOf&&Object.getPrototypeOf(h)||h.__proto__;if(g){h[(l+="_")+"constructor"]=g.constructor;for(var k,y=0;y<i.length;y++)k=i[y],typeof g[k]=="function"&&(h[l+k]=g[k]);if(a)for(k in g)Object.prototype.hasOwnProperty.call(h,k)&&typeof g[k]=="function"&&(h[l+k]=g[k])}return e},t.copy=function(e,r,i){if(t.copyCheck||(De("10"),t.copyCheck=!0),n(r)&&(r=!1),n(i)&&(i=!0),e==null||!(e instanceof Array||e.constructor=={}.constructor))return r&&e!=null&&e.clone&&e.type&&(e.type!="Container"&&e.type!="Stage"&&e.type!="StageGL"||i)?e.clone():e;if(e instanceof Array){for(var l=[],a=0;a<e.length;a++)l[a]=t.copy(e[a],r,i);return l}if(e.constructor=={}.constructor){var s={};for(var f in e){var u=t.copy(e[f],r,i);Object.prototype.hasOwnProperty.call(e,f)&&(s[f]=u)}return s}},t.merge=function(){t.mergeCheck||(De("12"),t.mergeCheck=!0);var e={},r,i;for(r=0;r<arguments.length;r++)for(i in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],i)&&(e[i]=arguments[r][i]);return e},t.sortObject=function(e,r,i){De("12.1");var l=function(u){return u[r]},a=Object.entries(e).sort(function(u,v){return i?l(u[1])<l(v[1])?1:l(u[1])>l(v[1])?-1:0:l(u[1])>l(v[1])?1:l(u[1])<l(v[1])?-1:0}),s=new Map(a),f={};return s.forEach((u,v)=>{f[v]=u}),f},t.arraysEqual=function(e,r,i){if(De("11"),n(e)||n(r)||(n(i)&&(i=!0),e.length!=r.length))return!1;for(var l=0;l<e.length;l++)if(e[l]instanceof Array&&r[l]instanceof Array){if(!t.arraysEqual(e[l],r[l],i))return!1}else{if(i&&e[l]!=r[l])return!1;if(!i)return t.arraysEqual(e.sort(),r.sort(),!0)}return!0},t.arrayMinMax=function(e){if(De("11.2"),!Array.isArray(e))return{min:null,max:null};for(var r=e[0],i=e[0],l=e.length;l--;)r=e[l]<r?e[l]:r,i=e[l]>i?e[l]:i;return r=isNaN(r)?null:r,i=isNaN(i)?null:i,{min:r,max:i}},t.isEmpty=function(e){if(t.zimEmptyCheck||(De("11.5"),t.zimEmptyCheck=!0),!n(e)){var r=0;for(var i in e){r++;break}return r==0}},t.isJSON=function(e){if(De("11.6"),typeof e!="string")return!1;try{return JSON.parse(e),!0}catch (e5){return!1}},t.isPick=function(e){if(t.zimPickCheck||(De("11.7"),t.zimPickCheck=!0),!n(e))return Array.isArray(e)||e.constructor=={}.constructor&&(e.min!=null&&e.max!=null||e.noPick)||e.constructor===Function&&(e.array!=null||e()!=null)},t.zut=function(e){if(n(e)||typeof e=="object")return!0},t.decimals=function(e,r,i,l,a,s,f){if(t.zimDecimalCheck||(De("13"),t.zimDecimalCheck=!0),n(e))return 0;n(r)&&(r=1),n(i)&&(i=0),n(l)&&(l=1),n(a)&&(a=!0),n(s)&&(s=!1);var u=Math.round(e*Math.pow(10,r))/Math.pow(10,r);if(s){var v=u-Math.floor(u);u=t.decimals(Math.floor(u)+v*60/100,2)}var C=t.sign(u),h,g,k;if(i>0)for(h=String(u).indexOf("."),g=String(u).length,h<0&&(h=g++,u+="."),k=0;k<i-(g-h-1);k++)u+="0";if(l>1){C==-1&&(u=u.substr(1,u.length-1)),h=String(u).indexOf("."),g=String(u).length;var y=h<0?g:h;for(k=0;k<l-y;k++)u="0"+u;C==-1&&(u="-"+u)}return l==0&&(u=u.toString().replace(/^0\./,".")),i+l>0&&!a&&Number(u)==0&&(u=0),s&&(u=String(u).replace(".",":")),t.zut(f)?u:null},t.countDecimals=function(e){return t.zimCountDecimalsCheck||(De("13.05"),t.zimCountDecimalsCheck=!0),e%1?e.toString().split(".")[1].length:0},t.sign=function(e){return t.zimSignCheck||(De("13.1"),t.zimSignCheck=!0),e?e<0?-1:1:0},t.constrain=function(e,r,i,l){if(De("13.2"),!n(e)){if(n(r)&&(r=0),n(i)&&(i=Number.MAX_VALUE),i<r){var a=r;i=r,r=a}return n(l)&&(l=!1),l&&e<0?Math.max(-i,Math.min(e,-r)):Math.max(r,Math.min(e,i))}},t.dist=function(e,r,i,l){if(t.zimDistCheck||(De("13.3"),t.zimDistCheck=!0),!(n(e)||n(r)))return!n(e.x)&&!n(r.x)?(l=r.y,i=r.x,r=e.y,e=e.x):(n(i)&&(i=0),n(l)&&(l=0)),Math.sqrt(Math.pow(i-e,2)+Math.pow(l-r,2))},t.rectIntersect=function(e,r,i){return t.zimRectIntersectCheck||(De("13.32"),t.zimRectIntersectCheck=!0),n(i)&&(i=0),!(e.x>=r.x+r.width+i||e.x+e.width+i<=r.x||e.y>=r.y+r.height+i||e.y+e.height+i<=r.y)},t.boundsAroundPoints=function(e){t.zimBoundsAroundPointsCheck||(De("13.34"),t.zimBoundsAroundPointsCheck=!0);for(var r=1e4,i=1e4,l=-1e4,a=-1e4,s=0;s<e.length;s++){var f=e[s];f.x<r&&(r=f.x),f.x>l&&(l=f.x),f.y<i&&(i=f.y),f.y>a&&(a=f.y)}return{x:r,y:i,width:l-r,height:a-i}},t.angle=function(e,r,i,l){if(t.angleCheck||(De("13.4"),t.angleCheck=!0),!(n(e)||n(r)))return n(i)&&(i=e,e=0),n(l)&&(l=r,r=0),(Math.atan2(l-r,i-e)*180/Math.PI+360)%360},t.TAU=Math.PI*2,t.DEG=180/Math.PI,t.RAD=Math.PI/180,t.PHI=Math.pow(5,.5)*.5+.5,t.smoothStep=function(e,r,i){De("13.7");var l=t.constrain((e-r)/(i-r),0,1);return l*l*l*(l*(l*6-15)+10)},t.unicodeToUTF=function(e){if(De("13.75"),!!e){e!=" "&&(e=e.replace(/^\s+/g,""));var r,i="",l="";return r=e.charCodeAt(0),i=r,l=e.charCodeAt(1),l>=56320&&l<=57343&&(r=(i-55296)*1024+(l-56320)+65536),i=i.toString(16),l=l.toString(16),r=r.toString(16),"\\u"+i+"\\u"+l}},t.capitalizeFirst=function(e){return De("13.78"),e.charAt(0).toUpperCase()+e.slice(1)},t.Ajax=function(e,r,i,l){De("13.8");var a=new XMLHttpRequest;this.master=e,this.couple=r,this.lock=i,this.unique=l;var s=this;this.get=function(f,u){var v=n(s.master)?"":"&master="+encodeURI(e),C=n(s.lock)?"":"&lock="+encodeURI(i),h=s.unique?"&unique=true":"";a.open("GET",f+v+C+h,!0),a.onload=function(){a.status==200?u(t.isJSON(a.responseText)?JSON.parse(a.responseText):a.responseText):u(null,"Error: "+a.status)},a.send()},this.post=function(f,u,v,C,h){var g="url, data, command, extra, callback",k;if(k=at(s.post,arguments,g))return k;if(!n(f)){a.open("POST",f,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onload=function(){var E=a.responseText;t.isJSON(E)&&(s.couple&&(E=t.decouple(E)),E=JSON.parse(E)),h(E)},t.isJSON(u)||(u=JSON.stringify(u)),s.couple&&(u=t.couple(u));var y=n(s.master)?"":"&master="+encodeURIComponent(s.master),x=n(s.lock)?"":"&lock="+encodeURIComponent(s.lock),I=n(v)?"":"&command="+encodeURIComponent(v),w=n(C)?"":"&extra="+encodeURIComponent(C);a.send("data="+encodeURIComponent(u)+y+x+I+w)}},this.put=function(f,u,v){a.open("PUT",f,!0),a.setRequestHeader("Content-type","application/json"),a.onload=function(){v(t.isJSON(a.responseText)?JSON.parse(a.responseText):s.http.responseText)},a.send(JSON.stringify(u))}},t.Noise=function(e){"use strict";De("13.9"),n(e)&&(e=Math.random()*1e6);var r=e;this.seed=e;var i=this,l={};l.NORM_2D=1/47,l.NORM_3D=1/103,l.NORM_4D=1/30,l.SQUISH_2D=(Math.sqrt(2+1)-1)/2,l.SQUISH_3D=(Math.sqrt(3+1)-1)/3,l.SQUISH_4D=(Math.sqrt(4+1)-1)/4,l.STRETCH_2D=(1/Math.sqrt(2+1)-1)/2,l.STRETCH_3D=(1/Math.sqrt(3+1)-1)/3,l.STRETCH_4D=(1/Math.sqrt(4+1)-1)/4,l.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],l.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],l.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],l.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],l.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],l.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],l.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],l.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],l.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],l.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],l.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],l.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];function a(A){var p=new Uint32Array(1);return p[0]=A[0]*1664525+1013904223,p}function s(A,p,T){this.dx=-p-A*l.SQUISH_2D,this.dy=-T-A*l.SQUISH_2D,this.xsb=p,this.ysb=T}function f(A,p,T,B){this.dx=-p-A*l.SQUISH_3D,this.dy=-T-A*l.SQUISH_3D,this.dz=-B-A*l.SQUISH_3D,this.xsb=p,this.ysb=T,this.zsb=B}function u(A,p,T,B,F){this.dx=-p-A*l.SQUISH_4D,this.dy=-T-A*l.SQUISH_4D,this.dz=-B-A*l.SQUISH_4D,this.dw=-F-A*l.SQUISH_4D,this.xsb=p,this.ysb=T,this.zsb=B,this.wsb=F}var v=[],C,h,g,k,y,x;for(C=0;C<l.p2D.length;C+=4){for(k=l.base2D[l.p2D[C]],y=null,x=null,h=0;h<k.length;h+=3)x=new s(k[h],k[h+1],k[h+2]),y===null?v[C/4]=x:y.next=x,y=x;x.next=new s(l.p2D[C+1],l.p2D[C+2],l.p2D[C+3])}for(this.lookup2D=[],C=0;C<l.lookupPairs2D.length;C+=2)this.lookup2D[l.lookupPairs2D[C]]=v[l.lookupPairs2D[C+1]];var I=[];for(C=0;C<l.p3D.length;C+=9){for(k=l.base3D[l.p3D[C]],y=null,x=null,h=0;h<k.length;h+=4)x=new f(k[h],k[h+1],k[h+2],k[h+3]),y===null?I[C/9]=x:y.next=x,y=x;x.next=new f(l.p3D[C+1],l.p3D[C+2],l.p3D[C+3],l.p3D[C+4]),x.next.next=new f(l.p3D[C+5],l.p3D[C+6],l.p3D[C+7],l.p3D[C+8])}for(this.lookup3D=[],C=0;C<l.lookupPairs3D.length;C+=2)this.lookup3D[l.lookupPairs3D[C]]=I[l.lookupPairs3D[C+1]];var w=[];for(C=0;C<l.p4D.length;C+=16){for(k=l.base4D[l.p4D[C]],y=null,x=null,h=0;h<k.length;h+=5)x=new u(k[h],k[h+1],k[h+2],k[h+3],k[h+4]),y===null?w[C/16]=x:y.next=x,y=x;x.next=new u(l.p4D[C+1],l.p4D[C+2],l.p4D[C+3],l.p4D[C+4],l.p4D[C+5]),x.next.next=new u(l.p4D[C+6],l.p4D[C+7],l.p4D[C+8],l.p4D[C+9],l.p4D[C+10]),x.next.next.next=new u(l.p4D[C+11],l.p4D[C+12],l.p4D[C+13],l.p4D[C+14],l.p4D[C+15])}for(this.lookup4D=[],C=0;C<l.lookupPairs4D.length;C+=2)this.lookup4D[l.lookupPairs4D[C]]=w[l.lookupPairs4D[C+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var E=new Uint8Array(256);for(C=0;C<256;C++)E[C]=C;for(e=new Uint32Array(1),e[0]=r,e=a(a(a(e))),C=255;C>=0;C--)e=a(e),g=new Uint32Array(1),g[0]=(e[0]+31)%(C+1),g[0]<0&&(g[0]+=C+1),this.perm[C]=E[g[0]],this.perm2D[C]=this.perm[C]&14,this.perm3D[C]=this.perm[C]%24*3,this.perm4D[C]=this.perm[C]&252,E[g[0]]=E[C];this.simplex1D=function(A){return i.simplex2D(A,1)},this.simplex2D=function(A,p){var T=(A+p)*l.STRETCH_2D,B=[A+T,p+T],F=B[0],D=B[1],P=[Math.floor(F),Math.floor(D)],Y=P[0],_=P[1],V=(Y+_)*l.SQUISH_2D,b=[A-(Y+V),p-(_+V)],Z=b[0],$=b[1],Q=[F-Y,D-_],re=Q[0],G=Q[1],L=re+G,c=new Uint32Array(4);c[0]=re-G+1,c[1]=L,c[2]=L+G,c[3]=L+re;for(var d=c[0]|c[1]<<1|c[2]<<2|c[3]<<4,o=i.lookup2D[d],S=0;typeof o<"u";){var X=[Z+o.dx,$+o.dy],m=X[0],O=X[1],de=2-m*m-O*O;if(de>0){var R=[Y+o.xsb,_+o.ysb],N=R[0],se=R[1],ie=i.perm2D[i.perm[N&255]+se&255],q=l.gradients2D[ie]*m+l.gradients2D[ie+1]*O;de*=de,S+=de*de*q}o=o.next}return S*l.NORM_2D},this.simplex3D=function(A,p,T){var B=(A+p+T)*l.STRETCH_3D,F=[A+B,p+B,T+B],D=F[0],P=F[1],Y=F[2],_=[Math.floor(D),Math.floor(P),Math.floor(Y)],V=_[0],b=_[1],Z=_[2],$=(V+b+Z)*l.SQUISH_3D,Q=[A-(V+$),p-(b+$),T-(Z+$)],re=Q[0],G=Q[1],L=Q[2],c=[D-V,P-b,Y-Z],d=c[0],o=c[1],S=c[2],X=d+o+S,m=new Uint32Array(7);m[0]=o-S+1,m[1]=d-o+1,m[2]=d-S+1,m[3]=X,m[4]=X+S,m[5]=X+o,m[6]=X+d;for(var O=m[0]|m[1]<<1|m[2]<<2|m[3]<<3|m[4]<<5|m[5]<<7|m[6]<<9,de=i.lookup3D[O],R=0;typeof de<"u";){var N=[re+de.dx,G+de.dy,L+de.dz],se=N[0],ie=N[1],q=N[2],z=2-se*se-ie*ie-q*q;if(z>0){var ce=[V+de.xsb,b+de.ysb,Z+de.zsb],Ie=ce[0],K=ce[1],xe=ce[2],J=i.perm3D[i.perm[i.perm[Ie&255]+K&255]+xe&255],fe=l.gradients3D[J]*se+l.gradients3D[J+1]*ie+l.gradients3D[J+2]*q;z*=z,R+=z*z*fe}de=de.next}return R*l.NORM_3D},this.simplex4D=function(A,p,T,B){var F=(A+p+T+B)*l.STRETCH_4D,D=[A+F,p+F,T+F,B+F],P=D[0],Y=D[1],_=D[2],V=D[3],b=[Math.floor(P),Math.floor(Y),Math.floor(_),Math.floor(V)],Z=b[0],$=b[1],Q=b[2],re=b[3],G=(Z+$+Q+re)*l.SQUISH_4D,L=A-(Z+G),c=p-($+G),d=T-(Q+G),o=B-(re+G),S=[P-Z,Y-$,_-Q,V-re],X=S[0],m=S[1],O=S[2],de=S[3],R=X+m+O+de,N=new Uint32Array(11);N[0]=O-de+1,N[1]=m-O+1,N[2]=m-de+1,N[3]=X-m+1,N[4]=X-O+1,N[5]=X-de+1,N[6]=R<<6,N[7]=R+de,N[8]=R+O,N[9]=R+m,N[10]=R+X;for(var se=N[0]|N[1]<<1|N[2]<<2|N[3]<<3|N[4]<<4|N[5]<<5|N[6]<<6|N[7]<<8|N[8]<<11|N[9]<<14|N[10]<<17,ie=i.lookup4D[se],q=0;typeof ie<"u";){var z=[L+ie.dx,c+ie.dy,d+ie.dz,o+ie.dw],ce=z[0],Ie=z[1],K=z[2],xe=z[3],J=2-ce*ce-Ie*Ie-K*K-xe*xe;if(J>0){var fe=[Z+ie.xsb,$+ie.ysb,Q+ie.zsb,re+ie.wsb],U=fe[0],ue=fe[1],ke=fe[2],ne=fe[3],ve=i.perm4D[i.perm[i.perm[i.perm[U&255]+ue&255]+ke&255]+ne&255],we=l.gradients4D[ve]*ce+l.gradients4D[ve+1]*Ie+l.gradients4D[ve+2]*K+l.gradients4D[ve+3]*xe;J*=J,q+=J*J*we}ie=ie.next}return q*l.NORM_4D}},typeof Fe<"u"&&(t.Point=function(e,r,i,l,a,s,f,u,v,C){De("13.45"),n(e)&&(e=0),n(r)&&(r=0),n(i)&&(i=0),n(l)&&(l=0),n(a)&&(a=0),n(s)&&(s=0),n(f)&&(f=0),n(u)&&(u=0),n(v)&&(v=0),n(C)&&(C=0),this.createjsPoint_constructor(e,r),this.type="Point",this.x=e,this.y=r,this.z=i,this.q=l,this.r=a,this.s=s,this.t=f,this.u=u,this.v=v,this.w=C,this.angle=function(h){return this.createjsPoint_angle(h)*180/Math.PI},this.project=function(h,g){return this.createjsPoint_project(h*Math.PI/180,g)}},t.extend(t.Point,Fe.Point,["angle","project"],"createjsPoint")),t.Bezier=function(r,i,l,a){De("13.47"),this.a=r,this.b=i,this.c=l,this.d=a,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var s=this.x(0),f=this.y(0),u=0,v=1;v<=this.len;v+=1){var C=this.x(v*.01),h=this.y(v*.01),g=s-C,k=f-h;u+=Math.sqrt(g*g+k*k),this.arcLengths[v]=u,s=C,f=h}this.length=u},t.Bezier.prototype={map:function(e){for(var r=e*this.arcLengths[this.len],i=0,l=this.len,a=0;i<l;)a=i+((l-i)/2|0),this.arcLengths[a]<r?i=a+1:l=a;this.arcLengths[a]>r&&a--;var s=this.arcLengths[a];return s===r?a/this.len:(a+(r-s)/(this.arcLengths[a+1]-s))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+3*((1-e)*(1-e))*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+3*((1-e)*(1-e))*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},t.Boundary=function(e,r,i,l){De("13.46"),e.x&&(l=e.height,i=e.width,r=e.y,e=e.x),!(n(e)||n(r)||n(i)||n(l))&&(this.x=e,this.y=r,this.width=i,this.height=l,this.contract=function(a,s,f,u){return n(a)?this:(n(s)&&(s=a),n(f)?f=a*2:f=f+a,n(u)?u=s*2:u=u+s,this.x+=a,this.y+=s,this.width-=f,this.height-=u,this)})},t.GradientColor=function(e,r,i,l,a,s){if(De("13.465"),this.type="GradientColor",this.colors=n(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=n(r)?0:r,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var f=0;f<this.colors.length;f++)this.ratios.push(f/(this.colors.length-1))}!n(i)&&(n(l)||n(a)||n(s))?(this.angle=i,i=null):n(this.angle)&&n(i)&&n(l)&&n(a)&&n(s)?this.angle=0:(this.x0=n(i)?0:i,this.y0=n(l)?0:l,this.x1=n(a)?0:a,this.y1=n(s)?100:s)},t.RadialColor=function(e,r,i,l,a,s,f,u){if(De("13.466"),this.type="RadialColor",this.colors=n(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=r,!Array.isArray(this.ratios)){this.ratios=[];for(var v=0;v<this.colors.length;v++)this.ratios.push(v/(this.colors.length-1))}this.x0=i,this.y0=l,this.r0=a,this.x1=s,this.y1=f,this.r1=u},t.BitmapColor=function(e,r,i){De("13.467"),this.type="BitmapColor",typeof e=="string"&&j.asset&&(e=j.asset(e)),e.type!="Bitmap"&&e.bitmap&&(e=e.bitmap),this.image=e.type=="Bitmap"?e.image:e,this.repetition=r,this.matrix=i},t.Damp=function(e,r){De("14");var i="startValue, damp",l;if(l=at(t.Damp,arguments,i,this))return l;this.lastValue=n(e)?0:e,this.damp=n(r)?.1:r},t.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},t.Damp.prototype.immediate=function(e){return this.lastValue=e,this},t.Proportion=function(e,r,i,l,a,s,f){var u="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",v;if(v=at(t.Proportion,arguments,u,this))return v;De("15"),n(i)&&(i=0),n(l)&&(l=1),n(a)&&(a=1),n(s)&&(s=!1),n(f)&&(f=!0);var C,h;this.convert=function(g){if(n(g)&&(g=e),!(isNaN(g)||r-e==0))return f&&(g=Math.max(g,e),g=Math.min(g,r)),C=(g-e)/(r-e),a>0?h=i+(l-i)*C:h=l-(l-i)*C,s&&(h=Math.round(h)),h}},t.ProportionDamp=function(e,r,i,l,a,s,f,u){var v="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",C;if(C=at(t.ProportionDamp,arguments,v,this))return C;De("16"),n(i)&&(i=0),n(l)&&(l=1),n(a)&&(a=.1),n(s)&&(s=1),n(f)&&(f=!1),n(u)&&(u=!0),this.damp=a;var h=this,g,k,y,x,I,w=0,E=0;g=e,E=i;var A=setInterval(p,20);function p(){isNaN(g)||r-e==0||(u&&(g=Math.max(g,e),g=Math.min(g,r)),k=(g-e)/(r-e),y=l-i,s>0?x=i+y*k:x=l-y*k,w=x,I=w-E,E+=I*h.damp)}this.immediate=function(T){return h.convert(T),p(),E=x,f&&(E=Math.round(E)),h},this.immediateValue=function(T){return w=E=T,h},this.convert=function(T){return g=T,f?Math.round(E):E},this.dispose=function(){return clearInterval(A),!0}},t.Dictionary=function(e){De("17"),this.length=0,this.unique=e;var r=this.objects=[],i=this.values=[];this.type="Dictionary",this.add=function(l,a){n(l)||(n(a)&&(a=!0),this.unique&&this.remove(l),r.push(l),i.push(a),this.length++)},this.at=function(l){if(!n(l)){var a=r.indexOf(l);return a>-1?i[a]:null}},this.remove=function(l){if(n(l))return!1;var a=r.indexOf(l);return a>-1?(r.splice(a,1),i.splice(a,1),this.length--,!0):!1},this.clear=function(){return r=this.objects=[],i=this.values=[],this.length=null,this},this.dispose=function(){return r=null,i=null,this.length=null,!0}},t.Hierarchy=function(e,r){De("17.5");var i=this;if(n(e))return;n(r)&&(r=!1);var l;i.processSimple=function(u){var v=0,C={};function h(g,k,y,x){if(n(g)||(u=g),u.constructor=={}.constructor){var I;u.list&&(I=u,u=u.list),x&&I&&t.loop(I,function(w,E){w!="list"&&(x[w]=E)}),t.loop(u,function(w,E){var A={},p=k["id"+v]={obj:w,level:y,open:r,opened:!1,list:A};v++,h(E,A,y+1,p)})}else Array.isArray(u)&&t.loop(u,function(w){k["id"+v]={obj:w},v++})}return h(e,C,0),l=v,C},i.processComplex=function(u){var v=0;function C(h,g){t.loop(h,function(k,y){y.level=g,n(y.open)&&(y.open=r),n(y.opened)&&(y.opened=!1),y.list&&C(y.list,g+1),v++})}return C(u,0),l=v,u},n(e.id0)?i.data=i.processSimple(e):i.data=i.processComplex(e),i.getLinearList=function(u){return n(u)&&(u=i.data),a(u)[0]},i.getLinearIDs=function(u){return n(u)&&(u=i.data),a(u)[1]};function a(u){var v=[],C=[];function h(g,k){t.loop(g,function(y,x){v.push(x.obj),C.push(y),x.open&&h(x.list,k+1)})}return h(u,0),[v,C]}i.getData=function(u){var v;function C(h){t.loop(h,function(g,k){if(g==u)return v=k,v;C(k.list)})}return C(i.data),v},i.getNextSibling=function(u){var v,C;function h(g){t.loop(g,function(k,y){if(!C&&v)return C=k,C;k==u?v=y:h(y.list)})}return h(i.data),C},i.getPrevSibling=function(u){var v=[],C;function h(g,k){t.loop(g,function(y,x){if(y==u)return C=v[k]||v[k-1],C;v[k]=y,h(x.list,k+1)})}return h(i.data,0),C},i.insertBefore=function(u,v,C){return s("insertBefore",u,v,C)},i.insertAfter=function(u,v,C){return s("insertAfter",u,v,C)},i.removeItem=function(u){return s("removeItem",null,u)},i.replaceItem=function(u,v){var C=i.getData(v);return C.obj=u,s("replaceItem")};function s(u,v,C,h){var g=0,k={},y=i.data;function x(I,w,E,A){t.loop(I,function(p,T){if(!(u=="removeItem"&&p==C)){var B,F,D;u=="insertBefore"&&p==C&&(g=f(w,g,E,v,h)),B={},F=T.list,T.list=B,T.opened=!1,T.open=!1,D=w["id"+g]=T,D.obj.type&&D.obj.type=="TabsButton"&&(D.obj=D.obj.text),g++,x(F,B,E+1),u=="insertAfter"&&p==C&&(g=f(w,g,E,v,h))}})}return x(y,k,0),l=g,k}function f(u,v,C,h,g){if(g){var k={};Array.isArray(h)&&(h=h[0]),u["id"+v]={obj:h,level:C,open:!1,opened:!1,list:k},v++,Array.isArray(g)||(g=[g]),t.loop(g,function(y){k["id"+v]={obj:y,level:C+1,open:!1,opened:!1,list:{}},v++})}else Array.isArray(h)||(h=[h]),t.loop(h,function(y){u["id"+v]={obj:y,level:C,open:!1,opened:!1,list:{}},v++});return v}i.getParent=function(u){var v=i.data;function C(h,g){var k=t.loop(h,function(y,x){if(y==u)return l-=1,g;if(x.list&&!t.isEmpty(x.list))return C(x.list,y)});if(k!==!0)return k}return C(v)},Object.defineProperty(i,"length",{get:function(){return l},set:function(){ht&&je("Hierarchy() - length is read only")}})},t.Pick=function(e){t.pickCheck||(De("17.6"),t.pickCheck=!0),this.choices=e,this.num=function(i){for(var l=[],a=0;a<i;a++)l.push(t.Pick.choose(this));return this.choices=t.Pick.series(l),this};var r=this;this.loop=function(i,l){for(var a,s=0;s<i;s++)if(a=l(t.Pick.choose(r),s,i),typeof a<"u")return a}},t.Pick.prototype.type="Pick",t.Pick.series=function(){return t.pickCheck||(De("17.6"),t.pickCheck=!0),t.series.apply(null,arguments)},t.Pick.rand=function(e,r,i,l){return t.pickCheck||(De("17.6"),t.pickCheck=!0),t.rand(e,r,i,l)},t.Pick.choose=function(e,r,i){if(t.pickCheck||(De("17.6"),t.pickCheck=!0),r==null&&(r=!0),e==null)return e;if(e.type=="Pick"||r){var l=e.choices||e,a;return Array.isArray(l)?(a=l[Math.floor(Math.random()*l.length)],t.Pick.choose(a)):l.constructor==={}.constructor?n(l.noPick)?n(l.max)?l:(n(l.integer)&&(l.integer=!1),a=t.Pick.rand(l.min,l.max,l.integer,l.negative),a):l.noPick:l instanceof Function?(l.count==null?l.count=0:l.count++,t.Pick.choose(l(i,!0))):e}else return e},t.Pick.getMinMax=function(e){return!n(e.min)&&!n(e.max)?e:Array.isArray(e)?t.arrayMinMax(e):e.type=="series"?t.arrayMinMax(e.array):{min:null,max:null}},t.scrollX=function(e,r){return De("18"),t.abstractScroll("X","Left",e,r)},t.scrollY=function(e,r){return De("19"),t.abstractScroll("Y","Top",e,r)},t.abstractScroll=function(e,r,i,l){De("20");var a=mt(l),s=e=="X"?"Y":"X";if(n(i))return document.documentElement&&document.documentElement["scroll"+r]||document.body["scroll"+r];if(n(l))j.scrollTo(t["scroll"+s](),i);else{var f=50,u=l*(a=="s"?1e3:1);u<f&&(u=f);var v=u/f,C=t["scroll"+e](),h=i-C,g=h/v,k=0,y=setInterval(function(){k++,C+=g,j.scrollTo(t["scroll"+s](),C),k>=v&&(j.scrollTo(t["scroll"+s](),i),clearInterval(y))},f)}return i},t.windowWidth=function(){De("21");var e=isNaN(j.innerWidth)?j.clientWidth:j.innerWidth,r=isNaN(j.innerHeight)?j.clientHeight:j.innerHeight;if(t.mobile()&&!n(j.orientation)&&!j.parent&&(e>r&&Math.abs(j.orientation)!=90||r>e&&Math.abs(j.orientation)==90)){var i=e;e=r,r=i}return j.zdf&&j.zdf.swapRotation?r:e},t.windowHeight=function(){De("22");var e=isNaN(j.innerWidth)?j.clientWidth:j.innerWidth,r=isNaN(j.innerHeight)?j.clientHeight:j.innerHeight;if(t.mobile()&&!n(j.orientation)&&!j.parent&&(e>r&&Math.abs(j.orientation)!=90||r>e&&Math.abs(j.orientation)==90)){var i=e;e=r,r=i}return j.zdf&&j.zdf.swapRotation?e:r},t.browserZoom=function(){if(t.zimBZ)return n(t.zimBZA)?t.decimals((j.devicePixelRatio||1)/t.zimBZ1,2):t.zimBZA;if(De("22.2"),t.zimBZ=!0,typeof e>"u")if(j.zdf)var e=j.zdf;else return t.zimBZA=1,1;if(e.retina)t.zimBZ1=j.devicePixelRatio||1;else return t.zimBZA=1,1},t.getQueryString=function(e){if(De("22.5"),n(e)&&(e=location.search.replace("?","")),e=="")return{};for(var r=e.split("&"),i={},l=0;l<r.length;l++){var a=r[l].split("=");typeof i[a[0]]>"u"?i[a[0]]=decodeURIComponent((a[1]+"").replace(/\+/g,"%20")):typeof i[a[0]]=="string"?i[a[0]]=[i[a[0]],decodeURIComponent((a[1]+"").replace(/\+/g,"%20"))]:i[a[0]].push(decodeURIComponent((a[1]+"").replace(/\+/g,"%20")))}return i},t.swapHTML=function(e,r){return De("17.2"),t.swapProperties("innerHTML",xn(e),xn(r))},t.urlEncode=function(e){return De("23"),e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},t.urlDecode=function(e){return De("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},t.setCookie=function(e,r,i){if(De("25"),!(n(e)||n(r))){var l;if(i){var a=new Date;a.setTime(a.getTime()+i*24*60*60*1e3),l="; expires="+a.toGMTString()}else l="";return document.cookie=e+"="+escape(r)+l+"; path=/",!0}},t.getCookie=function(e){De("26");for(var r=document.cookie.split(/;\s*/),i=new Array,l,a=0;a<r.length;a++)l=r[a].split("="),i[l[0]]=l[1];if(!(typeof i[e]>"u"))return unescape(i[e])},t.deleteCookie=function(e){return De("27"),n(t.getCookie(e))?!1:(t.setCookie(e,"",-1),!0)},Fe==null)return ht&&ni("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),t;t.localToGlobal=function(r,i,l,a){if(t.coordinatesCheck||(De("50.43"),t.coordinatesCheck=!0),!(r==null||i==null)){var s=a.call(l,r,i),f=l.stage;if(!j.zdf){if(!f)return s;j.zdf={stage:f,canvas:f.canvas}}return s.x/=t.scaX,s.y/=t.scaY,s}},t.globalToLocal=function(r,i,l,a){if(t.coordinatesCheck||(De("50.43"),t.coordinatesCheck=!0),!(r==null||i==null)){var s=l.stage;if(!j.zdf){if(!s)return a.call(l,r,i);j.zdf={stage:s,canvas:s.canvas}}r*=t.scaX,i*=t.scaY;var f=a.call(l,r,i);return f}},t.localToLocal=function(r,i,l,a){if(t.coordinatesCheck||(De("50.43"),t.coordinatesCheck=!0),!(r==null||i==null||l==null)){var s=a.localToGlobal(r,i),f=a.stage;if(!j.zdf){if(!f)return l.globalToLocal(s.x,s.y);j.zdf={stage:f,canvas:f.canvas}}if(f||(f=j.zdf.stage),l==f)return s;if(s)return l.globalToLocal(s.x,s.y)}},t.displayBase=function(e){t.zimDBCheck||(De("50.432"),t.zimDBCheck=!0);var r=e;if(Object.defineProperty(e,"width",{enumerable:!0,get:function(){var u=this.getBounds();return n(u)?null:Math.abs(u.width*this.scaleX)},set:function(u){if(e.scaleDimensions!==!1){var v=this.getBounds();if(n(v)||v.width==0){ht&&je("DisplayObject() - width needs bounds set with setBounds()");return}var C=u/v.width;this.scaleX=this.scaleY=C}else{var h=e.width!=0?e.height/e.width:0;e.setWidth(u),e.setHeight(u*h),e.drawShape()}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var u=this.getBounds();return n(u)?null:Math.abs(u.height*this.scaleY)},set:function(u){if(e.scaleDimensions!==!1){var v=this.getBounds();if(n(v)||v.height==0){ht&&je("DisplayObject() - height needs bounds set with setBounds()");return}var C=u/v.height;this.scaleX=this.scaleY=C}else{var h=e.height!=0?e.width/e.height:0;e.setHeight(u),e.setWidth(u*h),e.drawShape()}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var u=this.getBounds();return n(u)?null:Math.abs(u.width*this.scaleX)},set:function(u){if(e.scaleDimensions!==!1){var v=this.getBounds();if((n(v)||v.width==0)&&ht){je("DisplayObject() - widthOnly needs bounds set with setBounds()");return}var C=u/v.width;this.scaleX=C}else e.setWidth(u),e.drawShape()}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var u=this.getBounds();return n(u)?null:Math.abs(u.height*this.scaleY)},set:function(u){if(e.scaleDimensions!==!1){var v=this.getBounds();if((n(v)||v.height==0)&&ht){je("DisplayObject() - heightOnly needs bounds set with setBounds()");return}var C=u/v.height;this.scaleY=C}else e.setHeight(u),e.drawShape()}}),Object.defineProperty(e,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(u){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(u,this.parent.numChildren-1)))}}),Object.defineProperty(e,"depth",{enumerable:!0,get:function(){return this._depth},set:function(u){if(this._depth=u,!n(this.vrChannel)){var v=this.vrParallaxDistance?u*this.vrParallax*this.vrParallaxDistance:0;this.vrChannel=="left"?this.x=this.vrStartX+u+v:this.vrChannel=="right"&&(this.x=this.vrStartX-u+v)}}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(u){this.compositeOperation=u}}),!r.name){var i;Object.defineProperty(r,"name",{get:function(){return i},set:function(u){i=u,t.zimObjectIDs[u]=r}})}r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(u){u!=this._draggable&&(this._draggable=u,this._draggable?this.drag():this.noDrag())}});var l,a;r.on("mousedown",function(u){u.target.stage&&(l=u.target.stage.frame,l.allowDefault&&(a=!0,l.allowDefault=!1))}),r.on("pressup",function(){l&&a&&(l.allowDefault=!0)});for(var s=["hue","saturation","brightness","contrast"],f=0;f<s.length;f++)-function(){for(var u=s[f],v=0;v<2;v++)-function(){var C=v==0?"":"Batch";Object.defineProperty(r,u+C,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[u]:0},set:function(h){!r.effects||!r.effects.multi?r.effect(new t.MultiEffect(u=="hue"?h:0,u=="saturation"?h:0,u=="brightness"?h:0,u=="contrast"?h:0)):r.effects.multi[u]=h,C==""&&r.updateEffects()}})}()}()},t.gD=function(e){if(t.zimGDCheck||(De("50.435"),t.zimGDCheck=!0),!!e){if(e.z_bc){var r=e.z_bc;r.width=r.height=1,r.getContext&&r.getContext("2d").clearRect(0,0,1,1),delete e.z_bc}t.KEYFOCUS==e&&(t.KEYFOCUS=null),j.KEYFOCUS==e&&(j.KEYFOCUS=null),e.veeObj&&(e.veeObj=null),e.draggable&&e.noDrag(),e.zimTweens&&e.stopAnimate(),e.zimWire&&e.noWire(),e.zimWired&&e.noWired(),e.zimClickHoldDownEvent&&e.noHold(),e.transformControls&&e.transformControls.dispose(),e.zimClickDownEvent&&(e.zimClickDownEvent=null),e.zimClickUpEvent&&(e.zimClickUpEvent=null),e.physics&&e.removePhysics(),e.name&&t.zimObjectIDs[e.name]==e&&delete t.zimObjectIDs[e.name]}},t.Stage=function(e,r,i){if(De("50.44"),!n(e)){var l=e.tagName=="CANVAS"?e:xn(e);n(l)||(this.cjsStage_constructor(e),this.setBounds(0,0,l.width,l.height),this.type="Stage",j.zdf||(j.zimDefaultFrame=j.zdf={stage:this}),i?Fe.Touch.enable(this,!0):r&&Fe.Touch.enable(this,!1),this.cache=function(a,s,f,u,v,C){if(n(f))if(n(a)){var h=this.getBounds();if(!n(h)){var g=this.borderWidth>0?this.borderWidth/2:0;a=h.x-g,s=h.y-g,f=h.width+g*2,u=h.height+g*2}}else f=a,u=s,a=0,s=0;return this.cjsStage_cache(a,s,f,u,v,C),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(a){var s=a.clone();s.type="pressdown",a.target.dispatchEvent(s)},void 0,!1,void 0,!0),this.loop=function(a,s,f,u,v,C){return t.loop(this,a,s,f,u,v,C)},this.hitTestGrid=function(a,s,f,u,v,C,h,g,k,y,x,I){return t.hitTestGrid(this,a,s,f,u,v,C,h,g,k,y,x,I)},this.disposeAllChildren=function(){for(var a=this.numChildren-1;a>=0;a--){var s=this.getChildAt(a);s.dispose&&s.dispose()}return this},this.frame=j.zdf,Fe&&!Fe.stageTransformable&&(j.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(a){this.cjsStage_scaleX=a,this.cjsStage_scaleY=a,t.scaX=Fe.stageTransformable?1:a,t.scaY=Fe.stageTransformable?1:a}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(a){this.cjsStage_scaleX=a,t.scaX=Fe.stageTransformable?1:a}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(a){this.cjsStage_scaleY=a,t.scaY=Fe.stageTransformable?1:a}}),this.localToGlobal=function(a,s){return t.localToGlobal(a,s,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(a,s){return t.globalToLocal(a,s,this,this.cjsStage_globalToLocal)},this.localToLocal=function(a,s,f){return t.localToLocal(a,s,f,this)}))}},t.extend(t.Stage,Fe.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),t.StageGL=function(e,r,i,l){if(De("50.45"),!n(e)){var a=e.tagName=="CANVAS"?e:xn(e);n(a)||(this.cjsStageGL_constructor(e,r),this.setBounds(0,0,a.width,a.height),this.type="StageGL",j.zdf||(j.zdf={stage:this}),l?Fe.Touch.enable(this,!0):i&&Fe.Touch.enable(this,!1),this.cache=function(s,f,u,v,C,h){if(n(u))if(n(s)){var g=this.getBounds();if(!n(g)){var k=this.borderWidth>0?this.borderWidth/2:0;s=g.x-k,f=g.y-k,u=g.width+k*2,v=g.height+k*2}}else u=s,v=f,s=0,f=0;return this.cjsStageGL_cache(s,f,u,v,C,h),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(s){var f=s.clone();f.type="pressdown",s.target.dispatchEvent(f)},void 0,!1,void 0,!0),this.loop=function(s,f,u,v,C,h){return t.loop(this,s,f,u,v,C,h)},this.hitTestGrid=function(s,f,u,v,C,h,g,k,y,x,I,w){return t.hitTestGrid(this,s,f,u,v,C,h,g,k,y,x,I,w)},this.disposeAllChildren=function(){for(var s=this.numChildren-1;s>=0;s--){var f=this.getChildAt(s);f.dispose&&f.dispose()}return this},this.frame=j.zdf,Fe&&!Fe.stageTransformable&&(j.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(s){this.cjsStage_scaleX=s,this.cjsStage_scaleY=s,t.scaX=Fe.stageTransformable?1:s,t.scaY=Fe.stageTransformable?1:s}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(s){this.cjsStage_scaleX=s,t.scaX=Fe.stageTransformable?1:s}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(s){this.cjsStage_scaleY=s,t.scaY=Fe.stageTransformable?1:s}}),this.localToGlobal=function(s,f){return t.localToGlobal(s,f,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(s,f){return t.globalToLocal(s,f,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(s,f,u){return t.localToLocal(s,f,u,this)}))}},t.extend(t.StageGL,Fe.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),t.Container=function(e,r,i,l,a,s,f){var u="a, b, c, d, style, group, inherit",v;if(v=at(t.Container,arguments,u,this))return v;t.containerCheck||(De("50.5"),De("50.435"),t.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=s;var C=this,h=a===!1?{}:t.getStyle(this.type,this.group,f);n(e)&&(e=h.a!=null?h.a:null),n(r)&&(r=h.b!=null?h.b:null),n(i)&&(i=h.c!=null?h.c:null),n(l)&&(l=h.d!=null?h.d:null);var g=k(e,r,i,l);function k(x,I,w,E){var A=[];return n(x)?A=[x,I,w,E]:n(I)?x.x?A=[x.x,x.y,x.width,x.height]:(A[0]=0,A[1]=0,A[2]=x,A[3]=x):n(w)?(A[0]=0,A[1]=0,A[2]=x,A[3]=I):(A[0]=x,A[1]=I,A[2]=w,A[3]=E),n(A[3])&&(A[3]=A[2]),A}n(e)||this.setBounds(g[0],g[1],g[2],g[3]),this.cache=function(x,I,w,E,A,p,T,B,F){if(C.type=="AC"&&j.zdf)return j.zdf.ac("cache",arguments,C),C;var D="a,b,c,d,scale,options,margin,rtl,willReadFrequently",P;if(P=at(C.cache,arguments,D))return P;var Y=C.getBounds();if(n(w))if(n(x)){if(!n(Y)){var _=C.borderWidth>0?C.borderWidth/2:0;x=Y.x-_,I=Y.y-_,w=Y.width+_*2,E=Y.height+_*2}}else w=x,E=I,x=0,I=0;return C.type=="Triangle"&&(x-=C.borderWidth?C.borderWidth:0,w+=C.borderWidth?C.borderWidth*2:0,I-=C.borderWidth?C.borderWidth:0,E+=C.borderWidth?C.borderWidth*2:0),n(T)&&(T=0),C.cjsContainer_cache(x-T,I-T,w+T*2,E+T*2,A,p,B,F),Y&&C.setBounds(Y.x,Y.y,Y.width,Y.height),C.z_bc=C.canvas=C.cacheCanvas,C},this.uncache=function(){return C.cjsContainer_uncache(),C},this.childrenToBitmap=function(){var x=this.cacheCanvas,I=new t.Bitmap(this.cache().cacheCanvas);return x||this.uncache(),this.removeAllChildren(),I.addTo(this),this};var y=j.zdf||1;Fe&&!Fe.stageTransformable&&y.retina&&(this.localToGlobal=function(x,I){return t.localToGlobal(x,I,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(x,I){return t.globalToLocal(x,I,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(x,I,w){return t.localToLocal(x,I,w,this)}),this.setBounds=function(x,I,w,E){var A=k(x,I,w,E);return C.cjsContainer_setBounds(A[0],A[1],A[2],A[3]),C},this.getBounds=function(x){return x?C.boundsToGlobal(null,null,null,x):C.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var x=this.numChildren-1;x>=0;x--){var I=this.getChildAt(x);I.dispose&&I.dispose()}return this},t.displayBase(C),a!==!1&&t.styleTransforms(this,h),this.clone=function(x){if(this.type=="AC"&&j.zdf)return ht&&je("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),j.zdf.ac("clone",arguments,this),this;var I=this.getBounds();return n(I)&&(I={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new t.Container(I.x,I.y,I.width,I.height,a,this.group,f)),x)},this.hasProp=function(x){return!n(this[x])||Object.prototype.hasOwnProperty.call(this,x)}},t.Container.prototype.dispose=function(e){return It(this,e),!0},t.Container.prototype.specialColor=function(e,r,i){if(r.type=="GradientColor"){if(!n(r.angle))if(i.width){var l=i.getBounds();if(r.angle+=360*1e5,r.angle%=360,i.type=="Circle"){var a=l.width/2*Math.cos(r.angle*RAD),s=l.width/2*Math.sin(r.angle*RAD);r.x0=-a,r.y0=-s,r.x1=a,r.y1=s}else{var f=r.angle%90,u=l.width*Math.sin(f*RAD),v=u*Math.sin(f*RAD),C=-u*Math.cos(f*RAD),h=l.height*Math.sin(f*RAD),g=l.width+h*Math.cos(f*RAD),k=h*Math.sin(f*RAD),y=l.height*Math.sin(f*RAD),x=-y*Math.cos(f*RAD),I=l.height-y*Math.sin(f*RAD);r.angle>=0&&r.angle<90?(r.x0=l.x+v,r.y0=l.y+C,r.x1=l.x+g,r.y1=l.y+k):r.angle>=90&&r.angle<180?(r.x0=l.x+v,r.y0=l.y+C,r.x1=l.x+x,r.y1=l.y+I):r.angle>=180&&r.angle<270?(r.x0=l.x+g,r.y0=l.y+k,r.x1=l.x+v,r.y1=l.y+C):(r.x0=l.x+x,r.y0=l.y+I,r.x1=l.x+v,r.y1=l.y+C)}}else{e.style=r.colors[0];return}e.linearGradient(r.colors,r.ratios,r.x0,r.y0,r.x1,r.y1)}else if(r.type=="RadialColor"){if(n(r.x0))if(i.width){var l=i.getBounds();r.r0=0,i.type=="Circle"?(r.x0=0,r.y0=0,r.r1=l.width/2):(r.x0=l.x+l.width/2,r.y0=l.y+l.height/2,r.r1=Math.sqrt(Math.pow(l.width/2,2)+Math.pow(l.height/2,2))),r.x1=r.x0,r.y1=r.y0}else{e.style=r.colors[0];return}e.radialGradient(r.colors,r.ratios,r.x0,r.y0,r.r0,r.x1,r.y1,r.r1)}else r.type=="BitmapColor"&&e.bitmap(r.image,r.repetition,r.matrix)};function It(e,r){if(e&&t.gD(e),!r&&e&&e.dispose&&e.dispose!==t.Container.prototype.dispose&&e.dispose(null,null,!0),e&&e.addChild&&(e.dispatchEvent("removed"),e.removeAllEventListeners(),e.numChildren))for(var i=e.numChildren-1;i>=0;i--)It(e.getChildAt(i));e&&e.parent&&e.parent.removeChild(e)}t.extend(t.Container,Fe.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),Vn(t.Container.prototype),t.Shape=function(e,r,i,l,a,s,f,u,v){var C="a, b, c, d, graphics, optimize, style, group, inherit",h;if(h=at(t.Shape,arguments,C,this))return h;De("50.6"),this.cjsShape_constructor(a),this.type="Shape",this.group=u;var g=f===!1?{}:t.getStyle(this.type,this.group,v),k=this;n(e)&&(e=g.a!=null?g.a:null),n(r)&&(r=g.b!=null?g.b:null),n(i)&&(i=g.c!=null?g.c:null),n(l)&&(l=g.d!=null?g.d:null),n(a)&&(a=g.graphics!=null?g.graphics:null),n(s)&&(s=g.optimize!=null?g.optimize:!1);var y=x(e,r,i,l);function x(A,p,T,B){var F=[];return n(A)?F=[A,p,T,B]:n(p)?A.x?F=[A.x,A.y,A.width,A.height]:(F[0]=0,F[1]=0,F[2]=A,F[3]=A):n(T)?(F[0]=0,F[1]=0,F[2]=A,F[3]=p):(F[0]=A,F[1]=p,F[2]=T,F[3]=B),n(F[3])&&(F[3]=F[2]),F}if(n(e)||this.setBounds(y[0],y[1],y[2],y[3]),!s)for(var I=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],w=0;w<I.length;w++)~function(){var A=w;k[I[A]]=function(){return I[A]=="ct"?k.graphics.curveTo.apply(k.graphics,arguments):k.graphics[I[A]].apply(k.graphics,arguments),k}}();Object.defineProperty(k,"command",{get:function(){return k.graphics.command},set:function(){}}),this.cache=function(A,p,T,B,F,D,P,Y,_){var V="a,b,c,d,scale,options,margin,rtl,willReadFrequently",b;if(b=at(k.cache,arguments,V))return b;var Z=k.getBounds();if(n(T))if(n(A)){if(!n(Z)){var $=k.borderWidth>0?k.borderWidth/2:0;A=Z.x-$,p=Z.y-$,T=Z.width+$*2,B=Z.height+$*2}}else T=A,B=p,A=0,p=0;return n(P)&&(P=0),k.cjsShape_cache(A-P,p-P,T+P*2,B+P*2,F,D,Y,_),k.z_bc=k.canvas=k.cacheCanvas,k},this.setBounds=function(A,p,T,B){var F=x(A,p,T,B);return this.cjsShape_setBounds(F[0],F[1],F[2],F[3]),this},this.getBounds=function(A){return A?k.boundsToGlobal(null,null,null,A):k.cjsShape_getBounds()},f!==!1&&t.styleTransforms(this,g),this.clone=function(A){n(A)&&(A=!0);var p=this.getBounds();n(p)&&(p={x:null,y:null,width:null,height:null});var T=k.cloneProps(new t.Shape(p.x,p.y,p.width,p.height,a,f,u,v));return A?T.graphics=k.graphics.clone():T.graphics=k.graphics,T};var E=j.zdf||1;Fe&&!Fe.stageTransformable&&E.retina&&(this.localToGlobal=function(A,p){return t.localToGlobal(A,p,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(A,p){return t.globalToLocal(A,p,this,this.cjsShape_globalToLocal)},this.localToLocal=function(A,p,T){return t.localToLocal(A,p,T,this)}),this.hasProp=function(A){return!n(this[A])||Object.prototype.hasOwnProperty.call(this,A)},t.displayBase(k),this.dispose=function(){t.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},t.extend(t.Shape,Fe.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),Vn(t.Shape.prototype),t.Bitmap=function(e,r,i,l,a,s,f,u,v){var C="image, width, height, left, top, scale, style, group, inherit",h;if(h=at(t.Bitmap,arguments,C,this))return h;De("50.7"),this.group=u;var g=f===!1?{}:t.getStyle("Bitmap",this.group,v);n(s)&&(s=g.scale!=null?g.scale:1),n(r)&&(r=g.width!=null?g.width:e?e.width:100),n(i)&&(i=g.height!=null?g.height:e?e.height:100),n(l)&&(l=g.left!=null?g.left:0),n(a)&&(a=g.top!=null?g.top:0);var k=!1,y=e;if(!n(e)&&e.uncache){k=!0;var x=e.cacheCanvas,I=e;e.cache(l,a,r,i,s),this.z_bc=e=e.cacheCanvas}this.cjsBitmap_constructor(e),I&&!x&&I.uncache();var w=this;this.type="Bitmap",!n(r)&&!n(i)&&this.setBounds(0,0,r,i),this.drawImageData=function(T,B,F,D,P,Y){if(n(T)&&(T=0),n(B)&&(B=0),n(F)&&(F=0),n(D)&&(D=0),n(P)&&(P=r),n(Y)&&(Y=i),!w.proxyCanvas){var _=w.proxyCanvas=document.createElement("canvas");_.setAttribute("width",r),_.setAttribute("height",i),w.proxyContext=_.getContext("2d"),e=y=w.image=_}w.proxyContext&&w.proxyContext.putImageData(w.imageData,T,B,F,D,P,Y)},j.zdf&&(j.zdf.canvas.getContext("2d")?this.imageData=j.zdf.canvas.getContext("2d").createImageData(r,i):this.imageData=document.createElement("canvas").getContext("2d").createImageData(r,i),n(e)&&w.drawImageData(),e&&e.match&&e.match(/data:image/i)&&setTimeout(function(){w.stage&&w.stage.update(),setTimeout(function(){w.stage&&w.stage.update()},50)},50)),e&&e.nodeName&&e.nodeName.toLowerCase()!="video"&&(k?w.sourceRect={x:0,y:0,width:r*s,height:i*s}:w.sourceRect={x:l,y:a,width:r,height:i});function E(T,B,F,D){var P=[];return n(T)?P=[T,B,F,D]:n(B)?T.x?P=[T.x,T.y,T.width,T.height]:(P[0]=0,P[1]=0,P[2]=T,P[3]=T):n(F)?(P[0]=0,P[1]=0,P[2]=T,P[3]=B):(P[0]=T,P[1]=B,P[2]=F,P[3]=D),n(P[3])&&(P[3]=P[2]),P}this.setBounds=function(T,B,F,D){var P=E(T,B,F,D);return w.cjsBitmap_setBounds(P[0],P[1],P[2],P[3]),w},this.getBounds=function(T){return T?w.boundsToGlobal(null,null,null,T):w.cjsBitmap_getBounds()},this.cache=function(T,B,F,D,P,Y,_,V){var b="a,b,c,d,scale,options,rtl,willReadFrequently",Z;if(Z=at(w.cache,arguments,b))return Z;var $;if(n(F))if(n(T)){if($=this.getBounds(),!n($)){var Q=this.borderWidth>0?this.borderWidth/2:0;T=$.x-Q,B=$.y-Q,F=$.width+Q*2,D=$.height+Q*2}}else F=T,D=B,T=0,B=0;return $=w.getBounds(),w.cjsBitmap_cache(T,B,F,D,P,Y,_,V),w.setBounds($.x,$.y,$.width,$.height),w.z_bc=w.canvas=w.cacheCanvas,w},this.clone=function(){var T=this.cloneProps(new t.Bitmap(y,r,i,l,a,s,f,this.group,v));return T.cloned=!0,T.src=w.src,T.file=w.file,T.image=w.image,T.svg=w.svg,T.item=w.item,T};var A=j.zdf||1;Fe&&!Fe.stageTransformable&&A.retina&&(this.localToGlobal=function(T,B){return t.localToGlobal(T,B,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(T,B){return t.globalToLocal(T,B,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(T,B,F){return t.localToLocal(T,B,F,this)}),this.hasProp=function(T){return!n(this[T])||Object.prototype.hasOwnProperty.call(this,T)};var p;this.getColorAt=function(T,B,F){p||(w.cache(null,null,null,null,null,null,null,!0),p=w.cacheCanvas.getContext("2d"),w.uncache());var D=p.getImageData(T,B,1,1).data;return D[3]/=255,F?D:"rgba("+D[0]+","+D[1]+","+D[2]+","+D[3]+")"},this.keyOut=function(T,B,F){n(T)&&(T="#389b26"),n(B)&&(B=.1),Array.isArray(T)||(T=[T]),Array.isArray(B)||(B=[B]),!n(F)&&!Array.isArray(F)&&(F=[F]);var D,P,Y=[],_=[],V=[];for(D=0;D<T.length;D++)Y[D]=t.convertColor(T[D],"array"),B[D]!=null?_[D]=B[D]*255:_[D]=B[0]*255,F&&(F[D]!=null?(V[D]=t.convertColor(F[D],"array"),V[D][3]*=255):(V[D]=t.convertColor(F[0],"array"),V[D][3]*=255));w.cacheCanvas&&w.updateCache(),p||(w.cache(null,null,null,null,null,null,null,!0),p=w.cacheCanvas.getContext("2d"));var b=p.getImageData(l,a,r,i),Z=b.data,$=Z.length/4;if(F)for(D=0;D<$;D++){var Q=Z[D*4+0],re=Z[D*4+1],G=Z[D*4+2];for(P=0;P<T.length;P++)Q>Y[P][0]-_[P]&&Q<Y[P][0]+_[P]&&re>Y[P][1]-_[P]&&re<Y[P][1]+_[P]&&G>Y[P][2]-_[P]&&G<Y[P][2]+_[P]&&(Z[D*4+0]=V[P][0],Z[D*4+1]=V[P][1],Z[D*4+2]=V[P][2],Z[D*4+3]=V[P][3])}else for(D=0;D<$;D++){var Q=Z[D*4+0],re=Z[D*4+1],G=Z[D*4+2];for(P=0;P<T.length;P++)Q>Y[P][0]-_[P]&&Q<Y[P][0]+_[P]&&re>Y[P][1]-_[P]&&re<Y[P][1]+_[P]&&G>Y[P][2]-_[P]&&G<Y[P][2]+_[P]&&(Z[D*4+3]=0)}return p.putImageData(b,a,l),this},t.displayBase(w),f!==!1&&t.styleTransforms(this,g),this.doDispose=function(){t.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&(this.stage&&this.stage.frame?A=this.stage.frame:A=j.zdf,A&&A.assets&&A.assets[this.id]&&delete A.assets[this.id],t.assets[this.id]&&delete t.assets[this.id]),this.parent&&this.parent.removeChild(this)}},t.Bitmap.fromData=function(e,r){var i=100,l=100,a=new Image;a.onload=function(){i=a.naturalWidth,l=a.naturalHeight,n(i)&&(i=a.width),n(l)&&(l=a.height);var s=new t.Bitmap(e,i,l);setTimeout(function(){r(s)},50)},a.src=e},t.extend(t.Bitmap,Fe.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),t.Bitmap.prototype.dispose=function(){return this.doDispose()},Vn(t.Bitmap.prototype),t.Sprite=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p){var T="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",B;if(B=at(t.Sprite,arguments,T,this))return B;De("50.8"),this.type="Sprite",this.group=A;var F=E===!1?{}:t.getStyle(this.type,this.group,p),D=this,P;if(n(w)&&(w=F.frame!=null?F.frame:j.zdf),e&&typeof e=="string"&&(e=w.asset(e)),n(g)&&!n(e)){n(r)&&(r=F.cols!=null?F.cols:1),n(i)&&(i=F.rows!=null?F.rows:1),n(l)&&(l=F.count!=null?F.count:r*i),n(a)&&(a=F.offsetX!=null?F.offsetX:0),n(s)&&(s=F.offsetY!=null?F.offsetY:0),n(f)&&(f=F.spacingX!=null?F.spacingX:0),n(u)&&(u=F.spacingY!=null?F.spacingY:0),n(v)&&(v=F.width!=null?F.width:e.width),n(C)&&(C=F.height!=null?F.height:e.height),e.bitmap&&(e=e.bitmap);var Y=(v-a+f)/r-f,_=(C-s+u)/i-u,V=[],b=0;e:for(var Z=0;Z<i;Z++)for(var $=0;$<r;$++){if(++b>l)break e;V.push([a+$*(Y+f),s+Z*(_+u),Y,_])}d(e,V,h)}else if(x)P=x,h=P.animations;else if(g){var w=D.stage?D.stage.frame:j.zdf;typeof g=="string"&&(g=w.asset(g));var Q,re,G;if(g.frames&&!Array.isArray(g.frames)){Q=[];for(re in g.frames)G=g.frames[re].frame,Q.push([G.x,G.y,G.w,G.h]);g.frames=Q}if(g.frames&&!Array.isArray(g.frames[0])){for(Q=[],re=0;re<g.frames.length;re++){var G=g.frames[re].frame;Q.push([G.x,G.y,G.w,G.h])}g.frames=Q}if(!g.images&&g.meta&&g.meta.image&&(g.images=[g.meta.image]),V=g.frames,h=g.animations,!n(e))d(e,V,h);else{var L=g.images?g.images[0]:null;if(!L||!L.split)P=new Fe.SpriteSheet(g);else{var c=[];t.loop(g.images,function(O){var de=O.split("/").pop();w.asset(de)&&w.asset(de).type!="EmptyAsset"?c.push(w.asset(de)):w.asset(O)&&w.asset(O).type!="EmptyAsset"||w.asset(O).type!="EmptyAsset"?c.push(w.asset(O)):ht&&je("Sprite() - please preload Sprite in Frame or with loadAssets")}),d(c,V,h)}}}else return;function d(m,O,de){Array.isArray(m)||(m=[m]),t.loop(m,function(N,se){m[se]=N.image});var R={images:m,frames:O,animations:de||[]};P=new Fe.SpriteSheet(R)}this.animations=h,this.cjsSprite_constructor(P,I),n(I)||this.stop(),n(k)&&(k=t.makeID()),this.id=k,n(y)&&(y=!0),D.globalControl=y;var o=0,S;this.parseFrames=function(m,O,de,R){var N=[],se=Number.MAX_VALUE,ie=0;if(n(m))n(O)&&(O=0),n(de)&&(de=D.totalFrames-1),K(O,de);else{if(n(D.animations)||n(D.animations[m]))return[];var q=D.animations[m];z(q)}function z(ke){Array.isArray(ke)?ce(ke):ke.constructor=={}.constructor?Ie(ke):isNaN(ke)||N.push({f:Math.floor(ke),s:1})}function ce(ke){K(ke[0],ke[1],ke[3]),ke[2]&&!n(D.animations[ke[2]])&&z(D.animations[ke[2]])}function Ie(ke){if(!n(ke.frames)){n(ke.speed)&&(ke.speed=1);for(var ne=0;ne<ke.frames.length;ne++)ke.speed<se&&(se=ke.speed),ke.speed>ie&&(ie=ke.speed),N.push({f:ke.frames[ne],s:ke.speed});ke.next&&!n(D.animations[ke.next])&&z(D.animations[ke.next])}}function K(ke,ne,ve){n(ve)&&(ve=1);var we;if(ne>ke)for(we=ke;we<=ne;we++)ee(we);else for(we=ne;we<=ke;we++)ee(ke-(we-ne));function ee(le){ve<se&&(se=ve),ve>ie&&(ie=ve),N.push({f:le,s:ve})}}if(R)return N;se=t.constrain(t.decimals(se),.1),ie=t.constrain(t.decimals(ie),.1);for(var xe=[],J=se!=ie,fe,U=0;U<N.length;U++)if(fe=N[U],J)for(var ue=0;ue<t.constrain(Math.round(se<1?fe.s/se:fe.s),.1);ue++)xe.push(fe.f);else xe.push(fe.f);return xe},this.run=function(m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U,ue,ke,ne,ve,we,ee,le,ye,oe,Me,ae,Se,Le){var Ce="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur",te;if(te=at(D.run,arguments,Ce))return te;var Oe=mt(),Re;n(Me)&&(Me=1),n(ae)||(D.id=ae),n(Se)||(D.globalControl=Se);var Xe;if(Array.isArray(O)){var Qe,it;Re=[],Xe=0;for(var Be,Ke=0;Ke<O.length;Ke++){Qe=O[Ke],Qe.lookup=D.parseFrames(Qe.label,Qe.startFrame,Qe.endFrame),Ke==0&&(Be=Qe.lookup[0]),delete Qe.startFrame,delete Qe.endFrame,Qe.obj=t.merge(Qe.obj,{normalizedFrame:Qe.lookup.length-1}),Qe.set=t.merge(Qe.set,{normalizedFrames:{noPick:Qe.lookup},normalizedFrame:0}),n(Qe.wait)&&(Qe.wait=Xe*Me),it=Qe.label,delete Qe.label,Re.push(Qe),Xe=0;var He=n(Qe.time)?m:Qe.time;oe-ye>0&&(Xe=He/(oe-ye)/2)}if(Re.length==0)return this;Re.length==1?(m=Re[0].time,O=it,he()):D.gotoAndStop(Be)}else he();function he(){S=D.parseFrames(O,ye,oe),o=0,D.gotoAndStop(S[o]),ye=oe=null,Re={normalizedFrame:S.length-1}}n(m)&&(m=Oe=="s"?1:1e3),D.running&&D.stopAnimate(D.id),D.running=!0,Array.isArray(Re)||(Xe=0,oe-ye>0&&(Xe=m/Math.abs(oe-ye)/2),S&&S.length>0&&(Xe=m/S.length/2),!n(q)&&n(ce)&&(ce=Xe*Me),!n(U)&&n(ue)&&(ue=Xe*Me));var me=function(){D.running=!1,D.stop(),de&&typeof de=="function"&&de(R||D)};return t.animate({target:D,obj:Re,time:m,ease:"linear",call:me,params:R,wait:N,waitedCall:se,waitedParams:ie,loop:q,loopCount:z,loopWait:ce,loopCall:Ie,loopParams:K,loopWaitCall:xe,loopWaitParams:J,rewind:U,rewindWait:ue,rewindCall:ke,rewindParams:ne,rewindWaitCall:ve,rewindWaitParams:we,rewindTime:ee,rewindEase:le,override:!1,pauseOnBlur:Le,id:D.id}),D.runPaused=!1,D},this.runPaused=!0,this.pauseRun=function(m){return n(m)&&(m=!0),D.runPaused=m,D.globalControl?t.pauseAnimate(m,D.id):D.pauseAnimate(m,D.id),D},this.stopRun=function(){return D.runPaused=!0,D.running=!1,D.globalControl?t.stopAnimate(D.id):D.stopAnimate(D.id),D},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(m){m=Math.round(m),this.paused?this.gotoAndStop(m):this.gotoAndPlay(m)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return o},set:function(m){o=Math.round(m),this.gotoAndStop(S[o])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return S},set:function(m){S=m}}),Object.defineProperty(this,"totalFrames",{get:function(){return P.getNumFrames()},set:function(){je("zim.Sprite - totalFrames is read only")}}),E!==!1&&t.styleTransforms(this,F),this.clone=function(){var m=this.cloneProps(new t.Sprite(e,r,i,l,a,s,f,u,v,C,h,g,null,y,x,I,w,E,this.group,p));return D.frame>=0&&m.run({startFrame:D.frame,endFrame:D.frame}),m},Fe&&!Fe.stageTransformable&&w.retina&&(this.localToGlobal=function(m,O){return t.localToGlobal(m,O,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(m,O){return t.globalToLocal(m,O,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(m,O,de){return t.localToLocal(m,O,de,this)}),this.hasProp=function(m){return!n(this[m])||Object.prototype.hasOwnProperty.call(this,m)},t.displayBase(D);function X(m,O,de,R){var N=[];return n(m)?N=[m,O,de,R]:n(O)?m.x?N=[m.x,m.y,m.width,m.height]:(N[0]=0,N[1]=0,N[2]=m,N[3]=m):n(de)?(N[0]=0,N[1]=0,N[2]=m,N[3]=O):(N[0]=m,N[1]=O,N[2]=de,N[3]=R),n(N[3])&&(N[3]=N[2]),N}this.setBounds=function(m,O,de,R){var N=X(m,O,de,R);return D.cjsSprite_setBounds(N[0],N[1],N[2],N[3]),D},this.getBounds=function(m){return m?D.boundsToGlobal(null,null,null,m):D.cjsSprite_getBounds()},this.dispose=function(){t.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},t.extend(t.Sprite,Fe.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),Vn(t.Sprite.prototype),t.MovieClip=function(e,r,i,l,a,s,f){var u="mode, startPosition, loop, labels, style, group, inherit",v;if(v=at(t.MovieClip,arguments,u,this))return v;De("50.9"),this.type="MovieClip",this.group=s;var C=a===!1?{}:t.getStyle(this.type,this.group,f);n(e)&&(e=C.mode!=null?C.mode:null),n(r)&&(r=C.startPosition!=null?C.startPosition:null),n(i)&&(i=C.loop!=null?C.loop:null),n(l)&&(l=C.labels!=null?C.labels:null),this.cjsMovieClip_constructor(e,r,i,l),a!==!1&&t.styleTransforms(this,C),this.clone=function(){return this.cloneProps(new t.MovieClip(e,r,i,l,a,this.group,f))},this.hasProp=function(k){return!n(this[k])||Object.prototype.hasOwnProperty.call(this,k)};var h=j.zdf||1;Fe&&!Fe.stageTransformable&&h.retina&&(this.localToGlobal=function(k,y){return t.localToGlobal(k,y,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(k,y){return t.globalToLocal(k,y,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(k,y,x){return t.localToLocal(k,y,x,this)}),t.displayBase(this);function g(k,y,x,I){var w=[];return n(k)?w=[k,y,x,I]:n(y)?k.x?w=[k.x,k.y,k.width,k.height]:(w[0]=0,w[1]=0,w[2]=k,w[3]=k):n(x)?(w[0]=0,w[1]=0,w[2]=k,w[3]=y):(w[0]=k,w[1]=y,w[2]=x,w[3]=I),n(w[3])&&(w[3]=w[2]),w}this.setBounds=function(k,y,x,I){var w=g(k,y,x,I);return that.cjsMovieClip_setBounds(w[0],w[1],w[2],w[3]),that},this.getBounds=function(k){return k?that.boundsToGlobal(null,null,null,k):that.cjsMovieClip_getBounds()},this.dispose=function(){t.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},t.extend(t.MovieClip,Fe.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),Vn(t.MovieClip.prototype),t.SVGContainer=function(e,r,i,l,a,s,f,u){var v="svg, splitTypes, geometric, showControls, interactive, style, group, inherit",C;if(C=at(t.SVGContainer,arguments,v,this))return C;De("50.95"),this.group=f;var h=s===!1?{}:t.getStyle("SVGContainer",this.group,u);e&&e.type=="Bitmap"&&(e=e.svg);var g=this,k=new t.Point(0,0),y;function x(){function X(Ie,K){return N(Ie)||R(Ie,K)||O(Ie,K)||m()}function m(){throw new TypeError("Invalid")}function O(Ie,K){if(Ie){if(typeof Ie=="string")return de(Ie,K);var xe=Object.prototype.toString.call(Ie).slice(8,-1);if(xe==="Object"&&Ie.constructor&&(xe=Ie.constructor.name),xe==="Map"||xe==="Set")return Array.from(Ie);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return de(Ie,K)}}function de(Ie,K){(K==null||K>Ie.length)&&(K=Ie.length);for(var xe=0,J=new Array(K);xe<K;xe++)J[xe]=Ie[xe];return J}function R(Ie,K){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ie)))){var xe=[],J=!0,fe=!1,U=void 0;try{for(var ue=Ie[Symbol.iterator](),ke;!(J=(ke=ue.next()).done)&&(xe.push(ke.value),!(K&&xe.length===K));J=!0);}catch(ne){fe=!0,U=ne}finally{try{!J&&ue.return!=null&&ue.return()}finally{if(fe)throw U}}return xe}}function N(Ie){if(Array.isArray(Ie))return Ie}var se=Math.PI*2,ie=function(K,xe,J,fe,U,ue,ke){var ne=K.x,ve=K.y;ne*=xe,ve*=J;var we=fe*ne-U*ve,ee=U*ne+fe*ve;return{x:we+ue,y:ee+ke}},q=function(K,xe){var J=xe===1.5707963267948966?.551915024494:xe===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(xe/4),fe=Math.cos(K),U=Math.sin(K),ue=Math.cos(K+xe),ke=Math.sin(K+xe);return[{x:fe-U*J,y:U+fe*J},{x:ue+ke*J,y:ke-ue*J},{x:ue,y:ke}]},z=function(K,xe,J,fe){var U=K*fe-xe*J<0?-1:1,ue=K*J+xe*fe;return ue>1&&(ue=1),ue<-1&&(ue=-1),U*Math.acos(ue)},ce=function(K,xe,J,fe,U,ue,ke,ne,ve,we,ee,le){var ye=Math.pow(U,2),oe=Math.pow(ue,2),Me=Math.pow(ee,2),ae=Math.pow(le,2),Se=ye*oe-ye*ae-oe*Me;Se<0&&(Se=0),Se/=ye*ae+oe*Me,Se=Math.sqrt(Se)*(ke===ne?-1:1);var Le=Se*U/ue*le,Ce=Se*-ue/U*ee,te=we*Le-ve*Ce+(K+J)/2,Oe=ve*Le+we*Ce+(xe+fe)/2,Re=(ee-Le)/U,Xe=(le-Ce)/ue,Qe=(-ee-Le)/U,it=(-le-Ce)/ue,Be=z(1,0,Re,Xe),Ke=z(Re,Xe,Qe,it);return ne===0&&Ke>0&&(Ke-=se),ne===1&&Ke<0&&(Ke+=se),[te,Oe,Be,Ke]};return function(K){var xe=K.px,J=K.py,fe=K.cx,U=K.cy,ue=K.rx,ke=K.ry,ne=K.xAxisRotation,ve=ne===void 0?0:ne,we=K.largeArcFlag,ee=we===void 0?0:we,le=K.sweepFlag,ye=le===void 0?0:le,oe=[];if(ue===0||ke===0)return[];var Me=Math.sin(ve*se/360),ae=Math.cos(ve*se/360),Se=ae*(xe-fe)/2+Me*(J-U)/2,Le=-Me*(xe-fe)/2+ae*(J-U)/2;if(Se===0&&Le===0)return[];ue=Math.abs(ue),ke=Math.abs(ke);var Ce=Math.pow(Se,2)/Math.pow(ue,2)+Math.pow(Le,2)/Math.pow(ke,2);Ce>1&&(ue*=Math.sqrt(Ce),ke*=Math.sqrt(Ce));var te=ce(xe,J,fe,U,ue,ke,ee,ye,Me,ae,Se,Le),Oe=X(te,4),Re=Oe[0],Xe=Oe[1],Qe=Oe[2],it=Oe[3],Be=Math.abs(it)/(se/4);Math.abs(1-Be)<1e-7&&(Be=1);var Ke=Math.max(Math.ceil(Be),1);it/=Ke;for(var He=0;He<Ke;He++)oe.push(q(Qe,it)),Qe+=it;return oe.map(function(he){var me=ie(he[0],ue,ke,ae,Me,Re,Xe),Te=me.x,ze=me.y,st=ie(he[1],ue,ke,ae,Me,Re,Xe),Ye=st.x,nt=st.y,pe=ie(he[2],ue,ke,ae,Me,Re,Xe),Je=pe.x,be=pe.y;return{x1:Te,y1:ze,x2:Ye,y2:nt,x:Je,y:be}})}}n(r)&&(r=!1),n(i)&&(i=!0);var I,w;function E(X){t.loop(X,function(m){var O=m.tagName.toLowerCase();if(O=="path"&&S(m),O=="circle"&&p("circle",m),O=="rect"&&p("rect",m),O=="ellipse"&&p("ellipse",m),O=="line"&&p("line",m),O=="polygon"&&p("polygon",m),O=="polyline"&&p("polyline",m),O=="g"){var de=m.getAttribute("style"),R,N,se,ie,q;if(de){var z=A(de);R=z[0],N=z[1],se=z[2],ie=z[3],q=z[4]}c=m.getAttribute("transform"),_=m.getAttribute("fill")?m.getAttribute("fill"):n(R)?Y:R,b=m.getAttribute("stroke")?m.getAttribute("stroke"):n(N)?V:N,$=m.getAttribute("stroke-width")?m.getAttribute("stroke-width"):n(se)?Z:se,re=m.getAttribute("fill-opacity")?m.getAttribute("fill-opacity"):n(ie)?Q:ie,L=m.getAttribute("stroke-opacity")?m.getAttribute("stroke-opacity"):n(q)?G:q}E(m.children),m.tagName.toLowerCase()=="g"&&(_=Y,b=V,$=Z,re=Q,L=G,c=null)})}function A(X){var m=X.split(";"),O,de,R,N,se;return t.loop(m,function(ie){ie=ie.replace(/,/g,"");var q=ie.split(":"),z=q[0].trim().toLowerCase(),ce=q[1].trim().toLowerCase().replace("px","");z=="fill"&&(O=ce),z=="stroke"&&(de=ce),z=="stroke-width"&&(R=ce),z=="opacity"&&(N=ce,se=ce),z=="fill-opacity"&&(N=ce),z=="stroke-opacity"&&(se=ce)}),[O,de,R,N,se]}function p(X,m){var O,de=o(m),R=de[0],N=de[1],se=de[2],ie=de[5],q=de[6];if(X=="circle"){var z=Number(m.getAttribute("r").trim()),ce=z*.5523;i?O=new t.Circle(Number(m.getAttribute("r")),R,N,se):O=new t.Blob(R,N,se,4,z,ce,"mirror",null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else if(X=="rect")if(i)O=new t.Rectangle(Number(m.getAttribute("width")),Number(m.getAttribute("height")),R,N,se,Number(m.getAttribute("rx")));else{var Ie=Number(m.getAttribute("width")),K=Number(m.getAttribute("height")),xe=Number(m.getAttribute("rx")),J=Number(m.getAttribute("ry"));if(xe&&J){var fe=xe*.5523,U=J*.5523;O=new t.Blob(R,N,se,[[xe,0,0,0,-fe,0,0,0,"free"],[Ie-xe,0,0,0,0,0,fe,0,"free"],[Ie,J,0,0,0,-U,0,0,"free"],[Ie,K-J,0,0,0,0,0,U,"free"],[Ie-xe,K,0,0,fe,0,0,0,"free"],[xe,K,0,0,0,0,-fe,0,"free"],[0,K-J,0,0,0,U,0,0,"free"],[0,J,0,0,0,0,0,-U,"free"]],null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else O=new t.Blob(R,N,se,[[0,0],[Ie,0],[Ie,K],[0,K]],null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else if(X=="line")O=new t.Squiggle(N,se,[[Number(m.getAttribute("x1")),Number(m.getAttribute("y1"))],[Number(m.getAttribute("x2")),Number(m.getAttribute("y2"))]],null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a);else if(X=="polygon"||X=="polyline"){var ue=m.getAttribute("points");ue=ue.replace(/-/g," -"),ue=ue.replace(/\s+/g," ");var ke=[];if(ue.indexOf(",")!=-1)t.loop(ue.split(" "),function(we){var ee=we.split(",");ke.push([Number(ee[0].trim()),Number(ee[1].trim())])});else{var ne;t.loop(ue.split(" "),function(we,ee){(ee+1)%2==0&&ke.push([ne,we.trim()]),ne=we.trim()})}X=="polygon"?O=new li(R,N,se,ke):O=new t.Squiggle(N,se,ke,null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a)}else X=="ellipse"&&(O=new t.Blob(R,N,se,B(0,0,Number(m.getAttribute("rx")),Number(m.getAttribute("ry"))),null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a));O.loc(ie,q,g);var ve=m.getAttribute("transform");(ve||c)&&T(O,ve||c),a&&(O.type=="Rectangle"||O.type=="Circle")&&O.transform({showReg:!1,visible:l})}function T(X,m){var O=m.split(")");t.loop(O,function(de){if(de!=""){var R=de.trim().split("("),N=R[0].trim().toLowerCase(),se=R[1].trim().toLowerCase().replace("px","").replace("deg","");if(N=="translate"){var ie=se.split(",");X.mov(Number(ie[0].trim()),ie[1]?Number(ie[1].trim()):0)}if(N=="scale"){var q=se.split(",");X.type=="Blob"||X.type=="Squiggle"?q.length==1?X.transformPoints("scale",Number(q[0].trim())):q.length==2&&(X.transformPoints("scaleX",Number(q[0].trim())),X.transformPoints("scaleY",Number(q[1].trim()))):q.length==1?X.sca(Number(q[0].trim())):q.length==2&&X.sca(Number(q[0].trim()),Number(q[1].trim()))}if(N=="rotate"){var z=se.split(",");z.length==1?z.push(0,0):z.length==2&&z.push(0),X.rot(Number(z[0].trim()),Number(z[1].trim()),Number(z[2].trim()))}N=="skewX"&&(X.skewX=se),N=="skewY"&&(X.skewY=se)}})}function B(X,m,O,de){var R=.5522848,N=O*R,se=de*R,ie=X+O,q=m+de,z=[[X-O,m,0,0,X,q+se-de,X,m-se,"mirror"],[X,m-de,0,0,X-N,m,ie+N-O,m,"mirror"],[ie,m,0,0,X,m-se,X+N-N,q+se-de,"mirror"],[X,q,0,0,ie-O+N,m,X-N,m,"mirror"]];return z}if(!n(e)){if(e.replace&&(e=e.replace(/style\s?=[^"]*"[^"]*"/ig,"")),n(e.draggable))e.getAttribute||(I=new DOMParser,e=I.parseFromString(e,"image/svg+xml").documentElement),w=this.svg=e;else{I=new DOMParser,e=e.innerHTML?I.parseFromString(e.innerHTML,"text/xml"):e;var F=e.getElementsByTagName("svg");w=this.svg=F?e.getElementsByTagName("svg")[0]:null}var D,P;if(n(w)||(D=w.getAttribute("width"),P=w.getAttribute("height")),D&&(D=Number(D.trim())),P&&(P=Number(P.trim())),this.zimContainer_constructor(D,P),this.type="SVGContainer",n(w))return;var Y=t.black,_=t.black,V=t.black,b=t.black,Z=2,$=2,Q=1,re=1,G=1,L=1,c,d=e.getElementsByTagName("svg");d.length==0&&(d=[e]),E(d)}function o(X){var m,O,de,R,N,se=X.getAttribute("style");if(se){var ie=A(se);m=ie[0],O=ie[1],de=ie[2],R=ie[3],N=ie[4]}m=X.getAttribute("fill")?X.getAttribute("fill"):n(m)?_:m,O=X.getAttribute("stroke")?X.getAttribute("stroke"):n(O)?b:O,de=X.getAttribute("stroke-width")?X.getAttribute("stroke-width"):n(de)?$:de,R=X.getAttribute("fill-opacity")?X.getAttribute("fill-opacity"):n(R)?re:R,N=X.getAttribute("stroke-opacity")?X.getAttribute("stroke-opacity"):n(N)?L:N;var q=X.getAttribute("x")?X.getAttribute("x"):0;q=X.getAttribute("cx")?X.getAttribute("cx"):q;var z=X.getAttribute("y")?X.getAttribute("y"):0;return z=X.getAttribute("cy")?X.getAttribute("cy"):z,!n(R)&&!n(m)&&(m=t.convertColor(m,"rgba",Number(R))),!n(N)&&!n(O)&&(O=t.convertColor(O,"rgba",Number(N))),[m,O,Number(de),Number(R),Number(N),Number(q),Number(z)]}function S(X,m){n(m)&&(m=!0);var O=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],de=["m","l","h","v","c","s","q","t","a","z"],R=new t.Point(0,0),N;if(n(X.getAttribute)?N=X:N=X.getAttribute("d"),N=N.replace(/,/g," "),N=N.replace(/([a-zA-Z])/g," $1 "),N=N.replace(/-/g," -"),N=N.replace(/\s+/g," "),N=N.replace(/\.(\d*)\./g,".$1 ."),m)var se=o(X),ie=se[0],q=se[1],z=se[2];var ce,Ie,K=[],xe=[0,0],J=new t.Point(0,0),fe=new t.Point(0,0,0,0),U=new t.Point(0,0,0,0,0,0),ue=new t.Point(0,0,0,0,0,0,0),ke=N.split(" "),ne=ke.slice(1,ke.length),ve=[],we=!1,ee,le,ye=!1,oe,Me="squiggle",ae=null;t.loop(ne,function(Le,Ce){if(Ce==0&&(k.x=0,k.y=0,xe=[0,0],ee="",le=""),O.indexOf(Le)==-1){oe=="lxo"&&(oe="lx",ve.push("l"),we=!0),oe=="lyo"&&(oe="ly",we=!0),oe=="Lxo"&&(oe="Lx",ve.push("L"),we=!0),oe=="Lyo"&&(oe="Ly",we=!0),Ie=Number(Le),Ie=Math.round(Ie*100)/100,oe=="X"?(k.x=Ie,oe="Y"):oe=="Y"?(k.y=Ie,oe="Lxo",K.push([k.x,k.y])):oe=="x"?(k.x=k.x+Ie,oe="y"):oe=="y"&&(k.y=k.y+Ie,oe="lxo",K.push([k.x,k.y])),oe=="H"||oe=="h"?(R.x=K[K.length-1][0],R.y=K[K.length-1][1],R.x=R.x+(oe=="h"?Ie:Ie-k.x),K.push([R.x,R.y]),oe="Lx"):(oe=="V"||oe=="v")&&(R.x=K[K.length-1][0],R.y=K[K.length-1][1],R.y=R.y+(oe=="v"?Ie:Ie-k.y),K.push([R.x,R.y]),oe="lx"),oe=="Lx"?(J.x=Ie,oe="Ly"):oe=="Ly"?(J.y=Ie,R.x=J.x,R.y=J.y,K.push([R.x,R.y]),oe="Lx"):oe=="lx"?(ve.length>0&&(R.x!=0&&R.y!=0?(k.x=R.x,k.y=R.y):(k.x=R.x+k.x,k.y=R.y+k.y)),J.x=k.x+Ie,we?oe="lyo":oe="ly"):oe=="ly"&&(J.y=k.y+Ie,R.x=J.x,R.y=J.y,K.push([R.x,R.y]),oe="lx");var te;if(oe=="qx"||oe=="Qx"?(K.length>0?(k.x=K[K.length-1][0],k.y=K[K.length-1][1]):(k.x=0,k.y=0),fe.x=oe=="qx"?k.x+Ie:Ie,oe=oe=="qx"?"qy":"Qy"):oe=="qy"||oe=="Qy"?(fe.y=oe=="qy"?k.y+Ie:Ie,oe=oe=="qy"?"qz":"Qz",ye&&(ye=!1,te=K[K.length-1],te[6]=-te[4],te[7]=-te[5],te[8]="mirror",R.x=fe.x,R.y=fe.y,K[K.length]=[R.x,R.y,0,0,-te[6],te[7],0,0,"free"],oe=oe=="qy"?"qx":"Qx")):oe=="qz"||oe=="Qz"?(fe.z=oe=="qz"?k.x+Ie:Ie,oe=oe=="qz"?"qq":"Qq"):(oe=="qq"||oe=="Qq")&&(fe.w=oe=="qq"?k.y+Ie:Ie,te=K[K.length-1],R.x=te[0],R.y=te[1],K.length==1?(te[2]=0,te[3]=0,te[4]=0,te[5]=0,te[6]=2/3*(fe.x-R.x),te[7]=2/3*(fe.y-R.y),te[8]="free"):K[K.length]=[R.x,R.y,0,0,0,0,2/3*(fe.x-R.x),2/3*(fe.y-R.y),"free"],R.x=fe.z,R.y=fe.w,K[K.length]=[R.x,R.y,0,0,2/3*(fe.x-R.x),2/3*(fe.y-R.y),0,0,"free"],oe=oe=="qq"?"qx":"Qx"),oe=="cx"||oe=="Cx")K.length>0?(k.x=K[K.length-1][0],k.y=K[K.length-1][1]):(k.x=0,k.y=0),U.x=oe=="cx"?k.x+Ie:Ie,oe=oe=="cx"?"cy":"Cy";else if(oe=="cy"||oe=="Cy")U.y=oe=="cy"?k.y+Ie:Ie,oe=oe=="cy"?"cz":"Cz";else if(oe=="cz"||oe=="Cz")U.z=oe=="cz"?k.x+Ie:Ie,oe=oe=="cz"?"cq":"Cq";else if(oe=="cq"||oe=="Cq")U.q=oe=="cq"?k.y+Ie:Ie,oe=oe=="cq"?"cr":"Cr",ye&&(ee=="s"?le="s":le="S",te=K[K.length-1],te[2]=0,te[3]=0,n(te[4])&&(te[4]=0),n(te[5])&&(te[5]=0),te[6]=-te[4],te[7]=-te[5],te[8]="mirror",R.x=U.z,R.y=U.q,K[K.length]=[R.x,R.y,0,0,U.x-R.x,U.y-R.y,0,0,"free"],oe=oe=="cr"?"cx":"Cx");else if(oe=="cr"||oe=="Cr")U.r=oe=="cr"?k.x+Ie:Ie,oe=oe=="cr"?"cs":"Cs";else if(oe=="cs"||oe=="Cs")U.s=oe=="cs"?k.y+Ie:Ie,te=K[K.length-1],K.length==1&&(te[2]=0,te[3]=0,te[4]=0,te[5]=0),te[6]=U.x-te[0],te[7]=U.y-te[1],te[8]="free",R.x=U.r,R.y=U.s,K[K.length]=[R.x,R.y,0,0,U.z-R.x,U.q-R.y,0,0,"free"],oe=oe=="cs"?"cx":"Cx";else if(oe=="ax"||oe=="Ax")K.length>0?(k.x=K[K.length-1][0],k.y=K[K.length-1][1]):(k.x=0,k.y=0),ue.x=Ie,oe=oe=="ax"?"ay":"Ay";else if(oe=="ay"||oe=="Ay")ue.y=Ie,oe=oe=="ay"?"az":"Az";else if(oe=="az"||oe=="Az")ue.z=Ie,oe=oe=="az"?"aq":"Aq";else if(oe=="aq"||oe=="Aq")ue.q=Ie,oe=oe=="aq"?"ar":"Ar";else if(oe=="ar"||oe=="Ar")ue.r=Ie,oe=oe=="ar"?"as":"As";else if(oe=="as"||oe=="As")ue.s=oe=="as"?k.x+Ie:Ie,oe=oe=="as"?"at":"At";else if(oe=="at"||oe=="At"){ue.t=oe=="at"?k.y+Ie:Ie,y||(y=x());var Oe=y({px:k.x,py:k.y,cx:ue.s,cy:ue.t,rx:ue.x,ry:ue.y,xAxisRotation:ue.z,largeArcFlag:ue.q,sweepFlag:ue.r});t.loop(Oe,function(Re,Xe){te=K[K.length-1],K.length==1&&(te[2]=0,te[3]=0,te[4]=0,te[5]=0),Xe==0&&K.length==1?(te[6]=Re.x1-R.x-k.x,te[7]=Re.y1-R.y-k.y):(te[6]=Re.x1-R.x,te[7]=Re.y1-R.y),te[8]="free",R.x=Re.x,R.y=Re.y,K[K.length]=[R.x,R.y,0,0,Re.x2-R.x,Re.y2-R.y,0,0,"free"]}),oe=oe=="at"?"ax":"Ax"}}else ve.push(Le),Le!="s"&&(ye=!1),ve.length>1&&(Le=="M"||Le=="m")&&(Se(ve),Le=="M"?(k.x=0,k.y=0):(k.x=K[K.length-1][0],k.y=K[K.length-1][1]),K=[],ve=[],ve.push(Le)),Le=="M"?oe="X":Le=="m"?oe="x":Le=="L"?(oe="Lx",r&&ae&&ae!="l"&&Se(ve),ae="l"):Le=="l"?(oe="lx",r&&ae&&ae!="l"&&Se(ve),ae="l"):Le=="H"?(oe="H",r&&ae&&ae!="l"&&Se(ve),ae="l"):Le=="h"?(oe="h",r&&ae&&ae!="l"&&Se(ve),ae="l"):Le=="V"?(oe="V",r&&ae&&ae!="l"&&Se(ve),ae="l"):Le=="v"?(oe="v",r&&ae&&ae!="l"&&Se(ve),ae="l"):Le=="C"?(oe="Cx",r&&ae&&ae!="c"&&Se(ve),ae="c"):Le=="c"?(oe="cx",r&&ae&&ae!="c"&&Se(ve),ae="c"):Le=="S"?(ye=!0,oe="Cx",r&&ae&&ae!="c"&&Se(ve),ae="c"):Le=="s"?(ye=!0,oe="cx",r&&ae&&ae!="c"&&Se(ve),ae="c"):Le=="Q"?(oe="Qx",r&&ae&&ae!="q"&&Se(ve),ae="q"):Le=="q"?(oe="qx",r&&ae&&ae!="q"&&Se(ve),ae="q"):Le=="T"?(ye=!0,oe="Qx",r&&ae&&ae!="q"&&Se(ve),ae="q"):Le=="t"?(ye=!0,oe="qx",r&&ae&&ae!="q"&&Se(ve),ae="q"):Le=="A"?(oe="Ax",r&&ae&&ae!="a"&&Se(),ae="a"):Le=="a"?(oe="ax",r&&ae&&ae!="a"&&Se(),ae="a"):(Le=="z"||Le=="Z")&&(Me="blob")});function Se(){ee=ve[ve.length-1],K.length>=2&&(ee=="z"||ee=="Z")&&(Me="blob"),Me=="squiggle"?ce=new t.Squiggle(q,z,K,null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a):ce=new t.Blob(ie,q,z,K,null,null,null,null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,a),ce.loc(0,0,g),ee=ve[ve.length-1],le=ve[ve.length-2],de.indexOf(ee)>=0?(xe[0]=K[K.length-1][0],xe[1]=K[K.length-1][1],k.x=K[K.length-1][0],k.y=K[K.length-1][1],K=[],K.push([xe[0],xe[1]])):(xe=[0,0],K=[[0,0]]),ve=[],ee!="z"&&ee!="Z"&&ve.push(ee),R.x=0,R.y=0;var Le=X.getAttribute("transform");(Le||c)&&T(ce,Le||c)}return m&&Se(),K}g.processPath=function(X){return S(X,!1)},s!==!1&&t.styleTransforms(this,h),this.clone=function(){return g.cloneProps(new t.SVGContainer(e,r,i,l,a,s,this.group,u))}},t.extend(t.SVGContainer,t.Container,"clone","zimContainer",!1),t.CustomShape=function(e,r,i,l){t.zimCustomShapeCheck||(De("50.97"),t.zimCustomShapeCheck=!0),this.zimContainer_constructor(e,r,i,l,!1);var a=this;this.mouseChildren=!1,a._dashedOffset=5,Object.defineProperty(a,"color",{get:function(){return a._color},set:function(s){n(s)&&(s="black"),a._color=s,s&&s.type?a.specialColor(a.colorCommand,s,a):a.colorCommand.style=s}}),this.setColorRange=function(s,f){return n(f)?(a.startColor=a.color,a.endColor=s):n(s)?(a.startColor=a.color,a.endColor=f):(a.startColor=s,a.endColor=f),a},a._colorRange=0,Object.defineProperty(a,"colorRange",{get:function(){return a._colorRange},set:function(s){a._colorRange=s,!n(a.startColor)&&!n(a.endColor)&&(a.color=t.colorRange(a.startColor,a.endColor,s))}}),Object.defineProperty(a,"borderColor",{get:function(){return a._borderColor},set:function(s){a._borderColor=s,s&&!a.borderWidth&&(a.borderWidth=1),a.borderColorCommand?s&&s.type?a.specialColor(a.borderColorCommand,s,a):a.borderColorCommand.style=s:a.drawShape()}}),Object.defineProperty(a,"borderWidth",{get:function(){return a._borderWidth},set:function(s){s>0||(s=0),a._borderWidth=s,!a.borderWidthCommand||a._borderWidth==0?(a.borderWidthCommand=null,a.drawShape()):(a.borderWidthCommand.width=a._borderWidth,a._dashed&&(a.borderDashedCommand.segments=a._dashed,a.borderDashedCommand.offset=a._dashedOffset))}}),Object.defineProperty(a,"thickness",{get:function(){return a._thickness},set:function(s){s>0||(s=0),a._thickness=s,!a.thicknessCommand||a._thickness==0?a.drawShape():(a.thicknessCommand.width=a._thickness,a._dashed&&(a.dashedCommand.segments=a._dashed,a.dashedCommand.offset=a._dashedOffset))}}),Object.defineProperty(a,"dashed",{get:function(){return a._dashed},set:function(s){a._dashed=s,s&&!Array.isArray(a._dashed)&&(a.dashed=[10,10]);var f;if(a.type=="Squiggle"||a.type=="Line"){if(!a.thicknessCommand||a._thickness==0)return;f=a.dashedCommand}else{if(!a.borderWidthCommand||a._borderWidth==0)return;f=a.borderDashedCommand}f?a._dashed?(f.segments=a._dashed,f.offset=a._dashedOffset):(f.segments=null,f.offset=null):a.drawShape()}}),Object.defineProperty(a,"dashedOffset",{get:function(){return a._dashedOffset},set:function(s){isNaN(s)&&(s=5),a._dashedOffset=s;var f;if(a.type=="Squiggle"||a.type=="Line"){if(!a.thicknessCommand||a._thickness==0)return;f=a.dashedCommand}else{if(!a.borderWidthCommand||a._borderWidth==0)return;f=a.borderDashedCommand}f?a._dashed?(f.segments=a._dashed,f.offset=a._dashedOffset):(f.segments=null,f.offset=null):a.drawShape()}}),Object.defineProperty(a,"corner",{get:function(){return a._corner},set:function(s){a._corner=s,a.drawShape()}}),this.linearGradient=function(s,f,u,v,C,h){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(s,f,u,v,C,h),this},this.radialGradient=function(s,f,u,v,C,h,g,k){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(s,f,u,v,C,h,g,k),this},this.cloneAll=function(s,f,u,v){var C=this.getBounds();n(C)&&(C={x:null,y:null,width:null,height:null});var h=this.cloneChildren(this.cloneProps(new t.Container(C.x,C.y,C.width,C.height,f,u,v)),s);return h.mouseChildren=!1,h.type=this.type,h}},t.extend(t.CustomShape,t.Container,null,"zimContainer",!1),t.Circle=function(e,r,i,l,a,s,f,u,v,C,h){var g="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",k;if(k=at(t.Circle,arguments,g,this))return k;De("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=C;var y=v===!1?{}:t.getStyle(this.type,this.group,h);n(e)&&(e=y.radius!=null?y.radius:50),n(a)&&(a=y.dashed!=null?y.dashed:!1),n(i)&&(i=y.borderColor!=null?y.borderColor:null),n(l)&&(l=y.borderWidth!=null?y.borderWidth:null),i<0||l<0?i=l=null:i!=null&&l==null&&(l=1),n(r)&&(r=y.color!=null?y.color:l>0?"rgba(0,0,0,0)":t.black),n(s)&&(s=y.percent!=null?y.percent:100),n(f)&&(f=y.percentClose!=null?y.percentClose:!0),n(u)&&(u=y.strokeObj!=null?y.strokeObj:{});var x=I(e,r,i,l,s);this.veeObj={radius:x[0],color:x[1],borderColor:x[2],borderWidth:x[3],percent:x[4]};function I(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),s=t.Pick.choose(s);var w=this;w._radius=e,w._color=r,w._borderColor=i,w._borderWidth=l,w._dashed=a,w._dashed&&!Array.isArray(w._dashed)&&(w._dashed=[10,10]);var E=this.shape=new Fe.Shape;this.addChild(E);var A=E.graphics;w.drawShape=function(){A.c(),w.colorCommand=A.f(w._color).command,w._color&&w._color.type&&w.specialColor(w.colorCommand,w._color,w),(n(w._borderWidth)||w._borderWidth>0)&&(!n(w._borderColor)||!n(w._borderWidth))&&(n(w._borderColor)&&(w._borderColor=t.black),w.borderColorCommand=A.s(w._borderColor).command,w._borderColor&&w._borderColor.type&&w.specialColor(w.borderColorCommand,w._borderColor,w),w.borderWidthCommand=A.ss(w._borderWidth,u.caps,u.joints,u.miterLimit,u.ignoreScale).command,w._dashed&&(w.borderDashedCommand=A.sd(Array.isArray(w._dashed)?w._dashed:[10,10],w._dashedOffset).command));var p=w._radius*2;if(typeof s=="number"&&s>=0&&s<100){var T=360*s/100/2;A.arc(0,0,w._radius,(-T-90)*Math.PI/180,(T-90)*Math.PI/180,!1),f&&A.cp(),p=w._radius-Math.cos(T*Math.PI/180)*w._radius}else A.dc(0,0,w._radius);w.setBounds(-w._radius,-w._radius,w._radius*2,p)},w.drawShape(),r.type&&(w.color=r),Object.defineProperty(w,"radius",{get:function(){return w._radius},set:function(p){w._radius=p,w.drawShape()}}),Object.defineProperty(w,"percentage",{get:function(){return s},set:function(p){s=p,w.drawShape()}}),Object.defineProperty(w,"percentClose",{get:function(){return f},set:function(p){f=p,w.drawShape()}}),v!==!1&&t.styleTransforms(this,y),this.clone=function(p){var T=w.cloneProps(new t.Circle(p||!t.isPick(x[0])?w.radius:x[0],p||!t.isPick(x[1])?w.color:x[1],p||!t.isPick(x[2])?w.borderColor:x[2],p||!t.isPick(x[3])?w.borderWidth:x[3],w.dashed,p||!t.isPick(x[4])?s:x[4],f,u,v,this.group,h));return w.linearGradientParams&&T.linearGradient.apply(T,w.linearGradientParams),w.radialGradientParams&&T.radialGradient.apply(T,w.radialGradientParams),T}},t.extend(t.Circle,t.CustomShape,"clone","zimCustomShape",!1),t.Rectangle=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",y;if(y=at(t.Rectangle,arguments,k,this))return y;De("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=h;var x=C===!1?{}:t.getStyle(this.type,this.group,g);n(e)&&(e=x.width!=null?x.width:null),n(r)&&(r=x.height!=null?x.height:n(e)?100:e),n(e)&&(e=r),n(s)&&(s=x.corner!=null?x.corner:0),n(f)&&(f=x.dashed!=null?x.dashed:!1),n(l)&&(l=x.borderColor!=null?x.borderColor:null),n(a)&&(a=x.borderWidth!=null?x.borderWidth:null),l<0||a<0?l=a=null:l!=null&&a==null&&(a=1),n(i)&&(i=x.color!=null?x.color:a>0?"rgba(0,0,0,0)":t.black),n(u)&&(u=x.strokeObj!=null?x.strokeObj:{}),n(v)&&(v=x.scaleDimensions!=null?x.scaleDimensions:!0);var I=w(e,r,i,l,a);this.veeObj={width:I[0],height:I[1],color:I[2],borderColor:I[3],borderWidth:I[4]};function w(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),a=t.Pick.choose(a);var E=this;E._color=i,E._borderColor=l,E._borderWidth=a,E._dashed=f,E._dashed&&!Array.isArray(E._dashed)&&(E._dashed=[10,10]),E._corner=s,E.scaleDimensions=v,E.setWidth=function(T){e=T},E.setHeight=function(T){r=T};var A=this.shape=new Fe.Shape;this.addChild(A);var p=A.graphics;E.drawShape=function(){if(p.c(),E.colorCommand=p.f(E._color).command,i&&i.type&&E.specialColor(E.colorCommand,i,E),(n(E._borderWidth)||E._borderWidth>0)&&(!n(E._borderColor)||!n(E._borderWidth))&&(n(E._borderColor)&&(E._borderColor=t.black),E.borderColorCommand=p.s(E._borderColor).command,E._borderColor&&E._borderColor.type&&E.specialColor(E.borderColorCommand,E._borderColor,E),E.borderWidthCommand=p.ss(E._borderWidth,u.caps,u.joints,u.miterLimit,u.ignoreScale).command,E._dashed&&(E.borderDashedCommand=p.sd(Array.isArray(E._dashed)?E._dashed:[10,10],E._dashedOffset).command)),Array.isArray(E._corner)){var T=E._corner;Array.isArray(T)&&T.length==2&&(T=[T,T,T,T]);for(var B=[],F=!1,D=0;D<T.length;D++)Array.isArray(T[D])?(F=!0,B.push(T[D])):B.push([T[D],T[D]]);T=B,F?p.mt(0,T[0][1]).curveTo(0,0,T[0][0],0).lt(e-T[1][0],0).curveTo(e,0,e,T[1][1]).lt(e,r-T[2][1]).curveTo(e,r,e-T[2][0],r).lt(T[3][0],r).curveTo(0,r,0,r-T[3][1]).cp():p.rc(0,0,e,r,E._corner[0],E._corner[1],E._corner[2],E._corner[3])}else E._corner>0?p.rr(0,0,e,r,E._corner):p.r(0,0,e,r);E.setBounds(0,0,e,r),i.type&&(E.color=i)},E.drawShape(),C!==!1&&t.styleTransforms(this,x),this.clone=function(T){var B=E.cloneProps(new t.Rectangle(T||!t.isPick(I[0])?e:I[0],T||!t.isPick(I[1])?r:I[1],T||!t.isPick(I[2])?E.color:I[2],T||!t.isPick(I[3])?E.borderColor:I[3],T||!t.isPick(I[4])?E.borderWidth:I[4],s,E._dashed,u,E.scaleDimensions,C,this.group,g));return B}},t.extend(t.Rectangle,t.CustomShape,"clone","zimCustomShape",!1),t.Triangle=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y){var x="a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",I;if(I=at(t.Triangle,arguments,x,this))return I;De("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=k;var w=g===!1?{}:t.getStyle(this.type,this.group,y);n(e)&&(e=w.a!=null?w.a:100),n(r)&&(r=w.b!=null?w.b:e),n(i)&&(i=w.c!=null?w.c:e),r==-1&&(r=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))),i==-1&&(i=Math.sqrt(Math.pow(e,2)+Math.pow(r,2))),n(f)&&(f=w.corner!=null?w.corner:0),n(u)&&(u=w.center!=null?w.center:!0),n(v)&&(v=w.adjust!=null?w.adjust:0),n(a)&&(a=w.borderColor!=null?w.borderColor:null),n(s)&&(s=w.borderWidth!=null?w.borderWidth:null),a<0||s<0?a=s=null:a!=null&&s==null&&(s=1),n(l)&&(l=w.color!=null?w.color:s>0?"rgba(0,0,0,0)":t.black),n(v)&&(v=w.adjust!=null?w.adjust:0),n(h)&&(h=w.strokeObj!=null?w.strokeObj:{});var E=A(e,r,i,l,a,s);this.veeObj={a:E[0],b:E[1],c:E[2],color:E[3],borderColor:E[4],borderWidth:E[5]};function A(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),this.a=e,this.b=r,this.c=i,l=t.Pick.choose(l),a=t.Pick.choose(a),s=t.Pick.choose(s);var p=this;p._color=l,p._borderColor=a,p._borderWidth=s,p._dashed=C,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]),p._corner=f;var T=[e,r,i];T.sort(function(V,b){return b-V});var B=T[0],F=T[1],D=T[2],P=[T.indexOf(e),T.indexOf(r),T.indexOf(i)];if(B>F+D){je("zim display - Triangle(): invalid triangle lengths");return}var Y=this.shape=new Fe.Shape;this.adjusted=v,this.addChild(Y);var _=Y.graphics;p.drawShape=function(){var V=[];Array.isArray(p._corner)?V=p._corner:V.push(p._corner,p._corner,p._corner);for(var b=0;b<3;b++)(V[b]<0||typeof V[b]!="number")&&(V[b]=0);_.c(),p.colorCommand=_.f(p._color).command,p._color&&p._color.type&&p.specialColor(p.colorCommand,p._color,p),(n(p._borderWidth)||p._borderWidth>0)&&(!n(p._borderColor)||!n(p._borderWidth))&&(n(p._borderColor)&&(p._borderColor=t.black),p.borderColorCommand=_.s(p._borderColor).command,p._borderColor&&p._borderColor.type&&p.specialColor(p.borderColorCommand,p._borderColor,p),p.borderWidthCommand=_.ss(p._borderWidth,h.caps,h.joints,h.miterLimit,h.ignoreScale).command,p._dashed&&(p.borderDashedCommand=_.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command)),p.one={x:0,y:0},p.two={x:e,y:0};var Z=Math.acos((Math.pow(F,2)+Math.pow(D,2)-Math.pow(B,2))/(2*F*D))*180/Math.PI,$=Math.asin(F*Math.sin(Z*Math.PI/180)/B)*180/Math.PI,Q=180-Z-$,re=[Z,$,Q];p.angles=[re[P[1]],re[P[2]],re[P[0]]];var G=p.angles[1],L=Math.cos(G*Math.PI/180)*r,c=Math.sin(G*Math.PI/180)*r,d=Math.max(e,e-L),o=c;p.setBounds(0,v,d,o),Y.y=o,p.three={x:e-L,y:0-c};var S=e*V[0]/(V[0]+V[1]||1);_.mt(S,0).at(e,0,e-L,0-c,V[1]).at(e-L,0-c,0,0,V[2]).at(0,0,e,0,V[0]).lt(S,0),_.cp(),u&&(p.regX=d/2,p.regY=o/2),v&&(p.shape.y+=v)},p.drawShape(),l.type&&(p.color=l),g!==!1&&t.styleTransforms(this,w),this.clone=function(V){var b=p.cloneProps(new t.Triangle(V||!t.isPick(E[0])?e:E[0],V||!t.isPick(E[1])?r:E[1],V||!t.isPick(E[2])?i:E[2],V||!t.isPick(E[3])?p.color:E[3],V||!t.isPick(E[4])?p.borderColor:E[4],V||!t.isPick(E[5])?p.borderWidth:E[5],f,u,v,C,h,g,this.group,y));return p.linearGradientParams&&b.linearGradient.apply(b,p.linearGradientParams),p.radialGradientParams&&b.radialGradient.apply(b,p.radialGradientParams),b}},t.extend(t.Triangle,t.CustomShape,"clone","zimCustomShape"),t.Poly=function(e,r,i,l,a,s,f,u,v,C,h){var g="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",k;if(k=at(t.Poly,arguments,g,this))return k;De("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=C;var y=v===!1?{}:t.getStyle(this.type,this.group,h);n(e)&&(e=y.radius!=null?y.radius:50),n(r)&&(r=y.sides!=null?y.sides:5),n(i)&&(i=y.pointSize!=null?y.pointSize:0),n(f)&&(f=y.dashed!=null?y.dashed:!1),n(a)&&(a=y.borderColor!=null?y.borderColor:null),n(s)&&(s=y.borderWidth!=null?y.borderWidth:null),a<0||s<0?a=s=null:a!=null&&s==null&&(s=1),n(l)&&(l=y.color!=null?y.color:s>0?"rgba(0,0,0,0)":t.black),n(u)&&(u=y.strokeObj!=null?y.strokeObj:{});var x=I(e,r,i,l,a,s);this.veeObj={radius:x[0],sides:x[1],pointSize:x[2],color:x[3],borderColor:x[4],borderWidth:x[5]};function I(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),a=t.Pick.choose(a),s=t.Pick.choose(s);var w=this;w._radius=e,w._color=l,w._sides=r,w._pointSize=i,w._borderColor=a,w._borderWidth=s,w._dashed=f,w._dashed&&!Array.isArray(w._dashed)&&(w._dashed=[10,10]);var E=this.shape=new Fe.Shape;this.addChild(E),E.rotation=-90;var A=E.graphics;w.drawShape=function(){A.c(),w.colorCommand=A.f(w._color).command,w._color&&w._color.type&&w.specialColor(w.colorCommand,w._color,w),(n(w._borderWidth)||w._borderWidth>0)&&(!n(w._borderColor)||!n(w._borderWidth))&&(n(w._borderColor)&&(w._borderColor=t.black),w.borderColorCommand=A.s(w._borderColor).command,w._borderColor&&w._borderColor.type&&w.specialColor(w.borderColorCommand,w._borderColor,w),w.borderWidthCommand=A.ss(w._borderWidth,u.caps,u.joints,u.miterLimit,u.ignoreScale).command,w._dashed&&(w.borderDashedCommand=A.sd(Array.isArray(w._dashed)?w._dashed:[10,10],w._dashedOffset).command)),A.dp(0,0,w._radius,w._sides,w._pointSize),w.setBounds(-w._radius,-w._radius,w._radius*2,w._radius*2)},w.drawShape(),l.type&&(w.color=l),Object.defineProperty(w,"radius",{get:function(){return w._radius},set:function(p){w._radius=p,w.drawShape()}}),Object.defineProperty(w,"sides",{get:function(){return w._sides},set:function(p){w._sides=p,w.drawShape()}}),Object.defineProperty(w,"pointSize",{get:function(){return w._pointSize},set:function(p){w._pointSize=p,w.drawShape()}}),v!==!1&&t.styleTransforms(this,y),this.clone=function(p){var T=w.cloneProps(new t.Poly(p||!t.isPick(x[0])?w.radius:x[0],p||!t.isPick(x[1])?w.sides:x[1],p||!t.isPick(x[2])?w.pointSize:x[2],p||!t.isPick(x[3])?w.color:x[3],p||!t.isPick(x[4])?w.borderColor:x[4],p||!t.isPick(x[5])?w.borderWidth:x[5],w.dashed,u,v,this.group,h));return w.linearGradientParams&&T.linearGradient.apply(T,w.linearGradientParams),w.radialGradientParams&&T.radialGradient.apply(T,w.radialGradientParams),T}},t.extend(t.Poly,t.CustomShape,"clone","zimCustomShape",!1),t.Line=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x){var I="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",w;if(w=at(t.Line,arguments,I,this))return w;De("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=y;var E=k===!1?{}:t.getStyle(this.type,this.group,x);n(e)&&(e=E.length!=null?E.length:100),n(s)&&(s=E.dashed!=null?E.dashed:!1),n(r)&&(r=E.thickness!=null?E.thickness:3),n(i)&&(i=E.color!=null?E.color:t.black),n(l)&&(l=E.startHead!=null?E.startHead:null),n(a)&&(a=E.endHead!=null?E.endHead:null),n(f)&&(f=E.strokeObj!=null?E.strokeObj:{}),n(u)&&(u=E.lineType!=null?E.lineType:"straight"),u!=="corner"&&u!="curve"&&(u="straight"),n(v)&&(v=E.lineOrientation!=null?E.lineOrientation:"auto"),v!=="vertical"&&v!="horizontal"&&(v="auto"),n(C)&&(C=E.curveH!=null?E.curveH:20),n(h)&&(h=E.curveV!=null?E.curveV:20),n(f)&&(f=E.strokeObj!=null?E.strokeObj:{});var A=p(e,i,r,l,a);this.veeObj={length:A[0],color:A[1],thickness:A[2],startHead:A[3],endHead:A[4]};function p(){return arguments}e=t.Pick.choose(e),i=t.Pick.choose(i),r=t.Pick.choose(r),l=t.Pick.choose(l),a=t.Pick.choose(a),l&&l.clone&&(l=l.clone()),a&&a.clone&&(a=a.clone());var T=this;T._length=e,T._color=i,T._thickness=r,T._dashed=s,T._dashed&&!Array.isArray(T._dashed)&&(T._dashed=[10,10]),T._startX=0,T._startY=0,T._endX=e,T._endY=0,T._startHead=l,T._endHead=a,T._points=g,T._lineOrientation=v,T.angle=0,T.lineType=u,T._startHead&&B("start",T._startHead),T._endHead&&B("end",T._endHead);function B(P,Y){if(Y=="triangle"||Y=="arrow"){var _=T["_"+P+"Head"]=new t.Triangle(r*4,r*4,r*4,i);_.rotation=90}else Y=="circle"&&(T["_"+P+"Head"]=new t.Circle(r*2.2,i));n(T["_"+P+"Head"].startAngle)&&(T["_"+P+"Head"].startAngle=T["_"+P+"Head"].rotation)}l=T._startHead,a=T._endHead,l&&l.type=="Triangle"&&(l.startRegY=l.regY),a&&a.type=="Triangle"&&(a.startRegY=a.regY);var F=this.shape=new Fe.Shape;this.addChild(F);var D=F.graphics;T.drawShape=function(P,Y){D.c(),T.colorCommand=D.s(T._color).command,i&&i.type&&T.specialColor(T.colorCommand,i,T),T.thicknessCommand=D.ss(T._thickness,f.caps,f.joints,f.miterLimit,f.ignoreScale).command,T._dashed&&(T.dashedCommand=D.sd(Array.isArray(T._dashed)?T._dashed:[10,10],T._dashedOffset).command);var _,V;if(T._points){var b=T._points[0];T._startX=b[0],T._startY=b[1];var Z=T._points[T._points.length-1],$=[Z[Z.length-2],Z[Z.length-1]];T._endX=$[0],T._endY=$[1],D.mt(b[0],b[1]);for(var Q=1;Q<T._points.length;Q++){var re=T._points[Q];Q==1&&(_=[T._startX,T._startY,re[0],re[1]]),re.length==2?D.lt(re[0],re[1]):re.length==4?D.qt(re[0],re[1],re[2],re[3]):re.length==6&&D.bt(re[0],re[1],re[2],re[3],re[4],re[5])}if(re.length>=4)V=[re[re.length-4],re[re.length-3],T._endX,T._endY];else{var G=T._points[T._points.length-2];V=[G[G.lenth-2],G[G.lenth-1],T._endX,T._endY]}}else{var L=T._startX,c=T._startY,d=T._endX,o=T._endY,S;if(T.lineType=="straight"?(l&&l.type=="Triangle"&&(l.regY=0,S=t.dist(L,c,d,o),S!=0&&(L=L+T._startHead.height/2*(d-L)/S),S!=0&&(c=c+T._startHead.height/2*(o-c)/S)),a&&a.type=="Triangle"&&(a.regY=0,S=t.dist(L,c,d,o),S!=0&&(d=d-T._endHead.height/2*(d-L)/S),S!=0&&(o=o-T._endHead.height/2*(o-c)/S))):(P?T._lineOrientation=="horizontal"||T.autoOrientation=="horizontal"?l&&l.type=="Triangle"&&(l.regY=0,d>L?L=Math.min(d,L+T._startHead.height/2):L=Math.max(d,L-T._startHead.height/2)):l&&l.type=="Triangle"&&(l.regY=0,o>c?c=Math.min(o,c+T._startHead.height/2):c=Math.max(o,c-T._startHead.height/2)):l&&l.type=="Triangle"&&(l.regY=l.startRegY),Y?T._lineOrientation=="horizontal"||T.autoOrientation=="horizontal"?a&&a.type=="Triangle"&&(a.regY=0,d>L?d-=T._endHead.height/2:d+=T._endHead.height/2):a&&a.type=="Triangle"&&(a.regY=0,o>c?o-=T._endHead.height/2:o+=T._endHead.height/2):a&&a.type=="Triangle"&&(a.regY=a.startRegY)),T.lineType=="straight")D.mt(L,c).lt(d,o),_=V=[L,c,d,o];else if(T.lineType=="corner"){var X=L+(d-L)*.4,m=c+(o-c)*.4;T._lineOrientation=="auto"&&(T.autoOrientation=Math.abs(L-d)>Math.abs(c-o)?"horizontal":"vertical"),T._lineOrientation=="horizontal"||T.autoOrientation=="horizontal"?(_=V=[L,c,X,c],D.mt(L,c).lt(X,c).lt(X,o).lt(d,o)):(_=V=[L,c,L,m],D.mt(L,c).lt(L,m).lt(d,m).lt(d,o))}else{var O=L>d?-1:1,de=c>o?-1:1,R=L,N=c,se=Math.abs(L-d),ie=Math.abs(c-o),q=Math.min(C,se*.5),z=Math.min(h,ie*.5);T._lineOrientation=="auto"&&(T.autoOrientation=Math.abs(L-d)>Math.abs(c-o)?"horizontal":"vertical");var ce,Ie,K,xe;T._lineOrientation=="horizontal"||T.autoOrientation=="horizontal"?(ce=ie-z*2,Ie=(se-q*2)/2,D.mt(R,N),Ie>0&&(R=R+Ie*O,D.lt(R,N)),xe=N,N=N+z*de,R=R+q*O,D.qt(R,xe,R,N),_=V=[L,c,R,c],ce>0&&(N=N+ce*de,D.lt(R,N)),N=N+z*de,K=R,R=R+q*O,D.qt(K,N,R,N),Ie>0&&(R=R+Ie*O,D.lt(R,N))):(ce=se-q*2,Ie=(ie-z*2)/2,D.mt(R,N),Ie>0&&(N=N+Ie*de,D.lt(R,N)),K=R,R=R+q*O,N=N+z*de,D.qt(K,N,R,N),_=V=[L,c,L,N],ce>0&&(R=R+ce*O,D.lt(R,N)),R=R+q*O,xe=N,N=N+z*de,D.qt(R,xe,R,N),Ie>0&&(N=N+Ie*de,D.lt(R,N)))}}if(T.setBounds(Math.min(T._startX,T._endX),Math.min(T._startY,T._endY),Math.abs(T._startX-T._endX),Math.abs(T._startY-T._endY)),T._length=Math.sqrt(Math.pow(T._startX-T._endX,2)+Math.pow(T._startY-T._endY,2)),T.angle=Math.atan2(T._endY-T._startY,T._endX-T._startX)*180/Math.PI,T._startHead&&T._startHead.loc){T._startHead.loc(T._startX,T._startY,T);var J=Math.atan2(_[3]-_[1],_[2]-_[0])*180/Math.PI;T._startHead.rotation=J-180+T._startHead.startAngle}if(T._endHead&&T._endHead.loc){T._endHead.loc(T._endX,T._endY,T);var fe=Math.atan2(V[3]-V[1],V[2]-V[0])*180/Math.PI;T._endHead.rotation=fe+T._endHead.startAngle}},T.drawShape(),i.type&&(T.color=i),this.setPoints=function(P,Y,_,V,b,Z){return Array.isArray(P)&&n(Y)?(T.points=P,T):(P&&!n(P.x)?(T._startX=n(P.x)?T._startX:P.x,T._startY=n(P.y)?T._startY:P.y,Y&&(T._endX=n(Y.x)?T._endX:Y.x,T._endY=n(Y.y)?T._endY:Y.y)):(T._startX=n(P)?T._startX:P,T._startY=n(Y)?T._startY:Y,T._endX=n(_)?T._endX:_,T._endY=n(V)?T._endY:V),T.drawShape(b,Z),T)},this.from=function(P,Y,_){n(_)&&(_=!0);var V,b;if(P&&P.parent&&T.parent&&_){var Z=P.parent.localToLocal(P.x,P.y,T.parent);V=Z.x,b=Z.y}return P&&!n(P.x)?(T._startX=n(V)?n(P.x)?T._startX:P.x:V,T._startY=n(b)?n(P.y)?T._startY:P.y:b):(T._startX=n(P)?T._startX:P,T._startY=n(Y)?T._startY:Y),T.drawShape(),T},this.to=function(P,Y,_){n(_)&&(_=!0);var V,b;if(P&&P.parent&&T.parent&&_){var Z=P.parent.localToLocal(P.x,P.y,T.parent);V=Z.x,b=Z.y}return P&&!n(P.x)?(T._endX=n(V)?n(P.x)?T._endX:P.x:V,T._endY=n(b)?n(P.y)?T._endY:P.y:b):(T._endX=n(P)?T._endX:P,T._endY=n(Y)?T._endY:Y),T.drawShape(),T},Object.defineProperty(T,"length",{get:function(){return T._length},set:function(P){var Y=T.length!=0?P/T.length:0;if(!isNaN(Y)){var _=T.scaleX,V=T.scaleY;T.scaleX*=Y,T.scaleY*=Y;var b=T.localToGlobal(T._startX,T._startY),Z=T.localToGlobal(T._endX,T._endY);T.scaleX=_,T.scaleY=V;var $=T.globalToLocal(b.x,b.y),Q=T.globalToLocal(Z.x,Z.y);T.setPoints($,Q)}}}),Object.defineProperty(T,"startPoint",{get:function(){return new t.Point(T._startX,T._startY)},set:function(P){T._startX=n(P.x)?T._startX:P.x,T._startY=n(P.y)?T._startY:P.y,T.drawShape()}}),Object.defineProperty(T,"endPoint",{get:function(){return new t.Point(T._endX,T._endY)},set:function(P){T._endX=n(P.x)?T._endX:P.x,T._endY=n(P.y)?T._endY:P.y,T.drawShape()}}),Object.defineProperty(T,"startHead",{get:function(){return T._startHead},set:function(P){T._startHead=P,T.drawShape()}}),Object.defineProperty(T,"endHead",{get:function(){return T._endHead},set:function(P){T._endHead=P,T.drawShape()}}),Object.defineProperty(T,"startX",{get:function(){return T._startX},set:function(P){T._startX=P||0,T.drawShape()}}),Object.defineProperty(T,"startY",{get:function(){return T._startY},set:function(P){T._startY=P||0,T.drawShape()}}),Object.defineProperty(T,"endX",{get:function(){return T._endX},set:function(P){T._endX=P||0,T.drawShape()}}),Object.defineProperty(T,"endY",{get:function(){return T._endY},set:function(P){T._endY=P||0,T.drawShape()}}),Object.defineProperty(T,"points",{get:function(){return T._points},set:function(P){P&&(T._points=P,T.drawShape())}}),Object.defineProperty(T,"lineOrientation",{get:function(){return T._lineOrientation},set:function(P){P&&(T._lineOrientation=P,T.drawShape())}}),k!==!1&&t.styleTransforms(this,E),this.clone=function(P){var Y=P||!t.isPick(A[3])?T._startHead:A[3];Y&&Y.clone&&(Y=Y.clone(),Y.rotation=T._startHead.startAngle);var _=P||!t.isPick(A[4])?T._endHead:A[4];_&&_.clone&&(_=_.clone(),_.rotation=T._endHead.startAngle);var V=T.cloneProps(new t.Line(P||!t.isPick(A[0])?T.length:A[0],P||!t.isPick(A[2])?T.thickness:A[2],P||!t.isPick(A[1])?T.color:A[1],Y,_,T.dashed,f,u,T._lineOrientation,C,h,t.copy(g),k,this.group,x));return T.points?V.setPoints(T.points):V.setPoints(T._startX,T._startY,T._endX,T._endY),T.linearGradientParams&&V.linearGradient.apply(V,T.linearGradientParams),T.radialGradientParams&&V.radialGradient.apply(V,T.radialGradientParams),V}},t.extend(t.Line,t.CustomShape,"clone","zimCustomShape",!1),t.Squiggle=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y){var _="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",V;if(V=at(t.Squiggle,arguments,_,this))return V;De("53.2"),this.group=P;var b=D===!1?{}:t.getStyle("Squiggle",this.group,Y);if(n(r)&&(r=b.thickness!=null?b.thickness:6),n(l)&&(l=b.length!=null?b.length:300),n(i)&&(i=b.points!=null?b.points:5),typeof i=="string"){var Z=new t.SVGContainer;i=Z.processPath(i)}var $=typeof i!="number",Q=typeof i=="number"?i:i.length;if(Q==0)return;n(a)&&(a=b.controlLength!=null?b.controlLength:l/Q),this.zimCustomShape_constructor(l,a,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,n(k)&&(k=b.dashed!=null?b.dashed:!1),n(e)&&(e=b.color!=null?b.color:t.blue),e.style&&(this.colorCommand=e,e=t.black),n(s)&&(s=b.controlType!=null?b.controlType:null);var re=s;n(s)&&(s="mirror"),n(f)&&(f=b.lockControlType!=null?b.lockControlType:!1),n(B)&&(B=b.interactive!=null?b.interactive:!0),n(u)&&(u=b.showControls!=null?b.showControls:B);var G=u;n(v)&&(v=b.lockControls!=null?b.lockControls:!B),n(C)&&(C=b.handleSize!=null?b.handleSize:t.mobile()?20:10),n(h)&&(h=b.allowToggle!=null?b.allowToggle:B),n(g)&&(g=b.move!=null?b.move:B),n(x)&&(x=b.circleColor!=null?b.circleColor:t.light),n(I)&&(I=b.circleBorderColor!=null?b.circleBorderColor:t.dark),n(w)&&(w=b.stickColor!=null?b.stickColor:t.darker),n(E)&&(E=b.stickThickness!=null?b.stickThickness:1),n(A)&&(A=b.selectColor!=null?b.selectColor:t.white),n(p)&&(p=b.selectPoints!=null?b.selectPoints:B),this.circleColor=x,this.circleBorderColor=I,this.stickColor=w,this.stickThickness=E,n(y)&&(y=b.onTop!=null?b.onTop:!0),n(T)&&(T=b.editPoints!=null?b.editPoints:B),n(F)&&(F=b.strokeObj!=null?b.strokeObj:{});var L=c(e);this.veeObj={color:L[0]};function c(){return arguments}e=t.Pick.choose(e);var d=this,o;this.types=["mirror","straight","free","none"],this.interactive=B,this.num=Q,this.onTop=y,this.move=g,this.editPoints=T,this.allowToggle=h,this.lockControlType=f,this.selectPoints=p,this.lockControls=v;var S,X,m;d._color=e,d._thickness=r,d._dashed=k,d._dashed&&!Array.isArray(d._dashed)&&(d._dashed=[10,10]);var O,de,R,N,se=d.move,ie=2,q,z;re&&typeof i!="number"&&t.loop(i,function(ne){ne[8]=re,re=="none"&&(ne[4]=ne[5]=ne[6]=ne[7]=0)}),ce();function ce(){z&&z.removeAllEventListeners(),d.num=Q=typeof i=="number"?i:i.length,Q=Math.max(2,Q),a=l/Q,O=d.shape=new t.Shape({style:!1}).addTo(d);var ne=d.sticks=new t.Shape({style:!1}).addTo(d);C<=0&&ne.removeFrom();var ve=O.graphics;ve.c();var we=ne.graphics;we.c();var ee=C/10*8,le=C;d.selectPoints?(d.selectedBalls=new t.SelectionSet,d.selectedRect1s=new t.SelectionSet,d.selectedRect2s=new t.SelectionSet,d.selectionManager=new t.SelectionManager([d.selectedBalls,d.selectedRect1s,d.selectedRect2s],"ctrl",!1)):d.selectionManager=new t.SelectionManager(null,"ctrl");var ye=t.mobile();z=d.controls=new t.Container({style:!1}).addTo(d),d.interactive&&z.drag({onTop:!ye}),S=[],m=[],X=[];var oe,Me,ae,Se,Le,Ce,te,Oe,Re;for(oe=0;oe<Q;oe++){if(Se=new t.Container({style:!1}).addTo(z),Se.num=oe,typeof i=="number"){var Xe=t.Pick.choose(a);ae=new t.Container(Xe,r,null,null,!1).addTo(d).loc({x:oe*l/(Q-1)-Xe/2,y:oe%2*Xe}),te=new t.Circle(ee,d.selectPoints&&d.selectedBalls.isSelected(oe)?A:d.circleColor,d.circleBorderColor,2,null,null,null,null,!1).centerReg(ae).loc({x:Xe/2,y:0}),Le=new t.Rectangle(le,le,d.selectPoints&&d.selectedRect1s.isSelected(oe)?A:me(s),C==0?null:t.dark,C==0?null:2,null,null,null,null,!1).centerReg(ae).loc({x:0,y:0}),Ce=new t.Rectangle(le,le,d.selectPoints&&d.selectedRect2s.isSelected(oe)?A:me(s),C==0?null:t.dark,C==0?null:2,null,null,null,null,!1).centerReg(ae).loc({x:Xe,y:0});var Qe=ae.localToLocal(te.x,te.y,z);te.x=Qe.x,te.y=Qe.y,te.addTo(Se,null,!1);var it=ae.localToLocal(Le.x,Le.y,z);Le.x=s=="none"?0:it.x-te.x,Le.y=s=="none"?0:it.y-te.y,Le.addTo(Se,null,!1);var Be=ae.localToLocal(Ce.x,Ce.y,z);Ce.x=s=="none"?0:Be.x-te.x,Ce.y=s=="none"?0:Be.y-te.y,Ce.addTo(Se,null,!1),Se.x=te.x,Se.y=te.y,te.x=0,te.y=0,s=="none"&&te.addTo(Se,null,!1)}else Re=i[oe],Oe=Re[8]?Re[8]:s,Se.loc({x:Re[0],y:Re[1]}),te=new t.Circle(ee,d.circleColor,d.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(Se).loc({x:Re[2],y:Re[3]}),Le=new t.Rectangle(le,le,me(Oe),C==0?null:t.dark,C==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Se,0).loc({x:Re[4],y:Re[5]}),Ce=new t.Rectangle(le,le,me(Oe),C==0?null:t.dark,C==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Se,0).loc({x:Re[6],y:Re[7]});te.mySet=Se,te.rect1=Le,te.rect2=Ce,te.index=oe,ye?te.on("mousedown",He):te.on("dblclick",he),Le.ball=te,Le.other=Ce,Ce.ball=te,Ce.other=Le,C==0&&(te.expand(10),Le.expand(10),Ce.expand(10)),ye&&(te.expand(),Le.expand(),Ce.expand()),Me=[Se,te,Le,Ce,Re?Re[8]:s],S.push(Me),X.push(te),m.push(Se)}var Ke=!1;function He(pe){Ke?(pe.preventDefault(),he(pe)):(Ke=!0,setTimeout(function(){Ke=!1},300))}function he(pe){if(!d.lockControlType){var Je=pe.target,be=S[Je.index][4]?S[Je.index][4]:s;Math.abs(Je.rect1.x)<=2&&Math.abs(Je.rect1.y)<=2&&Math.abs(Je.rect2.x)<=2&&Math.abs(Je.rect2.y)<=2&&(be="none"),be=="none"&&Je.parent.addChildAt(Je,0),be=d.types[(d.types.indexOf(be)+(d.shiftKey?-1:1)+d.types.length)%d.types.length],be=="none"&&(Je.rect1.x=Je.rect1.y=Je.rect2.x=Je.rect2.y=0,Je.parent.addChild(Je),pe.stopImmediatePropagation()),S[Je.index][4]=be,Je.rect1.color=me(be),Je.rect2.color=me(be),d.drawShape(),e.type&&(d.color=e);var Ee=new Fe.Event("change");Ee.controlType="bezierSwitch",d.dispatchEvent(Ee),Je.stage.update()}}function me(pe){var Je={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return Je[pe]?Je[pe]:"#993399"}var Te=t.mobile();d.drawShape=function(){ve.c();var pe=Te?10:6,Je,be,Ee,_e,Ge,Ue,tt,Ae,Ze,lt,Ve,ft,ot,ut,$e;if(r<pe)for(ve.s("rgba(0,0,0,.01)").ss(pe),_e=S[0][0],Ze=_e.localToLocal(S[0][1].x,S[0][1].y,O),ve.mt(Ze.x,Ze.y),Je=0;Je<S.length;Je++)be=Je,Ee=(Je+1)%S.length,_e=S[be][0],Ge=S[be][1],Ue=S[be][2],tt=S[be][3],Ae=S[Ee][0],lt=S[Ee][1],Ve=S[Ee][2],ot=_e.localToLocal(tt.x,tt.y,O),ut=Ae.localToLocal(Ve.x,Ve.y,O),$e=Ae.localToLocal(lt.x,lt.y,O),Je!=S.length-1&&ve.bt(ot.x,ot.y,ut.x,ut.y,$e.x,$e.y);for(d.colorCommand||(d.colorCommand=ve.s(d._color).command,e&&e.type&&d.specialColor(d.colorCommand,e,d)),d.thicknessCommand||(d.thicknessCommand=ve.ss(d._thickness,F.caps,F.joints,F.miterLimit,F.ignoreScale).command),d._dashed&&(d.dashedCommand||(d.dashedCommand=ve.sd(Array.isArray(d._dashed)?d._dashed:[10,10],d._dashedOffset).command)),_e=S[0][0],Ze=_e.localToLocal(S[0][1].x,S[0][1].y,O),ve.mt(Ze.x,Ze.y),we.c().s(d.stickColor).ss(d.stickThickness),Je=0;Je<S.length;Je++)be=Je,Ee=(Je+1)%S.length,_e=S[be][0],Ge=S[be][1],Ue=S[be][2],tt=S[be][3],Ae=S[Ee][0],lt=S[Ee][1],Ve=S[Ee][2],ot=_e.localToLocal(tt.x,tt.y,O),ut=Ae.localToLocal(Ve.x,Ve.y,O),$e=Ae.localToLocal(lt.x,lt.y,O),Je!=S.length-1&&ve.bt(ot.x,ot.y,ut.x,ut.y,$e.x,$e.y),Ze=_e.localToLocal(Ge.x,Ge.y,O),ft=_e.localToLocal(Ue.x,Ue.y,O),Je==0&&(Ue.visible=0),Je!=0&&we.mt(Ze.x,Ze.y).lt(ft.x,ft.y),Je!=S.length-1&&we.mt(Ze.x,Ze.y).lt(ot.x,ot.y),Je==S.length-1&&(tt.visible=0);d._dashed&&ve.append(d.dashedCommand),ve.append(d.thicknessCommand),ve.append(d.colorCommand)},d.drawShape(),e.type&&(d.color=e);var ze;z.on("mousedown",function(pe){if(o=pe.target.stage,!d.lockControls){if(d.selectPoints&&(d.keyFocus=!0),ze={x:pe.target.x,y:pe.target.y},pe.target.rect1)te=pe.target,te.startX=te.x,te.startY=te.y,te.rect1.startX=te.rect1.x,te.rect1.startY=te.rect1.y,te.rect2.startX=te.rect2.x,te.rect2.startY=te.rect2.y;else{var Je=pe.target;Je.startX=Je.x,Je.startY=Je.y,te=Je.ball;var be=te.index,Ee=s;if(n(S[be][4])||(Ee=S[be][4]),Ee=="straight"){var _e=Je.other,Ge=_e.x-te.x,Ue=_e.y-te.y;_e.stickLength=Math.sqrt(Math.pow(Ge,2)+Math.pow(Ue,2))}}if(d.selectPoints){var tt=d.selectionManager.currentSet;if(tt&&tt.selections&&tt.selections.length>0)for(oe=0;oe<tt.selections.length;oe++){var Ae=d.pointObjects[tt.selections[oe]];Ae[1].startX=Ae[1].x,Ae[1].startY=Ae[1].y,Ae[2].startX=Ae[2].x,Ae[2].startY=Ae[2].y,Ae[3].startX=Ae[3].x,Ae[3].startY=Ae[3].y}}}}),d.selectPoints&&z.tap(function(pe){if(pe.target.rect1){var Je=pe.target;d.selectedBalls.toggle(Je.parent.num)}else{var be=pe.target;be.color="white",Je=be.ball,Je.rect1==be?d.selectedRect1s.toggle(Je.parent.num):d.selectedRect2s.toggle(Je.parent.num)}for(oe=0;oe<d.pointObjects.length;oe++){var Ee=d.pointObjects[oe];Ee[1].color=d.selectedBalls.isSelected(oe)?A:d.circleColor,Ee[2].color=d.selectedRect1s.isSelected(oe)?A:me(Ee[4]),Ee[3].color=d.selectedRect2s.isSelected(oe)?A:me(Ee[4])}o.update()}),z.on("pressmove",function(pe){if(!d.lockControls)if(d.selectPoints){var Je=Ie();if(Je.indexOf(pe.target)==-1)q(pe.target),d.drawShape();else if(Je.length>0){for(var be=pe.target.x-pe.target.startX,Ee=pe.target.y-pe.target.startY,_e=0;_e<Je.length;_e++){var Ge=Je[_e];Ge.x=Ge.startX+be,Ge.y=Ge.startY+Ee,q(Ge)}d.drawShape()}}else q(pe.target),d.drawShape()}),z.on("pressup",function(pe){if(!d.lockControls){var Je=pe.target.x!=ze.x||pe.target.y!=ze.y,be=new Fe.Event("change");pe.target.rect1?(be.controlType="bezierPoint",st(pe.target)):be.controlType="bezierHandle",Je&&d.dispatchEvent(be)}});function st(pe){if(d.selectPoints){var Je=Ie();if(Je&&Je.indexOf(pe)==-1)K(pe);else if(Je&&Je.length>0)for(var be=0;be<Je.length;be++)K(Je[be]);else K(pe)}else K(pe)}d.changeControl=function(pe,Je,be,Ee,_e,Ge,Ue,tt,Ae){var Ze="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",lt;if(lt=at(d.changeControl,arguments,Ze))return lt;if(n(pe)){for(oe=0;oe<S.length;oe++)d.changeControl(oe,Je,be,Ee,_e,Ge,Ue,tt);return}var Ve=S[pe];Ve[4]=Je,Je=="none"?(n(Ue)||(Ve[2].x=Ue),n(tt)||(Ve[2].y=tt),Ve[2].x=Ve[1].x,Ve[2].y=Ve[1].y,Ve[3].x=Ve[1].x,Ve[3].y=Ve[1].y,Ve[1].parent.addChild(Ve[1])):(n(be)||(Ve[2].x=be),n(Ee)||(Ve[2].y=Ee),n(_e)||(Ve[3].x=_e),n(Ge)||(Ve[3].y=Ge),n(Ue)||(Ve[1].x=Ue),n(tt)||(Ve[1].y=tt),Ve[1].parent.addChildAt(Ve[1],0)),Ae&&(d.update(),o&&o.update())},d.transformPoints=function(pe,Je,be,Ee,_e){return n(_e)&&(_e=!0),d.points=t.transformPoints(d.points,pe,Je,be,Ee),_e&&d.approximateBounds(),d},d.traverse=function(pe,Je,be,Ee){var _e=t.copy(d.segmentRatios);_e.unshift(0),n(be)&&(be=Je+1);var Ge=Je<be,Ue,tt;return Ge?(Ue=_e[Je]*100,tt=_e[be]*100):(Ue=50+(100-_e[Je]*100)/2,tt=50+(100-_e[be]*100)/2),pe.percentComplete=pe.zimStartPercent=Ue+.1,pe.animate({ease:"linear",props:{path:d},rewind:!Ge,time:Ee,events:!0}),pe.on("animation",function(Ae){if(pe.percentComplete>tt||pe.percentComplete==0){pe.stopAnimate(),Ae.remove();var Ze=new Fe.Event("traversed");Ze.obj=pe,d.dispatchEvent(Ze)}}),d},d.reversePoints=function(){return i=t.copy(d.points),d.points=t.reversePoints(t.copy(d.points)),d.update(),d},d.appendPoints=function(pe,Je){var be=t.copy(d.points);return d.points=t.appendPoints(be,pe,Je),d.update(),d},d.prependPoints=function(pe,Je){var be=t.copy(d.points);return d.points=t.rependPoints(be,i,Je),d.update(),d},d.splitPoints=function(pe){var Je=t.copy(d.points);if(!(pe<1||pe>Je.length-1)){var be=t.splitPoints(Je,pe),Ee=be[0],_e=be[1],Ge=d.clone();return d.points=Ee,d.update(),Ge.points=_e,d.parent&&Ge.addTo(d.parent),Ge}},d.makeBlob=function(pe,Je){n(pe)&&(pe="mirror"),n(Je)&&(Je=5);var be=t.copy(d.points);t.loop(be,function(_e,Ge,Ue){_e[8]||(_e[8]="mirror"),Ge==0&&(pe=="free"&&(_e[4]=_e[5]=0),_e[8]=pe),Ge==Ue-1&&(pe=="free"&&(_e[6]=_e[7]=0),_e[8]=pe)}),Math.abs(be[0][0]-be[be.length-1][0])<Je&&Math.abs(be[0][1]-be[be.length-1][1])<Je&&(be[0][4]=be[be.length-1][4],be[0][5]=be[be.length-1][5],be.pop());var Ee=new t.Blob({points:be,borderColor:d.color,borderWidth:d.thickness,showControls:d.controlsVisible,interactive:d.interactive,onTop:d.onTop,dashed:d.dashed,stickColor:d.stickColor,stickThickness:d.stickThickness});return Ee},d.update=function(pe){return pe?d.points=d.pointsAdjusted:d.drawShape(),d.zimAnimateChanged=!0,d},d.interactive&&(g&&O.drag({onTop:!1}),de=O.on("mousedown",function(pe){o=pe.target.stage,ze={x:O.x,y:O.y},d.selectPoints&&(d.keyFocus=!0),Ye()}),R=O.on("pressmove",function(){z.x=O.x,z.y=O.y,ne.x=O.x,ne.y=O.y}),N=O.on("pressup",function(){var pe=O.x!=ze.x||O.y!=ze.y,Je=O.localToLocal(d.regX,d.regY,d.parent);if(d.x=Je.x,d.y=Je.y,z.x=z.y=ne.x=ne.y=O.x=O.y=0,pe){var be=new Fe.Event("change");be.controlType="move",d.dispatchEvent(be)}o&&o.update()}),d.move||J(!0));function Ye(){if(d.onTop){var pe=d.parent.numChildren-1;d.parent.getChildAt(pe).type=="Keyboard"&&pe--,d.parent.setChildIndex(d,pe)}}d.toggleEvent=d.on("mousedown",function(){d.allowToggle&&(G||(d.showControls(),d.dispatchEvent("controlsshow")))}),d.added(function(){o=d.stage,d.toggleStageEvent&&o.off("stagemousedown",d.toggleStageEvent),d.toggleStageEvent=o.on("stagemousedown",function(pe){!d.allowToggle||!d.stage||G&&!d.hitTestPoint(pe.stageX/t.scaX,pe.stageY/t.scaY,!1)&&(d.hideControls(),d.dispatchEvent("controlshide"))})}),d.clickEvent=d.on("click",function(){d.ctrlKey&&setTimeout(function(){d.clone(!0).addTo(d.stage).mov(0,100),d.allowToggle&&(d.hideControls(),d.dispatchEvent("controlshide"));var pe=new Fe.Event("change");pe.controlType="move",d.dispatchEvent(pe),d.stage.update()},50)}),d.hideControls=function(){return d.toggled=!1,z.visible=!1,ne.visible=!1,G=!1,d.stage&&d.stage.update(),!d.allowToggle&&d.move&&J(),d},u||d.hideControls(),d.showControls=function(){return d.toggled=!0,z.visible=!0,ne.visible=!0,G=!0,z.x=O.x,z.y=O.y,ne.x=O.x,ne.y=O.y,d.addChildAt(O,0),d.move&&!d.allowToggle&&xe(),d.stage&&d.stage.update(),d},d.toggle=function(pe){return pe===!0?d.showControls():pe===!1||G?d.hideControls():d.showControls(),d},d.recordData=function(pe){n(pe)&&(pe=!1);var Je={type:"Squiggle",index:d.parent?d.parent.getChildIndex(d):-1,x:d.x,y:d.y,points:d.getPoints(),color:d.color,thickness:d.thickness,move:d.move,allowToggle:d.allowToggle,controlsVisible:G};return pe?JSON.stringify(Je):Je},d.setData=function(pe,Je){if(!n(pe)){if(Je)try{pe=JSON.parse(pe)}catch (e6){return}var be=pe.index;n(be)&&(be=-1),delete pe.index;var Ee=pe.points;n(Ee)||d.setPoints(Ee),delete pe.points,d.num=Ee.length;for(var _e in pe)d[_e]=pe[_e];return d.parent&&d.parent.setChildIndex(d,be),d.update(),d}},d.getPoints=function(pe){n(pe)&&(pe=!1);var Je=d.points;if(pe){if(!d.pane){var be=d.pane=new t.Pane({container:d.stage,width:Math.min(500,d.stage.width-20),height:Math.min(500,d.stage.height-20),draggable:!0}),Ee=d.textArea=new t.TextArea(Math.min(400,d.stage.width-70),Math.min(400,d.stage.height-70));Ee.centerReg(be)}d.textArea.text=JSON.stringify(Je),d.pane.show()}return Je},d.recordPoints=d.getPoints,d.setPoints=function(pe){for(var Je,be,Ee=0;Ee<pe.length;Ee++)Je=S[Ee],be=pe[Ee],!n(Je)&&(Je[0].x=be[0],Je[0].y=be[1],Je[1].x=be[2],Je[1].y=be[3],Je[2].x=be[4],Je[2].y=be[5],Je[3].x=be[6],Je[3].y=be[7],Je[4]=be[8]);return d.update(),d},D!==!1&&t.styleTransforms(d,b),d.clone=function(pe,Je){var be=[],Ee=!1;t.loop(d.pointControls,function(Ge){Ge.scaleX+Ge.scaleY+Ge.regX+Ge.regY+Ge.rotation!=2&&(Ee=!0),be.push([Ge.scaleX,Ge.scaleY,Ge.regX,Ge.regY,Ge.rotation])});var _e=d.cloneProps(new t.Squiggle(Je?d.colorCommand:pe||!t.isPick(L[0])?d.color:L[0],d.thickness,d.getPoints(),l,a,s,f,z.visible,v,C,d.allowToggle,d.move,k,y,d.circleColor,d.circleBorderColor,d.stickColor,d.stickThickness,A,p,d.editPoints,B,F,D,d.group,Y));return Ee&&(t.loop(_e.pointControls,function(Ge,Ue){Ge.scaleX=be[Ue][0],Ge.scaleY=be[Ue][1],Ge.regX=be[Ue][2],Ge.regY=be[Ue][3],Ge.rotation=be[Ue][4]}),_e.update()),d.linearGradientParams&&_e.linearGradient.apply(_e,d.linearGradientParams),d.radialGradientParams&&_e.radialGradient.apply(_e,d.radialGradientParams),_e},d.shape.on("mousedown",function(pe){o=pe.target.stage,d.editPoints&&(d.controlsVisible?(d.pressX=pe.stageX/t.scaX,d.pressY=pe.stageY/t.scaX):(d.pressX=null,d.pressY=null))}),d.addPointFactor=10,d.addMinDistance=15,d.shape.on("pressup",function(pe){if(d.editPoints&&d.pressX&&Math.abs(d.pressX-pe.stageX/t.scaX)<ie&&Math.abs(d.pressY-pe.stageY/t.scaY)<ie){d.selectPoints&&(d.lastPoints=t.copy(d.points));var Je=d.points,be=d.globalToLocal(pe.stageX/t.scaX,pe.stageY/t.scaY),Ee=t.closestPointAlongCurve(be,d.segmentPoints);if(d.editPoints=="anywhere")Je.splice(Ee+1,0,[be.x,be.y,0,0,0,0,0,0]),d.points=Je,d.changeControl({index:Ee+1,type:"mirror",update:!0});else{var _e=d.pointsAdjusted,Ge=d.getSegmentPoint(_e[Ee],_e[(Ee+1)%_e.length]),Ue=t.distanceAlongCurve(Ge),tt=Math.round(Ue/d.addPointFactor),Ae=d.interpolate(tt,Ee,!1,Je),Ze=1e4,lt;if(t.loop(Ae,function(ut,$e){var Pt=t.dist(ut,be);Pt<Ze&&(Ze=Pt,lt=$e)}),Ze<d.addMinDistance){var Ve=d.segmentRatios,ft=Ve[Ee],ot=Ee>0?Ve[Ee-1]:0;d.addPoint(100*(ot+(ft-ot)*(lt/(tt+1))))}}d.lastSelectedIndex=Ee+1,d.lastSelected=d.controls.getChildAt(d.lastSelectedIndex),d.stage.update()}}),d.controls.on("click",function(pe){d.lastSelected=pe.target.parent,d.lastSelectedIndex=d.controls.getChildIndex(pe.target.parent),d.editPoints&&d.selectionManager.shiftKey&&nt(pe)});function nt(pe){if(pe.target.type=="Circle"){var Je=d.lastSelectedIndex=d.controls.getChildIndex(pe.target.parent);if(d.controls.numChildren<=2)return;var be=d.points;d.selectPoints&&(d.lastPoints=t.copy(be)),be.splice(Je,1),d.points=be,d.stage.update(),d.lastSelected=d.lastSelectedIndex=null}}d.controls.hold(nt),G||d.hideControls(),d.dispatchEvent("update")}function Ie(){var ne=[],ve=d.selectionManager.currentSet;if(ve&&ve.selections&&ve.selections.length>0)for(var we=0;we<ve.selections.length;we++){var ee=d.pointObjects[ve.selections[we]];if(ve==d.selectedBalls)ne.push(ee[1]);else if(ve==d.selectedRect1s)ne.push(ee[2]);else if(ve==d.selectedRect2s)ne.push(ee[3]);else continue}return ne}function K(ne){if(ne.type=="Circle"){var ve=ne,we=ve.mySet,ee=ve.rect1,le=ve.rect2;ee.x-=ve.x,ee.y-=ve.y,le.x-=ve.x,le.y-=ve.y,we.x+=ve.x,we.y+=ve.y,ve.x=0,ve.y=0}}d.selectionManager.on("keydown",function(ne){if(d.selectPoints&&d.keyFocus&&ne.keyCode>=37&&ne.keyCode<=40){var ve=Ie();if(ve.length>0){for(var we=0;we<ve.length;we++){var ee=ve[we];ne.keyCode==37?ee.x-=d.selectionManager.shiftKey?10:1:ne.keyCode==39?ee.x+=d.selectionManager.shiftKey?10:1:ne.keyCode==38?ee.y-=d.selectionManager.shiftKey?10:1:ne.keyCode==40&&(ee.y+=d.selectionManager.shiftKey?10:1),q(ee)}d.drawShape(),d.dispatchEvent("update"),d.stage&&d.stage.update()}}}),d.selectionManager.on("keyup",function(ne){if(d.selectPoints&&d.keyFocus&&ne.keyCode>=37&&ne.keyCode<=40){var ve=Ie();if(ve.length>0)for(var we=0;we<ve.length;we++)K(ve[we])}}),d.selectionManager.on("undo",function(){if(d.selectPoints&&d.keyFocus&&d.lastPoints){var ne=t.copy(d.lastPoints);d.lastPoints=t.copy(d.points),d.points=ne,d.stage&&d.stage.update()}}),q=function(ne){if(!d.lockControls){var ve;if(ne.rect1){ve=ne;var we=ve.x-ve.startX,ee=ve.y-ve.startY;ve.rect1.x=ve.rect1.startX+we,ve.rect1.y=ve.rect1.startY+ee,ve.rect2.x=ve.rect2.startX+we,ve.rect2.y=ve.rect2.startY+ee}else{var le=ne,ye=le.other;ve=le.ball;var oe=ve.index,Me=s;if(n(S[oe][4])||(Me=S[oe][4]),Me=="straight"||Me=="mirror"){var ae=le.x-ve.x,Se=le.y-ve.y;if(Me=="mirror")ye.x=ve.x-ae,ye.y=ve.y-Se;else{var Le=Math.atan2(Se,ae),Ce=-ye.stickLength*Math.cos(Le+Math.PI),te=-ye.stickLength*Math.sin(Le+Math.PI);ye.x=ve.x-Ce,ye.y=ve.y-te}}}}},Object.defineProperty(d,"move",{get:function(){return g},set:function(ne){g!=ne&&(g=ne,ne?xe():J())}}),Object.defineProperty(d,"interactive",{get:function(){return B},set:function(ne){B=ne,G=B,d.allowToggle=B,d.editPoints=B,d.lockControls=!B,d.selectPoints=B,d.move=B;var ve=d.points;d.points=ve}}),Object.defineProperty(d,"allowToggle",{get:function(){return h},set:function(ne){h!=ne&&(h=ne,h?d.move&&xe():!G&&d.move&&J())}});function xe(){d.move!="always"&&(se||(se=!0,O.drag({onTop:!1}),de=O.on("mousedown",de),R=O.on("pressmove",R),N=O.on("pressup",N)))}function J(ne){d.move!="always"&&(!ne&&!se||(se=!1,O.noDrag(),O.off("mousedown",de),O.off("pressmove",R),O.off("pressup",N)))}var fe=v;Object.defineProperty(d,"lockControls",{get:function(){return fe},set:function(ne){fe=ne,ne?(d.controls.mouseChildren=!1,d.controls.mouseEnabled=!1):(d.controls.mouseChildren=!0,d.controls.mouseEnabled=!0)}}),d.lockControls=fe,Object.defineProperty(d,"controlsVisible",{get:function(){return G},set:function(ne){G=ne,ne?d.showControls():d.hideControls()}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==d},set:function(){t.KEYFOCUS=d}}),t.KEYFOCUS||U();function U(){if(d.selectPoints){d.keyFocus=!0;var ne=document.activeElement;ne&&ne.blur()}}Object.defineProperty(d,"points",{get:function(){for(var ne=[],ve,we,ee=0;ee<S.length;ee++)we=S[ee],ve=[t.decimals(we[0].x),t.decimals(we[0].y),t.decimals(we[1].x),t.decimals(we[1].y),t.decimals(we[2].x),t.decimals(we[2].y),t.decimals(we[3].x),t.decimals(we[3].y)],we[4]&&we[4]!=="mirror"&&ve.push(we[4]),ne.push(ve);return ne},set:function(ne){var ve=d.x,we=d.y,ee=d.visible,le=[],ye=!1;t.loop(d.pointControls,function(oe){oe.scaleX+oe.scaleY+oe.regX+oe.regY+oe.rotation!=2&&(ye=!0),le.push([oe.scaleX,oe.scaleY,oe.regX,oe.regY,oe.rotation])}),d.dispose(!0),i=ne,ce(),d.lockControls=fe,d.x=ve,d.y=we,d.visible=ee,ye&&(t.loop(d.pointControls,function(oe,Me){oe.scaleX=le[Me][0],oe.scaleY=le[Me][1],oe.regX=le[Me][2],oe.regY=le[Me][3],oe.rotation=le[Me][4]}),d.update())}}),Object.defineProperty(d,"pointsAdjusted",{get:function(){var ne=[],ve,we,ee,le=d.pointObjects;return t.loop(le.length,function(ye){if(ee=le[ye],we=S[ye],ee[0].rotation==0&&ee[0].scaleX==0&&ee[0].scaleY==0)ve=[t.decimals(we[0].x),t.decimals(we[0].y),t.decimals(we[1].x),t.decimals(we[1].y),t.decimals(we[2].x),t.decimals(we[2].y),t.decimals(we[3].x),t.decimals(we[3].y)];else{var oe=ee[0].localToLocal(ee[2].x,ee[2].y,ee[0].parent),Me=ee[0].localToLocal(ee[3].x,ee[3].y,ee[0].parent);ve=[t.decimals(we[0].x),t.decimals(we[0].y),t.decimals(we[1].x),t.decimals(we[1].y),t.decimals(oe.x-we[0].x),t.decimals(oe.y-we[0].y),t.decimals(Me.x-we[0].x),t.decimals(Me.y-we[0].y)]}we[4]&&we[4]!=="mirror"&&ve.push(we[4]),ne.push(ve)}),ne},set:function(){ht&&je("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(d,"pointObjects",{get:function(){return S},set:function(){ht&&je("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(d,"pointControls",{get:function(){return m},set:function(){ht&&je("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"pointCircles",{get:function(){return X},set:function(){ht&&je("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(d,"segmentPoints",{get:function(){var ne=[],ve=d.pointsAdjusted;return t.loop(ve.length-1,function(we){var ee=d.getSegmentPoint(ve[we],ve[we+1]);ne.push(ee)}),ne},set:function(){ht&&je("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(d,"segmentRatios",{get:function(){var ne=[],ve=0;t.loop(d.segmentPoints,function(le){var ye=t.distanceAlongCurve(le);ne.push(ye),ve+=ye});var we=[],ee=0;return t.loop(ne,function(le){var ye=le/ve;ee+=ye,we.push(ee)}),we},set:function(){ht&&je("Squiggle() - segmentRatios is read only")}}),d.approximateBounds=function(ne,ve,we){n(ne)&&(ne=80),n(we)&&(we=0),ne/=d.num;var ee=d.interpolate(ne,null,!0,null,!0),le=t.boundsAroundPoints(ee);if(d.setBounds(le.x-we,le.y-we,le.width+we*2,le.height+we*2),ve){if(!d.parent)return ht&&je("approximateBounds() - add to stage to first to see points"),d;d.hitPathPoints?d.hitPathPoints.removeAllChildren():d.hitPathPoints=new t.Container().addTo(),d.hitPathPoints.top();for(var ye=0;ye<ee.length;ye++){var oe=ee[ye];oe=d.localToGlobal(oe.x,oe.y),new t.Circle(3).loc(oe.x,oe.y,d.hitPathPoints)}}return d},d.getPointAngle=function(ne){var ve=d.pointObjects[ne][0],we=d.pointObjects[ne][2],ee=d.pointObjects[ne][3],le,ye;return ve==d.stage?(le=new t.Point(we.x,we.y),ye=new t.Point(ee.x,ee.y)):(le=ve.localToGlobal(we.x,we.y),ye=ve.localToGlobal(ee.x,ee.y)),t.angle(le.x,le.y,ye.x,ye.y)},d.getSegmentPoint=function(ne,ve){if(!(n(ne)||n(ve))){(ne[2]!=0||ne[3]!=0)&&(ne[4]-=ne[2],ne[5]-=ne[3],ne[6]-=ne[2],ne[7]-=ne[3],ne[0]+=ne[2],ne[1]+=ne[3],ne[2]=0,ne[3]=0),(ve[2]!=0||ve[3]!=0)&&(ve[4]-=ve[2],ve[5]-=ve[3],ve[6]-=ve[2],ve[7]-=ve[3],ve[0]+=ve[2],ve[1]+=ve[3],ve[2]=0,ve[3]=0);var we={x:ne[0],y:ne[1]},ee={x:ne[0]+ne[6],y:ne[1]+ne[7]},le={x:ve[0]+ve[4],y:ve[1]+ve[5]},ye={x:ve[0],y:ve[1]};return(z.x!=0||z.y!=0)&&(we.x+=z.x,ee.x+=z.x,le.x+=z.x,ye.x+=z.x,we.y+=z.y,ee.y+=z.y,le.y+=z.y,ye.y+=z.y),[we,ee,le,ye]}},d.getAdjacentSegmentData=function(ne){n(ne)&&(ne=0);var ve=d.pointsAdjusted;return d.num==2?[[d.getSegmentPoint(ve[0],ve[1])],[0]]:ne==0?[[d.getSegmentPoint(ve[0],ve[1]),d.getSegmentPoint(ve[1],ve[2])],[0,1]]:ne>=d.num-2?[[d.getSegmentPoint(ve[d.num-3],ve[d.num-2]),d.getSegmentPoint(ve[d.num-2],ve[d.num-1])],[d.num-3,d.num-2]]:[[d.getSegmentPoint(ve[ne-1],ve[ne]),d.getSegmentPoint(ve[ne],ve[ne+1]),d.getSegmentPoint(ve[ne+1],ve[ne+2])],[ne-1,ne,ne+1]]},d.getCurvePoint=function(ne,ve,we,ee,le){(n(ne)||isNaN(ne))&&(ne=0),n(ve)&&(ve=d.segmentRatios),n(we)&&(we=d.segmentPoints),n(ee)&&(ee=!1),n(le)&&(le=!1);var ye=ve,oe=we,Me=t.loop(ye,function(Oe,Re){if(Oe>=ne)return Re}),ae=Me>0?ye[Me-1]:0,Se=Me>0?ye[Me]-ye[Me-1]:ye[Me];if(Se){var Le=(ne-ae)/Se,Ce=t.pointAlongCurve(oe[Me],Le,ee,!0),te=d.localToGlobal(Ce.x,Ce.y);return te.angle=Ce.angle,te.z=Me,n(te)?void 0:te}};function ue(ne,ve,we){return{x:ne.x+(ve.x-ne.x)*we,y:ne.y+(ve.y-ne.y)*we}}function ke(ne,ve,we,ee,le,ye,oe,Me){var ae=ne.length-1,Se=0,Le=0;ee==100&&d.type=="Squiggle"&&(ee=99.99),ee=(ee+1e5)%100,t.loop(we,function(me,Te){if(ee/100<me)return ae=Te,Le=me,!0;Se=me});var Ce=d.segmentPoints[ae],te=Le>0?(ee/100-Se)/(Le-Se):0,Oe=t.pointAlongCurve(Ce,te,null,Me),Re=[Oe.x,Oe.y,0,0];if(!ye){if(oe){d.interpolatedPoints.push({x:Oe.x,y:Oe.y,r:ee/100});return}if(le!="none"){var Xe=ue(Ce[0],Ce[1],te),Qe=ue(Ce[1],Ce[2],te),it=ue(Ce[2],Ce[3],te),Be=ue(Xe,Qe,te),Ke=ue(Qe,it,te);Re[4]=Be.x-Oe.x,Re[5]=Be.y-Oe.y,Re[6]=Ke.x-Oe.x,Re[7]=Ke.y-Oe.y;var He=d.localToLocal(Xe.x,Xe.y,ve[ae]);ne[ae][6]=He.x,ne[ae][7]=He.y;var he=d.localToLocal(it.x,it.y,ve[(ae+1)%ne.length]);ne[(ae+1)%ne.length][4]=he.x,ne[(ae+1)%ne.length][5]=he.y}le&&(Re[8]=le),ne.splice(ae+1,0,Re)}}this.addPoint=function(ne,ve){n(ne)&&(ne=100);var we=d.points,ee=d.segmentRatios,le=d.pointControls;return ve=ve||re,ke(we,le,ee,ne,ve),d.points=we,d.num=we.length,d},this.removePoint=function(ne){if(!(n(ne)||ne<0)){var ve=t.copy(d.points);return ve.splice(ne,1),d.points=ve,d.stage&&d.stage.update(),d}},this.addPoints=function(ne,ve,we,ee,le,ye,oe){n(ye)&&(ye=t.copy(d.points));var Me=t.copy(d.segmentRatios),ae=0;if(le&&(d.interpolatedPoints=[]),ee)var Se=Me.length*ne;return t.loop(Me,function(Le,Ce){le&&ke(ye,d.pointControls,d.segmentRatios,ae*100,ve,!n(we)&&Ce!=we,le,oe);var te=ee?Math.round(Se*(Le-ae)):ne,Oe=1/(te+1);t.loop(te,function(Re){var Xe=ae+(Le-ae)*Oe*(Re+1);ke(ye,d.pointControls,d.segmentRatios,Xe*100,ve,!n(we)&&Ce!=we,le,oe),!le&&ne>0&&(d.points=ye)}),ae=Le}),le&&d.type=="Squiggle"&&ke(ye,d.pointControls,d.segmentRatios,100,ve,!1,le,oe),d.stage&&d.stage.update(),d.num=ye.length,d},this.interpolate=function(ne,ve,we,ee,le){return n(ne)&&(ne=1),d.addPoints(ne,"none",ve,we,!0,ee,le),d.interpolatedPoints},$&&d.approximateBounds(),this.dispose=function(ne,ve,we){if(d.shape){if(t.gD(d),o&&d.toggleStageEvent&&o.off("stagemousedown",d.toggleStageEvent),d.controls.noDrag(),d.controls.removeAllEventListeners(),d.selectPoints&&d.selectionManager&&d.selectionManager.dispose(),d.selectedBalls=null,d.selectedRect1s=null,d.selectedRect2s=null,d.selectionManager=null,d.off("mousedown",d.toggleEvent),d.off("click",d.clickEvent),ne){d.shape.dispose(),d.shape=null;for(var ee=0;ee<d.points.length;ee++)d.pointObjects[ee][0].removeAllEventListeners(),d.pointObjects[ee][1].removeAllEventListeners(),d.pointObjects[ee][2].removeAllEventListeners(),d.pointObjects[ee][3].removeAllEventListeners();d.controls.removeFrom(d),d.sticks.dispose(),S=null,X=null}else d.removeAllEventListeners(),S=null,X=null,we||this.zimCustomShape_dispose(!0);return!0}}},t.extend(t.Squiggle,t.CustomShape,["clone","dispose"],"zimCustomShape",!1),t.Blob=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_){var V="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",b;if(b=at(t.Blob,arguments,V,this))return b;De("53.5"),this.group=Y;var Z=P===!1?{}:t.getStyle("Blob",this.group,_);n(a)&&(a=Z.radius!=null?Z.radius:100),this.zimCustomShape_constructor(-a,-a,a*2,a*2,!1),this.type="Blob",this.mouseChildren=!0,n(y)&&(y=Z.dashed!=null?Z.dashed:!1),n(r)&&(r=Z.borderColor!=null?Z.borderColor:null),n(i)&&(i=Z.borderWidth!=null?Z.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(e)&&(e=Z.color!=null?Z.color:i>0?"rgba(0,0,0,0)":t.green),e.style&&(this.colorCommand=e,e=t.black),r&&r.style&&(this.borderColorCommand=r,r=t.black),n(l)&&(l=Z.points!=null?Z.points:4);var $=typeof l!="number",Q=typeof l=="number"?l:l.length,re=s;n(s)&&(s=Z.controlLength!=null?Z.controlLength:a*4/Q),n(f)&&(f=Z.controlType!=null?Z.controlType:null);var G=f;n(f)&&(f="straight"),n(u)&&(u=Z.lockControlType!=null?Z.lockControlType:!1),n(F)&&(F=Z.interactive!=null?Z.interactive:!0),n(v)&&(v=Z.showControls!=null?Z.showControls:F);var L=v;n(C)&&(C=Z.lockControls!=null?Z.lockControls:!F),n(h)&&(h=Z.handleSize!=null?Z.handleSize:t.mobile()?20:10),n(g)&&(g=Z.allowToggle!=null?Z.allowToggle:F),n(k)&&(k=Z.move!=null?Z.move:F),n(I)&&(I=Z.circleColor!=null?Z.circleColor:t.light),n(w)&&(w=Z.circleBorderColor!=null?Z.circleBorderColor:t.dark),n(E)&&(E=Z.stickColor!=null?Z.stickColor:t.darker),n(A)&&(A=Z.stickThickness!=null?Z.stickThickness:1),n(p)&&(p=Z.selectColor!=null?Z.selectColor:t.white),n(T)&&(T=Z.selectPoints!=null?Z.selectPoints:F),this.circleColor=I,this.circleBorderColor=w,this.stickColor=E,this.stickThickness=A,n(x)&&(x=Z.onTop!=null?Z.onTop:!0),n(B)&&(B=Z.editPoints!=null?Z.editPoints:F),n(D)&&(D=Z.strokeObj!=null?Z.strokeObj:{});var c=d(e,r);this.veeObj={color:c[0],borderColor:c[1]};function d(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r);var o=this;this.interactive=F,this.num=Q,this.editPoints=B,this.selectPoints=T,this.lockControls=C,this.onTop=x,this.move=k,this.allowToggle=g,this.lockControlType=u,this.types=["mirror","straight","free","none"];var S,X,m;o._color=e,o._borderColor=r,o._borderWidth=i,o._dashed=y,o._dashed&&!Array.isArray(o._dashed)&&(o._dashed=[10,10]);var O,de,R,N,se,ie=o.move,q=2,z,ce;l=Ie(l);function Ie(ee){(ee=="circle"||ee=="rectangle"||ee=="triangle")&&(ee=="circle"&&(ee=new t.Circle(a)),ee=="rectangle"&&(ee=new t.Rectangle(a*2,a*2).centerReg({add:!1})),ee=="triangle"&&(ee=new t.Triangle(a*2,a*2,a*2)));var le;if(ee.type=="Circle"||ee.type=="Rectangle"||ee.type=="Triangle"||ee.type=="Flare"){var ye=ee.getBounds();if(ee.type=="Circle")le=4,re=s=a*2*.5523;else if(ee.type=="Rectangle")ee.centerReg({add:!1}),le=[[ye.x-ye.width/2,ye.y-ye.height/2],[ye.x+ye.width/2,ye.y-ye.height/2],[ye.x+ye.width/2,ye.y+ye.height/2],[ye.x-ye.width/2,ye.y+ye.height/2]],o.setBounds(ye.x-ye.width/2,ye.y-ye.height/2,ye.width,ye.height),o.regX=ee.regX-ye.width/2,o.regY=ee.regY-ye.height/2;else if(ee.type=="Triangle")le=[[ee.three.x-ee.width/2,ee.three.y+ee.height/2+ee.adjusted],[ee.two.x-ee.width/2,ee.two.y+ee.height/2+ee.adjusted],[ee.one.x-ee.width/2,ee.one.y+ee.height/2+ee.adjusted]],o.setBounds(ye.x-ye.width/2,ye.y-ye.height/2,ye.width,ye.height);else if(ee.type=="Flare"){var oe=ye.width/2+ye.x,Me=ye.height/2+ye.y;le=[];var ae=t.copy(ee.points),Se={x:null,y:null};t.loop(ae,(Le,Ce)=>{var te=Math.round(Le.x),Oe=Math.round(Le.y);te==Se.x&&Oe==Se.y||(Se={x:te,y:Oe},le.push([te-oe,Le.y-Me]))}),o.setBounds(-ee.width/2,-ee.height/2,ee.width,ee.height)}return le}else return ee}if(typeof l=="string"){var K=new t.SVGContainer;l=K.processPath(l),l[0][0]==l[l.length-1][0]&&l[0][1]==l[l.length-1][1]&&(l[0][4]=l[l.length-1][4],l[0][5]=l[l.length-1][5],l.pop())}G&&typeof l!="number"&&t.loop(l,function(ee){ee[8]=G,G=="none"&&(ee[4]=ee[5]=ee[6]=ee[7]=0)}),xe();function xe(){if(ce&&ce.removeAllEventListeners(),o.selectPoints?(o.selectedBalls=new t.SelectionSet,o.selectedRect1s=new t.SelectionSet,o.selectedRect2s=new t.SelectionSet,o.selectionManager=new t.SelectionManager([o.selectedBalls,o.selectedRect1s,o.selectedRect2s],"ctrl",!1)):o.selectionManager=new t.SelectionManager(null,"ctrl"),Q=typeof l=="number"?l:l.length,Q<=0)return;n(re)&&(s=a*4/Q),O=o.shape=new t.Shape({style:!1}).addTo(o);var ee=o.sticks=new t.Shape({style:!1}).addTo(o);h<=0&&ee.removeFrom();var le=O.graphics;le.c();var ye=ee.graphics;ye.c();var oe=h/10*8,Me=h,ae=t.mobile();ce=o.controls=new t.Container({style:!1}).addTo(o),o.interactive&&ce.drag({onTop:!ae}),S=[],m=[],X=[];var Se,Le,Ce,te,Oe,Re,Xe,Qe,it;for(Se=0;Se<Q;Se++){if(te=new t.Container({style:!1}).addTo(ce),te.num=Se,typeof l=="number"){var Be=t.Pick.choose(s);Ce=new t.Container(Be,a,null,null,!1).reg(Be/2,a).addTo(o),Ce.rotation=Se/Q*360,Xe=new t.Circle(oe,o.selectPoints&&o.selectedBalls.isSelected(Se)?p:o.circleColor,o.circleBorderColor,2,null,null,null,null,!1).centerReg(Ce).loc({x:Be/2,y:0}),Oe=new t.Rectangle(Me,Me,o.selectPoints&&o.selectedRect1s.isSelected(Se)?p:st(f),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg(Ce).loc({x:0,y:0}),Re=new t.Rectangle(Me,Me,o.selectPoints&&o.selectedRect2s.isSelected(Se)?p:st(f),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg(Ce).loc({x:Be,y:0});var Ke=Ce.localToLocal(Xe.x,Xe.y,ce);Xe.x=Ke.x,Xe.y=Ke.y,Xe.addTo(te,null,!1);var He=Ce.localToLocal(Oe.x,Oe.y,ce);Oe.x=f=="none"?0:He.x-Xe.x,Oe.y=f=="none"?0:He.y-Xe.y,Oe.addTo(te,null,!1);var he=Ce.localToLocal(Re.x,Re.y,ce);Re.x=f=="none"?0:he.x-Xe.x,Re.y=f=="none"?0:he.y-Xe.y,Re.addTo(te,null,!1),te.x=Xe.x,te.y=Xe.y,Xe.x=0,Xe.y=0,f=="none"&&Xe.addTo(te,null,!1)}else it=l[Se],Qe=it[8]?it[8]:f,te.loc({x:it[0],y:it[1]}),Xe=new t.Circle(oe,o.circleColor,o.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(te).loc({x:it[2],y:it[3]}),Oe=new t.Rectangle(Me,Me,st(Qe),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(te,0).loc({x:it[4],y:it[5]}),Re=new t.Rectangle(Me,Me,st(Qe),h==0?null:t.dark,h==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(te,0).loc({x:it[6],y:it[7]});Xe.mySet=te,Xe.rect1=Oe,Xe.rect2=Re,Xe.index=Se,h==0&&(Xe.expand(10),Oe.expand(10),Re.expand(10)),ae?Xe.on("mousedown",Te):Xe.on("dblclick",ze),Oe.ball=Xe,Oe.other=Re,Re.ball=Xe,Re.other=Oe,ae&&(Xe.expand(),Oe.expand(),Re.expand()),Le=[te,Xe,Oe,Re,it?it[8]:f],S.push(Le),X.push(Xe),m.push(te)}var me=!1;function Te(be){me?(be.preventDefault(),ze(be)):(me=!0,setTimeout(function(){me=!1},300))}function ze(be){if(!o.lockControlType){var Ee=be.target,_e=S[Ee.index][4]?S[Ee.index][4]:f;Math.abs(Ee.rect1.x)<=2&&Math.abs(Ee.rect1.y)<=2&&Math.abs(Ee.rect2.x)<=2&&Math.abs(Ee.rect2.y)<=2&&(_e="none"),_e=="none"&&Ee.parent.addChildAt(Ee,0),_e=o.types[(o.types.indexOf(_e)+(o.shiftKey?-1:1)+o.types.length)%o.types.length],_e=="none"&&(Ee.rect1.x=Ee.rect1.y=Ee.rect2.x=Ee.rect2.y=0,Ee.parent.addChild(Ee),be.stopImmediatePropagation()),S[Ee.index][4]=_e,Ee.rect1.color=st(_e),Ee.rect2.color=st(_e),o.drawShape();var Ge=new Fe.Event("change");Ge.controlType="bezierSwitch",o.dispatchEvent(Ge),Ee.stage.update()}}function st(be){var Ee={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return Ee[be]?Ee[be]:"#e472c4"}o.drawShape=function(){var be,Ee,_e,Ge,Ue,tt,Ae,Ze,lt,Ve,ft,ot,ut;le.c(),o.colorCommand||(o.colorCommand=le.f(o._color).command,e&&e.type&&o.specialColor(o.colorCommand,e,o)),(n(o._borderWidth)||o._borderWidth>0)&&(!n(o._borderColor)||!n(o._borderWidth))&&(n(o._borderColor)&&(o._borderColor=t.black),o.borderColorCommand||(o.borderColorCommand=le.s(o._borderColor).command,o._borderColor&&o._borderColor.type&&o.specialColor(o.borderColorCommand,o._borderColor,o)),o.borderWidthCommand||(o.borderWidthCommand=le.ss(o._borderWidth,D.caps,D.joints,D.miterLimit,D.ignoreScale).command),o._dashed&&(o.borderDashedCommand||(o.borderDashedCommand=le.sd(Array.isArray(o._dashed)?o._dashed:[10,10],o._dashedOffset).command))),_e=S[0][0],Ae=_e.localToLocal(S[0][1].x,S[0][1].y,O),le.mt(Ae.x,Ae.y),ye.c().s(o.stickColor).ss(o.stickThickness);for(var $e=0;$e<S.length;$e++)be=$e,Ee=($e+1)%S.length,_e=S[be][0],Xe=S[be][1],Ge=S[be][2],Ue=S[be][3],tt=S[Ee][0],Ze=S[Ee][1],lt=S[Ee][2],ft=_e.localToLocal(Ue.x,Ue.y,O),ot=tt.localToLocal(lt.x,lt.y,O),ut=tt.localToLocal(Ze.x,Ze.y,O),le.bt(ft.x,ft.y,ot.x,ot.y,ut.x,ut.y),Ae=_e.localToLocal(Xe.x,Xe.y,O),Ve=_e.localToLocal(Ge.x,Ge.y,O),ye.mt(Ae.x,Ae.y).lt(Ve.x,Ve.y),ye.mt(Ae.x,Ae.y).lt(ft.x,ft.y);le.cp(),le.append(o.colorCommand),o._dashed&&le.append(o.borderDashedCommand),o.borderWidthCommand&&le.append(o.borderWidthCommand),o.borderColorCommand&&le.append(o.borderColorCommand)},o.drawShape(),e.type&&(o.color=e);var Ye;ce.on("mousedown",function(be){if(!o.lockControls){o.selectPoints&&(o.keyFocus=!0),Ye={x:be.target.x,y:be.target.y};var Ee;if(be.target.rect1)Ee=be.target,Ee.startX=Ee.x,Ee.startY=Ee.y,Ee.rect1.startX=Ee.rect1.x,Ee.rect1.startY=Ee.rect1.y,Ee.rect2.startX=Ee.rect2.x,Ee.rect2.startY=Ee.rect2.y;else{var _e=be.target;_e.startX=_e.x,_e.startY=_e.y,Ee=_e.ball;var Ge=Ee.index,Ue=f;if(n(S[Ge][4])||(Ue=S[Ge][4]),Ue=="straight"){var tt=_e.other,Ae=tt.x-Ee.x,Ze=tt.y-Ee.y;tt.stickLength=Math.sqrt(Math.pow(Ae,2)+Math.pow(Ze,2))}}if(o.selectPoints){var lt=o.selectionManager.currentSet;if(lt&&lt.selections&&lt.selections.length>0)for(var Ve=0;Ve<lt.selections.length;Ve++){var ft=o.pointObjects[lt.selections[Ve]];ft[1].startX=ft[1].x,ft[1].startY=ft[1].y,ft[2].startX=ft[2].x,ft[2].startY=ft[2].y,ft[3].startX=ft[3].x,ft[3].startY=ft[3].y}}}}),o.selectPoints&&ce.tap(function(be){var Ee;if(be.target.rect1)Ee=be.target,o.selectedBalls.toggle(Ee.parent.num);else{var _e=be.target;_e.color="white",Ee=_e.ball,Ee.rect1==_e?o.selectedRect1s.toggle(Ee.parent.num):o.selectedRect2s.toggle(Ee.parent.num)}for(var Ge=0;Ge<o.pointObjects.length;Ge++){var Ue=o.pointObjects[Ge];Ue[1].color=o.selectedBalls.isSelected(Ge)?p:o.circleColor,Ue[2].color=o.selectedRect1s.isSelected(Ge)?p:st(Ue[4]),Ue[3].color=o.selectedRect2s.isSelected(Ge)?p:st(Ue[4])}be.target.stage.update()}),ce.on("pressmove",function(be){if(!o.lockControls)if(o.selectPoints){var Ee=J();if(Ee.indexOf(be.target)==-1)z(be.target),o.drawShape();else if(Ee.length>0){for(var _e=be.target.x-be.target.startX,Ge=be.target.y-be.target.startY,Ue=0;Ue<Ee.length;Ue++){var tt=Ee[Ue];tt.x=tt.startX+_e,tt.y=tt.startY+Ge,z(tt)}o.drawShape()}}else z(be.target),o.drawShape()}),ce.on("pressup",function(be){if(!o.lockControls){var Ee=be.target.x!=Ye.x||be.target.y!=Ye.y,_e=new Fe.Event("change");be.target.rect1?(_e.controlType="bezierPoint",nt(be.target)):_e.controlType="bezierHandle",Ee&&o.dispatchEvent(_e)}});function nt(be){if(o.selectPoints){var Ee=J();if(Ee&&Ee.indexOf(be)==-1)fe(be);else if(Ee&&Ee.length>0)for(var _e=0;_e<Ee.length;_e++)fe(Ee[_e]);else fe(be)}else fe(be)}o.changeControl=function(be,Ee,_e,Ge,Ue,tt,Ae,Ze,lt){var Ve="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",ft;if(ft=at(o.changeControl,arguments,Ve))return ft;if(n(be)){for(var ot=0;ot<S.length;ot++)o.changeControl(ot,Ee,_e,Ge,Ue,tt,Ae,Ze);return o}var ut=S[be];return ut[4]=Ee,Ee=="none"?(n(Ae)||(ut[1].x=Ae),n(Ze)||(ut[1].y=Ze),ut[2].x=ut[1].x,ut[2].y=ut[1].y,ut[3].x=ut[1].x,ut[3].y=ut[1].y,ut[1].parent.addChild(ut[1])):(n(Ae)||(ut[1].x=Ae),n(Ze)||(ut[1].y=Ze),n(_e)||(ut[2].x=_e),n(Ge)||(ut[2].y=Ge),n(Ue)||(ut[3].x=Ue),n(tt)||(ut[3].y=tt),ut[1].parent.addChildAt(ut[1],0)),ut[2].color=st(Ee),ut[3].color=st(Ee),lt&&(o.update(),o.stage&&o.stage.update()),o},o.transformPoints=function(be,Ee,_e,Ge,Ue){return n(Ue)&&(Ue=!0),o.points=t.transformPoints(o.points,be,Ee,_e,Ge),Ue&&o.approximateBounds(),o},o.traverse=function(be,Ee,_e,Ge){var Ue=t.copy(o.segmentRatios);Ue.unshift(0),n(_e)&&(_e=Ee+1);var tt=Ee<_e,Ae,Ze;return tt?(Ae=Ue[Ee]*100,Ze=Ue[_e]*100):(Ae=50+(100-Ue[Ee]*100)/2,Ze=50+(100-Ue[_e]*100)/2),be.percentComplete=Ae,be.animate({ease:"linear",props:{path:o},rewind:!tt,time:Ge,events:!0}),be.on("animation",function(lt){if(be.percentComplete>Ze||be.percentComplete==0){be.stopAnimate(),lt.remove();var Ve=new Fe.Event("traversed");Ve.obj=be,o.dispatchEvent(Ve)}}),o},o.reversePoints=function(be){return n(be)&&(be=!0),l=t.copy(o.points),l.reverse(),be&&l.unshift(l.pop()),t.loop(l,function(Ee){var _e=Ee[6];Ee[6]=Ee[4],Ee[4]=_e;var Ge=Ee[7];Ee[7]=Ee[5],Ee[5]=Ge}),o.points=l,o.update(),o},o.splitPoints=function(be){var Ee=t.copy(o.points);if(!(be<1||be>Ee.length-1)){var _e=t.copy(Ee.slice(0,be+1)),Ge=t.copy(Ee.slice(be));t.trimPointEnds(_e),t.trimPointEnds(Ge);var Ue=o.clone();return o.points=_e,o.update(),Ue.points=Ge,o.parent&&Ue.addTo(o.parent),Ue}},o.makeSquiggle=function(be){var Ee=t.copy(o.points);n(be)&&(be=0),be=(be+Ee.length*1e3)%Ee.length;var _e=t.copy(Ee.slice(be)),Ge=t.copy(Ee.slice(0,be+1));Ee=_e.concat(Ge),t.trimPointEnds(Ee);var Ue=new t.Squiggle({points:Ee,color:o.borderColor,thickness:o.borderWidth,showControls:o.controlsVisible,interactive:o.interactive,onTop:o.onTop,dashed:o.dashed,stickColor:o.stickColor,stickThickness:o.stickThickness});return Ue},o.update=function(be){return be?o.points=o.pointsAdjusted:o.drawShape(),o.zimAnimateChanged=!0,o},o.move&&o.interactive&&O.drag({onTop:!1}),de=O.on("mousedown",function(be){se=be.target.stage,Ye={x:O.x,y:O.y},o.selectPoints&&(o.keyFocus=!0),pe()}),R=O.on("pressmove",function(){ce.x=O.x,ce.y=O.y,ee.x=O.x,ee.y=O.y}),N=O.on("pressup",function(){var be=O.x!=Ye.x||O.y!=Ye.y,Ee=O.localToLocal(o.regX,o.regY,o.parent);if(o.x=Ee.x,o.y=Ee.y,ce.x=ce.y=ee.x=ee.y=O.x=O.y=0,be){var _e=new Fe.Event("change");_e.controlType="move",o.dispatchEvent(_e)}se.update()}),k||ue(!0);function pe(){if(o.onTop){var be=o.parent.numChildren-1;o.parent.getChildAt(be).type=="Keyboard"&&be--,o.parent.setChildIndex(o,be)}}o.toggleEvent=o.on("mousedown",function(){o.allowToggle&&(L||(o.showControls(),o.dispatchEvent("controlsshow")))}),o.added(function(){se=o.stage,o.toggleStageEvent&&o.stage.off("stagemousedown",o.toggleStageEvent),o.toggleStageEvent=o.stage.on("stagemousedown",function(be){!o.allowToggle||!o.stage||L&&!o.hitTestPoint(be.stageX/t.scaX,be.stageY/t.scaY,!1)&&(o.hideControls(),o.dispatchEvent("controlshide"))})}),o.clickEvent=o.on("click",function(){o.ctrlKey&&setTimeout(function(){o.clone(!0).addTo(o.stage).mov(100),o.allowToggle&&(o.hideControls(),o.dispatchEvent("controlshide"));var be=new Fe.Event("change");be.controlType="move",o.dispatchEvent(be),o.stage.update()},50)}),o.hideControls=function(){return o.toggled=!1,ce.visible=!1,ee.visible=!1,L=!1,o.stage&&o.stage.update(),!o.allowToggle&&o.move&&ue(),o},L||o.hideControls(),o.showControls=function(){return o.toggled=!0,ce.visible=!0,ee.visible=!0,L=!0,ce.x=O.x,ce.y=O.y,ee.x=O.x,ee.y=O.y,o.addChildAt(O,0),o.move&&!o.allowToggle&&U(),o.stage&&o.stage.update(),o},o.toggle=function(be){return be===!0?o.showControls():be===!1||L?o.hideControls():o.showControls(),o},o.recordData=function(be){n(be)&&(be=!1);var Ee={type:"Blob",index:o.parent?o.parent.getChildIndex(o):-1,x:o.x,y:o.y,points:o.getPoints(),color:o.color,borderColor:o.borderColor,borderWidth:o.borderWidth,move:o.move,allowToggle:o.allowToggle,controlsVisible:L};return be?JSON.stringify(Ee):Ee},o.setData=function(be,Ee){if(!n(be)){if(Ee)try{be=JSON.parse(be)}catch (e7){return}var _e=be.index;n(_e)&&(_e=-1),delete be.index;var Ge=be.points;n(Ge)||o.setPoints(Ge),delete be.points,this.num=Ge.length;for(var Ue in be)o[Ue]=be[Ue];return o.parent&&o.parent.setChildIndex(o,_e),o}},o.getPoints=function(be){n(be)&&(be=!1);var Ee=o.points;if(be){if(!_e){var _e=o.pane=new t.Pane({displayClose:!1,container:o.stage,width:Math.min(500,o.stage.width-20),height:Math.min(500,o.stage.height-20),draggable:!0}),Ge=o.textArea=new t.TextArea(Math.min(400,o.stage.width-70),Math.min(400,o.stage.height-70));Ge.centerReg(_e)}_e.show(),Ge.text=JSON.stringify(Ee)}return Ee},o.recordPoints=o.getPoints,o.setPoints=function(be){for(var Ee,_e,Ge=0;Ge<be.length;Ge++)Ee=S[Ge],_e=be[Ge],!n(Ee)&&(Ee[0].x=_e[0],Ee[0].y=_e[1],Ee[1].x=_e[2],Ee[1].y=_e[3],Ee[2].x=_e[4],Ee[2].y=_e[5],Ee[3].x=_e[6],Ee[3].y=_e[7],Ee[4]=_e[8],Ee[2].color=st(Ee[4]),Ee[3].color=st(Ee[4]));return o.update(),o},P!==!1&&t.styleTransforms(o,Z),o.clone=function(be,Ee){var _e=[],Ge=!1;t.loop(o.pointControls,function(tt){tt.scaleX+tt.scaleY+tt.regX+tt.regY+tt.rotation!=2&&(Ge=!0),_e.push([tt.scaleX,tt.scaleY,tt.regX,tt.regY,tt.rotation])});var Ue=o.cloneProps(new t.Blob(Ee?o.colorCommand:be||!t.isPick(c[0])?o.color:c[0],Ee?o.borderColorCommand:be||!t.isPick(c[1])?o.borderColor:c[1],o.borderWidth,o.getPoints(),a,s,f,u,ce.visible,C,h,o.allowToggle,o.move,y,x,o.circleColor,o.circleBorderColor,o.stickColor,o.stickThickness,p,T,o.editPoints,F,D,P,o.group,_));return Ge&&(t.loop(Ue.pointControls,function(tt,Ae){tt.scaleX=_e[Ae][0],tt.scaleY=_e[Ae][1],tt.regX=_e[Ae][2],tt.regY=_e[Ae][3],tt.rotation=_e[Ae][4]}),Ue.update()),o.linearGradientParams&&Ue.linearGradient.apply(Ue,o.linearGradientParams),o.radialGradientParams&&Ue.radialGradient.apply(Ue,o.radialGradientParams),Ue},o.shapeMousedownEvent=o.shape.on("mousedown",function(be){se=be.target.stage,o.editPoints&&(o.controlsVisible?(o.pressX=be.stageX/t.scaX,o.pressY=be.stageY/t.scaY):(o.pressX=null,o.pressY=null))}),o.addPointFactor=10,o.addMinDistance=15,o.shapePressupEvent=o.shape.on("pressup",function(be){if(o.editPoints&&o.pressX&&Math.abs(o.pressX-be.stageX/t.scaX)<q&&Math.abs(o.pressY-be.stageY/t.scaY)<q){o.selectPoints&&(o.lastPoints=t.copy(o.points));var Ee=o.points,_e=o.globalToLocal(be.stageX/t.scaX,be.stageY/t.scaY),Ge=t.closestPointAlongCurve(_e,o.segmentPoints);if(o.editPoints=="anywhere")Ee.splice(Ge+1,0,[_e.x,_e.y,0,0,0,0,0,0]),o.points=Ee,o.changeControl({index:Ge+1,type:"mirror",update:!0});else{var Ue=o.pointsAdjusted,tt=o.getSegmentPoint(Ue[Ge],Ue[(Ge+1)%Ue.length]),Ae=t.distanceAlongCurve(tt),Ze=Math.round(Ae/o.addPointFactor),lt=o.interpolate(Ze,Ge,!1,Ee),Ve=1e4,ft;if(t.loop(lt,function(Pt,yt){if(yt!=0){var wt=t.dist(Pt,_e);wt<Ve&&(Ve=wt,ft=yt)}}),Ve<o.addMinDistance){var ot=o.segmentRatios,ut=ot[Ge],$e=Ge>0?ot[Ge-1]:0;o.addPoint(100*($e+(ut-$e)*(ft/(Ze+1))))}}o.lastSelectedIndex=Ge+1,o.lastSelected=o.controls.getChildAt(o.lastSelectedIndex),o.stage.update()}}),o.controlsClickEvent=o.controls.on("click",function(be){o.lastSelected=be.target.parent,o.lastSelectedIndex=o.controls.getChildIndex(be.target.parent),o.editPoints&&o.selectionManager.shiftKey&&Je(be)});function Je(be){if(be.target.type=="Circle"){var Ee=o.lastSelectedIndex=o.controls.getChildIndex(be.target.parent);if(o.controls.numChildren<=2)return;var _e=o.points;o.selectPoints&&(o.lastPoints=t.copy(_e)),_e.splice(Ee,1),o.points=_e,o.stage.update(),o.lastSelected=o.lastSelectedIndex=null}}o.controls.hold(Je),L||o.hideControls(),o.dispatchEvent("update")}function J(){var ee=[],le=o.selectionManager.currentSet;if(le&&le.selections&&le.selections.length>0)for(var ye=0;ye<le.selections.length;ye++){var oe=o.pointObjects[le.selections[ye]];if(le==o.selectedBalls)ee.push(oe[1]);else if(le==o.selectedRect1s)ee.push(oe[2]);else if(le==o.selectedRect2s)ee.push(oe[3]);else continue}return ee}function fe(ee){if(o.selectPoints&&ee.type=="Circle"){var le=ee,ye=le.mySet,oe=le.rect1,Me=le.rect2;oe.x-=le.x,oe.y-=le.y,Me.x-=le.x,Me.y-=le.y,ye.x+=le.x,ye.y+=le.y,le.x=0,le.y=0}}o.selectionManager.on("keydown",function(ee){if(o.selectPoints&&o.keyFocus&&ee.keyCode>=37&&ee.keyCode<=40){var le=J();if(le.length>0){for(var ye=0;ye<le.length;ye++){var oe=le[ye];ee.keyCode==37?oe.x-=o.selectionManager.shiftKey?10:1:ee.keyCode==39?oe.x+=o.selectionManager.shiftKey?10:1:ee.keyCode==38?oe.y-=o.selectionManager.shiftKey?10:1:ee.keyCode==40&&(oe.y+=o.selectionManager.shiftKey?10:1),z(oe)}o.drawShape(),o.dispatchEvent("update"),o.stage&&o.stage.update()}}}),o.selectionManager.on("keyup",function(ee){if(o.selectPoints&&o.keyFocus&&ee.keyCode>=37&&ee.keyCode<=40){var le=J();if(le.length>0)for(var ye=0;ye<le.length;ye++)fe(le[ye])}}),o.selectionManager.on("undo",function(){if(o.selectPoints&&o.keyFocus&&o.lastPoints){var ee=t.copy(o.lastPoints);o.lastPoints=t.copy(o.points),o.points=ee,o.stage&&o.stage.update()}}),z=function(ee){if(!o.lockControls){var le;if(ee.rect1){le=ee;var ye=le.x-le.startX,oe=le.y-le.startY;le.rect1.x=le.rect1.startX+ye,le.rect1.y=le.rect1.startY+oe,le.rect2.x=le.rect2.startX+ye,le.rect2.y=le.rect2.startY+oe}else{var Me=ee,ae=Me.other;le=Me.ball;var Se=le.index,Le=f;if(n(S[Se][4])||(Le=S[Se][4]),Le=="straight"||Le=="mirror"){var Ce=Me.x-le.x,te=Me.y-le.y;if(Le=="mirror")ae.x=le.x-Ce,ae.y=le.y-te;else{var Oe=Math.atan2(te,Ce),Re=-ae.stickLength*Math.cos(Oe+Math.PI),Xe=-ae.stickLength*Math.sin(Oe+Math.PI);ae.x=le.x-Re,ae.y=le.y-Xe}}}}},Object.defineProperty(o,"move",{get:function(){return k},set:function(ee){k!=ee&&(k=ee,ee?U():ue())}}),Object.defineProperty(o,"interactive",{get:function(){return F},set:function(ee){F=ee,L=F,o.allowToggle=F,o.editPoints=F,o.lockControls=!F,o.selectPoints=F,o.move=F;var le=o.points;o.points=le}}),Object.defineProperty(o,"allowToggle",{get:function(){return g},set:function(ee){g!=ee&&(g=ee,g?o.move&&U():!L&&o.move&&ue())}});function U(){o.move!="always"&&(ie||(ie=!0,O.drag({onTop:!1}),de=O.on("mousedown",de),R=O.on("pressmove",R),N=O.on("pressup",N)))}function ue(ee){o.move!="always"&&(!ee&&!ie||(ie=!1,O.noDrag(),O.off("mousedown",de),O.off("pressmove",R),O.off("pressup",N)))}Object.defineProperty(o,"controlsVisible",{get:function(){return L},set:function(ee){L=ee,ee?o.showControls():o.hideControls()}});var ke=C;Object.defineProperty(o,"lockControls",{get:function(){return ke},set:function(ee){ke=ee,ee?(o.controls.mouseChildren=!1,o.controls.mouseEnabled=!1):(o.controls.mouseChildren=!0,o.controls.mouseEnabled=!0)}}),o.lockControls=ke,j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==o},set:function(){t.KEYFOCUS=o}}),o.selectPoints&&!t.KEYFOCUS&&ne();function ne(){o.keyFocus=!0;var ee=document.activeElement;ee&&ee.blur()}Object.defineProperty(o,"points",{get:function(){for(var ee=[],le,ye,oe=0;oe<S.length;oe++)ye=S[oe],le=[t.decimals(ye[0].x),t.decimals(ye[0].y),t.decimals(ye[1].x),t.decimals(ye[1].y),t.decimals(ye[2].x),t.decimals(ye[2].y),t.decimals(ye[3].x),t.decimals(ye[3].y)],ye[4]&&ye[4]!=="straight"&&le.push(ye[4]),ee.push(le);return ee},set:function(ee){var le=o.x,ye=o.y,oe=o.visible,Me=[],ae=!1;t.loop(o.pointControls,function(Se){Se.scaleX+Se.scaleY+Se.regX+Se.regY+Se.rotation!=2&&(ae=!0),Me.push([Se.scaleX,Se.scaleY,Se.regX,Se.regY,Se.rotation])}),o.dispose(!0),l=Ie(ee),o.shape&&(o.shape.graphics.clear(),o.sticks.graphics.clear(),o.controls.noDrag(),o.removeAllChildren(),delete o.shape,delete o.sticks,delete o.controls),o.visible=!1,xe(),o.lockControls=ke,o.x=le,o.y=ye,o.visible=oe,ae&&(t.loop(o.pointControls,function(Se,Le){Se.scaleX=Me[Le][0],Se.scaleY=Me[Le][1],Se.regX=Me[Le][2],Se.regY=Me[Le][3],Se.rotation=Me[Le][4]}),o.update())}}),Object.defineProperty(o,"pointsAdjusted",{get:function(){var ee=[],le,ye,oe,Me=o.pointObjects;return t.loop(Me.length,function(ae){if(oe=Me[ae],ye=S[ae],oe[0].rotation==0&&oe[0].scaleX==0&&oe[0].scaleY==0)le=[t.decimals(ye[0].x),t.decimals(ye[0].y),t.decimals(ye[1].x),t.decimals(ye[1].y),t.decimals(ye[2].x),t.decimals(ye[2].y),t.decimals(ye[3].x),t.decimals(ye[3].y)];else{var Se=oe[0].localToLocal(oe[2].x,oe[2].y,oe[0].parent),Le=oe[0].localToLocal(oe[3].x,oe[3].y,oe[0].parent);le=[t.decimals(ye[0].x),t.decimals(ye[0].y),t.decimals(ye[1].x),t.decimals(ye[1].y),t.decimals(Se.x-ye[0].x),t.decimals(Se.y-ye[0].y),t.decimals(Le.x-ye[0].x),t.decimals(Le.y-ye[0].y)]}ye[4]&&ye[4]!=="mirror"&&le.push(ye[4]),ee.push(le)}),ee},set:function(){ht&&je("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(o,"pointObjects",{get:function(){return S},set:function(){ht&&je("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(o,"pointControls",{get:function(){return m},set:function(){ht&&je("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(o,"pointCircles",{get:function(){return X},set:function(){ht&&je("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(o,"segmentPoints",{get:function(){var ee=o.pointsAdjusted,le=[];return t.loop(ee.length,function(ye,oe){var Me=o.getSegmentPoint(ee[ye],ee[ye<oe-1?ye+1:0]);le.push(Me)}),le},set:function(){ht&&je("Blob() - segmentPoints is read only")}}),Object.defineProperty(o,"segmentRatios",{get:function(){var ee=[],le=0;t.loop(o.segmentPoints,function(Me){var ae=t.distanceAlongCurve(Me);ee.push(ae),le+=ae});var ye=[],oe=0;return t.loop(ee,function(Me){var ae=Me/le;oe+=ae,ye.push(oe)}),ye},set:function(){ht&&je("Blob() - segmentRatios is read only")}}),o.approximateBounds=function(ee,le){n(ee)&&(ee=80),ee/=o.num;var ye=o.interpolate(ee,null,!0,null,!0),oe=t.boundsAroundPoints(ye);if(o.setBounds(oe.x,oe.y,oe.width,oe.height),le){if(!o.parent)return ht&&je("approximateBounds() - add to stage to first to see points"),o;o.hitPathPoints?o.hitPathPoints.removeAllChildren():o.hitPathPoints=new t.Container().addTo(),o.hitPathPoints.top();for(var Me=0;Me<ye.length;Me++){var ae=ye[Me];ae=o.localToGlobal(ae.x,ae.y),new t.Circle(3).loc(ae.x,ae.y,o.hitPathPoints)}}return o},o.getPointAngle=function(ee){var le=o.pointObjects[ee][0],ye=o.pointObjects[ee][2],oe=o.pointObjects[ee][3],Me,ae;return le==o.stage?(Me=new t.Point(ye.x,ye.y),ae=new t.Point(oe.x,oe.y)):(Me=le.localToGlobal(ye.x,ye.y),ae=le.localToGlobal(oe.x,oe.y)),t.angle(Me.x,Me.y,ae.x,ae.y)},o.getSegmentPoint=function(ee,le){if(!(n(ee)||n(le))){(ee[2]!=0||ee[3]!=0)&&(ee[4]-=ee[2],ee[5]-=ee[3],ee[6]-=ee[2],ee[7]-=ee[3],ee[0]+=ee[2],ee[1]+=ee[3],ee[2]=0,ee[3]=0),(le[2]!=0||le[3]!=0)&&(le[4]-=le[2],le[5]-=le[3],le[6]-=le[2],le[7]-=le[3],le[0]+=le[2],le[1]+=le[3],le[2]=0,le[3]=0);var ye={x:ee[0],y:ee[1]},oe={x:ee[0]+ee[6],y:ee[1]+ee[7]},Me={x:le[0]+le[4],y:le[1]+le[5]},ae={x:le[0],y:le[1]};return(ce.x!=0||ce.y!=0)&&(ye.x+=ce.x,oe.x+=ce.x,Me.x+=ce.x,ae.x+=ce.x,ye.y+=ce.y,oe.y+=ce.y,Me.y+=ce.y,ae.y+=ce.y),[ye,oe,Me,ae]}},o.getAdjacentSegmentData=function(ee){n(ee)&&(ee=0);var le=o.pointsAdjusted;if(o.num==2)return[[o.getSegmentPoint(le[0],le[1]),o.getSegmentPoint(le[1],le[0])],[0,1]];if(ee==0)return[[o.getSegmentPoint(le[o.num-1],le[0]),o.getSegmentPoint(le[0],le[1]),o.getSegmentPoint(le[1],le[2])],[o.num-1,0,1]];if(ee>=o.num-1)return[[o.getSegmentPoint(le[o.num-2],le[o.num-1]),o.getSegmentPoint(le[o.num-1],le[0]),o.getSegmentPoint(le[0],le[1])],[o.num-2,o.num-1,0]];var ye=ee+2>=o.num?0:ee+2;return[[o.getSegmentPoint(le[ee-1],le[ee]),o.getSegmentPoint(le[ee],le[ee+1]),o.getSegmentPoint(le[ee+1],le[ye])],[ee-1,ee,ee+1]]},o.getCurvePoint=function(ee,le,ye,oe){n(le)&&(le=o.segmentRatios),n(ye)&&(ye=o.segmentPoints),n(oe)&&(oe=!1);var Me=le,ae=ye,Se=t.loop(Me,function(Xe,Qe){if(Xe>=ee)return Qe}),Le=Se>0?Me[Se-1]:0,Ce=Se>0?Me[Se]-Me[Se-1]:Me[Se],te=(ee-Le)/Ce,Oe=t.pointAlongCurve(ae[Se],te,oe,!0);if(!n(Oe)){var Re=o.localToGlobal(Oe.x,Oe.y);return Re.angle=Oe.angle,Re.z=Se,n(Re)?void 0:Re}};function ve(ee,le,ye){return{x:ee.x+(le.x-ee.x)*ye,y:ee.y+(le.y-ee.y)*ye}}function we(ee,le,ye,oe,Me,ae,Se,Le){var Ce=ee.length-1,te=0,Oe=0;oe==100&&o.type=="Squiggle"&&(oe=99.99),oe=(oe+1e5)%100,t.loop(ye,function(st,Ye){if(oe/100<st)return Ce=Ye,Oe=st,!0;te=st});var Re=o.segmentPoints[Ce],Xe=Oe>0?(oe/100-te)/(Oe-te):0,Qe=t.pointAlongCurve(Re,Xe,null,Le),it=[Qe.x,Qe.y,0,0];if(!ae){if(Se){o.interpolatedPoints.push({x:Qe.x,y:Qe.y,r:oe/100});return}if(Me!="none"){var Be=ve(Re[0],Re[1],Xe),Ke=ve(Re[1],Re[2],Xe),He=ve(Re[2],Re[3],Xe),he=ve(Be,Ke,Xe),me=ve(Ke,He,Xe);it[4]=he.x-Qe.x,it[5]=he.y-Qe.y,it[6]=me.x-Qe.x,it[7]=me.y-Qe.y;var Te=o.localToLocal(Be.x,Be.y,le[Ce]);ee[Ce][6]=Te.x,ee[Ce][7]=Te.y;var ze=o.localToLocal(He.x,He.y,le[(Ce+1)%ee.length]);ee[(Ce+1)%ee.length][4]=ze.x,ee[(Ce+1)%ee.length][5]=ze.y}Me&&(it[8]=Me),ee.splice(Ce+1,0,it)}}this.addPoint=function(ee,le){n(ee)&&(ee=100);var ye=o.points,oe=o.segmentRatios,Me=o.pointControls;return le=le||G,we(ye,Me,oe,ee,le),o.points=ye,o.num=ye.length,o},this.removePoint=function(ee){if(!(n(ee)||ee<0)){var le=t.copy(o.points);return le.splice(ee,1),o.points=le,o.stage&&o.stage.update(),o}},this.addPoints=function(ee,le,ye,oe,Me,ae,Se){n(ae)&&(ae=t.copy(o.points));var Le=t.copy(o.segmentRatios),Ce=0;if(Me&&(o.interpolatedPoints=[]),oe)var te=Le.length*ee;return t.loop(Le,function(Oe,Re){Me&&we(ae,o.pointControls,o.segmentRatios,Ce*100,le,!n(ye)&&Re!=ye,Me,Se);var Xe=oe?Math.round(te*(Oe-Ce)):ee,Qe=1/(Xe+1);t.loop(Xe,function(it){var Be=Ce+(Oe-Ce)*Qe*(it+1);we(ae,o.pointControls,o.segmentRatios,Be*100,le,!n(ye)&&Re!=ye,Me,Se),!Me&&ee>0&&(o.points=ae)}),Ce=Oe}),Me&&o.type=="Squiggle"&&we(ae,o.pointControls,o.segmentRatios,100,le,null,Me,Se),o.stage&&o.stage.update(),o.num=ae.length,o},this.interpolate=function(ee,le,ye,oe,Me){return n(ee)&&(ee=1),o.addPoints(ee,"none",le,ye,!0,oe,Me),o.interpolatedPoints},$&&o.approximateBounds(),this.dispose=function(ee,le,ye){if(o.shape){if(t.gD(o),se&&o.toggleStageEvent&&se.off("stagemousedown",o.toggleStageEvent),o.controls.noDrag(),o.controls.removeAllEventListeners(),o.selectPoints&&o.selectionManager&&o.selectionManager.dispose(),o.selectedBalls=null,o.selectedRect1s=null,o.selectedRect2s=null,o.selectionManager=null,o.off("mousedown",o.toggleEvent),o.off("click",o.clickEvent),ee){o.shape.dispose(),o.shape=null;for(var oe=0;oe<o.points.length;oe++)o.pointObjects[oe][0].removeAllEventListeners(),o.pointObjects[oe][1].removeAllEventListeners(),o.pointObjects[oe][2].removeAllEventListeners(),o.pointObjects[oe][3].removeAllEventListeners();o.controls.removeFrom(o),o.sticks.dispose(),S=null,X=null}else o.removeAllEventListeners(),S=null,X=null,ye||this.zimCustomShape_dispose(!0);return!0}}},t.extend(t.Blob,t.CustomShape,["clone","dispose"],"zimCustomShape",!1),t.Flare=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re){var G="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",L;if(L=at(t.Flare,arguments,G,this))return L;De("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=Q;var c=$===!1?{}:t.getStyle(this.type,this.group,re),d=this;n(r)&&(r=c.borderColor!=null?c.borderColor:null),n(i)&&(i=c.borderWidth!=null?c.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(e)&&(e=c.color!=null?c.color:i>0?"rgba(0,0,0,0)":t.black),(n(i)||i>0)&&(!n(r)||!n(i))&&n(r)&&(r=t.black),n(l)&&(l=c.crossAngle!=null?c.crossAngle:0);var o=l;l-=90,n(a)&&(a=c.thickness!=null?c.thickness:null),n(s)&&(s=c.thicknessA!=null?c.thicknessA:null),n(f)&&(f=c.thicknessB!=null?c.thicknessB:null),n(a)?n(f)&&!n(s)?f=s:n(s)&&!n(f)?s=f:f=s=10:n(f)&&!n(s)?f=a-s:n(s)&&!n(f)?s=a-f:f=s=a/2,d.thickness=s+f,n(I)&&(I=c.cross!=null?c.cross:!0),n(w)&&(w=c.crossColors!=null?c.crossColors:null),!n(w)&&!Array.isArray(w)&&(w=[w]),n(E)&&(E=c.close!=null?c.close:!1),n(v)&&(v=c.startX!=null?c.startX:0),n(C)&&(C=c.startY!=null?c.startY:0),n(h)&&(h=c.lengths!=null?c.lengths:[200]),Array.isArray(h)||(h=[h]),n(g)&&(g=c.angles!=null?c.angles:[0]),Array.isArray(g)||(g=[g]),n(k)&&(k=c.anglesA!=null?c.anglesA:[10]),Array.isArray(k)||(k=[k]),n(y)&&(y=c.anglesB!=null?c.anglesB:t.copy(k)),Array.isArray(y)||(y=[y]),n(x)&&(x=c.anglesEnd!=null?c.anglesEnd:[0]),Array.isArray(x)||(x=[x]),n(p)&&(p=c.strokeObj!=null?c.strokeObj:{miterLimit:2}),n(F)&&(F=c.spineBorderColor!=null?c.spineBorderColor:null),n(B)&&(B=c.spineBorderWidth!=null?c.spineBorderWidth:null),F<0||B<0?F=B=null:F!=null&&B==null&&(B=1),n(T)&&(T=c.spineColor!=null?c.spineColor:B>0?"rgba(0,0,0,0)":t.black),n(D)&&(D=c.spineDashed!=null?c.spineDashed:null),n(P)&&(P=c.spineStrokeObj!=null?c.spineStrokeObj:{miterLimit:2}),(n(B)||B>0)&&(!n(F)||!n(B))&&n(F)&&(F=r||t.black),n(V)&&(V=c.closeBorderColor!=null?c.closeBorderColor:null),n(_)&&(_=c.closeBorderWidth!=null?c.closeBorderWidth:null),V<0||_<0?V=_=null:V!=null&&_==null&&(_=1),n(Y)&&(Y=c.closeColor!=null?c.closeColor:_>0?"rgba(0,0,0,0)":null),n(b)&&(b=c.closeDashed!=null?c.closeDashed:null),n(Z)&&(Z=c.closeStrokeObj!=null?c.closeStrokeObj:{miterLimit:2}),(n(_)||_>0)&&(!n(V)||!n(_))&&n(V)&&(V=r||t.black),this.thicknessA=s,this.thicknessB=f,this.cross=I,this.close=E,this.lengths=h,this.angles=g,this.anglesA=k,this.anglesB=y,this.anglesEnd=x,this.crossColors=w,S(h,g,k,y,x,I,w,E),e.type&&(d.color=e);function S(R,N,se,ie,q,z,ce,Ie){d.removeAllChildren();var K=d.shape=new t.Shape().addTo(d);if(d.colorCommand=K.c().f(e).command,e&&e.type&&d.specialColor(d.colorCommand,e,d),(n(i)||i>0)&&(!n(r)||!n(i))&&(n(r)&&(r=t.black),d.borderColorCommand=K.s(r).command,r&&r.type&&d.specialColor(d.borderColorCommand,r,d),d.borderWidthCommand=K.ss(i,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,A&&(d.borderDashedCommand=K.sd([10,10],5).command)),K.mt(0,0),B>0){var xe=d.spineShape=new t.Shape().addTo(d);d.spineColorCommand=xe.c().f(T).command,T&&T.type&&d.specialColor(d.spineColorCommand,T,d),(n(B)||B>0)&&(!n(F)||!n(B))&&(n(F)&&(F=t.black),d.spineBorderColorCommand=xe.s(F).command,F&&F.type&&d.specialColor(d.spineBorderColorCommand,F,d),d.spineBorderWidthCommand=xe.ss(B,P.caps,P.joints,P.miterLimit,P.ignoreScale).command,D&&(d.spineBorderDashedCommand=xe.sd([10,10],5).command))}if(!n(Y)){var J=d.closeShape=new t.Shape().addTo(d);d.closeColorCommand=J.c().f(Y).command,Y&&Y.type&&d.specialColor(d.closeColorCommand,Y,d),(n(_)||_>0)&&(!n(V)||!n(_))&&(n(V)&&(V=t.black),d.closeBorderColorCommand=J.s(V).command,V&&V.type&&d.specialColor(d.closeBorderColorCommand,V,d),d.closeBorderWidthCommand=J.ss(_,Z.caps,Z.joints,Z.miterLimit,Z.ignoreScale).command,b&&(d.closeBorderDashedCommand=J.sd([10,10],5).command)),K.mt(0,0)}var fe=v,U=C,ue=l,ke=ue-180,ne=s,ve=f,we=Math.max(R.length,N.length,se.length,ie.length,q.length),ee,le,ye=ke,oe=[],Me=[],ae=[];d.points=[];var Se=d.pinPoints=[];t.loop(we,function(te){var Oe=Le(te),Re=Math.cos(Oe.a*t.RAD),Xe=Math.sin(Oe.a*t.RAD),Qe=new t.Point(fe+Oe.A.x*Re-Oe.A.y*Xe,U+Oe.A.x*Xe+Oe.A.y*Re),it=new t.Point(fe+Oe.B.x*Re-Oe.B.y*Xe,U+Oe.B.x*Xe+Oe.B.y*Re),Be=new t.Point(fe+Oe.C.x*Re-Oe.C.y*Xe,U+Oe.C.x*Xe+Oe.C.y*Re),Ke=new t.Point(fe+Oe.D.x*Re-Oe.D.y*Xe,U+Oe.D.x*Xe+Oe.D.y*Re);oe.push(Qe,it),Me.unshift(Be,Ke),ae.push([Qe,it,Be,Ke]);var He=new t.Point(fe+Oe.F.x*Re-Oe.F.y*Xe,U+Oe.F.x*Xe+Oe.F.y*Re),he=new t.Point(fe+Oe.E.x*Re-Oe.E.y*Xe,U+Oe.E.x*Xe+Oe.E.y*Re);te==0&&d.pinPoints.push(He),d.pinPoints.push(he),fe=he.x,U=he.y,ne=Oe.tA,ve=Oe.tB}),d.points=oe.concat(Me),z?(d.crossCommands=[],t.loop(ae,function(te,Oe){K.mt(te[0].x,te[0].y),!n(ce)&&!n(ce[Oe])&&(K.f(ce[Oe]),d.crossCommands[Oe]=K.f(ce[Oe]).command,ce[Oe]&&ce[Oe].type&&d.specialColor(d.crossCommands[Oe],ce[Oe],d),K.mt(te[0].x,te[0].y)),K.lt(te[1].x,te[1].y).lt(te[2].x,te[2].y).lt(te[3].x,te[3].y).cp()}),Ie&&K.mt(ae[ae.length-1][1].x,ae[ae.length-1][1].y).lt(ae[ae.length-1][2].x,ae[ae.length-1][2].y).lt(ae[0][3].x,ae[0][3].y).lt(ae[0][0].x,ae[0][0].y).cp()):(t.loop(oe,function(te,Oe){Oe==0?K.mt(te.x,te.y):K.lt(te.x,te.y)}),Ie&&(K.lt(oe[0].x,oe[0].y),K.cp()),t.loop(Me,function(te,Oe){Oe==0&&Ie?K.mt(te.x,te.y):K.lt(te.x,te.y)}),Ie&&K.lt(Me[0].x,Me[0].y),K.cp()),xe&&(t.loop(Se,function(te,Oe){Oe==0?xe.mt(te.x,te.y):xe.lt(te.x,te.y)}),Ie&&xe.lt(Se[0].x,Se[0].y).cp()),n(Y)||(t.loop(Me,function(te,Oe){Oe==0?J.mt(te.x,te.y):J.lt(te.x,te.y)}),Ie&&J.lt(Me[0].x,Me[0].y).cp());function Le(te){var Oe=N[te],Re=R[te],Xe=se[te],Qe=ie[te],it=q[te];if(ce)var Be=ce[te];n(Oe)&&(Oe=ye,d.angles[te]=Oe),n(Re)&&(Re=200,d.lengths[te]=Re),n(Xe)&&(Xe=0,d.anglesA[te]=Xe),n(Qe)&&(Qe=0,d.anglesB[te]=Qe),n(it)&&(it=0,d.anglesEnd[te]=it),ce&&n(Be)&&(Be=e,d.crossColors[te]=Be),it=it+90;var Ke=180-it,He=Math.cos((ye-Oe)*t.RAD),he=Math.sin((ye-Oe)*t.RAD),me=new t.Point(0,0),Te=new t.Point(Re,0);if(n(ee))var ze=new t.Point(Math.cos(ue*t.RAD)*ne,Math.sin(ue*t.RAD)*ne);else ze=new t.Point(ee.x*He-ee.y*he,ee.x*he+ee.y*He);var st=Ce(Re,ze.x,ze.y,Xe,Ke),Ye=new t.Point(Re-st.x,-st.y),nt;n(le)?nt=new t.Point(Math.cos(ke*t.RAD)*ne,Math.sin(ke*t.RAD)*ve):nt=new t.Point(le.x*He-le.y*he,le.x*he+le.y*He);var pe=Ce(Re,nt.x,nt.y,Qe,it),Je=new t.Point(Re-pe.x,pe.y);return ee=new t.Point(Ye.x-Re,Ye.y),le=new t.Point(Je.x-Re,Je.y),ye=Oe,{a:Oe,A:ze,B:Ye,C:Je,D:nt,E:Te,F:me,tA:st.t,tB:pe.t}}function Ce(te,Oe,Re,Xe,Qe){var it=Qe-90,Be=90-it,Ke=180-Xe-Be,He=Math.tan(it*t.RAD)*Re,he=te-Oe-He,me=he/Math.sin(Ke*t.RAD)*Math.sin(Xe*t.RAD),Te=Math.sqrt(Math.pow(Re,2)+Math.pow(He,2)),ze=me+Te,st=ze*Math.sin(it*t.RAD),Ye=ze*Math.cos(it*t.RAD);return{x:st,y:Ye,t:ze}}}this.add=function(R,N,se,ie,q,z,ce,Ie){var K="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close",xe;return(xe=at(d.add,arguments,K))?xe:(n(z)||(d.cross=z),n(Ie)||(d.close=Ie),n(R)||(Array.isArray(R)||(R=[R]),n(d.lengths)?d.lengths=R:d.lengths=d.lengths.concat(R)),n(N)||(Array.isArray(N)||(N=[N]),n(d.angles)?d.angles=N:d.angles=d.angles.concat(N)),n(se)||(Array.isArray(se)||(se=[se]),n(d.anglesA)?d.anglesA=se:d.anglesA=d.anglesA.concat(se)),n(ie)||(Array.isArray(ie)||(ie=[ie]),n(d.anglesB)?d.anglesB=ie:d.anglesB=d.anglesB.concat(ie)),n(q)||(Array.isArray(q)||(q=[q]),n(d.anglesEnd)?d.anglesEnd=q:d.anglesEnd=d.anglesEnd.concat(q)),n(ce)||(n(d.crossColors)?ht&&je("Flare() - must set crossColor for original object parameters"):(Array.isArray(ce)||(ce=[ce]),n(d.crossColors)?d.crossColors=ce:d.crossColors=d.crossColors.concat(ce))),d.remake(),d)},this.remake=function(){return s=this.thicknessA,f=this.thicknessB,S(d.lengths,d.angles,d.anglesA,d.anglesB,d.anglesEnd,d.cross,d.crossColors,d.close),d},Object.defineProperty(d,"color",{get:function(){return e},set:function(R){n(R)&&(R=t.black),e=R,R&&R.type?d.specialColor(d.colorCommand,R,d):d.colorCommand.style=R}});var X,m;this.setColorRange=function(R,N){return n(N)?(X=d.color,m=R):n(R)?(X=d.color,m=N):(X=R,m=N),d};var O=0;Object.defineProperty(d,"colorRange",{get:function(){return O},set:function(R){O=R,!n(X)&&!n(m)&&(d.color=t.colorRange(X,m,R))}}),Object.defineProperty(d,"borderColor",{get:function(){return r},set:function(R){r=R,d.borderColorCommand?R&&R.type?d.specialColor(d.borderColorCommand,R,d):d.borderColorCommand.style=R:S()}}),Object.defineProperty(d,"borderWidth",{get:function(){return i},set:function(R){R>0||(R=0),i=R,!d.borderWidthCommand||i==0?S():(d.borderWidthCommand.width=i,A&&(d.borderDashedCommand.segments=[20,10],d.borderDashedCommand.offset=5))}}),Object.defineProperty(d,"spineColor",{get:function(){return T},set:function(R){n(R)&&(R=t.black),T=R,d.spineColorCommand?R&&R.type?d.specialColor(d.spineColorCommand,R,d):d.spineColorCommand.style=R:S()}}),Object.defineProperty(d,"spineBorderColor",{get:function(){return F},set:function(R){F=R,d.spineBorderColorCommand?R&&R.type?d.specialColor(d.spineBorderColorCommand,R,d):d.spineBorderColorCommand.style=R:S()}}),Object.defineProperty(d,"spineBorderWidth",{get:function(){return B},set:function(R){R>0||(R=0),B=R,!d.spineBorderWidthCommand||B==0?S():(d.spineBorderWidthCommand.width=B,D&&(d.spineBorderDashedCommand.segments=[20,10],d.spineBorderDashedCommand.offset=5))}}),Object.defineProperty(d,"closeColor",{get:function(){return Y},set:function(R){n(R)&&(R=t.black),Y=R,d.closeColorCommand?R&&R.type?d.specialColor(d.closeColorCommand,R,d):d.closeColorCommand.style=R:S()}}),Object.defineProperty(d,"closeBorderColor",{get:function(){return V},set:function(R){V=R,d.closeBorderColorCommand?R&&R.type?d.specialColor(d.closeBorderColorCommand,R,d):d.closeBorderColorCommand.style=R:S()}}),Object.defineProperty(d,"closeBorderWidth",{get:function(){return _},set:function(R){R>0||(R=0),_=R,!d.closeBorderWidthCommand||_==0?S():(d.closeBorderWidthCommand.width=_,b&&(d.closeBorderDashedCommand.segments=[20,10],d.closeBorderDashedCommand.offset=5))}}),Object.defineProperty(d,"pin",{get:function(){return u},set:function(R){R>0||(R=0),R>d.pinPoints.length-1&&(u=0),u=R;var N=d.pinPoints[u];N&&(d.regX=N.x,d.regY=N.y)}});var de=t.boundsAroundPoints(d.points);this.setBounds(de.x,de.y,de.width,de.height),n(u)||(d.pin=u),this.mouseChildren=!1,$!==!1&&t.styleTransforms(this,c),this.clone=function(){return d.cloneProps(new t.Flare(e,r,i,o,t.copy(a),t.copy(s),t.copy(f),u,v,C,t.copy(h),t.copy(g),t.copy(k),t.copy(y),t.copy(x),I,t.copy(w),E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,this.group,re))}},t.extend(t.Flare,t.Container,["clone"],"zimContainer",!1),t.MultiFlare=function(e,r,i,l,a,s,f){var u="flares, pins, angles, endToEnd, style, group, inherit",v;if(v=at(t.MultiFlare,arguments,u,this))return v;De("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=s;var C=a===!1?{}:t.getStyle(this.type,this.group,f),h=this;n(e)&&(e=C.flares!=null?C.flares:[]),Array.isArray(e)||(e=[e]),n(r)&&(r=C.pins!=null?C.pins:null),n(i)&&(i=C.angles!=null?C.angles:null),n(l)&&(l=C.endToEnd!=null?C.endToEnd:!1),h.flares=e,h.pins=r,h.angles=i,h.endToEnd=l,h.mouseChildren=!1,h.add=function(g,k){return n(g)||(n(k)&&(k=!0),Array.isArray(g)||(g=[g]),t.loop(g,function(y){k?h.flares.push(y.clone()):h.flares.push(y)}),h.remake(),h.stage&&h.stage.update()),h},h.remove=function(g){return n(g)||(Array.isArray(g)||(g=[g]),t.loop(g,function(k){var y=h.flares.indexOf(k);y>=0&&h.flares.splice(y,1)}),h.remake(),h.stage&&h.stage.update()),h},h.remake=function(){h.removeAllChildren(),t.loop(h.flares,function(g,k){if(r&&!n(r[k])&&(g.pin=r[k]),i&&!n(i[k])&&(g.rotation=i[k]),g.addTo(h),h.flares.push(g),l&&k>0){var y=e[k-1],x=y.pinPoints[y.pinPoints.length-1],I=y.localToLocal(x.x,x.y,h),w=g.pinPoints[0],E=g.localToLocal(w.x,w.y,h);g.mov(I.x-E.x,I.y-E.y)}})},h.remake(),a!==!1&&t.styleTransforms(this,C),this.clone=function(){return h.cloneProps(new t.MultiFlare(t.copy(e,!0),t.copy(r),t.copy(i),l,a,this.group,f))}},t.extend(t.MultiFlare,t.Container,["clone"],"zimContainer",!1),t.FlareBox=function(e,r,i,l,a,s,f,u,v,C,h){var g="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",k;if(k=at(t.FlareBox,arguments,g,this))return k;De("53.8"),this.group=C;var y=v===!1?{}:t.getStyle("FlareBox",this.group,h);n(e)&&(e=y.width!=null?y.width:220),n(r)&&(r=y.height!=null?y.height:80),this.zimContainer_constructor(e,r),this.type="FlareBox";var x=this;if(this.mouseChildren=!1,n(l)&&(l=y.borderColor!=null?y.borderColor:null),n(a)&&(a=y.borderWidth!=null?y.borderWidth:null),l<0||a<0?l=a=null:l!=null&&a==null&&(a=1),n(i)&&(i=y.color!=null?y.color:a>0?"rgba(0,0,0,0)":t.black),(n(a)||a>0)&&(!n(l)||!n(a))&&n(l)&&(l=t.black),n(s)&&(s=y.flares!=null?y.flares:null),n(f)&&(f=y.corners!=null?y.corners:null),n(u)&&(u=y.pins!=null?y.pins:null),x.backing=new t.Rectangle(e,r,i,l,a).addTo(this),!n(s)){if(s.type!="MultiFlare"){if(!Array.isArray(s)){if(s.type!="Flare")return;s=[s]}s=new t.MultiFlare(s,u)}s.addTo(x),x.multiFlare=s,x.flares=x.multiFlare.flares,s.loop(function(I,w){u&&!n(u[w])?I.pin=u[w]:n(I.pin)&&(I.pin=0),f&&!n(f[w])?I.corner=f[w]:n(I.corner)&&(I.corner=0),I.corner==1?I.loc(e,0):I.corner==2?I.loc(e,r):I.corner==3?I.loc(0,r):I.loc(0,0),I.rot((I.corner-I.pin)*90)}),v!==!1&&t.styleTransforms(this,y),this.clone=function(){return x.cloneProps(new t.FlareBox(e,r,i,l,a,t.copy(s,!0),t.copy(f),t.copy(u),v,this.group,h))}}},t.extend(t.FlareBox,t.Container,["clone"],"zimContainer",!1),t.Label=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L){var c="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",d;if(d=at(t.Label,arguments,c,this))return d;De("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=G;var o=re===!1?{}:t.getStyle(this.type,this.group,L);n(e)&&(e=o.text!=null?o.text:"LABEL"),n(r)&&(r=o.size!=null?o.size:36),n(i)&&(i=o.font!=null?o.font:"arial"),n(l)&&(l=o.color!=null?o.color:t.black),n(C)&&(C=o.bold!=null?o.bold:!1),n(h)&&(h=o.italic!=null?o.italic:!1);var S=X(e,r,i,l,C,h);this.veeObj={text:S[0],size:S[1],font:S[2],color:S[3],bold:S[4],italic:S[5]};function X(){return arguments}e=t.Pick.choose(e);var m=!1;e===""&&(e=" ",m=!0),r=t.Pick.choose(r),i=t.Pick.choose(i),i=i.replace("+"," ");var O=["ttf","otf","woff2","woff","fnt"],de=i.split(".");de.length>0&&O.indexOf(de[1])!=-1&&(i=de[0]),l=t.Pick.choose(l),C=t.Pick.choose(C),h=t.Pick.choose(h),n(a)&&(a=o.rollColor!=null?o.rollColor:null),(n(s)||s=="ignore")&&(s=o.shadowColor!=null&&s!="ignore"?o.shadowColor:-1),(n(f)||f=="ignore")&&(f=o.shadowBlur!=null&&f!="ignore"?o.shadowBlur:14),n(u)&&(u=o.align!=null?o.align:"left"),n(v)&&(v=o.valign!=null?o.valign:"top"),(!n(I)||!n(o.outlineColor))&&n(w)&&(w=o.outlineWidth!=null?o.outlineWidth:Math.round(r*.2)),(!n(w)||!n(o.outlineWidth))&&n(I)&&(I=o.outlineColor!=null?o.outlineColor:t.black),n(w)&&(w=o.outlineWidth!=null?o.outlineWidth:0),(n(E)||E=="ignore")&&(E=o.backgroundColor!=null&&E!="ignore"?o.backgroundColor:null),n(A)&&(A=o.backgroundBorderColor!=null&&A!="ignore"?o.backgroundBorderColor:null),n(p)&&(p=o.backgroundBorderWidth!=null&&p!="ignore"?o.backgroundBorderWidth:null),(n(F)||F=="ignore")&&(F=o.padding!=null&&F!="ignore"?o.padding:10),n(D)&&(D=o.paddingH!=null?o.paddingH:F),n(P)&&(P=o.paddingV!=null?o.paddingV:F),n(Y)&&(Y=o.shiftH!=null?o.shiftH:0),n(_)&&(_=o.shiftV!=null?o.shiftV:0),n(g)&&(g=o.variant!=null?o.variant:!1),n(k)&&(k=o.lineWidth!=null?o.lineWidth:null),n(y)&&(y=o.lineHeight!=null?o.lineHeight:null),(n(x)||x=="ignore")&&(x=o.backing!=null&&x!="ignore"?o.backing.clone():null),n(V)&&(V=o.rollPersist!=null?o.rollPersist:!1),o.labelWidth!=null&&(k=o.labelWidth),n(b)||(k=b),u=="middle"&&(u="center"),n(Z)&&(Z=o.labelHeight!=null?o.labelHeight:null),n($)&&($=o.maxSize!=null?o.maxSize:null),r=$?Math.min(r,$):r,n(Q)&&(Q=o.splitWords!=null?o.splitWords:!1);var R=j.zdf&&j.zdf.retina,N=this;this.mouseChildren=!1,this.paddingV=P,this.paddingH=D,j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?u=="start"?u="right":u=="end"&&(u="left"):u=="start"?u="left":u=="end"&&(u="right");var se=[];se[0]=h?"italic":"normal",se[1]=g?"small-caps":"normal",se[2]=C?"bold":"normal",se[3]=r+"px",se[4]=i;var ie=se.join(" ");e=String(e);var q,z=!1,ce=k,Ie=Z;if(n(x)&&n(E)){var K=new Fe.Shape;N.hitArea=K}else ce&&(ce=ce-D*2),Ie&&(Ie=Ie-P*2);function xe(te){var Oe=new Fe.Text(te,ie,l);return Oe.lineWidth=ce,Oe.lineHeight=y,Oe}q=xe(e);function J(te,Oe,Re){var Xe=Math.ceil(ce/Oe*Re.length),Qe=Re.substr(0,Xe),it=xe(Qe),Be=it.getMeasuredWidth();if(Be>ce)for(;Be>ce;)Xe--,Qe=Re.substr(0,Xe),it=xe(Qe),Be=it.getMeasuredWidth();else if(Be<ce){for(;Be<ce;)Xe++,Qe=Re.substr(0,Xe),it=xe(Qe),Be=it.getMeasuredWidth();Xe--,Qe=Re.substr(0,Xe)}var Ke=Re.substr(Xe,Re.length);return{endIndex:Xe,start:Qe,end:Ke}}if(Q&&ce>r*1.2)for(var fe=q.getMetrics(),U=0;fe.width>ce&&U<1e3;)U++,t.loop(fe.lines,function(te,Oe){te=te.replace(/^[\s\t]+/,"");var Re=xe(te),Xe=Re.getMeasuredWidth();if(Xe>ce){var Qe=J(Re,Xe,te);return fe.lines[Oe]=Qe.start,fe.lines.length>Oe+1?(Qe.end.trim(),fe.lines[Oe+1]=Qe.end+" "+fe.lines[Oe+1]):fe.lines.push(Qe.end),q=xe(fe.lines.join(" ")),fe=q.getMetrics(),!1}});if(this.label=q,q.textAlign=u,q.textBaseline="alphabetic",w>0){var ue=this.outlineLabel=q.clone();ue.color=I,ue.outline=w}s!=-1&&f>0&&(q.shadow=new Fe.Shadow(s,3,3,f)),this.addChild(q);function ke(){N.removeChild(N.background),N.background=new t.Rectangle(N.getBounds().width+D*2,N.getBounds().height+P*2,E,A,p,T,B,null,null,!1),t.center(N.background,N,0),N.setBounds(N.background.x,N.background.y,N.background.width,N.background.height)}function ne(){var te=q.getBounds(),Oe=te.y,Re=te.height;if(ce&&!Ie){var Xe=te.x,Qe=ce;u=="right"?Xe=te.x-ce+te.width:u=="center"&&(Xe=-ce/2),q.setBounds(Xe,Oe,Qe,Re),te=q.getBounds()}var it;v=="baseline"?it=te.y:v=="top"?(q.y=r-r/6,it=0):v=="center"||v=="middle"?(it=-te.height/2,q.y=r*.3):it=-te.height,N.setBounds(te.x,it,o.width?o.width-F*2:te.width,o.height?o.height-F*2:te.height),N.hitArea&&N.hitArea.graphics.c().f("black").r(N.getBounds().x,N.getBounds().y,N.getBounds().width,N.getBounds().height),(v=="center"||v=="middle")&&(t.pos(q,null,0),t.mov(q,0,1)),Z||(x?z&&ee():n(E)||ke()),v!="baseline"&&!R&&(q.y+=r/32),le()}if(ne(),!n(x)){if(x.type=="Pattern"){if(N.backing=new t.Container(N.width+D*2,N.height+P*2,null,null,!1).centerReg(null,null,!1),s!=-1&&f>0){var ve=new t.Rectangle(N.width+D*2-2,N.height+P-2,"#666",null,null,T,null,null,null,!1).center(N.backing);ve.shadow=new Fe.Shadow(s,3,3,f)}var we=new t.Rectangle(N.width+D*2,N.height+P*2,E,null,null,T,null,null,null,!1).addTo(N.backing);x.centerReg(we),x.setMask(we),N.backing.pattern=x}else N.backing=x;N.backing.center(N,0),x=N.backing,ee(),z=!0}function ee(){var te=x.boundsToGlobal(),Oe=N.boundsToGlobal(te,!0);N.setBounds(Oe.x,Oe.y,Oe.width,Oe.height)}function le(){t.pos(q,u=="left"||u=="right"?x||N.background?D:0:null,v=="top"||v=="baseline"||v=="bottom"?x||N.background?P:0:null,u=="right",v=="bottom"),q.x+=Y,q.y+=_}le();function ye(){ue&&(ue.x=q.x,ue.y=q.y,N.addChildAt(ue,N.background||N.backing?1:0))}ye(),Object.defineProperty(N,"text",{get:function(){var te=q.text==" "&&m?"":q.text;return te},set:function(te){m=!1,te===""&&(te=" ",m=!0),q.text=String(te),q.setBounds(null),N.setBounds(null),ne(),ue&&(ue.text=String(te)),!n(k)&&!n(Z)&&(Ce(),ue&&ye())}}),Object.defineProperty(N,"size",{get:function(){return r},set:function(te){r=$?Math.min(te,$):te,se[3]=r+"px",this.label.font=se.join(" "),ue&&(ue.font=se.join(" ")),q.setBounds(null),N.setBounds(null),ne(),ye()}}),Object.defineProperty(N,"bold",{get:function(){return!!this.label.font.match("bold")},set:function(te){C=te,se[2]=te?"bold":"normal",this.label.font=se.join(" "),ue&&(ue.font=se.join(" "))}}),Object.defineProperty(N,"italic",{get:function(){return!!this.label.font.match("italic")},set:function(te){h=te,se[0]=te?"italic":"normal",this.label.font=se.join(" "),ue&&(ue.font=se.join(" "))}}),Object.defineProperty(N,"variant",{get:function(){return!!this.label.font.match("small-caps")},set:function(te){g=te,se[1]=te?"small-caps":"normal",this.label.font=se.join(" "),ue&&(ue.font=se.join(" "))}}),Object.defineProperty(N,"font",{get:function(){return se[4]},set:function(te){n(te)||(i=te,se[4]=te,this.label.font=se.join(" "),ue&&(ue.font=se.join(" ")))}}),Object.defineProperty(N,"align",{get:function(){return u},set:function(te){n(te)||(u=te,this.label.textAlign=u,ue&&(ue.textAlign=u),ne(),ye())}}),Object.defineProperty(N,"valign",{get:function(){return v},set:function(te){n(te)||(v=te,ne(),ye())}}),Object.defineProperty(N,"color",{get:function(){return l},set:function(te){a==l&&(a=te),l=te,q.color=l,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update()}}),Object.defineProperty(N,"colorOnly",{get:function(){return l},set:function(te){l=te,q.color=l,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update()}});var oe,Me;this.setColorRange=function(te,Oe){return n(Oe)?(oe=N.color,Me=te):n(te)?(oe=N.color,Me=Oe):(oe=te,Me=Oe),N};var ae=0;Object.defineProperty(N,"colorRange",{get:function(){return ae},set:function(te){ae=te,!n(oe)&&!n(Me)&&(N.color=t.colorRange(oe,Me,te))}}),Object.defineProperty(N,"backgroundColor",{get:function(){return E},set:function(te){E=te,N.background?N.background.color=te:N.backing?N.backing.color=te:ke(),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update()}}),Object.defineProperty(N,"outlineColor",{get:function(){return I},set:function(te){I=te,ue&&(ue.color=I),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update()}}),Object.defineProperty(N,"rollColor",{get:function(){return a},set:function(te){!N.mouseoverEvent&&te&&Se(),te==null&&N.mouseoverEvent&&Le(),a=te}}),this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(te){Ot(N,te),q.color=l,N.mouseChildren=!1,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update()}}),this.showRollColor=function(te){return n(te)&&(te=!0),te?q.color=a:q.color=l,N.stage&&N.stage.update(),N};function Se(){N.mouseoverEvent=N.on("mouseover",function(){N.showRollColor&&N.showRollColor()}),N.mouseoutEvent=N.on("mouseout",function(){N.rollPersist||N.showRollColor(!1)}),N.pressupEvent=N.on("pressup",function(){N.rollPersist&&N.showRollColor(!1)})}function Le(){N.off("mouseover",N.mouseoverEvent),N.off("mouseout",N.mouseoutEvent),N.off("pressup",N.pressupEvent)}a&&Se(),Object.defineProperty(N,"labelWidth",{get:function(){return k},set:function(te){te>0&&(k=te,ce=k,(!n(x)||!n(E))&&ce&&(ce=ce-D*2),N.label.lineWidth=ce,ue&&(ue.lineWidth=ce),q.setBounds(null),N.setBounds(null),ne(),Z&&Ce(),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update())}}),Object.defineProperty(N,"labelHeight",{get:function(){return Z},set:function(te){te>0&&(Z=te,Ie=Z,(!n(x)||!n(E))&&Ie&&(Ie=Ie-P*2),k&&Ce(),N.setBounds(null),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&N.stage&&N.stage.update())}}),!n(k)&&!n(Z)&&Ce();function Ce(){N.size=$||200;for(var te=0;y<Ie/2&&(N.height>Ie||N.width>ce)&&(te++,N.size=N.size/2,!(te>50)););for(te=0;N.height<=Ie&&N.width<=ce&&(te++,N.size=Math.ceil(N.size+1),!(te>50)););N.size=N.size-1,ye(),q.setBounds(null);var Oe=q.getBounds(),Re=Oe.y,Xe=Oe.height;Ie&&(v=="bottom"?Re=Re-Ie+Xe:(v=="center"||v=="middle")&&(Re=(Re+Re-Ie+Xe)/2),Xe=Ie),q.setBounds(Oe.x,Re,Oe.width,Xe),N.setBounds(null),Oe=N.getBounds(),N.setBounds(Oe.x,Oe.y,Oe.width,Oe.height),x?z&&ee():n(E)||ke()}t.styleTransforms(this,o),this.clone=function(te){return N.cloneProps(new t.Label(te||!t.isPick(S[0])?N.text:S[0],te||!t.isPick(S[1])?r:S[1],te||!t.isPick(S[2])?i:S[2],te||!t.isPick(S[3])?l:S[3],a,s,f,u,v,te||!t.isPick(S[4])?C:S[4],te||!t.isPick(S[5])?h:S[5],g,k,y,n(x)?null:x.clone(te),I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,this.group,L))}},t.extend(t.Label,t.Container,"clone","zimContainer"),t.LabelOnPath=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",y;if(y=at(t.LabelOnPath,arguments,k,this))return y;De("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=h;var x=C===!1?{}:t.getStyle(this.type,this.group,g);n(e)&&(e=x.label!=null?x.label:new t.Label("Label on Path")),n(r)&&(r=x.path!=null?x.path:new t.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),n(i)&&(i=x.percentAngle!=null?x.percentAngle:100),n(l)&&(l=x.percents!=null?x.percents:null),n(a)&&(a=x.showPath!=null?x.showPath:!0),n(s)&&(s=x.allowToggle!=null?x.allowToggle:!0),n(f)&&(f=x.interactive!=null?x.interactive:!0),n(u)&&(u=x.onTop!=null?x.onTop:!1),n(v)&&(v=x.rtl!=null?x.rtl:j.DIR=="rtl"||t.DIR=="rtl"),v&&r.reversePoints();var I=e.color;r.addTo(this);var w=this;this.path=r,this.allowToggle=s,r.interactive=f,typeof e=="string"&&(e=new t.Label(e));var E=r.alpha;a||r.alp(0),r.onTop=u;var A=this.letters=new t.Container().addTo(this);if(!l){l=[];for(var p=0;p<e.text.length;p++)l.push(t.decimals(1/(e.text.length-(r.type=="Blob"?0:1))*100*p))}this.percents=l;function T(){var F;for(F=A.numChildren-1;F>=0;F--)A.getChildAt(F).dispose();for(w.numLetters=e.text.length,F=0;F<w.numLetters;F++){var D=e.clone();D.text=e.text[F],D.centerReg(A).reg(null,D.height),D.text!=""&&D.text!=" "&&D.expand(0),w.allowToggle&&D.cur("pointer"),D.on("mousedown",function(){w.allowToggle&&w.toggle()})}w.resize()}this.resize=function(){for(var F=r.segmentRatios,D=r.segmentPoints,P=0;P<this.numLetters;P++){var Y=r.getCurvePoint(l[P]/100,F,D,!0);if(Y){var _=this.globalToLocal(Y.x,Y.y);_&&(A.getChildAt(P).loc(_).rot((Y.angle>180?Y.angle-360:Y.angle)*i/100),v&&(A.getChildAt(P).rotation+=180))}}return this},T(),this.showPath=function(F){return this.toggle(!0),r.toggle(F),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(w,"text",{get:function(){return e.text},set:function(F){e.text=F,l=[];for(var D=0;D<e.text.length;D++)l.push(t.decimals(1/(e.text.length-(r.type=="Blob"?0:1))*100*D));T()}}),Object.defineProperty(this,"color",{get:function(){return I},set:function(F){I=F;for(var D=0;D<w.letters.numChildren;D++)w.letters.getChildAt(D).color=I;w.stage&&w.stage.update()}}),Object.defineProperty(w,"interactive",{get:function(){return f},set:function(F){f=F,r.interactive=F,this.ticker&&t.Ticker.remove(this.ticker),f&&(this.ticker=t.Ticker.add(function(){w.resize()}))}}),this.interactive&&(this.ticker=t.Ticker.add(function(){w.resize()}));var B=w.toggled=a;this.toggle=function(F){if(this.allowToggle)return n(F)?B=!B:F?B=!0:B=!1,B?(r.alp(E),this.interactive&&(r.showControls(),A.mouseEnabled=!1,A.mouseChildren=!1,A.cur("default"),this.controlHideEvent&&r.off("controlshide",this.controlHideEvent),this.controlHideEvent=r.on("controlshide",function(){A.mouseEnabled=!0,A.mouseChildren=!0,A.cur("pointer"),E=r.alpha,r.alp(0),B=!1,w.toggled=B,w.stage&&w.stage.update()},null,!0))):(E=r.alpha,r.alp(0),A.mouseEnabled=!0,A.mouseChildren=!0,A.cur("pointer")),w.toggled=B,w.stage&&w.stage.update(),w},w.toggle(!0),t.styleTransforms(this,x),this.clone=function(){return w.cloneProps(new t.LabelOnPath(w.label.clone(),w.path.clone(),i,t.copy(l),a,s,f,u,v,C,this.group,g))},this.dispose=function(F,D,P){return this.ticker&&t.Ticker.remove(this.ticker),P||this.zimContainer_dispose(!0),!0}},t.extend(t.LabelOnPath,t.Container,["clone","dispose"],"zimContainer",!1),t.LabelOnArc=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E){var A="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",p;if(p=at(t.LabelOnArc,arguments,A,this))return p;De("54.55"),this.group=w;var T=I===!1?{}:t.getStyle("LabelOnArc",this.group,E);n(r)&&(r=T.size!=null?T.size:30),n(e)&&(e=T.label!=null?T.label:new t.Label("Label on Arc",r)),n(i)&&(i=T.font!=null?T.font:"verdana"),n(l)&&(l=T.color!=null?T.color:t.white),n(a)&&(a=T.radius!=null?T.radius:100),n(s)&&(s=T.flip!=null?T.flip:!1),n(f)&&(f=T.spacing!=null?T.spacing:0),n(u)&&(u=T.letterSpacing!=null?T.letterSpacing:5),n(v)&&(v=T.angles!=null?T.angles:null);var B=!n(v),F=t.copy(v);n(C)&&(C=T.showCircle!=null?T.showCircle:!1),n(h)&&(h=T.arcColor!=null?T.arcColor:null),n(g)&&(g=T.arcBorderColor!=null?T.arcBorderColor:null),n(k)&&(k=T.arcBorderWidth!=null?T.arcBorderWidth:null),n(y)&&(y=T.radiusSpread!=null?T.radiusSpread:!1),n(x)&&(x=T.rtl!=null?T.rtl:j.DIR=="rtl"||t.DIR=="rtl");var D=this.outerRadius=a+f+e.height;this.innerRadius=a+f,this.zimContainer_constructor(-D,-D,D*2,D*2,!1),this.type="LabelOnArc";var P=this;e.type!="Label"&&(e=new t.Label(e,r,i,l)),e.text;var Y,_,V,b,Z,$;function Q(){if(P.disposeAllChildren(),s){var L=e.text.split("").reverse().join("");e.text=L}Y=P.letters=new t.Container(P.width,P.height).centerReg(P),P.numLetters=e.text.length,P.letterHeight=e.height,_=P.labels=[];var c;for(c=0;c<P.numLetters;c++){var d=e.clone();_.push(d),d.text=e.text[c],d.letterHolder=new t.Container(d.width,d.height),d.centerReg(d.letterHolder).rot(s?180:0)}if(x&&_.reverse(),b=P.circle=new t.Circle(a),C&&b.addTo(P),V=P.arc=new t.Shape().addTo(P),re(),v){for(Z=0,c=0;c<v.length;c++)Z+=v[c];Z+=v[v.length-1]/2}G()}Q();function re(){Z=0,$=[0];for(var L=0;L<P.numLetters;L++){var c=_[L],d=Math.atan((c.width+u)/2/(a+f))*180/Math.PI*2;$.push(d),Z+=d,c.letterHolder.centerReg(Y).reg(null,a+f+c.height+(s?c.height*.13:0))}P.circle.radius=a,(h||g||k)&&(k>0&&n(g)?g=t.black:n(k)&&!n(g)&&(k=2),V.graphics.c().f(null).s(g).ss(k).arc(0,0,a,(P.startAngle-90)*Math.PI/180,(P.startAngle-90+Z)*Math.PI/180))}function G(){var L;if(!B)for(v=[],L=0;L<$.length-1;L++)v[L]=Math.round(($[L]+$[L+1])/2*100)/100;P.angles=v,P.startAngle=-Z/2;var c=P.startAngle;for(L=0;L<Y.numChildren;L++){var d=Y.getChildAt(L);c=d.rotation=c+v[L]}}Object.defineProperty(this,"radius",{get:function(){return a},set:function(L){a=L,re(),!B&&!y&&G()}}),Object.defineProperty(this,"color",{get:function(){return l},set:function(L){l=L;for(var c=0;c<P.labels.length;c++)P.labels[c].color=l;P.stage&&P.stage.update()}}),Object.defineProperty(P,"text",{get:function(){return e.text},set:function(L){e.text=L,F?v=t.copy(F):v=null,Q()}}),t.styleTransforms(this,T),this.clone=function(){return P.cloneProps(new t.LabelOnArc(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,this.group,E))}},t.extend(t.LabelOnArc,t.Container,"clone","zimContainer",!1),t.LabelLetters=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x){var I="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",w;if(w=at(t.LabelLetters,arguments,I,this))return w;De("54.57"),this.group=y;var E=k===!1?{}:t.getStyle("LabelLetters",this.group,x);n(e)&&(e=E.label!=null?E.label:new t.Label("Label Letters")),n(r)&&(r=E.align!=null?E.align:"center"),n(i)&&(i=E.valign!=null?E.valign:"center"),n(l)&&(l=E.letterSpacing!=null?E.letterSpacing:5),n(a)&&(a=E.letterSpacings!=null?E.letterSpacings:null),n(u)&&(u=E.lineHeight!=null?E.lineHeight:null),n(s)&&(s=E.lineSpacing!=null?E.lineSpacing:5),n(f)&&(f=E.lineSpacings!=null?E.lineSpacings:null),n(g)&&(g=E.rtl!=null?E.rtl:!1),n(v)&&(v=E.lineAlign!=null?E.lineAlign:g?"right":"left"),n(C)&&(C=E.lineValign!=null?E.lineValign:"bottom"),n(h)&&(h=E.cache!=null?E.cache:!1),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var A=this,p=A.letterData=[],T,B;e.type!="Label"?(B=F(e),p=B.data,e=new t.Label(B.text)):(B=F(e.text),p=B.data,e.text=B.text),A.text=B.original,A._color=e.color,j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?v=="start"?v="right":v=="end"&&(v="left"):v=="start"?v="left":v=="end"&&(v="right");function F(ue){var ke=[];function ne(Me){return Me.split("").reverse().join("")}if(g){Ie=-1,ue=ue.replace(/[\u0591-\u07FF]+/ig,ne),ue=ue.replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/ig,"$1-!!-$2"),ue=ue.replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/ig,"$1-!!-$2"),ue=ue.replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/ig,"$1-!!- -!!-$2"),ue=ue.replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/ig,"$1-!!- -!!-$2");var ve=ue.split(/-!!-/g);t.loop(ve,function(Me,ae){Me.match(/[\u0591-\u07FF]/i)&&(ve[ae]=Me.split(" ").reverse().join(" "))}),ue=ve.join("")}ue=ue.replace(/\n|\r/g,"<br>"),ue=ue.replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>"),ue=ue.replace(/<\/strong>/gi,"</b>"),ue=ue.replace(/<em>|<em \/>|<em\/>/gi,"<i>"),ue=ue.replace(/<\/em>/gi,"</i>"),ue=ue.replace(/\\n|\\r/g,"<br>"),ue=ue.replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>"),ue=ue.replace(/<b/gi,"<b"),ue=ue.replace(/<i/gi,"<i"),ue=ue.replace(/<u/gi,"<u"),ue=ue.replace(/<br/gi,"<br"),ue=ue.replace(/<a/gi,"<a"),ue=ue.replace(/<font/gi,"<font");var we=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],ee=["b","a","i","u","font"],le;t.loop(ee,function(Me,ae){le=ue.replace(we[ae*2],"");var Se;Me=="font"?Se=le.split("<font "):Me=="a"?Se=le.split("<a "):Se=le.split("<"+Me+">"),oe(Se,Me,0),le=ue.replace(we[ae*2+1],""),Se=le.split("</"+Me+">"),oe(Se,Me,1)}),le=ue.replace(/<br>/gi,"@^#"),le=le.replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"");var ye=le.split("@^#");T=ye.join(`
`),le=ye.join(""),oe(ye,"br",0);function oe(Me,ae,Se){if(Me.length>1)if((ae=="font"||ae=="a")&&Se==0){var Le=Me[0].length;t.loop(Me,function(te,Oe){if(Oe!=0){var Re=ke[Le];Re||(ke[Le]=[]),Re=ke[Le];var Xe=te.split(">");Re[Se]?Re[Se].push(ae+" "+Xe[0]):Re[Se]=[ae+" "+Xe[0]],Le+=Xe[1].length}})}else{Me.pop();var Ce=0;t.loop(Me,function(te){Ce+=te.length;var Oe=ke[Ce];Oe||(ke[Ce]=[]),Oe=ke[Ce],Oe[Se]?Oe[Se].push(ae):Oe[Se]=[ae]})}}return{text:le,data:ke,original:T}}A.numLetters=e.text.length;var D=!n(a);a&&!Array.isArray(a)&&(a=null);var P;if(a)for(P=0;P<A.numLetters;P++)n(a[P])&&(a[P]=l);else for(a=[],P=0;P<A.numLetters;P++)a.push(l);if(A.letterSpacings=a,f&&!Array.isArray(f)&&(f=null),f)for(P=0;P<A.numLetters-1;P++)n(f[P])&&(f[P]=s);else for(f=[],P=0;P<A.numLetters-1;P++)f.push(s);A.lineSpacings=f,A.labels=[],A.lines=[[]];var Y=[],_=[],V=[0],b=0,Z=0,$=0,Q=0,re=0,G=p,L=!1,c=!1,d=!1,o=!1,S=!1,X=!1,m=!1,O=!1,de=!1,R=!1,N=!1,se=!1;for(A.rolls=[[]],P=0;P<A.numLetters;P++){o=!1,G[P]&&(G[P][1]&&(G[P][1].indexOf("b")>=0&&(L=!1),G[P][1].indexOf("i")>=0&&(c=!1),G[P][1].indexOf("u")>=0&&(d=!1),t.loop(G[P][1],function(ue){if(ue.match(/^font/i)){S=!1,N=!1,se&&A.rolls.push([]),se=!1,X=!1,O=!1,m=!1;return}if(ue.match(/^a/i)){de=!1,R=!1;return}})),G[P][0]&&(G[P][0].indexOf("b")>=0&&(L=!0),G[P][0].indexOf("i")>=0&&(c=!0),G[P][0].indexOf("u")>=0&&(d=!0),o=0,t.loop(G[P][0],function(ue){ue=="br"&&o++}),t.loop(G[P][0],function(ue){var ke,ne;if(ue.match(/^font/i)){ke=ue.match(/ color\s?=\s?(\S*)/i),ke&&(S=ke[1],ne=t.colors.indexOf(S),ne>=0&&(S=t.colorsHex[ne]),S=S.replace(/'/g,"")),ke=ue.match(/size\s?=\s?(\S*)/i),ke&&(X=ke[1]),ke=ue.match(/backgroundColor\s?=\s?(\S*)/i),ke&&(N=ke[1],ne=t.colors.indexOf(N),ne>=0&&(N=t.colorsHex[ne]),N=N.replace(/'/g,"")),ke=ue.match(/rollBackgroundColor\s?=\s?(\S*)/i),ke&&(se=ke[1],ne=t.colors.indexOf(se),ne>=0&&(se=t.colorsHex[ne]),se=se.replace(/'/g,"")),ke=ue.match(/group\s?=\s?(\S*)/i),ke&&(m=ke[1]),ke=ue.match(/family\s?=\s?(.*)/i),ke&&(O=ke[1],O=O.split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]);return}if(ue.match(/^a/i)){ke=ue.match(/href\s?=\s?(\S*)/i),ke&&(de=ke[1]),ke=ue.match(/target\s?=\s?(\S*)/i),ke&&(R=ke[1]);return}})));var ie;m?ie=new t.Label({text:e.text[P],group:m}):(ie=e.clone(),ie.text=e.text[P]),A.labels.push(ie),L&&(ie.bold=!0),c&&(ie.italic=!0),S&&(ie.color=S),N&&(ie.backgroundColor=N);var q=D||n(ie.backgroundColor)?a[P]:-.5;se&&(ie.rollIndex=A.rolls.length-1,ie.zrbc=se,ie.zobc=ie.backgroundColor,A.rolls[ie.rollIndex].push(ie),ie.expand(0),ie.on("mouseover",z),ie.on("mouseout",ce)),de&&(ie.expand(q,0),ie.zurl=de,ie.ztar=R,ie.cur(),ie.on("click",function(ue){var ke=ue.currentTarget;ce(ue),ke.ztar||(ke.ztar="_self"),nr(ke.zurl,ke.ztar)})),X&&(ie.size=X),O&&(ie.font=O),o&&(b+=(n(u)?$:u)+f[Q],V.push(b),_.push(n(u)?$:u),Y.push(Z),re=Math.max(re,Z)),o&&(o>1&&t.loop(o-1,function(){A.lines.push([]),b+=(n(u)?$:u)+f[Q],V.push(b),_.push(n(u)?$:u),Y.push(0),Q++}),$=0,Z=0,A.lines.push([]),Q++),Z+=ie.width+q,$=Math.max($,ie.height),P==A.numLetters-1&&(Y.push(Z),_.push($),re=Math.max(re,Z)),A.lines[Q].push(ie),d&&(ie.underline=new t.Line(ie.width+q+1,1,ie.color).center(ie,this).mov(0,ie.height/2))}function z(ue){var ke=ue.currentTarget,ne=A.rolls[ke.rollIndex];t.loop(ne,function(ve){ve.backgroundColor=ke.zrbc}),ke.stage&&ke.stage.update()}function ce(ue){var ke=ue.currentTarget,ne=A.rolls[ke.rollIndex];t.loop(ne,function(ve){ve.backgroundColor=ke.zobc}),ke.stage&&ke.stage.update()}for(var Ie=0,K=0;K<A.lines.length;K++){var xe=A.lines[K];Z=Y[K],$=_[K],b=V[K];var J,fe;for(v=="left"?J=0:v=="right"?J=re-Z:J=(re-Z)/2,fe=b,P=0;P<xe.length;P++){Ie++,h&&ie.cache(),ie=xe[P],ie.regX=r=="left"?0:r=="right"?ie.width:ie.width/2,ie.regY=i=="top"?0:i=="bottom"?ie.height:ie.height/2;var U=fe+(i=="top"?0:i=="bottom"?ie.height:ie.height/2);C=="center"||C=="middle"?U+=(_[K]-ie.height)/2:C=="bottom"&&(U+=_[K]-ie.height),q=D||n(ie.backgroundColor)?a[Ie-1]:-.5,r=="left"?(ie.loc(J,U,this),J=ie.x+ie.width+q):r=="right"?(ie.loc(J+ie.width,U,this),J=ie.x+q):(ie.loc(J+ie.width/2,U,this),J=ie.x+ie.width/2+q)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(ue){this._color=ue;for(var ke=0;ke<A.numChildren;ke++)A.getChildAt(ke).color=this._color;A.stage&&A.stage.update()}}),this.dispose=function(){t.gD(this),t.loop(A.labels,function(ue){ue.removeFrom(),ue.dispose()}),A.removeFrom()},t.styleTransforms(this,E),this.clone=function(){return A.cloneProps(new t.LabelLetters(e,r,i,l,a,s,f,u,v,C,h,g,k,this.group,x))}},t.extend(t.LabelLetters,t.Container,"clone","zimContainer",!1),t.Emoji=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w){var E="code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",A;if(A=at(t.Emoji,arguments,E,this))return A;De("54.58"),this.group=I;var p=x===!1?{}:t.getStyle("Emoji",this.group,w);n(e)&&(e=p.code!=null?p.code:"\u{1F642}"),n(r)&&(r=p.size!=null?p.size:30),n(i)&&(i=p.monochrome!=null?p.monochrome:!1),n(l)&&(l=p.italic!=null?p.italic:!1),(n(a)||a=="ignore")&&(a=p.backgroundColor!=null&&a!="ignore"?p.backgroundColor:null),n(s)&&(s=p.backgroundBorderColor!=null&&s!="ignore"?p.backgroundBorderColor:null),n(f)&&(f=p.backgroundBorderWidth!=null&&f!="ignore"?p.backgroundBorderWidth:null),(n(C)||C=="ignore")&&(C=p.padding!=null&&C!="ignore"?p.padding:10),n(h)&&(h=p.paddingH!=null?p.paddingH:C),n(g)&&(g=p.paddingV!=null?p.paddingV:C),n(k)&&(k=p.shiftH!=null?p.shiftH:0),n(y)&&(y=p.shiftV!=null?p.shiftV:0);var T=B(e,r);this.veeObj={code:T[0],size:T[1]};function B(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),e.substring(0,2)=="U+"&&(e=t.unicodeToUTF(e)),this.zimLabel_constructor(e,r,null,null,null,null,null,null,null,null,l,null,null,null,v,null,null,a,null,null,u,null,C,h,g,k,y),this.type="Emoji",this.code=e,this.size=r;var F=this,D=this.getBounds(),P=5,Y=3;this.bounds=this.setBounds(D.x+Y,D.y-P+1,D.width-Y*2,D.height+P),i&&(this.saturation=-100);var _=i;Object.defineProperty(F,"monochrome",{get:function(){return _},set:function(V){V!=_&&(_=V,V&&(this.saturation=V?-100:0))}}),this.cache=function(V,b,Z,$){return n(V)?(b=this.getBounds(),this.zimLabel_cache(b.x-20,b.y-20,b.width+40,b.height+40)):this.zimLabel_cache(V,b,Z,$),F.z_bc=F.canvas=F.cacheCanvas,this},t.styleTransforms(this,p),this.clone=function(V){return F.cloneProps(new t.Emoji(V||!t.isPick(T[0])?e:T[0],V||!t.isPick(T[1])?F.size:T[1],i,l,a,s,f,u,v,C,h,g,k,y,x,F.group,w))}},t.extend(t.Emoji,t.Label,["clone","cache"],"zimLabel",!1),t.Button=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U,ue,ke,ne,ve,we,ee,le,ye,oe,Me,ae,Se){var Le="width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",Ce;if(Ce=at(t.Button,arguments,Le,this))return Ce;De("55"),this.group=ae;var te=Me===!1?{}:t.getStyle("Button",ae,Se);n(e)&&(e=te.width!=null?te.width:200),n(r)&&(r=te.height!=null?te.height:60),n(j.M)&&(j.M=t.mobile());var Oe=f,Re=u,Xe=v;n(f)&&(f=te.color!=null?te.color:t.white),n(u)&&(u=te.rollColor!=null?te.rollColor:t.white),n(Q)&&(Q=te.autoPadding!=null?te.autoPadding:20),n(re)&&(re=te.autoPaddingH!=null?te.autoPaddingH:Q),n(G)&&(G=te.autoPaddingV!=null?te.autoPaddingV:Q),n(Y)&&(Y=te.align!=null?te.align:"center"),n(_)&&(_=te.valign!=null?te.valign:"center"),n(i)&&(n(w)?i=te.label!=null?te.label:"PRESS":i=""),typeof i=="string"||typeof i=="number"?i=new t.Label({text:i,size:te.size!=null?te.size:36,font:te.font!=null?te.font:"arial",color:te.color!=null&&Oe==null?te.color:f,rollColor:te.rollColor&&Re==null!=null?te.rollColor:u,align:Y,valign:_,rollPersist:te.rollPersist!=null?te.rollPersist:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:te.shiftV!=null?te.shiftV:0,shiftH:te.shiftH!=null?te.shiftH:0,style:!1,group:this.group}):(n(Oe)||(i.color=Oe),f=i.color,(n(i.rollColor)||!n(Re))&&(i.rollColor=u),u=i.rollColor),n(v)&&(v=te.downColor!=null?te.downColor:u),e=="auto"&&(e=i.width+re*2),r=="auto"&&(r=i.height+G*2),this.zimContainer_constructor(e,r,null,null,!1),this.type="Button",n(l)&&(l=te.backgroundColor!=null?te.backgroundColor:t.purple),n(a)&&(a=te.rollBackgroundColor!=null?te.rollBackgroundColor:l.lighten(.2)),n(s)&&(s=te.downBackgroundColor!=null?te.downBackgroundColor:a);var Qe=it(l,a,s,f,u,v);this.veeObj={backgroundColor:Qe[0],rollBackgroundColor:Qe[1],downBackgroundColor:Qe[2],color:Qe[3],rollColor:Qe[4],downColor:Qe[5]};function it(){return arguments}l=et(l),a=et(a),s=et(s),f=et(f),u=et(u),v=et(v);var Be=C,Ke=h;n(C)&&(C=te.borderColor!=null?te.borderColor:null),n(h)&&(h=te.borderWidth!=null?te.borderWidth:null),C<0||h<0?C=h=null:C!=null&&h==null&&(h=1),n(g)&&(g=te.rollBorderColor!=null?te.rollBorderColor:C),n(k)&&(k=te.downBorderColor!=null?te.downBorderColor:g),n(p)&&(p=te.corner!=null?te.corner:10),n(B)&&(B=te.shadowColor!=null?te.shadowColor:"rgba(0,0,0,.3)"),n(F)&&(F=te.shadowBlur!=null?te.shadowBlur:14),n($)&&($=te.hitPadding!=null?te.hitPadding:0),n(V)&&(V=te.indent!=null?te.indent:10),n(b)&&(b=te.indentH!=null?te.indentH:V),n(Z)&&(Z=te.indentV!=null?te.indentV:V),n(D)&&(D=te.gradient!=null?te.gradient:0),n(P)&&(P=te.gloss!=null?te.gloss:0);var He=(!n(c)||!n(de)||!n(R)||!n(N)||!n(se)||!n(ie)||!n(q))&&n(ce)&&n(ke)&&n(ne);He&&n(z)&&(z=j.M?"mousedown":"click"),n(L)&&(L=te.rollPersist!=null?te.rollPersist:!1),this.rollPersist=L,n(T)&&(T=te.dashed!=null?te.dashed:!1),!n(c)&&c.type=="Label"&&ht&&je("Button() - do not pass Label to toggle parameter - just pass a String"),n(d)&&(d=te.toggleBackgroundColor!=null?te.toggleBackgroundColor:l),n(o)&&(o=te.rollToggleBackgroundColor!=null?te.rollToggleBackgroundColor:a),n(S)&&(S=te.downToggleBackgroundColor!=null?te.downToggleBackgroundColor:o),n(X)&&(X=te.toggleColor!=null?te.toggleColor:i.color),n(m)&&(m=te.rollToggleColor!=null?te.rollToggleColor:i.rollColor),n(O)&&(O=te.downToggleColor!=null?te.downToggleColor:i.rollToggleColor),n(K)&&(K=te.waitBackgroundColor!=null?te.waitBackgroundColor:l),n(xe)&&(xe=te.rollWaitBackgroundColor!=null?te.rollWaitBackgroundColor:a),n(J)&&(J=te.downWaitBackgroundColor!=null?te.downWaitBackgroundColor:a),n(fe)&&(fe=te.waitColor!=null?te.waitColor:i.color),n(U)&&(U=te.rollWaitColor!=null?te.rollWaitColor:i.rollColor),n(ue)&&(ue=te.downWaitColor!=null?te.downWaitColor:U);var he=this;this.mouseChildren=!1,this.cur("pointer"),he.focus=!1,he.rolled=!1;var me=mt(Ie);n(y)&&(y=te.backing!=null?te.backing.clone():null),n(y)?he.backing=new t.Rectangle(e,r,l,null,null,p,T,null,null,!1).centerReg(null,null,!1):he.backing=y,he.rollBacking=n(x)?te.rollBacking!=null?te.rollBacking.clone():null:x,he.downBacking=n(I)?te.downBacking!=null?te.downBacking.clone():null:I,he.waitBacking=n(ke)?te.waitBacking!=null?te.waitBacking.clone():null:ke,he.rollWaitBacking=n(ne)?te.rollWaitBacking!=null?te.rollWaitBacking.clone():null:ne,he.downWaitBacking=n(ve)?te.downWaitBacking!=null?te.downWaitBacking.clone():null:ve,he.toggleBacking=n(de)?te.toggleBacking!=null?te.toggleBacking.clone():null:de,he.rollToggleBacking=n(R)?te.rollToggleBacking!=null?te.rollToggleBacking.clone():null:R,he.downToggleBacking=n(N)?te.downToggleBacking!=null?te.downToggleBacking.clone():null:N;var Te=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],ze,st,Ye;for(Ye=0;Ye<Te.length;Ye++)ze=Te[Ye],st=he[ze],st&&(st.type=="Pattern"?st=nt(ze,st):B!=-1&&F>0&&(st.shadow=new Fe.Shadow(B,3,3,F)),st.x=e/2,st.y=r/2);he.addChild(he.backing),h&&(he.border=new t.Rectangle(e,r,"rgba(0,0,0,0)",C,h,p,T,null,null,!1),he.addChild(he.border));function nt(vt,bt){if(he[vt]=new t.Container(e,r,null,null,!1).centerReg(null,null,!1),B!=-1&&F>0){var Vt=new t.Rectangle(e-2,r-2,"#666",null,null,p,null,null,null,!1).center(he[vt]);Vt.shadow=new Fe.Shadow(B,3,3,F)}var qt=he[vt].mask=new t.Rectangle(e,r,vt.indexOf("roll")>=0?a:l,null,null,p,null,null,null,!1).addTo(he[vt]);return bt.centerReg(qt),bt.setMask(qt.shape),he[vt].pattern=bt,he[vt]}he.icon=n(w)?te.icon!=null?te.icon.clone():null:w,he.rollIcon=n(E)?te.rollIcon!=null?te.rollIcon.clone():null:E,he.downIcon=n(A)?te.downIcon!=null?te.downIcon.clone():null:A,he.waitIcon=n(we)?te.waitIcon!=null?te.waitIcon.clone():null:we,he.rollWaitIcon=n(ee)?te.rollWaitIcon!=null?te.rollWaitIcon.clone():null:ee,he.downWaitIcon=n(le)?te.downWaitIcon!=null?te.downWaitIcon.clone():null:le,he.toggleIcon=n(se)?te.toggleIcon!=null?te.toggleIcon.clone():null:se,he.rollToggleIcon=n(ie)?te.rollToggleIcon!=null?te.rollToggleIcon.clone():null:ie,he.downToggleIcon=n(q)?te.downToggleIcon!=null?te.downToggleIcon.clone():null:q;var pe=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(Ye=0;Ye<pe.length;Ye++){var Je=pe[Ye],be=he[Je];be&&(be.x=e/2,be.y=r/2)}if(he.icon&&he.addChild(he.icon),Array.isArray(p)||(p=[p,p,p,p]),D>0){var Ee=new Fe.Shape;Ee.graphics.lf(["rgba(255,255,255,"+D+")","rgba(0,0,0,"+D+")"],[0,1],0,0,0,r-h),Ee.graphics.rc(h/2,h/2,e-h,r-h,p[0],p[1],p[2],p[3]),this.addChild(Ee)}if(P>0){var _e=new Fe.Shape;_e.graphics.f("rgba(255,255,255,"+P+")"),_e.graphics.rc(h/2,h/2,e-h,(r-h)/2,p[0],p[1],0,0),_e.graphics.f("rgba(0,0,0,"+P+")"),_e.graphics.rc(h/2,r/2,e-h,(r-h)/2,0,0,p[2],p[3]),this.addChild(_e)}var Ge,Ue;$>0&&tt();function tt(){Ue=new Fe.Shape,Ue.graphics.f("#000").r(-$,-$,e+$*2,r+$*2),he.hitArea=Ge=Ue}this.addChild(i),i.center(this),i.y+=1,this.label=i,t.pos(i,Y=="left"||Y=="right"?b:null,_=="top"||_=="bottom"?Z:null,Y=="right",_=="bottom");var Ae=i.color;if(this.toggled=!1,He){var Ze=i.text,lt=i.color,Ve=i.rollColor;this.on(z,function(){he.toggled=!he.toggled,ft()})}function ft(){he.toggled?(n(c)||(he.label.text=c===!0?Ze:c),n(X)||(he.label.colorOnly=Ae=X),n(m)||(he.label.rollColor=m),he.rolled?(he.rollToggleBacking?Et("rollToggleBacking"):he.toggleBacking&&Et("toggleBacking"),he.rollToggleIcon?Et("rollToggleIcon"):he.toggleIcon&&Et("toggleIcon"),n(y)&&n(he.rollToggleBacking)&&(he.backing.color=o)):(he.toggleBacking&&Et("toggleBacking"),he.toggleIcon&&Et("toggleIcon"),n(y)&&(he.backing.color=d))):(he.label.colorOnly=Ae=lt,he.label.rollColor=Ve,he.rolled&&he.label.showRollColor(!0),he.label.text=Ze,ot()),he.stage&&he.stage.update()}function ot(){he.pressed?(n(y)&&he.backing&&!he.downBacking&&(he.backing.color=s),he.downBacking?Et("downBacking"):he.rollBacking?Et("rollBacking"):he.backing&&Et("backing"),he.downIcon?Et("downIcon"):he.rollIcon?Et("rollIcon"):he.icon?Et("icon"):Et("icon",null)):he.rolled?(n(y)&&he.backing&&!he.rollBacking&&(he.backing.color=a),he.rollBacking?Et("rollBacking"):he.backing&&Et("backing"),he.rollIcon?Et("rollIcon"):he.icon?Et("icon"):Et("icon",null)):(n(y)&&he.backing&&(he.backing.color=l),he.backing&&Et("backing"),he.icon,Et("icon"))}this.toggle=function(vt){return He?(n(vt)?he.toggled=!he.toggled:he.toggled=vt,ft(),he):(ht&&je("Button() - can't toggle with wait parameters provided"),he)};var ut=!1;he.waiting=!1;var $e=!1,Pt,yt,wt=he.label.color,Ft=he.label.rollColor,_t,Jt,nn=this.on("mousedown",function(){ut=!0,Zt()});function Zt(){(!n(ce)||!n(ke)||!n(ne))&&!he.waiting&&($e=!0,n(oe)&&(oe=!0),ye&&(Jt=he.stage.on("stagemousedown",function(vt){he.hitTestPoint(vt.stageX/t.scaX,vt.stageY/t.scaY)||he.clearWait()},null,!0)),setTimeout(function(){he.waiting=!0},50),yt=i.text,n(fe)||(he.label.colorOnly=Ae=fe),n(U)||(he.label.rollColor=U),_t=he.enabled,!oe&&he.enabled&&(he.enabled=!1),n(ce)||(he.label.text=ce),he.rolled?(n(y)&&!he.rollWaitBacking&&(he.backing.color=xe),he.rollWaitBacking?Et("rollWaitBacking"):he.waitBacking&&Et("waitBacking"),he.rollWaitIcon?Et("rollWaitIcon"):he.waitIcon&&Et("waitIcon")):(n(y)&&!he.waitBacking&&(he.backing.color=K),he.waitBacking&&Et("waitBacking"),he.waitIcon&&Et("waitIcon")),n(Ie)&&(Ie=me=="s"?5:5e3),Pt&&Pt.clear(),Pt=t.timeout(Ie,function(){he.enabled||(he.enabled=_t),he.clearWait(),he.dispatchEvent("waited")}),he.stage&&he.stage.update())}this.wait=Zt,this.clearWait=function(){return Pt&&(Jt&&he.stage.off("stagemousedown",Jt),Pt.clear(),he.label.text=yt,ot(),he.label.colorOnly=Ae=wt,he.label.rollColor=Ft,setTimeout(function(){he.waiting=!1},55),$e=!1,he.stage&&he.stage.update()),he},this.removeWait=function(){return he.clearWait(),ce=null,he.waitBacking=null,he.rollWaitBacking=null,he.off("mousedown",nn),he};function Et(vt,bt){var Vt;if(vt.indexOf("con")>=0){for(Vt=0;Vt<pe.length;Vt++){var qt=pe[Vt],jt=he[qt];he.removeChild(jt)}he[vt]&&he.addChildAt(he[vt],1)}else{if(!he[vt]&&!bt)return;for(Vt=0;Vt<Te.length;Vt++){var Gt=Te[Vt],pn=he[Gt];he.removeChild(pn)}he[vt]&&he.addChildAt(he[vt],0)}}var Ut=!1;this.on("mouseover",function(vt){he.stage&&he.stage.frame.leftMouseDown&&!gt||qe()});function qe(){he.rolled=!0,Ut=!0,$e?(he.pressed&&he.downWaitBacking?Et("downWaitBacking"):he.pressed&&he.downBacking?Et("downBacking"):he.rollWaitBacking?Et("rollWaitBacking"):he.waitBacking?Et("waitBacking"):he.rollBacking?Et("rollBacking"):Et("backing"),he.pressed&&he.downWaitIcon?Et("downWaitIcon"):he.rollWaitIcon?Et("rollWaitIcon"):he.waitIcon?Et("waitIcon"):he.rollIcon?Et("rollIcon"):Et("icon",!0)):He&&he.toggled?(he.pressed&&he.downToggleBacking?Et("downToggleBacking"):he.pressed&&he.downBacking?Et("downBacking"):he.rollToggleBacking?Et("rollToggleBacking"):he.toggleBacking?Et("toggleBacking"):he.rollBacking?Et("rollBacking"):Et("backing"),he.pressed&&he.downToggleIcon?Et("downToggleIcon"):he.rollToggleIcon?Et("rollToggleIcon"):he.toggleIcon?Et("toggleIcon"):he.rollIcon?Et("rollIcon"):Et("icon",!0)):(he.pressed&&he.downBacking?Et("downBacking"):he.rollBacking?Et("rollBacking"):Et("backing"),he.pressed&&he.downIcon?Et("downIcon"):he.rollIcon?Et("rollIcon"):Et("icon",!0)),he.pressed?n(y)&&he.backing?he.backing.color=s:y&&!n(y.mask)&&he.backing&&(he.backing.mask.color=s):n(y)&&he.backing?he.backing.color=a:y&&!n(y.mask)&&he.backing&&(he.backing.mask.color=a),he.border&&(he.border.borderColor=he.pressed?k:g),he.pressed?he.label.colorOnly=v:he.label.showRollColor?he.label.showRollColor():he.label.colorOnly=Ae,he.stage&&he.stage.update()}var gt=!1;this.on("mousedown",function(){he.pressed=gt=!0,qe(),he.rolled}),this.on("pressup",function(){he.pressed=gt=ut=!1,Ut?qe():he.rollPersist&&Ct(),j.M&&St()}),this.on("pressmove",function(){var vt=he.stage?he.stage.frame:j.zdf,bt=he.hitTestPoint(vt.mouseX,vt.mouseY);gt&&!bt?(St(),gt=!1):!gt&&bt&&(qe(),gt=!0)}),this.on("mouseout",St);function St(){Ut=!1,he.rollPersist&&ut||Ct()}function Ct(){he.rolled=!1,$e||he.waiting?(n(y)&&he.backing&&n(he.waitBacking)&&(he.backing.color=n(K)?l:K),he.waitBacking?Et("waitBacking"):he.backing&&Et("backing"),he.waitIcon?Et("waitIcon"):he.icon?Et("icon"):Et("icon",null)):he.toggled&&He?(n(y)&&he.backing&&n(he.toggleBacking)&&(he.backing.color=d),he.toggleBacking?Et("toggleBacking"):he.backing&&Et("backing"),he.toggleIcon?Et("toggleIcon"):he.icon?Et("icon"):Et("icon",null)):(n(y)&&he.backing?he.backing.color=l:y&&!n(y.mask)&&he.backing&&(he.backing.mask.color=l),he.backing&&Et("backing"),he.icon?Et("icon"):Et("icon",null)),he.border&&(he.border.borderColor=C),he.label.colorOnly=Ae,he.label.showRollColor&&he.label.showRollColor(!1),he.stage&&he.stage.update()}he.removeRoll=Ct,he.rollBacking&&he.rollBacking.removeFrom(),Object.defineProperty(he,"text",{get:function(){var vt=i.text==" "?"":i.text;return vt},set:function(vt){i.text=vt,Ze&&(Ze=vt),i.center(this),i.y+=1,t.pos(i,Y=="left"||Y=="right"?b:null,_=="top"||_=="bottom"?Z:null,Y=="right",_=="bottom")}}),Object.defineProperty(he,"color",{get:function(){return f},set:function(vt){f=vt,lt&&(lt=f),he.label&&!n(he.label.color)&&(he.label.color=Ae=f),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&he.stage&&he.stage.update()}}),Object.defineProperty(he,"rollColor",{get:function(){return u},set:function(vt){u=vt,Ve&&(Ve=u),he.label&&(he.label.rollColor=u)}}),Object.defineProperty(he,"downColor",{get:function(){return v},set:function(vt){v=vt,originalDownColor&&(originalDownColor=v),he.label&&(he.label.downColor=v)}}),Object.defineProperty(he,"backgroundColor",{get:function(){return l},set:function(vt){l=vt,he.backing.color?he.backing.color=l:he.backing.mask&&(he.backing.mask.color=l),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&he.stage&&he.stage.update()}}),Object.defineProperty(he,"rollBackgroundColor",{get:function(){return a},set:function(vt){a=vt,he.rollBacking&&he.rollBacking.color?he.rollBacking.color=a:he.rollBacking&&he.rollBacking.mask&&(he.rollBacking.mask.color=a)}}),Object.defineProperty(he,"toggleBackgroundColor",{get:function(){return d},set:function(vt){d=vt,he.toggleBacking&&he.toggleBacking.color?he.toggleBacking.color=d:he.toggleBacking&&he.toggleBacking.mask&&(he.toggleBacking.mask.color=d)}}),Object.defineProperty(he,"rollToggleBackgroundColor",{get:function(){return o},set:function(vt){o=vt,he.rollToggleBacking&&he.rollToggleBacking.color?he.rollToggleBacking.color=o:he.rollToggleBacking&&he.rollToggleBacking.mask&&(he.rollToggleBacking.mask.color=o)}}),Object.defineProperty(he,"downBackgroundColor",{get:function(){return s},set:function(vt){s=vt,he.downBacking&&he.downBacking.color?he.downBacking.color=s:he.downBacking&&he.downBacking.mask&&(he.downBacking.mask.color=s)}}),Object.defineProperty(he,"borderColor",{get:function(){return C},set:function(vt){C=vt,he.rolled||(he.backing&&he.backing.borderColor&&(he.backing.borderColor=vt),he.border&&(he.border.borderColor=vt))}}),Object.defineProperty(he,"rollBorderColor",{get:function(){return g},set:function(vt){g=vt,he.rolled&&(he.backing&&he.backing.borderColor&&(he.backing.borderColor=vt),he.border&&(he.border.borderColor=vt))}}),Object.defineProperty(he,"hitPadding",{get:function(){return $},set:function(vt){$=vt,$==0?Ge&&(this.hitArea=null):tt()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(he,"enabled",{get:function(){return he._enabled},set:function(vt){he._enabled&&(he.startMouseChildren=he.mouseChildren),vt?(Ot(he,vt),he.mouseChildren=he.startMouseChildren):(Ct(),Ot(he,vt));var bt=i.color;i.color=Ae=bt,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&he.stage&&he.stage.update()}}),this.setBacking=function(vt,bt){Bt(vt,bt)},this.setIcon=function(vt,bt){Bt(vt,bt)};function Bt(vt,bt){return n(vt)||(he.contains(he[vt])&&(he.removeChild(he[vt]),bt&&he.addChildAt(bt,vt.indexOf("con")>=0?he.numChildren-1:0),he.stage&&he.stage.update()),bt?(n(y)&&vt=="backing"&&(y=bt),bt.type=="Pattern"&&(bt=nt(vt,bt)),he[vt]=bt,he[vt].x=e/2,he[vt].y=r/2):he[vt]=null,ot()),he}Me!==!1&&t.styleTransforms(this,te),this.clone=function(vt){var bt=new t.Button(e,r,i.clone(),vt||!t.isPick(Qe[0])?l:Qe[0],vt||!t.isPick(Qe[1])?a:Qe[1],vt||!t.isPick(Qe[2])?s:Qe[2],vt||!t.isPick(Qe[3])?f:Qe[3],vt||!t.isPick(Qe[4])?u:Qe[4],vt||!t.isPick(Qe[5])?v:Qe[5],Be,Ke,g,k,n(y)?null:he.backing.clone(),n(x)?null:he.rollBacking.clone(),n(I)?null:he.downBacking.clone(),n(w)?null:w.clone(),n(E)?null:E.clone(),n(A)?null:A.clone(),p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,n(de)?null:de.clone(),n(R)?null:R.clone(),n(N)?null:N.clone(),n(se)?null:se.clone(),n(ie)?null:ie.clone(),n(q)?null:q.clone(),z,ce,Ie,K,xe,J,fe,U,ue,n(ke)?null:ke.clone(),n(ne)?null:ne.clone(),n(ve)?null:ve.clone(),n(we)?null:we.clone(),n(ee)?null:ee.clone(),n(le)?null:le.clone(),ye,oe,Me,this.group,Se);return he.cloneProps(bt)},this.doDispose=function(vt,bt,Vt){return he.icon&&he.icon.dispose(),he.rollIcon&&he.rollIcon.dispose(),he.downIcon&&he.downIcon.dispose(),he.waitIcon&&he.waitIcon.dispose(),he.rollWaitIcon&&he.rollWaitIcon.dispose(),he.downWaitIcon&&he.downWaitIcon.dispose(),he.toggleIcon&&he.toggleIcon.dispose(),he.rollToggleIcon&&he.rollToggleIcon.dispose(),he.downToggleIcon&&he.downToggleIcon.dispose(),he.icon=he.rollIcon=he.downIcon=he.waitIcon=he.rollWaitIcon=he.downWaitIcon=he.toggleIcon=he.rollToggleIcon=he.downToggleIcon=null,Vt||this.zimContainer_dispose(!0),!0}},t.extend(t.Button,t.Container,["clone","dispose"],"zimContainer",!1),t.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.CheckBox=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I){var w="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",E;if(E=at(t.CheckBox,arguments,w,this))return E;De("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=x;var A=y===!1?{}:t.getStyle(this.type,this.group,I);n(e)&&(e=A.size!=null?A.size:60),n(r)&&(r=A.label!=null?A.label:null),n(i)&&(i=A.startChecked!=null?A.startChecked:!1),n(l)&&(l=A.color!=null?A.color:t.darker),n(a)&&(a=A.backgroundColor!=null?A.backgroundColor:t.white.toAlpha(.8)),n(s)&&(s=A.borderColor!=null?A.borderColor:t.darker),n(f)&&(f=A.borderWidth!=null?A.borderWidth:e/10),s<0||f<0?s=f=null:s!=null&&f==null&&(f=e/10),n(u)&&(u=A.corner!=null?A.corner:0),n(v)&&(v=A.margin!=null?A.margin:e/5),C!="box"&&C!="square"&&C!="x"&&(C=A.indicatorType!=null?A.indicatorType:"check"),n(h)&&(h=A.indicatorColor!=null?A.indicatorColor:f>0?s:t.black),this.setBounds(-v,-v,e+v*2,e+v*2),n(g)&&(g=A.tap!=null?A.tap:!1),n(k)&&(k=A.rtl!=null?A.rtl:j.DIR=="rtl");var p=this;this.cur("pointer");var T=B(r,i);this.veeObj={label:T[0],startChecked:T[1]};function B(){return arguments}r=t.Pick.choose(r),i=t.Pick.choose(i);var F=i;(typeof r=="string"||typeof r=="number")&&(r=new t.Label({text:r,size:e*5/6,color:l,valign:"center",align:k?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:y,group:this.group}));var D=this.box=new t.Rectangle(e,e,a,null,null,u),P=this.box2=new t.Rectangle(e*5/7,e*5/7,"rgba(0,0,0,0)",s,f,u);P.x=e/7,P.y=e/7,this.addChild(D,P);var Y=e;r&&(r.center(p),this.label=r,k?(r.x=-v,this.setBounds(-r.width-v*2,-v,e+v*3+r.getBounds().width,Math.max(e+v*2,r.getBounds().height)),Y=e+r.width+v,this.regX=e):(r.x=p.getBounds().width,this.setBounds(-v,-v,e+v*4+r.getBounds().width,Math.max(e+v*2,r.getBounds().height)),Y=r.x+r.width));var _=new t.Shape({style:!1}),V=_.graphics;V.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,Y+v*2,this.getBounds().height),this.hitArea=_;var b=new t.Shape({style:!1}),Z=b.graphics;C=="check"?Z.f(h).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):C=="box"||C=="square"?Z.f(h).dr(-35,-35,70,70):Z.f(h).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var $=95;b.setBounds(-$/2,-$/2,$,$);var Q=e/($+66);b.scaleX=b.scaleY=Q,b.alpha=.9,b.x=e/2,b.y=e/2,F&&this.addChild(b),g?this.tap(re):this.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",re),Object.defineProperty(p,"checked",{get:function(){return F},set:function(G){p.setChecked(G)}}),this.toggle=function(G){n(G)&&(G=!F),p.setChecked(G)},Object.defineProperty(p,"toggled",{get:function(){return F},set:function(G){p.setChecked(G)}}),Object.defineProperty(p,"text",{get:function(){return r?r.text:null},set:function(G){r&&(r.text=G,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&p.stage&&p.stage.update())}}),Object.defineProperty(b,"indicatorColor",{get:function(){return h},set:function(G){F&&p.removeChild(b),b=new Fe.Shape,Z=b.graphics,h=G,Z.f(h).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),b.scaleX=b.scaleY=Q,b.alpha=.9,b.x=e/2,b.y=e/2,F&&p.addChild(b),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&p.stage&&p.stage.update()}}),Object.defineProperty(p,"indicator",{get:function(){return b},set:function(){je("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(G){Ot(p,G)}});function re(){F=!F,p.setChecked(F),p.dispatchEvent("change")}this.setChecked=function(G){return n(G)&&(G=!0),F=G,F?p.addChild(b):p.removeChild(b),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&p.stage&&p.stage.update(),p},y!==!1&&t.styleTransforms(this,A),this.clone=function(G){return p.cloneProps(new t.CheckBox(e,G||!t.isPick(T[0])?r?r.clone():null:T[0],G||!t.isPick(T[1])?i:T[1],l,a,s,f,u,v,C,h,g,k,y,this.group,I))}},t.extend(t.CheckBox,t.Container,"clone","zimContainer",!1),t.RadioButtons=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I){var w="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",E;if(E=at(t.RadioButtons,arguments,w,this))return E;De("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=x;var A=y===!1?{}:t.getStyle(this.type,this.group,I);n(e)&&(e=A.size!=null?A.size:60),e=Math.max(5,e),n(r)&&(r=A.buttons!=null?A.buttons:["A","B","C"]),n(i)&&(i=A.vertical!=null?A.vertical:!0),n(l)&&(l=A.color!=null?A.color:t.darker),n(a)&&(a=A.backgroundColor!=null?A.backgroundColor:"rgba(255,255,255,.8)"),n(s)&&(s=A.borderColor!=null?A.borderColor:t.darker),n(f)&&(f=A.borderWidth!=null?A.borderWidth:e/9),s<0||f<0?s=f=null:s!=null&&f==null&&(f=e/10),n(u)&&(u=i?A.spacing!=null?A.spacing:e*.2:A.spacing!=null?A.spacing:e),n(v)&&(v=A.margin!=null?A.margin:e/5),n(C)&&(C=A.always!=null?A.always:!1),n(h)&&(h=A.indicatorColor!=null?A.indicatorColor:f>0?s:t.black),n(k)&&(k=A.rtl!=null?A.rtl:j.DIR=="rtl");var p=this;this.cur("pointer"),this.labels=[],this.indicators=[];var T=0,B;if(typeof r=="string"){var F=r;r=[];for(var D=0;D<F.length;D++)r.push({label:F[D]})}var P=new t.Container({style:!1});this.addChild(P);function Y($){var Q=P.getChildIndex($.target);C&&p.selectedIndex==Q||(p.setSelected(Q),p.dispatchEvent("change"))}b();for(var _,V=0;V<P.numChildren;V++)_=P.getChildAt(V),_.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",Y);function b(){var $,Q=!1,re;for(re=r.length-1;re>=0;re--)$=r[re],$.selected&&$.selected===!0&&(Q?$.selected="false":(Q=!0,p.id=$.id));P.removeAllChildren(),p.buttons=[];var G,L=0;for(re=0;re<r.length;re++){if($=r[re],typeof $=="string"||typeof $=="number"){var c={selected:!1,label:new t.Label({text:$,size:e*5/6,color:A.color!=null?A.color:l,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:y,group:p.group})};$=c}($.label&&typeof $.label=="string"||typeof $.label=="number")&&($.label=new t.Label({text:$.label,size:A.size!=null?A.size:e*5/6,color:A.color!=null?A.color:l,valign:"center",style:y})),p.labels.push($.label),$.index=re,r[re]=$,G=Z($.selected,$.label),G.type="RadioButton",G.obj=$,$.selected&&(B=G.obj),P.addChild(G),i?(G.y=L,L+=G.getBounds().height+u):(G.x=L,L+=G.getBounds().width+u)}}function Z($,Q){var re=new t.Container({style:!1});p.buttons.push(re),re.mouseChildren=!1,re.setBounds(-v,-v,e+v*2,e+v*2);var G=new t.Shape({style:!1}),L=G.graphics;L.f(a).dc(e/2,e/2,e/1.85),L.s(s).ss(f).dc(e/2,e/2,e/2-e/2/5),re.addChild(G);var c=re.check=new t.Circle(e/5.2,h,null,null,null,null,null,null,!1);p.indicators.push(c),c.mouseEnabled=!1,c.alpha=.95,c.regX=c.regY=-e/2;var d=e;Q&&(T==0&&(T=Q.width),re.addChild(Q),Q.y=e/2,re.text=Q.text,k?(Q.x=-Q.width-v,re.setBounds(-Q.width-v,-v,e+v*2+Q.getBounds().width,Math.max(e+v*2,Q.getBounds().height)),d=Q.width+v+e):(Q.x=re.getBounds().width,re.setBounds(-v,-v,e+v*2+Q.getBounds().width,Math.max(e+v*2,Q.getBounds().height)),d=Q.x+Q.width)),$&&(re.addChild(c),p.label=Q,p.label&&(p.text=Q.text));var o=new t.Shape({style:!1});return L=o.graphics,L.f("rgba(0,0,0,.01)").r(re.getBounds().x,re.getBounds().y,d+v*2,re.getBounds().height),re.hitArea=o,re}this.getBounds()||this.setBounds(0,0,e,e),k?(this.setBounds(-v*2-T,-v,this.getBounds().width+v*2,this.getBounds().height),this.regX=i?e+v:this.getBounds().width-T-v*3):this.setBounds(-v,-v,this.getBounds().width+v*2,this.getBounds().height),this.setSelected=function($){if(n($)&&($=-1),!($!=-1&&!P.getChildAt($))){for(var Q,re=0;re<P.numChildren;re++)Q=P.getChildAt(re),Q.removeChild(Q.check);if($>=0){Q=P.getChildAt($);var G=-2;B&&(G=B.index),B=Q.obj}return $==-1||G==B.index?(B=null,p.id=null,p.label=null,p.text=""):(Q.addChild(Q.check),p.id=B.id,p.label=B.label,p.label&&(p.text=p.label.text)),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&p.stage&&p.stage.update(),p}},Object.defineProperty(p,"selected",{get:function(){return B},set:function(){je("ZIM RadioButton - selected is read only")}}),Object.defineProperty(p,"selectedIndex",{get:function(){return B?B.index:-1},set:function($){var Q=$;p.selectedIndex!=$&&p.setSelected(Q)}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function($){Ot(p,$)}}),n(g)&&(g=A.selectedIndex!=null?A.selectedIndex:0),p.selectedIndex=g,t.styleTransforms(this,A),this.clone=function(){for(var $=t.copy(r),Q=0;Q<$.length;Q++)$[Q].label=$[Q].label.clone();return p.cloneProps(new t.RadioButtons(e,$,i,l,a,s,f,u,v,C,h,g,k,y,this.group,I))}},t.extend(t.RadioButtons,t.Container,"clone","zimContainer",!1),t.Toggle=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B){var F="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",D;if(D=at(t.Toggle,arguments,F,this))return D;De("57.5"),this.group=T;var P=p===!1?{}:t.getStyle("Toggle",this.group,B);n(e)&&(e=P.width!=null?P.width:80),n(r)&&(r=P.height!=null?P.height:50),this.zimContainer_constructor(e,r,null,null,!1),this.type="Toggle",n(a)&&(a=P.backgroundColor!=null?P.backgroundColor:t.purple),n(s)&&(s=P.margin!=null?P.margin:10),n(f)&&(f=P.indicatorType!=null?P.indicatorType:"circle"),n(u)&&(u=P.indicatorColor!=null?P.indicatorColor:t.white),n(C)&&(C=P.toggleBackgroundColor!=null?P.toggleBackgroundColor:a.lighten(.3)),n(h)&&(h=P.color!=null?P.color:t.darker),n(g)&&(g=P.borderColor!=null?P.borderColor:null),n(k)&&(k=P.borderWidth!=null?P.borderWidth:null),g<0||k<0?g=k=null:g!=null&&k==null&&(k=1),n(y)&&(y=P.corner!=null?P.corner:f!="circle"?0:25),n(x)&&(x=P.indicatorCorner!=null?P.indicatorCorner:0),n(I)&&(I=P.shadowColor!=null?P.shadowColor:"rgba(0,0,0,.3)"),n(w)&&(w=P.shadowBlur!=null?P.shadowBlur:14),n(l)&&(l=P.startToggled!=null?P.startToggled:!1);var Y=mt(E);n(E)&&(E=P.time!=null?P.time:Y=="s"?.1:100),n(i)&&(i=P.label!=null?P.label:null),n(A)&&(A=P.labelLeft!=null?P.labelLeft:null);var _=this;_.cur("pointer"),(typeof i=="string"||typeof i=="number")&&(i=this.label=new t.Label({text:i,size:P.size||r*5/6,color:h,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(typeof A=="string"||typeof A=="number")&&(A=this.labelLeft=new t.Label({text:A,size:P.size||r*5/6,color:h,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new t.Rectangle(e,r,a,g,k,y).addTo(this),f=="rectangle"||f=="square"?this.indicator=new t.Rectangle(r*.65,r*.65,u,null,null,x).center(this.background).pos(r*.2,null,l):this.indicator=new t.Circle(r*.35,u).center(this.background).pos(r*.175,null,l);var V=l;_.background.color=V?C:a,I!=-1&&w>0&&(this.background.shadow=new Fe.Shadow(I,3,3,w)),i&&(this.addChild(i),i.x=e+2+s+k,i.y=r/2,this.label=i,this.setBounds(-s,-s,e+s*3+k+i.getBounds().width,Math.max(r+s*2,i.getBounds().height))),A&&(this.addChild(A),A.x=0,_.background.x+=A.width+3+s+k,_.label.x+=A.width+3+s+k,A.y=r/2,this.labelLeft=A,this.setBounds(-s,-s,_.getBounds().width+A.width+3+s+k,_.getBounds().height)),this.expand(t.mobile()?20:10),this.tap(function($){if(A){var Q=_.localToGlobal(A.width+3+s+k+e/2,0);if($.stageX/t.scaX<Q.x-e/2&&!V||$.stageX/t.scaX>=Q.x+e/2&&V)return}V=!V,Z(),_.dispatchEvent("change")},t.mobile()?20:10);var b=new t.Swipe(this,20,Y=="s"?.2:200);b.on("swipe",function($){if($.swipeX!=0){{if($.swipeX==1&&V)return;if($.swipeX==-1&&!V)return}V=!V,Z(),_.dispatchEvent("change")}});function Z($){var Q=_.indicator.x,re=E;if($===!0&&(re=0),f=="rectangle"||f=="square"?(_.indicator.pos(r*.2,null,V),E>0&&_.indicator.animate({props:{x:Q},from:!0,time:re})):(_.indicator.pos(r*.175,null,V),E>0&&_.indicator.animate({props:{x:Q},from:!0,time:re})),_.background.color=V?C:a,_.text=V?_.label?_.label.text:"on":_.labelLeft?_.labelLeft.text:"off",_.zimAccessibility){var G="Toggle set to "+(V?_.label?_.label.text+".":"on.":_.labelLeft?_.labelLeft.text+".":"off.");setTimeout(function(){_.zimAccessibility.talk(G)},50)}}Object.defineProperty(_,"textLeft",{get:function(){return A?A.text:null},set:function($){A&&(A.text=$,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&_.stage&&_.stage.update())}}),_.toggle=function($,Q){var re=V;return n($)&&($=!0),V=$,re!=V&&Z(Q),_},_.text=V?_.label?_.label.text:"on":_.labelLeft?_.labelLeft.text:"off",Object.defineProperty(_,"toggled",{get:function(){return V},set:function($){_.toggle($)}}),this._enabled=!0,Object.defineProperty(_,"enabled",{get:function(){return _._enabled},set:function($){Ot(_,$)}}),p!==!1&&t.styleTransforms(this,P),this.clone=function(){return _.cloneProps(new t.Toggle(e,r,i?i.clone():"",l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A?A.clone():"",p,this.group,B))}},t.extend(t.Toggle,t.Container,"clone","zimContainer",!1),t.Tip=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N){var se="text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",ie;if(ie=at(t.Tip,arguments,se,this))return ie;De("57.6"),this.group=R;var q=de===!1?{}:t.getStyle("Tip",this.group,N);n(e)&&(e=q.text!=null?q.text:"Here's a tip!"),n(l)&&(l=q.margin!=null?q.margin:40),n(a)&&(a=q.marginH!=null?q.marginH:l),n(s)&&(s=q.marginV!=null?q.marginV:l),n(r)&&(r=q.tipAlign!=null?q.tipAlign:"right"),n(i)&&(i=q.tipValign!=null?q.tipValign:"bottom"),n(f)&&(f=q.outside!=null?q.outside:!1),n(P)&&(P=q.backgroundColor!=null?q.backgroundColor:t.blue),n(y)&&(y=q.color!=null?q.color:t.white),n(V)&&(V=q.corner!=null?q.corner:25),n(b)&&(b=q.backgroundDashed!=null?q.backgroundDashed:null),n(Z)&&(Z=q.padding!=null?q.padding:10),n($)&&($=q.paddingH!=null?q.paddingH:Z),n(Q)&&(Q=q.paddingV!=null?q.paddingV:Z),(n(I)||I=="ignore")&&(I=q.shadowColor!=null&&I!="ignore"?q.shadowColor:"rgba(0,0,0,.3)"),(n(w)||w=="ignore")&&(w=q.shadowBlur!=null&&w!="ignore"?q.shadowBlur:1),n(v)&&(v=q.delay!=null?q.delay:0);var z=mt(C);n(C)&&(C=q.time!=null?q.time:z=="s"?2:2e3),n(h)&&(h=q.mouseClose!=null?q.mouseClose:!0),this.zimLabel_constructor(e,g,k,y,x,null,null,E,A,S,X,m,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,O,de,R,t.copy(q)),this.type="Tip",f&&(a=-a,s=-s);var ce=this;ce.tipAlign=r,ce.tipValign=i,this.background.sha(I,3,5,w),this.show=function(Ie,K){var xe=mt(K);if(n(Ie)&&(Ie=v),n(K)&&(K=C),n(u))if(j.zdf)u=j.zdf.stage;else return ce;else if(u.getBounds){if(n(u.stage))return je("zim display - Waiter(): The container must have a stage property"),ce}else return je("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),ce;Ie>0?ce.showID=t.timeout(Ie,J):J();function J(){var fe;u.boundsToGlobal?fe=u.boundsToGlobal():fe=u.getBounds();var U=new t.Container(fe.x,fe.y,fe.width,fe.height);U.zimTemp=!0,U.loc(0,0,u.stage),ce.pos(a,s,ce.tipAlign,ce.tipValign,U),f&&(ce.tipAlign=="right"?ce.x+=ce.width:ce.tipAlign=="left"&&(ce.x-=ce.width),ce.tipValign=="bottom"?ce.y+=ce.height:ce.tipValign=="top"&&(ce.y-=ce.height)),ce.addTo(U.stage),U.zimTemp&&U.removeFrom&&(U.removeFrom(),U=null),U=ce.stage,ce.timeoutID&&ce.timeoutID.clear(),ce.timeoutID=t.timeout(K,function(){ce.hide(),U.stage.update()}),h&&(ce.upID&&U.stage.off("stagemouseup",ce.upID),ce.upID=U.stage.on("stagemouseup",function(){ce.hide(),U.stage&&U.stage.update()})),U.stage&&U.stage.update()}return ce},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&u.stage&&u.stage.off("stagemouseup",this.upID),ce},this.clear=function(){ce.showID&&ce.showID.clear(),ce.hide()},this.dispose=function(Ie,K,xe){ce.upID&&ce.stage&&ce.stage.off("stagemouseup",ce.upID),xe||this.zimLabel_dispose(!0)},de!==!1&&t.styleTransforms(this,q),this.clone=function(){return ce.cloneProps(new t.Tip(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,O,de,this.group,N))}},t.extend(t.Tip,t.Label,["dispose","clone"],"zimLabel",!1),t.Pane=function(X,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z){var $="content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, style, group, inherit";if(X&&!X.header&&!X.message&&!X.display&&!X.buttons){var Q;if(Q=at(t.Pane,arguments,$,this))return Q}De("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var re="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(n(E))if(j.zdf)E=j.zdf.stage;else{je(re);return}else if(E.getBounds){if(n(E.getStage)){je("zim display - Pane(): The container must have a stage property");return}}else{je(re);return}this.group=b;var G=V===!1?{}:t.getStyle(this.type,this.group,Z);n(l)&&(l=G.width!=null?G.width:"auto"),n(a)&&(a=G.height!=null?G.height:"auto"),n(X)&&(X=G.content!=null?G.content:" "),(typeof X=="string"||typeof X=="number")&&(X=new t.Label({text:X,size:G.size!=null?G.size:40,align:G.align!=null?G.align:"center",valign:G.valign!=null?G.valign:"center",color:G.color!=null?G.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var L=this.content=X;n(r)&&(r=G.backgroundColor!=null?G.backgroundColor:t.white),n(s)&&(s=G.draggable!=null?G.draggable:!1),n(f)&&(f=G.resets!=null?G.resets:!0),n(u)&&(u=G.modal!=null?G.modal:!0),n(v)&&(v=G.corner!=null?G.corner:20),n(A)&&(A=G.titleBar!=null?G.titleBar:null),n(p)&&(p=G.titleBarColor!=null?G.titleBarColor:null),n(T)&&(T=G.titleBarBackgroundColor!=null?G.titleBarBackgroundColor:null),n(B)&&(B=G.titleBarHeight!=null?G.titleBarHeight:null),n(C)&&(C=G.backdropColor!=null?G.backdropColor:"rgba(0,0,0,.2)"),n(h)&&(h=G.shadowColor!=null?G.shadowColor:"rgba(0,0,0,.3)"),n(g)&&(g=G.shadowBlur!=null?G.shadowBlur:20),n(k)&&(k=G.center!=null?G.center:!0),n(y)&&(y=G.displayClose!=null?G.displayClose:!0),s&&(y=!1),n(x)&&(x=G.backdropClose!=null?G.backdropClose:!0),n(w)&&(w=G.fadeTime!=null?G.fadeTime:0),n(F)&&(F=G.close!=null?G.close:!1),n(D)&&(D=G.closeColor!=null?G.closeColor:t.grey),n(P)&&(P=G.autoPadding!=null?G.autoPadding:70),n(Y)&&(Y=G.autoPaddingH!=null?G.autoPaddingH:P),n(_)&&(_=G.autoPaddingV!=null?G.autoPaddingV:P);var c=this.backdrop=new t.Shape({style:!1}),d=c.graphics;d.f(C),d.drawRect(-5e3,-5e3,1e4,1e4);var o=this;if(this.add=function(J,fe,U,ue){var ke="obj, index, center, replace",ne;return(ne=at(o.add,arguments,ke,o))?ne:(n(U)&&(U=!0),n(ue)&&(ue=!0),typeof J=="string"&&(J=new zr(J,null,null,i).noMouse()),ue&&o.contentContainer.removeAllChildren(),U?J.center(o.contentContainer,fe):J.addTo(o.contentContainer,fe),o)},L){var S=t.makeContent(L,l,t.dark),m=["header","message","text","display","buttons","config"];m.forEach(function(fe){S[fe]&&(o[fe]=S[fe])}),o.label=o.message,l=="auto"&&(l=S.width+Y*2),a=="auto"&&(a=S.height+_*2)}var X=o.contentContainer=new t.Container(l,a);S&&o.add(S,null,!0),this.setBounds(-l/2,-a/2,l,a);var m=["header","message","text","display","buttons","config"];X&&m.forEach(function(J){X[J]&&(o[J]=X[J])}),o.label=o.message,o.container=E,c.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",x?de:function(J){J.stopImmediatePropagation()});var O=new t.Dictionary(!0);function de(J){o.dispatchEvent("closing"),setTimeout(function(){ce(),o.dispatchEvent("close")},10),J.stopImmediatePropagation()}c.on("mousedown",function(J){J.stopImmediatePropagation()}),this.addChild(c),u||c.noMouse();var R;if(n(I))R=this.backing=new t.Rectangle({width:l,height:a,color:r,corner:v,style:!1});else{if(I.type=="Pattern"){var N=I;R=new t.Rectangle(l,a,r,null,null,v,null,null,null,!1),N.centerReg(R),N.setMask(R.shape)}else R=I;o.display=o.backing=R}if(y&&(R.cur("pointer"),R.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",de)),h!=-1&&g>0&&(R.shadow=new Fe.Shadow(h,8,8,g)),R.on("click",function(J){J.stopImmediatePropagation()}),this.resetX,this.resetY,s){R.cur("pointer");var se,ie;R.on("mousedown",function(J){isNaN(o.resetX)&&(o.resetX=o.x),isNaN(o.resetY)&&(o.resetY=o.y),se=J.stageX/t.scaX-o.x,ie=J.stageY/t.scaY-o.y,R.cur("pointer")}),R.on("pressmove",function(J){var fe=xe(J.stageX/t.scaX-se,J.stageY/t.scaY-ie);o.x=fe.x,o.y=fe.y;for(var U,ue=0;ue<o.numChildren;ue++)U=o.getChildAt(ue),(U.type=="TextArea"||U.type=="Loader"||U.type=="Tag")&&U.resize();o.stage.update()}),this.on("pressup",function(){R.cur("pointer"),o.stage&&o.stage.update()})}if(R.centerReg(this),X&&X.center(this),!n(A)){typeof A=="string"&&(A=new t.Label(A,null,null,p));var q=o.titleBarLabel=A;n(B)&&(B=q.height*1.5),n(p)&&(p=t.black),n(T)&&(T="rgba(0,0,0,.2)"),o.titleBar=A=new t.Container(l,B,null,null,!1).centerReg(o).mov(0,-a/2+B/2),A.mouseEnabled=!1,A.mouseChildren=!1,o.titleBar.backing=new t.Rectangle(l,B,T,null,null,[v*.95,v*.95,0,0],null,null,null,!1).addTo(A),q.center(A).pos({x:Math.max(v/2,10),reg:!0})}F&&(F=o.close=new t.Shape(-40,-40,80,80,null,!1),F.graphics.f(D).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),A?F.addTo(o).scaleTo(A,null,50).mov(l/2-Math.max(v/2,10)-F.width/2,-a/2+B/2).expand(40):F.addTo(o).sca(.3).mov(l/2-F.width-3,-a/2+F.height).expand(40),F.cur("pointer"),F.expand(),F.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",de)),Object.defineProperty(o,"text",{get:function(){if(o.message){var J=o.message.text==" "?"":o.message.text;return J}else if(o.content.text){var J=o.content.text==" "?"":o.content.text;return J}},set:function(J){o.message?o.message.text=J:o.content.text&&(o.content.text=J)}}),this._enabled=!0,Object.defineProperty(o,"enabled",{get:function(){return o._enabled},set:function(J){Ot(o,J)}}),this.hide=function(J,fe){return n(J)||(o.closeParams=J),ce(),fe&&(o.dispatchEvent("close"),o.dispatchEvent("change")),o},this.on("removed",z);function z(){o.toggled=!1;var J,fe;for(fe=0;fe<o.numChildren;fe++)if(J=o.getChildAt(fe),J.type=="TextArea"||J.type=="Loader"||J.type=="Tag"){var U={obj:J,depth:o.getChildIndex(J)};O.add(J,U)}for(fe=o.numChildren-1;fe>=0;fe--)J=o.getChildAt(fe),(J.type=="TextArea"||J.type=="Loader"||J.type=="Tag")&&o.removeChild(J);if(!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&o.container.stage.update(),f&&(isNaN(o.resetX)||(o.x=o.resetX),isNaN(o.resetY)||(o.y=o.resetY)),o.zimAccessibility){var ue=o.zimAccessibility;ue.resize(o),Ie?Ie.focus():o.zimTabTag.nextSibling.focus(),setTimeout(function(){ue.talk("Pane has been closed.")},50)}}function ce(){w>0?o.animate({obj:{alpha:0},time:w,call:function(){J(),o.dispatchEvent("fadedout")}}):J();function J(){o.container.removeChild(o),o.closeCall&&o.closeCall(o.closeParams),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&o.container.stage.update(),f&&(isNaN(o.resetX)||(o.x=o.resetX),isNaN(o.resetY)||(o.y=o.resetY))}}var Ie;this.show=function(J,fe){return n(J)||(o.closeCall=J),n(fe)||(o.closeParams=fe),k&&isNaN(o.resetX)&&(o.x=o.container.getBounds().width/2,o.y=o.container.getBounds().height/2),o.container.addChild(o),w>0?(o.alpha=0,o.animate({props:{alpha:1},time:w,call:function(){o.dispatchEvent("fadedin")}})):setTimeout(function(){o.container.stage&&o.container.stage.update()},10),o},this.on("added",K);function K(){for(var J=0;J<O.length;J++)o.addChildAt(O.values[J].obj,O.values[J].depth);if(o.zimAccessibility){var fe=o.zimAccessibility;setTimeout(function(){fe.activatedObject&&(Ie=fe.activatedObject.zimTabTag)},50),fe.resize(o),fe.tabIndex=o.zimTabIndex}o.toggled=!0}function xe(J,fe){return J=Math.max(l/2,Math.min(o.container.getBounds().width-l/2,J)),fe=Math.max(a/2,Math.min(o.container.getBounds().height-a/2,fe)),{x:J,y:fe}}this.toggle=function(J){return J===!0?o.show():J===!1||o.container.contains(o)?o.hide():o.show(),o},V!==!1&&t.styleTransforms(this,G),this.clone=function(){var J=o.contentContainer.x,fe=o.contentContainer.y,U=o.cloneProps(new t.Pane(t.copy(X),r,i,l,a,s,f,u,v,C,h,g,k,y,x,n(I)?null:I.clone(),w,o.container,A,p,T,B,F,D,P,Y,_,V,this.group,Z));return U.contentContainer.x=J,U.contentContainer.y=fe,U}},t.extend(t.Pane,t.Container,"clone","zimContainer",!1),t.Panel=function(e,r,o,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_){var V="width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",b;if(b=at(t.Panel,arguments,V,this))return b;De("57.7"),this.group=Y;var Z=P===!1?{}:t.getStyle("Panel",this.group,_);n(e)&&(e=Z.width!=null?Z.width:250),n(r)&&(r=Z.height!=null?Z.height:300),this.zimContainer_constructor(e,r,null,null,!1),this.type="Panel",n(o)&&(o=Z.content!=null?Z.content:null);var $=this.content=o;n(l)&&(l=Z.titleBar!=null?Z.titleBar:"PANEL"),n(a)&&(a=Z.titleBarColor!=null?Z.titleBarColor:t.white),n(s)&&(s=Z.titleBarBackgroundColor!=null?Z.titleBarBackgroundColor:t.grey),n(f)&&(f=Z.titleBarHeight!=null?Z.titleBarHeight:30),n(u)&&(u=Z.backgroundColor!=null?Z.backgroundColor:t.lighter),n(v)&&(v=Z.borderColor!=null?Z.borderColor:t.pewter),n(C)&&(C=Z.borderWidth!=null?Z.borderWidth:null),v<0||C<0?v=C=null:v!=null&&C==null&&(C=1),n(h)&&(h=Z.corner!=null?Z.corner:5),n(p)&&(p=Z.align!=null?Z.align:"left"),n(T)&&(T=Z.shadowColor!=null?Z.shadowColor:"rgba(0,0,0,.3)"),n(B)&&(B=Z.shadowBlur!=null?Z.shadowBlur:14),n(F)&&(F=Z.draggable!=null?Z.draggable:!1),n(D)&&(D=Z.boundary!=null?Z.boundary:null),n(g)&&(g=Z.close!=null?Z.close:!1),n(k)&&(k=Z.closeColor!=null?Z.closeColor:n(a)?t.grey:a),n(y)&&(y=Z.next!=null?Z.next:t.vee(l)),n(x)&&(x=Z.nextColor!=null?Z.nextColor:n(a)?t.grey:a),Array.isArray(h)||(h=[h,h,h,h]),n(w)&&(w=Z.collapse!=null?Z.collapse:!1),n(E)&&(E=Z.collapseColor!=null?Z.collapseColor:n(a)?t.grey:a),n(A)&&(A=Z.collapsed!=null?Z.collapsed:!1);var Q=this,re=this.background=new t.Rectangle(e,r,u,v,C,h).addTo(this);T!=-1&&B>0&&(this.background.shadow=new Fe.Shadow(T,3,3,B));var G=l,L=t.Pick.choose(G),c=t.Pick.choose(a),d=t.Pick.choose(s),o=Q.contentContainer=new t.Container(e,r-f).addTo(Q).mov(0,f);typeof L=="string"&&(L=new t.Label({text:L,color:c,size:Z.size!=null?Z.size:20,bold:Z.bold!=null?Z.bold:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var S=Q.titleBarLabel=L;n(d)&&(d="rgba(0,0,0,.2)"),Q.titleBar=l=new t.Container(e,f,null,null,!1).loc(0,0,Q);var X=Q.titleBar.backing=new t.Rectangle(e+C,f,d,null,null,[h[0]*.95,h[1]*.95,0,0],!0,null,null,!1).center(l);if(l&&R(),Q.label=L,Q.text=L.text,g){var m=Q.closeIcon=new t.Shape(-40,-40,80,80,null,!1);m.graphics.f(k).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),l?(m.centerReg(l).scaleTo(l,null,50),m.pos(Math.max(h[1]/2,15),null,!0)):m.addTo(Q).sca(.3).mov(e/2-m.width-3,-r/2+g.height),m.expand(40),m.cur("pointer"),m.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var q=Q.stage;Q.removeFrom(),Q.dispatchEvent("close"),q.update()})}if(this.add=function(q,z,ce,Ie){var K="obj, index, center, replace",xe;return(xe=at(Q.add,arguments,K,Q))?xe:(Ie&&Q.contentContainer.removeAllChildren(),ce?q.center(Q.contentContainer,z):q.addTo(Q.contentContainer,z),Q)},$){var O=t.makeContent($,e),de=["header","message","text","display","buttons","config"];de.forEach(function(q){O[q]&&(Q[q]=O[q])}),Q.label=Q.message,Q.add(O,null,!0)}this.nextPanel=function(q,z){var ce=n(q)||n(G.array)?t.Pick.choose(G):G.array[q],Ie=n(q)||n(a.array)?t.Pick.choose(a):a.array[q],K=n(q)||n(s.array)?t.Pick.choose(s):s.array[q],xe=n(q)||n(u.array)?t.Pick.choose(u):u.array[q],J=n(q)||n(v.array)?t.Pick.choose(v):v.array[q];typeof ce=="string"&&(ce=new t.Label({text:ce,color:Ie,size:Z.size!=null?Z.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),Q.label=ce,Q.text=ce.text,S.removeFrom(),S=Q.titleBarLabel=ce,R(),X.color=K,Q.background.color=xe,Q.background.borderColor=J,z&&Q.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()};function R(){p=="right"?S.center(l).pos(Math.max(h[0]/2,10),null,!0):p=="center"||p=="middle"?S.center(l):S.center(l).loc(Math.max(h[0]/2,10)),S.mov(0,2)}if(F&&(l.cur("pointer"),l.on("mousedown",function(){Q.drag({rect:D,currentTarget:!0})}),l.on("pressup",function(){Q.noDrag(!1)})),y>0){var N=Q.nextIcon=new t.Shape(-20,-20,40,40,null,!1);N.graphics.f(a).p("AiJieIETCeIkTCfg"),N.centerReg(l).scaleTo(l,null,70).alp(.8).hov(1).expand(),N.pos(Math.max(h[1]/2,15),null,!0),m&&N.mov(-m.width-8),N.cur("pointer"),N.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Q.nextPanel(),Q.dispatchEvent("change")})}if(n(I)||(I=Q.extraButton=new t.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(l,null,70).centerReg(l).expand(),I.pos(Math.max(h[1]/2,15),null,!0),m&&I.mov(-m.width-8),N&&I.mov(-N.width-8)),w){ie=A,Q.collapse=function(q){if(n(q)&&(q=!0),q==ie)return Q;q?(se.rot(180),re.visible=!1,o.visible=!1,ie=!0,Q.dispatchEvent("collapse")):(se.rot(0),re.visible=!0,o.visible=!0,ie=!1,Q.dispatchEvent("expand")),Q.stage&&Q.stage.update()},Q.collapseEvent=Q.titleBar.on("dblclick",function(){Q.collapsed=!Q.collapsed}),n(E)&&(E=t.grey);var se=Q.collapseIcon=new t.Triangle(90,90,90,t.faint,E,16);se.centerReg(Q).scaleTo(l,null,41).pos({x:e-Math.max(h[1]/2,15)-se.width/2-4,y:f/2,reg:!0}).expand(40),I&&se.mov(-I.width-8),m&&se.mov(-m.width-8),N&&se.mov(-N.width-8),se.cur("pointer"),se.expand();var ie=!1;se.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ie?Q.collapse(!1):Q.collapse(!0)})}Q.overlay=new t.Rectangle(e,r,null,null,null,h).alp(.3),Object.defineProperty(Q,"panelHeight",{get:function(){return Q.background.height},set:function(q){re.removeFrom(),re=this.background=new t.Rectangle(e,q,u,v,C,h).addTo(this).bot(),T!=-1&&B>0&&(this.background.shadow=new Fe.Shadow(T,3,3,B)),Q.setBounds(e,q),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}),Object.defineProperty(Q,"collapsed",{get:function(){return ie},set:function(q){Q.collapse&&Q.collapse(q)}}),this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(q){Ot(Q,q),q?Q.overlay.removeFrom():Q.overlay.addTo(Q),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&Q.stage&&Q.stage.update()}}),A&&(A=!1,Q.collapsed=!0),P!==!1&&t.styleTransforms(this,Z),this.clone=function(){return Q.cloneProps(new t.Toggle(e,r,l?l.clone():"",a,s,f,u,v,C,h,g,k,y,x,I,w,E,Q.collapsed,p,T,B,F,D,P,this.group,_))},this.doDispose=function(q,z,ce){return w&&this.titleBar.off("dblclick",this.collapseEvent),ce||this.zimContainer_dispose(!0),!0}},t.extend(t.Panel,t.Container,["clone","dispose"],"zimContainer",!1),t.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.Window=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce){var Ie="width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, continuous, style, group, inherit",K;if(K=at(t.Window,arguments,Ie,this))return K;De("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=z;var xe=q===!1?{}:t.getStyle(this.type,this.group,ce);n(e)&&(e=xe.width!=null?xe.width:300),n(r)&&(r=xe.height!=null?xe.height:200),n(l)&&(l=xe.backgroundColor!=null?xe.backgroundColor:t.dark);var J=a,fe=s;n(a)&&(a=xe.borderColor!=null?xe.borderColor:t.silver),n(s)&&(s=xe.borderWidth!=null?xe.borderWidth:1),n(f)&&(f=xe.padding!=null?xe.padding:0),n(u)&&(u=xe.corner!=null?xe.corner:0),n(v)&&(v=xe.swipe!=null?xe.swipe:!0),n(C)&&(C=xe.scrollBarActive!=null?xe.scrollBarActive:!0),n(h)&&(h=xe.scrollBarDrag!=null?xe.scrollBarDrag:!1),n(g)&&(g=xe.scrollBarColor!=null?xe.scrollBarColor:a),n(k)&&(k=xe.scrollBarAlpha!=null?xe.scrollBarAlpha:.3),n(y)&&(y=xe.scrollBarFade!=null?xe.scrollBarFade:!0),n(x)&&(x=xe.scrollBarH!=null?xe.scrollBarH:!0),n(I)&&(I=xe.scrollBarV!=null?xe.scrollBarV:!0),h&&(y=xe.scrollBarFade!=null?xe.scrollBarFade:!1),n(w)&&(w=xe.slide!=null?xe.slide:!0),n(E)&&(E=xe.slideFactor!=null?xe.slideFactor:.9),n(A)&&(A=xe.slideSnap!=null?xe.slideSnap:"vertical"),n(T)&&(T=xe.interactive!=null?xe.interactive:!0),n(B)&&(B=xe.shadowColor!=null?xe.shadowColor:"rgba(0,0,0,.3)"),n(F)&&(F=xe.shadowBlur!=null?xe.shadowBlur:20),n(P)&&(P=xe.paddingV!=null?xe.paddingV:f),n(D)&&(D=xe.paddingH!=null?xe.paddingH:f),n(Y)&&(Y=xe.scrollWheel!=null?xe.scrollWheel:!0),n(_)&&(_=xe.damp!=null?xe.damp:null),n(V)&&(V=xe.titleBar!=null?xe.titleBar:null),n(b)&&(b=xe.titleBarColor!=null?xe.titleBarColor:null),n(Z)&&(Z=xe.titleBarBackgroundColor!=null?xe.titleBarBackgroundColor:null),n($)&&($=xe.titleBarHeight!=null?xe.titleBarHeight:null),n(Q)&&(Q=xe.draggable!=null?xe.draggable:null),n(re)&&(re=xe.boundary!=null?xe.boundary:null),n(G)&&(G=xe.onTop!=null?xe.onTop:null),n(L)&&(L=xe.close!=null?xe.close:null),n(c)&&(c=xe.closeColor!=null?xe.closeColor:null),n(d)&&(d=xe.cancelCurrentDrag!=null?xe.cancelCurrentDrag:!1),n(o)&&(o=xe.fullSize!=null?xe.fullSize:null),n(S)&&(S=xe.fullSizeColor!=null?xe.fullSizeColor:null),n(X)&&(X=xe.resizeHandle!=null?xe.resizeHandle:null),n(m)&&(m=xe.collapse!=null?xe.collapse:!1),n(O)&&(O=xe.collapseColor!=null?xe.collapseColor:null),n(de)&&(de=xe.collapsed!=null?xe.collapsed:!1),n(R)&&(R=xe.optimize!=null?xe.optimize:!0),n(N)&&(N=xe.resizeBoundary!=null?xe.resizeBoundary:null),n(se)&&(se=xe.resizeVisible!=null?xe.resizeVisible:!1),n(ie)&&(ie=xe.continuous!=null?xe.continuous:!1),ie!="horizontal"&&ie!="vertical"&&(ie=!1),this.continuous=ie,V===!1&&(V=null),n(V)||(n($)&&($=30),r=r-$);var U=this;U.optimize=R,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var ue=this.backing=new t.Shape({style:!1});this.addChild(ue);var ke=new Fe.Shape;ke.type="WindowBacking";var ne=ke.graphics;if(this.addChild(ke),i)var ve=U.content=i;i=this.contentContainer=new t.Container({style:!1}),this.addChild(i),i.mask=ke;var we;if(!T)var ee=new Fe.Shape;if(s>0){var le=new Fe.Shape;this.addChild(le)}var ye=V?0:u,oe=0;function Me(){U.setBounds(0,0,e,r),ue.graphics.c().f(l).rc(0,0,e,r,ye,ye,u,u),B!=-1&&F>0&&(ue.shadow=new Fe.Shadow(B,4,4,F)),s>0&&(u?le.graphics.c().s(a).ss(s,"square","miter").rc(0,0,e,r,ye,ye,u,u):le.graphics.c().s(a).ss(s,"square","miter").dr(0,0,e,r)),n(st)||(st.widthOnly=U.width+s,ze.widthOnly=U.width+s-1,U.setBounds(0,-$,U.width,r+$)),Ye&&(V?(Ye.pos({x:e-Math.max(u/2,10)-Ye.width/2,y:$/2,reg:!0}),ze.widthOnly=Ye.x-15,oe=U.width-ze.width):Ye.pos(Math.max(u/2,10)/2,Ye.height/2,!0,!1,U)),Ge&&(Ge.pos({x:e-Math.max(u/2,10)-Ge.width/2,y:$/2,reg:!0}),Ye&&Ge.mov(-Ye.width-10),V&&(ze.widthOnly=Ge.x-15),oe=U.width-ze.width),Ae&&(Ae.pos({x:e-Math.max(u/2,10)-Ae.width/2,y:$/2,reg:!0}),Ye&&Ae.mov(-Ye.width-10),Ge&&Ae.mov(-Ge.width-10),V&&(ze.widthOnly=Ae.x-15),oe=U.width-ze.width)}Me();var ae=this.scrollBar={};if(ae.color=g,ae.size=6,ae.minSize=ae.size*2,ae.spacing=3.5+s/2,ae.margin=0,ae.corner=ae.size/2,ae.showTime=.5,ae.fadeTime=3,C){var Se=ae.horizontal=new t.Shape({style:!1}),Le=Se.graphics;Se.alpha=k,this.addChild(Se),h&&Se.drag({localBoundary:!0});var Ce=ae.vertical=new t.Shape({style:!1}),te=Ce.graphics;Ce.alpha=k,this.addChild(Ce),h&&Ce.drag({localBoundary:!0})}var Oe,Re,Xe,Qe,it,Be,Ke,He,he,me=!1;if(this.update=function(){C&&(Le.clear(),te.clear()),it=C?ae.size+ae.spacing*2:0,Be=i.getBounds()?i.getBounds().width:0,Ke=i.getBounds()?i.getBounds().height:0,Xe=x&&Be>e-D&&(C||v===!0||v=="auto"||v=="horizontal"),Qe=I&&Ke>r-P&&(C||v===!0||v=="auto"||v=="vertical"),U.scrollXMax=Be+D*2-e+(Qe?it+ae.margin:0),U.scrollYMax=Ke+P*2-r+(Xe?it+ae.margin:0),ne.clear();var Ne=s/2,ct=s/2,Rt=e-(Qe&&C?ae.size+ae.spacing*2:0)-(Qe?0:s),Ht=r-(Xe&&C?ae.size+ae.spacing*2:0)-(Xe?0:s);ne.f("rgba(0,0,0,0)").rc(Ne,ct,Rt,Ht,ye,ye,Qe&&C?0:Math.max(0,u-s/2),Xe&&C?0:Math.max(0,u-s/2)),ke.setBounds(U.getBounds().x,U.getBounds().y,U.getBounds().width,U.getBounds().height),t.expand(ke,0),T||(ee.graphics.c().f("red").dr(Ne,ct,Rt,Ht),i.hitArea=ee);var fn=Math.max(u,Math.min(ae.corner,ae.spacing)),rn=fn+s/2,$t=fn+(Qe?it:0)+s/2,xt=fn+s/2,Yt=fn+(Xe?it:0)+s/2,un,dn;Xe&&C&&(un=Math.max(ae.minSize,(e-rn-$t)*(e-rn-$t)/(Be+D+ae.margin)),Le.f(ae.color).rr(0,0,un,ae.size,ae.corner),Se.x=rn,Se.y=r-ae.size-ae.spacing,Oe=new t.Proportion(-U.scrollXMax,0,rn,e-un-$t,-1),h&&(Se.setBounds(0,0,un,ae.size),dn=new Fe.Rectangle(rn,Se.y,e-un-rn-$t,0),Se.dragBoundary(dn),Se.proportion=new t.Proportion(dn.x,dn.x+dn.width,0,-U.scrollXMax),Se.off("pressmove",He),He=Se.on("pressmove",function(){U.dispatchEvent("scrolling"),ee&&(ee.x=-i.x,ee.y=-i.y),i.x=Se.proportion.convert(Se.x),wt()}))),Qe&&C&&(un=Math.max(ae.minSize,(r-xt-Yt)*(r-xt-Yt)/(Ke+P+ae.margin)),te.f(ae.color).rr(0,0,ae.size,un,ae.corner),Ce.x=e-ae.size-ae.spacing,Ce.y=xt,Re=new t.Proportion(-U.scrollYMax,0,xt,r-un-Yt,-1),h&&(Ce.setBounds(0,0,ae.size,un),dn=new Fe.Rectangle(Ce.x,xt,0,r-un-xt-Yt),Ce.dragBoundary(dn),Ce.proportion=new t.Proportion(dn.y,dn.y+dn.height,0,-U.scrollYMax),Ce.off("pressmove",he),he=Ce.on("pressmove",function(){_&&(me=!0),U.dispatchEvent("scrolling"),ee&&(ee.x=-i.x,ee.y=-i.y),_?Gt=Ce.proportion.convert(Ce.y):i.y=Ce.proportion.convert(Ce.y),wt()}))),Ft(),clearTimeout(U.d2Timeout),U.d2Timeout=setTimeout(function(){Se&&Se.proportion&&(i.x=Se.proportion.convert(Se.x)),Ce&&Ce.proportion&&(i.y=Ce.proportion.convert(Ce.y))},50),clearTimeout(U.dTimeout),U.dTimeout=setTimeout(function(){$e()},300),$e(),wt()},this.resize=function(Ne,ct){n(Ne)&&(Ne=e),n(ct)&&(ct=r);var Rt=Math.max(20,u*2);V&&(Rt=Math.max(oe,Rt)),Ne<Rt&&(Ne=Rt),ct<20&&(ct=20),e=Ne,r=ct,Me();for(var Ht=0;Ht<i.numChildren;Ht++){var fn=i.getChildAt(Ht);fn.type=="Wrapper"&&ft(fn)}return X&&Ve(),U.update(),Gt=i.y,_&&Kt.immediate(Gt),U.dispatchEvent("resize"),U},!n(V)){n(Q)&&(Q=!0),typeof V=="string"&&(V=new t.Label({text:V,color:b,size:xe.size!=null?xe.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var Te=U.titleBarLabel=V;Te.noMouse(),n(Z)&&(Z="rgba(0,0,0,.2)"),U.titleBar=V=new t.Container(e,$,null,null,!1).centerReg(U).mov(0,-r/2-$/2);var ze=new t.Rectangle(V.width-1,V.height,red).alp(0).addTo(V);Te.setMask(ze,!0);var st=U.titleBar.backing=new t.Rectangle(e+s,$,Z,null,null,[u*.95,u*.95,0,0],!0,null,!1,!1).center(V);Te.center(V).pos({x:Math.max(u/2,Math.max(10,f)),reg:!0}),U.regX=0,U.regY=-$,U.setBounds(0,-$,e,r+$),Q?(V.cur("pointer"),V.on("mousedown",function(){U.drag({rect:re,currentTarget:!0,onTop:G})}),V.on("pressup",function(){U.noDrag(!1)})):V.on("mousedown",function(){})}if(L){n(c)&&(c=t.grey);var Ye=U.closeIcon=new t.Shape(-40,-40,80,80,null,!1);Ye.graphics.f(c).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),V?Ye.centerReg(U).scaleTo(V,null,50).pos({x:e-Math.max(u/2,10)-Ye.width/2,y:$/2,reg:!0}).expand(40):Ye.sca(.3).pos(Math.max(u/2,10)/2,Ye.height/2,!0,!1,U).expand(40),Ye.cur("pointer"),Ye.expand(),Ye.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var Ne=U.stage;U.removeFrom(),U.dispatchEvent("close"),Ne&&Ne.update()})}var nt,pe,Je,be,Ee,_e;if(!n(V)){if(o){U.fullSize=function(Ne){if(n(Ne)&&(Ne=!0),Ne==pe||!U.parent)return U;Ne?(Je=U.width,be=U.height,Ee=U.x,_e=U.y,U.resize(U.parent.width,U.parent.height),U.x=0,U.y=0,pe=!0,Ue.alpha=1,Ge.getChildAt(0).alpha=.01,U.dispatchEvent("fullsize")):(U.resize(Je,be-V.height),U.x=Ee,U.y=_e,pe=!1,Ue.alpha=0,Ge.getChildAt(0).alpha=1,U.dispatchEvent("originalsize")),U.stage&&U.stage.update()},n(S)&&(S=t.grey);var Ge=U.fullSizeIcon=new t.Rectangle(80,80,t.faint,S,16),Ue=new t.Shape().s(S).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(Ge).mov(40,40).alp(0);Ge.centerReg(U).scaleTo(V,null,42).pos({x:e-Math.max(u/2,10)-Ge.width/2,y:$/2,reg:!0}).expand(40),Ye&&Ge.mov(-Ye.width-10),Ge.cur("pointer"),Ge.expand(),pe=!1,Je=e,be=r,Ee=U.x,_e=U.y,Ge.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){pe?U.fullSize(!1):U.fullSize(!0)})}var tt=t.copy(U.getBounds(),!0);if(m){nt=de,U.collapse=function(Ne){if(n(Ne)&&(Ne=!0),Ne==nt)return U;Ne?(Ae.rot(180),U.backing.visible=!1,U.contentContainer.visible=!1,ke.visible=!1,Se&&(Se.visible=!1),Se&&(Ce.visible=!1),le&&(le.visible=!1),nt=!0,st.sha(B,5,5,F),X&&(U.resizeHandle.visible=!1),U.setBounds(tt.x,tt.y,tt.width,V.height),U.dispatchEvent("collapse")):(Ae.rot(0),U.backing.visible=!0,U.contentContainer.visible=!0,ke.visible=!0,Se&&(Se.visible=!0),Se&&(Ce.visible=!0),le&&(le.visible=!0),nt=!1,st.sha(null),X&&(U.resizeHandle.visible=!0),U.setBounds(tt.x,tt.y,tt.width,tt.height),U.dispatchEvent("expand")),U.stage&&U.stage.update()},n(O)&&(O=t.grey);var Ae=U.collapseIcon=new t.Triangle(90,90,90,t.faint,O,16);Ae.centerReg(U).scaleTo(V,null,42).pos({x:e-Math.max(u/2,10)-Ae.width/2,y:$/2,reg:!0}).expand(40),Ye&&Ae.mov(-Ye.width-10),Ge&&Ae.mov(-Ge.width-10),Ae.cur("pointer"),Ae.expand(),nt=!1,Je=e,be=r,Ee=U.x,_e=U.y,Ae.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){nt?U.collapse(!1):U.collapse(!0)})}}if(X){var Ze=new jr().loc(0,0,U).mov(U.width,U.height-(U.titleBar?U.titleBar.height:0)),lt=U.resizeHandle=new t.Rectangle(25,25,t.grey,t.white).alp(se?.5:.01).centerReg().rot(45).loc(0,0,Ze).drag({boundary:N,localBoundary:!0});lt.on("mouseover",function(){lt.alp(.5),lt.stage&&lt.stage.update()}),lt.on("mousedown",function(){lt.pressing=!0}),lt.on("mouseout",function(){lt.pressing||(se||lt.alp(.01),lt.stage&&lt.stage.update())}),lt.on("pressmove",function(){U.resize(Math.max(50,Ze.x+lt.x),Math.max(50,Ze.y+lt.y))}),lt.on("pressup",function(){lt.pressing=!1,se||lt.alp(.01),Ve(),lt.stage&&lt.stage.update()}),U.titleBar&&U.titleBar.on("pressup",Ve)}function Ve(Ne){U.resizeHandle.loc(0,0,Ze).top().mov(-Ze.x+U.width,-Ze.y+U.height-(U.titleBar?U.titleBar.height:0))}function ft(Ne){Ne.align=="right"?(Ne.x=D,Ne.resize(U.width-(Qe?ae.size+ae.spacing*2:D)-D*2)):(Ne.align=="center"||Ne.align=="middle",Ne.resize(U.width-(Qe?ae.size+ae.spacing*2:0)-D*2)),Ne.alpha=Ne.wrapperLastAlpha}if(Me(),this.add=function(Ne,ct,Rt,Ht){var fn="obj, index, center, replace",rn;if(rn=at(U.add,arguments,fn,U))return rn;var $t=Ne;if(!$t.getBounds()){je("Window.add() - please add content with bounds set");return}return Mn($t),n(ct)&&(ct=i.numChildren),Ht&&(ct=0,U.removeAll()),Rt?($t.center(U).addTo(i,ct).mov(0,$?$/2:0),i.height>U.height-($||0)&&$t.loc(null,0),i.width>U.width&&$t.loc(0)):$t.addTo(i,ct),$t.type=="Wrapper"&&(Ce.alpha=0,x=!1,$t.wrapperLastAlpha=$t.alpha,$t.alpha=0,this.added(function(){ft($t),U.resize(),Se.alpha=1,Ce.alpha=1})),$t.x==0&&($t.x=D),$t.y==0&&($t.y=P),U.update(),U},ve){var ot=t.makeContent(ve,e),ut=["header","message","text","display","buttons","config"];ut.forEach(function(Ne){ot[Ne]&&(U[Ne]=ot[Ne])}),U.label=U.message,U.add(ot,0,!0)}this.remove=function(Ne){return i.removeChild(Ne),U.update(),U},this.removeAll=function(){return i.removeAllChildren(),U.update(),U};function $e(Ne){ie||(n(we)&&(we=U.stage||j.zdf.stage),n(Ne)&&(Ne=!0),Ne?t.dragBoundary(i,new Fe.Rectangle(0,0,Xe?-U.scrollXMax:0,Qe?-U.scrollYMax:0)):t.dragBoundary(i,new Fe.Rectangle(-1e3,-1e3,we.width+2e3,we.height+2e3)))}var Pt=!1;v&&i.on("mousedown",function(){Pt||t.Ticker.add(yt,i.stage),Pt=!0,Xe&&C&&y&&t.animate(Se,{alpha:k},ae.showTime),Qe&&C&&y&&t.animate(Ce,{alpha:k},ae.showTime)});function yt(){Gt=i.y,_&&Kt.immediate(Gt),C?Ft():U.dispatchEvent("scrolling")}function wt(){U.optimize&&(we=U.stage,i.loop(function(Ne){!Ne.hitTestBounds||!Ne.stage||(Ne.hitTestBounds(we)?(Ne.visible=!0,Ne.loop&&Ne.loop(function(ct){ct.hitTestBounds&&(ct.hitTestBounds(we)?ct.visible=!0:ct.visible=!1)})):Ne.visible=!1)}))}function Ft(){wt(),U.dispatchEvent("scrolling"),ee&&(ee.x=-i.x,ee.y=-i.y),Xe&&C&&(Se.x=Oe.convert(i.x)),Qe&&C&&(Ce.y=Re.convert(i.y))}this.on("added",function(){_t(50)},null,!0);function _t(Ne){n(Ne)&&(Ne=100),Mn(U),v&&setTimeout(function(){i&&(t.drag({obj:i,currentTarget:!0,axis:ie,localBoundary:!0,slide:w,slideFactor:E,slideSnap:x&&(v===!0||v=="auto"||v=="horizontal")||I&&(v===!0||v=="auto"||v=="vertical")?A:!1}),i.removeAllEventListeners("slidestart"),i.on("slidestart",function(){U.dispatchEvent("slidestart")}),i.removeAllEventListeners("slidestop"),!C&&R&&(U.zDE&&i.off(U.zDE),U.zDE=i.on("mousedown",()=>{U.zTI&&t.Ticker.remove(wt)}),U.zME&&i.off(U.zME),U.zME=i.on("pressmove",wt),U.zSTA&&i.off(U.zSTA),U.zSTA=i.on("slidestart",function(){U.zTI=t.Ticker.add(wt)}),U.zSTO&&i.off(U.zSTO),U.zSTO=i.on("slidestop",function(ct){U.zTI&&t.Ticker.remove(U.zTI)})),i.on("slidestop",function(ct){w&&nn(ct),U.dispatchEvent("slidestop")}),i.getBounds()&&i.getBounds().width>0&&$e())},Ne)}this.cancelCurrentDrag=function(){U.contentContainer&&U.contentContainer.noDrag(!1),setTimeout(function(){i&&(t.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:w,slideFactor:E,slideSnap:x&&(v===!0||v=="auto"||v=="horizontal")||I&&(v===!0||v=="auto"||v=="vertical")?A:!1}),i.getBounds()&&i.getBounds().width>0&&$e())},300)};var Jt;this.added(function(Ne){we=Ne,Jt=we.on("stagemousemove",function(ct){U.windowMouseX=ct.stageX/t.scaX,U.windowMouseY=ct.stageY/t.scaY})}),w?i.on("slidestop",nn):i.on("mousedown",function(){i.stage.on("stagemouseup",nn,null,!0)}),d&&(U.blurEvent=function(){U.cancelCurrentDrag(),nn()},document.WW.addEventListener("blur",U.blurEvent));function nn(){t.Ticker.remove(yt),Pt=!1,Xe&&y&&C&&t.animate(Se,{alpha:0},ae.fadeTime),Qe&&y&&C&&t.animate(Ce,{alpha:0},ae.fadeTime)}var Zt=!1,Et,Ut=0,qe=0,gt=0,St=0,Ct=300,Bt=2;function vt(){Et=Date.now(),t.Ticker.add(Vt,i.stage)}function bt(){Zt||(U.dispatchEvent("hoverout"),Zt=!0),t.Ticker.remove(Vt)}function Vt(){if(!i.stage){Zt||(U.dispatchEvent("hoverout"),Zt=!0),t.Ticker.remove(Vt);return}Math.abs(Ut-U.windowMouseX)>Bt||Math.abs(qe-U.windowMouseY)>Bt?(Zt||(U.dispatchEvent("hoverout"),Zt=!0),Et=Date.now(),Ut=U.windowMouseX,qe=U.windowMouseY):Date.now()-Et>Ct&&((Math.abs(gt-U.windowMouseX)>Bt||Math.abs(St-U.windowMouseY)>Bt)&&(U.contentMouse=i.globalToLocal(U.windowMouseX,U.windowMouseY),U.dispatchEvent("hoverover"),gt=U.windowMouseX,St=U.windowMouseY,Zt=!1),Et=Date.now())}if(T){var qt,jt;i.on("mousedown",function(Ne){we=Ne.target.stage,qt=Ne.stageX/t.scaX,jt=Date.now()}),i.on("click",function(Ne){Date.now()-jt<600&&Math.abs(Ne.stageX/t.scaX-qt)<5&&(U.contentMouse=i.globalToLocal(Ne.stageX/t.scaX,Ne.stageY/t.scaY),U.dispatchEvent("select"))}),i.on("mouseover",vt),i.on("mouseout",bt)}var Gt=U.scrollY;U.scrollWindow=function(ct){if(Qe&&U.stage&&U.hitTestPoint(U.windowMouseX,U.windowMouseY)&&U.contains(U.stage.getObjectUnderPoint(U.windowMouseX*t.scaX,U.windowMouseY*t.scaY))){n(ct)&&(ct=event);var Rt=ct.detail?ct.detail*-19:ct.wheelDelta;n(Rt)&&(Rt=ct.deltaY*-19),Gt+=Rt,Gt=Math.max(-U.scrollYMax,Math.min(0,Gt)),_||(U.scrollY=Gt,i.stage.update()),me=!1}R&&wt()},Y&&(j.addEventListener("mousewheel",U.scrollWindow),j.addEventListener("wheel",U.scrollWindow),j.addEventListener("DOMMouseScroll",U.scrollWindow));var pn=!1,Kt;function Mn(Ne){_&&!pn&&Ne.stage&&(pn=!0,Kt=new t.Damp(U.scrollY,_),U.dampTicker=t.Ticker.add(function(){if(!Pt){if(U.scrollY!=null&&Gt!=null&&U.scrollY!=Gt&&Math.round(U.scrollY)==Math.round(Gt)){me=!1;return}n(Gt)||(i.y=Kt.convert(Gt)),me||Ft()}},Ne.stage))}this._enabled=!0,Object.defineProperty(U,"enabled",{get:function(){return U._enabled},set:function(Ne){Ne?_t():(clearTimeout(U.dTimeout),t.noDrag(i)),Ot(U,Ne)}}),this._scrollEnabled=!0,Object.defineProperty(U,"scrollEnabled",{get:function(){return U._scrollEnabled},set:function(Ne){Ne?(_t(),h&&(He&&(Se.mouseEnabled=!0),he&&(Ce.mouseEnabled=!0)),j.addEventListener("mousewheel",U.scrollWindow),j.addEventListener("wheel",U.scrollWindow),j.addEventListener("DOMMouseScroll",U.scrollWindow)):(clearTimeout(U.dTimeout),t.noDrag(i),h&&(He&&(Se.mouseEnabled=!1),he&&(Ce.mouseEnabled=!1)),j.removeEventListener("mousewheel",U.scrollWindow),j.removeEventListener("wheel",U.scrollWindow),j.removeEventListener("DOMMouseScroll",U.scrollWindow)),U._scrollEnabled=Ne}}),Object.defineProperty(U,"scrollX",{get:function(){return i.x},set:function(Ne){i.x=Ne,clearTimeout(U.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Ft()}}),Object.defineProperty(U,"scrollY",{get:function(){return i.y},set:function(Ne){i.y=Ne,i.y=Gt=Ne,_&&Kt.immediate(Gt),clearTimeout(U.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Ft()}}),Object.defineProperty(U,"backgroundColor",{get:function(){return l},set:function(Ne){l=Ne,Me()}}),Object.defineProperty(U,"borderColor",{get:function(){return a},set:function(Ne){a=Ne,Me()}}),Object.defineProperty(U,"borderWidth",{get:function(){return s},set:function(Ne){s=Ne,Me()}}),Object.defineProperty(U,"fullSized",{get:function(){return pe},set:function(Ne){U.fullSize&&U.fullSize(Ne)}}),Object.defineProperty(U,"collapsed",{get:function(){return nt},set:function(Ne){U.collapse&&U.collapse(Ne)}}),de&&(nt=!1,U.collapsed=!0),U.titleBar&&(U.collapseEvent=U.titleBar.on("dblclick",function(){U.collapsed=!U.collapsed})),q!==!1&&t.styleTransforms(this,xe),this.clone=function(Ne){n(Ne)&&(Ne=!0);var ct=U.cloneProps(new t.Window(e,r,null,l,J,fe,f,u,v,C,h,ae.color,k,y,x,I,w,E,A,p,T,B,F,D,P,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce));return Ne&&(U.contentContainer.cloneChildren(ct.contentContainer),ct.update()),ct},this.doDispose=function(Ne,ct,Rt){return Y&&(j.removeEventListener("mousewheel",U.scrollWindow),j.removeEventListener("wheel",U.scrollWindow),j.removeEventListener("DOMMouseScroll",U.scrollWindow)),i&&(U.zDE&&i.off(U.zDE),U.zME&&i.off(U.zME),U.zSTA&&i.off(U.zSTA),U.zSTO&&i.off(U.zSTO),U.zTI&&t.Ticker.remove(U.zTI)),U.titleBar&&U.titleBar.removeAllEventListeners(),Jt&&we&&we.off("stagemousemove",Jt),U.resizeHandle&&U.resizeHandle.removeAllEventListeners(),U.blurEvent&&j.removeEventListener("blur",U.blurEvent),typeof Vt<"u"&&t.Ticker.remove(Vt),n(yt)||t.Ticker.remove(yt),Rt||this.zimContainer_dispose(!0),i=U.contentContainer=null,!0}},t.extend(t.Window,t.Container,["clone","dispose"],"zimContainer",!1),t.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.Page=function(e,r,i,l,a,s,f,u,v,C,h){var g="width, height, color, color2, angle, pattern, scalePattern, cache, style, group, inherit",k;if(k=at(t.Page,arguments,g,this))return k;De("58.3"),this.group=C;var y=v===!1?{}:t.getStyle("Page",this.group,h);n(e)&&(e=y.width!=null?y.width:j.zdf.width),n(r)&&(r=y.height!=null?y.height:j.zdf.height),this.zimContainer_constructor(0,0,e,r,!1),this.type="Page";var x=this;n(a)&&(a=y.angle!=null?y.angle:90),n(i)&&(i=y.color!=null?y.color:t.light),n(l)&&(l=y.color2!=null?y.color2:null),n(s)&&(s=y.pattern!=null?y.pattern:null),n(f)&&(f=y.scalePattern!=null?y.scalePattern:"fill"),n(u)&&(u=y.cache!=null?y.cache:!1),n(l)||(i=new t.GradientColor([i,l],[0,1],a),l=null);var I=this.backing=new t.Rectangle({width:e,height:r,color:i,scaleDimensions:!1,style:!1}).addTo(this);n(u)&&(!n(l)||!n(s))&&(u=!0),u&&I.cache(),n(s)||(this.pattern=s.addTo(this),f&&s.scaleTo(this,100,100,f).center(this),u&&s.cache()),Object.defineProperty(x,"color",{get:function(){return i},set:function(w){n(w)&&(w=t.black),i=w,x.backing.color=w}}),v!==!1&&t.styleTransforms(this,y),this.clone=function(w){n(w)&&(w=!1),i.type&&(l=null);var E=x.cloneProps(new t.Page(e,r,i,l,vertical,s,f,u,v,C,h));return w&&x.cloneChildren(E),E}},t.extend(t.Page,t.Container,["clone"],"zimContainer",!1),t.Layer=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z){var $="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",Q;if(Q=at(t.Layer,arguments,$,this))return Q;De("58.5"),this.group=b;var re=V===!1?{}:t.getStyle("Layer",this.group,Z);n(e)&&(e=re.width!=null?re.width:500),n(r)&&(r=re.height!=null?re.height:500),this.zimContainer_constructor(0,0,e,r,!1),this.type="Layer";var G=this;G.distX=40,G.distY=0,n(i)&&(i=re.titleBar!=null?re.titleBar:"LAYER");var L=i,c=i,d=!0;n(a)&&(a=re.backgroundColor!=null?re.backgroundColor:t.lighter),n(s)&&(s=re.rollBackgroundColor!=null?re.rollBackgroundColor:t.white),n(f)&&(f=re.selectedBackgroundColor!=null?re.selectedBackgroundColor:t.granite),n(v)&&(v=re.color!=null?re.color:t.granite),n(C)&&(C=re.rollColor!=null?re.rollColor:t.granite),n(h)&&(h=re.selectedColor!=null?re.selectedColor:t.moon),n(k)&&(k=re.borderWidth!=null?re.borderWidth:1),n(y)&&(y=re.borderColor!=null?re.borderColor:a),(y<0||k<0)&&(y=k=null),n(x)&&(x=re.dashed!=null?re.dashed:!0),n(I)&&(I=re.titleBar!=null?re.titleBar:null),n(w)&&(w=re.titleBarWidth!=null?re.titleBarWidth:100);var o=w;if(n(E)&&(E=re.titleBarHeight!=null?re.titleBarHeight:40),n(A)&&(A=re.titleBarX!=null?re.titleBarX:null),n(p)&&(p=re.titleBarY!=null?re.titleBarY:null),n(T)&&(T=re.titleBarDraggable!=null?re.titleBarDraggable:!0),n(B)&&(B=re.close!=null?re.close:!0),n(F)&&(F=re.closeColor!=null?re.closeColor:f),n(D)&&(D=re.closeBackgroundColor!=null?re.closeBackgroundColor:f),n(P)&&(P=re.closeIndicatorColor!=null?re.closeIndicatorColor:h),n(Y)&&(Y=re.anchor!=null?re.anchor:!0),n(_)&&(_=re.onTop!=null?re.onTop:!0),T||(Y=!1),G.anchor=Y,B&&(w+=30),I=t.merge({borderColor:f},I,{onTop:_,events:!0,visible:!1,ghostColor:y,ghostWidth:k,ghostDashed:x,ghostHidden:!0}),n(l)&&(l=re.titleBarContainer!=null?re.titleBarContainer:null),n(l))if(j.zdf)l=j.zdf.stage;else{je("zim Layer(): Please pass in a reference to a container with bounds set.");return}G.active=!1,G.turnOff=function(){G.active=!1,B&&(G.checkBox.visible=!1),G.transformControls.remove(),G.mouseChildren=!0,G.button.backgroundColor=a,G.button.rollBackgroundColor=s,G.button.color=v,G.button.rollColor=v,G.transformControls.allowToggleOff(),G.resizeChildren&&G.resizeChildren()},G.turnOn=function(){G.active=!0,B&&(G.checkBox.visible=!0,G.checkBox.checked=!0),G.button.backgroundColor=f,G.button.rollBackgroundColor=f,G.button.color=h,G.button.rollColor=h,G.mouseChildren=!1,G.transformControls.add(),G.transformControls.allowToggleOn()};var S;G.titleBarPos=function(O,de){if(G.titleBar)return G.titleBar.pos?(G.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),S.update()):(G.distX=O,G.distY=de),d=!1,G};var X=G.visible;G.visible=!1;var m=mt();this.added(function(O){S=O,G.transform(I),k>=0&&G.transformControls.hideGhost(),setTimeout(function(){function de(){return G.localToLocal(0,0,l)}G.visible=X,k>=0&&setTimeout(function(){G.transformControls.showGhost(),G.stage&&G.stage.update()},200),S=O;var R=G.titleBar=new t.Container(w,E).reg(0,E).loc(G,null,l).mov(G.distX,G.distY);T&&R.drag({all:!0,boundary:new t.Boundary(0,E,l.width-w,l.height-E),localBoundary:!0}),(G.distX!=40||G.distY!=0)&&R.pos(G.distX,G.distY),B&&(G.checkBox=new t.CheckBox({borderColor:F,backgroundColor:D,indicatorColor:P,size:20,startChecked:!0}).center(R).pos(0,null,!0).change(function(){G.turnOff(),G.dispatchEvent("transformhide")}),G.checkBox.visible=!1),R.mouseChildren=!0,R.layer=G,G.resetTitleBar=function(){G.distX=40,G.distY=0,d=!0,G.move(!0),G.stage&&G.stage.update()},(typeof c=="string"||typeof c=="number")&&(c=new t.Label({text:c,color:v,rollColor:C,size:re.size!=null?re.size:18,group:this.group})),G.label=c,G.label.center(R),G.button=new t.Button({shadowBlur:-1,width:o,height:E-1,label:G.label,color:v,rollColor:C,backgroundColor:a,rollBackgroundColor:s,corner:re.corner!=null?re.corner:0,inherit:t.copy(re)}).addTo(R),G.button.on("mousedown",function(){l.loop(function(K){K&&K!=R&&K.layer&&K.layer.turnOff&&K.layer.active&&K.layer.turnOff()}),G.active||(G.turnOn(),G.dispatchEvent("transformshow")),R.top()}),G.button.on("pressmove",function(){N()}),G.button.on("pressup",function(){N(!0);var K=G.localToLocal(0,0,l);G.distX=R.x-K.x,G.distY=R.y-K.y,R.top(),!ie()&&T&&(K=G.localToGlobal(0,0),G.button.hitTestPoint(K.x,K.y)&&G.resetTitleBar())});function N(K){if(d&&T){var xe=l.localToLocal(R.x-G.distX,R.y-G.distY,G.parent),J=G.localToLocal(G.regX,G.regY,G.parent),fe=G.localToLocal(0,0,G.parent);G.x=xe.x+(J.x-fe.x),G.y=xe.y+(J.y-fe.y),G.transformControls.resize(K),se(G),G.stage&&G.stage.update()}}function se(K){K.loop(function(xe){xe.type=="Layer"&&(G.titleBarDraggable&&xe.move(),xe.transformControls.ghost&&xe.transformControls.resize(),se(xe))})}G.button.on("dblclick",function(){T&&G.resetTitleBar()}),G.turnOff(),G.on("transformed",function(K){(K.transformType=="move"||K.transformType=="size"||K.transformType=="stretch"||K.transformType=="rotate")&&(T&&G.move(),se(G))});function ie(){if(R.x==0||R.y==R.height||R.x==l.width-R.width||R.y==l.height)return!0}G.move=function(K){!K&&!d&&G.anchor&&ie()||(R.loc(de()).mov(G.distX,G.distY),R.x<0&&(d=!1,R.x=0),R.y<R.height&&(d=!1,R.y=R.height),R.x>l.width-R.width&&(d=!1,R.x=l.width-R.width),R.y>l.height&&(d=!1,R.y=l.height),G.anchor||(d=!0))},G.on("transformhide",function(){G.turnOff(),l.loop(function(K){K&&K!=R&&K.layer&&K.layer.turnOff&&K.layer.active&&K.layer.turnOff()})}),G.resizeChildren=function(K){G.transformControls.resize(K),G.loop(function(xe){xe.transformControls&&(xe.transformControls.visible&&xe.transformControls.hide(),xe.type=="Layer"?xe.resizeChildren():xe.transformControls.resize())})},G.resize=function(K){return G.move(),G.resizeChildren(K),G},G.toggled=!1;function q(){G.toggled?(l.loop(function(K){K&&K!=R&&K.layer&&K.layer.turnOff&&K.layer.active&&K.layer.turnOff()}),G.turnOn(),G.dispatchEvent("transformshow")):(R.top(),G.turnOff(),l.loop(function(K){K&&K!=R&&K.layer&&K.layer.turnOff&&K.layer.active&&K.layer.turnOff()}),G.dispatchEvent("transformhide")),G.stage&&G.stage.update()}if(G.toggle=function(K){return n(K)?G.toggled=!G.toggled:G.toggled=K,q(),G},Object.defineProperty(G,"titleBarDraggable",{get:function(){return T},set:function(K){T=K,T?R.drag({all:!0,boundary:t.Boundary(0,40,l.width-w,l.height-E),localBoundary:!0}):R.noDrag(!1)}}),G.stageUpEvent=S.on("stagemouseup",function(){G.transformControls.visible&&R.top()}),!n(A)||!n(p)){d=!1;var z=n(A)?R.x:A,ce=n(p)?R.y-E:p;G.titleBarStartX=A,G.titleBarStartY=p,G.titleBarPos(z,ce);var Ie=G.parent.localToLocal(G.x,G.y,l);G.distX=R.x-Ie.x,G.distY=R.y-Ie.y}},50)},m=="s"?.05:50),V!==!1&&t.styleTransforms(this,re),this.clone=function(){return G.cloneProps(new t.Layer(e,r,L,l,a,s,f,u,v,C,h,g,k,y,x,I,o,E,A,p,T,B,F,D,P,Y,_,V,this.group,Z))},this.dispose=function(O,de,R){return G.stageUpEvent&&S.off("stagemouseup",G.stageUpEvent),l&&l.loop(function(N){N.layer=null}),G.transformControls.dispose(),G.transformControls=null,R||this.zimContainer_dispose(!0),G.titleBar.layer=null,G.titleBar.dispose(),G.checkBox=G.button=null,i=G.titleBar=I=null,!0}},t.extend(t.Layer,t.Container,["clone","dispose"],"zimContainer",!1),t.Waiter=function(e,r,i,l,a,s,f,u,v,C,h){var g="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",k;if(k=at(t.Waiter,arguments,g,this))return k;De("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=C;var y=v===!1?{}:t.getStyle(this.type,this.group,h),x=mt(r);n(r)&&(r=y.speed!=null?y.speed:x=="s"?.6:600),n(i)&&(i=y.foregroundColor!=null?y.foregroundColor:t.white),n(l)&&(l=y.backgroundColor!=null?y.backgroundColor:"orange"),n(a)&&(a=y.corner!=null?y.corner:16),n(s)&&(s=y.shadowColor!=null?y.shadowColor:"rgba(0,0,0,.3)"),n(f)&&(f=y.shadowBlur!=null?y.shadowBlur:14),n(u)&&(u=y.fadeTime!=null?y.fadeTime:0);var I=40,w=3,E=I*.6/2,A=(I-E*2)/2,p=w*(E*2+A)+A;this.setBounds(-p/2,-I/2,p,I);var T=this,B,F=this.display=new t.Shape({style:!1});this.addChild(F),F.setBounds(0,0,p,I),F.regX=p/2,F.regY=I/2;var D=F.graphics;D.f(l);var P=a;Array.isArray(P)||(P=[a,a,a,a]),D.rc(0,0,p,I,P[0],P[1],P[2],P[3]),s!=-1&&f>0&&(F.shadow=new Fe.Shadow(s,3,3,f)),F.on("click",function($){$.stopImmediatePropagation()});var Y=new t.Container({style:!1});this.addChild(Y);for(var _,V=0;V<w;V++)_=new Fe.Shape,_.graphics.f(i).dc(0,0,E),_.x=(V-(w-1)/2)*(E*2+A),Y.addChild(_),_.cache(-E,-E,E*2,E*2),_.alpha=0;this.hide=function(){u>0?T.animate({obj:{alpha:0},time:u,call:$}):$();function $(){if(T.parent&&T.parent.removeChild(T),B=T.stage,B&&B.update(),T.zimAccessibility){var Q=T.zimAccessibility;Q.resize(T),b?b.focus():T.zimTabTag.nextSibling.focus(),setTimeout(function(){Q.talk("Waiter has finished.")},50)}}return T.toggled=!1,T};var b,Z=[];this.show=function(){var $="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(n(e))if(j.zdf)e=j.zdf.stage;else{je($);return}else if(e.getBounds){if(n(e.stage)){je("zim display - Waiter(): The container must have a stage property");return}}else{je($);return}for(var Q,re=0,G=r*(x=="s"?1e3:1),L=0;L<Y.numChildren;L++)Y&&Z.push(setTimeout(function(){Q=Y.getChildAt(re),Fe.Tween.get(Q,{loop:!0}).to({alpha:1},G/w/2).wait(G/w).to({alpha:0},G/w).wait(G-G/w-G/w/2),re++},L*G/w));if(T.ticker=Fe.Ticker.on("tick",function(){e.stage.update()}),T.x=e.getBounds().width/2,T.y=e.getBounds().height/2,e.addChild(T),u>0&&(T.alpha=0,T.animate({alpha:1},u)),T.zimAccessibility){var c=T.zimAccessibility;setTimeout(function(){c.activatedObject&&(b=c.activatedObject.zimTabTag)},50),c.resize(T),c.talk(T.zimTabTag.getAttribute("aria-label"))}return T.toggled=!0,T},T.toggle=function($){return $===!0?T.show():$===!1||T.parent?T.hide():T.show(),T},v!==!1&&t.styleTransforms(this,y),this.clone=function(){return T.cloneProps(new t.Waiter(e,r,i,l,a,s,f,u,v,this.group,h))},this.dispose=function($,Q,re){T.ticker&&Fe.Ticker.off("tick",T.ticker),Fe.Tween.removeTweens(T),T.removeFrom();for(var G=0;G<Y.numChildren;G++){var L=Y.getChildAt(G);clearInterval(Z[G]),Fe.Tween.removeTweens(L)}return re||this.zimContainer_dispose(!0),!0}},t.extend(t.Waiter,t.Container,["clone","dispose"],"zimContainer",!1),t.ProgressBar=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B){var F="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",D;if(D=at(t.ProgressBar,arguments,F,this))return D;De("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=T;var P=p===!1?{}:t.getStyle(this.type,this.group,B);n(r)&&(r=P.foregroundColor!=null?P.foregroundColor:t.green),n(i)&&(i=P.backgroundColor!=null?P.backgroundColor:t.charcoal),n(l)&&(l=P.borderColor!=null?P.borderColor:i),n(a)&&(a=P.borderWidth!=null?P.borderWidth:null),n(v)&&(v=P.labelPosition!=null?P.labelPosition:"bottom"),n(e)&&(e=P.barType!=null?P.barType:"circle"),n(s)&&(s=P.padding!=null?P.padding:e=="circle"?2:-.5),n(h)&&(h=P.corner!=null?P.corner:15),n(g)&&(g=P.shadowColor!=null?P.shadowColor:"rgba(0,0,0,.3)"),n(k)&&(k=P.shadowBlur!=null?P.shadowBlur:14),n(y)&&(y=P.backing!=null?P.backing.clone():null),n(I)&&(I=P.fastClose!=null?P.fastClose:!0),l<0||a<0?l=a=null:l!=null&&a==null&&(e=="circle"?a=10:a=2);var Y=mt(x);n(x)&&(x=P.delay!=null?P.delay:Y=="s"?.1:100),n(E)&&(E=P.autoHide!=null?P.autoHide:!0),n(f)&&(f=P.label!=null?P.label:null),n(u)&&(u=P.color!=null?P.color:r),n(A)&&(A=P.width!=null?P.width:e=="circle"?40:200),(typeof f=="string"||typeof f=="number")&&(f=new t.Label({text:f,color:u,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!n(C)&&n(f)&&(f=new t.Label("")),this.label=f;var _=30,V=this,b=0;V.visible=!1,setTimeout(function(){V.visible=!0,V.stage&&V.stage.update()},x);var Z;if(e=="circle")A=A/2,y=this.backing=new t.Circle(A,"rgba(0,0,0,0)",i,a,null,null,null,null,!1).addTo(V),Z=this.bar=new t.Shape({style:!1}).addTo(V).loc(y.x,y.y).rot(-90);else{if(g!=-1&&k>0){var $=new t.Rectangle(A-2,_-2,i,null,null,h,null,null,null,!1).addTo(this);$.shadow=new Fe.Shadow(g,3,3,k)}y=L(y);var Q=h;Array.isArray(Q)||(Q=[h,h,h,h]);var re=(s+a/2)*1.2;Z=this.bar=new t.Rectangle(A-(s+a/2)*1.8,_-(s+a/2)*1.8,r,null,null,[Q[0]-re,Q[1]-re,Q[2]-re,Q[3]-re],null,null,null,!1).center(this);var G=this.mask=new t.Rectangle(A-(s+a/2)*1.8,_-(s+a/2)*1.8,null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1);Z.setMask(G)}function L(S){var X;if(V.backing?(X=V.getChildIndex(V.backing),V.removeChild(V.backing)):X=V.numChildren,V.border&&V.removeChild(V.border),!n(S)&&S.type=="Pattern"){var m=S;S=V.backing=new t.Rectangle(A,_,i,null,null,h,null,null,null,!1).addTo(V,X),S.pattern=m,m.center(S),m.setMask(S.shape),a&&(V.border=new t.Rectangle(A,_,"rgba(0,0,0,0)",l,a,h,null,null,null,!1).addTo(V,X+1))}else S=V.backing=n(S)?new t.Rectangle(A,_,i,l,a,h,null,null,null,!1).addTo(V,X):y.addTo(V,X);return S}V.setBacking=function(S){L(S),V.stage&&V.stage.update()},y.on("click",function(S){S.stopImmediatePropagation()}),n(f)||(f.scaleX=f.scaleY=.8,f.startText=f.text,n(C)||(f.text=f.startText+"  0%"),f.center(V),v=="above"?f.y-=60:f.y+=60,f.alpha=.8),this.hide=function(){var S=V.stage;if(V.parent&&V.parent.removeChild(V),V.backing.type=="Pattern"&&V.backing.pauseInterval&&V.backing.pauseInterval(),S&&S.update(),V.zimAccessibility){var X=V.zimAccessibility;X.resize(V),c?c.focus():V.zimTabTag.nextSibling.focus(),setTimeout(function(){X.talk("Progress Bar has finished.")},50)}return V.toggled=!1,V};var c;this.show=function(){var S="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(n(w))if(j.zdf)w=j.zdf.stage;else{je(S);return}else if(w.getBounds){if(n(w.stage)){je("zim display - Waiter(): The container must have a stage property");return}}else{je(S);return}if(V.timeOut&&clearTimeout(V.timeOut),d(0),V.zimActiveLoader&&V.zimActiveLoader.on("progress",function(m){b=m.progress*100,d(b)}),V.center(w),V.backing.type=="Pattern"&&V.backing.pauseInterval&&V.backing.pauseInterval(!1),V.zimAccessibility){var X=V.zimAccessibility;setTimeout(function(){X.activatedObject&&(c=X.activatedObject.zimTabTag)},50),X.resize(V),X.talk(V.zimTabTag.getAttribute("aria-label"))}return V.toggled=!0,V},V.toggle=function(S){return S===!0?V.show():S===!1||V.parent?V.hide():V.show(),V},V.run=function(S,X){n(X)||(E=X),n(S)&&(S=Y=="s"?3:3e3),Mt(S,Y);var m=S*(Y=="s"?1e3:1);V.runInterval&&clearInterval(V.runInterval),V.percent=0;var O=Date.now();return V.runInterval=setInterval(function(){V.percent=(Date.now()-O)/m*100,V.percent>=100&&(V.percent=100,clearInterval(V.runInterval))},30),V},V.dispatched=!1;function d(S){e=="circle"?Z.graphics.c().mt(0,0).s(r).ss(a-s*2+.5).a(0,0,A,0,360*S/100*Math.PI/180):(G.sca(S/100,1),Z.setMask(G)),n(C)||(f.text=f.startText+" "+Math.min(Math.round(S),100)+"%"),E&&I&&Math.round(S)>=100&&(V.timeOut=setTimeout(function(){V.hide()},200)),!V.dispatched&&Math.round(S)>=100&&(V.dispatchEvent("complete"),V.dispatched=!0,setTimeout(function(){V&&(V.dispatched=!1)},100)),V.stage&&V.stage.update()}Object.defineProperty(V,"percent",{get:function(){return b},set:function(S){b=S,d(S)}});var o=V.getBounds();V.setBounds(o.x-5,o.y-5,o.width+10,o.height+10),p!==!1&&t.styleTransforms(this,P),this.clone=function(){return V.cloneProps(new t.ProgressBar(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,this.group,B))},this.dispose=function(S,X,m){return V.backing.type=="Pattern"&&V.backing.clearInterval&&V.backing.clearInterval(),V.runInterval&&clearInterval(V.runInterval),m||this.zimContainer_dispose(!0),!0}},t.extend(t.ProgressBar,t.Container,["clone","dispose"],"zimContainer",!1),t.Indicator=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T){var B="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",F;if(F=at(t.Indicator,arguments,B,this))return F;De("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=p;var D=A===!1?{}:t.getStyle(this.type,this.group,T);n(e)&&(e=D.width!=null?D.width:300),n(r)&&(r=D.height!=null?D.height:50),n(i)&&(i=D.num!=null?D.num:6),n(C)&&(C=D.indicatorType!=null?D.indicatorType:"dot"),n(l)&&(l=D.foregroundColor!=null?D.foregroundColor:C=="star"?t.yellow:C=="heart"?t.red:t.orange),n(a)&&(a=D.backgroundColor!=null?D.backgroundColor:t.granite),a<0&&(a=D.backgroundColor!=null?D.backgroundColor:"rgba(0,0,0,.01)"),n(s)&&(s=D.borderColor!=null?D.borderColor:null),n(f)&&(f=D.borderWidth!=null?D.borderWidth:null),s<0||f<0?s=f=null:s!=null&&f==null&&(f=1),n(u)&&(u=D.backdropColor!=null?D.backdropColor:-1),n(v)&&(v=D.corner!=null?D.corner:0),n(h)&&(h=D.fill!=null?D.fill:!1),n(g)&&(g=D.scale!=null?D.scale:1),n(k)&&(k=D.lightScale!=null?D.lightScale:1),n(y)&&(y=D.interactive!=null?D.interactive:!1),n(x)&&(x=D.shadowColor!=null?D.shadowColor:"rgba(0,0,0,.3)"),n(I)&&(I=D.shadowBlur!=null?D.shadowBlur:5),n(E)&&(E=D.backgroundAlpha!=null?D.backgroundAlpha:.2);var P=(kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",Y=this;this.lights=[];var _;if(u!=-1){var V=Y.backdrop=new t.Rectangle(e,r,u,s,f,v,null,null,null,!1);this.addChild(V)}var b=this.lightsContainer=new t.Container({style:!1});this.addChild(b);var Z,$=r*.5,Q=e/(i+1),re=new Fe.Shape,G=!1;C=="square"||C=="box"||C.type=="Emoji"?re.graphics.f("black").dr(-Q/2/k+$/2,-r/2+$/2,Q/k,r):re.graphics.f("black").dr(-Q/2/k,-r/2,Q/k,r);for(var L=0;L<i;L++)C=="square"||C=="box"?(Z=new t.Rectangle($,$,a,s,f,null,null,null,null,!1),Z.regX=Z.width/2,Z.regY=Z.height/2):C=="star"?Z=new t.Poly($*.6,5,.5,a,s,f,null,null,!1):C=="heart"?Z=new t.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:a,interactive:!1}).transformPoints("scale",.15):C.type=="Emoji"?(G=!0,Z=C.clone().reg("center","center"),Z.myCache=!1):Z=new t.Circle($/2,a,s,f,null,null,null,null,!1),this.lights.push(Z),Z.znum=L,Z.scaleX=Z.scaleY=k,Z.hitArea=re,Z.x=Q+Q*L,Z.y=r/2,b.addChild(Z);b.setBounds(0,0,e,r),b.regX=b.x=e/2,b.regY=b.y=r/2,this.addChild(b),x!=-1&&I>0&&(b.shadow=new Fe.Shadow(x,2,2,I)),y&&(b.cur("pointer"),Y.lightsEvent=b.on(P,function(d){if(_==d.target.znum){if(_>0)return;if(_==0){_=-1,c(_),Y.dispatchEvent("change");return}}_=d.target.znum,c(_),Y.dispatchEvent("change")})),b.scaleX=b.scaleY=g;function c(d){d>=i&&(d=-1);for(var o,S=0;S<i;S++){h&&S<d?o=l:o=a,S==d&&(o=l);var X=b.getChildAt(S);G&&(X.alpha=o==l?1:E),X.color=o}Y.zimAccessibility&&Y.zimAccessibility.changeTitle(Y),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&Y.stage&&Y.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return _},set:function(d){_=Math.floor(d),_=t.constrain(_,-1,i-1),c(_)}}),Object.defineProperty(this,"num",{get:function(){return i},set:function(){ht&&je("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(d){Ot(Y,d)}}),n(w)&&(w=D.selectedIndex!=null?D.selectedIndex:0),Y.selectedIndex=w,A!==!1&&t.styleTransforms(this,D),this.dispose=function(d,o,S){S||(Y.lightsEvent&&b.off(P,Y.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return Y.cloneProps(new t.Indicator(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,this.group,T))}},t.extend(t.Indicator,t.Container,["clone","dispose"],"zimContainer",!1),t.TextInput=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m){var O="width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",de;if(de=at(t.TextInput,arguments,O,this))return de;De("54.2"),this.group=X;var R=S===!1?{}:t.getStyle("TextInput",this.group,m);n(a)&&(a=R.size!=null?R.size:36),(n(T)||T=="ignore")&&(T=R.padding!=null&&T!="ignore"?R.padding:5),n(B)&&(B=R.paddingH!=null?R.paddingH:T),n(F)&&(F=R.paddingV!=null?R.paddingV:T),n(e)&&(e=R.width!=null?R.width:300),n(r)&&(r=R.height!=null?R.height:a+F*2),n(i)&&(i=R.placeholder!=null?R.placeholder:null),n(l)&&(l=R.text!=null?R.text:""),n(s)&&(s=R.font!=null?R.font:"arial"),n(f)&&(f=R.color!=null?R.color:t.dark),n(u)&&(u=R.backgroundColor!=null?R.backgroundColor:t.lighter),n(v)&&(v=R.borderColor!=null?R.borderColor:null),n(C)&&(C=R.borderWidth!=null?R.borderWidth:null);var N=se(e,r,i,l,f,u,v);this.veeObj={width:N[0],height:N[1],placeholder:N[2],text:N[3],color:N[4],backgroundColor:N[5],borderColor:N[6]};function se(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i),l=t.Pick.choose(l),f=t.Pick.choose(f),u=t.Pick.choose(u),v=t.Pick.choose(v),n(k)&&(k=R.selectionColor!=null?R.selectionColor:f),n(y)&&(y=R.selectionAlpha!=null?R.selectionAlpha:.2),n(x)&&(x=R.cursorColor!=null?R.cursorColor:f),n(I)&&(I=R.cursorSpeed!=null?R.cursorSpeed:.5),n(w)&&(w=R.shadowColor!=null?R.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=R.shadowBlur!=null?R.shadowBlur:20),n(A)&&(A=R.align!=null?R.align:"left"),n(p)&&(p=R.corner!=null?R.corner:0),n(D)&&(D=R.shiftH!=null?R.shiftH:0),n(g)&&(g=R.password!=null?R.password:!1),n(P)&&(P=R.shiftV!=null?R.shiftV:g?a*.25:0),n(h)&&(h=R.maxLength!=null?R.maxLength:A=="center"?Math.floor(e/a)*1.8:null),n(Y)&&(Y=R.scrollBarActive!=null?R.scrollBarActive:!1),n(_)&&(_=R.scrollBarDrag!=null?R.scrollBarDrag:!1),n(V)&&(V=R.scrollBarColor!=null?R.scrollBarColor:v),n(b)&&(b=R.scrollBarAlpha!=null?R.scrollBarAlpha:.3),n(Z)&&(Z=R.scrollBarFade!=null?R.scrollBarFade:!0),n($)&&($=R.scrollBarH!=null?R.scrollBarH:!0),n(Q)&&(Q=R.scrollBarV!=null?R.scrollBarV:!0),n(re)&&(re=R.readOnly!=null?R.readOnly:!1),n(G)&&(G=R.inputType!=null?R.inputType:"text"),_&&(Z=R.scrollBarFade!=null?R.scrollBarFade:!1),n(L)&&(L=R.rtl!=null?R.rtl:j.DIR=="rtl"||t.DIR=="rtl"?"rtl":null),n(c)&&(c=R.uppercase!=null?R.uppercase:null),n(o)&&(o=R.keyboardShift!=null?R.keyboardShift:null),c&&(l&&(l=l.toUpperCase()),i&&(i=i.toUpperCase())),n(d)&&(d=R.placeholderInstant!=null?R.placeholderInstant:!0);function ie(){return j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?A=="start"?A="right":A=="end"&&(A="left"):A=="start"?A="left":A=="end"&&(A="right"),A}A=ie(A),this.zimWindow_constructor(e,r,null,u,v,C,T,p,!1,Y,_,V,b,Z,$,Q,!1,null,null,!1,!0,w,E,B,F,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,S,X,t.copy(R)),this.type="TextInput";var q=this;this.placeholderLabel=new t.Label({text:i||"",size:a,color:f,font:s,shiftH:D,shiftV:P,valign:"top"}).alp(.5),l==""&&this.add(this.placeholderLabel);var z=new t.Rectangle({width:e-T*2,height:r-T*2,color:t.clear,style:!1}).center(this);this.cur("text");var ce=this.label=new t.TextInput.LabelInput(l,a,h,g,k,y,x,I,s,f,null,null,null,A,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,D,P,null,null,null,null,G,L,c,d,S,X,m);this.add(ce),ce.setMask(z),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,A=="right"?(ce.x=e-B,this.placeholderLabel.x=e-this.placeholderLabel.width-B):A=="center"&&(ce.x=e/2,this.placeholderLabel.x=(e-this.placeholderLabel.width)/2),ce.ogx=ce.x,q.placeholderLabel.x=ce.x,q.placeholderLabel.align=A;var Ie=new t.Rectangle({width:T,height:r,color:t.clear,style:!1}).addTo(this).expand(0);Ie.on("mousedown",function(ue){ce.onMousedown(ue),ue.stopImmediatePropagation()}),Ie.on("pressmove",function(ue){ce.onPressmove(ue),ue.stopImmediatePropagation()}),Ie.on("dblclick",function(ue){ce.onDblclick(ue),ue.stopImmediatePropagation()});var K=new t.Rectangle({width:T,height:r,color:t.clear,style:!1}).pos(0,0,t.RIGHT,t.TOP,this).expand(0);K.on("mousedown",function(ue){ce.onMousedown(ue),ue.stopImmediatePropagation()}),K.on("pressmove",function(ue){ce.onPressmove(ue),ue.stopImmediatePropagation()}),K.on("dblclick",function(ue){ce.onDblclick(ue),ue.stopImmediatePropagation()});var xe=ce.text;this.on("mousedown",function(ue){ce.onMousedown(ue),xe=ce.text}),this.on("pressmove",function(ue){ce.onPressmove(ue),ue.stopImmediatePropagation()}),this.on("dblclick",function(ue){ce.onDblclick(ue),ue.stopImmediatePropagation()}),this.added(function(ue){ue.on("stagemousedown",function(ke){q.hitTestPoint(ke.stageX,ke.stageY)||(ce.focus=!1,ce.text!=xe&&q.dispatchEvent("change"),xe=ce.text)})});var J=q.stage?stage.y:0;this.label.on("focus",function(){if(j.M&&o){q.re&&q.stage.frame.off("resize",q.re),q.re=q.stage.frame.on("resize",function(){q.stage&&ue>q.stage.height/4&&(q.stage.y=q.stage.scaleY*(q.stage.height/4-ue),q.stage.update())});var ue=q.label.localToGlobal(0,0).y;q.stage&&ue>q.stage.height/4&&(q.stage.y=q.stage.scaleY*(q.stage.height/4-ue),q.stage.update())}d&&q.placeholderLabel.parent&&(q.placeholderLabel.removeFrom(),q.stage&&q.stage.update()),q.dispatchEvent("focus")}),this.label.on("blur",function(){j.M&&o&&q.stage&&(q.re&&q.stage.frame.off("resize",q.re),q.stage.y=J,q.stage.update()),d&&ce.text==""&&!q.placeholderLabel.parent&&(q.add(q.placeholderLabel),q.stage&&q.stage.update()),q.dispatchEvent("blur")});function fe(){ce.text!=""&&q.placeholderLabel.parent&&(q.placeholderLabel.removeFrom(),q.stage&&q.stage.update()),ce.text==""&&!q.placeholderLabel.parent&&(q.add(q.placeholderLabel),q.stage&&q.stage.update())}this.label.on("input",function(){fe(),q.dispatchEvent("input")}),this.label.on("keydown",function(ue){this.label.deleteKey=ue.detail==46,q.dispatchEvent("keydown")}),this.label.on("blinker",function(){var ue=q.localToGlobal(0,0).x,ke=ue+e-B-ce.blinker.width,ne=ce.blinker,ve=ne.localToGlobal(0,0).x,we=ce.localToGlobal(0,0).x-1,ee=ce.x+ce.blinker.x,le=t.constrain(ee,B,e-B-ce.blinker.width);if(ee!=le&&(ce.x-=ee-le),A=="left")ce.width<q.width?ce.x=ce.ogx:ke<ve||ce.oldWidth==ce.width?ce.x-=ee-le:ce.oldWidth>ce.width&&this.label.deleteKey!=!0&&(ce.x+=Math.abs(ne.oldX-ve)+ce.blinker.width+B);else if(A=="right")ce.width<q.width?ce.x=ce.ogx:ke<ve||ce.oldWidth==ce.width?ce.x-=ee-le:ce.oldWidth>ce.width&&this.label.deleteKey==!0&&ve<we-q.width&&(ce.x-=Math.abs(ne.oldX-ve)+ce.blinker.width+B);else if(A=="center"){if(ce.width<q.width)ce.x=ce.ogx;else if(ke<ve)ce.x-=ee-le;else if(ce.oldWidth==ce.width)ce.x-=ee-le;else if(ce.oldWidth>ce.width&&ke>ve){var ye=ue+q.width*.5;this.label.deleteKey!=!0?ce.x+=ce.blinker.width+B:ce.x-=ce.blinker.width+B}}ce.oldWidth=ce.width,ne.oldX=ve,q.stage&&q.stage.update()}),Object.defineProperty(q,"text",{get:function(){return ce.hiddenInput.value},set:function(ue){xe=ue,ce.setText(ue),fe(),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==q},set:function(){t.KEYFOCUS=q}}),t.KEYFOCUS||U(),this.on("mousedown",function(){U()});function U(){q.keyFocus=!0}Object.defineProperty(q,"readOnly",{get:function(){return re},set:function(ue){re=ue,q.htmlTag.setAttribute("readonly",re)}}),re&&(q.readOnly=!0),Object.defineProperty(q,"focus",{get:function(){return ce.focus},set:function(ue){ce.focus=ue}}),Object.defineProperty(q,"color",{get:function(){return ce.color},set:function(ue){ce.color=latestColor=ue,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}}),Object.defineProperty(q,"size",{get:function(){return ce.size},set:function(ue){ce.size=ue,ce.hiddenInput.style.fontSize=ue+"px",!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}}),Object.defineProperty(q,"align",{get:function(){return ce.align},set:function(ue){ce.align=A=ie(ue),A=="right"?ce.x=e-ce.width:A=="center"?ce.x=e/2:ce.x=0,q.placeholderLabel.x=ce.x,q.placeholderLabel.align=A,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}}),Object.defineProperty(q,"font",{get:function(){return ce.font},set:function(ue){ce.font=ue,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}}),Object.defineProperty(q,"selectionAlpha",{get:function(){return ce.selectionAlpha},set:function(ue){ce.selectionAlpha=ue,ce.selection.alpha!=0&&(ce.selection.alpha=ue),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&q.stage&&q.stage.update()}}),t.styleTransforms(this,R),this.clone=function(ue){return q.cloneProps(new t.TextInput(ue||!t.isPick(N[0])?e:N[0],ue||!t.isPick(N[1])?r:N[1],ue||!t.isPick(N[2])?i:N[2],ue||!t.isPick(N[3])?l:N[3],a,s,ue||!t.isPick(N[4])?f:N[4],ue||!t.isPick(N[5])?u:N[5],ue||!t.isPick(N[6])?v:N[6],C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,this.group,m))}},t.extend(t.TextInput,t.Window,"clone","zimWindow",!1),t.TextInput.LabelInput=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de){this.zimLabel_constructor(e,r,v,C,null,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,null,L,c,null,d,m,O,de),this.type="LabelInput",n(C)&&(C=t.dark),n(a)&&(a=C),n(s)&&(s=.2),this.selectionAlpha=s,n(f)&&(f=C),n(u)&&(u=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.value=e,o=="text"&&l&&(o="password"),this.hiddenInput.type=o,o=="number"&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),i>0&&(this.hiddenInput.maxLength=i),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(N=this.stage.frame),N.zil&&j.removeEventListener("keydown",N.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(N=this.stage.frame),N.zil&&j.addEventListener("keydown",N.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=o,this.dispatchEvent("blur")},this.onInput=function(){X&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var se=this.hiddenInput.value;o=="number"&&(se=se.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=se),this.text=this.hiddenInput.type=="password"?se.replace(/./g,"*"):se,this.measureText(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var R=this;this.onKeydown=function(se){this.deleteKey=se.code=="Backspace"||se.code=="Delete",this.blinker.replayTween(),setTimeout(function(){let ie=new CustomEvent("keydown",{detail:se.keyCode});R.positionBlinkerAndSelection.call(R),R.dispatchEvent(ie)},10)},this.onMousedown=function(se){var ie=this.text.length,q=this.eventPositionGlobalToLocal(se);this.focus||(this.hiddenInput.focus(),(o=="number"||o=="email")&&(this.hiddenInput.type="text"));var z=this.mapPointToIndex(q);S?this.hiddenInput.setSelectionRange(ie-z,ie-z):this.hiddenInput.setSelectionRange(z,z),this.positionBlinkerAndSelection()},this.onPressmove=function(se){var ie=this.text.length;this.focus||this.hiddenInput.focus();var q=this.eventPositionGlobalToLocal(se),z;S?z=ie-this.mapPointToIndex(q):z=this.mapPointToIndex(q),this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=z?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,z,S?"backward":"forward"):this.hiddenInput.setSelectionRange(z,this.hiddenInput.selectionEnd,S?"forward":"backward"):this.hiddenInput.selectionDirection===(S?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,z,S?"backward":"forward"):this.hiddenInput.setSelectionRange(z,this.hiddenInput.selectionEnd,S?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var se=this.text.length;if(this.focus){var ie=this.backing||this.background?this.paddingH:0,q=this.backing||this.background?this.paddingV:0;if(this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd){var z,ce;S?(z=this.textWidthArray[se-this.hiddenInput.selectionStart],ce=this.textWidthArray[se-this.hiddenInput.selectionEnd],this.selection.widthOnly=ce-z,this.selection.pos(ce+ie-1+Q,q+re)):(z=this.textWidthArray[this.hiddenInput.selectionStart],ce=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=ce-z,this.selection.pos(z+ie-1+Q,q+re)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)}else this.selection.alp(0);this.blinker.heightOnly=this.textHeight;var Ie=this.hiddenInput.selectionDirection==="backward"?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd;Ie||(Ie=0),S&&(Ie=se-Ie),this.blinker.pos(this.textWidthArray[Ie]+ie-1+(y=="right"&&this.text==""?this.width:y=="center"&&this.text==""?this.width/2:0)+Q,q+re),this.dispatchEvent("blinker")}this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(se){var ie=this.globalToLocal(se.stageX/t.scaX,se.stageY/t.scaY);return y=="right"?ie.x-=this.label.x-this.width:y=="center"?ie.x-=(this.label.x-this.width)/2:ie.x-=this.label.x,ie.y-=this.label.y,ie},this.mapPointToIndex=function(se){for(var ie=this.textWidthArray.length-1,q=0;q<this.textWidthArray.length-1;q++){var z=(this.textWidthArray[q]+this.textWidthArray[q+1])/2;if(se.x<=z){ie=q;break}}return ie},this.measureText=function(){var se=this.label.clone(),ie=this.text;S&&(ie=ie.split("").reverse().join(""));for(var q=0;q<ie.length&&q<this.previousMeasuredText.length&&ie[q]===this.previousMeasuredText[q];)q++;for(this.textWidthArray=this.textWidthArray.slice(0,q+1),q++;q<=ie.length;q++)se.text=ie.slice(0,q),this.textWidthArray.push(se.getMeasuredWidth());this.previousMeasuredText=ie,this.textHeight=se.getMeasuredLineHeight()},this.setText=function(se){X&&(se=se.toUpperCase()),this.hiddenInput.value=se,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===R.hiddenInput},set:function(se){se===!0?R.hiddenInput.focus():R.hiddenInput.blur()}});var N;this.added(function(se){N=se.frame,R.hiddenInput.addEventListener("focus",R.onFocus.bind(R)),R.hiddenInput.addEventListener("blur",R.onBlur.bind(R))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new t.Rectangle({width:2,height:1,color:f,style:!1}).animate({obj:{alpha:0},wait:u,time:.1,rewind:!0,rewindWait:u,loop:!0,loopWait:u}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new t.Rectangle({width:1,height:1,color:a,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},t.extend(t.TextInput.LabelInput,t.Label,null,"zimLabel",!1),t.List=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U,ue,ke,ne,ve,we,ee,le,ye,oe,Me,ae,Se,Le,Ce,te,Oe,Re,Xe,Qe,it,Be,Ke,He){var he="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, continuous, style, group, inherit",me;if(me=at(t.List,arguments,he,this))return me;De("60.5"),this.group=Ke;var Te=Be===!1?{}:t.getStyle("List",this.group,He);n(e)&&(e=Te.width!=null?Te.width:300);var ze=r;n(r)&&(r=Te.height!=null?Te.height:n(le)?200:200+le.height),n(i)&&(i=i=Te.list!=null?Te.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),i.length==0&&(i=["%-&"]),this.originalList=i,n(l)&&(l=Te.viewNum!=null?Te.viewNum:5),n(a)&&(a=Te.vertical!=null?Te.vertical:!0),n(s)&&(s=Te.currentSelected!=null?Te.currentSelected:!0);var st=!n(f)||!n(v);n(ye)&&(ye=Te.checkBox!=null?Te.checkBox:!1),n(f)&&(f=Te.align!=null?Te.align:ye?"left":"center"),n(u)&&(u=Te.valign!=null?Te.valign:"center"),n(v)&&(v=Te.labelAlign!=null?Te.labelAlign:f),n(C)&&(C=Te.labelValign!=null?Te.labelValign:u),n(y)&&(y=Te.indent!=null?Te.indent:ye?0:10),n(h)&&(h=Te.labelIndent!=null?Te.labelIndent:y),n(g)&&(g=Te.labelIndentH!=null?Te.labelIndentH:h),n(k)&&(k=Te.labelIndentV!=null?Te.labelIndentV:h),n(x)&&(x=Te.spacing!=null?Te.spacing:2),n(T)&&(T=Te.backdropColor!=null?Te.backdropColor:t.dark),n(I)&&(I=Te.backgroundColor!=null?Te.backgroundColor:t.tin),n(w)&&(w=Te.rollBackgroundColor!=null?Te.rollBackgroundColor:t.grey),n(E)&&(E=Te.downBackgroundColor!=null?Te.downBackgroundColor:w),n(A)&&(A=Te.selectedBackgroundColor!=null?Te.selectedBackgroundColor:t.charcoal),n(p)&&(p=Te.selectedRollBackgroundColor!=null?Te.selectedRollBackgroundColor:t.grey),n(B)&&(B=Te.color!=null?Te.color:t.white),n(F)&&(F=Te.rollColor!=null?Te.rollColor:B),n(D)&&(D=Te.downColor!=null?Te.downColor:F),n(P)&&(P=Te.selectedColor!=null?Te.selectedColor:B),n(Y)&&(Y=Te.selectedRollColor!=null?Te.selectedRollColor:F),n(T)&&(T=Te.backdropColor!=null?Te.backdropColor:T);var Ye=_,nt=V;n(_)&&(_=Te.borderColor!=null?Te.borderColor:t.silver),n(V)&&(V=Te.borderWidth!=null?Te.borderWidth:1),n(b)&&(b=Te.padding!=null?Te.padding:x),n(Z)&&(Z=Te.corner!=null?Te.corner:0),n($)&&($=Te.swipe!=null?Te.swipe:!0),n(Q)&&(Q=Te.scrollBarActive!=null?Te.scrollBarActive:!0),n(re)&&(re=Te.scrollBarDrag!=null?Te.scrollBarDrag:!0),n(G)&&(G=Te.scrollBarColor!=null?Te.scrollBarColor:_),n(L)&&(L=Te.scrollBarAlpha!=null?Te.scrollBarAlpha:.3),n(c)&&(c=Te.scrollBarFade!=null?Te.scrollBarFade:!0),n(d)&&(d=Te.scrollBarH!=null?Te.scrollBarH:!a),n(o)&&(o=Te.scrollBarV!=null?Te.scrollBarV:a),re&&(c=Te.scrollBarFade!=null?Te.scrollBarFade:!1),n(S)&&(S=Te.scrollBarOverlay!=null?Te.scrollBarOverlay:!0),n(X)&&(X=Te.slide!=null?Te.slide:!0),n(m)&&(m=Te.slideFactor!=null?Te.slideFactor:.95),n(O)&&(O=Te.slideSnap!=null?Te.slideSnap:a?"vertical":"horizontal"),n(R)&&(R=Te.shadowColor!=null?Te.shadowColor:"rgba(0,0,0,.3)"),n(N)&&(N=Te.shadowBlur!=null?Te.shadowBlur:20),n(ie)&&(ie=Te.paddingV!=null?Te.paddingV:b),n(se)&&(se=Te.paddingH!=null?Te.paddingH:b),n(q)&&(q=Te.scrollWheel!=null?Te.scrollWheel:!0),n(ce)&&(ce=Te.titleBar!=null?Te.titleBar:null),n(Ie)&&(Ie=Te.titleBarColor!=null?Te.titleBarColor:null),n(K)&&(K=Te.titleBarBackgroundColor!=null?Te.titleBarBackgroundColor:null),n(xe)&&(xe=Te.titleBarHeight!=null?Te.titleBarHeight:35),n(J)&&(J=Te.draggable!=null?Te.draggable:null),n(fe)&&(fe=Te.boundary!=null?Te.boundary:null),n(U)&&(U=Te.onTop!=null?Te.onTop:null),n(ue)&&(ue=Te.close!=null?Te.close:null),n(ke)&&(ke=Te.closeColor!=null?Te.closeColor:null),n(ne)&&(ne=Te.collapse!=null?Te.collapse:null),n(ve)&&(ve=Te.collapseColor!=null?Te.collapseColor:null),n(ee)&&(ee=Te.excludeCustomTap!=null?Te.excludeCustomTap:!1),n(ye)&&(ye=Te.checkBox!=null?Te.checkBox:!1),n(oe)&&(oe=Te.pulldown!=null?Te.pulldown:!1),n(Ce)&&(Ce=Te.pulldownToggle!=null?Te.pulldownToggle:!1),n(Le)&&(Le=Te.noScale!=null?Te.noScale:!1),n(Me)&&(Me=Te.clone!=null?Te.clone:!1),n(te)&&(te=Te.optimize!=null?Te.optimize:!0),n(Oe)&&(Oe=Te.keyEnabled!=null?Te.keyEnabled:null),n(Re)&&(Re=Te.resizeHandle!=null?Te.resizeHandle:null),n(Xe)&&(Xe=Te.resizeBoundary!=null?Te.resizeBoundary:null),n(Qe)&&(Qe=Te.resizeVisible!=null?Te.resizeVisible:!1),n(it)&&(it=Te.continuous!=null?Te.continuous:!1),ce===!1&&(ce=null),this.vertical=a;var pe=this,Je=r;j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?f=="start"?f="right":f=="end"&&(f="left"):f=="start"?f="left":f=="end"&&(f="right");var be;it?(pe.continuous=!0,be=t.copy(i),t.loop(i.length,function(qe){i[qe].clone?be.push(i[qe].clone()):be.push(i[qe])})):be=i,ye&&t.loop(be,function(qe,gt){be[gt]!="%-&"&&(be[gt]=t.List.checkItem(qe,null,e,"left",10,10,x,B,F,P,Y,I,w,A,p))});var Ee=mt(),_e;if(be.constructor=={}.constructor){var Ge=n(be.shade)?n(Te.shade)?.2:Te.shade:be.shade,Ue=n(be.dim)?n(Te.dim)?.1:Te.dim:be.dim,tt=n(be.shift)?n(Te.shift)?15:Te.shift:be.shift,Ae=n(be.bloom)?n(Te.bloom)?!1:Te.bloom:be.bloom,Ze=n(be.whither)?n(Te.whither)?!1:Te.whither:be.whither,lt=n(be.open)?n(Te.open)?!1:Te.open:be.open,Ve=n(be.expander)?n(Te.expander)?"plus":Te.expander:be.expander;Ve=Ve.toLowerCase(),Ve=="arrows"&&(Ve="arrow"),Ve!="none"&&Ve!="arrow"&&(Ve="plus"),Ae===!0&&(Ae=Ee=="s"?.01:10),Ze===!0&&(Ze=Ee=="s"?.01:10),Mt(Ae),Mt(Ze),tt===!0&&(tt=15),Ge===!0&&(Ge=.2),Ue===!0&&(Ue=.1);var ft=n(be.subStyles)?n(Te.subStyles)?{}:Te.subStyles:be.subStyles;n(be.menu)||(be=be.menu),_e=pe.tree=new t.Hierarchy(be),be=_e.getLinearList(),st||(f=v="left")}oe&&(l=n(_e)?be.length:_e.length,n(ze)&&(r=l*e/620*100+(l+1)*x+(n(ce)?0:xe)),V=0,A=I,T=t.clear,$=!1);var ot=0,ut=0;t.loop(be,function(qe){qe.type=="ListItem"&&(qe.width=e-x*2),Le&&(qe.width&&(ot+=qe.width),qe.height&&(ut+=qe.height))}),ot&&(ot+=x*(be.length-1)),ut&&(ut+=x*(be.length-1)),this.align=f,this.valign=u,this.indent=y,n(le)||(r=r-le.height,le.list=pe,pe.organizer=le,le.setButtons(),xe+=le.height),it&&(Q=!1),this.zimWindow_constructor(e,r,null,T,_,V,b,Z,$,Q,re,G,L,c,d,o,X,m,O,de,!0,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U,ue,ke,ae,!1,null,Re,ne,ve,we,te,Xe,Qe,it?a?"vertical":"horizontal":null,Be,Ke,t.copy(Te)),this.type="List",n(ce)||(this.titleBarLabel.pos(null,xe-30,null,!0),n(xe)&&(xe=30),r=r-xe),n(le)||le.addTo(pe).loc(0,-le.height),ot&&Le?(pe.itemWidth=a?e-(Q?S?0:6:0):ot/be.length,pe.itemHeight=a?ut/be.length:r-(Q?S?0:6:0)):(pe.itemWidth=a?e-(Q?S?0:6:0):e/l,pe.itemHeight=a?r/l:r-(Q?S?0:6:0));var $e,Pt=t.copy(Te);delete Pt.borderWidth,delete Pt.borderColor;function yt(qe){$e=pe.tabs=new t.Tabs({width:a?pe.itemWidth:pe.itemWidth*be.length,height:a?pe.itemHeight*be.length:pe.itemHeight,tabs:qe,spacing:x,vertical:a,backgroundColor:I,rollBackgroundColor:w,downBackgroundColor:E,selectedBackgroundColor:A,selectedRollBackgroundColor:p,color:B,rollColor:F,downColor:D,selectedColor:P,selectedRollColor:Y,backdropColor:T,currentEnabled:!0,currentSelected:s,align:f,valign:u,labelAlign:v,labelValign:C,labelIndent:h,labelIndentH:g,labelIndentV:k,indent:y,useTap:!0,excludeCustomTap:ee,keyWrap:!1,keyEnabled:Oe,style:Be,group:Ke,inherit:Pt}).siz(a?e-se*2:null,a?null:r-ie*2).mov(a?0:se,a?ie:0),pe.add($e),t.loop($e.labels,function(gt){gt&&(gt.backgroundColor=t.clear)})}yt(t.copy(be,Me)),it&&pe.on("scrolling",function(){var qe=pe.tabs.localToLocal(0,0,pe);a&&(qe.y>=-pe.tabs.buttons[0].height&&(pe.tabs.y-=pe.tabs.height/2+x/2),qe.y-pe.tabs.buttons[pe.tabs.buttons.length-1].height<=r-pe.tabs.height&&(pe.tabs.y+=pe.tabs.height/2+x/2))});function wt(qe,gt,St){qe.listZID=gt,qe.label&&(Ge&&new t.Rectangle(tt*(St.level+1),qe.height).alp(Ge).pos(0,0,pe.align=="right",!1,qe),Ue&&new t.Rectangle(qe.width,qe.height).alp((St.level+1)*Ue).addTo(qe).bot().ord(1),tt&&pe.align!="center"&&(qe.label.x+=(pe.align=="right"?-1:1)*tt*(St.level+1)));var Ct=_e.getData(gt);Ct.obj=qe,Ct.list&&!t.isEmpty(Ct.list)&&(qe.expander=new t.Label({size:Ve=="arrow"?22:36,text:Ct.open?Ve=="arrow"?"\u25B2":"-":Ve=="arrow"?"\u25BC":"+",align:"center",color:t.convertColor(B,"rgba",.6)}).center(qe).alp(Ve=="none"?0:.7).pos(15,null,pe.align!="right").mov(0,Ct.open?-3:0))}function Ft(){if(!(!pe.selected||!pe.selected.expander)){var qe=_e.getData(pe.selected.listZID),gt;if(qe.open){pe.selected.expander&&(pe.selected.expander.text=Ve=="arrow"?"\u25BC":"+",pe.selected.expander.mov(0,3)),qe.open=!1;var St=_e.getNextSibling(pe.selected.listZID),Ct;n(St)?Ct=pe.items.length-1:Ct=t.loop(pe.items,function(qt,jt){if(qt.listZID==St)return jt-1}),Ze?(gt=0,pe.enabled=!1,t.interval(Ze,function(qt){pe.removeAt(1,pe.selectedIndex+Ct-pe.selectedIndex-gt),gt++,qt.total==qt.count+1&&(pe.enabled=!0,pe.dispatchEvent("collapsed"))},Ct-pe.selectedIndex,!0)):(pe.removeAt(Ct-pe.selectedIndex,pe.selectedIndex+1),pe.dispatchEvent("collapsed"))}else{qe.open=!0,pe.selected.expander&&(pe.selected.expander.text=Ve=="arrow"?"\u25B2":"-",pe.selected.expander.mov(0,-3));var Bt=_e.getLinearList(qe.list),vt=_e.getLinearIDs(qe.list),bt;if(qe.opened)Array.isArray(Bt)&&(Ae?(gt=0,pe.enabled=!1,t.interval(Ae,function(qt){pe.addAt(Bt[gt],pe.selectedIndex+1+gt),bt=new Fe.Event("bloom"),bt.item=Bt[gt],pe.dispatchEvent(bt),qt.total==qt.count+1&&(pe.enabled=!0,bt=new Fe.Event("expanded"),bt.items=Bt,pe.dispatchEvent(bt)),gt++},Bt.length,!0)):(pe.addAt(Bt,pe.selectedIndex+1),bt=new Fe.Event("expanded"),bt.items=Bt,pe.dispatchEvent(bt)));else{qe.opened=!0;var Vt=ft[qe.level];n(Vt)&&(Vt={}),Array.isArray(Bt)&&(Ae?(gt=0,pe.enabled=!1,t.interval(Ae,function(qt){pe.addAt(Bt[gt],pe.selectedIndex+1+gt,{backgroundColor:Vt.backgroundColor,color:Vt.color,rollBackgroundColor:Vt.rollBackgroundColor,rollColor:Vt.rollColor,selectedBackgroundColor:Vt.selectedBackgroundColor,selectedColor:Vt.selectedColor,selectedRollBackgroundColor:Vt.selectedRollBackgroundColor,selectedRollColor:Vt.selectedRollColor});var jt=vt[gt],Gt=pe.items[pe.selectedIndex+1+gt];Vt.borderColor&&(Gt.borderColor=Vt.borderColor),wt(Gt,jt,qe),Gt.label&&(Gt.label.backgroundColor=t.clear),bt=new Fe.Event("bloom"),bt.item=Gt,pe.dispatchEvent(bt),qt.total==qt.count+1&&(pe.enabled=!0,bt=new Fe.Event("expanded"),bt.items=Bt,pe.dispatchEvent(bt)),gt++,pe.stage&&pe.stage.update()},Bt.length,!0)):(pe.addAt(Bt,pe.selectedIndex+1,{backgroundColor:Vt.backgroundColor,color:Vt.color,rollBackgroundColor:Vt.rollBackgroundColor,rollColor:Vt.rollColor,selectedBackgroundColor:Vt.selectedBackgroundColor,selectedColor:Vt.selectedColor,selectedRollBackgroundColor:Vt.selectedRollBackgroundColor,selectedRollColor:Vt.selectedRollColor}),t.loop(vt,function(qt,jt){var Gt=pe.items[pe.selectedIndex+1+jt];wt(Gt,qt,qe),Gt.label&&(Gt.label.backgroundColor=t.clear)}),bt=new Fe.Event("expanded"),bt.items=Bt,pe.dispatchEvent(bt)))}}}}pe.expandList=function(qe){return pe.selectedIndex=qe,pe.selected&&Ft(),pe.selected};var _t;if(_e){Ce&&pe.added(function(qe){_t=qe,pe.stageToggleEvent=_t.on("stagemousedown",function(){var gt=_t.getObjectUnderPoint(_t.frame.mouseX,_t.frame.mouseY);if(!(gt&&pe.contains(gt))&&!(!pe.enabled||!pe.selected)){var St=_e.getData(pe.selected.listZID);St.open&&Ft()}})});var Jt=_e.getLinearIDs();t.loop(Jt,function(qe,gt){pe.tabs.buttons[gt].listZID=qe}),t.loop(pe.tabs.buttons,function(qe){var gt=_e.getData(qe.listZID);t.isEmpty(gt.list)||(qe.expander=new t.Label({size:Ve=="arrow"?22:36,text:Ve=="arrow"?"\u25BC":"+",align:"center",color:t.convertColor(B,"rgba",.6)}).center(qe).alp(Ve=="none"?0:.7).pos(15,null,pe.align!="right"))});var nn=lt;pe.toggle=function(qe){if(n(qe))qe=!nn;else if(qe==nn)return;pe.selectedIndex=0,nn=qe,Ft()},Object.defineProperty(pe,"toggled",{get:function(){return nn},set:function(qe){nn!=qe&&pe.toggle()}}),pe.tap(Ft)}var Zt;$e.tap(function(qe){qe.target.selectedIndex!=pe.selectedIndex&&(pe.selectedIndex=$e.selectedIndex,pe.dispatchEvent("change"),Ce&&(pe.selectedIndex=0),qe.preventDefault())}),$e.on("keychange",function(qe){if(qe.target.selectedIndex!=pe.selectedIndex){pe.selectedIndex=$e.selectedIndex;var gt;setTimeout(function(){a?(gt=pe.selected.y+pe.scrollY,(gt<0||gt>pe.height-pe.selected.height)&&pe.animateTo(pe.selectedIndex,Ee=="ms"?100:.1)):(gt=pe.selected.x+pe.scrollX,(gt<0||gt>pe.width-pe.selected.width)&&pe.animateTo(pe.selectedIndex,Ee=="ms"?100:.1))},100),pe.dispatchEvent("change")}}),this.getItemIndex=function(qe){return pe.items.indexOf(qe)},this.animateTo=function(qe,gt){n(qe)&&(qe=0),n(gt)&&(gt=.05);var St=mt(gt);pe.selectedIndex=qe;var Ct=Et(qe),Bt;return a?(Bt=Math.abs(pe.scrollY-Ct)/pe.itemHeight,pe.animate({scrollY:Ct},Bt*gt/(St=="s"?1:1e3))):(Bt=Math.abs(pe.scrollX-Ct)/pe.itemWidth,pe.animate({scrollX:Ct},Bt*gt/(St=="s"?1:1e3))),pe},this.addAt=function(qe,gt,St,Ct){if(n(qe))return pe;if(pe.tabs.loop(function(vt){vt.visible=!0}),qe.type=="ListItem"?qe.width=e-x*2:Array.isArray(qe)&&t.loop(qe,function(vt){vt.type=="ListItem"&&(vt.width=e-x*2)}),Ct)if(Array.isArray(qe)){var Bt=[];t.loop(qe,function(vt){vt.clone?Bt.push(qe.clone()):Bt.push(t.copy(qe,Ct))}),pe.tabs.addAt(Bt,gt,St)}else qe.clone?pe.tabs.addAt(qe.clone(),gt,St):pe.tabs.addAt(t.copy(qe,Ct),gt,St);else ye&&(Array.isArray(qe)||(qe=[qe]),t.loop(qe,function(vt,bt){typeof vt=="string"&&(qe[bt]=t.List.checkItem(vt,null,e,"left",10,10,x,B,F,P,Y,I,w,A,p))})),pe.tabs.addAt(qe,gt,St);return pe.update(),pe},this.removeAt=function(qe,gt){it&&pe.tabs.removeAt(qe,gt+i.length),pe.tabs.removeAt(qe,gt),pe.tabs.loop(function(Ct){Ct.visible=!0}),Zt=pe.tabs.selectedIndex;var St=$e.getBounds();return $e.setBounds(0,0,St.width,St.height),St.height<r&&(pe.scrollY=0),pe.update(),pe},be[0]=="%-&"&&be.length==1&&pe.removeAt(1,0),this.clear=function(){return pe.tabs.removeAt(pe.length,0),pe.contentContainer.x=0,pe.contentContainer.y=0,pe.update(),pe},this.setCheck=function(qe,gt){n(qe)&&(qe=0),n(gt)&&(gt=!0),pe.items[qe].checkBox.checked=gt,pe.items[qe].content.zimOut()},this.getCheck=function(qe){return n(qe)&&(qe=0),pe.items[qe].checkBox.checked},this.setChecks=function(qe){return t.loop(pe.items,function(gt){gt.checkBox.checked=qe,gt.content.zimOut()}),pe},Object.defineProperty(pe,"items",{get:function(){return pe.tabs.buttons},set:function(){ht&&je("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(pe,"list",{get:function(){return pe.tabs.buttons},set:function(){ht&&je("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(pe,"length",{get:function(){return pe.tabs.buttons.length},set:function(){ht&&je("List() - length is read only")}}),Object.defineProperty(pe,"selectedIndex",{get:function(){return it?(Zt+i.length)%i.length:Zt},set:function(qe){$e.selectedIndex=qe,pe.label=$e.label,pe.selected=$e.selected,Zt=qe,!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&pe.stage&&pe.stage.update()}}),s&&(pe.selectedIndex=0),Object.defineProperty(pe,"selectedIndexPlusPosition",{get:function(){return it?(Zt+i.length)%i.length:Zt},set:function(qe){pe.selectedIndex=qe,Zt=qe,a?pe.scrollY=Et(qe)-2:pe.scrollX=Et(qe),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&pe.stage&&pe.stage.update()}});function Et(qe){if(a){var gt=-(pe.itemHeight+x)*qe+r/2-pe.itemHeight/2;return(pe.itemHeight+x)*pe.length<r&&(gt=0),gt>0&&(gt=0),(pe.itemHeight+x)*pe.length>r&&gt<-pe.tabs.height+r-ie*2&&(gt=-pe.tabs.height+r-ie*2),gt}else{var St=-(pe.itemWidth+x)*qe+e/2-pe.itemWidth/2;return(pe.itemWidth+x)*pe.length<e&&(St=0),St>0&&(St=0),(pe.itemWidth+x)*pe.length>e&&St<-pe.tabs.width+e-se*2&&(St=-pe.tabs.width+e-se*2),St}}Object.defineProperty(pe,"text",{get:function(){return pe.label?pe.label.text:null},set:function(qe){pe.label&&(pe.label.text=qe)}}),Object.defineProperty(pe,"bloom",{get:function(){return Ae},set:function(qe){Ae=qe}}),Object.defineProperty(pe,"currentValue",{get:function(){return pe.label?pe.label.text:null},set:function(qe){var gt=t.loop(pe.list,function(St,Ct){var Bt;St.label&&(Bt=St.label.text),St.type=="Label"&&(Bt=St.text);var vt=new RegExp(qe,"i");if(Bt&&Bt.match(vt))return Ct});gt!==!0&&(pe.selectedIndexPlusPosition=gt)}}),Object.defineProperty(pe,"itemDown",{get:function(){return pe.tabs.buttonDown},set:function(){}}),Object.defineProperty(pe,"itemsText",{get:function(){for(var qe=[],gt=0;gt<pe.tabs.buttons.length;gt++){var St=pe.tabs.buttons[gt].label;St&&!n(St.text)?qe.push(St.text):qe.push(null)}return qe},set:function(){ht&&je("List() - itemsText is read only")}}),s&&(pe.selectedIndex=0),Object.defineProperty(pe,"checkBoxes",{get:function(){for(var qe=[],gt=0;gt<pe.tabs.buttons.length;gt++){var St=pe.tabs.buttons[gt].checkBox;qe.push(St)}return qe},set:function(){ht&&je("List() - checkBoxes is read only")}}),Object.defineProperty(pe,"accordionIndex",{get:function(){var qe=pe.selected.listZID;return qe?Number(qe.split("id")[1]):null},set:function(){ht&&je("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(qe){if(!n(qe)){var gt=[];t.loop(qe,function(Ct){gt.push(Ct)});var St=pe.bloom;pe.bloom=!1,t.interval(.01,function(Ct){var Bt=pe.items[Ct.count];Bt?gt.indexOf(pe.tree.getData(Bt.listZID).level)!=-1&&pe.expandList(Ct.count):(Ct.clear(),pe.bloom=St)},null,!0,!1,"s")}};var Ut;this.openAtNum=function(qe){if(!n(qe)){if(!Ut){let qt=function(jt,Gt){for(gt in jt)Ut[gt]=Gt,qt(jt[gt].list,gt)};var gt;Ut={},qt(pe.tree.data);var St={};for(var Ct in Ut){St[Ct]||(St[Ct]=[]);for(var Bt=Ut[Ct];Bt;)St[Ct].unshift(Bt),Bt=Ut[Bt];St[Ct].push(Ct)}}var vt="id"+qe,bt=St[vt],Vt=pe.bloom;pe.bloom=!1,mi(.01,function(qt){var jt=pe.items[qt.count];jt?bt.indexOf(jt.listZID)!=-1&&pe.expandList(qt.count):(qt.clear(),pe.bloom=Vt)},null,!0,!1,"s")}},lt&&Ft&&pe.openAtLevel(1e4),n(Se)&&(Se=Te.selectedIndex!=null?Te.selectedIndex:0),pe.selectedIndex=Se,Be!==!1&&t.styleTransforms(this,Te),this.clone=function(){return pe.cloneProps(new t.List(e,Je,t.copy(pe.originalList,!0),l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,Ye,nt,b,t.copy(Z),$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U,ue,ke,ne,ve,we,ee,le,ye,oe,Me,ae,Se,Le,Ce,te,Oe,Re,Xe,Qe,it,Be,this.group,He))},this.dispose=function(qe,gt,St){return St||(pe.stageToggleEvent&&_t.off("stagemousedown",pe.stageToggleEvent),pe.organizer&&pe.organizer.dispose(),this.zimWindow_dispose()),!0}},t.extend(t.List,t.Window,["clone","dispose"],"zimWindow",!1),t.List.makeBase=function(e,r,i,l){n(l)&&(l=t.dark),e.backing=new t.Rectangle(e.width,e.height,l).center(e),r.type=="Label"?e.label=r:e.label=new t.Label(r,null,null,t.white),e.text=e.label.text,e.label.center(e).loc(i)},t.List.slider=function(e,r,i,l,a,s,f,u,v,C,h,g,k){var y="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor",x;if(x=at(t.List.slider,arguments,y))return x;var I=new t.Container(620,100);return I.type="ListItem",I.listItem="Slider",n(v)&&(v=20),n(C)&&(C=30),n(h)&&(h=1),n(g)&&(g=0),t.List.makeBase(I,e,v,k),I.slider=new t.Slider({inside:!0,barWidth:40,barLength:150,barColor:t.blue,min:r,max:i,step:s}).sca(1.5).center(I).mov(20).change(function(){I.stepper.currentValue=g+Math.round(I.slider.currentValue*h*1e3)/1e3,f&&u&&(f[u]=I.slider.currentValue),a&&typeof a=="function"&&a(I.slider.currentValue,I.parent),I.slider.stage&&I.slider.stage.update()}),n(l)||(I.slider.currentValue=l),I.stepper=new t.Stepper({corner:0,arrows:!1,stepperType:"number",min:g+r*h,max:g+i*h,step:s}).center(I).pos(C,null,!0).change(function(){}),n(l)||(I.stepper.currentValue=g+l*h),I},t.List.checkBox=function(e,r,i,l,a,s,f,u){var v="label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor",C;if(C=at(t.List.checkBox,arguments,v))return C;var h=new t.Container(620,100);return h.type="ListItem",h.listItem="CheckBox",n(s)&&(s=20),n(f)&&(f=30),t.List.makeBase(h,e,s,u),h.checkBox=new t.CheckBox({startChecked:r,label:""}).sca(1.2).center(h).pos(256+f,null,!0).change(function(){l&&a&&(l[a]=h.checkBox.checked),i&&typeof i=="function"&&i(h.checkBox.checked,h.parent),h.checkBox.stage&&h.checkBox.stage.update()}),h},t.List.colorPicker=function(e,r,i,l,a,s,f,u,v){var C="label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor",h;if(h=at(t.List.colorPicker,arguments,C))return h;var g=new t.Container(620,100);return g.type="ListItem",g.listItem="ColorPicker",n(f)&&(f=20),n(u)&&(u=30),t.List.makeBase(g,e,f,v),n(r)&&(r=t.pink),g.colorPicker=i||new t.ColorPicker({alphaPicker:!1,selectedColor:r}),g.swatch=new t.Rectangle(132,66,r,t.lighter,5).center(g).pos(270,null,!0).cur(),g.swatch.on("mousedown",function(){g.colorPicker.selectedColor=g.swatch.color,g.colorPicker.show()}),g.colorLabel=new t.Label(g.swatch.color.toUpperCase(),40,null,t.light).center(g).pos(u,null,!0),g.colorPicker.on("close",function(){var k=g.colorPicker.stage;g.colorPicker.hide(),k&&k.update()}),g.colorPicker.on("change",function(){var k=g.colorPicker.stage;g.swatch.color=g.colorPicker.selectedColor,g.colorLabel.text=g.swatch.color.toUpperCase(),g.colorPicker.hide(),a&&s&&(a[s]=g.colorPicker.selectedColor),l&&typeof l=="function"&&l(g.colorPicker.selectedColor,g.parent),k&&k.update()}),g},t.List.checkItem=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w){var E="label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit",A;if(A=at(t.List.checkItem,arguments,E))return A;var p=t.getStyle("CheckBox",I,w);n(r)&&(r=p.size!=null?p.size:20);var T=t.getStyle("List",I,w);n(i)&&(i=300),n(a)&&(a=10),n(s)&&(s=10),n(l)&&(l=T.align!=null?T.align:"center"),n(f)&&(f=T.spacing!=null?T.spacing:2),n(g)&&(g=T.backgroundColor!=null?T.backgroundColor:t.tin),n(k)&&(k=T.rollBackgroundColor!=null?T.rollBackgroundColor:t.grey),n(y)&&(y=T.selectedBackgroundColor!=null?T.selectedBackgroundColor:t.charcoal),n(x)&&(x=T.selectedRollBackgroundColor!=null?T.selectedRollBackgroundColor:t.grey),n(u)&&(u=T.color!=null?T.color:t.white),n(v)&&(v=T.rollColor!=null?T.rollColor:u),n(C)&&(C=T.selectedColor!=null?T.selectedColor:u),n(h)&&(h=T.selectedRollColor!=null?T.selectedRollColor:v);var B=new t.Container;return B.type="CheckItem",B.checkBox=new t.CheckBox({size:r,label:e,color:u,tap:!0}),B.backing=new t.Rectangle(i-f*2,B.checkBox.height+s*2,g).addTo(B),B.checkBox.center(B),l!="center"&&l!="middle"&&B.checkBox.pos(a,null,l=="right"),B.backing.tap(function(){B.checkBox.toggle(),B.zimOut()}),B.checkBox.change(function(){B.zimOut()}),B.zimOver=function(){B.backing.color=B.checkBox.checked?x:k,B.checkBox.label.color=B.checkBox.checked?h:v,B.stage&&B.stage.update()},B.zimOut=function(){B.backing.color=B.checkBox.checked?y:g,B.checkBox.label.color=B.checkBox.checked?C:u,B.stage&&B.stage.update()},B.backing.on("mouseover",B.zimOver),B.checkBox.on("mouseover",B.zimOver),B.backing.on("mouseout",B.zimOut),B.checkBox.on("mouseout",B.zimOut),B},t.Stepper=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S){var X="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, arrowColor, arrowScale, style, group, inherit",m;if(m=at(t.Stepper,arguments,X,this))return m;De("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=o;var O=d===!1?{}:t.getStyle(this.type,this.group,S);n(e)&&(e=O.list!=null?O.list:[]),n(r)&&(r=O.width!=null?O.width:100),n(i)&&(i=O.backgroundColor!=null?O.backgroundColor:t.white),n(l)&&(l=O.borderColor!=null?O.borderColor:null),n(a)&&(a=O.borderWidth!=null?O.borderWidth:null),l<0||a<0?l=a=null:l!=null&&a==null&&(a=1),n(f)&&(f=O.color!=null?O.color:t.grey),n(s)&&(s=O.label!=null?O.label:""),(typeof s=="string"||typeof s=="number")&&(s=new t.Label({text:s,size:O.size!=null?O.size*2:40,color:f,align:O.align!=null?O.align:"center",valign:O.valign!=null?O.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),n(u)&&(u=O.vertical!=null?O.vertical:!1),n(v)&&(v=O.arrows!=null?O.arrows:!0),n(C)&&(C=O.corner!=null?O.corner:16),n(h)&&(h=O.shadowColor!=null?O.shadowColor:"rgba(0,0,0,.3)"),n(g)&&(g=O.shadowBlur!=null?O.shadowBlur:14),n(k)&&(k=O.continuous!=null?O.continuous:!1),n(y)&&(y=O.display!=null?O.display:!0),n(x)&&(x=O.press!=null?O.press:!0),n(I)&&(I=O.hold!=null?O.hold:!0);var de=mt(w);n(w)&&(w=O.holdDelay!=null?O.holdDelay:de=="s"?.4:400),n(E)&&(E=O.holdSpeed!=null?O.holdSpeed:de=="s"?.2:200),Mt(E,de),n(A)&&(A=O.draggable!=null?O.draggable:!0),(n(p)||p<=0)&&(p=O.dragSensitivity!=null?O.dragSensitivity:.1),n(T)&&(T=O.dragRange!=null?O.dragRange:200),n(B)&&(B=O.stepperType!=null?O.stepperType:e.length>0?"list":"number"),n(F)&&(F=O.min!=null?O.min:0),n(D)&&(D=O.max!=null?O.max:10),n(P)&&(P=O.step!=null?O.step:1),n(Y)&&(Y=O.step2!=null?O.step2:P),n(_)&&Y!=P&&B=="number"&&(_=O.arrows2!=null?O.arrows2:!0),n(V)&&(V=O.arrows2Scale!=null?O.arrows2Scale:.5),n(b)&&(b=O.keyEnabled!=null?O.keyEnabled:!0),n(Z)&&(Z=O.keyArrows!=null?O.keyArrows:!0),n($)&&($=O.rightForward!=null?O.rightForward:!0),n(Q)&&(Q=O.downForward!=null?O.downForward:B!="number"),n(L)&&(L=O.arrowColor!=null?O.arrowColor:i),n(c)&&(c=O.arrowScale!=null?O.arrowScale:1);var R=this,N,se=60,ie=se/4;i=et(i);var q=P,z,ce=1,Ie;if(B=="number"){if(F=Number(F),D=Number(D),isNaN(F)&&(F=0),isNaN(D)&&(D=100),D<F){ce=-1;var K=D;D=F,F=K,z=D}else z=F;this.min=F,this.max=D,0>F&&0<D&&(z=0),P=Math.abs(P),Ie=Math.max(fe(P),fe(Y))}else if(B=="letter"){e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),typeof F!="string"&&(F="A"),typeof D!="string"&&(D="Z"),F=F.substr(0,1).toUpperCase(),D=D.substr(0,1).toUpperCase();var xe=e.indexOf(F);xe<0&&(F="A",xe=0);var J=e.indexOf(D);J<0&&(D="Z",J=e.length),J<xe&&(e.reverse(),xe=e.length-1-xe,J=e.length-1-J),e=e.splice(xe,J-xe+1)}else B="list";function fe(Ye){var nt=String(Ye).split(".")[1];return nt?nt=nt.length:nt=0,nt}var U,ue=0,ke=0;A&&this.on("mousedown",function(Ye){R.zimAccessibility&&R.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ue=Ye.rawX/t.scaX,ke=Ye.rawY/t.scaY,U=this.stage.on("stagemousemove",function(nt){ue=nt.rawX/t.scaX,ke=nt.rawY/t.scaY}))},null,!0),this.label=s,s.mouseChildren=!1,s.mouseEnabled=!1;var ne,ve,we,ee,le,ye,oe,Me,ae,Se,Le,Ce,te;if(v&&(we=this.containerPrev=new t.Container({style:!1}),this.addChild(we),ee=this.arrowPrev=new t.Triangle(se,se*.8,se*.8,L,null,null,null,null,null,null,null,!1).sca(c),h!=-1&&g>0&&(we.shadow=new Fe.Shadow(h,3,3,g)),we.addChild(ee),we.expand(),we.cur("pointer"),we.on("mousedown",function(Ye){if(!(R.zimAccessibility&&R.zimAccessibility.aria)){q=P;var nt=u?Q?1:-1:$?-1:1;it(nt),Xe(nt,null,null,Ye.stageX/t.scaX,Ye.stageY/t.scaY)}}),I&&we.on("pressup",Qe),u?(we.rotation=180,we.x=r/2,y?we.y=we.height+ie+se+we.height/2+ie:we.y=we.height*2):(we.rotation=-90,we.x=we.height/2,we.y=se/2)),y){var Oe=this.textBox=new t.Rectangle(r,se,i,l,a,C,null,null,null,!1);Oe.cur("pointer"),this.addChild(Oe),h!=-1&&g>0&&(Oe.shadow=new Fe.Shadow(h,3,3,g)),v&&(u?v&&(Oe.y=ee.height+ie):v&&(Oe.x=ee.height+ie)),this.addChild(s),e.length>0&&(N=0,s.text=e[N]),s.center(R);var Re;Oe.on("mousedown",function(Ye){R.zimAccessibility&&R.zimAccessibility.aria||(Re=R.currentValue,x&&it(1),Xe(1,!0,null,Ye.stageX/t.scaX,Ye.stageY/t.scaY))}),Oe.on("pressup",function(){R.zimAccessibility&&R.zimAccessibility.aria})}else e.length>0&&(N=0);v&&(le=this.containerNext=new t.Container({style:!1}),this.addChild(le),ye=this.arrowNext=new t.Triangle(se,se*.8,se*.8,L,null,null,null,null,null,null,null,!1).sca(c),h!=-1&&g>0&&(le.shadow=new Fe.Shadow(h,3,3,g)),le.addChild(ye),le.expand(),le.cur("pointer"),le.on("mousedown",function(Ye){if(!(R.zimAccessibility&&R.zimAccessibility.aria)){q=P;var nt=u?Q?-1:1:$?1:-1;it(nt),Xe(nt,null,null,Ye.stageX/t.scaX,Ye.stageY/t.scaY)}}),I&&le.on("pressup",Qe),u?(le.rotation=0,le.x=r/2,le.y=le.getBounds().height/2):(le.rotation=90,y?le.x=Oe.x+Oe.getBounds().width+le.getBounds().height/2+ie:le.x=we.x+we.getBounds().width,le.y=se/2));function Xe(Ye,nt,pe,Je,be){if(I){Le=Je,Ce=be,Le==0&&(Le=1),Ce==0&&(Ce=1),A||(p=1);var Ee=E*(de=="s"?1e3:1),_e=w*(de=="s"?1e3:1),Ge=Ee;te=new t.Proportion(0,T,Ee,Ee*p),ne=setTimeout(function(){function Ue(){ve=setTimeout(function(){var tt=Ye;if(A){var Ae=Math.abs(ue-Le),Ze=Math.abs(ke-Ce);u?(!nt&&!pe&&(Ae=0),pe&&(Ze=0)):(!nt&&!pe&&(Ze=0),pe&&(Ae=0)),(Ae>=10||Ze>=10)&&(Ae>Ze?(q=u?Y:P,tt=ue-Le>0?1:-1,$||tt*-1,Ge=te.convert(Math.abs(Le-ue))):(q=u?P:Y,tt=ke-Ce>0?1:-1,(B=="number"||!Q)&&(tt*=-1),Ge=te.convert(Math.abs(Ce-ke))))}it(tt),Ue()},Ge)}Ue()},_e)}}I&&y&&Oe.on("pressup",Qe);function Qe(){R.zimAccessibility&&R.zimAccessibility.aria||(clearTimeout(ne),clearTimeout(ve))}_&&(oe=this.prev2=new t.Container({style:!1}),Me=this.arrowPrev2=new t.Triangle(se,se*.8,se*.8,"rgba(0,0,0,.2)",L,2,null,null,null,null,null,!1),oe.addChild(Me),oe.expand(),oe.cur("pointer"),oe.sca(V),oe.alpha=.5,oe.on("mousedown",function(Ye){if(!(R.zimAccessibility&&R.zimAccessibility.aria)){q=Y;var nt=u?$?-1:1:Q?1:-1;it(nt),Xe(nt,null,!0,Ye.stageX/t.scaX,Ye.stageY/t.scaY)}}),I&&oe.on("pressup",Qe),ae=this.next2=new t.Container({style:!1}),Se=this.arrowNext2=new t.Triangle(se,se*.8,se*.8,"rgba(0,0,0,.2)",L,2,null,null,null,null,null,!1),ae.addChild(Se),ae.expand(),ae.cur("pointer"),ae.sca(V),ae.alpha=.5,ae.on("mousedown",function(Ye){if(!(R.zimAccessibility&&R.zimAccessibility.aria)){q=Y;var nt=u?$?1:-1:Q?-1:1;it(nt),Xe(nt,null,!0,Ye.stageX/t.scaX,Ye.stageY/t.scaY)}}),I&&ae.on("pressup",Qe),u?(oe.y=this.height/2,oe.x=-oe.width/2-ie*Math.max(.2,Math.min(1,V)),oe.rotation=270,ae.y=this.height/2,ae.x=this.width+ae.width/2+ie*Math.max(.2,Math.min(1,V)),ae.rotation=90):(ae.x=this.width/2,ae.y=-ae.height/2-ie*Math.max(.2,Math.min(1,V)),ae.rotation=0,oe.x=this.width/2,oe.y=this.height+oe.height/2+ie*Math.max(.2,Math.min(1,V)),oe.rotation=180),this.addChild(oe,ae)),Object.defineProperty(this,"stepperArray",{get:function(){if(B=="number"){e=[];for(var Ye=R.min;Ye<=R.max;Ye+=Math.min(P,Y))e.push(Number(t.decimals(Ye,Ie,null,!1)));e.push(D)}return e},set:function(Ye){e=Ye;var nt=R.selectedIndex;R.selectedIndex=nt}}),Object.defineProperty(this,"min",{get:function(){return F},set:function(Ye){if(B=="number"){R.currentValue<Ye&&(R.currentValue=Ye),F=Ye;var nt=R.selectedIndex;R.selectedIndex=nt}else F=Ye}}),Object.defineProperty(this,"max",{get:function(){return D},set:function(Ye){if(B=="number"){R.currentValue>Ye&&(R.currentValue=Ye),D=Ye;var nt=R.selectedIndex;R.selectedIndex=nt}else D=Ye}}),He(B=="number"?z:e[N],B=="number"?z:N);function it(Ye){var nt;if(B=="number"){z=Number(z);var pe=z;z+=Number(q*Ye*ce),z=t.decimals(z,Ie),k?z>R.max?z=R.min:z<R.min&&(z=R.max):(z>R.max?(z=P==1?R.max:pe,y&&Oe.cur("default")):y&&Oe.cur("pointer"),z<R.min&&(z=P==1?R.min:pe))}else{if(nt=N+Ye,k)nt>e.length-1&&(nt=0),nt<0&&(nt=e.length-1);else{if(nt>e.length-1){y&&Oe.cur("default");return}else y&&Oe.cur("pointer");if(nt<0)return}N=nt}He(B=="number"?z:e[N],B=="number"?z:N),R.currentValue!=Re&&R.dispatchEvent("change"),Re=R.currentValue}Object.defineProperty(this,"selectedIndex",{get:function(){return B=="number"?R.stepperArray.indexOf(R.currentValue):N},set:function(Ye){n(Ye)||(B=="number"?(N=Math.min(R.stepperArray.length-1,Math.max(0,Ye)),z=R.stepperArray[N],He(z,z)):(Ye=Math.min(e.length-1,Math.max(0,Ye)),N=Ye,He(e[N],N)))}}),Object.defineProperty(this,"currentValue",{get:function(){return B=="number"?Number(z):e[N]},set:function(Ye){if(!n(Ye))if(B=="number"){if(Ye=Number(Ye),R.max>R.min){if(Ye>R.max||Ye<R.min)return}else if(Ye<R.max||Ye>R.min)return;var nt=R.stepperArray.indexOf(Ye);if(nt<0)return;N=nt,z=Number(R.stepperArray[N]),He(z,z)}else{if(e.indexOf(Ye)>-1)Ye=e.indexOf(Ye);else return;if(Ye==R.selectedIndex)return;N=Ye,He(e[N],N)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return R.currentValue},set:function(Ye){String(Ye)!=String(R.currentValue)&&(R.currentValue=Ye,R.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return k},set:function(Ye){k=Ye,B=="number"?He(z,z):He(e[R.selectedIndex],R.selectedIndex)}}),this._enabled=!0,Object.defineProperty(R,"enabled",{get:function(){return R._enabled},set:function(Ye){Ot(R,Ye),Ye?(B=="number"?He(z,z):He(e[R.selectedIndex],R.selectedIndex),j.addEventListener("keydown",R.keyDownEvent)):(he(),me(),j.removeEventListener("keydown",R.keyDownEvent),y&&(s.mouseChildren=!1),y&&(s.mouseEnabled=!1)),le&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&le.stage?le.stage.update():s&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&s.stage&&s.stage.update()}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==R},set:function(){t.KEYFOCUS=R}}),t.KEYFOCUS||Be(),this.on("mousedown",function(){Be()});function Be(){R.keyFocus=!0;var Ye=document.activeElement;Ye&&Ye.blur()}function Ke(){we.alpha=1,ee.color=L,we.cur("pointer"),le.alpha=1,ye.color=L,le.cur("pointer"),k||(B=="number"?(N==R.min&&(ce>0?he():me()),N==R.max&&(ce>0?me():he())):(N==0&&(u?me():he()),N==e.length-1&&(u?he():me())))}function He(Ye,nt){N=nt,y&&(B=="number"&&Ye!=0&&Ie>0&&(Ye=t.decimals(Ye,Ie,!0)),s.text=Ye,s.center(R)),v&&Ke(),le&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&le.stage?le.stage.update():s&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&s.stage&&s.stage.update(),R.zimAccessibility&&R.zimAccessibility.changeTitle(R,null,!0)}function he(){v&&(we.alpha=.8,ee.color=t.fog,we.cur("default"))}function me(){v&&(le.alpha=.8,ye.color=t.fog,le.cur("default"))}var Te,ze=!0,st="";this.on("mousedown",function(){ze=!0,st="",!(R.zimAccessibility&&R.zimAccessibility.aria)&&(R.focus=!0,Te=!1)}),this.keyDownEvent=function(Ye){if(R.stage&&(R.zimAccessibility&&R.focus||!R.zimAccessibility&&R.keyFocus)){Ye||(Ye=event);var nt=Ye.keyCode;if(Z&&nt>=37&&nt<=40){var pe=Q?40:38,Je=$?39:37,be=Q?38:40,Ee=$?37:39;nt==pe||nt==Je?(u&&nt==pe||!u&&nt==Je?q=P:q=Y,it(1)):(nt==be||nt==Ee)&&(u&&nt==be||!u&&nt==Ee?q=P:q=Y,it(-1))}if(b)if(B=="number"){var _e=null,Ge=null;if(nt==8){var Ue=String(st).split("");Ue.pop(),_e=Ue.pop(),st=Ue.join("")}if(!Ye.shiftKey&&nt>=48&&nt<=57?_e=nt-48:nt>=96&&nt<=105?_e=nt-96:nt==190?(st=String(st)+".",Ge=!0):nt==173||nt==189?(R.currentValue=R.currentValue*-1,R.currentValue!=Re&&R.dispatchEvent("change"),Re=R.currentValue,Te=!Te):nt==46&&(ze=!0,st=""),n(_e)&&n(Ge)){ze=!0,st="";return}if(n(_e)||(ze?(ze=!1,st=_e):st=_e=+(st+""+_e),_e<F||_e>D))return;R.currentValue=_e,R.currentValue!=Re&&R.dispatchEvent("change"),Re=R.currentValue}else ze=!0,st="",R.currentValue=String.fromCharCode(Ye.keyCode),R.currentValue!=Re&&R.dispatchEvent("change"),Re=R.currentValue}},j.addEventListener("keydown",this.keyDownEvent),this.next=function(){it(1)},this.prev=function(){it(-1)},n(re)&&(re=O.selectedIndex!=null?O.selectedIndex:0),R.selectedIndex=re,n(G)&&(G=O.currentValue!=null?O.currentValue:null),n(G)||(R.currentValue=G),d!==!1&&t.styleTransforms(this,O),this.clone=function(){return R.cloneProps(new t.Stepper(e,r,i,l,a,s.clone(),f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,this.group,S))},this.dispose=function(Ye,nt,pe){return j.removeEventListener("keydown",R.keyDownEvent),R.removeAllEventListeners(),R.stage&&R.stage.off(U),pe||this.zimContainer_dispose(!0),we=this.containerPrev=ee=this.arrowPrev=null,le=this.containerNext=ye=this.arrowNext=null,Oe=this.textBox=s=this.label=null,!0}},t["zut"]=function(e){if(!n(e)&&e["key"])t.async("https://zimjs.com/gamdata.php?id="+e["key"]+"&player="+e["player"]+"&score="+e["score"]+"&reverse="+e["info"]["reverse"]+"&total="+e["info"]["total"]+"&allowZero="+e["info"]["allowZero"],e["info"]["type"]);else return!0},t.extend(t.Stepper,t.Container,["clone","dispose"],"zimContainer",!1),t.Slider=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d){var o="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, labelColor, style, group, inherit",S;if(S=at(t.Slider,arguments,o,this))return S;De("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=c;var X=L===!1?{}:t.getStyle(this.type,this.group,d);if(n(e)&&(e=X.min!=null?X.min:0),n(r)&&(r=X.max!=null?X.max:10),r-e==0){je("ZIM Slider range must not be 0");return}n(p)&&(p=X.sound!=null?X.sound:!1),n(i)&&(i=X.step!=null?X.step:0),n(l)&&(l=X.button!=null?X.button:p?"aztec":null),l&&l.type=="Button"&&(l=l.clone()),n(a)&&(a=X.barLength!=null?X.barLength:300),n(s)&&(s=X.barWidth!=null?X.barWidth:3),n(f)&&(f=X.barColor!=null?X.barColor:p?t.lighter:t.granite),n(u)&&(u=X.vertical!=null?X.vertical:!!p),n(v)&&(v=X.useTicks!=null?X.useTicks:!!p),n(h)&&(h=X.tickStep!=null?X.tickStep:i||(v||p?(r-e)/40:0)),n(g)&&(g=X.semiTicks!=null?X.semiTicks:h?3:0),n(C)&&(C=X.tickColor!=null?X.tickColor:p?t.tin:f),n(k)&&(k=X.tickScale!=null?X.tickScale:p?1.25:1),n(y)&&(y=X.semiTickScale!=null?X.semiTickScale:1),n(x)&&(x=X.accentSize!=null?X.accentSize:p?10:0),n(I)&&(I=X.accentOffset!=null?X.accentOffset:p?-(x+s)/2:0),n(w)&&(w=X.accentColor!=null?X.accentColor:t.pink),n(E)&&(E=X.accentBackgroundColor!=null?X.accentBackgroundColor:p?t.blue:t.clear),n(A)&&(A=X.accentDifference!=null?X.accentDifference:-.5),n(T)&&(T=X.inside!=null?X.inside:!1),n(B)&&(B=X.keyArrows!=null?X.keyArrows:!0),n(D)&&(D=X.keyArrowsH!=null?X.keyArrowsH:!0),n(P)&&(P=X.keyArrowsV!=null?X.keyArrowsV:!0),n(F)&&(F=X.keyArrowsStep!=null?X.keyArrowsStep:(r-e)/100),n(Y)&&(Y=X.damp!=null?X.damp:!1),n(_)&&(_=X.currentValue!=null?X.currentValue:!1),n(V)&&(V=X.expand!=null?X.expand:t.mobile()?10:null),n(b)&&(b=X.expandVertical!=null?X.expandVertical:V),n(Z)&&(Z=X.expandBar!=null?X.expandBar:null),n($)&&($=X.expandBarVertical!=null?X.expandBarVertical:V),n(Q)&&(Q=X.useLabels!=null?X.useLabels:!1),n(re)&&(re=X.labelMargin!=null?X.labelMargin:20),n(G)&&(G=X.labelColor!=null?X.labelColor:t.dark);var m,O=this,de=R(e,r,i,_);this.veeObj={min:de[0],max:de[1],step:de[2],currentValue:de[3]};function R(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i);var N=i;_=t.Pick.choose(_);var se;x&&(O.accentBacking=new t.Rectangle(a-.25,x+A,E).addTo(this).rot(u?90:0).mov(u?-I-s/2+A/2:.25,u?0:I+s/2-A/2),se=O.accent=new t.Rectangle(a,x,w).sca(0,1).rot(u?-90:0).mov(u?-I-x-s/2:0,u?a:I+s/2).addTo(this));function ie(){se.sca((O.currentValue-O.min)/Math.abs(O.max-O.min),1)}var q=!(!n(X.backing)&&X.backing.type!="Pattern");function z(Ge,Ue,tt){var Ae=new t.Shape(Ue,tt);return Ae.f(Ge).s(X.borderColor!=null?X.borderColor:t.tin).ss(X.borderWidth!=null?X.borderWidth:3).mt(2,0).lt(Ue+2,tt*.2).lt(Ue+2,tt*.8).lt(2,tt).cp().centerReg({add:!1}),Ae}if(n(l)||typeof l=="string"){var ce=30,Ie=40;u&&(ce=50,Ie=40);var K;if(l=="pill"||l=="aztec"||l=="circle"||l=="grip"){if(l=="pill")K={width:u?40:18,height:u?18:40,borderColor:t.tin,borderWidth:3,corner:8};else if(l=="aztec"){ce=X.width!=null?X.width:Math.max(ce,Ie)*.9,Ie=X.height!=null?X.height:Math.min(ce,Ie)*.6;var xe=z(X.backgroundColor!=null?X.backgroundColor:t.lighter,ce,Ie).rot(u?0:-90),J=z(X.rollBackgroundColor!=null?X.rollBackgroundColor:t.white,ce,Ie).rot(u?0:-90);K={width:ce,height:Ie,backing:xe,rollBacking:J},X.borderWidth=0,X.borderColor=0}else l=="circle"&&(ce=X.width!=null?X.width:30,Ie=X.height!=null?X.height:30,K={width:ce,height:ce,corner:X.corner!=null?X.corner:ce/2});O.buttonType=l}var fe=X.borderColor!=null?X.borderColor:K?K.borderColor:q?t.granite:null;if(l=new t.Button({width:X.width!=null?X.width:K?K.width:ce,height:X.height!=null?X.height:K?K.height:Ie,label:"",backgroundColor:X.backgroundColor!=null?X.backgroundColor:t.white,rollBackgroundColor:X.rollBackgroundColor!=null?X.rollBackgroundColor:n(X.backgroundColor)||X.backgroundColor==t.white?t.moon:X.backgroundColor.lighten(.2),borderColor:fe,rollBorderColor:X.rollBorderColor!=null?X.rollBorderColor:fe,borderWidth:X.borderWidth!=null?X.borderWidth:K?K.borderWidth:q?1:null,corner:X.corner!=null?X.corner:K?K.corner:0,backing:X.backing!=null?X.backing.clone():K?K.backing:null,rollBacking:X.rollBacking!=null?X.rollBacking.clone():K?K.rollBacking:null,shadowColor:X.shadowColor!=null?X.shadowColor:null,shadowBlur:X.shadowBlur!=null?X.shadowBlur:null,hitPadding:30,style:!1}),O.buttonType=="circle")l.scaleY=Ie/ce,u||l.rot(-90);else if(O.buttonType=="grip"){var U=[1,1,1],ue=.4;t.loop(U,function(Ge,Ue,tt){u?new t.Line(l.width*.62,Ge,l.borderColor?l.borderColor:t.grey).pos(0,l.height*ue/2+(Ue+1)*(l.height*(1-ue))/(tt+1),t.CENTER,t.TOP,l):new t.Line(l.height*.62,Ge,l.borderColor?l.borderColor:t.grey).rot(90).pos(l.width*ue/2+(Ue+1)*(l.width*(1-ue))/(tt+1),0,t.LEFT,t.CENTER,l)})}}l.rollPersist=!0,(!n(V)||!n(b))&&l.expand(V,b);var ke,ne;u?(ke=l.width,T?(ne=a,this.setBounds(0,0,ke,ne)):(ne=a+l.height,this.setBounds(-l.width/2,-l.height/2,ke,ne))):(ne=Math.max(l.height,s),T?(ke=a,this.setBounds(0,0,ke,ne)):(ke=a+l.width,this.setBounds(-l.width/2,-l.height/2,ke,ne)));var ve=e,we=0;this.button=l,this.cur("pointer");var ee,le,ye,oe,Me;if(v){oe=this.ticks=new t.Shape({style:!1}),this.addChild(oe),Me=oe.graphics,Me.ss(1).s(C);var ae=Math.round((r-e)/(h||i)),Se=(r-e)/ae;h?(Se!=h&&ht&&je("Slider() - non-divisible step ("+h+") adjusted to "+Se),h=Se):(Se!=i&&ht&&je("Slider() - non-divisible step ("+i+") adjusted to "+Se),i=Se);var Le;T?Le=(a-(u?l.height:l.width))/Math.abs(ae):Le=a/Math.abs(ae)}var Ce,te,Oe,Re,Xe,Qe,it;if(u){if(Ce=T?l.height/2:0,ee=this.bar=new t.Rectangle(s,a,f,null,null,null,null,null,null,!1),Z?ee.expand(Z,$):ee.expand(20,0),ee.centerReg(this),l.centerReg(this),ye=ee.getBounds(),le=new Fe.Rectangle(ee.x,ye.y+Ce,0,ye.height-Ce*2),v){for(Q&&(te=O.labels=new t.Container().addTo(O)),Oe=0;Oe<=Math.abs(ae);Oe++)Re=Oe%(g+1)==0,Xe=Re?25*k:15*y,Qe=Ce+Le*Oe,Me.mt(0,Qe).lt(Xe,Qe),Q&&(g&&Re||!g)&&(it=Math.max(t.countDecimals(N),t.countDecimals(e),t.countDecimals(r)),new t.Label({text:t.decimals(r-(r-e)/Math.abs(ae)*Oe,it+1),size:X.size?X.size:10,color:G,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(Xe+re+2,Qe-1,te));oe.x=ee.x+15}}else if(Ce=T?l.width/2:0,ee=this.bar=new t.Rectangle(a,s,f,null,null,null,null,null,null,!1),Z?ee.expand(Z,$):ee.expand(0,20),ee.centerReg(this),l.centerReg(this),ye=ee.getBounds(),le=new Fe.Rectangle(ye.x+Ce,ee.y,ye.width-Ce*2,0),v){for(Q&&(te=O.labels=new t.Container().addTo(O)),Oe=0;Oe<=Math.abs(ae);Oe++)Re=Oe%(g+1)==0,Xe=Ce+Le*Oe,Qe=-(Re?25*k:15*y),Me.mt(Xe,0).lt(Xe,Qe),Q&&(g&&Re||!g)&&(it=Math.max(t.countDecimals(N),t.countDecimals(e),t.countDecimals(r)),new t.Label({text:t.decimals(e+(r-e)/Math.abs(ae)*Oe,it+1),size:X.size?X.size:10,color:G,align:"center",valign:"center"}).centerReg({add:!1}).loc(Xe,Qe-re,te));oe.y=ee.y-10}l.x=le.x,l.y=le.y;function Be(Ge){return i==0?Ge:Math.round(Ge/i)*i}var Ke,He;l.on("mousedown",function(Ge){m=Ge.target.stage,O.focus=!0;var Ue=O.globalToLocal(Ge.stageX/t.scaX,Ge.stageY/t.scaY);Ke=Ue.x-l.x,He=Ue.y-l.y,m&&(m.mouseMoveOutside=!0)}),l.on("pressmove",function(Ge){he(Ge)});function he(Ge){var Ue=O.globalToLocal(Ge.stageX/t.scaX,Ge.stageY/t.scaY),tt=ze(Ue.x-Ke,Ue.y-He,le);u?(l.x=tt.x,ve=Be((tt.y-le.y)/le.height*(e-r)),l.y=le.y+ve*le.height/(e-r),ve+=r,l.y!=we&&O.dispatchEvent("change"),we=l.y):(ve=Be((tt.x-le.x)/le.width*(r-e)),l.x=le.x+ve*le.width/(r-e),ve+=e,l.y=tt.y,l.x!=we&&O.dispatchEvent("change"),we=l.x),se&&ie(),Te(),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&O.stage&&O.stage.update()}function me(Ge){return Ge>0?1:-1}function Te(){O.zimAccessibility&&O.zimAccessibility.changeTitle(O,null,!0)}function ze(Ge,Ue,tt){return Ge=Math.max(tt.x,Math.min(tt.x+tt.width,Ge)),Ue=Math.max(tt.y,Math.min(tt.y+tt.height,Ue)),{x:Ge,y:Ue}}ee.on("mousedown",function(Ge){m=Ge.target.stage,Ke=0,He=0,!(O.zimAccessibility&&O.zimAccessibility.aria)&&he(Ge)});var st,Ye;Y&&(st=e,Ye=new t.Damp(st,Y),O.ticker=t.Ticker.add(function(){st=Ye.convert(ve)})),Object.defineProperty(this,"currentValue",{get:function(){return Y?st:ve},set:function(Ge){n(Ge)||(e<r?(Ge<e&&(Ge=e),Ge>r&&(Ge=r)):(Ge>e&&(Ge=e),Ge<r&&(Ge=r)),ve=Ge=Be(Ge),Ye&&Ye.immediate(ve),u?(l.y=(Ge-r)/(e-r)*le.height+Ce,we=l.y):(l.x=(Ge-e)/(r-e)*le.width+Ce,we=l.x),se&&ie(),Te(),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&O.stage&&O.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return Y?st:ve},set:function(Ge){Ge!=O.currentValue&&(O.currentValue=Ge,O.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return e},set:function(){ht&&je("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){ht&&je("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){ht&&je("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return D},set:function(Ge){D=Ge}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return P},set:function(Ge){P=Ge}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==O},set:function(){t.KEYFOCUS=O}}),B&&!t.KEYFOCUS&&nt(),this.on("mousedown",function(){B&&nt()});function nt(){O.keyFocus=!0;var Ge=document.activeElement;Ge&&Ge.blur()}var pe=!1,Je=!1,be=!1,Ee=!1;this.keyDownEvent=function(Ge){O.stage&&(O.zimAccessibility&&O.focus||!O.zimAccessibility&&O.keyFocus)&&(Ge.keyCode==37&&D?pe=!0:Ge.keyCode==40&&P?Je=!0:Ge.keyCode==39&&D?be=!0:Ge.keyCode==38&&P&&(Ee=!0),O.keyInterval==null&&(pe||Je||be||Ee)&&(_e(),O.keyTimeout=setTimeout(function(){O.keyInterval==null&&(pe||Je||be||Ee)&&(O.keyInterval=setInterval(_e,40))},140)))};function _e(){(pe||Je)&&(i>0?O.currentValueEvent-=i*me(r-e):O.currentValueEvent-=F*me(r-e)),(be||Ee)&&(i>0?O.currentValueEvent+=i*me(r-e):O.currentValueEvent+=F*me(r-e))}j.addEventListener("keydown",this.keyDownEvent),O.keyUpEvent=function(Ge){Ge.keyCode==37?pe=!1:Ge.keyCode==40?Je=!1:Ge.keyCode==39?be=!1:Ge.keyCode==38&&(Ee=!1),O.keyInterval!=null&&!pe&&!Je&&!be&&!Ee&&(clearInterval(O.keyInterval),O.keyInterval=null)},j.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(O,"enabled",{get:function(){return O._enabled},set:function(Ge){Ot(O,Ge),Ge?(j.addEventListener("keydown",O.keyDownEvent),j.addEventListener("keyup",O.keyUpEvent)):(j.removeEventListener("keydown",O.keyDownEvent),j.removeEventListener("keyup",O.keyUpEvent))}}),n(_)||(O.currentValue=_),t.setSwipe(this,!1),L!==!1&&t.styleTransforms(this,X),this.clone=function(Ge){return O.cloneProps(new t.Slider(Ge||!t.isPick(de[0])?O.min:de[0],Ge||!t.isPick(de[1])?O.max:de[1],Ge||!t.isPick(de[2])?O.step:de[2],l.clone(),a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,Ge||!t.isPick(de[3])?O.currentValue:de[3],V,b,Z,$,Q,re,G,L,this.group,d))},this.dispose=function(Ge,Ue,tt){return j.removeEventListener("keydown",O.keyDownEvent),j.removeEventListener("keyup",O.keyUpEvent),tt||this.zimContainer_dispose(!0),!0}},t.extend(t.Slider,t.Container,["clone","dispose"],"zimContainer",!1),t.Selector=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p){var T="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, liveIndex, style, group, inherit",B;if(B=at(t.Selector,arguments,T,this))return B;De("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=A;var F=E===!1?{}:t.getStyle(this.type,this.group,p),D=mt();n(e)&&(e=F.tile!=null?F.tile:new t.Tile(new t.Circle(20,t.red),4,4,10,10)),n(r)&&(r=F.borderColor!=null?F.borderColor:t.white),n(i)&&(i=F.borderWidth!=null?F.borderWidth:2),n(l)&&(l=F.backgroundColor!=null?F.backgroundColor:"rgba(0,0,0,.1)"),n(a)&&(a=F.corner!=null?F.corner:10),n(s)&&(s=F.dashed!=null?F.dashed:!1),n(f)&&(f=F.padding!=null?F.padding:e.spacingH/2),n(u)&&(u=F.paddingV!=null?F.paddingV:e.spacingV/2),n(v)&&(v=F.speed!=null?F.speed:2),n(C)&&(C=F.diagonal!=null?F.diagonal:!1),n(h)&&(h=F.dim!=null?F.dim:!1),n(g)&&(g=F.multi!=null?F.multi:!1),g&&(v=0),n(k)&&(k=F.keyArrows!=null?F.keyArrows:!0),n(y)&&(y=F.behind!=null?F.behind:!1),n(x)&&(x=F.resizeScale!=null?F.resizeScale:!1),n(I)&&(I=F.selectedIndex!=null?F.selectedIndex:null),n(w)&&(w=F.liveIndex!=null?F.liveIndex:!1),this.liveIndex=w;var P=[],Y=[];t.loop(e.items.length,function(){P.push(et(r)),Y.push(et(l))});var _=this;if(!(n(I)&&g)){var V=I,b=n(I)||I<0?0:I,Z=e.getChildAt(b);_.currentItem=e.getChildAt(b),I=V,n(I)&&(I=F.selectedIndex!=null?F.selectedIndex:0)}var $,Q,re;$=Z||e.getChildAt(0),$&&(Q=$.width+f*2,re=$.height+u*2),_.tile=e.addTo(_).cur();var G;if(g){var L=this.selectors=[];t.loop(10,function(){G=new t.Rectangle(Q,re,t.faint,t.faint,i,a,s,{ignoreScale:!x}).centerReg(_,y?0:1),G.visible=!1,L.push(G),G.mouseEnabled=!1}),this.selector=G}else G=this.selector=new t.Rectangle(Q,re,t.faint,t.faint,i,a,s,{ignoreScale:!x}).centerReg(_),G.loc(e.width/2,$.y+u,_,y?0:1),G.visible=!1;I<0||n(Z)||(G.loc($.x+f,$.y+u,_,y?0:1),G.color=Y[I],G.borderColor=P[I],G.visible=!0),e.mov(f,u),this.setBounds(e.width+f*2,e.height+u*2);var c={};this.tileDown=e.on("mousedown",function(S){var X=G;if(!(g&&(X=L.shift(),n(X)))){X.visible=!0;for(var m=S.target,O=0;m.parent!=e&&O<10;)m=m.parent,O++;if(m.parent==e&&d(m,null,X),g){var de="id"+Math.abs(S.pointerID+1);c[de]={index:I,item:Z,selector:X}}}}),g&&(this.tileMove=e.on("pressmove",function(S){var X="id"+Math.abs(S.pointerID+1),m=c[X];if(!n(m)){var O=e.itemUnderPoint(S.stageX/t.scaX,S.stageY/t.scaY);if(m.item!=O){if(_.upItem=m.item,_.upIndex=m.index,_.downItem=m.item=O,_.downIndex=m.index=O?O.tileNum:null,_.dispatchEvent("change"),n(O))m.selector.visible=!1;else{var de=e.localToLocal(O.x,O.y,_);m.selector.loc(de.x,de.y).siz(O.width+f*2,O.height+u*2),m.selector.color=Y[m.index],m.selector.borderColor=P[m.index],m.selector.visible=!0}_.stage.update()}}}),this.tileUp=e.on("pressup",function(S){var X="id"+Math.abs(S.pointerID+1),m=c[X];n(m)||(_.downIndex=_.downItem=null,_.upIndex=m.index,_.upItem=m.item,L.push(m.selector),m.selector.visible=!1,_.dispatchEvent("change"),_.stage&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&_.stage.update(),delete c[X])})),_.noAnimate=!1;function d(S,X,m){n(m)&&(m=G),Z=S,I=S.tileNum,m.color=Y[I],m.borderColor=P[I],g&&(_.upItem=_.upIndex=null,_.downItem=Z,_.downIndex=I),_.animating=!0;var O=e.localToLocal(S.x,S.y,_),de=Math.abs(O.x-G.x),R=Math.abs(O.y-G.y),N=_.noAnimate||X?0:v;if(_.noAnimate=!1,N==0)m.loc(O.x,O.y).siz(S.width+f*2,S.height+u*2),_.animating=!1,_.dispatchEvent("change");else{if(C||(de+R)*N<=0?m.animate({x:O.x,y:O.y},(R+de)*N):(m.stopAnimate(),de>=R?m.animate([{props:{x:O.x},time:Math.max(D=="s"?.1:100,de*N/(D=="s"?1e3:1))},{props:{y:O.y},time:Math.max(D=="s"?.1:100,R*N/(D=="s"?1e3:1))}]):m.animate([{props:{y:O.y},time:Math.max(D=="s"?.1:100,R*N/(D=="s"?1e3:1))},{props:{x:O.x},time:Math.max(D=="s"?.1:100,de*N/(D=="s"?1e3:1))}])),m.animate({props:{widthOnly:S.width+f*2,heightOnly:S.height+u*2},time:Math.max(D=="s"?.2:200,(R+de)*N/(D=="s"?1e3:1)),events:_.liveIndex,call:function(){_.animating=!1,_.dispatchEvent("change")}}),_.liveIndex){var se=null;m.on("animation",function(){var q=m.parent.localToGlobal(m.x,m.y),z=e.itemUnderPoint(q.x,q.y);z.tileNum!=se&&(I=z.tileNum,_.dispatchEvent("change"),se=z.tileNum)})}if(h){if(h===!0)var ie=.7;else ie=t.constrain(h,0,1);e.animate({props:{alpha:ie},rewind:!0,time:(R+de)*v*.7/(D=="s"?1e3:1)})}}e.stage&&e.stage.update()}k&&_.added(function(){_.keyEvent=_.stage.frame.on("keydown",function(S){if(_.stage&&_.enabled&&!_.animating&&(_.zimAccessibility&&_.focus||!_.zimAccessibility&&_.keyFocus)){var X=t.loop(e.items2D,function(R,N){var se=t.loop(R,function(ie,q){if(ie==Z)return[q,N]});if(Array.isArray(se))return se});X===!0&&(X=[0,0]);var m=e.items2D[X[1]].length,O=e.items2D.length,de;S.keyCode=="39"?(de=(X[0]+1)%m,d(e.items2D[X[1]][de],de<X[0])):S.keyCode=="37"?(de=(X[0]-1+m)%m,d(e.items2D[X[1]][de],de>X[0])):S.keyCode=="38"?(de=(X[1]-1+O)%O,d(e.items2D[de][X[0]],de>X[1])):S.keyCode=="40"&&(de=(X[1]+1)%O,d(e.items2D[de][X[0]],de<X[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return I},set:function(S){n(S)&&(_.currentItem=null),_.currentItem=e.items[Math.round(S)]}}),Object.defineProperty(this,"text",{get:function(){return Z.text},set:function(){ht&&je("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return Z},set:function(S){if(n(S)){Z=null,I=null,G.visible=!1,_.selectedCol=null,_.selectedRow=null;return}G.visible=!0,_.lastItem=Z,_.lastIndex=I,_.lastCol=_.selectedCol,_.lastRow=_.selectedRow,_.selectedCol=S.tileCol,_.selectedRow=S.tileRow,I=S.tileNum,Z=S,d(Z)}}),this._enabled=!0,Object.defineProperty(_,"enabled",{get:function(){return _._enabled},set:function(S){S?_.mouse():_.noMouse(),_._enabled=S}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==_},set:function(){t.KEYFOCUS=_}}),t.KEYFOCUS||o(),this.on("mousedown",function(){o()});function o(){_.keyFocus=!0;var S=document.activeElement;S&&S.blur()}E!==!1&&t.styleTransforms(this,F),this.clone=function(S){if(S)for(var X=[],m=0;m<_.tile.items.length;m++)X.push(_.tile.items[m].clone(!0));return _.cloneProps(new t.Selector(S?t.series(X):e.clone?e.clone():e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,this.style,this.group))},this.dispose=function(S,X,m){_.keyEvent&&_.stage&&_.stage.frame.off("keydown",_.keyEvent),e.off(_.tileDown),e.dispose(),g&&(e.off(_.tileMove),e.off(_.tileUp)),m||this.zimContainer_dispose(!0)}},t.extend(t.Selector,t.Container,["clone","dispose"],"zimContainer",!1),t.Dial=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O){var de="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",R;if(R=at(t.Dial,arguments,de,this))return R;De("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=m;var N=X===!1?{}:t.getStyle(this.type,this.group,O);if(n(e)&&(e=N.min!=null?N.min:0),n(r)&&(r=N.max!=null?N.max:10),r-e==0){je("ZIM Dial range must not be 0");return}n(P)&&(P=N.sound!=null?N.sound:!1),n(i)&&(i=N.step!=null?N.step:P?0:1),n(l)&&(l=N.width!=null?N.width:100),n(a)&&(a=N.backgroundColor!=null?N.backgroundColor:t.granite),n(s)&&(s=N.indicatorColor!=null?N.indicatorColor:P?t.white:t.licorice),n(f)&&(f=N.indicatorScale!=null?N.indicatorScale:1),n(u)&&(u=N.indicatorType!=null?N.indicatorType:P?"aztec":"arrow"),n(v)&&(v=N.useTicks!=null?N.useTicks:i!=0),n(C)&&(C=N.innerTicks!=null?N.innerTicks:!1),n(g)&&(g=N.tickStep!=null?N.tickStep:i||(v?.25:0)),n(k)&&(k=N.semiTicks!=null?N.semiTicks:P?3:0),n(h)&&(h=N.tickColor!=null?N.tickColor:P?t.tin:a),n(y)&&(y=N.tickScale!=null?N.tickScale:P?1.25:1),n(x)&&(x=N.semiTickScale!=null?N.semiTickScale:1.25),n(I)&&(I=N.innerCircle!=null?N.innerCircle:!0),n(E)&&(E=N.innerColor!=null?N.innerColor:P?t.pink:"rgba(0,0,0,.2)"),n(A)&&(A=N.inner2Color!=null?N.inner2Color:P?t.light:"rgba(0,0,0,.1)"),n(w)&&(w=N.innerScale!=null?N.innerScale:P?.4:.5),n(p)&&(p=N.accentSize!=null?N.accentSize:P?l/2*.15:0),n(T)&&(T=N.accentOffset!=null?N.accentOffset:l/2*.45),n(D)&&(D=N.accentDifference!=null?N.accentDifference:-.25),n(B)&&(B=N.accentColor!=null?N.accentColor:t.pink),n(F)&&(F=N.accentBackgroundColor!=null?N.accentBackgroundColor:P?t.blue:t.clear),n(_)&&(_=N.gap!=null?N.gap:P?.25:0),n(Y)&&(Y=N.linear!=null?N.linear:P),_&&(Y=!0,re=!1),n(V)&&(V=N.limit!=null?N.limit:!0),n(b)&&(b=N.keyArrows!=null?N.keyArrows:!0),n(Z)&&(Z=N.keyArrowsStep!=null?N.keyArrowsStep:(r-e)/100),n($)&&($=N.keyArrowsH!=null?N.keyArrowsH:!0),n(Q)&&(Q=N.keyArrowsV!=null?N.keyArrowsV:!0),n(re)&&(re=N.continuous!=null?N.continuous:!1),re&&(V=N.limit!=null?N.limit:!1),n(c)&&(c=N.damp!=null?N.damp:!1),n(d)&&(d=N.currentValue!=null?N.currentValue:!1),n(o)&&(o=N.useLabels!=null?N.useLabels:!1),n(S)&&(S=N.labelMargin!=null?N.labelMargin:10),V==!1&&(c=null);var se=this;this.cur("pointer");var ie=q(e,r,i,d);this.veeObj={min:ie[0],max:ie[1],step:ie[2],currentValue:ie[3]};function q(){return arguments}e=t.Pick.choose(e),r=t.Pick.choose(r),i=t.Pick.choose(i);var z=i;d=t.Pick.choose(d);var ce=l/2,Ie=l,K=e,xe=0,J;if(p){var fe=l/2+T+p/2,U=360*_/2;se.accentBacking=new t.Shape(-ce,-ce,ce*2,ce*2).addTo(this).s(F).ss(p+D).a(0,0,fe,(U-90)*t.RAD,(360-U-90)*t.RAD),J=se.accent=new t.Shape(-ce,-ce,ce*2,ce*2).addTo(this)}function ue(){J.c().s(B).ss(p),Y?J.a(0,0,fe,(U-90)*t.RAD,(Le.rotation-U*2)*t.RAD):J.a(0,0,fe,(U-90)*t.RAD,(Le.rotation-90)*t.RAD)}var ke=this.backing=new t.Circle(ce,a,null,null,null,null,null,null,!1);if(p?ke.center(this):this.addChild(ke),I){var ne=this.inner=new t.Circle(ce*w,E,null,null,null,null,null,null,!1);this.addChild(ne);var ve=this.inner2=new t.Circle(ce*(w-.1),A,null,null,null,null,null,null,!1);this.addChild(ve)}P&&(se.rotation=180);var we=Math.abs(r-e)/(g||i)+(_?1:0),ee=i?Math.abs(r-e)/i:0;if(v){var le=this.ticks=new t.Container({style:!1});if(this.addChild(le),o)var ye=se.labels=new t.Container(l*2,Ie*2).centerReg(se);for(var oe=0;oe<we;oe++){var Me=oe%(k+1)==0,ae=new t.Rectangle(1,ce*(Me?.2*y:.1*x),h,null,null,null,null,null,null,!1);if(ae.regY=ce+(C?w-.05:ae.height+ce*.1),ae.regX=.5,ae.rotation=(360-360*_)/(we-(_?1:0))*oe+360*_/2,le.addChild(ae),o&&(k&&Me||!k)){var Se=Math.max(t.countDecimals(z),t.countDecimals(e),t.countDecimals(r));new t.Label({text:t.decimals(e+(r-e)/Math.abs(ee)*oe,Se+1),size:N.size?N.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-S-1,ae).addTo(ye)}}se.expand(ae.height)}this.setBounds(-ce,-ce,l,l);var Le,Ce;if(u=="dot"||u=="circle")Le=this.indicator=new t.Container({style:!1}),Ce=this.indicatorShape=new t.Circle(ce*.19,s,null,null,null,null,null,null,!1),Le.addChild(Ce),t.sca(Le,f),Le.regY=ce-Le.getBounds().width*f/2-ce*.07;else if(u=="line"||u=="rectangle")Le=this.indicator=new t.Container({style:!1}),Ce=this.indicatorShape=new t.Rectangle(ce*.1,ce*.3,s,null,null,null,null,null,null,null,null,!1),Le.addChild(Ce),t.sca(Le,f),Le.regY=ce-Le.getBounds().width*f/2-ce*.07,Le.regX=ce*.05;else if(u=="aztec"){Le=this.indicator=new t.Container({style:!1});var te=ce*.05,Oe=ce*.1,Re=ce*.42;Ce=this.indicatorShape=new t.Shape(-Oe,0,Oe*2,Re).f(s).mt(-te,0).lt(te,0).lt(Oe,Re).lt(-Oe,Re).cp(),Le.addChild(Ce),t.sca(Le,f),Le.regY=ce-Le.getBounds().width*f/2-ce*.04}else Le=this.indicator=new t.Container({style:!1}),Ce=this.indicatorShape=new t.Triangle(ce*.4,ce*.4,ce*.4,s,null,null,null,null,null,null,null,!1),Le.addChild(Ce),t.sca(Le,f),Le.regY=ce-Le.getBounds().height*f*(C?.85:.75),C&&(Ce.rotation=180);Le.regY/=f,this.addChild(Le);function Xe(Ve){return i==0?Ve:Math.round(Ve/i)*i}var Qe,it,Be,Ke,He=0;if(re)var he=0,me=0,Te=0,ze=!1,st=!1,Ye=!0;if(Y)this.on("mousedown",function(Ve){if(!(se.zimAccessibility&&se.zimAccessibility.aria)){var ft=Qe=Le.rotation,ot=se.parent.globalToLocal(Ve.stageX/t.scaX,Ve.stageY/t.scaY);Be=se.on("pressmove",function(ut){var $e=se.parent.globalToLocal(ut.rawX/t.scaX,ut.rawY/t.scaY);Le.rotation=ft=Qe+(ot.y-$e.y)*100/(this.width||1),V&&(ft>360-360*_/2||ft<0+360*_/2)&&(ft=t.constrain(ft,360*_/2,360-360*_/2),ot=se.parent.globalToLocal(ut.rawX/t.scaX,ut.rawY/t.scaY),Qe=ft),be(ft)}),Ke=this.on("pressup",function(){se.off("pressmove",Be),se.off("pressup",Ke)})}});else{var nt=!0;this.on("mousedown",function(Ve){if(!(se.zimAccessibility&&se.zimAccessibility.aria)){Qe=Le.rotation;var ft=se.parent.globalToLocal(Ve.stageX/t.scaX,Ve.stageY/t.scaY),ot=ft.x-se.x,ut=se.y-ft.y;it=Math.atan2(ot,ut)*180/Math.PI;var $e=new Date().getTime();Be=se.on("pressmove",function(Pt){if(ze){var yt=se.parent.globalToLocal(Pt.rawX/t.scaX,Pt.rawY/t.scaY),wt=yt.x-se.x,Ft=se.y-yt.y;it=Math.atan2(wt,Ft)*180/Math.PI,Qe=Le.rotation}yt=se.parent.globalToLocal(Pt.rawX/t.scaX,Pt.rawY/t.scaY),wt=yt.x-se.x,Ft=se.y-yt.y;var _t=Math.atan2(wt,Ft)*180/Math.PI,Jt=Qe+_t-it;Jt=(Jt+360*1e4)%360,V&&nt&&(Jt-He>180&&se.currentValue!=r?Jt=0:Jt-He<-180&&(Jt=359)),nt=!0,be(Jt),He=Jt}),Ke=this.on("pressup",function(Pt){se.currentValue!=se.min&&se.currentValue!=se.max&&(nt=!1);var yt=new Date().getTime()-$e;if(yt<200){ft=se.parent.globalToLocal(Pt.rawX/t.scaX,Pt.rawY/t.scaY),ot=ft.x-se.x,ut=se.y-ft.y;var wt=Math.atan2(ot,ut)*180/Math.PI-se.rotation;be(wt)}Qe=Le.rotation,se.off("pressmove",Be),se.off("pressup",Ke)})}})}function pe(Ve){return Ve>0?1:-1}function Je(){se.zimAccessibility&&se.zimAccessibility.changeTitle(se,null,!0)}function be(Ve){if(re){st&&(he=Ve,st=!1),Ve>he+180?Te-=360:Ve<he-180&&(Te+=360),me=Te+Ve,Ye=!1;var ft=se.currentValue;return se.currentValue=Xe(me*(r-e)/360),ft!=se.currentValue&&se.dispatchEvent("change"),he=Ve,Ye=!0,J&&ue(),!0}var ot;Ve<0&&(Ve+=360),Ve=Ve%360,i!=0?(Ve=Math.min(Ve,360),ot=Xe((Ve-360*_/2)/(360-360*_)*(r-e)),Le.rotation=360*_/2+ot*(360-360*_)/(r-e)):(Le.rotation=Ve,ot=(Ve-360*_/2)/(360-360*_)*(r-e)),ot!=xe&&(xe=ot,K=ot+e,J&&ue(),se.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&se.stage&&se.stage.update()),Je()}var Ee,_e;c&&(Ee=e,_e=new t.Damp(Ee,c),se.ticker=t.Ticker.add(function(){Ee=_e.convert(K)})),Object.defineProperty(this,"currentValue",{get:function(){return c?Ee:K},set:function(Ve){n(Ve)||(re?(ze=!1,!n(G)&&!n(L)?G<L?(Ve<G&&(Ve=G,ze=!0),Ve>L&&(Ve=L,ze=!0)):(Ve>G&&(Ve=G,ze=!0),Ve<L&&(Ve=L,ze=!0)):n(G)?n(L)||Ve>L&&(Ve=L,ze=!0):Ve<G&&(Ve=G,ze=!0),Ye&&(st=!0,Te=Math.floor(Ve/(r-e))*360)):e<r?(Ve<e&&(Ve=V?e:r),Ve>r&&(Ve=V?r:e)):(Ve>e&&(Ve=V?e:r),Ve<r&&(Ve=V?r:e)),K=Ve,Ve=Xe(Ve),c&&c.immediate(K),Le.rotation=_*360/2+(Ve-e)*(360-_*360)/(r-e),Le.rotation=(Le.rotation+360*1e4)%360,xe=Ve-e,He=Le.rotation,J&&ue(),Je(),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&se.stage&&se.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return c?Ee:K},set:function(Ve){Ve!=se.currentValue&&(se.currentValue=Ve,se.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return e},set:function(Ve){re?e=Ve:ht&&je("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(Ve){re?r=Ve:ht&&je("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return re},set:function(){ht&&je("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return G},set:function(Ve){G=Ve,se.currentValue<G&&(se.currentValue=G)}}),Object.defineProperty(this,"continuousMax",{get:function(){return L},set:function(Ve){L=Ve,se.currentValue>L&&(se.currentValue=L)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){ht&&je("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return $},set:function(Ve){$=Ve}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return Q},set:function(Ve){Q=Ve}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==se},set:function(){t.KEYFOCUS=se}}),b&&!t.KEYFOCUS&&Ge(),this.on("mousedown",function(){b&&Ge()});function Ge(){se.keyFocus=!0;var Ve=document.activeElement;Ve&&Ve.blur()}var Ue=!1,tt=!1,Ae=!1,Ze=!1;this.keyDownEvent=function(Ve){se.stage&&(se.zimAccessibility&&se.focus||!se.zimAccessibility&&se.keyFocus)&&(Ve.keyCode==37&&$?Ue=!0:Ve.keyCode==40&&Q?tt=!0:Ve.keyCode==39&&$?Ae=!0:Ve.keyCode==38&&Q&&(Ze=!0),se.keyInterval==null&&(Ue||tt||Ae||Ze)&&(lt(),se.keyTimeout=setTimeout(function(){se.keyInterval==null&&(Ue||tt||Ae||Ze)&&(se.keyInterval=setInterval(lt,40))},140)))};function lt(){(Ue||tt)&&(i>0?se.currentValueEvent-=i*pe(r-e):se.currentValueEvent-=Z*pe(r-e)),(Ae||Ze)&&(i>0?se.currentValueEvent+=i*pe(r-e):se.currentValueEvent+=Z*pe(r-e))}j.addEventListener("keydown",this.keyDownEvent),se.keyUpEvent=function(Ve){Ve.keyCode==37?Ue=!1:Ve.keyCode==40?tt=!1:Ve.keyCode==39?Ae=!1:Ve.keyCode==38&&(Ze=!1),se.keyInterval!=null&&!Ue&&!tt&&!Ae&&!Ze&&(clearInterval(se.keyInterval),se.keyInterval=null)},j.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(se,"enabled",{get:function(){return se._enabled},set:function(Ve){Ve?(j.addEventListener("keydown",se.keyDownEvent),j.addEventListener("keyup",se.keyUpEvent)):(j.removeEventListener("keydown",se.keyDownEvent),j.removeEventListener("keyup",se.keyUpEvent)),se._enabled=Ve}}),n(d)&&(d=N.currentValue!=null?N.currentValue:e),se.currentValue=d,X!==!1&&t.styleTransforms(this,N),this.clone=function(Ve){return se.cloneProps(new t.Dial(Ve||!t.isPick(ie[0])?se.min:ie[0],Ve||!t.isPick(ie[1])?se.max:ie[1],Ve||!t.isPick(ie[2])?se.step:ie[2],l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,Ve||!t.isPick(ie[3])?se.currentValue:ie[3],o,S,X,this.group,O))},this.dispose=function(Ve,ft,ot){return j.removeEventListener("keydown",se.keyDownEvent),j.removeEventListener("keyup",se.keyUpEvent),ot||this.zimContainer_dispose(!0),!0}},t.extend(t.Dial,t.Container,["clone","dispose"],"zimContainer",!1),t.Tabs=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z){var ce="width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",Ie;if(Ie=at(t.Tabs,arguments,ce,this))return Ie;De("65");var K=ie===!1?{}:t.getStyle("Tabs",q,z);n(y)&&(y=K.vertical!=null?K.vertical:!1),n(e)&&(e=K.width!=null?K.width:null);var xe=!n(e);if(n(e)&&(e=y?60:240),n(r)&&(r=K.height!=null?K.height:y?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=q,(n(i)||i.length<=0)&&(i=K.tabs!=null?K.tabs:[1,2,3,4]),n(l)&&(l=K.backgroundColor!=null?K.backgroundColor:t.tin),n(a)&&(a=K.rollBackgroundColor!=null?K.rollBackgroundColor:t.grey),n(s)&&(s=K.downBackgroundColor!=null?K.downBackgroundColor:a),n(f)&&(f=K.selectedBackgroundColor!=null?K.selectedBackgroundColor:t.dark),n(u)&&(u=K.selectedRollBackgroundColor!=null?K.selectedRollBackgroundColor:a),n(v)&&(v=K.color!=null?K.color:t.white),n(C)&&(C=K.rollColor!=null?K.rollColor:v),n(h)&&(h=K.downColor!=null?K.downColor:C),n(g)&&(g=K.selectedColor!=null?K.selectedColor:v),n(k)&&(k=K.selectedRollColor!=null?K.selectedRollColor:C),n(F)&&(F=K.backing!=null?K.backing.clone():null),n(D)&&(D=K.rollBacking!=null?K.rollBacking.clone():null),n(G)&&(G=K.align!=null?K.align:"center"),n(L)&&(L=K.valign!=null?K.valign:"center"),n(c)&&(c=K.labelAlign!=null?K.labelAlign:G),n(d)&&(d=K.labelValign!=null?K.labelValign:L),n(m)&&(m=K.indent!=null?K.indent:10),n(o)&&(o=K.labelIndent!=null?K.labelIndent:m),n(S)&&(S=K.labelIndentH!=null?K.labelIndentH:o),n(X)&&(X=K.labelIndentV!=null?K.labelIndentV:o),n(I)&&(I=K.currentEnabled!=null?K.currentEnabled:!1),n(w)&&(w=K.currentSelected!=null?K.currentSelected:!0),w||(I=!0),n(x)&&(x=K.spacing!=null?K.spacing:1),n(E)&&(E=K.corner!=null?K.corner:0),n(T)&&(T=K.gradient!=null?K.gradient:null),n(B)&&(B=K.gloss!=null?K.gloss:null),n(A)&&(A=K.base!=null?K.base:E==0&&!Array.isArray(E)?"none":y?"left":"bottom"),n(p)&&(p=K.keyEnabled!=null?K.keyEnabled:!0),n(O)&&(O=K.useTap!=null?K.useTap:!1),n(de)&&(de=K.excludeCustomTap!=null?K.excludeCustomTap:!1),n(re)&&(re=K.backdropColor!=null?K.backdropColor:null),n(N)&&(N=K.styleLabels!=null?K.styleLabels:!1),n(se)&&(se=K.keyWrap!=null?K.keyWrap:!0),A!="none"&&E!=0&&!Array.isArray(E))switch(A){case"bottom":E=[E,E,0,0];break;case"left":E=[0,E,E,0];break;case"top":E=[0,0,E,E];break;case"right":E=[E,0,0,E];break}else Array.isArray(E)||(E=[E,E,E,E]);var J=this;this.keyEnabled=p;var fe=0,U=[],ue=[],ke,ne,ve=i.length,we=(e-x*(ve-1))/ve,ee=(r-x*(ve-1)-2)/ve;if(!n(re)){var le=this.backdrop=new t.Rectangle(e,r,re,null,null,null,null,null,null,!1);this.addChild(le)}var ye=!1,oe;function Me(me){for(var Te=0;Te<me.length;Te++){var ze=me[Te];if(ze.constructor==={}.constructor){oe&&oe!="TabObject"&&(ye=!0),oe="TabObject",ze.type="TabObject";continue}typeof ze=="string"||typeof ze=="number"||ze.type=="Label"?(me[Te]={type:"TabObject",label:String(ze!=null)||ze.type=="Label"?ze:"1"},oe&&oe!="TabObject"&&(ye=!0),oe="TabObject"):(oe&&oe=="TabObject"&&(ye=!0),oe="Other")}}Me(i);for(var ae=0,Se,Le=0,Ce=0;Ce<i.length;Ce++)ne=i[Ce],y?xe&&(ne.width=ne.width?ne.width:e):(n(ne.width)&&Le++,ae+=n(ne.width)?we:ne.width);if(!y){if(ae>e-x*(ve-1))for(Ce=0;Ce<i.length;Ce++)ne=i[Ce],ne.width=(e-x*(ve-1))/ae*(n(ne.width)?we:ne.width);else if(Math.round(ae)<Math.round(e-x*(ve-1))&&Le>0)for(Se=(ve*we-(ae-Le*we))/Le,Ce=0;Ce<i.length;Ce++)ne=i[Ce],ne.width=n(ne.width)?Se:ne.width}function te(me,Te){for(Ce=0;Ce<me.length;Ce++)ne=me[Ce],ne!=""&&ne.type=="TabObject"&&(n(ne.label)&&(ne.label=" "),(typeof ne.label=="string"||typeof ne.label=="number")&&(ne.label=new t.Label({text:ne.label,size:K.size!=null?K.size:y?ee/2:r/2,font:K.font!=null?K.font:null,style:N,valign:d,inherit:Te})))}te(i,N?K:null);var Oe=0;for(Ce=0;Ce<i.length;Ce++)ne=i[Ce],!ne.width&&y&&ne.label.width>Oe&&(Oe=ne.label.width);var Re=0;function Xe(me,Te){var ze=[],st=[];for(Ce=0;Ce<me.length;Ce++){if(ne=me[Ce],ne.type=="TabObject"){var Ye={color:n(ne.color)?t.Pick.choose(v):ne.color,rollColor:n(ne.rollColor)?t.Pick.choose(C):ne.rollColor,downColor:n(ne.downColor)?t.Pick.choose(h):ne.downColor,selectedColor:n(ne.selectedColor)?t.Pick.choose(g):ne.selectedColor,selectedRollColor:n(ne.selectedRollColor)?t.Pick.choose(k):ne.selectedRollColor,backgroundColor:n(ne.backgroundColor)?t.Pick.choose(l):ne.backgroundColor,rollBackgroundColor:n(ne.rollBackgroundColor)?t.Pick.choose(a):ne.rollBackgroundColor,downBackgroundColor:n(ne.downBackgroundColor)?t.Pick.choose(s):ne.downBackgroundColor,selectedBackgroundColor:n(ne.selectedBackgroundColor)?t.Pick.choose(f):ne.selectedBackgroundColor,selectedRollBackgroundColor:n(ne.selectedRollBackgroundColor)?t.Pick.choose(u):ne.selectedRollBackgroundColor,wait:n(ne.wait)?t.Pick.choose(P):ne.wait};if(Te)for(var nt in Te)n(Te[nt])||(Ye[nt]=Te[nt]);ke=new t.Button({width:y?n(ne.width)?xe?e:Oe+ee/2+E[0]/2:ne.width:n(ne.width)?we:ne.width,height:y?ee:r,label:ne.label,borderColor:K.borderColor!=null?K.borderColor:null,borderWidth:K.borderWidth!=null?K.borderWidth:null,backgroundColor:Ye.backgroundColor,rollBackgroundColor:Ye.rollBackgroundColor,downBackgroundColor:Ye.downBackgroundColor,downColor:Ye.downColor,corner:E,shadowColor:-1,gradient:T,gloss:B,backing:F?F.clone():null,rollBacking:D?D.clone():null,wait:Ye.wait,waitTime:n(ne.waitTime)?Y:ne.waitTime,waitBackgroundColor:n(ne.waitBackgroundColor)?_:ne.waitBackgroundColor,rollWaitBackgroundColor:n(ne.rollWaitBackgroundColor)?V:ne.rollWaitBackgroundColor,waitColor:n(ne.waitColor)?b:ne.waitColor,rollWaitColor:n(ne.rollWaitBackgroundColor)?Z:ne.rollWaitColor,waitModal:n(ne.waitModal)?$:ne.waitModal,waitEnabled:n(ne.waitEnabled)?Q:ne.waitEnabled,align:c,valign:d,indentH:S,indentV:X,inherit:t.copy(K)}),ke.tabInfo=Ye,ke.color=ke.tabInfo.color,ke.rollColor=ke.tabInfo.rollColor,ke.type="TabsButton",ke.content=ne,ke.listIndentReady=!0}else{if(ne.listIndentReady)ke=ne;else{ke=new t.Container,ke.type=ne.type,ke.content=ne;for(var pe=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],Je=0;Je<pe.length;Je++)ne[pe[Je]]&&(ke[pe[Je]]=ne[pe[Je]])}ne.checkBox&&(ke.checkBox=ne.checkBox),n(ke.tabInfo)&&(ke.tabInfo={}),de&&(ke.excludeTap=!0),ke.tabInfo.color=n(ne.color)?v:ne.color,ke.tabInfo.backgroundColor=n(ne.backgroundColor)?l:ne.backgroundColor,ne.listIndentReady||(new t.Rectangle(Math.max(ne.width,y?xe?e:Oe+ee/2+E[0]/2:ne.width),Math.max(ne.height,y?ee:r),t.clear).addTo(ke).expand(0).cur(),ne.center(ke).cur(),G=="center"||G=="middle"||ne.pos(0,null,G=="right"),L=="center"||L=="middle"||ne.pos(null,0,null,L=="bottom"),ke.listIndentReady=!0)}ke.width>Re&&(Re=ke.width),O?ke.tap(function(be){Be(be.currentTarget.znum),J.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}):ke.zimTabEvent=ke.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(be){Be(be.currentTarget.znum),J.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}),ke.on("mousedown",function(be){J.buttonDown=be.currentTarget}),ke.on("pressup",function(be){J.buttonDown=null;var Ee=be.currentTarget.znum;O||t.ACTIONEVENT=="click"?setTimeout(function(){Ke(Ee)},50):Ke(Ee)}),st.push(ne.label),ze.push(ke),ke.index=Ce}return[ze,st]}var Qe=Xe(i);ue=Qe[0],U=Qe[1];function it(){var me=0,Te=0,ze;for(Ce=0;Ce<ue.length;Ce++)ze=ue[Ce],ze.znum=Ce,ze.selectedIndex=Ce,ze.selectedIndex==fe&&w&&(ze.backgroundColor=f,ze.rollBackgroundColor=u,ze.color=g),U[Ce]&&(U[Ce].znum=Ce),J.addChild(ze),(!y||xe)&&(ze.x=(e-ze.width)/2,ze.y=(r-ze.height)/2),y?(ze.y=Te,Te=ze.y+ze.height+x,G=="left"?ze.x=(ze.type=="TabsButton"||ze.type=="ListItem"?0:m)+(ze.regX-(ze.getBounds()?ze.getBounds().x:0))*ze.scaleX:G=="right"&&(ze.x=(xe?e:Re)-ze.width-(ze.type=="TabsButton"||ze.type=="ListItem"?0:m))):(ze.x=me,me=ze.x+ze.width+x,L=="top"?ze.y=(ze.type=="TabsButton"&&!ye?0:m)+(ze.regY-(ze.getBounds()?ze.getBounds().y:0))*ze.scaleY:L=="bottom"&&(ze.y=r-ze.height-(ze.type=="TabsButton"&&!ye?0:m))),Ce==fe&&!I?ze.enabled=!1:ze.enabled=!0;n(re)||J.removeChild(le),J._bounds=null;var st=J.getBounds(),Ye=0,nt=0;if(!st&&Fe.EaselJS.version[0]!=0?J.setBounds():st&&(Ye=y&&st.width!=0&&xe?e:st.width,nt=y&&st.height!=0?st.height:r,J.setBounds(Ye,nt)),n(re)||(le.widthOnly=Ye,le.heightOnly=nt,J.addChildAt(le,0)),y&&!xe)for(Ce=0;Ce<=ue.length;Ce++)(G=="center"||G=="middle")&&(ze.x=(Ye-ze.width)/2)}it();function Be(me,Te){if(me!=fe){var ze=ue[fe];if(ze&&w&&(ze.tabInfo&&n(ze.tabInfo.wait)&&(ze.tabInfo.backgroundColor&&(ze.backgroundColor=ze.tabInfo.backgroundColor),ze.tabInfo.rollBackgroundColor&&(ze.rollBackgroundColor=ze.tabInfo.rollBackgroundColor),ze.tabInfo.color&&ze.label&&(ze.color=ze.tabInfo.color),ze.tabInfo.rollColor&&ze.label&&(ze.rollColor=ze.tabInfo.rollColor)),I||(ze.enabled=!0)),fe=me,ze=ue[fe],ze){var st=ze.tabInfo;st&&n(ze.tabInfo.wait)&&w&&(st.selectedBackgroundColor&&(ze.backgroundColor=!n(st.downBackgroundColor)&&!Te?st.downBackgroundColor:st.selectedBackgroundColor),st.selectedRollBackgroundColor&&(ze.rollBackgroundColor=st.selectedRollBackgroundColor),st.selectedColor&&ze.label&&(ze.color=!n(st.downColor)&&!Te?st.downColor:st.selectedColor),st.selectedRollColor&&ze.label&&(ze.rollColor=st.selectedRollColor)),Te&&!I&&(ze.enabled=!1)}}}function Ke(me){var Te=ue[me];if(Te&&w){var ze=Te.tabInfo;ze&&n(ze.wait)&&(ze.selectedBackgroundColor&&(Te.backgroundColor=J.selected==Te?ze.selectedBackgroundColor:ze.backgroundColor),ze.selectedColor&&Te.label&&(Te.color=J.selected==Te?ze.selectedColor:ze.color)),I||(Te.enabled=!1)}}this.addAt=function(me,Te,ze){n(Te)&&(Te=ue.length),Te=t.constrain(Te,0,ue.length),Array.isArray(me)||(me=[me]),Me(me),te(me,ze);var st=Xe(me,ze),Ye=st[0],nt=st[1];Te<=fe&&(fe+=Ye.length);var pe=[Te,0].concat(Ye);return Array.prototype.splice.apply(ue,pe),pe=[Te,0].concat(nt),Array.prototype.splice.apply(U,pe),it(),J},this.removeAt=function(me,Te){if(ue.length==0)return J;for(n(me)&&(me=1),n(Te)&&(Te=ue.length-me),Te=t.constrain(Te,0,ue.length-me),fe>=Te&&fe<=Te+me&&(fe=-1),fe>Te+me&&(fe-=me),Ce=Te;Ce<Te+me;Ce++)ue[Ce].tabInfo&&(ue[Ce].tabInfo.backgroundColor&&(ue[Ce].backgroundColor=ue[Ce].tabInfo.backgroundColor),ue[Ce].tabInfo.color&&ue[Ce].label&&(ue[Ce].color=ue[Ce].tabInfo.color)),O?ue[Ce].noTap():ue[Ce].off((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",ue[Ce].zimTabEvent),ue[Ce].removeFrom();return ue.splice(Te,me),U.splice(Te,me),it(),J},J.keyEvent=function(me){if(!(!J.keyEnabled||!J.keyFocus||J.zimAccessibility)&&me.keyCode==9){var Te=fe;me.shiftKey?Be(--Te<0?se?i.length-1:0:Te):Be(++Te>i.length-1?se?0:i.length-1:Te),J.dispatchEvent("change"),J.dispatchEvent("keychange"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update(),me.preventDefault()}},j.addEventListener("keydown",J.keyEvent),Object.defineProperty(this,"selected",{get:function(){return ue[fe]},set:function(){ht&&je("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return fe},set:function(me){Be(me,!0),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return fe},set:function(me){Be(Math.min(Math.max(me,0),i.length-1)),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.color:v},set:function(me){if(v=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.color=me),(Te!=fe||!w)&&(J.buttons[Te].color=v);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.rollColor:C},set:function(me){if(C=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.rollColor=me),J.buttons[Te].rollColor=C,Te!=fe&&J.buttons[Te].rolled&&(J.buttons[Te].color=C);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedColor:g},set:function(me){if(g=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.selectedColor=me),Te==fe&&w&&(J.buttons[Te].color=g);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedRollColor:k},set:function(me){if(k=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.selectedRollColor=me),Te==fe&&w&&J.buttons[Te].rolled&&(J.buttons[Te].color=k);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.backgroundColor:l},set:function(me){if(l=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.backgroundColor=me),(Te!=fe||!w)&&(J.buttons[Te].backgroundColor=l);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.rollBackgroundColor:a},set:function(me){if(a=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.rollBackgroundColor=me),J.buttons[Te].rollBackgroundColor=a,Te!=fe&&J.buttons[Te].rolled&&(J.buttons[Te].backgroundColor=a);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedBackgroundColor:f},set:function(me){if(f=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.selectedBackgroundColor=me),Te==fe&&w&&(J.buttons[Te].backgroundColor=f);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return J.buttons[0].tabItems?J.buttons[0].tabItems.selectedRollBackgroundColor:u},set:function(me){if(u=me,J.buttons[0].tabInfo){for(var Te=0;Te<J.buttons.length;Te++)J.buttons[Te].tabInfo&&(J.buttons[Te].tabInfo.selectedRollBackgroundColor=me),Te==fe&&w&&J.buttons[Te].rolled&&(J.buttons[Te].backgroundColor=u);!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&J.stage&&J.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return U[fe]},set:function(){ht&&je("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return U[fe]!=null?U[fe].text:void 0},set:function(){ht&&je("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return ue},set:function(){ht&&je("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return U},set:function(){ht&&je("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(J,"enabled",{get:function(){return J._enabled},set:function(me){Ot(J,me)}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==J},set:function(){t.KEYFOCUS=J}}),p&&t.KEYFOCUS&&He(),this.on("mousedown",function(){p&&He()});function He(){J.keyFocus=!0;var me=document.activeElement;me&&me.blur()}var he=J.getBounds();n(he)||he.width==0?J.setBounds(0,0,e,r):J.width=e,n(R)&&(R=K.selectedIndex!=null?K.selectedIndex:0),J.selectedIndex=R,ie!==!1&&t.styleTransforms(this,K),this.clone=function(){for(var me=t.copy(i,!0),Te=0;Te<me.length;Te++)me[Te].label=me[Te].label.clone();return J.cloneProps(new t.Tabs(e,r,me,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,this.group,z))},this.doDispose=function(me,Te,ze){J.keyEvent&&j.removeEventListener("keydown",J.keyEvent),t.loop(J.buttons,function(st){st.dispose()}),J.keyEvent=null,ze||this.zimContainer_dispose(!0),w=ne=i=U=ke=ue=Qe=null}},t.extend(t.Tabs,t.Container,["clone","dispose"],"zimContainer",!1),t.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},t.Pad=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L){var c="width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",d;if(d=at(t.Pad,arguments,c,this))return d;De("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=G;var o=re===!1?{}:t.getStyle(this.type,this.group,L);n(e)&&(e=o.width!=null?o.width:150),n(r)&&(r=o.cols!=null?o.cols:3),n(i)&&(i=o.rows!=null?o.rows:r);var S;if(n(l))if(o.keys!=null)l=o.keys;else for(l=[],S=1;S<=i*r;S++)l.push(S);n(I)&&(I=o.currentEnabled!=null?o.currentEnabled:!0),n(x)&&(x=o.spacing!=null?o.spacing:1);var X=this,m;this.cols=r,this.rows=i;var O=e/r-x,de=[],R=0,N;for(this.labels=[],this.buttons=[],S=0;S<i;S++){for(var se=[],ie=0;ie<r;ie++)se.push(l[R]!=null?l[R]:""),R++;var q=o.corner!=null?o.corner:E;q&&!Array.isArray(q)&&(q=[q,q,q,q]),N=de[S]=new t.Tabs({width:e,height:O,tabs:se,backgroundColor:o.backgroundColor!=null?o.backgroundColor:a,rollBackgroundColor:o.rollBackgroundColor!=null?o.rollBackgroundColor:s,downBackgroundColor:o.downBackgroundColor!=null?o.downBackgroundColor:f,selectedBackgroundColor:o.selectedBackgroundColor!=null?o.selectedBackgroundColor:u,color:o.color!=null?o.color:C,rollColor:o.rollColor!=null?o.rollColor:h,downColor:o.downColor!=null?o.downColor:g,selectedColor:o.selectedColor!=null?o.selectedColor:k,spacing:o.spacing!=null?o.spacing:x,currentEnabled:o.currentEnabled!=null?o.currentEnabled:I,currentSelected:o.currentSelected!=null?o.currentSelected:w,corner:q,backing:o.backing!=null?o.backing.clone():B,rollBacking:o.rollBacking!=null?o.rollBacking.clone():F,base:null,keyEnabled:!1,gradient:o.gradient!=null?o.gradient:p,gloss:o.gloss!=null?o.gloss:T,wait:o.wait!=null?o.wait:D,waitTime:o.waitTime!=null?o.waitTime:P,waitBackgroundColor:o.waitBackgroundColor!=null?o.waitBackgroundColor:Y,rollWaitBackgroundColor:o.rollWaitBackgroundColor!=null?o.rollWaitBackgroundColor:_,waitColor:o.waitColor!=null?o.waitColor:V,rollWaitColor:o.rollWaitColor!=null?o.rollWaitColor:b,waitModal:o.waitModal!=null?o.waitModal:Z,waitEnabled:o.waitEnabled!=null?o.waitEnabled:$,group:G,style:!1}),this.labels=this.labels.concat(N.labels),this.buttons=this.buttons.concat(N.buttons),this.addChild(N),N.selectedIndex=-1,N.y=(O+x)*S,N.znum=S,N.on("change",z)}this.tabs=de;function z(ce){var Ie=ce.target;X.selected=Ie.selected,X.text=Ie.text,X.label=Ie.label;for(var K=Ie.selectedIndex,xe=0;xe<de.length;xe++)Ie!=de[xe]&&(de[xe].selectedIndex=-1);m=Ie.znum*r+K,X.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&X.stage&&X.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return m},set:function(ce){m=ce;for(var Ie=0;Ie<de.length;Ie++)de[Ie].selectedIndex=-1;var K=Math.floor(m/r);K>=0&&K<X.tabs.length&&(X.tabs[K].selectedIndex=m%r)}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(ce){Ot(X,ce)}}),n(Q)&&(Q=o.selectedIndex!=null?o.selectedIndex:0),X.selectedIndex=Q,re!==!1&&t.styleTransforms(this,o),this.clone=function(){return X.cloneProps(new t.Pad(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,this.group,L))},this.dispose=function(ce,Ie,K){t.loop(de,function(xe){xe.dispose()}),this.labels=this.buttons=this.tabs=null,N=de=X.rowTabs=null,K||this.zimContainer_dispose(!0)}},t.extend(t.Pad,t.Container,["clone","dispose"],"zimContainer",!1),t.NumPad=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F){var D="advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",P;if(P=at(t.NumPad,arguments,D,this))return P;De("57.7"),this.group=B;var Y=T===!1?{}:t.getStyle("NumPad",this.group,F);n(e)&&(e=Y.advanced!=null?Y.advanced:!1);var _=400,V=e?620:530;n(r)&&(r=Y.titleBar!=null?Y.titleBar:"NUMPAD"),n(i)&&(i=Y.titleBarColor!=null?Y.titleBarColor:t.white),n(l)&&(l=Y.titleBarBackgroundColor!=null?Y.titleBarBackgroundColor:t.grey),n(a)&&(a=Y.titleBarHeight!=null?Y.titleBarHeight:40),n(s)&&(s=Y.backgroundColor!=null?Y.backgroundColor:t.darker),n(f)&&(f=Y.borderColor!=null?Y.borderColor:t.pewter),n(u)&&(u=Y.borderWidth!=null?Y.borderWidth:null),f<0||u<0?f=u=null:f!=null&&u==null&&(u=1),n(v)&&(v=Y.corner!=null?Y.corner:15),n(C)&&(C=Y.numberCorner!=null?Y.numberCorner:30),n(I)&&(I=Y.align!=null?Y.align:"left"),n(w)&&(w=Y.shadowColor!=null?Y.shadowColor:"rgba(0,0,0,.3)"),n(E)&&(E=Y.shadowBlur!=null?Y.shadowBlur:14),n(A)&&(A=Y.draggable!=null?Y.draggable:!0),n(p)&&(p=Y.boundary!=null?Y.boundary:null),n(h)&&(h=Y.close!=null?Y.close:!0),n(g)&&(g=Y.closeColor!=null?Y.closeColor:n(i)?t.grey:i),Array.isArray(v)||(v=[v,v,v,v]),n(k)&&(k=Y.collapse!=null?Y.collapse:!0),n(y)&&(y=Y.collapseColor!=null?Y.collapseColor:n(i)?t.grey:i),n(x)&&(x=Y.collapsed!=null?Y.collapsed:!1),this.zimPanel_constructor(_,V,null,r,i,l,a,s,f,u,v,h,g,null,null,null,k,y,x,I,w,E,A,p,T,B,F),this.type="NumPad";var b=this;function Z(Q,re){return n(re)&&(re=mist),{label:Q,backgroundColor:re,rollBackgroundColor:white,color:darker,rollColor:darker}}var $=[Z("C",t.red.darken(.1)),Z(new t.Label({text:"\u2423",size:90,shiftV:-24}),t.yellow.darken(.1)),Z(new t.Label({text:"/",size:48,bold:!0,shiftV:3})),Z(new t.Label({text:"*",size:65,shiftV:18})),1,2,3,Z(new t.Label({text:"-",size:60,shiftV:-3})),4,5,6,Z(new t.Label({text:"+",size:55,shiftV:3})),7,8,9,Z(new t.Label({text:"\u232B",size:M=="ios"?60:35}),t.red.darken(.1)),Z(new t.Label({text:",",size:70,shiftV:-3})),Z(new zr({text:".",size:70,shiftV:-3})),0,Z(new t.Label({text:"\u23CE",size:M=="ios"?40:50,shiftV:5}),t.green.darken(.1))];e&&($.splice(2,0,Z("%",yellow.darken(.1))),$.splice(4,0,Z(new t.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),$.splice(4,0,Z(")",yellow.darken(.1))),$.splice(4,0,Z("(",yellow.darken(.1)))),b.pad=new t.Pad({width:380,cols:4,rows:e?6:5,keys:$,spacing:6,currentSelected:!1,backgroundColor:t.grey,rollBackgroundColor:t.tin,selectedBackgroundColor:t.grey,downBackgroundColor:t.green,corner:C}),b.pad.on("mousedown",function(){b.pad.text=="C"?b.key="clear":b.pad.text=="\u2423"?b.key="space":b.pad.text=="\u232B"?b.key="backspace":b.pad.text=="\u23CE"?b.key="enter":b.key=b.pad.text,b.dispatchEvent("pressed")}),b.add(b.pad,null,!0),T!==!1&&t.styleTransforms(this,Y),this.clone=function(){return b.cloneProps(new t.NumPad(e,r?r.clone():"",i,l,a,s,f,u,v,C,h,g,k,y,b.collapsed,I,w,E,A,p,T,this.group,F))}},t.extend(t.NumPad,t.Panel,["clone"],"zimPanel",!1),t.DPad=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w){var E="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",A;if(A=at(t.DPad,arguments,E,this))return A;De("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=I;var p=x===!1?{}:t.getStyle(this.type,this.group,w);n(e)&&(e=p.axis!=null?p.axis:"all"),n(r)&&(r=p.width!=null?p.width:100),n(i)&&(i=p.backgroundColor!=null?p.backgroundColor:t.granite),n(a)&&(a=p.borderColor!=null?p.borderColor:null),n(l)&&(l=p.borderWidth!=null?p.borderWidth:null),a<0||l<0?a=l=null:a!=null&&l==null&&(l=1),n(s)&&(s=p.indicatorColor!=null?p.indicatorColor:t.moon),n(f)&&(f=p.indicatorPressColor!=null?p.indicatorPressColor:t.lighter),n(u)&&(u=p.indicatorScale!=null?p.indicatorScale:1),n(v)&&(v=p.indicatorRadius!=null?p.indicatorRadius:null),n(C)&&(C=p.innerCircle!=null?p.innerCircle:!0),n(h)&&(h=p.innerScale!=null?p.innerScale:.5),n(g)&&(g=p.activeRadius!=null?p.activeRadius:r),n(k)&&(k=p.clamp!=null?p.clamp:!0),n(y)&&(y=p.logo!=null?p.logo:!1);var T=this;this.axis=e,this.outer=new t.Circle(r/2,i,a,l).addTo(this);var B=this.inner=new t.Circle(r*h/2,"rgba(0,0,0,.2)").center(this);y&&(this.logo=new t.Label({text:"D",bold:!0}).center(B).mov(1,2).alp(.3));var F=new t.Container().addTo(this),D=(r-l)*.2*u,P=8;e=="vertical"?P=2:e=="horizontal"?(P=2,F.rotation=90):e=="both"&&(P=4),t.loop(P,function(Q,re){new t.Triangle(D,D,D,s).addTo(F).reg(null,n(v)?(r-l)*.475:v).rot(Q*360/re)});var Y=0,_=0,V;T.dirX=0,T.dirY=0;var b,Z=!0;this.on("mousedown",function(Q){b=Q,F.loop(function(re){re.color=f}),Z?T.ticker=t.Ticker.add(function(){$()}):t.Ticker.add(T.ticker)}),this.on("pressmove",function(Q){b=Q}),this.on("pressup",function(){t.Ticker.remove(T.ticker),T.dirX=T.dirY=0,F.loop(function(Q){Q.color=s}),T.stage&&T.stage.update()});function $(){var Q=b;Y=Q.stageX/t.scaX,_=Q.stageY/t.scaY,V=T.globalToLocal(Y,_),Q=new Fe.Event("change"),Q.dirX=((V.x+g)/(g*2)-.5)*2,Q.dirY=((V.y+g)/(g*2)-.5)*2,k&&(Q.dirX=t.constrain(Q.dirX,-1,1),Q.dirY=t.constrain(Q.dirY,-1,1)),T.dirX=Q.dirX,T.dirY=Q.dirY,T.dispatchEvent(Q)}this._enabled=!0,Object.defineProperty(T,"enabled",{get:function(){return T._enabled},set:function(Q){Ot(T,Q)}}),t.styleTransforms(this,p),this.clone=function(){return T.cloneProps(new t.DPad(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,this.group,w))},this.dispose=function(Q,re,G){return this.ticker&&t.Ticker.remove(this.ticker),G||this.zimContainer_dispose(!0),!0}},t.extend(t.DPad,t.Container,["clone","dispose"],"zimContainer",!1),t.Radial=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o){var S="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",X;if(X=at(t.Radial,arguments,S,this))return X;De("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=d;var m=c===!1?{}:t.getStyle(this.type,this.group,o);n(e)&&(e=m.labels!=null?m.labels:["A","B","C","D","E"]),n(r)&&(r=m.size!=null?m.size:30),n(i)&&(i=m.font!=null?m.font:"verdana"),n(f)&&(f=m.startAngle!=null?m.startAngle:null),n(u)&&(u=m.totalAngle!=null?m.totalAngle:360),n(v)&&(v=m.angles!=null?m.angles:null),n(C)&&(C=m.flip!=null?m.flip:!0),n(h)&&(h=m.shiftRadial!=null?m.shiftRadial:0),n(g)&&(g=m.icons!=null?m.icons:null),n(k)&&(k=m.rollIcons!=null?m.rollIcons:null),n(y)&&(y=m.rotateIcons!=null?m.rotateIcons:!1),n(x)&&(x=m.iconsShiftRadial!=null?m.iconsShiftRadial:0),n(l)&&(l=m.height!=null?m.height:60),n(a)&&(a=m.coreRadius!=null?m.coreRadius:100),n(s)&&(s=m.coreColor!=null?m.coreColor:t.dark),n(p)&&(p=m.backdropColor!=null?m.backdropColor:t.clear),n(I)&&(I=m.backgroundColor!=null?m.backgroundColor:t.granite),n(w)&&(w=m.rollBackgroundColor!=null?m.rollBackgroundColor:t.tin),n(E)&&(E=m.selectedBackgroundColor!=null?m.selectedBackgroundColor:t.charcoal),n(A)&&(A=m.selectedRollBackgroundColor!=null?m.selectedRollBackgroundColor:E),n(T)&&(T=m.color!=null?m.color:t.white),n(B)&&(B=m.rollColor!=null?m.rollColor:T),n(F)&&(F=m.selectedColor!=null?m.selectedColor:T),n(D)&&(D=m.selectedRollColor!=null?m.selectedRollColor:B),n(P)&&(P=m.borderColor!=null?m.borderColor:t.dark),n(Y)&&(Y=m.borderWidth!=null?m.borderWidth:2),n(b)&&(b=m.gapAsAngle!=null?m.gapAsAngle:!1),n(V)&&(V=m.gap!=null?m.gap:b?3:6),n(_)&&(_=m.gradient!=null?m.gradient:null),_===!0&&(_=.1),n(Z)&&(Z=m.spacing!=null?m.spacing:6),n($)&&($=m.spacingInner!=null?m.spacingInner:Z),n(Q)&&(Q=m.spacingOuter!=null?m.spacingOuter:Z),n(re)&&(re=m.currentEnabled!=null?m.currentEnabled:!1),n(G)&&(G=m.currentSelected!=null?m.currentSelected:!0);var O=this,de=this.innerRadius=a+$,R=this.outerRadius=de+l;this.setBounds(-R,-R,R*2,R*2);var N=this.backdrop=new t.Circle(R+Q,p).center(this);if(a>0&&(this.core=new t.Circle(a,s).center(this)),v&&v.length<e.length-1)return ht&&je("Radial() - not enough angles provided"),this;if(e&&e.length>0||g&&g.length>0){var se;if(e&&e.length>0&&(se=e.length),g&&g.length>0&&(se>0?se=Math.min(g.length,se):se=g.length),k&&k.length<se)for(var ie=0;ie<se-k.length;ie++)k.push(new t.Circle(1,t.clear));var q=N.width,z=this.buttons=new t.Container(-q/2,-q/2,q,q).centerReg(this),ce=V;b||(V=V/R*180/Math.PI,ce=ce/de*180/Math.PI);for(var Ie=(u-V*se+(u==360?0:V))/se,K=f||0,xe=0;xe<se;xe++){v&&(Ie=v[xe]);var J=new t.Shape(-q/2,-q/2,q,q).centerReg(z);J.num=xe,J.zimSelected=!1,J.angle=Ie;var fe=J.graphics;J.backgroundColor=t.Pick.choose(I),J.rollBackgroundColor=t.Pick.choose(w),J.selectedBackgroundColor=t.Pick.choose(E),J.selectedRollBackgroundColor=t.Pick.choose(A),J.color=t.Pick.choose(T),J.rollColor=t.Pick.choose(B),J.selectedColor=t.Pick.choose(F),J.selectedRollColor=t.Pick.choose(D),J.colorCommand=fe.f(J.backgroundColor).command,(n(Y)||Y>0)&&(!n(P)||!n(Y))&&(n(P)&&(P=t.black),J.borderColorCommand=fe.s(P).command,J.borderWidthCommand=fe.ss(Y).command);var U=(K-90-Ie/2)*Math.PI/180,ue=(K-90+Ie/2)*Math.PI/180,ke=(K-90+(Ie+V-ce)/2)*Math.PI/180,ne=(K-90-(Ie+V-ce)/2)*Math.PI/180;if(fe.arc(0,0,R,U,ue,!1),fe.arc(0,0,de,ke,ne,!0).cp(),_&&(fe.s().ss().rf(["rgba(0,0,0,"+_+")","rgba(255,255,255,"+_+")"],[0,1],0,0,de,0,0,R),fe.arc(0,0,R,U,ue,!1),fe.arc(0,0,de,ke,ne,!0).cp()),J.cur("pointer"),J.zimOverEvent=J.on("mouseover",function(Me){var ae=Me.target;ae.colorCommand.style=ae==O.selected&&G?ae.selectedRollBackgroundColor:ae.rollBackgroundColor,ae.label&&(ae.label.color=ae==O.selected&&G?ae.selectedRollColor:ae.rollColor),k&&(ae.holder.removeAllChildren(),k[ae.num].loc(1,0,ae.holder)),O.stage&&O.stage.update()}),J.zimOutEvent=J.on("mouseout",function(Me){var ae=Me.target;ae.colorCommand.style=ae==O.selected&&G?ae.selectedBackgroundColor:ae.backgroundColor,ae.label&&(ae.label.color=ae==O.selected&&G?ae.selectedColor:ae.color),k&&(ae.holder.removeAllChildren(),g&&g[ae.num].loc(1,0,ae.holder)),O.stage&&O.stage.update()}),J.zimDownEvent=J.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Me){var ae=Me.target,Se=ae!==O.selected;O.lastSelected=O.selected,oe=ae.num,G?Se?(O.selected&&(O.selected.colorCommand.style=O.selected.backgroundColor,O.selected.label&&(O.selected.label.color=O.selected.color)),O.selected=ae,O.label=ae.label,O.label&&(O.text=O.label.text),O.icon=ae.icon,ae.colorCommand.style=ae.selectedRollBackgroundColor,ae.label&&(ae.label.color=ae.selectedRollColor)):re||(oe=-1,O.selected=null,O.label=null,O.text=null,O.icon=null,ae.colorCommand.style=ae.rollBackgroundColor,ae.label&&(ae.label.color=ae.rollColor)):(O.selected=ae,O.label=ae.label,O.label&&(O.text=O.label.text),O.icon=ae.icon),O.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&O.stage&&O.stage.update()}),g&&g.length>0){var ve=de+l/2+x,we=J.holder=new t.Container(3,ve).addTo(this).reg(1,ve).rot(K);we.mouseChildren=!1,we.mouseEnabled=!1,J.icon=g[xe],g[xe].loc(1,0,we),y||(g[xe].rotation=-K)}if(e&&e.length>0){var ee;if(e[xe].type!="LabelOnArc"){var le=e[xe].type=="Label"?e[xe]:new t.Label({text:e[xe],size:r,font:i,color:T,style:c,inherit:o});ee=new t.LabelOnArc({label:le,color:T,size:r,spacing:-5,flip:C&&K>90&&K<270,radius:de+(l-le.height)/2+2+h,style:c,inherit:o})}else ee=e[xe];e[xe]=ee,J.label=ee,ee.center(this).rot(K),ee.mouseChildren=!1,ee.mouseEnabled=!1}if(xe!=e.length-1){var ye=v?v[xe+1]:Ie;K+=(Ie+ye)/2+V}}n(f)||(O.rotation+=O.buttons.getChildAt(0).angle/2)}var oe=null;Object.defineProperty(this,"selectedIndex",{get:function(){return oe},set:function(Me){var ae;O.buttons&&(ae=O.buttons.getChildAt(Me)),ae!==O.selected&&(O.selected&&(O.selected.colorCommand.style=O.selected.backgroundColor,O.selected.label&&(O.selected.label.color=O.selected.color)),O.selected=ae,ae&&(G&&(ae.colorCommand.style=ae.selectedRollBackgroundColor),ae.label&&(G&&(ae.label.color=ae.selectedColor),O.text=ae.label.text))),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&O.stage&&O.stage.update()}}),n(L)&&(L=m.selectedIndex!=null?m.selectedIndex:0),O.selectedIndex=L,t.styleTransforms(this,m),this.clone=function(){return O.cloneProps(new t.Radial(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,this.group,o))}},t.extend(t.Radial,t.Container,"clone","zimContainer",!1),t.RadialMenu=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o){var S="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",X=S.split(", "),m=!1;if(e&&e.constructor==={}.constructor){for(var O in e)if(X.indexOf(O)>=0){m=!0;break}}if(e&&m){var de;if(de=at(t.RadialMenu,arguments,S,this))return de}De("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=d;var R=c===!1?{}:t.getStyle(this.type,this.group,o);n(e)&&(e=R.menu!=null?R.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),n(r)&&(r=R.size!=null?R.size:30),n(i)&&(i=R.font!=null?R.font:"verdana"),n(v)&&(v=R.startAngle!=null?R.startAngle:null),n(C)&&(C=R.totalAngle!=null?R.totalAngle:360),n(h)&&(h=R.flip!=null?R.flip:!0),n(k)&&(k=R.rotateIcons!=null?R.rotateIcons:!1),n(g)&&(g=R.shiftRadial!=null?R.shiftRadial:0),n(y)&&(y=R.iconsShiftRadial!=null?R.iconsShiftRadial:0),n(l)&&(l=R.height!=null?R.height:60),n(a)&&(a=R.coreRadius!=null?R.coreRadius:100),n(s)&&(s=R.coreColor!=null?R.coreColor:t.dark),n(f)&&(f=R.title!=null?R.title:"MENU"),n(u)&&(u=R.titleIcon!=null?R.titleIcon:null),n(A)&&(A=R.backdropColor!=null?R.backdropColor:t.clear),n(x)&&(x=R.backgroundColor!=null?R.backgroundColor:t.granite),n(I)&&(I=R.rollBackgroundColor!=null?R.rollBackgroundColor:t.tin),n(w)&&(w=R.selectedBackgroundColor!=null?R.selectedBackgroundColor:t.charcoal),n(E)&&(E=R.selectedRollBackgroundColor!=null?R.selectedRollBackgroundColor:w),n(p)&&(p=R.color!=null?R.color:t.white),n(T)&&(T=R.rollColor!=null?R.rollColor:p),n(B)&&(B=R.selectedColor!=null?R.selectedColor:p),n(F)&&(F=R.selectedRollColor!=null?R.selectedRollColor:T),n(D)&&(D=R.borderColor!=null?R.borderColor:t.dark),n(P)&&(P=R.borderWidth!=null?R.borderWidth:2),n(V)&&(V=R.gapAsAngle!=null?R.gapAsAngle:!1),n(_)&&(_=R.gap!=null?R.gap:V?3:6),n(b)&&(b=R.spacing!=null?R.spacing:6),n(Y)&&(Y=R.gradient!=null?R.gradient:null),Y===!0&&(Y=.1),n(Z)&&(Z=R.spacingInner!=null?R.spacingInner:b),n($)&&($=R.spacingOuter!=null?R.spacingOuter:b),n(Q)&&(Q=R.currentEnabled!=null?R.currentEnabled:!1),n(re)&&(re=R.currentSelected!=null?R.currentSelected:!0),n(G)&&(G=R.open!=null?R.open:!1),n(L)&&(L=R.under!=null?R.under:!0);var N=this,se=(kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",ie=null,q=this.core=new t.Circle({radius:a,color:s,style:c,inherit:o}).addTo(this);u&&(this.titleIcon=u.center(q)),f&&(this.title=new t.Label({text:f,size:r,font:i,color:p,style:c,inherit:o}).center(q)),q.cur("pointer"),q.on(se,function(){N.leafNode=!1,K.length==0?xe():(t.loop(K,function(fe){fe.selectedIndex=-1,fe.removeFrom(),K=[]}),N.outerLevel=0,N.selected=N.outerMenu=N.selectedMenu=N.text=null),(Q||N.selected!=ie)&&N.dispatchEvent("change"),ie=N.selected,N.stage&&N.stage.update()}),this.closeRings=function(fe){n(fe)&&(fe=N.outerLevel);var U=N.outerLevel-fe;t.loop(K,function(ue,ke){ke>U-1&&(ue.removeFrom(),ue.selectedIndex=-1,K.pop())},!0),N.outerLevel=U,N.outerMenu=K[K.length-1],N.outerMenu&&(N.outerMenu.selectedIndex=-1),N.selected=N.selectedMenu=N.text=null,K[K.length-2]?(N.selectedMenu=K[K.length-2],N.selectedIndex=N.selectedMenu.selectedIndex):N.selectedIndex=-1,N.selected!=ie&&N.dispatchEvent("change"),ie=N.selected,N.stage&&N.stage.update()};var z={},ce,Ie;N.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},ce=N.tree=new t.Hierarchy(e),Ie=ce.getLinearIDs()),N.lastRadial=null;var K=this.radials=[];G&&xe();function xe(fe){var U,ue;fe?U=fe.ringLevel:(U=0,ue=a),t.loop(K,function(ve,we){we>U-1&&(ve.removeFrom(),ve.selectedIndex=-1,K.pop())},!0);var ke;if(fe&&(ke=fe.selected),ke){var ne=ke.id;ue=fe.outerRadius,J(ne,U+1,ue)}else fe||J("id0",U+1,ue);N.selected=ke,N.selected?(N.selectedMenu=K[N.selected.menu.ringLevel-1],N.selectedIndex=N.selected.num,N.selected.label?N.text=N.selected.label.text:N.text=null):Q&&fe?(N.selectedIndex=fe.selectedIndex,N.label=fe.label,N.text=fe.text,N.icon=fe.icon,N.selectedMenu=fe):(N.text=null,N.selectedIndex=-1,N.selectedMenu=null),N.stage&&N.stage.update()}function J(fe,U,ue){U&&(N.outerLevel=U);var ke;if(!z[fe]){var ne=ce.getData(fe),ve=ne.list;if(ve&&!t.isEmpty(ve)){var we={labels:ce.getLinearList(ve),coreRadius:ue,size:r,font:i,startAngle:v,totalAngle:C,flip:h,rotateIcons:k,shiftRadial:g,iconsShiftRadial:y,height:l,coreColor:t.clear,backdropColor:A,backgroundColor:x,rollBackgroundColor:I,selectedBackgroundColor:w,selectedRollBackgroundColor:E,color:p,rollColor:T,selectedColor:B,selectedRollColor:F,borderColor:D,borderWidth:P,gapAsAngle:V,gap:_,gradient:Y,spacingInner:Z,spacingOuter:$,currentSelected:re,currentEnabled:Q,style:c,inherit:o};ne.styles&&(we=t.merge(we,ne.styles)),ke=z[fe]=new t.Radial(we),Ie=ce.getLinearIDs(ve),ke.buttons.loop(function(ee,le){ee.menu=ke,ee.id=Ie[le]}),ke.ringLevel=N.outerLevel,ke.selectedIndex=-1,ke.on("change",function(ee){N.leafNode=!1,xe(ee.target),(Q||N.selected!=ie)&&N.dispatchEvent("change"),ie=N.selected})}}z[fe]?(K.push(z[fe]),z[fe].center(N),L&&z[fe].bot()):(N.leafNode=!0,N.outerLevel-=1),N.outerMenu=ke}t.styleTransforms(this,R),this.clone=function(){return N.cloneProps(new t.RadialMenu(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,this.group,o))}},t.extend(t.RadialMenu,t.Container,"clone","zimContainer",!1),t.ColorPicker=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b){var Z="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",$;if($=at(t.ColorPicker,arguments,Z,this))return $;De("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=V;var Q=_===!1?{}:t.getStyle(this.type,this.group,b),re;n(e)&&(e=Q.width!=null?Q.width:500),n(r)&&(r=Q.colors!=null?Q.colors:"spectrum"),r=="legacy"&&(re=!0),n(i)&&(i=Q.cols!=null?Q.cols:10),n(l)&&(l=Q.spacing!=null?Q.spacing:2);var G=!re&&r.length>0&&r.length<=i;r=="spectrum"&&(i=10,l=2,G=!1),n(s)&&(s=Q.alphaPicker!=null?Q.alphaPicker:!G),n(P)&&(P=Q.tolerancePicker!=null?Q.tolerancePicker:!1),P&&(s=!1),n(a)&&(a=Q.greyPicker!=null?Q.greyPicker:!G),n(v)&&(v=Q.shadowColor!=null?Q.shadowColor:"rgba(0,0,0,.3)"),n(C)&&(C=Q.shadowBlur!=null?Q.shadowBlur:14),n(h)&&(h=Q.buttonBar!=null?Q.buttonBar:!G),n(u)&&(h||r=="spectrum"?u=Q.draggable!=null?Q.draggable:!0:u=Q.draggable!=null?Q.draggable:!1),n(g)&&(g=Q.circles!=null?Q.circles:!1),n(k)&&(k=Q.indicator!=null?Q.indicator:!1,h||(k=Q.indicator!=null?Q.indicator:!0)),n(y)&&(y=Q.backgroundColor!=null?Q.backgroundColor:t.black),n(f)&&(f=Q.startBackgroundColor!=null?Q.startBackgroundColor:null),n(x)&&(x=Q.keyArrows!=null?Q.keyArrows:!0),n(A)&&(A=Q.dropperTarget!=null?Q.dropperTarget:!1),n(p)&&(p=Q.spectrumCollapse!=null?Q.spectrumCollapse:!0),n(T)&&(T=Q.spectrumMode!=null?Q.spectrumMode:!0),n(B)&&(B=Q.spectrumClose!=null?Q.spectrumClose:!0),n(F)&&(F=Q.spectrumOk!=null?Q.spectrumOk:!0),n(D)&&(D=Q.spectrumTitle!=null?Q.spectrumTitle:null),n(Y)&&(Y=Q.collapsed!=null?Q.collapsed:!1);var L=this;if(n(I))if(j.zdf)I=j.zdf.stage;else return;else if(I.getBounds){if(n(I.getStage))return}else return;L.container=I;var c="#e472c4",d="#50c4b7",o=1,S=1,X=new t.Shape;this.addChild(X),X.x+=l,X.y+=l,re=!1;var m,O,de=[],R,N,se,ie,q,z=r=="spectrum";if(n(r)||r=="legacy"||r=="spectrum"){re=!0;var ce=6,Ie=ce*ce*ce;ce=Math.ceil(Math.pow(Ie,1/2)),O=(e-l)/18-l,q=Math.floor(Math.pow(ce*ce,1/3)),m=[];for(var K=0;K<6;K++)for(var xe=0;xe<6;xe++)for(var J=0;J<6;J++)m.push("#"+ve(K*3)+ve(xe*3)+ve(J*3));for(r=[],K=0;K<m.length;K++)R=Math.floor(K/6),N=K%6,R>=6*3?q=1:q=0,se=R-q*6*3,ie=N+q*6,r[ie*18+se]=m[K];i=18,de=[d,c]}else O=(e-l)/i-l;var fe=Math.ceil(r.length/i),U=1,ue=String(r[r.length-1]);if(!n(f)){var ke=f.match(/rgba\((.*)\)/);ke&&(R=ke[1].split(","),U=R.pop(),f="rgb("+R.join(",")+")"),ue=String(f)}var ne;re&&(ne=d);function ve(xt){return xt=Math.floor(xt).toString(16),xt+""+xt}q=0;var we=X.graphics,ee,le,ye=Q.borderColor!=null?Q.borderColor:null,oe=Q.borderWidth!=null?Q.borderWidth:null;!n(ye)&&n(oe)&&(oe=1),oe&&n(ye)&&(ye=t.dark),oe&&we.s(ye).ss(oe);var Me=r.length;for(z&&(Me=56),K=0;K<Me;K++)R=K%i,N=Math.floor(K/i),ee=R*(O+l),le=N*(O+l),g?we.f(r[K]).dc(ee+O/2,le+O/2,O/2):we.f(r[K]).r(ee,le,O,O);var ae=le+O+l;L.colors=r;var Se=ae;if(a){for(K=0;K<16;K++)de.push("#"+ve(K)+ve(K)+ve(K));for(K=0;K<de.length;K++)R=Math.floor(K/i),N=K%i,ee=N*(O+l),le=R*(O+l)+ae,g?we.f(de[K]).dc(ee+O/2,le+O/2,O/2):we.f(de[K]).r(ee,le,O,O);ae=le+O+l;var Le=i,Ce=Math.ceil(de.length/i)}L.greys=de,k&&!z&&(k=this.indicator=g?new t.Circle(O/2*.5,null,null,null,null,null,null,null,!1):new t.Rectangle(O*.5,O*.5,null,null,null,null,null,null,null,!1),k.alpha=.5,k.centerReg(),this.addChild(k),k.mouseEnabled=!1,te(r.indexOf(ue)));function te(xt){if(n(xt)||xt<0){k.visible=!1;return}else k.visible=!0;ue=="#000"||ue=="#000000"||ue=="black"?(k.color="#222",k.alpha=1):(k.color="black",k.alpha=.5),k.x=X.x+xt%i*(O+l)+O/2,k.y=X.x+Math.floor(xt/i)*(O+l)+O/2}var Oe=10,Re=ae;if(s||P){var Xe=new t.Container({style:!1});Xe.setBounds(0,0,600,70),this.addChild(Xe),Xe.x=0,Xe.y=ae;var Qe=this.alphaBacking=new t.Rectangle(600-Oe*2,50,t.licorice,null,null,0,null,null,null,!1);Xe.addChild(Qe),t.centerReg(Qe,Xe);var it=this.alphaBut=new t.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),Be=this.alphaSlider=new t.Slider({min:0,max:1,step:P?0:.05,button:it,barLength:P?500*.55:600*.55,barWidth:2,barColor:t.silver,vertical:!1,useTicks:!1,inside:!1,style:!1});Be.currentValue=n(U)?1:U,P&&(Be.currentValue=.1),Xe.addChild(Be),Be.x=40,Be.y=Xe.height/2;var Ke=this.alphaText=new t.Label({text:P?"Tolerance: 0.1":"Alpha: "+t.decimals(U),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});Xe.addChild(Ke),Ke.x=Be.x+Be.bar.width+40,Ke.y=Xe.height/2-Ke.height/2,Xe.scaleX=Xe.scaleY=e/600,Be.on("change",function(){Ke.text=P?"Tolerance: "+$t(Be.currentValue):"Alpha: "+$t(Be.currentValue),s&&Ye&&(Ye.alpha=S=Be.currentValue),L.dispatchEvent("change"),L.stage&&L.stage.update()}),ae+=Xe.height-Oe,P&&(L.toleranceBacking=L.alphaBacking,L.toleranceBut=L.alphaBut,L.toleranceSlider=L.alphaSlider,L.alphaBacking=L.alphaBut=L.alphaSlider=null)}if(h){var He=new t.Container({style:!1});He.setBounds(0,0,600,100),this.addChild(He),He.x=0,He.y=ae+Oe;var he=this.swatchText=new t.TextInput({align:"left",selectionAlpha:.5,text:ue.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(he.on("input",function(){(he.text.length==4||he.text.length==7)&&(Ye.color=he.text,ue=Ye.color,L.dispatchEvent("change"))}),He.addChild(he),t.centerReg(he),he.x=200/2-10,he.y=50-2,u){var me=this.grip=new t.Shape({style:!1});me.cur("pointer"),He.addChild(me),me.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),me.x=70,me.y=65,he.y=50-10,me.mouseEnabled=!1}var Te=this.closeBut=new t.Button({width:90,height:90,label:"X",backgroundColor:t.licorice,rollBackgroundColor:t.charcoal,corner:0,style:!1});He.addChild(Te),Te.x=600-Te.width-Oe,Te.y=0,Te.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){L.hide(),L.dispatchEvent("close")});var ze=this.okBut=new t.Button({width:150,height:90,label:"OK",backgroundColor:t.licorice,rollBackgroundColor:t.charcoal,corner:0,style:!1});He.addChild(ze),ze.x=Te.x-ze.width-Oe,ze.y=0,ze.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){gt(),L.dispatchEvent("ok")});var st=this.swatchBacking=new t.Shape({style:!1});He.addChild(st),we=st.graphics,we.f(t.black).r(.5,.5,50,89).f(t.granite).r(50,.5,50,89).f(t.white).r(100,.5,49.5,89),st.x=ze.x-150-Oe,st.y=0;var Ye=this.swatch=new t.Rectangle(150,90,ue,null,null,null,null,null,null,!1);He.addChild(Ye),Ye.x=st.x,Ye.y=0,Ye.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){L.dispatchEvent("swatch")}),Ye.cur("pointer"),Ye.alpha=S=U,He.scaleX=He.scaleY=e/600,ae+=He.height}else X.cur("pointer");!s&&!h&&(ae-=Oe-l);var nt=ae+Oe;this.setBounds(0,0,e,nt);var pe=this.background=new t.Rectangle(e,nt,y,null,null,null,null,null,null,!1);this.addChildAt(pe,0),v!=-1&&C>0&&(pe.shadow=new Fe.Shadow(v,8,8,C));var ct=j.zdf,Je,be=!1;if(this.dropperTarget=A,z){r="spectrum";var Ee=30,_e=20,Ge=Re-Ee+1,Ue=Ge-_e+1,tt=L.bar=new t.Rectangle(L.width,Ee+1,t.black).addTo(L);D&&(L.title=new t.Label(D,18,null,t.light).pos(12,1,LEFT,CENTER,L.bar).noMouse()),u&&tt.cur();var Ae=new t.Container(L.width,Ge).loc(0,Ee,L),Ze=new t.Rectangle(L.width,Ue,new t.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,3/6,4/6,5/6,6/6],0,0,500,0)).addTo(Ae).mov(0,_e-1);new t.Rectangle(L.width,Ue/2,new t.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,Ue/2)).loc(Ze,null,Ae),new t.Rectangle(L.width,Ue/2+.5,new t.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,Ue/2+.5)).loc(Ze,null,Ae).mov(0,Ue/2),new t.Rectangle(L.width,20,new t.GradientColor(["black","white"],[.1,.9],0,0,L.width,0)).addTo(Ae);var lt=L.gradient=new t.Bitmap(Ae).loc(Ae,null,L).cur("none"),Ve=L.pixels=new t.Pixel(Ae,.5).loc(Ae,null,L).vis(!1).cur("none");Ae.dispose();var ft;!h&&B&&(ft=L.closeIcon=new t.Shape(-40,-40,80,80,null,!1),ft.graphics.f(t.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),ft.sca(.25).expand(10,10,10,1).pos(7,0,t.RIGHT,t.CENTER,tt).cur().addTo(L),ft.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){L.hide(),L.dispatchEvent("close")}));var ot=L.collapseIcon=new t.Triangle(20,20,20,t.faint,t.light,2).expand(10,10,10,1).pos(40+(ft?30:0),0,t.RIGHT,t.CENTER,tt).cur().addTo(L);ot.on("mousedown",function(){L.collapse(ot.rotation==0)});var ut=new t.Rectangle(20,20,t.white).reg("center");new t.Tile(new t.Rectangle(10,10,t.series(t.silver,t.white,t.white,t.silver)),2,2,0,0).addTo(ut),ut.mouseChildren=!1;var $e=L.modeIcon=new t.Button({width:20,height:20,shadowColor:-1,label:"",backing:ut,toggleEvent:"mousedown",toggleBacking:new t.Rectangle(20,20,new t.GradientColor([t.white,t.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(ft?30:0),5,t.RIGHT,t.TOP,L).expand(10,10,10,1);$e.on("mousedown",function(){Ve.vis($e.toggled),L.spectrumToggled=!$e.toggled,ct.stage.update()}),T||($e.removeFrom(),ot.mov(28)),p||ot.removeFrom(),F||L.okBut&&L.okBut.removeFrom(),!B&&Te&&Te.removeFrom();var Pt=new t.Rectangle(L.width,L.height-Ge-Ee,t.faint).pos(0,0,t.LEFT,t.BOTTOM,L).noMouse(),yt=this.dropper=new t.Circle(10,t.clear,t.white,8);new t.Circle(5,t.clear,t.black,2).center(yt),new t.Circle(7,t.clear,t.white,2).center(yt),yt.noMouse()}this.updateDropperTarget=function(){yt.vis(!1),Et(),yt.vis(!0).top()},this.spectrumToggled=z,this.toggleSpectrum=function(xt){xt!=L.spectrumToggled&&(n(xt)&&(xt=!L.spectrumToggled),L.spectrumToggled=xt,$e.toggle(!xt),Ve.vis(!xt),L.updateDropperTarget())};var wt=!1;function Ft(){ct.stage.mouseInBounds?yt.alp(1):yt.alp(0),yt.loc(ct.mouseX,ct.mouseY,ct.stage),wt=L.spectrumToggled?lt.hitTestReg(yt):Ve.hitTestReg(yt);var xt;L.dropperTarget?xt=yt.x>=Je.x&&yt.x<=Je.x+Je.width&&yt.y>=Je.y&&yt.y<=Je.y+Je.height:xt=!1;var Yt;if(L.dropperTarget?Yt=(wt||xt)&&!Pt.hitTestReg(yt)&&!tt.hitTestReg(yt):Yt=wt,!be&&Yt)_t(xt);else if(be&&!Yt){Jt(),ct.stage.update();return}if(Yt){var un;if(wt)un=L.spectrumToggled?lt:Ve;else if(L.dropperTarget)un=Je;else return;var dn=un.globalToLocal(ct.mouseX,ct.mouseY),vn=un.getColorAt(dn.x,dn.y,!0),kn="rgba("+vn[0]+","+vn[1]+","+vn[2]+","+vn[3]+")";vn[3]<.05&&(kn=ct.color),yt.borderColor=kn,ct.stage.update()}}function _t(xt){be=!0,xt&&Et(),yt.vis(!0).top()}function Jt(){be=!1,Je.dispose(),yt.vis(!1)}this.collapsed=!1,this.collapse=function(xt){n(xt)&&(xt=!0),xt!=L.collapsed&&(L.collapsed=xt,xt?($e.enabled=!1,ot.rot(180),L.background.vis(!1),lt.vis(!1),Pt.vis(!1),X.visible=!1,Ve&&Ve.vis(!1),Xe&&Xe.vis(!1),h&&He.vis(!1),be=!1,Zt(),Ut(),L.dispatchEvent("collapsed")):($e.enabled=!0,ot.rot(0),L.background.vis(!0),lt.vis(!0),Pt.vis(!0),X.visible=!0,L.spectrumToggled||Ve.vis(!0),Xe&&Xe.vis(!0),h&&He.vis(!0),be=!0,nn(),Et(),tt.hitTestReg(yt)&&Ut(),L.dispatchEvent("expanded")),ct.stage.update())},z&&p&&(L.collapseEvent=tt.on("dblclick",function(){L.collapsed?L.collapse(!1):L.collapse(!0)})),z&&Y&&p&&(L.vis(!1),setTimeout(function(){L.collapse(!0),L.vis(!0),L.stage&&L.stage.update()},50));function nn(){Zt(),L.dropperDown=ct.stage.on("stagemousedown",Ft),L.dropperMove=ct.stage.on("stagemousemove",Ft),L.dropperUp=ct.stage.on("stagemouseup",function(){Ft(),Ye&&z&&wt&&Ye.color!=yt.borderColor&&qe()})}function Zt(){L.dropperDown&&ct.stage.off("stagemousedown",L.dropperDown),L.dropperMove&&ct.stage.off("stagemousemove",L.dropperMove),L.dropperUp&&ct.stage.off("stagemouseup",L.dropperUp)}function Et(){Je&&Je.dispose&&Je.dispose();var xt=new t.Rectangle(ct.width,ct.height,ct.color).addTo(ct.stage,0),Yt;L.dropperTarget&&L.dropperTarget.getBounds&&L.dropperTarget.type&&!L.dropperTarget.type.includes("Stage")?Yt=L.dropperTarget.boundsToGlobal():Yt=ct.stage.getBounds(),Je=new t.Bitmap(ct.stage,Yt.width,Yt.height,Yt.x,Yt.y).loc(Yt).cur("none"),xt.dispose(),Je.on("mousedown",qe)}function Ut(){Je&&Je.dispose&&Je.dispose(),yt.vis(!1)}function qe(){yt.vis(!1),L.currentValue=t.convertColor(yt.borderColor,"hex"),L.dispatchEvent("change"),be&&(A?(Et(),yt.vis(!0).top(),setTimeout(function(){L.updateDropperTarget(),ct.stage.update()},50)):(yt.vis(!0).top(),ct.stage.update()))}function gt(){if(re&&a){d=c,c=ne;var xt=[d,c];for(K=0;K<2;K++){var Yt=X.graphics;R=Math.floor(K/i),N=K%i,ee=N*(O+l),le=R*(O+l)+Se,de[K]=xt[K],Yt.f(pe.color).r(ee-1,le-1,O+2,O+2).f(xt[K]).r(ee,le,O,O)}}ne=ue,o=S,L.dispatchEvent("change"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&L.stage&&L.stage.update()}if(u){var St,Ct;pe.on("mousedown",Bt),pe.on("pressmove",vt),pe.on("pressup",bt),z&&(tt.on("mousedown",Bt),tt.on("pressmove",vt),tt.on("pressup",bt))}function Bt(xt){St=xt.stageX/t.scaX-L.x,Ct=xt.stageY/t.scaY-L.y}function vt(xt){L.x=xt.stageX/t.scaX-St,L.y=xt.stageY/t.scaY-Ct,L.stage&&L.stage.update()}function bt(){L.stage&&L.stage.update()}var Vt=i*(O+l),qt=fe*(O+l);if(a)var jt=Le*(O+l),Gt=Ce*(O+l);X.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(xt){var Yt=t.hitTestGrid(X,Vt,qt,i,fe,xt.stageX,xt.stageY,0,0,l,l);n(Yt)||(ue=r[Yt],h&&(Ye.color=ue,he.text=String(r[Yt]).toUpperCase()),gt()),a&&(Yt=null,Yt=t.hitTestGrid(X,jt,Gt,Le,Ce,xt.stageX,xt.stageY,0,qt,l,l),n(Yt)||(ue=de[Yt],h&&(Ye.color=ue,he.text=de[Yt].toUpperCase()),gt())),k&&te(r.indexOf(ue)),h?L.stage&&L.stage.update():k&&L.stage&&L.stage.update(),Kt()}),Object.defineProperty(this,"selectedColor",{get:function(){return ue},set:function(xt){xt=xt.toLowerCase(),ne=ue=xt,h&&(Ye.color=ue,he.text=ue,L.stage&&L.stage.update()),k&&!z&&te(r.indexOf(ue)),Kt()}}),Object.defineProperty(this,"currentValue",{get:function(){return ue},set:function(xt){L.selectedColor=xt}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return ue},set:function(xt){xt!=L.selectedColor&&(L.selectedColor=xt,L.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return z?null:r.indexOf(ue)},set:function(xt){z||(ne=ue=r[xt],h&&(Ye.color=ue,he.text=ue,L.stage&&L.stage.update()),k&&te(r.indexOf(ue)),Kt())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return s?$t(Be.currentValue):1},set:function(xt){s&&(o=Be.currentValue=xt,Ye&&(Ye.alpha=o),Ke&&(Ke.text="Alpha: "+$t(Be.currentValue)),L.stage&&L.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return P?$t(Be.currentValue):1},set:function(xt){P&&(Be.currentValue=xt,L.stage&&L.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return z?"spectrum":a?r.concat(de):r},set:function(){ht&&je("ColorPicker() colors is read only - make a new ColorPicker to change")}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==L},set:function(){kt?t.KEYFOCUS=L:j.KEYFOCUS=L}}),x&&t.KEYFOCUS&&pn(),this.on("mousedown",function(){x&&pn()});function pn(){L.keyFocus=!0;var xt=document.activeElement;xt&&xt.blur()}function Kt(){L.zimAccessibility&&L.zimAccessibility.changeTitle(L,null,!0)}this.keyDownEvent=function(xt){if(L.stage&&!z&&(L.zimAccessibility&&L.focus||!L.zimAccessibility&&L.keyFocus)){var Yt=L.selectedIndex;xt.keyCode==37||xt.keyCode==40?(Yt--,Mn(Yt)):(xt.keyCode==38||xt.keyCode==39)&&(Yt++,Mn(Yt))}};function Mn(xt){xt<0&&(xt=L.colors.length-1),xt>L.colors.length-1&&(xt=0),L.selectedIndex=xt,L.dispatchEvent("change"),L.stage&&L.stage.update()}j.addEventListener("keydown",this.keyDownEvent);var Ne,ct;this.hide=function(){return Ne=L.stage,L.removeFrom(),Ne&&Ne.update(),L},this.on("removed",Rt);function Rt(){if(z&&(be=!1,Zt(),Ut()),L.toggled=!1,L.zimAccessibility){var xt=L.zimAccessibility;xt.resize(L),Ht?Ht.focus():L.zimTabTag.nextSibling.focus(),setTimeout(function(){xt.talk("ColorPicker has been closed.")},50)}Ne&&Ne.update()}var Ht,fn=!1;this.show=function(){return L.center(L.container),L};function rn(){if(L.stage&&(Ne=L.stage,ct=Ne.frame),L.zimAccessibility){var xt=L.zimAccessibility;setTimeout(function(){xt.activatedObject&&(Ht=xt.activatedObject.zimTabTag)},50),xt.resize(L),xt.tabIndex=L.zimTabIndex}L.toggled=!0,setTimeout(function(){z&&(be=!0,Et(),nn(),_t(),Ft()),L.stage&&L.stage.update()},20)}this.on("added",rn),this.toggle=function(xt){return xt===!0?L.show():xt===!1||L.container.contains(L)?L.hide():L.show(),L};function $t(xt){return Math.round(xt*Math.pow(10,2))/Math.pow(10,2)}n(w)&&(w=Q.selectedIndex!=null?Q.selectedIndex:0),L.selectedIndex=w,n(E)&&(E=Q.selectedColor!=null?Q.selectedColor:null),E!=null?L.selectedColor=E:z&&(L.selectedColor="#888888"),_!==!1&&t.styleTransforms(this,Q),this.clone=function(){return L.cloneProps(new t.ColorPicker(e,re?null:r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,this.group,b))},this.dispose=function(xt,Yt,un){return j.removeEventListener("keydown",L.keyDownEvent),z&&(Zt(),L.gradient.cur("default"),L.pixels.cur("default"),A&&A.cur("default"),Je.cur("default"),be=!1,Ut()),Be&&Be.dispose(),yt&&yt.dispose(),L.dropperDown&&ct.stage.off("stagemousedown",L.dropperDown),L.dropperMove&&ct.stage.off("stagemousemove",L.dropperMove),L.dropperUp&&ct.stage.off("stagemouseup",L.dropperUp),un||this.zimContainer_dispose(!0),!0}},t.extend(t.ColorPicker,t.Container,["clone","dispose"],"zimContainer",!1),t.EmojiPicker=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A){var p="width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",T;if(T=at(t.EmojiPicker,arguments,p,this))return T;De("67.05"),this.group=E;var B=w===!1?{}:t.getStyle("EmojiPicker",this.group,A);n(e)&&(e=B.width!=null?B.width:400),n(r)&&(r=B.height!=null?B.height:600),n(l)&&(l=B.monochrome!=null?B.monochrome:!1),n(a)&&(a=B.backgroundColor!=null?B.backgroundColor:t.lighter),n(s)&&(s=B.titleBar!=null?B.titleBar:"Emojis"),n(f)&&(f=B.titleBarColor!=null?B.titleBarColor:null),n(u)&&(u=B.titleBarBackgroundColor!=null?B.titleBarBackgroundColor:t.silver.toAlpha(.8)),n(v)&&(v=B.titleBarHeight!=null?B.titleBarHeight:40),n(C)&&(C=B.cache!=null?B.cache:!!t.mobile()),n(h)&&(h=B.size!=null?B.size:30),n(x)&&(x=B.colSize!=null?B.colSize:h+15),n(I)&&(I=B.rowSize!=null?B.rowSize:h+14),n(g)&&(g=B.collapse!=null?B.collapse:!1),n(k)&&(k=B.collapseColor!=null?B.collapseColor:n(f)?t.grey:f),n(y)&&(y=B.collapsed!=null?B.collapsed:!1),this.zimWindow_constructor(e,r,null,a,null,B.borderWidth!=null?B.borderWidth:2,B.padding!=null?B.padding:10,B.corner!=null?B.corner:10,null,B.scrollBarActive!=null?B.scrollBarActive:!0,B.scrollBarDrag!=null?B.scrollBarDrag:!0,null,null,null,!1,null,null,null,null,null,!0,null,null,null,null,null,null,s,f,u,v,B.draggable!=null?B.draggable:!0,null,null,B.close!=null?B.close:!0,null,null,B.fullSize!=null?B.fullSize:!1,null,B.resizeHandle!=null?B.resizeHandle:!1,g,k,y,null,null,w,E,t.copy(B)),this.type="EmojiPicker";var F=this;this.emojiData=n(i)?["\u{1F4A5}","\u{1F335}","\u{1F382}","\u{1F370}","\u{1F429}","\u{1F525}","\u{1F32B}","\u{1F30A}","\u{1F34F}","\u{1F34E}","\u{1F34B}","\u{1F34C}","\u{1F347}","\u{1F351}","\u{1F345}","\u{1F346}","\u{1F9C0}","\u{1F355}","\u{1F36C}","\u{1F36D}","\u{1F369}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F37E}","\u2615\uFE0F","\u{1F4A9}","\u{1F47B}","\u{1F916}","\u{1F4A4}","\u{1F440}","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F454}","\u{1F457}","\u{1F459}","\u{1F458}","\u{1F460}","\u{1F452}","\u{1F3A9}","\u{1F431}","\u{1F43B}","\u{1F436}","\u{1F43C}","\u{1F42F}","\u{1F981}","\u{1F42E}","\u{1F437}","\u{1F419}","\u{1F435}","\u{1F412}","\u{1F414}","\u{1F426}","\u{1F434}","\u{1F984}","\u{1F41D}","\u{1F422}","\u{1F420}","\u{1F410}","\u{1F54A}","\u{1F415}","\u{1F408}","\u{1F409}","\u{1F432}","\u{1F384}","\u{1F340}","\u{1F33B}","\u{1F339}","\u{1F490}","\u{1F344}","\u2600\uFE0F","\u{1F327}","\u26BD\uFE0F","\u{1F3C0}","\u{1F3C8}","\u26BE\uFE0F","\u{1F3BE}","\u{1F3D2}","\u26F7","\u{1F3C4}","\u{1F3CA}","\u{1F6B4}","\u{1F3AD}","\u{1F3A8}","\u{1F3B7}","\u{1F3BA}","\u{1F3B8}","\u{1F3BB}","\u{1F3B0}","\u{1F3B3}","\u{1F697}","\u{1F695}","\u{1F68C}","\u{1F68E}","\u{1F691}","\u{1F692}","\u{1F69C}","\u{1F682}","\u2708\uFE0F","\u26F5\uFE0F","\u{1F6F0}","\u{1F301}","\u{1F30B}","\u{1F3DE}","\u{1F305}","\u{1F386}","\u{1F308}","\u{1F3E0}","\u{1F3E5}","\u{1F3EB}","\u231A\uFE0F","\u{1F4F1}","\u{1F5A5}","\u{1F4BE}","\u{1F4FC}","\u{1F3A5}","\u260E\uFE0F","\u{1F4FA}","\u{1F4FB}","\u{1F4E1}","\u{1F56F}","\u{1F4B0}","\u{1F48E}","\u{1F6AC}","\u26B0","\u{1F52E}","\u{1F488}","\u{1F6BD}","\u{1F511}","\u{1F6CF}","\u{1F389}","\u{1F38A}","\u2764\uFE0F","\u{1F921}","\u{1F600}","\u{1F62C}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u263A\uFE0F","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F913}","\u{1F60E}","\u{1F917}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F914}","\u{1F633}","\u{1F61F}","\u{1F620}","\u{1F614}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F623}","\u{1F62B}","\u{1F629}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F622}","\u{1F62A}","\u{1F613}","\u{1F62D}","\u{1F635}","\u{1F632}","\u{1F910}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F634}","\u{1F480}","\u2620\uFE0F","\u{1F47D}","\u{1F63A}","\u{1F638}","\u{1F639}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F640}","\u{1F63F}","\u{1F63E}","\u{1F444}","\u{1F48B}","\u{1F445}","\u{1F5E3}","\u{1F464}","\u{1F465}","\u{1F456}","\u{1F463}","\u{1F461}","\u{1F462}","\u{1F45E}","\u{1F45F}","\u{1F393}","\u{1F451}","\u{1F45C}","\u{1F45B}","\u{1F4BC}","\u{1F453}","\u{1F576}","\u{1F48D}","\u{1F302}","\u2744\uFE0F","\u{1F32A}","\u26A1\uFE0F","\u{1F951}","\u{1F98B}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F427}","\u{1F577}","\u{1F982}","\u{1F980}","\u{1F40D}","\u{1F41B}","\u{1F40C}","\u{1F41E}","\u{1F41C}","\u{1F41F}","\u{1F421}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F40A}","\u{1F406}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F331}","\u{1F33F}","\u{1F343}","\u{1F342}","\u{1F341}","\u{1F33A}","\u{1F33C}","\u{1F338}","\u{1F330}","\u{1F383}","\u{1F41A}","\u{1F578}","\u{1F30E}","\u{1F30D}","\u{1F30F}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F31A}","\u{1F31D}","\u{1F31B}","\u{1F31C}","\u{1F31E}","\u{1F319}","\u2B50\uFE0F","\u{1F31F}","\u{1F4AB}","\u2728","\u2604\uFE0F","\u{1F354}","\u{1F373}","\u{1F35F}","\u{1F32D}","\u{1F35D}","\u{1F32E}","\u{1F32F}","\u{1F363}","\u{1F368}","\u{1F366}","\u{1F377}","\u{1F379}","\u{1F3C6}","\u{1F3AA}","\u{1F3B9}","\u{1F680}","\u26F2\uFE0F","\u{1F3A2}","\u26F0","\u{1F3D4}","\u{1F5FB}","\u{1F4AF}","\u{1F3B5}","\u{1F3B6}","\u{1F4AC}","\u{1F4AD}","\u{1F5EF}","\u{1F0CF}","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F953}","\u{1F943}","\u{1F3A4}","\u{1F6A8}","\u{1F3CD}","\u{1F3D5}","\u26FA\uFE0F","\u{1F3DC}","\u{1F3D6}","\u{1F3DD}","\u{1F307}","\u{1F306}","\u{1F3D9}","\u{1F303}","\u{1F3D8}","\u{1F3E1}","\u{1F3E2}","\u{1F528}","\u2699","\u{1F52B}","\u{1F4A3}","\u{1F52A}","\u{1F48A}","\u{1F573}","\u{1F489}","\u{1F6C1}","\u26F1","\u{1F381}","\u{1F388}","\u{1F380}","\u{1F4C5}","\u{1F5F3}","\u{1F4DA}","\u270F\uFE0F","\u26AA\uFE0F","\u26AB\uFE0F","\u2B1B\uFE0F","\u2B1C\uFE0F","\u{1F5BC}","\u{1F3DA}","\u{1F3ED}","\u{1F532}","\u{1F533}","\u{1F3B1}","\u{1F53A}","\u{1F53B}","\u{1F4A6}","\u26F3\uFE0F","\u{1F3DF}","\u{1F4A1}","\u{1F52D}","\u{1F52C}","\u{1F570}","\u{1F42A}","\u{1F42B}","\u{1F418}","\u{1F438}","\u{1F430}","\u{1F42D}","\u{1F6AA}","\u{1F6CD}","\u{1F441}","\u{1F353}","\u{1F352}","\u{1F336}","\u{1F33D}","\u{1F360}","\u{1F36F}","\u{1F35E}","\u{1F36B}","\u{1F37F}","\u{1F36A}","\u{1F34A}","\u{1F3F9}","\u{1F46F}","\u{1F46F}\u200D\u2642\uFE0F","\u{1F5D1}"]:i;var D=[];t.loop(this.emojiData,function(P){var Y=new t.Emoji(P,h,l);D.push(Y)}),this.wrapper=new t.Wrapper({items:D,width:e,alignInner:t.CENTER,valignInner:t.CENTER,wrapperType:"column",colSize:x,rowSize:I}).cur(),this.backdrop=new t.Rectangle(this.wrapper.width,this.wrapper.height,t.faint),t.timeout(.2,function(){F.scrollBar&&F.scrollBar.vertical&&F.scrollBar.vertical.getBounds()&&F.scrollBar.vertical.expand(),F.backdrop.heightOnly=F.wrapper.height,C&&F.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(P){F.currentEmoji=P.target,F.dispatchEvent("change")}),w!==!1&&t.styleTransforms(this,B),this.clone=function(){return F.cloneProps(new t.EmojiPicker(e,r,w,this.group,A))},this.dispose=function(){return!0}},t.extend(t.EmojiPicker,t.Window,["clone","dispose"],"zimWindow",!1),t.TextEditor=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L){var c="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",d;if(d=at(t.TextEditor,arguments,c,this))return d;De("67.1"),this.group=G;var o=re===!1?{}:t.getStyle("TextEditor",this.group,L);if(n(e)&&(e=o.width!=null?o.width:400),n(i)&&(i=o.backgroundColor!=null?o.backgroundColor:t.lighter),n(k)&&(k=o.titleBar!=null?o.titleBar:"Text Editor"),n(V)&&(V=o.draggable!=null?o.draggable:!0),n(I)&&(I=o.titleBarHeight!=null?o.titleBarHeight:30),n(l)&&(l=o.fieldColor!=null?o.fieldColor:i.darken(.05)),n(h)&&(h=o.live!=null?o.live:!0),n(w)&&(w=o.wrap!=null?o.wrap:!0),n(A)&&(A=o.scroll!=null?o.scroll:!0),n(D)&&(D=o.margin!=null?o.margin:10),n(E)&&(E=o.limit!=null?o.limit:null),n(k)&&(k=o.titleBar!=null?o.titleBar:null),n(f)&&(f=o.sizeList!=null?o.sizeList:null),n(v)&&(v=o.colorList!=null?o.colorList:null),n(u)&&(u=o.optionList!=null?o.optionList:null),n(C)&&(C=o.fontList!=null?o.fontList:null),n(l)&&(l=o.fieldColor!=null?o.fieldColor:null),n(a)&&(a=o.fieldHeight!=null?o.fieldHeight:null),n(s)&&(s=o.textSize!=null?o.textSize:null),n($)&&($=o.fontListHeight!=null?o.fontListHeight:100),n(Q)&&(Q=o.fontListViewNum!=null?o.fontListViewNum:3),typeof Z>"u")if(j.zdf)var Z=j.zdf;else{ht&&je("zim.TextEditor - please provide a reference to zim Frame");return}this.zimPanel_constructor(e,300,null,k,y,x,I,i,B,F,P,!0,null,null,null,null,null,null,null,null,Y,_,V,b,re,G,L);var S=this;n(g)&&(g=new t.Button({width:50,height:50,label:"",icon:new t.Shape().sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:t.white,corner:10,backgroundColor:t.green.darken(.2),borderColor:t.white,borderWidth:2,rollBackgroundColor:t.green,shadowBlur:3}).pos(D,I+D*2,t.RIGHT,t.TOP,S)),S.button=g,g.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",X),n(a)&&(a=o.fieldHeight!=null?o.fieldHeight:g.height+D*2);function X(){h||(O.text=m.text),S.hide(),S.dispatchEvent("set")}var m=S.textArea=new t.TextArea({color:r,backgroundColor:l,width:e-g.width-D*3,height:n(a)?g.height+D*2:a,expand:10,password:T,placeholder:p,frame:Z}).loc(D,I+D+(a&&a<g.height+D*2?(g.height-a)/2+D:0),null,null,!1);w||(m.tag.style.whiteSpace="nowrap"),E&&m.tag.setAttribute("maxLength",E),A&&(m.tag.style.overflowY="auto");var O=new t.Label;S.on("pressmove",function(){m.resize()}),S.on("close",function(){S.inputEvent&&m.off("input",S.inputEvent),m.removeFrom()}),S.panelHeight=I+D+Math.max(a,g.height+D*2)+D;var de=t.mobile(),R=de?35:30;if(f||u||v){new t.Rectangle(e,R+D,"rgba(0,0,0,.05)").loc(0,S.panelHeight,S);var N=[];if(v){var se=Array.isArray(v),ie=S.colorPicker=new t.ColorPicker({colors:se?v:null,cols:se?Math.min(v.length,12):null,alphaPicker:!1,greyPicker:!se,container:Z.stage});ie.on("close",xe),ie.on("change",function(){O.color=r.color=ie.selectedColor,S.dispatchEvent("update"),xe()}),S.closeColorPicker=function(){xe()},r=S.swatch=new t.Rectangle(R,R,O.color,t.dark,1).cur(),r.on("mousedown",function(){S.dispatchEvent("color"),m.tag.style.display="none",ie.selectedColor=r.color,ie.show(),S.stage&&S.stage.update()}),N.push(r)}if(u){u===!0&&(u=["bold","italic","align"]),n(j.STYLE)&&(j.STYLE={}),n(j.STYLE.group)&&(j.STYLE.group={}),j.STYLE.group.zimEditor={width:R,height:R,corner:0,borderColor:t.tin,shadowBlur:-1,backgroundColor:t.light,rollBackgroundColor:t.light,toggleBackgroundColor:t.green,toggleColor:t.grey};var q,z,ce;t.loop(u,function(ke){if(ke.toLowerCase()=="bold")q=S.bold=new t.Button({label:new t.Label({text:"B",color:t.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"}),q.on("click",function(){O.bold=q.toggled,S.dispatchEvent("update"),S.stage&&S.stage.update()}),N.push(q),O.bold&&q.toggle();else if(ke.toLowerCase()=="italic")z=S.italic=new t.Button({label:new t.Label({text:"I",color:t.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"}),z.on("click",function(){O.italic=z.toggled,S.dispatchEvent("update"),S.stage&&S.stage.update()}),N.push(z),O.italic&&z.toggle();else if(ke.toLowerCase()=="align"){var ne=new t.Tile(new t.Rectangle(R-10,R-10,t.grey).centerReg(),3,1,10,10),ve=de?["\u21DA","\u21D4","\u21DB"]:["\u21D0","\u21D4","\u21D2"];t.loop(3,function(ee){var le=ne.getChildAt(ee);new t.Label(ve[ee],R*2/3,null,t.white).center(le).expand(10)});var we=0;O.align=="right"?we=2:(O.align=="center"||O.align=="middle")&&(we=1),ce=S.align=new t.Selector({tile:ne,corner:0,borderWidth:1,borderColor:t.grey,backgroundColor:t.clear,selectedIndex:we}),ce.on("change",function(){ce.selectedIndex==0?O.align="left":ce.selectedIndex==1&&(O.align="center"),ce.selectedIndex==2&&(O.align="right"),S.dispatchEvent("update"),S.stage&&S.stage.update()}),N.push(ce)}}),delete j.STYLE.group.zimEditor}if(f){var Ie=S.sizePicker=new t.Stepper({list:f===!0?null:f,stepperType:f===!0?null:"list",min:f===!0?5:null,max:f===!0?500:null,width:150,shadowBlur:-1,borderColor:t.dark,borderWidth:2,corner:0,backgroundColor:t.green,downForward:!1}).siz(null,R);Ie.arrowPrev.expand(0),Ie.textBox.color=t.lighter,Ie.on("change",function(){O.size=Ie.currentValue,S.dispatchEvent("update"),S.stage&&S.stage.update()}),Ie.currentValue=O.size,N.push(Ie)}var K=new t.Tile(N,N.length,1,10,10,!0).loc(D,S.panelHeight+D/2,S);S.panelHeight=S.panelHeight+D+K.height+D}function xe(){m.tag.style.display="block",ie.hide(),S.stage&&S.stage.update()}var J;if(C){Array.isArray(C)?J=C:(J=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],de||(J=J.concat(["Comic Sans MS","Impact"])),J.sort());var fe=S.fonts=new t.List({width:e-D*2,height:$,viewNum:Q,backgroundColor:t.moon,color:t.grey,rollColor:t.dark,rollBackgroundColor:t.green.lighten(.5),selectedBackgroundColor:t.mist,selectedRollBackgroundColor:t.green.lighten(.6),selectedColor:t.dark,backdropColor:t.light,scrollBarColor:t.dark,shadowBlur:-1,list:J}).center(S).loc(null,S.panelHeight);fe.on("change",function(){O.font=fe.currentValue,S.dispatchEvent("update"),S.stage&&S.stage.update()}),S.panelHeight=S.panelHeight+D+fe.height+D}S.show=function(ke,ne,ve,we){if(S.parent)return ke==S.label||(S.label=ke),S;O=ke,m.addTo(S);var ee;if(O&&O.stage)ee=O.stage;else if(we)ee=we.stage;else if(j.zdf)ee=j.zdf.stage;else return S;return!n(ne)||!n(ve)?S.loc(ne,ve):O&&O.y>ee.height/2?S.loc(ee.width/2-e/2,O.y-S.panelHeight-ee.height*.05,ee):O&&O.y<=ee.height/2?S.loc(ee.width/2-e/2,O.y+O.height+ee.height*.05,ee):S.center(ee),S.y<20&&(S.y=20),S.y+S.height>S.stage.height&&(S.y=S.stage.height-S.height-20),U(),S.stage.update(),S};function U(){O&&(m.text=O.text),r&&(r.color=O.color),q&&q.toggle(O.bold==!0),z&&z.toggle(O.italic==!0),ce&&(ce.noAnimate=!0,O.align=="center"?ce.selectedIndex=1:O.align=="right"?ce.selectedIndex=2:ce.selectedIndex=0),Ie&&(Ie.currentValue=O.size),fe&&(fe.currentValue=O.font),S.inputEvent&&m.off("input",S.inputEvent),S.inputEvent=m.on("input",function(){h&&O&&(O.text=m.text),S.dispatchEvent("input"),S.dispatchEvent("update"),S.stage&&S.stage.update()})}S.hide=function(){if(v&&ie.hide(),m&&m.removeFrom(),!n(S.stage)){var ke=S.stage;return S.removeFrom(),ke.update(),S}},j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==S},set:function(){t.KEYFOCUS=S}}),t.KEYFOCUS||ue(),this.on("mousedown",function(){ue()});function ue(){S.keyFocus=!0}Object.defineProperty(S,"label",{get:function(){return O},set:function(ke){O=ke,U()}}),re!==!1&&t.styleTransforms(this,o),this.clone=function(){return S.cloneProps(new t.TextEditor(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,this.group,L))},this.dispose=function(ke,ne,ve){return S.inputEvent&&m.off("input",S.inputEvent),ie&&ie.dispose(),r&&r.dispose(),fe&&fe.dispose(),g&&g.dispose(),m&&m.dispose(),ce&&ce.dispose(),q&&q.dispose(),z&&z.dispose(),Ie&&Ie.dispose(),ve||this.zimPanel_dispose(),S.stage&&S.stage.update(),S.textArea=S.color=S.colorPicker=S.font=S.button=S.selector=S.bold=S.italic=S.size=null,!0}},t.extend(t.TextEditor,t.Panel,["clone","dispose"],"zimPanel",!1),t.Keyboard=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re){var G="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, style, group, inherit",L;if(L=at(t.Keyboard,arguments,G,this))return L;De("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=Q;var c=$===!1?{}:t.getStyle(this.type,this.group,re);n(e)&&(e=c.labels!=null?c.labels:[]),Array.isArray(e)||(e=[e]),n(r)&&(r=c.backgroundColor!=null?c.backgroundColor:t.dark),n(i)&&(i=c.color!=null?c.color:t.white),n(l)&&(l=c.shiftBackgroundColor!=null?c.shiftBackgroundColor:"orange"),n(a)&&(a=c.shiftHoldBackgroundColor!=null?c.shiftHoldBackgroundColor:"red"),n(s)&&(s=c.placeBackgroundColor!=null?c.placeBackgroundColor:t.blue),n(f)&&(f=c.placeColor!=null?c.placeColor:i),n(u)&&(u=c.cursorColor!=null?c.cursorColor:t.blue),n(v)&&(v=c.shadeAlpha!=null?c.shadeAlpha:.2),n(C)&&(C=c.borderColor!=null?c.borderColor:"rgba(0,0,0,.1)"),n(h)&&(h=c.borderWidth!=null?c.borderWidth:null),C<0||h<0?C=h=null:C!=null&&h==null&&(h=1),n(g)&&(g=c.margin!=null?c.margin:5),n(k)&&(k=c.corner!=null?c.corner:30),n(y)&&(y=c.draggable!=null?c.draggable:!1),n(x)&&(x=c.placeClose!=null?c.placeClose:!0),n(I)&&(I=c.shadowColor!=null?c.shadowColor:"rgba(0,0,0,.2)"),n(w)&&(w=c.shadowBlur!=null?c.shadowBlur:14),n(A)&&(A=c.data!=null?c.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]]]),A[3]||(A[3]={e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]});var d=this;n(p)&&(p=c.place!=null?c.place:!0),n(T)&&(T=c.placeShiftH!=null?c.placeShiftH:0),n(B)&&(B=c.placeShiftV!=null?c.placeShiftV:0),n(D)&&(D=c.rtl!=null?c.rtl:!1),n(P)&&(P=c.hardKeyboard!=null?c.hardKeyboard:!0),n(_)&&(_=c.numPadScale!=null?c.numPadScale:.8),n(b)&&(b=c.numPadOnly!=null?c.numPadOnly:!1),n(V)&&(V=c.numPadDraggable!=null?c.numPadDraggable:!0),n(Z)&&(Z=c.numPadAdvanced!=null?c.numPadAdvanced:!1),n(Y)&&(Y=c.layout!=null?c.layout:"qwerty"),Y=Y.toLowerCase(),Y!="qwerty"&&(Y=="arabic"?A=[[["\u0636","\u0635","\u062B","\u0642","\u0641","\u063A","\u0639","\u0647","\u062E","\u062D","\u062C"],["\u0634","\u0633","\u064A","\u0628","\u0644","\u0627","\u062A","\u0646","\u0645","\u0643","\u0637"],["\u0630","\u0621","\u0624","\u0631","\u0649","\u0629","\u0648","\u0632","\u0638","\u062F","back"],["?123","\u0640"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{\u0627:["\u0623","\u0625","\u0622","\u0621"],\u0649:["\u0626"],\u0621:["\u0626","\u0624"],\u0648:["\u0624"],\u0640:["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],"*":["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],n:["\xF1","\u0144"]}]:Y=="hebrew"?A=[[["\u05E7","\u05E8","\u05D0","\u05D8","\u05D5","\u05DF","\u05DD","\u05E4","backspace"],["\u05E9","\u05D3","\u05D2","\u05DB","\u05E2","\u05D9","\u05D7","\u05DC","\u05DA","\u05E3"],["\u05D6","\u05E1","\u05D1","\u05E0","\u05D4","\u05DE","\u05E6","\u05EA","\u05E5"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:Y=="azerty"?A=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","\xB4","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:Y=="turkish"&&(A=[[["q","w","e","r","t","y","u","\u0131","o","p","\u011F","\xFC"],["a","s","d","f","g","h","j","k","l","\u015F","i"],["shift","z","x","c","v","b","n","m","\xF6","\xE7","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]},{\u0131:"I",i:"\u0130"},{I:"\u0131",\u0130:"i"}])),d.data=A;var o="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(n(E))if(j.zdf)E=j.zdf.stage;else{je(o);return}else if(E.getBounds){if(n(E.stage)){je("zim display - Keyboard(): The container must have a stage property");return}}else{je(o);return}I!=-1&&w>0&&(d.shadow=new Fe.Shadow(I,3,3,w));var S=j.zdf?j.zdf.stage:null;d.labels=e;var X,m=10;t.loop(A[0],function(Ee){Ee.length>m&&(m=Ee.length)});var O=m,de=["/","",",",".","numpad","away"];n(F)||de.splice(1,0,F);var R=t.copy(A[0]);R[3]=R[3].concat(de);var N=t.copy(A[1]);N[3]=N[3].concat(de);var se=t.copy(A[2]);se[3]=se[3].concat(de);var ie=[],q=(1e3-(O-1)*5)/O,z={def:"default",shift:"shift",number1:"number1",number2:"number2"},ce=z.def,Ie,K,xe,J=!1,fe,U,ue=0,ke,ne=[],ve,we,ee,le,ye,oe,Me,ae;Re(),te(ce),y&&Xe(),this.on("mousedown",Se);function Se(Ee){S=d.stage,K&&d.removeChild(K),ke&&ne.indexOf(Ee.target)<0&&he(),n(Ee.target.na)||(y&&Ee.target===Me?(d.tickerMouseEvent=S.on("stagemousemove",function(_e){d.mouseYAmount=_e.stageY}),t.Ticker.add(it),d.on("pressup",Be),ae=Ee.stageY-d.localToGlobal(0,0).y):!n(F)&&Ee.target.na===F?d.dispatchEvent("special"):Ee.target.na==="shift"?Ce():Ee.target.toggle==="?123"?(d.removeChild(Ie),te(z.number1)):Ee.target.toggle==="ABC"?(d.removeChild(Ie),ce=z.def,te(),J&&Ce(!0)):Ee.target.toggle==="1/2"?(d.removeChild(Ie),te(z.number2)):Ee.target.toggle==="2/2"?(d.removeChild(Ie),te(z.number1)):Ee.target.na==="numpad"?Qe(Ee.target):Ee.target.na==="away"?(d.hideKeyboard(),d.dispatchEvent("close")):A[3]&&A[3][Ee.target.na]?Oe(Ee.target.na):Ee.target.na==="return"?me(`
`):Ee.target.na==="backspace"||Ee.target.na==="back"?st():Ee.target.na===""?me(" "):me(Ee.target.na),S.update())}d.addChar=function(Ee){!n(Ee)&&Ee.match(/^.$/)&&me(Ee)},d.removeChar=function(){st(!0)},d.clearText=function(){U.text="",st(!0),ze(),d.selectedIndex=0},d.setText=function(Ee){U.text=Ee,ze(),d.selectedIndex=Ee.length};var Le;function Ce(Ee){var _e=!1,Ge,Ue;if(ce===z.def){for(fe.color=Ee?a:l,Ge=0;Ge<ie.length-6-(n(F)?0:1);Ge++)Ue=ie[Ge],Ue.label.text.length>0&&(Ue.na.length===1?(A[4]&&A[4][Ue.label.text]?Ue.label.text=A[4][Ue.label.text]:Ue.label.text=Ue.label.text.toUpperCase(),Ue.label.centerReg(Ue).mov(0,6)):Ue.label.centerReg(Ue));Ee||(_e=!0,setTimeout(tt,500),Le=d.on("pressup",Ae)),ce=z.shift}else{for(fe.color=r,J=!1,Ge=0;Ge<ie.length-6;Ge++)Ue=ie[Ge],Ue.label.text.length>0&&(Ue.na.length===1?(A[5]&&A[5][Ue.label.text]?Ue.label.text=A[5][Ue.label.text]:Ue.label.text=Ue.label.text.toLowerCase(),Ue.label.centerReg(Ue).mov(0,3)):Ue.label.centerReg(Ue));ce=z.def}Ie.updateCache(),d.stage&&d.stage.update();function tt(){_e&&(J=!0,fe.color=a,Ie.updateCache(),d.stage&&d.stage.update())}function Ae(){d.off("pressup",Le),_e=!1}}function te(Ee){var _e,Ge,Ue,tt=0,Ae=0,Ze,lt,Ve=!1,ft,ot,ut=!1;n(Ee)&&(Ee=z.def),Ee===z.def?_e=R:Ee===z.number1?_e=N:Ee===z.number2&&(_e=se),d.keys=Ie=new t.Container(1e3,430,null,null,!1).addTo(d).vis(!b);for(var $e=0;$e<_e.length;$e++){($e<=1||Ee==z.def&&$e==2&&_e[2][0]!="shift")&&(tt=(q/2+2.5)*(O-_e[$e].length));for(var Pt=0;Pt<_e[$e].length;Pt++){if(Ve=!1,ft=null,ut=!1,_e[$e][Pt]=="backspace"?(lt=!0,ft=we,ut=!0):_e[$e][Pt]=="back"?(lt=!1,ft=we,ut=!0):_e[$e][Pt]=="shift"?(lt=!0,ft=ve):($e==3||Ee!=z.def&&$e==2)&&Pt==0?(lt=!0,ut=!0):_e[$e][Pt]==""?(lt=!1,Ve=!0):_e[$e][Pt]=="numpad"?(ft=le,lt=!1,ut=!0):_e[$e][Pt]=="away"?(ft=ee,lt=!0,ut=!0):lt=!1,lt?Ze=q*1.5+2.5:Ve?(Ze=(q+5)*((n(F)?3:2)+O-10+1-A[0][3].length)-5,A[0][3].indexOf("backspace")!=-1&&(Ze-=q/2)):Ze=q,Ue=new t.Rectangle(Ze,q,r,C,h,k,null,null,null,!1).cur().addTo(Ie),ut&&Ue.addChild(new t.Rectangle(Ze,q,"black",null,null,k,null,null,null,!1).alp(v)),ft?Ue.label=Ge=new t.Label({text:"",backgroundColor:"ignore",font:c.font!=null?c.font:null,style:!1}):Ue.label=Ge=new t.Label({lineWidth:10,lineHeight:25,font:c.font!=null?c.font:null,text:_e[$e][Pt],color:i,align:"center",style:!1}),ft){var yt=ft.clone(),wt;_e[$e][Pt]=="numpad"?(wt=60,oe=Ue):wt=70,yt.scaleTo(Ue,wt,wt),yt.centerReg(Ue)}ot?(ot=!1,tt+=67.33):(Ge.centerReg(Ue).mov(0,isNaN(Ge.text)?3:7),Ue.x=tt,Ue.y=Ae,Ue.na=_e[$e][Pt],$e==2&&Pt==0&&Ee==z.number1&&(Ue.toggle="1/2"),$e==2&&Pt==0&&Ee==z.number2&&(Ue.toggle="2/2"),$e==3&&Pt==0&&Ee==z.def&&(Ue.toggle="?123"),$e==3&&Pt==0&&Ee!=z.def&&(Ue.toggle="ABC"),Ue.toggle&&Ge.mov(0,3),ie.push(Ue),Ue.na=="shift"&&(fe=Ue),tt=Ue.x+Ue.width+5)}Ae+=q+5,tt=0}Ie.cache(h?-h:0,h?-h:0,h?Ie.width+h*2:Ie.width,h?Ie.height+h*2:Ie.height)}function Oe(Ee){var _e=A[3][Ee],Ge=!1,Ue=!1,tt;tt=t.timeout(500,lt,null,"ms");var Ae=d.on("pressup",Ze);function Ze(){Ge=!0,d.off("pressup",Ae),Ue||me(Ee)}function lt(){var Ve,ft,ot,ut=0,$e;if(tt.clear(),!Ge){Ue=!0,K=new t.Container(1e3,q,null,null,!1).addTo(d,0),K.y=-q-5;for(var Pt=0;Pt<_e.length;Pt++)ce===z.shift?$e=_e[Pt].toUpperCase():$e=_e[Pt],Ve=new t.Label({lineWidth:10,lineHeight:25,text:$e,font:c.font!=null?c.font:null,color:i,align:"center",style:!1}),ft=new t.Rectangle(q,q,r,C,h,k,null,null,null,!1).addTo(K),ot=new t.Rectangle(q,q,"white",null,null,k,null,null,null,!1).alp(.2),ft.addChild(ot),Ve.center(ft),ft.na=_e[Pt],ft.x=ut,ut+=q+5;d.stage&&d.stage.update()}}}function Re(){ve=new t.Shape({style:!1}),ve.graphics.f(i).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),ve.setBounds(-51/2,-72/2,51,72),we=new t.Container({style:!1});var Ee=new t.Shape({style:!1});Ee.graphics.f(i).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),Ee.setTransform(82.6,32),Ee.addTo(we);var _e=new t.Shape({style:!1});_e.graphics.f(i).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),_e.setTransform(62.2,32),_e.addTo(we),we.setBounds(0,0,125,64),ee=new t.Container({style:!1}),ee.setBounds(0,0,147,86);for(var Ge=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],Ue,tt=0;tt<Ge.length;tt++)Ue=new t.Shape({style:!1}),Ue.graphics.f(i).s().p(Ge[tt].p),Ue.setTransform(Ge[tt].transform[0],Ge[tt].transform[1]),Ue.addTo(ee);le=new t.Container({style:!1}),le.setBounds(0,0,62,86),ye=new t.Container({style:!1}),ye.setBounds(0,0,62,86);for(var Ae=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],tt=0;tt<Ae.length;tt++){var Ze=new t.Shape({style:!1});Ze.graphics.f(i).s().p(Ae[tt].p),Ze.setTransform(Ae[tt].transform[0],Ae[tt].transform[1],Ae[tt].transform[2],Ae[tt].transform[3],Ae[tt].transform[4]),Ze.addTo(le);var lt=new t.Shape({style:!1});lt.graphics.f(i).s().p(Ae[tt].p),lt.setTransform(Ae[tt].transform[0],Ae[tt].transform[1]),lt.addTo(ye)}Ze.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),lt.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}function Xe(){Me=new t.Rectangle(q*1.5+2.5+2.5,q,r,C,h,k,null,null,null,!1).addTo(d,0).cur();for(var Ee,_e=0;_e<4;_e++)Ee=new t.Rectangle(Me.width*.4,4,i,null,null,null,null,null,null,!1).centerReg(Me).alp(.2),Ee.y-=-22+_e*15;Me.x=8.5*q+40,Me.y=-q-5,Me.na="drag"}function Qe(Ee){d.numPad||(d.numPad=new t.NumPad({advanced:Z,draggable:V}).sca(_),V||b?d.numPad.center({add:!1}):d.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1}),d.numPad.on("pressed",function(){d.numPad.key=="enter"?d.dispatchEvent("enter"):d.numPad.key=="backspace"?d.removeChar():d.numPad.key=="clear"?d.clearText():d.numPad.key=="space"?me(" "):me(d.numPad.key)}),d.numPad.on("close",function(){oe.removeChildAt(2),le.clone().scaleTo(oe,60,60).centerReg(oe,2),Ie.updateCache(),(!d.keys.parent||!d.keys.visible)&&xe&&(xe.visible=!1,d.toggled=!1,he())})),oe.removeChildAt(2),d.numPad.parent||Ee===!1?(d.numPad.removeFrom(),le.clone().scaleTo(oe,60,60).centerReg(oe,2)):(!d.numPad.parent||Ee===!0)&&(d.numPad.addTo(),ye.clone().scaleTo(oe,60,60).centerReg(oe,2)),Ie.updateCache(),d.stage&&d.stage.update()}function it(){d.mouseYAmount&&(d.y=d.parent.globalToLocal(0,d.mouseYAmount-ae).y)}function Be(){S.off("pressmousemove",d.tickerMouseEvent),t.Ticker.remove(it)}d.setBounds(1e3,400-(O-10)*26);function Ke(){if(!(!U||!xe)){for(var Ee=U.label.x+U.label.getBounds().x,_e=0;_e<ue;_e++)Ee+=U.widthArray[_e]?U.widthArray[_e]:0;xe.heightOnly=U.getBounds().height*(U.backing&&n(U.padding)?.9:1)-(U.paddingV&&U.background?U.paddingV*2:0),xe.center(U),xe.x=Ee}}function He(){if(ke||!U)return d;var Ee=x?["<",">","x"]:["<",">"],_e,Ge,Ue;ne=[],Ue=U.localToLocal(0,0,d),ke=d.place=new t.Container({style:!1}).addTo(d).cur();for(var tt=0;tt<Ee.length;tt++)_e=new t.Rectangle(q,q,s,C,h,k,null,null,null,!1),Ee[tt]=="x"&&new t.Rectangle(q,q,"black",null,null,k,null,null,null,!1).alp(v).addTo(_e),Ge=new t.Label({lineWidth:10,text:Ee[tt],backing:_e,font:c.font!=null?c.font:null,color:f,align:"center",valign:"center",style:!1}),Ge.pos(0,0,t.LEFT,t.TOP,ke).cache(),Ge.x=Ge.x+tt*(q+5),ne.push(Ge);Ue=U.localToLocal(0,0,d),ke.x=Ue.x+T,ke.y=Ue.y+U.height+15+B,ke.on("click",Ae);function Ae(Ze){ne.indexOf(Ze.target)==0?ue>0&&ue--:ne.indexOf(Ze.target)==1?ue<U.text.length&&ue++:he(),Ke()}d.stage&&d.stage.update()}function he(){if(!ke)return d;ke.dispose(),ke=null}function me(Ee){if(U){var _e,Ge;if(Ee==="del")U&&(U.text=[U.text.slice(0,ue-1),U.text.slice(ue)].join("")),ue--,ze();else{ce===z.shift&&(Ee=Ee.toUpperCase());var Ue=U.text;_e=U.clone().removeFrom(),_e.text=Ee,Ge=_e.label.getMeasuredWidth(),U.widthArray?U.widthArray.splice(ue,0,Ge):U.widthArray=[U.breedte],ue<U.text.length?U.text=[U.text.slice(0,ue),Ee,U.text.slice(ue)].join(""):U.text+=Ee,U&&U.label.getBounds().width<X?(ue++,Ke()):U.text=Ue}ce===z.shift&&!J&&(d.removeChild(Ie),te(),ce=z.def),Ke();var tt=new Fe.Event("keydown");tt.letter=Ee,d.dispatchEvent(tt),d.stage&&d.stage.update()}}function Te(Ee){if(d.stage){var _e,Ge=0,Ue=!1;U=Ee.target,U.widthArrayCheck||ze(),X=U.label.lineWidth?U.label.lineWidth:1e4,_e=U.globalToLocal(Ee.stageX/t.scaX,Ee.stageY/t.scaY),_e.x-=U.label.x,_e.y-=U.label.y;for(var tt=0;tt<U.widthArray.length;tt++)if(Ge+=U.widthArray[tt],_e.x<Ge-U.widthArray[tt]/2+U.label.getBounds().x){ue=tt,Ue=!0;break}Ue||(ue=U.text.length),Ke(),p&&!ke&&U.text.length>0&&He(),ke&&U&&(U.text.length>0?(_e=U.localToLocal(0,0,d),ke.x=_e.x+T,ke.y=_e.y+U.height+15+B):he())}}function ze(){if(U){var Ee=new t.Label("");U.widthArray=[];for(var _e=0;_e<U.text.length;_e++)Ee=U.clone().removeFrom(),Ee.text=U.text[_e],U.widthArray.push(Ee.label.getMeasuredWidth());Ee.text=U.text,U.widthArrayCheck=!0,Ke()}}function st(Ee){var _e=!0,Ge;function Ue(){(!U||U.text.length<1||d.currentIndex==0)&&(_e=!1),_e&&(tt(),Ge&&(Ge=t.timeout(200,Ue,null,"ms"))),U&&U.text.length<1&&Ae()}function tt(){U&&U.text.length>0?(d.selectedIndex>0&&me("del"),Ee?Ae():d.on("pressup",Ae)):me("del")}function Ae(){_e=!1,Ge&&Ge.clear(),d.off("pressup",Ae)}tt(),Ge=t.timeout(300,Ue,null,"ms"),d.stage&&d.stage.update()}function Ye(){for(var Ee=0;Ee<e.length;Ee++)e[Ee].clickEvent=e[Ee].on("click",Te)}Ye();function nt(){if(e.length>1)for(var Ee=0;Ee<e.length;Ee++)e[Ee].off("click",e[Ee].clickEvent)}function pe(){if(!xe&&(U=e[0],X=U&&U.label.lineWidth?U.label.lineWidth:1e4,U)){xe=new t.Rectangle(3,U.height-(U.paddingV&&U.background?U.paddingV*2:0),u,null,null,null,null,null,null,!1).center(U),xe.x=0,xe.visible=!1,xe.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var Ee=0;Ee<e.length;Ee++)e[Ee].widthArray=[0];ze()}}pe();function Je(){t.stopAnimate("knipperTekst"),U&&U.removeChild(xe),xe=null,U=null}Object.defineProperty(this,"selectedLabel",{get:function(){return U},set:function(Ee){var _e={target:Ee};Te(_e),d.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ue},set:function(Ee){ue=Ee,Ke()}}),this.show=function(Ee,_e){if(d.addTo(E),!n(Ee)){var Ge={target:e[Ee]};Te(Ge)}return xe&&(xe.visible=!0),d.toggled=!0,b?Qe():(!b||_e)&&(d.keys.vis(!0),be.vis(!0)),d.numPad&&d.numPad.parent&&d.numPad.top(),d},this.hide=function(){return d.removeFrom(E),Qe(!1),xe&&(xe.visible=!1),S.update(),d.toggled=!1,d},this.showNumPad=function(){Qe(!0),d.toggled=!0,xe&&(xe.visible=!0)},this.hideNumPad=function(){Qe(!1),(!d.keys.parent||!d.keys.visible)&&xe&&(xe.visible=!1,d.toggled=!1,he())},this.showKeyboard=function(){d.show(null,!0)},this.hideKeyboard=function(){!d.numPad||!d.numPad.parent?d.hide():(d.keys.vis(!1),be.vis(!1))},this.toggle=function(Ee){return Ee===!0?d.show():Ee===!1||d.parent?d.hide():d.show(),d},this.showPlace=function(){return He(),d},this.hidePlace=function(){return he(),d},this.addLabels=function(Ee){Array.isArray(Ee)||(Ee=[Ee]);for(var _e=Ee.length-1;_e>=0;_e--){var Ge=e.indexOf(Ee[_e]);Ge>=0||Ee[_e].type!="Label"?Ee.splice(_e,1):Ee[_e].widthArray=[0]}return nt(),e=e.concat(Ee),Ye(),pe(),xe&&(xe.visible=!0),d},this.removeLabels=function(Ee){Array.isArray(Ee)||(Ee=[Ee]),nt();for(var _e=0;_e<Ee.length;_e++){var Ge=e.indexOf(Ee[_e]);Ge>=0&&e.splice(Ge,1)}return Ye(),e.length==0?U&&Je():U&&e.indexOf(U)==-1&&(Je(),pe()),d};var be=new t.Rectangle(this.width,this.height,t.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();be.on("mousedown",function(){}),be.on("click",function(){}),b&&be.vis(!1),this.resize=function(){if(d.scaleTo(S,100-g*2/S.width*100,50-g*2/S.height*100),d.y=S.height-d.height-g,d.x=S.width/2-d.width/2,U&&ke){var Ee=U.localToLocal(0,0,d);ke.x=Ee.x,ke.y=Ee.y+U.height+15}return d.stage&&d.stage.update(),d},this.resize(),d.selectedLabel&&(d.selectedIndex=d.selectedLabel.text.length),P&&(this.keydownEvent=function(Ee){if(d.stage){var _e=d;n(_e)||(Ee.keyCode==35&&(_e.selectedIndex=_e.selectedLabel.text.length),Ee.keyCode==36&&(_e.selectedIndex=0),Ee.keyCode==37&&(_e.selectedIndex=_e.selectedIndex-1),Ee.keyCode==39&&(_e.selectedIndex=_e.selectedIndex+1),Ee.keyCode==46&&_e.selectedIndex<_e.selectedLabel.text.length&&(_e.selectedIndex=_e.selectedIndex+1,_e.removeChar()),Ee.keyCode==8&&(Ee.preventDefault(),_e.removeChar()),_e.addChar(Ee.key),d.stage&&d.stage.update())}},j.addEventListener("keydown",this.keydownEvent)),$!==!1&&t.styleTransforms(this,c),this.clone=function(){var Ee=new t.Keyboard(e,r,i,l,a,s,u,v,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,this.group,re);return d.cloneProps(Ee)},this.dispose=function(Ee,_e,Ge){be.removeAllEventListeners(),be=null,d.keydownEvent&&j.removeEventListener("keydown",d.keydownEvent);for(var Ue=0;Ue<d.labels.length;Ue++)d.labels[Ue].removeAllEventListeners();return d.numPad&&d.numPad.dispose(),xe&&xe.dispose(),d.labels=U=null,S&&S.off("pressmousemove",d.tickerMouseEvent),Ge||d.zimContainer_dispose(!0),!0}},t.extend(t.Keyboard,t.Container,["clone","dispose"],"zimContainer",!1),t.Organizer=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_){var V="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",b;if(b=at(t.Organizer,arguments,V,this))return b;De("67.3"),this.group=Y;var Z=P===!1?{}:t.getStyle("Organizer",this.group,_);if(n(e)&&(e=Z.width!=null?Z.width:r&&r.vertical?r.width:300),n(i)&&(i=Z.useAdd!=null?Z.useAdd:!0),n(l)&&(l=Z.useRemove!=null?Z.useRemove:!0),n(a)&&(a=Z.usePosition!=null?Z.usePosition:!0),n(s)&&(s=Z.autoAdd!=null?Z.autoAdd:i),n(f)&&(f=Z.autoRemove!=null?Z.autoRemove:l),n(u)&&(u=Z.autoPosition!=null?Z.autoPosition:a),n(v)&&(v=Z.addForward!=null?Z.addForward:!0),n(C)&&(C=Z.removeForward!=null?Z.removeForward:!0),n(h)&&(h=Z.backgroundColor!=null?Z.backgroundColor:t.tin),n(g)&&(g=Z.rollBackgroundColor!=null?Z.rollBackgroundColor:t.grey),n(k)&&(k=Z.selectedBackgroundColor!=null?Z.selectedBackgroundColor:t.dark),n(x)&&(x=Z.color!=null?Z.color:t.white),n(I)&&(I=Z.rollColor!=null?Z.rollColor:x),n(w)&&(w=Z.selectedColor!=null?Z.selectedColor:x),n(E)&&(E=Z.selectedRollColor!=null?Z.selectedRollColor:x),n(A)&&(A=Z.spacing!=null?Z.spacing:1),n(p)&&(p=Z.corner!=null?Z.corner:0),n(B)&&(B=Z.gradient!=null?Z.gradient:.2),n(F)&&(F=Z.gloss!=null?Z.gloss:null),n(D)&&(D=Z.backdropColor!=null?Z.backdropColor:null),Array.isArray(p)||(p=[p,p,p,p]),!(!i&&!a&&!l)){var $=(i?1:0)+(a?4:0)+(l?1:0),Q=(e+A)/$,re={width:Q,height:Q,label:"",shadowColor:-1,gradient:B,corner:p,backgroundColor:h,rollBackgroundColor:g},G=[],L=new t.Shape;if(L.graphics.f(x).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),i&&G.push(new t.Button({icon:L.sca(.55).rot(-45).reg(1),inherit:re})),a){var c=new t.Shape;c.graphics.f(x).p("AiJieIETCeIkTCfg"),G.push(new t.Button({icon:c.sca(.6).rot(r&&!r.vertical?180:-90).reg(-2),inherit:re})),G.push(new t.Button({icon:c.clone().sca(.6).rot(r&&!r.vertical?0:90).reg(-2),inherit:re}));var d=new t.Shape;d.graphics.f(x).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),G.push(new t.Button({icon:d.sca(.62).rot(r&&!r.vertical?0:90).reg(0),inherit:re})),G.push(new t.Button({icon:d.clone().sca(.62).rot(r&&!r.vertical?180:-90).reg(0),inherit:re}))}l&&G.push(new t.Button({icon:L.clone().rot(0).sca(.55),inherit:re})),G.length==0&&(G=[""]),this.zimTabs_constructor(e,Q,G,h,g,null,k,y,x,I,null,w,E,!1,A,!0,!1,p,null,!0,B,F,null,null,null,null,null,null,null,null,null,null,D);var o=this;o.list=r,o.type="Organizer",o.setButtons=function(){if(a){var m=i?1:0;G[m+0]&&(G[m+0].icon.rotation=o.list&&!o.list.vertical?180:-90),G[m+1]&&(G[m+1].icon.rotation=o.list&&!o.list.vertical?0:90),G[m+2]&&(G[m+2].icon.rotation=o.list&&!o.list.vertical?0:90),G[m+3]&&(G[m+3].icon.rotation=o.list&&!o.list.vertical?180:-90)}};var S=!1,X=r;o.change(function(m){(!S&&o.list||o.list&&o.list!=X)&&(o.list!=X&&X&&X.noChange(),o.list.change(function(){o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex}),S=!0,X=o.list);var O=m.target.selectedIndex;i||O++,!a&&(!i||O>0)&&(O=5);var de=n(o.list.selectedIndex)||o.list.selectedIndex<0;de&&(o.currentValue=null),o.lastIndex=o.list.selectedIndex;var R;switch(O){case 0:s&&(R=Math.max(0,o.list.selectedIndex),o.add(R)),o.orgType="add";break;case 1:if(de)break;u&&(R=o.list.selectedIndex,o.up(R)),o.orgType="up";break;case 2:if(de)break;u&&(R=o.list.selectedIndex,o.down(R)),o.orgType="down";break;case 3:if(de)break;u&&(R=o.list.selectedIndex,o.toTop(R)),o.orgType="top";break;case 4:if(de)break;u&&(R=o.list.selectedIndex,o.toBottom(R)),o.orgType="bottom";break;case 5:if(de)break;f&&(R=o.list.selectedIndex,o.remove(R)),o.orgType="remove";break}}),this.add=function(m,O,de){return n(m)&&(m=o.lastIndex),n(O)&&(O=""),v?m=Math.min(o.list.length,Math.max(0,o.list.selectedIndex)+1):m=Math.max(0,o.list.selectedIndex),o.list.addAt(O,m,de),o.list.selectedIndexPlusPosition=m,o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex,o},this.up=function(m){n(m)&&(m=o.lastIndex);var O=o.list.items[m];return n(O)||(o.list.removeAt(1,m),o.list.addAt(O,m-1),o.list.selectedIndexPlusPosition=Math.max(0,m-1),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex),o},this.down=function(m){n(m)&&(m=o.lastIndex);var O=o.list.items[m];return n(O)||(o.list.removeAt(1,m),o.list.addAt(O,m+1),o.list.selectedIndexPlusPosition=Math.min(o.list.length-1,m+1),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex),o},this.toTop=function(m){n(m)&&(m=o.lastIndex);var O=o.list.items[m];return n(O)||(o.list.removeAt(1,m),o.list.addAt(O,0),o.list.first(),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex),o},this.toBottom=function(m){n(m)&&(m=o.lastIndex);var O=o.list.items[m];if(!n(O))return o.list.removeAt(1,m),o.list.addAt(O,o.list.length),o.list.last(),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex,o},this.remove=function(m){if(n(m))if(o.list.selectedIndex>=0)m=o.list.selectedIndex;else return o;var O=m==o.list.selectedIndex;return o.removedItem=o.list.items[m],o.list.removeAt(1,m),O?C||(m=Math.max(0,m-1)):m=o.list.selectedIndex,o.list.selectedIndexPlusPosition=Math.min(o.list.length-1,m),o.orgItem=o.list.selected,o.orgIndex=o.list.selectedIndex,o},P!==!1&&t.styleTransforms(this,Z),this.clone=function(){return o.cloneProps(new t.Organizer(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,o.group,_))},this.dispose=function(m,O,de){return G=null,de||o.zimTabs_dispose(!0),!0}}},t.extend(t.Organizer,t.Tabs,["clone","dispose"],"zimTabs",!1),t.Connectors=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d){var o="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",S;if(S=at(t.Connectors,arguments,o,this))return S;De("67.39"),this.group=c;var X=L===!1?{}:t.getStyle("Connectors",this.group,d);n(e)&&(e=X.width!=null?X.width:null),n(r)&&(r=X.height!=null?X.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",n(i)&&(i=X.points!=null?X.points:[[0,0],[100,0],[100,100],[0,100]]),n(l)&&(l=X.node!=null?X.node:new t.Circle(10,t.grey,t.grey)),l.removeFrom(),l.color==t.clear&&!l.hitArea&&l.expand(0),n(a)&&(a=X.line!=null?X.line:new t.Line({length:10,thickness:3,color:t.tin,strokeObj:{caps:"round"}})),n(v)&&(v=X.num!=null?X.num:10),n(s)&&(s=X.linear!=null?X.linear:!1),n(f)&&(f=X.linearWrap!=null?X.linearWrap:!0),n(D)&&(D=X.nodeRollColor!=null?X.nodeRollColor:l.color.match("rgb")?l.color:l.color.lighten(.2)),n(P)&&(P=X.nodeRollBorderColor!=null?X.nodeRollBorderColor:l.borderColor),n(Y)&&(Y=X.nodeSelectedColor!=null?X.nodeSelectedColor:t.white),n(_)&&(_=X.nodeSelectedBorderColor!=null?X.nodeSelectedBorderColor:l.borderColor),n(V)&&(V=X.baseColor!=null?X.baseColor:l.color),n(b)&&(b=X.baseBorderColor!=null?X.baseBorderColor:l.borderColor),n(Z)&&(Z=X.baseRollover!=null?X.baseRollover:!1),n(p)&&(p=X.min!=null?X.min:l.radius?l.radius*2:Math.min(l.width,l.height)),n(T)&&(T=X.max!=null?X.max:null),n(F)&&(F=X.expand!=null?X.expand:t.mobile()?10:0),n(g)&&(g=X.dropType!=null?X.dropType:"any"),n(k)&&(k=X.dropArray!=null?X.dropArray:null),n(y)&&(y=X.continuous!=null?X.continuous:!1),n(x)&&(x=X.startIndex!=null?X.startIndex:null),n(I)&&(I=X.duplicateLine!=null?X.duplicateLine:!0),n(w)&&(w=X.deleteNode!=null?X.deleteNode:!0),n(E)&&(E=X.dblclick!=null?X.dblclick:!0),n(A)&&(A=X.fullMove!=null?X.fullMove:!0),n(re)&&(re=X.dblclickTime!=null?X.dblclickTime:.5);var m=mt(re);if(re*=m=="s"?1e3:1,n(C)&&(C=X.snapH!=null?X.snapH:null),n(h)&&(h=X.snapV!=null?X.snapV:null),n($)&&($=X.rootLock!=null?X.rootLock:!1),n(Q)&&(Q=X.grandChildren!=null?X.grandChildren:!0),n(G)&&(G=X.steps!=null?X.steps:null),s&&i.length<=1){ht&&je("Connector() - linear needs more than one point");return}var O=this,de=0;O.node=l,O.line=a;var R=[],N=l.color,se=l.borderColor,ie=O.lines=new t.Container(e,r).addTo(O),q=O.nodes=new t.Container(e,r).addTo(O);if(i.type=="Blob"||i.type=="Squiggle"){var z=[];t.loop(i.points,function(Be){z.push([Be[0],Be[1]])}),i=z}O.points=i,this.addNode=function(Be,Ke,He){if(!s)return ce(Be,Ke,He)};function ce(Be,Ke,He,he){if(Be.addChild){g="on",$=!0,Q=!1,He=Be,He.connectorMoveEvent||(O.bases||(O.bases=[]),O.bases.push(He),He.connectorMoveEvent=He.on("pressmove",function(){He.positionConnectors(He,!0,!0)}),He.connectorUpEvent=He.on("pressup",function(){He.positionConnectors(He,!0,!0)}),Z&&(He.connectorOverEvent=He.on("mouseover",function(){Me(He)}),He.connectorOutEvent=He.on("mouseout",function(){ae(He)})),He.positionConnectors=function(st,Ye,nt){t.loop(st.connectors,function(pe){var Je=st.parent.localToLocal(st.x-st.baseStart.x+pe.nodeStart.x,st.y-st.baseStart.y+pe.nodeStart.y,pe.parent);pe.x=Je.x,pe.y=Je.y,Xe(pe,Ye,nt)}),st.stage&&st.stage.update()},He.setConnectorColors=function(st,Ye,nt,pe){return n(st)||(He.connectorColor=st),n(Ye)||(He.connectorBorderColor=Ye),n(nt)||(He.connectorRollColor=nt),n(pe)||(He.connectorRollBorderColor=pe),t.loop(He.connectors,function(Je){n(st)||(Je.color=st),n(Ye)||(Je.borderColor=Ye)}),He},He.setConnectorColors(V,b,D,P));var me=He.getBounds();a.endHead,Array.isArray(Ke)||(Ke=[Ke,Ke]);var Te=[];return Ke.length==2&&(Ke=[Ke[0],Ke[1],Ke[0],Ke[1]]),(a.lineOrientation==t.HORIZONTAL||a.lineOrientation=="auto")&&t.loop([Ke[0],Ke[1]],function(st,Ye){if(st==-1||st==-2){var nt=He.localToLocal(Ye==0?me.x:me.x+me.width,me.y,O);Te.push([nt.x,nt.y,t.HORIZONTAL])}if(st==-1||st==-3){var pe=He.localToLocal(Ye==0?me.x:me.x+me.width,me.y+me.height,O);Te.push([pe.x,pe.y,t.HORIZONTAL])}st>0&&t.loop(st,function(Je,be){var Ee=He.localToLocal(Ye==0?me.x:me.x+me.width,me.y+me.height*(Je+1)/(be+1),O);Te.push([Ee.x,Ee.y,t.HORIZONTAL])})}),(a.lineOrientation==t.VERTICAL||a.lineOrientation=="auto")&&t.loop([Ke[2],Ke[3]],function(st,Ye){if(st==-1||st==-2){var nt=He.localToLocal(me.x,Ye==0?me.y:me.y+me.height,O);Te.push([nt.x,nt.y,t.VERTICAL])}if(st==-1||st==-3){var pe=He.localToLocal(me.x+me.width,Ye==0?me.y:me.y+me.height,O);Te.push([pe.x,pe.y,t.VERTICAL])}st>0&&t.loop(st,function(Je,be){var Ee=He.localToLocal(me.x+me.width*(Je+1)/(be+1),Ye==0?me.y:me.y+me.height,O);Te.push([Ee.x,Ee.y,t.VERTICAL])})}),He.connectors=[],He.baseStart=new t.Point(He.x,He.y),t.loop(Te,function(st){var Ye=ce(st[0],st[1],He,st[2]);Se(He,Ye)}),setTimeout(function(){He.positionConnectors(He,!0,!0)},50),O}var ze=l.clone().loc(Be,Ke,q).drag({boundary:B}).expand(F);return ze.orientation=he,ze.nodeColor=ze.color,ze.on("mouseover",xe),ze.on("mouseout",J),ze.on("mousedown",ve),ze.on("pressmove",we),ze.on("pressup",ee),w&&ze.hold(K),ze.nodeNum=de++,ze.creations=[],ze}function Ie(){t.loop(i,function(Be,Ke){var He=ce(Be[0],Be[1]);He.dropIndex=Ke,k&&(He.dropArray=k[Ke])}),s&&q.loop(function(Be,Ke,He){Ke==0?(f?Be.before=q.getChildAt(He-1):Be.before=null,Be.after=q.getChildAt(Ke+1)):Ke==He-1?(f?Be.after=q.getChildAt(0):Be.after=null,Be.before=q.getChildAt(Ke-1)):(Be.before=q.getChildAt(Ke-1),Be.after=q.getChildAt(Ke+1)),u&&Ke>0&&Be.noMouse()})}Ie(),O.setAvailableIndexes=function(Be){return Array.isArray(Be)||(Be=[Be]),O.nodes.loop(function(Ke,He){Be.indexOf(He)==-1?Ke.noMouse():Ke.mouse()}),O},n(x)||O.setAvailableIndexes(x),O.keyEvent=function(Be){w&&Be.keyCode==46&&(t.loop(fe,function(Ke){Ke&&Ke.parent&&Qe(Ke)}),O.stage&&O.stage.update())},j.addEventListener("keydown",O.keyEvent);function K(Be){var Ke=Be.target.stage,He=Be.target;O.bases||$&&!He.creator.creator||(He.adding?Qe(He.creator):Qe(He),O.stage&&O.stage.update())}function xe(Be){var Ke=Be.target;Ke.selected||(Ke.color=Ke.base?Ke.base.connectorRollColor:D,Ke.borderColor=Ke.base?Ke.base.connectorRollBorderColor:P,O.stage&&O.stage.update())}function J(Be){var Ke=Be.target;Ke.selected||(Ke.color=Ke.base?Ke.base.connectorColor:Ke.nodeColor,Ke.borderColor=Ke.base?Ke.base.connectorBorderColor:se,O.stage&&O.stage.update())}var fe=[],U,ue=0,ke,ne;function ve(Be,Ke,He,he){var me=Be.target;if(!n(me)&&(He&&(me.selected=!0,fe=[],O.selectNode(me,!he)),ne=me.nodeNum,!s&&(!$||me.creator)&&E&&!Ke&&(ue==0&&(ke=setTimeout(function(){if(ue=0,fe){var Ye=O.stage?O.stage.frame:j.zdf,nt=q.loop(function(pe){if(pe.hitTestPoint(Ye.mouseX,Ye.mouseY)&&pe.selected)return!1});nt&&Re()}},re)),ue++),me.startX=me.x,me.startY=me.y,!s&&fe.length>0&&t.loop(fe,function(Ye){Ye.startX=Ye.x,Ye.startY=Ye.y}),!(me.creations.length>=v||me.selected||me.creator&&!Q))){me.adding=!0;var Te=ce(me.x,me.y).bot();Te.creations=me.creations,Te.creatorLine=me.creatorLine,Te.creator=me.creator,Te.orientation=me.orientation,Te.startX=me.startX,Te.startY=me.startY,Te.dropIndex=me.dropIndex,Te.dropArray=me.dropArray,Te.lineArray=me.lineArray,Te.color=Te.nodeColor=me.nodeColor;var ze=Te.nodeNum;if(Te.nodeNum=me.nodeNum,me.nodeNum=ze,me.base&&(Te.base=me.base,Te.baseStart=me.baseStart,Te.nodeStart=me.nodeStart,Te.connectors=me.connectors,me.base=me.baseStart=me.nodeStart=me.connectors=null,Te.base.connectors&&Te.base.connectors.splice(Te.base.connectors.indexOf(me),1,Te),Te.color=Te.base.connectorColor,Te.borderColor=Te.base.connectorBorderColor),Te.before=me.before,Te.after=me.after,Te.before&&(Te.before.after=Te),Te.after&&(Te.after.before=Te),Te.creator){var st=Te.creator.creations.indexOf(me);st!=-1&&Te.creator.creations.splice(st,1,Te)}t.loop(Te.creations,function(Ye){Ye.creator=Te}),me.creator=Te,me.creatorLine=a.clone().setPoints(me.x,me.y,me.x,me.y).addTo(ie).alp(0),me.creatorLine.lineOrientation=me.orientation,me.creatorLine.node=me,me.creatorLine.creatorNode=Te,me.creations=[],me.veeObj&&!n(me.veeObj.color)?me.color=t.Pick.choose(me.veeObj.color):me.color=Te.color,me.nodeColor=me.color,Te.creations.push(me),O.latestNode=me}}function we(Be,Ke,He,he){var me=Be.target;me.creatorLine&&me.creatorLine.alp(1),!s&&fe.length>0&&fe.indexOf(me)==-1&&Re(),Xe(me,!1,!0),O.bases&&t.loop(O.bases,function(Te){me.creator&&me.creator.base==Te||(!Te.connectorsOn&&me.hitTestBounds(Te)&&Me(Te),Te.connectorsOn&&!me.hitTestBounds(Te)&&ae(Te))}),O.stage&&O.stage.update()}function ee(Be,Ke,He,he){var me=Be.target;O.bases&&t.loop(O.bases,function(Ue){Ue!=me.base&&Ue.connectorsOn&&ae(Ue)});var Te=!1;if(!s&&ue>1&&!Ke){clearTimeout(ke);var ze=me.adding?me.creator:me;if(me.adding&&Qe(ze.creations[ze.creations.length-1],!0),!ze.selected){var st=O.stage?O.stage.frame:j.zdf;te(ze,!st.ctrlKey)}ue=0,Te=!0}if(!s&&!O.base&&(C&&(me.x=Math.round(me.x/C)*C),h&&(me.y=Math.round(me.y/h)*h)),p&&t.dist(me.x,me.y,me.startX,me.startY)<p||T&&t.dist(me.x,me.y,me.startX,me.startY)>T){me.adding?Qe(me,!0):(me.loc(me.startX,me.startY),Te||Xe(me)),O.stage&&O.stage.update(),O.lastNode=null,O.targetNode=null,O.dispatchEvent("noconnection");return}var Ye=!1,nt=!1;if(s){var pe=me.creator;if(O.connectionStart=pe,O.connectionEnd=me,pe.before&&me.hitTestCircle(pe.before)&&!u)me.loc(pe.before).removeFrom(),pe.before.after=null,pe.before.before||pe.before.noMouse(),pe.before=null,pe.after||pe.noMouse(),nt=!0,Ye=Oe();else if(pe.after&&me.hitTestCircle(pe.after))me.loc(pe.after).removeFrom(),pe.after.before=null,pe.after.after||pe.after.noMouse(),u&&pe.after.mouse(),pe.after=null,pe.before||pe.noMouse(),u&&pe.noMouse(),nt=!0,Ye=Oe();else if(!pe||me.creations.length>0)me.loc(me.startX,me.startY).bot();else{Qe(me,!0),O.stage&&O.stage.update(),O.lastNode=null,O.targetNode=null,O.dispatchEvent("noconnection");return}}else if(g=="off"){var Je=q.loop(function(Ue){if(me!=Ue&&me.hitTestCircles(Ue)){me.adding?Qe(me,!0):(me.loc(me.startX,me.startY),Xe(me)),$&&Ce(me),!A&&me.creator&&v>0&&me.creator.creations.length>=v&&me.creator.noMouse(),O.targetNode=Ue,y&&O.nodes.loop(function(tt){tt!=O.latestNode&&tt.noMouse()}),y&&O.nodes.loop(function(tt){tt!=O.latestNode&&tt.noMouse()}),le(),O.dispatchEvent("connection"),O.stage&&O.stage.update();return}});if(!Je){oe(me);return}}else if(g=="on"||g=="single"){var be=0,Ee,_e=q.loop(function(Ue){if(me!=Ue&&me.hitTestCircles(Ue)){if(Ee=Ue,O.bases&&(me.orientation!=Ue.orientation||me.creator&&me.creator.base&&me.creator.base==Ue.base)||me.dropArray&&me.dropArray.indexOf(Ue.dropIndex)==-1||!I&&me.lineArray&&me.lineArray.indexOf(Ue.dropIndex)!=-1)return;if(g=="on")return!1;be++,be+=Ue.creations.length}});if(_e&&!(g=="single"&&be==1)){oe(me);return}else{if(me.loc(Ee),me.creator&&me.orientation==t.VERTICAL&&Math.round(me.y)==Math.round(me.creator.startY)||me.creator&&me.orientation==t.HORIZONTAL&&Math.round(me.x)==Math.round(me.creator.startX))return;O.targetNode=Ee;var Ge=me.dropIndex;me.dropIndex=Ee.dropIndex,me.dropArray=t.copy(Ee.dropArray),Ee.lineArray?Ee.lineArray.push(Ge):Ee.lineArray=[Ge],me.lineArray=t.copy(Ee.lineArray),me.creator&&(me.creator.lineArray||(me.creator.lineArray=[]),me.creator.lineArray.push(me.dropIndex)),Ee.base&&Ee.base.connectors&&Se(Ee.base,me),nt=!0}}else me.selected||(nt=!0);!A&&me.creator&&v>0&&me.creator.creations.length>=v&&me.creator.noMouse(),me.adding=!1,Xe(me,!0,!0),t.loop(fe,function(Ue){if(fe.indexOf(Ue.creator)==-1){var tt=t.loop(Ue.creations,function(Ae){if(fe.indexOf(Ae)>=0)return!1});le(Ue.nodeNum,null,t.decimals(Ue.x,2),t.decimals(Ue.y,2),tt||tt===void 0?1:0)}Ue.startX=Ue.x,Ue.startY=Ue.y}),me.startX=me.x,me.startY=me.y,$&&Ce(me),nt?(y&&O.nodes.loop(function(Ue){Ue!=O.latestNode&&Ue.noMouse()}),le(),O.dispatchEvent("connection"),t.arraysEqual(me.dropArray,me.lineArray,!1)&&O.dispatchEvent("blocked")):O.dispatchEvent("noconnection"),Ye&&O.dispatchEvent("complete"),O.stage&&O.stage.update()}function le(Be,Ke,He,he,me){Ke?R.push([Be,null,null,1]):n(He)?R.push([ne,t.decimals(O.latestNode.x,2),t.decimals(O.latestNode.y,2)]):R.push([Be,null,null,null,He,he,me])}O.makeConnection=function(Be,Ke,He,he,me){var Te=O.stage?O.stage.frame:j.zdf;return he?(Te.ctrlKey=me==1,ve({target:Be},!0,!0,me),Be.loc(Ke,He),we({target:Be},!0,!0,me),ee({target:Be},!0,!0,me)):(ve({target:Be},!0,!1,null),O.latestNode.loc(Ke,He),we({target:O.latestNode},!0,!1,null),ee({target:O.latestNode},!0,!1,null)),Te.ctrlKey=!1,O.latestNode};function ye(Be){var Ke=O.nodes.loop(function(He){if(He.nodeNum==Be)return He});if(Ke.type)return Ke}O.setSteps=function(Be){return t.loop(Be,function(Ke){var He=ye(Ke[0]);He&&(Ke[3]?He&&Qe(He):n(Ke[4])?O.makeConnection(He,Ke[1],Ke[2]):(O.makeConnection(He,Ke[4],Ke[5],!0,Ke[6]),Re()))}),O},O.applySteps=O.setSteps,O.getSteps=function(Be){return Be&&(O.stage||(O.stage=zdf.stage),O.pane||(O.pane=new t.Pane({displayClose:!1,container:O.stage,width:Math.min(500,O.stage.width-20),height:Math.min(500,O.stage.height-20),draggable:!0}),O.textArea=new t.TextArea(Math.min(400,O.stage.width-70),Math.min(400,O.stage.height-70)).centerReg(O.pane)),O.pane.show(),O.textArea.text=JSON.stringify(R)),R},Object.defineProperty(this,"steps",{get:function(){return R},set:function(Be){O.setSteps(Be)}});function oe(Be){Be.adding||!Q?Qe(Be,!0):(Be.loc(Be.startX,Be.startY),Xe(Be)),$&&Ce(Be),Be.base&&Be.base.connectors&&Le(Be.base,Be),O.lastNode=null,O.targetNode=null,O.dispatchEvent("noconnection"),O.stage&&O.stage.update()}function Me(Be){t.loop(Be.connectors,function(Ke){Ke.color=Be.connectorRollColor,Ke.borderColor=Be.connectorRollBorderColor}),Be.connectorsOn=!0,Be.stage&&Be.stage.update()}function ae(Be){t.loop(Be.connectors,function(Ke){Ke.color=Be.connectorColor,Ke.borderColor=Be.connectorBorderColor}),Be.connectorsOn=!1,Be.stage&&Be.stage.update()}function Se(Be,Ke){Be.connectors.push(Ke),Ke.nodeStart=Ke.parent.localToLocal(Ke.x,Ke.y,Be.parent),Ke.nodeStart.x-=Be.x-Be.baseStart.x,Ke.nodeStart.y-=Be.y-Be.baseStart.y,Ke.base=Be}function Le(Be,Ke){Be.connectors.splice(Be.connectors.indexOf(Ke),1),Ke.nodeStart=null,Ke.base=null}function Ce(Be){if(Be.creator){if(Be.creator.creator){Ce(Be.creator);return}Be.creator&&Be.creator.creations.length>=v?Be.creator.noMouse():Be.creator.mouse()}}function te(Be,Ke){Ke&&t.loop(Be.creations,function(He){te(He,Ke)}),Be.selected=!0,Be.color=Be.base?Be.base.connectorColor:Y,Be.borderColor=Be.base?Be.base.connectorBorderColor:_,fe.push(Be),Be.top(),U||(U=O.stage.on("stagemousedown",function(){var He=O.stage?O.stage.frame:j.zdf,he=q.loop(function(me){if(me.hitTestPoint(He.mouseX,He.mouseY))return!1});he&&Re()}))}this.selectNode=function(Be,Ke){te(Be,Ke)};function Oe(){var Be=q.loop(function(Ke){if(Ke.before||Ke.after)return!1});if(Be)return q.loop(function(Ke){Ke.noMouse()}),!0}function Re(){t.loop(fe,function(Be){Be.selected=!1,Be.color=Be.base?Be.base.connectorColor:Be.nodeColor,Be.borderColor=Be.base?Be.base.connectorBorderColor:se}),fe=[],O.stage.off("stagemousedown",U),U=null,O.stage&&O.stage.update()}function Xe(Be,Ke,He){var he=fe.length>0?fe:[Be];t.loop(he,function(me){me!=Be&&me.loc(me.startX+Be.x-Be.startX,me.startY+Be.y-Be.startY),me.creator&&me.creatorLine.setPoints(me.x,me.y,me.creator.x,me.creator.y,Ke,He),t.loop(me.creations,function(Te){Te.creatorLine.setPoints(Te.x,Te.y,Te.creator.x,Te.creator.y,Ke,He)})})}function Qe(Be,Ke){if(t.loop(Be.creations,function(he){Qe(he)},!0),Be.creatorLine){Be.creatorLine.removeFrom();var He=Be.creator.creations.indexOf(Be);He!=-1&&Be.creator.creations.splice(He,1),!Be.creator.mouseEnabled&&!($&&!Be.creator.creator)&&Be.creator.mouse()}return Be.removeFrom(),Be.removeAllEventListeners(),Ke?de--:le(Be.nodeNum,1),Be=null,O}this.removeNode=function(Be){Qe(Be)},this.removeConnectors=function(){t.loop(q,function(Be){Qe(Be)},!0),Ie(),O.stage&&O.stage.update()},this.removeBase=function(Be){t.loop(Be.connectors,function(Ke){Qe(Ke)}),it(Be)},this.addBase=function(Be,Ke){ce(Be,Ke)};function it(Be){Be.off("pressmove",Be.connectorMoveEvent),Be.off("pressup",Be.connectorUpEvent),Be.connectorOverEvent&&Be.off("mouseover",Be.connectorOverEvent),Be.connectorOutEvent&&Be.off("mouseout",Be.connectorOutEvent),Be.connectors=null,Be.baseStart=null,Be.positionConnectors=Be.setConnectorColors=null,Be.connectorColor=Be.connectorBorderColor=Be.connectorRollColor=Be.connectorRollBorderColor=null,O.bases.splice(O.bases.indexOf(Be),1),O.stage&&O.stage.update()}G&&O.added(function(){O.setSteps(G),O.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return fe},set:function(){ht&&je("Selectors() - selectedList is read only")}}),this.dispose=function(Be,Ke,He){return O.nodes.loop(function(he){he.removeFrom(),he.removeAllEventListeners(),he=null},!0),O.lines.loop(function(he){he.removeFrom(),he=null},!0),j.removeEventListener("keydown",O.keyEvent),O.keyEvent=null,O.bases&&t.loop(O.bases,function(he){it(he)}),He||(O.zimContainer_dispose(!0),O.stage&&O.stage.update()),!0},L!==!1&&t.styleTransforms(this,X),this.clone=function(){return O.cloneProps(new t.Connectors(e,r,i,l,a,s,f,u,v,C,h,g,t.copy(k),y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,O.group,d))}},t.extend(t.Connectors,t.Container,["clone","dispose"],"zimContainer",!1),t.Marquee=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w){var E="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",A;if(A=at(t.Marquee,arguments,E,this))return A;De("67.4"),this.group=I;var p=x===!1?{}:t.getStyle("Marquee",this.group,w),T=this;n(e)&&(e=p.width!=null?p.width:300),n(r)&&(r=p.height!=null?p.height:100);var B=mt(l);n(l)&&(l=p.time!=null?p.time:B=="s"?5:5e3),n(a)&&(a=p.transition!=null?p.transition:"slide"),n(h)&&(h=p.borderColor!=null?p.borderColor:t.dark),n(g)&&(g=p.borderWidth!=null?p.borderWidth:1),h<0||g<0?h=g=null:h!=null&&g==null&&(g=1),n(u)&&(u=p.marginLeft!=null?p.marginLeft:25),n(v)&&(v=p.marginRight!=null?p.marginRight:25),n(s)&&(s=p.speed!=null?p.speed:B=="s"?.5:500),Mt(s,B),n(f)&&(f=p.direction!=null?p.direction:"right"),n(k)&&(k=p.refresh!=null?p.refresh:B=="s"?30*60:30*60*1e3),n(y)&&(y=p.mix!=null?p.mix:!0),this.zimContainer_constructor(e+u+v,r,null,null,!1),this.type="Marquee",this.speed=s;var F=new t.Rectangle(e-1,r-1,t.clear).addTo(T).mov(u+.5,.5),D=this.content=new t.Container(e,r).loc(u,0,T).setMask(F),P=this.pages=new t.Pages(null,a,s,null,D).addTo(D),Y=!1;this.add=function(m,O,de,R,N){n(N)&&(N=!0),m.scaleTo(D,100,100),O&&m.cur().on("click",function(){nr(O,de)}),P.addPage(m),N&&P.center(),m.marqueeViews=0,m.marquee=T,Y||_(),R||L(),X&&X.top()},this.remove=function(m){if(T.selected==m){if(T.pages.pages.length==1)return;var O=T.selectedIndex+1;O==T.pages.pages.length&&(O=0),T.pages.go(O,null,null,0),setTimeout(function(){T.pages.removePage(m),m.dispose&&m.dispose(),L()},20)}else T.pages.removePage(m),m.dispose&&m.dispose(),L()};function _(){Y=!0,T.selectedIndex=0,T.selected=P.pages[T.selectedIndex].page,T.lastSelected=null,T.selected.marqueeOn&&T.selected.marqueeOn(),T.interval=t.interval(l,function(){T.go()})}if(!n(i)&&!Array.isArray(i)&&(i=[i]),i&&i.length>0&&(y&&t.shuffle(i),t.loop(i,function(m){T.add(m,null,null,!0)})),k>0)var V=t.timeout(k*(B=="s"?1e3:1),function(){location.reload()},null,"ms");T.go=function(m){if(T.selected.marqueeViews+=1,T.selected.marqueeOff&&T.selected.marqueeOff(),m)T.selected=m,t.loop(P.pages,function(de,R){if(de.page==m){T.selectedIndex=R;return}}),T.interval.interval=T.selected.marqueeTime?T.selected.marqueeTime:l,T.interval.pause(re.toggled,null,!0);else{var O=T.selectedIndex+1;T.selectedIndex=O%P.pages.length,T.selected=P.pages[T.selectedIndex].page,T.interval.time=T.selected.marqueeTime?T.selected.marqueeTime:l}T.dispatchEvent("page"),T.selected.marqueeOn&&T.selected.marqueeOn(),P.go(T.selected,f,a,s)},P.on("pagetransitioned",function(){T.dispatchEvent("pagetransitioned"),T.indicator&&(T.indicator.selectedIndex=T.selectedIndex)});var b=!1,Z=T.left=new t.Container(u-4,r-4),$=new t.Shape().sca(.6);$.graphics.f(t.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var Q=new t.Shape().sca(.6).reg(-2,0);Q.graphics.f(t.light).mt(0,0).p("AiJieIETCeIkTCfg");var re=T.button=new t.Button({label:"",icon:$,toggleIcon:Q,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(Z,100).pos(0,0,!1,!0,Z);re.on("click",function(){T.interval&&T.interval.pause(re.toggled),b=re.toggled,T.stage.update()});var G;function L(){if(!(n(u)||u==0)){var m=4*u/25;Z.pos(u-Z.width-m,m/2,!1,!0,T),T.indicator&&(T.indicator.dispose(),T.indicator.removeFrom()),G||(G=new t.Proportion(8,16,Z.width+m,Z.width/2+m,-1)),T.indicator=new t.Indicator({width:(P.pages.length<=2?P.pages.length:P.pages.length-1)*(Z.width-3),height:G.convert(P.pages.length),num:P.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:C}),T.indicator.fit(0,0,r-re.height,re.width),T.indicator.rot(f=="down"?-90:90).center(Z).pos(null,Z.width-m/2,null,!0),T.indicator.selectedIndex=T.selectedIndex,T.indicator.on("change",function(){T.go(P.pages[T.indicator.selectedIndex].page)})}}if(L(),!n(v)&&v>0&&j.zdf&&j.zdf){var c=4*v/25,d=T.right=new t.Container(45,270),o=T.icon=j.zdf.makeIcon(t.grey,t.lighter,t.silver).sca(.5).pos(0,0,!0,!0,d).mov(0,0).cur();o.on("mouseover",function(){S.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),o.stage.update()}),o.on("mouseout",function(){S.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),o.stage.update()}),o.on("mousedown",function(){nr("https://zimjs.com/marquee","_blank")});var S=T.label=new t.Label({text:"MARQUEE",color:t.dark,backgroundColor:t.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,d).reg(-10).sca(0,1).mov(0);d.fit(0,0,v-c,r-c),d.pos(v-d.width-c,c/2,!0,!0,T)}if(T.stage&&T.stage.update(),this.pause=function(m,O){n(m)&&(m=!0),m!=b&&(b=m,T.interval.pause(m,O),T.button.toggle(m))},Object.defineProperty(this,"paused",{get:function(){return b},set:function(){ht&&je("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return l},set:function(m){l=m,T.interval.time=l}}),this.load=function(m,O){var de=[];y&&t.shuffle(m),t.loop(m,function(N){Array.isArray(N)?de.push(N[0]):de.push(N)});var R=T.stage?T.stage.frame:j.zdf;return T.marqueeLoader=R.loadAssets(de,O),T.loadEvent=T.marqueeLoader.on("assetload",function(N){var se=m[N.asset.id],ie,q;Array.isArray(se)?(ie=se[0],q=se[1]):(ie=se,q="_self"),T.add(N.asset,ie,q),L()}),T},!n(h)){var X=new t.Rectangle(e-1,r-1,t.clear,h,g).loc(F,null,T);X.mouseEnabled=!1}x!==!1&&t.styleTransforms(this,p),this.clone=function(){return T.cloneProps(new t.Marquee(e,r,i,l,a,s,f,C,h,g,k,y,x,this.group,w))},this.dispose=function(m,O,de){return V&&V.clear(),T.interval&&T.interval.clear(),T.loadEvent&&T.marqueeLoader.off("assetload",T.loadEvent),P.dispose(),P=null,de||this.zimContainer_dispose(!0),!0}},t.extend(t.Marquee,t.Container,["clone","dispose"],"zimContainer"),t.Carousel=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T){var B="items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, selectedIndex, continuous, style, group, inherit",F;if(F=at(t.Carousel,arguments,B,this))return F;De("67.45"),this.group=p;var D=A===!1?{}:t.getStyle("Carousel",this.group,T),P=this;this.zimContainer_constructor(),n(e)&&(e=D.items!=null?D.items:[new On({color:red}),new On({color:orange}),new On({color:yellow}),new On({color:green}),new On({color:blue}),new On({color:purple}),new On({color:pink})]),n(a)&&(a=D.backgroundColor!=null?D.backgroundColor:t.clear),n(s)&&(s=D.backing!=null?D.backing:null),n(k)&&(k=D.valign!=null?D.valign:"center"),n(r)&&(r=D.viewNum!=null?D.viewNum:3),n(l)&&(l=D.spacing!=null?D.spacing:20),n(f)&&(f=D.padding!=null?D.padding:0),n(u)&&(u=D.paddingH!=null?D.paddingH:f),n(v)&&(v=D.paddingV!=null?D.paddingV:f),n(C)&&(C=D.arrowLeft!=null?D.arrowLeft:new t.Arrow().rot(180)),n(h)&&(h=D.arrowRight!=null?D.arrowRight:new t.Arrow),n(g)&&(g=D.arrowGap!=null?D.arrowGap:20);var Y=mt(i);n(i)&&(i=D.time!=null?D.time:Y=="s"?.2:200),n(y)&&(y=D.ease!=null?D.ease:"quadInOut"),n(x)&&(x=D.swipe!=null?D.swipe:!0),n(I)&&(I=D.remember!=null?D.remember:"zimCarousel"),n(w)&&(w=D.selectedIndex!=null?D.selectedIndex:0),n(E)&&(E=D.continuous!=null?D.continuous:!0),I&&localStorage&&!n(localStorage[I])&&(localStorage[I]=="NaN"&&(localStorage[I]=0),w=Number(localStorage[I])),P.items=e,P.viewNum=r,P.spacing=l,P.arrowLeft=C,P.arrowRight=h,P.arrowLeft.oW=C.width,P.arrowRight.oW=h.width,s&&(P.backing=s);var _={};t.loop(e,function(o,S){typeof o=="string"&&(o=e[S]=new t.Pic(o)),o.reg(CENTER,CENTER);var X=_["width"+o.width];X?_["width"+o.width]+=1:_["width"+o.width]=1});var V=0,b=0;t.loop(_,function(o,S){S>V&&(V=S,b=Number(o.substring(5)))});var Z=0;t.loop(e,function(o){o.width=b,o.height>Z&&(Z=o.height)});var $;E?(P.continuous=!0,$=t.copy(e),t.loop(e.length,function(o){$.push(e[o].clone())})):$=e,P.itemWidth=b,P.itemHeight=Z;var Q=C.width+g+u,re;function G(){var o=r*(b+l)-l,S=Z;re=o+u*2+g*2+C.width+h.width,P.setBounds(0,0,re,S+v*2),P.tile=new t.Tile({obj:$,cols:$.length,spacingH:l,rows:1,unique:!0,align:"center",valign:k}).center(P).loc(Q),P.background=new On(o+u*2,S+v*2,a).center(P,0),P.tile.setMask(P.background)}function L(){C.pos(0,0,"left","center",P),h.pos(0,0,"right","center",P),C.on("mousedown",function(){P.cycleInterval&&(P.cycleClear(),P.dispatchEvent("cyclecleared")),P.goLeft()}),h.on("mousedown",function(){P.cycleInterval&&(P.cycleClear(),P.dispatchEvent("cyclecleared")),P.goRight()}),d()}function c(){if(P.swipe){var o=P.swipeObj=new t.Swipe(P.tile);o.on("swipe",function(S){S.swipeX!=0&&P.cycleInterval&&(P.cycleClear(),P.dispatchEvent("cyclecleared")),S.swipeX==1?P.goLeft():S.swipeX==-1&&P.goRight()})}}function d(){localStorage&&I&&(localStorage[I]=P.selectedIndex),C.activate(!0),h.activate(!0),!E&&(P.tile.x+P.tile.width<=re-h.oW-u-g&&h.activate(!1),P.tile.x>=Q&&C.activate(!1))}P.goLeft=function(o){return n(o)&&(o=i),E&&P.tile.x>=-b&&(P.tile.x-=P.tile.width/2+l/2),P.tile.x<Q&&(P.disableArrows(),w--,P.tile.animate({props:{x:P.tile.x+b+l},time:o,ease:y,call:function(){d(),P.enableArrows(),P.dispatchEvent("transitioned")}})),P},P.goRight=function(o){return n(o)&&(o=i),E&&P.tile.x-b<=re-P.tile.width&&(P.tile.x+=P.tile.width/2+l/2),P.tile.x+P.tile.width>re-h.oW-u-g&&(P.disableArrows(),w++,P.tile.animate({props:{x:P.tile.x-b-l},time:o,ease:y,call:function(){d(),P.enableArrows(),P.dispatchEvent("transitioned")}})),P},P.cycleClear=function(){return P.cycleInterval.clear(),P.cycleInterval=null,P},P.cycle=function(o,S,X,m,O,de){var R="cycleTime, transitionTime, repeat, repeatNum, recycle, rtl",N;if(N=at(P.cycle,arguments,R))return N;n(o)&&(o=D.cycleTime!=null?D.cycleTime:Y=="s"?5:5e3),n(S)&&(S=D.transitionTime!=null?D.transitionTime:Y=="s"?1:1e3),n(X)&&(X=!0),n(m)&&(m=0),n(O)&&(O=o*2),n(de)&&(de=j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl");let se=de?-1:1;return P.cycleInterval&&P.cycleInterval.clear(),O&&O!=-1&&(P.recycleEvent&&P.off("cyclecleared",P.recycleEvent),P.recycleWait&&P.recycleWait.clear(),P.recycleEvent=P.on("cyclecleared",function(){P.recycleWait&&P.recycleWait.clear(),P.recycleWait=$r(O,function(){P.cycle(o,S,X,m,O,de)})})),E?(P.repeatTotal=0,P.cycleInterval=t.interval(o*2,function(ie){if(P.selectedIndex==0)if(!X&&de)P.cycleInterval.clear();else{if(de&&ie.count!=1&&(P.repeatTotal+=1),de&&m!=0&&P.repeatTotal>=m){P.cycleInterval.clear(),P.dispatchEvent("repeatdone");return}se==1?P.goRight(S):P.goLeft(S)}else if(P.selectedIndex==e.length-r){if(!de&&ie.count!=1&&(P.repeatTotal+=1),!de&&m!=0&&P.repeatTotal>=m){P.cycleInterval.clear(),P.dispatchEvent("repeatdone");return}P.repeatTotal>=1&&P.dispatchEvent("repeated"),!de&&!X?P.cycleInterval.clear():se==1?P.goRight(S):P.goLeft(S)}else se==1?P.goRight(S):P.goLeft(S)})):(P.repeatTotal=.5,P.cycleInterval=t.interval(o*2,function(ie){if(P.selectedIndex==0){if(ie.count!=1&&(P.repeatTotal+=.5),m!=0&&P.repeatTotal>m){P.cycleInterval.clear(),P.dispatchEvent("bouncedone");return}P.repeatTotal>=1&&P.dispatchEvent("bounced"),se=1,P.goRight(S)}else if(P.selectedIndex==e.length-r){if(ie.count!=1&&(P.repeatTotal+=.5),m!=0&&P.repeatTotal>m){P.cycleInterval.clear(),P.dispatchEvent("bouncedone");return}P.repeatTotal>=1&&P.dispatchEvent("bounced"),se=-1,P.goLeft(S)}else Rr(),se==1?P.goRight(S):P.goLeft(S)})),P},P.enableArrows=function(){return P.swipeObj&&(P.swipeObj.active=!0),C.mouse(),h.mouse(),P},P.disableArrows=function(){return P.swipeObj&&(P.swipeObj.active=!1),C.noMouse(),h.noMouse(),P},Object.defineProperty(P,"selectedIndex",{get:function(){return(w+e.length)%e.length},set:function(o){w=t.constrain(o,0,e.length-r),P.tile.x=Q-w*(b+l),d()}}),Object.defineProperty(P,"swipe",{get:function(){return x},set:function(o){x=o,x&&!P.swipeObj&&c(),P.swipeObj.active=x}}),G(),L(),c(),s&&s.center(P,1),w&&(P.selectedIndex=w),this.dispose=function(o,S,X){return P.swipeObj&&P.swipeObj.dispose(),P.recycleEvent&&P.off("cyclecleared",P.recycleEvent),P.cycleWait&&P.cycleWait.clear(),P.cycleInterval&&P.cycleInterval.clear(),P.swipeObj=P.recycleEvent=P.cycleWait=null,X||this.zimContainer_dispose(),!0},A!==!1&&t.styleTransforms(this,D),this.clone=function(){return P.cloneProps(new t.Carousel(t.copy(e),r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,this.group))}},t.extend(t.Carousel,t.Container,["clone","dispose"],"zimContainer",!1),t.Loader=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L){var c="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",d;if(d=at(t.Loader,arguments,c,this))return d;De("67.5"),this.group=G;var o=re===!1?{}:t.getStyle("Loader",this.group,L);if(n(e)&&(e=o.width!=null?o.width:250),n(r)&&(r=o.height!=null?o.height:70),n(l)&&(l=o.type!=null?o.type:"image"),l=l.toLowerCase(),n(a)&&(a=o.backgroundColor!=null?o.backgroundColor:"rgba(0,0,0,.05)"),n(s)&&(s=o.rollBackgroundColor!=null?o.rollBackgroundColor:"rgba(0,0,0,.1)"),n(f)&&(f=o.color!=null?o.color:"rgba(0,0,0,.5)"),n(u)&&(u=o.rollColor!=null?o.rollColor:f),n(v)&&(v=o.borderColor!=null?o.borderColor:"rgba(0,0,0,.3)"),n(h)&&(h=o.borderWidth!=null?o.borderWidth:1),n(E)&&(E=o.dashed!=null?o.dashed:!0),n(g)&&(g=o.corner!=null?o.corner:0),n($)&&($=o.multiple!=null?o.multiple:!0),n(i)&&(i=o.label!=null?o.label:new t.Label({text:"UPLOAD PIC",color:f,rollColor:u,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),typeof Z>"u")if(j.zdf)var Z=j.zdf;else{ht&&je("zim.Loader - please provide a reference to zim Frame");return}this.zimButton_constructor(e,r,i,a,s,null,f,u,null,v,h,C,null,A,p,null,B,F,null,g,E,k,y,I,w,null,null,null,null,null,x,null,null,null,T,D,null,null,null,null,null,null,P,Y,null,_,V,null,b,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var S=this,X=Z.stage;i=S.label;var m=S.tag=document.createElement("input");Z.tag?Z.tag.appendChild(m):document.body.appendChild(m),m.setAttribute("type","file"),m.setAttribute("aria-hidden",!0),$&&m.setAttribute("multiple","multiple"),Q&&m.setAttribute("accept",Q),m.hidden=!0,m.zimDisplay=m.style.display||"inline-block",m.style.cssText="border:thin solid grey; z-index:2; width:"+e+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){m.click()}),m.addEventListener("change",N);var O=new Fe.DOMElement(m);X.addChild(O),O.alpha=0;var de=Z.retina&&j.devicePixelRatio||1;this.resize=function(q,z){if(!S.stage){m.setAttribute("aria-hidden",!0),m.hidden=!0,m.style.display="none";return}m.setAttribute("aria-hidden",!1),m.hidden=!1,m.style.display=m.zimDisplay,n(q)&&(q=!0),S.time1&&clearTimeout(S.time1),z||(S.time1=setTimeout(function(){S.resize(null,!0)},40));var ce=S.getConcatenatedMatrix().decompose(),Ie=S.localToGlobal(0,0);if(Z.retina){var K=t.browserZoom();Z.tag?(O.x=Ie.x/de/K,O.y=Ie.y/de/K):(O.x=Z.x/X.scaleX+Ie.x/de/K,O.y=Z.y/X.scaleY+Ie.y/de/K),t.sca(O,ce.scaleX/de/X.scaleX/K,ce.scaleY/de/X.scaleY/K)}else O.x=Z.x+Ie.x*Z.scale,O.y=Z.y+Ie.y*Z.scale,t.sca(O,Z.scale*ce.scaleX,Z.scale*ce.scaleY);return X.update(),S},this.resize(),S.on("added",function(){m.style.display="block",m.hidden=!1,m.style.display="block",S.resize()}),S.added(R);function R(){S.resize(),S.time2=setTimeout(function(){m.style.display="block",m.hidden=!1,m.style.display="block"},50),S.on("added",R,null,!0)}S.on("removed",function(){S.time1&&clearTimeout(S.time1),S.time2&&clearTimeout(S.time2),m&&(m.style.display="none",m.hidden=!0,m.style.display="none")});function N(q){var z;if(q.dataTransfer&&q.dataTransfer.files&&q.dataTransfer.files.length>0?z=q.dataTransfer.files:z=q.target.files,l=="text"||l=="json"){var ce=[],Ie;if(l.toLowerCase()=="json")var K=[],xe}else if(l=="other")var J=[],fe;else var U=[],ue;for(var ke=0;ke<z.length;ke++)(function(ne){var ve=new FileReader;ve.onload=function(we){if(l=="text"||l=="json"){var ee=we.target.result;if(ce.push(ee),l=="json"){var le=JSON.parse(ee);K.push(le)}if(ce.length==1&&(Ie=ee,l=="json"&&(xe=le)),ce.length==z.length){var ye=new Fe.Event("loaded");ye.texts=ce,ye.text=Ie,ye.lastText=ee,ye.total=ce.length,l=="json"&&(ye.jsons=K,ye.json=xe,ye.lastJSON=le),S.dispatchEvent(ye),m.value=""}}else if(l=="other"){var oe=we.target.result;if(J.push(oe),J.length==1&&(fe=oe),J.length==z.length){var ye=new Fe.Event("loaded");ye.others=J,ye.other=fe,ye.lastOther=oe,ye.total=J.length,S.dispatchEvent(ye),m.value=""}}else{var Me=new Image;Me.onload=function(){var ae=new t.Bitmap(Me);if(U.push(ae),U.length==1&&(ue=ae),U.length==z.length){var Se=new Fe.Event("loaded");Se.bitmaps=U,Se.bitmap=ue,Se.lastBitmap=ae,Se.total=U.length,S.dispatchEvent(Se),m.value=""}},Me.src=we.target.result}},l=="text"||l=="json"?ve.readAsText(ne):ve.readAsDataURL(ne)})(z[ke])}var se=new XMLHttpRequest;if(se.upload){var ie=function(q){m.removeEventListener("change",N),N(q),setInterval(function(){m.addEventListener("change",N)},100)};m.addEventListener("drop",ie)}this.save=function(q,z,ce,Ie,K,xe,J,fe,U,ue,ke){var ne="content, filename, x, y, width, height, cached, cachedBounds, type, data, quality",ve;if(ve=at(S.save,arguments,ne))return ve;if(n(q)&&(q=Z.stage),n(U)&&(U="png"),n(z))z="saved_"+String(t.makeID("numbers",5))+"."+U;else{var we=z.split(".");if(we.length==1)z+="."+U;else{var ee=["png","jpg","jpeg"],le=ee.indexOf(we[we.length-1].toLowerCase());le==-1?z+="."+U:U=ee[le]}}if(n(ce)&&(ce=0),n(Ie)&&(Ie=0),n(K)&&(K=q.getBounds&&q.getBounds()?q.getBounds().width:Z.width),n(xe)&&(xe=q.getBounds&&q.getBounds()?q.getBounds().height:Z.height),q.cache(ce,Ie,K,xe),ue){var ye=q.cacheCanvas.toDataURL("image/"+U,ke);return J?fe&&q.cache(fe.x,fe.y,fe.width,fe.height):q.uncache(),ye}var oe=/Edge\/(\d)+/.test(navigator.userAgent);if(oe){var Me=j.open();Me.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+q.cacheCanvas.toDataURL("image/"+U)+"></body></html>"),Me.document.close()}else{U=="jpg"&&(U="jpeg");var ae=document.createElement("a");ae.setAttribute("download",z),ae.setAttribute("href",q.cacheCanvas.toDataURL("image/"+U,ke)),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)}return J?fe&&q.cache(fe.x,fe.y,fe.width,fe.height):q.uncache(),S},re!==!1&&t.styleTransforms(this,o),this.clone=function(){var q=new t.Loader(e,r,n(i)?null:i.clone(),a,s,f,u,v,h,g,k,y,x,I,w,n(A)?null:A.clone(),n(p)?null:p.clone(),T,n(B)?null:B.clone(),n(F)?null:F.clone(),D,n(P)?null:P.clone(),n(Y)?null:Y.clone(),n(_)?null:_.clone(),n(V)?null:V.clone(),b,Z,re,this.group);return S.cloneProps(q)},Object.defineProperty(this,"frame",{get:function(){return Z},set:function(q){q!=Z&&(Z.off("update",S.updateEvent),Z.off("resize",S.resizeEvent),Z=q,S.resizeEvent=Z.on("resize",S.resize),S.updateEvent=Z.on("update",S.resize),S.resize())}}),this.resizeEvent=Z.on("resize",S.resize),this.updateEvent=Z.on("update",S.resize),this.dispose=function(q,z,ce){var Ie;return S.stage&&(Ie=S.stage),Z.off("update",S.updateEvent),Z.off("resize",S.resizeEvent),N&&m.removeEventListener("change",N),ie&&m.removeEventListener("drop",ie),m&&m.parentNode&&m.parentNode.removeChild(m),m=null,ce||(this.zimButton_dispose(),Ie&&Ie.update()),!0}},t.extend(t.Loader,t.Button,["clone","dispose"],"zimButton",!1),t.TextArea=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_){var V="width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",b;if(b=at(t.TextArea,arguments,V,this))return b;De("67.6"),this.group=Y;var Z=P===!1?{}:t.getStyle("TextArea",this.group,_);if(n(e)&&(e=Z.width!=null?Z.width:250),n(r)&&(r=Z.height!=null?Z.height:70),n(i)&&(i=Z.placeholder!=null?Z.placeholder:null),n(l)&&(l=Z.text!=null?Z.text:null),n(a)&&(a=Z.size!=null?Z.size:20),n(s)&&(s=Z.padding!=null?Z.padding:5),n(f)&&(f=Z.color!=null?Z.color:t.granite),n(u)&&(u=Z.backgroundColor!=null?Z.backgroundColor:"rgba(256,256,256,.1)"),n(v)&&(v=Z.borderColor!=null?Z.borderColor:"rgba(0,0,0,.1)"),n(C)&&(C=Z.borderWidth!=null?Z.borderWidth:null),v<0||C<0?v=C=null:v!=null&&C==null&&(C=1),n(h)&&(h=Z.corner!=null?Z.corner:0),!n(k)&&n(g)&&(g=Z.shadowColor!=null?Z.shadowColor:"rgba(0,0,0,.3)"),!n(g)&&n(k)&&(k=Z.shadowBlur!=null?Z.shadowBlur:10),n(E)&&(E=Z.password!=null?Z.password:!1),n(A)&&(A=Z.inputType!=null?Z.inputType:!1),n(p)&&(p=Z.wrap!=null?Z.wrap:!0),n(T)&&(T=Z.maxLength!=null?Z.maxLength:null),n(w)&&(w=Z.spellCheck!=null?Z.spellCheck:!0),n(I)&&(I=Z.readOnly!=null?Z.readOnly:!1),n(D)&&(D=Z.keyboardShift!=null?Z.keyboardShift:!1),this.maxLength=T,n(F)&&(F=Z.expand!=null?Z.expand:20),F===!0&&(F=20),typeof B>"u")if(j.zdf)var B=j.zdf;else{ht&&je("zim.TextArea - please provide a reference to zim Frame");return}this.zimContainer_constructor(e,r,null,null,!1),this.type="TextArea";var $=this,Q=B.stage,re=this.background=new t.Rectangle(e,r,u,v,C,h,y,null,null,!1).expand(F);g!=-1&&k>0&&(re.shadow=new Fe.Shadow(g,3,3,k)),$.addChild(re);var G=$.tag=A||E?document.createElement("input"):document.createElement("textarea");B.tag?B.tag.appendChild(G):document.body.appendChild(G),n(x)||(G.setAttribute("id",x),G.setAttribute("name",x)),E?G.setAttribute("type","password"):A&&G.setAttribute("type",A),G.readOnly=I,G.spellcheck=w,i&&G.setAttribute("placeholder",i),l&&(G.value=l),G.zimDisplay=G.style.display||"inline-block",G.style.cssText="background-color:rgba(0,0,0,.01); color:"+f+"; resize:none; z-index:3; width:"+(e-s*2)+"px; height:"+(r-s*2)+"px; overflow:hidden; outline:none;font-size:"+a+"px; font-family:"+(Z.font!=null?Z.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",$.taInput=function(){!n($.maxLength)&&$.text.length>$.maxLength&&($.text=$.text.substring(0,$.maxLength)),$.dispatchEvent("input")};var L=$.y;$.taFocus=function(){if(j.M&&D){$.re&&$.stage.frame.off("resize",$.re),$.re=$.stage.frame.on("resize",function(){$.stage&&S>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-S),$.stage.update())});var S=$.localToGlobal(0,0).y;$.stage&&S>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-S),$.stage.update())}$.stage&&(B=$.stage.frame),B.zil&&j.removeEventListener("keydown",B.zil[0]),$.dispatchEvent("focus")},$.taBlur=function(){j.M&&D&&$.stage&&($.re&&$.stage.frame.off("resize",$.re),$.stage.y=L,$.stage.update()),$.stage&&(B=$.stage.frame),B.zil&&j.addEventListener("keydown",B.zil[0]),$.dispatchEvent("blur")},G.addEventListener("change",$.taChange),G.addEventListener("input",$.taInput),G.addEventListener("focus",$.taFocus),G.addEventListener("blur",$.taBlur);var c=new Fe.DOMElement(G);c.alpha=0,this.on("mousedown",function(){setTimeout(function(){G.focus()},100)}),this.setFocus=function(S){return n(S)&&(S=!0),S?G.focus():G.blur(),$};var d=B.retina&&j.devicePixelRatio||1;this.resize=function(S,X){n(S)&&(S=!0),$.time1&&clearTimeout($.time1),X||($.time1=setTimeout(function(){$.resize(null,!0)},40));var m=$.getConcatenatedMatrix().decompose(),O=$.localToGlobal(s,s);if(B.retina){var de=t.browserZoom();B.tag?(c.x=O.x/d/de,c.y=O.y/d/de):(c.x=B.x/Q.scaleX+O.x/d/de,c.y=B.y/Q.scaleY+O.y/d/de),t.sca(c,m.scaleX/d/Q.scaleX/de,m.scaleY/d/Q.scaleY/de)}else B.tag?(c.x=O.x*B.scale,c.y=O.y*B.scale):(c.x=B.x+O.x*B.scale,c.y=B.y+O.y*B.scale),t.sca(c,B.scale*m.scaleX,B.scale*m.scaleY);return c.alpha=$.alpha,$.parent&&(c.alpha*=$.parent.alpha),S&&$.stage&&Q.update(),$},this.resize(),$.added(o);function o(){Q.addChild(c),$.time2=setTimeout(function(){G.style.display=G.zimDisplay},50),$.resize(),$.on("added",o,null,!0),$.FOEvent=Q.on("stagemousedown",function(){$.focus=!1})}$.on("removed",function(){$.time1&&clearTimeout($.time1),$.time2&&clearTimeout($.time2),Q.removeChild(c),$.FOEvent&&Q.off("stagemousedown",$.FOEvent),G&&(G.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return G.value},set:function(S){G.value=S}}),Object.defineProperty(this,"text",{get:function(){return G.value},set:function(S){G.value=S}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==G},set:function(S){$.setFocus(S)}}),Object.defineProperty(this,"readOnly",{get:function(){return G.readOnly},set:function(S){G.readOnly=S}}),j.KEYFOCUS!=null&&(t.KEYFOCUS=j.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return t.KEYFOCUS==$},set:function(){t.KEYFOCUS=$}}),t.KEYFOCUS||($.keyFocus=!0),$.taMousedown=function(){$.keyFocus=!0},G.addEventListener("mousedown",$.taMousedown),p||(G.style.whiteSpace="pre"),P!==!1&&t.styleTransforms(this,Z),this.clone=function(){var S=new t.TextArea(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,this.group,_);return $.cloneProps(S)},Object.defineProperty(this,"frame",{get:function(){return B},set:function(S){S!=B&&(B.off("update",$.updateEvent),B.off("resize",$.resizeEvent),B=S,$.resizeEvent=B.on("resize",$.resize),$.updateEvent=B.on("update",$.resize),d=B.retina&&j.devicePixelRatio||1,Q=B.stage,$.resize())}}),this.resizeEvent=B.on("resize",$.resize),this.updateEvent=B.on("update",$.resize),this.dispose=function(S,X,m){var O;return $.stage&&(O=$.stage),B.off("update",$.updateEvent),B.off("resize",$.resizeEvent),O&&$.FOEvent&&O.off("stagemousedown",$.FOEvent),G&&G.parentNode&&G.parentNode.removeChild(G),G.removeEventListener("change",$.taChange),G.removeEventListener("input",$.taInput),G.removeEventListener("focus",$.taFocus),G.removeEventListener("blur",$.taBlur),G.removeEventListener("mousedown",$.taMousedown),G=null,m||(this.zimContainer_dispose(!0),O&&O.update()),$.background=null,!0}},t.extend(t.TextArea,t.Container,["clone","dispose"],"zimContainer",!1),t.Tag=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",y;if(y=at(t.Tag,arguments,k,this))return y;De("67.7"),this.group=h;var x=C===!1?{}:t.getStyle("Tag",this.group,g);if(n(e)&&(e=x.width!=null?x.width:250),n(r)&&(r=x.height!=null?x.height:70),n(i)&&(i=x.id!=null?x.id:"zimTag_"+t.rand(1e4)),typeof l>"u")if(j.zdf)var l=j.zdf;else{ht&&je("zim.Tag - please provide a reference to zim Frame");return}n(a)&&(a=x.backgroundColor!=null?x.backgroundColor:"rgba(0,0,0,0)"),n(s)&&(s=x.padding!=null?x.padding:10),n(f)&&(f=x.paddingH!=null?x.paddingH:s),n(u)&&(u=x.paddingV!=null?x.paddingV:s),n(v)&&(v=x.expand!=null?x.expand:20),v===!0&&(v=20),this.zimContainer_constructor(e,r,null,null,!1),this.type="Tag",this.tagID=i,this.id=i;var I=this,w=l.stage;I.background=new t.Rectangle(e+f,r+u,a).center(this).expand(v||0);var E=I.tag=document.createElement("div");l.tag?l.tag.appendChild(E):document.body.appendChild(E),E.setAttribute("id",i),E.setAttribute("name",i),E.zimDisplay=E.style.display||"inline-block",E.style.cssText="resize:none; z-index:3; width:"+e+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var A=new Fe.DOMElement(E);A.alpha=0;var p=l.retina&&j.devicePixelRatio||1;this.resize=function(B,F){n(B)&&(B=!0),I.time1&&clearTimeout(I.time1),F||(I.time1=setTimeout(function(){I.resize(null,!0)},40));var D=I.getConcatenatedMatrix().decompose(),P=I.localToGlobal(0,0);if(l.retina){var Y=t.browserZoom();l.tag?(A.x=P.x/p/Y,A.y=P.y/p/Y):(A.x=l.x/w.scaleX+P.x/p/Y,A.y=l.y/w.scaleY+P.y/p/Y),t.sca(A,D.scaleX/p/w.scaleX/Y,D.scaleY/p/w.scaleY/Y)}else A.x=l.x+P.x*l.scale,A.y=l.y+P.y*l.scale,t.sca(A,l.scale*D.scaleX,l.scale*D.scaleY);return A.alpha=I.alpha,I.parent&&(A.alpha*=I.parent.alpha),B&&I.stage&&w.update(),I},this.resize(),I.added(T);function T(){w.addChild(A),I.time2=setTimeout(function(){E.style.display=E.zimDisplay},50),I.resize(),I.on("added",T,null,!0)}I.on("removed",function(){I.time1&&clearTimeout(I.time1),I.time2&&clearTimeout(I.time2),w.removeChild(A),E&&(E.style.display="none")}),this.add=function(B){return E.innerHTML+=B,I},Object.defineProperty(this,"innerHTML",{get:function(){return E.innerHTML},set:function(B){E.innerHTML=B}}),Object.defineProperty(this,"style",{get:function(){return E.style},set:function(B){E.style=B}}),C!==!1&&t.styleTransforms(this,x),this.clone=function(){var B=new t.Tag(e,r,i,l,a,s,f,u,v,C,this.group,g);return I.cloneProps(B)},Object.defineProperty(this,"frame",{get:function(){return l},set:function(B){B!=l&&(l.off("update",I.updateEvent),l.off("resize",I.resizeEvent),l=B,I.resizeEvent=l.on("resize",I.resize),I.updateEvent=l.on("update",I.resize),I.resize())}}),this.resizeEvent=l.on("resize",I.resize),this.updateEvent=l.on("update",I.resize),this.dispose=function(B,F,D){var P;return I.stage&&(P=I.stage),l.off("update",I.updateEvent),l.off("resize",I.resizeEvent),E&&E.parentNode&&E.parentNode.removeChild(E),E=null,D||(this.zimContainer_dispose(!0),P&&P.update()),!0}},t.extend(t.Tag,t.Container,["clone","dispose"],"zimContainer",!1);function Ot(e,r){r?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(t.addTo=function(e,r,i,l){var a="obj, container, index, localToLocal",s;if(s=at(t.addTo,arguments,a))return s;if(De("47.5"),n(e)){je("zim methods - addTo(): please provide object");return}if(n(r))if(j.zdf)r=j.zdf.stage;else{je("zim methods - addTo(): please provide container");return}if(n(l)&&(l=!0),e.parent||(l=!1),l)var f=e.parent.localToLocal(e.x,e.y,r);return n(i)||isNaN(i)?r.addChild(e):r.addChildAt(e,i),l&&(e.x=f.x,e.y=f.y),e},t.removeFrom=function(e,r){if(De("47.6"),n(e)){je("zim methods - removeFrom(): please provide object");return}return e.removePhysics&&e.removePhysics(),n(r)?e.parent&&e.parent.removeChild(e):r.removeChild(e),e},t.added=function(e,r,i,l){if(De("47.7"),!(n(e)||n(r)||typeof r!="function")){var a=mt(i);if(n(i)&&(i=a=="s"?.1:100),e.stage){r(e.stage,e);return}var s=i*(a=="s"?1e3:1),f;l&&(Mt(l),f=l*(a=="s"?1e3:1));var u=Date.now(),v=0,C=setInterval(function(){if(v>5){clearInterval(C);return}v++,e.stage&&(r(e.stage,e),clearInterval(C),clearInterval(h))},10),h=setInterval(function(){f>0&&u-Date.now()>f&&clearInterval(h),e.stage&&(r(e.stage,e),clearInterval(h))},s);return h}},t.centerReg=function(e,r,i,l){var a="obj, container, index, add",s;if(s=at(t.centerReg,arguments,a))return s;if(e.type=="AC"&&j.zdf)return j.zdf.ac("centerReg",arguments),e.addTo(r,i);if(De("48"),n(e)||!e.getBounds||!e.getBounds())return je("zim methods - centerReg(): please provide object with bounds set"),e;n(l)&&(l=!0),n(r)&&e.parent&&l&&(r=e.parent,n(i)&&(i=e.parent.getChildIndex(e)),e.parent.removeChild(e)),!n(r)&&r==e.parent&&(n(i)&&(i=e.parent.getChildIndex(e)),e.parent.removeChild(e));var f=e.getBounds();return e.regX=f.x+f.width/2,e.regY=f.y+f.height/2,l?t.center(e,r,i):e},t.center=function(e,r,i,l){var a="obj, container, index, add",s;if(s=at(t.center,arguments,a))return s;if(e.type=="AC"&&j.zdf)return j.zdf.ac("center",arguments),e.addTo(r,i);if(t.centerCheck||(De("48.1"),t.centerCheck=!0),n(e)||!e.getBounds)return je("zim.center(): please provide object with bounds"),e;if(n(r)&&(e.parent?r=e.parent:j.zdf&&(r=j.zdf.stage)),n(r)||!r.getBounds)return je("zim.center(): please provide container with bounds"),e;var f=e.getBounds(),u=r.getBounds();n(l)&&(l=!0);var v=!1;if(n(u)&&(r.setBounds(0,0),u=r.getBounds(),v=!0),l&&r.addChild&&(n(i)||typeof i=="number"&&isNaN(i)?(!e.parent||e.parent!=r)&&r.addChild(e):r.addChildAt(e,i)),n(f))return e.x=u.x+u.width/2,e.y=u.y+u.height/2,e;var C=!1,h=!1;r.scaleX==0&&(C=!0,r.scaleX=1e-5),r.scaleY==0&&(h=!0,r.scaleY=1e-5);var g=e.localToLocal(e.regX,e.regY,r),k=t.boundsToGlobal(e),y=t.boundsToGlobal(r,k,!0);if(C&&(r.scaleX=0),h&&(r.scaleY=0),e.x=u.x+u.width/2-y.width/2+(g.x-y.x),e.y=u.y+u.height/2-y.height/2+(g.y-y.y),!l&&r.getStage&&r.stage&&e.parent){var x=r.localToLocal(e.x,e.y,e.parent);e.x=x.x,e.y=x.y}return v&&r.setBounds(null),e},t.place=function(e,r){if(De("49"),n(e))return;n(r)&&(r="obj"),t.lastPlace=e;function i(){je(r+".x = "+Math.round(e.x)+"; "+r+".y = "+Math.round(e.y)+";"),je(r+".loc("+Math.round(e.x)+", "+Math.round(e.y)+");")}t.drag({obj:e,currentTarget:!0,dragCursor:"crosshair"}),e.on("mousedown",function(){t.lastPlace=e});var l=j.zdf;return l&&l.on("keydown",function(a){if(e==t.lastPlace){var s=a.keyCode;if(s>=37&&s<=40){var f=a.shiftKey?10:1;e.mov(s==37?-1*f:s==39?1*f:0,s==38?-1*f:s==40?1*f:0),i(),e.stage&&e.stage.update()}}}),je("place "+r+" - to get new position",e),e.on("click",i),e},t.placeReg=function(e,r){if(De("49.5"),n(e))return;var i=e.stage;if(n(i))return je("zim.placeReg() - add object to stage before calling placeReg()"),e;n(r)&&(r="obj");function l(){var f=e.globalToLocal(s.x,s.y);je(r+".regX = "+Math.round(f.x)+"; "+r+".regY = "+Math.round(f.y)+";"),je(r+".reg("+Math.round(f.x)+", "+Math.round(f.y)+");")}var a=e.parent.localToGlobal(e.x,e.y),s=new t.Shape(-25,-25,50,50,null,!1).addTo(i).pos({x:a.x,y:a.y,reg:!0});return s.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),s.compositeOperation="difference",s.expand(0),t.drag({obj:s}),je("place cursor to get new registration point location"),i.on("stagemouseup",l),e},t.pos=function(e,r,i,l,a,s,f,u,v,C,h){var g="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY",k;if(k=at(t.pos,arguments,g))return k;if(e.type=="AC"&&j.zdf)return j.zdf.ac("pos",arguments),e.addTo(s,f);De("41.5"),j.DIR&&j.DIR=="rtl"||!j.DIR&&t.DIR=="rtl"?l=="start"?l="right":l=="end"&&(l="left"):l=="start"?l="left":l=="end"&&(l="right");var y=!1;l=="right"&&(y=!0);var x=!1;a=="bottom"&&(x=!0);var I=t.POSREG;if(j.POSREG!=null&&(I=j.POSREG),n(v)&&(v=I),n(e))return;n(v)&&n(C)&&(C=!1),n(v)&&n(h)&&(h=!1),!n(v)&&n(C)&&(C=v),!n(v)&&n(h)&&(h=v),n(u)&&(u=!0),!n(s)&&!s.addChild&&(s=null),!e.getBounds&&!e.getBounds()&&(C=h=!1),e.zimPos={x:r,y:i,h:l,v:a,i:f},n(s)&&(e.parent?s=e.parent:j.zdf&&(s=j.zdf.stage)),!e.parent&&n(r)&&(r=0),!e.parent&&n(i)&&(i=0);var w=!1;e.getBounds()||(e.setBounds(0,0),w=!0);var E=!1;s&&!s.getBounds()&&(s.setBounds(0,0),E=!0);function A(){n(f)||typeof f=="number"&&isNaN(f)?s.contains(e)||s.addChild(e):s.addChildAt(e,f)}if(!n(s)&&s.addChild&&u){var p=s.getBounds().clone();A();var T=s.getBounds();(p.width!=T.width||p.height!=T.height||p.x!=T.x||p.y!=T.y)&&(e.removeFrom(),s.setBounds(p.x,p.y,p.width,p.height),E=!0,A())}if(!C&&!h&&(l=="center"||l=="middle")&&(a=="center"||a=="middle"))return e.center({container:s}),e.mov(r,i),w&&e.setBounds(null),E&&s.setBounds(null),e;if(l=="center"||l=="middle"){if(C)e.x=s.width/2;else{var B=e.y;e.center(),e.y=B}e.mov(r),r=null,l=null}else l===!0&&(y=!0);if(a=="center"||a=="middle"){if(h)e.y=s.height/2;else{var F=e.x;e.center(),e.x=F}e.mov(0,i),i=null,a=null}else a===!0&&(x=!0);function D(){var Z=e.getBounds(),$=Z.x,Q=Z.y,re=Z.width,G=Z.height,L=e._props.matrix;L=e.getMatrix(L),($||Q)&&L.appendTransform(0,0,1,1,0,0,0,-$,-Q);var c=re*L.a,d=re*L.b,o=G*L.c,S=G*L.d,X=L.tx,m=L.ty,O=X,de=X,R=m,N=m;return($=c+X)<O?O=$:$>de&&(de=$),($=c+o+X)<O?O=$:$>de&&(de=$),($=o+X)<O?O=$:$>de&&(de=$),(Q=d+m)<R?R=Q:Q>N&&(N=Q),(Q=d+S+m)<R?R=Q:Q>N&&(N=Q),(Q=S+m)<R?R=Q:Q>N&&(N=Q),{x:O,y:R,width:de-O,height:N-R}}if(e.parent&&e.parent.getBounds){if(s=e.parent,n(r)&&y==!0&&(r=0),n(i)&&x==!0&&(i=0),n(r)||(e.x=r),n(i)||(e.y=i),n(r)&&n(i)&&!y&&!x)return w&&e.setBounds(null),E&&s.setBounds(null),e;var P=0,Y=0;if(e.getBounds()){var _=D();if(!n(r)){var V;y?V=new t.Point(_.x+_.width,_.y+_.height):V=new t.Point(_.x,_.y),P=V.x-r}n(i)||(x?V=new t.Point(_.x+_.width,_.y+_.height):V=new t.Point(_.x,_.y),Y=V.y-i);var b=s.getBounds();n(r)||(y?C?e.x=b.width+b.x-r:e.x=b.width+b.x-r-P:(C?e.x=r:e.x=r-P,e.x+=b.x)),n(i)||(x?h?e.y=b.height+b.y-i:e.y=b.height+b.y-i-Y:(h?e.y=i:e.y=i-Y,e.y+=b.y))}}return w&&e.setBounds(null),E&&s.setBounds(null),u||e.removeFrom(),e},t.loc=function(e,r,i,l,a,s,f,u){var v="obj, target, y, container, index, add, localToLocal, x",C;if(C=at(t.loc,arguments,v))return C;if(e.type=="AC"&&j.zdf)return j.zdf.ac("loc",arguments),e.addTo(l,a);if(De("41.55"),!n(e)){if(typeof r=="number"&&(u=r,r=null),n(r)||(Array.isArray(r)?(u=r[0],i=r[1]):(n(r.x)||(u=r.x),n(r.y)||(i=r.y))),n(u)&&n(r)&&(u=e.x),n(i)&&n(r)&&(i=e.y),n(s)&&(s=!0),n(l)&&(e.parent?l=e.parent:j.zdf&&(l=j.zdf.stage)),s&&l&&(!e.parent||l!=e.parent?n(a)||isNaN(a)?l.addChild(e):l.addChildAt(e,a):n(a)||l.addChildAt(e,a)),n(f)&&(f=!0),r&&r.parent&&e.parent&&f){var h=r.parent.localToLocal(u,i,e.parent);u=h.x,i=h.y}return e.x=u,e.y=i,e}},t.mov=function(e,r,i){var l="obj, x, y",a;if(a=at(t.mov,arguments,l))return a;if(e.type=="AC"&&j.zdf)return j.zdf.ac("mov",arguments),e;if(De("41.6"),!n(e))return n(r)||(e.x+=r),n(i)||(e.y+=i),e},t.sca=function(e,r,i){return e.type=="AC"&&j.zdf?(j.zdf.ac("sca",arguments),e):(De("41.97"),n(e)||n(e.scaleX)||(n(r)&&(r=e.scaleX),n(i)&&(i=r),e.scaleX=r,e.scaleY=i),e)},t.alp=function(e,r){if(De("41.7"),!n(e))return n(r)||(e.alpha=e.hovOriginal=r,e.tag&&e.tag.style&&(e.type!="Loader"&&(e.tag.style.opacity=r),r==0?e.tag.style.display=e.tag.zimDisplay="none":e.tag.style.display=e.tag.zimDisplay="inline-block")),e},t.vis=function(e,r){if(De("41.71"),!n(e))return e.visible=r,e.tag&&e.tag.style&&(r?e.tag.style.display=e.tag.zimDisplay="inline-block":e.tag.style.display=e.tag.zimDisplay="none"),e},t.ble=function(e,r){if(De("41.72"),!n(e))return n(r)&&(r="difference"),e.compositeOperation=r,(e.type=="Blob"||e.type=="Squiggle")&&e.update(),e},t.dye=function(e,r){if(De("41.73"),!n(e))return e.hasOwnProperty("backgroundColor")?e.backgroundColor=r:e.hasOwnProperty("color")&&(e.color=r),e},t.hov=function(e,r,i){if(De("41.75"),!n(e))return n(r)&&(r=1),n(i)&&(i=typeof r=="number"?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),r==-1?(e.cur("default"),n(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update(),e):(e.cur(),e.hovOld=e[i],e.hovNew=r,e.hovType=i,e.hovMouseover=e.on("mouseover",function(){e[i]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[i]=e.hovOld,e.stage&&e.stage.update()}),e)},t.rot=function(e,r,i,l){if(De("41.8"),!n(e)){if(e.type=="AC"&&j.zdf)return j.zdf.ac("rot",arguments),e;if(!n(r))if(e.parent&&(!n(i)||!n(l))){n(i)&&(i=e.x),n(l)&&(l=e.y);var a=e.parent.localToLocal(i,l,e),s=new t.Point(e.x,e.y);e.reg(a.x,a.y),e.rotation=r,e.x=i,e.y=l;var f=e.parent.localToLocal(s.x,s.y,e);e.reg(f.x,f.y),e.x=s.x,e.y=s.y}else e.rotation=r;return e}},t.siz=function(e,r,i,l){if(De("41.85"),!n(e))return e.type=="AC"&&j.zdf?(j.zdf.ac("siz",arguments),e):(n(l)&&(l=!1),!n(r)&&!n(i)?(e.widthOnly=r,e.heightOnly=i):n(r)?n(i)||(l?e.heightOnly=i:e.height=i):l?e.widthOnly=r:e.width=r,e)},t.ske=function(e,r,i){if(De("41.9"),!n(e))return e.type=="AC"&&j.zdf?(j.zdf.ac("ske",arguments),e):(n(r)||(e.skewX=r),n(i)||(e.skewY=i),e)},t.reg=function(e,r,i,l){if(De("41.95"),!n(e)){if(e.type=="AC"&&j.zdf)return j.zdf.ac("reg",arguments),e;var a=e.regX,s=e.regY,f=r,u=j.DIR||t.DIR||"ltr",v;if(r=="default"&&(r=null),typeof r=="string"&&(v=e.getBounds(),v?(r=="start"&&(r=u=="ltr"?"left":"right"),r=="end"&&(r=u=="ltr"?"right":"left"),r=="left"?r=v.x:r=="right"?r=v.x+v.width:(r=="center"||r=="middle")&&(r=v.x+v.width/2)):r=null),typeof i=="string"?(v||(v=e.getBounds()),v?i=="top"?i=v.y:i=="bottom"?i=v.y+v.height:(i=="center"||i=="middle")&&(i=v.y+v.height/2):i=null):n(i)&&(f=="center"||f=="middle")&&(v||(v=e.getBounds()),v?i=v.y+v.height/2:i=null),i=="default"&&(i=null),n(r)||(e.regX=r),n(i)||(e.regY=i),l&&e.parent){var C=e.localToLocal(a,s,e.parent);e.x-=C.x-e.x,e.y-=C.y-e.y}return e}},t.top=function(e){return De("41.62"),n(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},t.bot=function(e){return De("41.63"),n(e)||!e.parent||e.parent.setChildIndex(e,0),e},t.ord=function(e,r){if(De("41.64"),!(n(e)||!e.parent))return n(r)&&(r=0),e.parent.setChildIndex(e,t.constrain(e.parent.getChildIndex(e)+r,0,e.parent.numChildren-1)),e},t.cur=function(e,r){if(De("41.1"),n(e))return je("zim methods - cur(): please provide object"),e;n(r)&&(r="pointer");var i=j.zdf;return e.stage&&(i=e.stage.frame),i.cursors&&i.cursors[r]?(e.cursor="none",e._cursor=r,i.cursorList.add(e,r),e):(i.cursorList&&i.cursorList.add(e,!0),e.cursor=r,e)},t.sha=function(e,r,i,l,a){return De("41.2"),n(e)?(je("zim methods - sha(): please provide object"),e):(n(r)&&(r="rgba(0,0,0,.3)"),r.blur?(e.shadow=r,e):(n(i)&&(i=e.width?e.width*.08:5),n(l)&&(l=e.height?e.height*.08:5),n(a)&&(a=e.width?e.width*.16:10),r==-1?e.shadow=null:e.shadow=new Fe.Shadow(r,i,l,a),e))},t.dep=function(e,r){if(De("41.65"),!n(e))return n(r)&&(r=0),e.depth=r,e},t.nam=function(e,r){if(De("41.67"),!(n(e)||n(r)))return e.name=r,t.zimObjectIDs[r]=e,e},t.movement=function(e,r,i){De("47.75");var l=e.stage||j.zdf.stage;function a(){l=e.stage,e.zimMovementStage=l,e.zimMovementEvent&&l.off("stagemousemove",e.zimMovementEvent),e.zimMovementEvent=l.on("stagemousemove",function(s){r(s)}),e.on("mouseout",function(){e.zimMovementEvent&&l.off("stagemousemove",e.zimMovementEvent)},null,!0)}return t.mobile()?(e.zimMovementEvent&&l.off("pressmove",e.zimMovementEvent),e.zimMovementEvent=e.on("pressmove",function(s){r(s)})):(e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMouseoverEvent=e.on("mouseover",a),i&&a()),e},t.noMovement=function(e){if(De("47.9"),!n(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},t.tap=function(e,r,i,l,a,s,f,u,v,C){var h="obj, call, distance, time, once, dbl, dblTime, call2, call3, call4",g;if(g=at(t.tap,arguments,h))return g;if(De("47.8"),!(n(e)||n(r)||typeof r!="function")){n(i)&&(i=s?10:5);var k=mt(l);n(l)&&(l=k=="s"?8:8e3),n(a)&&(a=!1),n(s)&&(s=!1),n(f)&&(C?f=k=="s"?.5:500:f=k=="s"?1:1e3),e.cur("pointer");var y=!1,x=!1,I;return s?e.zimDblClickDownEvent=e.on("mousedown",function(w){if(I=!1,y){y=!1;return}if(y=!0,w.currentTarget.type=="List"){if(w.target.type=="WindowBacking")return;var E=w.currentTarget.globalToLocal(w.stageX/t.scaX,w.stageY/t.scaY);if(E.y<=0)return}var A=w.stageX/t.scaX,p=w.stageY/t.scaY,T=Date.now(),B,F;x=!0,e.zimDoubleTimeout&&clearTimeout(e.zimDoubleTimeout),e.zimDoubleTimeout=setTimeout(function(){if(x=!1,y=!1,e.zimDblClickUpEvent&&e.off("pressup",e.zimDblClickUpEvent),I&&C)if(Math.abs(A+p-B/t.scaX-F/t.scaY)<i){if(e.excludeTap)return;C(w)}else u&&u(w)},k=="s"?f*1e3:f),e.zimDblClickUpEvent=e.on("pressup",function(D){if(B=D.stageX,F=D.stageY,I=!0,y){v&&v(D);return}else if(!x)return;if(Math.abs(A+p-D.stageX/t.scaX-D.stageY/t.scaY)<i&&Date.now()-T<(k=="s"?l*1e3:l)){if(e.excludeTap)return;clearTimeout(e.zimDoubleTimeout),r(D)}else u&&u(D);D.remove()})},null,a):e.zimClickDownEvent=e.on("mousedown",function(w){if(w.currentTarget.type=="List"){if(w.target.type=="WindowBacking")return;var E=w.currentTarget.globalToLocal(w.stageX/t.scaX,w.stageY/t.scaY);if(E.y<=0)return}var A=w.stageX/t.scaX,p=w.stageY/t.scaY,T=Date.now();e.zimClickUpEvent=e.on("pressup",function(B){if(Math.abs(A+p-B.stageX/t.scaX-B.stageY/t.scaY)<i&&Date.now()-T<(k=="s"?l*1e3:l)){if(e.excludeTap)return;r(B)}else u&&u(B);B.remove()})},null,a),e}},t.noTap=function(e){if(De("47.9"),!n(e))return e.cursor&&e.cur("default"),e.zimClickDownEvent&&e.off("mousedown",e.zimClickDownEvent),e.zimClickUpEvent&&e.off("pressup",e.zimClickUpEvent),e.zimDoubleTimeout&&clearInterval(e.zimDoubleTimeout),e},t.hold=function(e,r,i,l,a){if(De("47.87"),!(n(e)||n(r)||typeof r!="function")){n(i)&&(i=5);var s=mt(l);n(l)&&(l=s=="s"?1.5:1500),n(a)&&(a=!1),e.cur("pointer");var f;return e.zimClickHoldDownEvent=e.on("mousedown",function(u){if(f||(f=u.target.stage),!!f){if(n(f.frame)&&(f.frame=j.zdf),(n(f.frame)||!f.frame.mousemoveEvent)&&(n(f.frame)&&(f.frame={}),f.frame.mouseX=u.stageX/t.scaX,f.frame.mouseY=u.stageY/t.scaY,f.frame.mouseholdEvent&&f.off("stagemousemove",f.frame.mouseholdEvent),f.frame.mouseholdEvent=f.on("stagemousemove",function(k){f.frame.mouseX=k.stageX/t.scaX,f.frame.mouseY=k.stageY/t.scaY})),u.currentTarget.type=="List"){if(u.target.type=="WindowBacking")return;var v=u.currentTarget.globalToLocal(u.stageX/t.scaX,u.stageY/t.scaY);if(v.y<=0)return}var C=u.stageX/t.scaX,h=u.stageY/t.scaY;clearInterval(e.zimHoldInterval);var g=0;e.zimHoldInterval=setInterval(function(){if(g<10)Math.abs(C+h-f.frame.mouseX-f.frame.mouseY)>i&&clearInterval(e.zimHoldInterval);else{if(Math.abs(C+h-f.frame.mouseX-f.frame.mouseY)<i){if(e.excludeHold)return;r(u)}clearInterval(e.zimHoldInterval)}g++},l/10*(s=="s"?1e3:1)),e.zimClickHoldUpEvent=e.on("pressup",function(){clearInterval(e.zimHoldInterval),f&&f.frame.mouseholdEvent&&f.off("stagemousemove",f.frame.mouseholdEvent)},null,!0)}},null,a),e}},t.noHold=function(e){if(De("47.88"),!n(e))return e.cursor&&e.cur("default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),e.stage&&e.stage.frame.mouseEvent&&e.stage.off("stagemousemove",e.stage.frame.mouseEvent),clearInterval(e.zimHoldTimeout),e},t.change=function(e,r,i){if(De("47.85"),!(n(e)||n(r)||typeof r!="function"))return n(i)&&(i=!1),e.zimChangeEvent=e.on("change",function(l){r(l)},null,i),e},t.noChange=function(e){if(De("47.95"),!n(e))return e.off("mousedown",e.zimChangeEvent),e},t.drag=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B){var F="obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch",D;if(D=at(t.drag,arguments,F))return D;if(De("31"),n(e)||!e.on)return;var P=t.DRAGALL;if(j.DRAGALL!=null&&(P=j.DRAGALL),n(s)&&n(A)&&(s=P),n(s)&&n(A)?A=!1:n(s)?n(A)&&(A=!1):A=s,(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&(A=!0),r&&r.getBounds&&(e.type=="Container"||e.type=="Tile")&&e.mouseChildren==!0&&!s){var Y=Array.prototype.slice.call(arguments);return Y[4]=!0,setTimeout(function(){e.loop(function(Ce){Y[0]=Ce,t.drag.apply(null,Y)})},T?0:50),e}(n(i)||i=="all"||i!="horizontal"&&i!="vertical")&&(i="both"),e.zimDown&&e.noDrag(),e.cur(n(l)?"pointer":l),n(f)&&(f=!1),n(u)&&(u=!1),n(v)&&(v=!0),n(C)&&(C=!1),n(h)&&(h=!1),n(g)&&(g=.9),n(k)&&(k=!0);var _=["horizontal","vertical","auto"];if(k!==!0&&_.indexOf(k)<0&&(k=!1),k=="auto"&&(k=!0),n(y)&&(y=.1),n(x)&&(x=!1),n(I)&&(I=!0),n(w)&&(w=!0),n(r)&&!n(E)&&(r=E),n(B)&&(B=!1),e.dragPaused=!1,h)var V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se=j.M?20:10,ie,q,z,ce,Ie=!1,K=!1,xe=50;else e.zimDragTicker=function(){};e._draggable=!0,t.setSwipe(e,f),e.zimBoundary=r,e.zimlocalBoundary=u,e.circleBounds=r&&r.type=="Circle"?r.radius:!1,e.downCheck=!1;var J=!1,fe,U,ue,ke,ne;e.zimAdded=e.on("added",ve,null,!0),e.zimRemoved=e.on("removed",we,null,!0),e.parent&&ve();function ve(){if(e.off("added",e.zimAdded),r=e.zimBoundary,r&&r.getBounds&&r.type!="Blob"){if(e.zimlocalBoundary=!1,r.type!="Stage"&&r.type!="StageGL"?r=r.boundsToGlobal():r=new t.Boundary(0,0,r.width,r.height),!C){var Ce=e.boundsToGlobal();ne=e.localToGlobal(e.regX,e.regY);var te=new t.Point(ne.x-Ce.x,ne.y-Ce.y),Oe=e.borderWidth?e.borderWidth:0;r.x+=te.x+Oe/2,r.y+=te.y+Oe/2,r.width-=Ce.width+Oe,r.height-=Ce.height+Oe}e.zimBoundary=r}fe=0,U=0,e.zimBoundary&&e.zimBoundary.type!="Blob"&&(u?(ue=t.boundsToGlobal(e.parent,e.zimBoundary),C&&(ke=e.zimBoundary)):(ue=e.zimBoundary,C&&(ke=t.boundsToGlobal(e.parent,e.zimBoundary,!0)))),ue&&w&&(ne=e.parent.localToGlobal(e.x,e.y),oe(e,ne.x,ne.y)),h&&setTimeout(function(){h&&k&&(V=new t.Damp(null,y),b=new t.Damp(null,y)),e.zimDragImmediate=function(Re,Xe){o=Re,S=Xe,ie=q=0,z=ce=0,L=X=c=m=d=O=0,h&&k&&(n(Re)||V.immediate(Re),n(Xe)||b.immediate(Xe))},Z=3,$=0,Q=[],re=[],G=[],L=e.x,c=e.y,o=e.x,S=e.y,X=e.x,m=e.y,O=Date.now(),de=-1e4,R=-1e4,e.zimDragMoving=!0,Le()},50),n(e.zimMaskDynamic)||e.zimMaskApply()}function we(){e.zimDragTicker&&t.Ticker.remove(e.zimDragTicker)}var ee,le;e.pointers={};var ye=!1;e.zimDown=e.on("mousedown",function(Ce){if(!(!e.stage||e.dragPaused)&&!(B&&ye)){ye=!0,le=e.stage,e.zmu||(e.zmu=le.frame.on("mouseupplus",function(Qe){e.downCheck&&(h||(e.downCheck=!1),Me(Qe,!0))})),e.dragMouseX=Math.round(Ce.stageX/t.scaX)+le.x,e.dragMouseY=Math.round(Ce.stageY/t.scaY)+le.y;var te="id"+Math.abs(Ce.pointerID+1);if(e.pointers[te]=!0,ee=A?Ce.currentTarget:Ce.target,e.zimBoundary&&!ee.getBounds()){je("zim.drag() - drag object needs bounds set");return}if(e.downCheck=!0,e.stage.mouseMoveOutside=!0,t.Ticker.has(e.zimDragTicker)||t.Ticker.add(e.zimDragTicker,e.stage),I&&e.zimTweens)for(var Oe in e.zimTweens){var Re=e.zimTweens[Oe];Re.zimObj&&(Re.zimObj.x!=null||Re.zimObj.y!=null)&&e.stopAnimate(Oe)}if(ee.parent){if(v){var Xe=ee.parent.numChildren-1;ee.parent.getChildAt(Xe).type=="Keyboard"&&Xe--,ee.parent.setChildIndex(ee,Xe),ee.ZIMoutlineShape&&ee.outline()}ee.parent==e.stage?ne=new t.Point(Ce.stageX/t.scaX,Ce.stageY/t.scaY):ne=ee.parent.globalToLocal(Ce.stageX/t.scaX,Ce.stageY/t.scaY),x&&(ee.x=ne.x,ee.y=ne.y),fe=ne.x-ee.x,U=ne.y-ee.y,ue=null,e.zimBoundary&&(u?(ue=t.boundsToGlobal(ee.parent,e.zimBoundary),C&&(ke=e.zimBoundary)):(ue=e.zimBoundary,C&&(ke=t.boundsToGlobal(ee.parent,e.zimBoundary,!0)))),e.cur(n(a)?"pointer":a),h&&(e.slideStartX=e.x,e.slideStartY=e.y,N=e.zimDragMoving,$=0,Q=[ne.x],re=[ne.y],G=[Date.now()],de=-1e4,R=-1e4,e.zimDragMoving=!0),e.type=="Pen"&&(e.zimDragCheck=!0,J=!1)}}},!0),e.zimMove=e.on("pressmove",function(Ce){if(!(B&&!e.pointers["id"+Math.abs(Ce.pointerID+1)])&&!(!e.downCheck||e.dragPaused)){var te=(p?Ce.rawX:Ce.stageX)/t.scaX+le.x,Oe=(p?Ce.rawY:Ce.stageY)/t.scaY+le.y;e.dragMouseX=Math.round(te),e.dragMouseY=Math.round(Oe),oe(ee,te,Oe),ee.ZIMoutlineShape&&ee.outline(),e.type=="Pen"&&!J&&e.drawing?J=!0:(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&e.resize()}},!0);function oe(Ce,te,Oe){if(n(Ce)&&(Ce=ee||e),!!Ce.parent){if(n(te)||n(Oe)){var Re=Ce.parent.localToGlobal(Ce.x,Ce.y);fe=U=0,e.zimBoundary&&(u?(ue=t.boundsToGlobal(Ce.parent,e.zimBoundary),C&&(ke=Ce.zimBoundary)):(ue=e.zimBoundary,C&&(ke=t.boundsToGlobal(Ce.parent,e.zimBoundary,!0)))),te=Re.x,Oe=Re.y,h&&(o=Ce.x,S=Ce.y,ee=Ce)}var Xe;le&&le.type?Xe=Ce.parent.globalToLocal(te,Oe):Xe=Ce.parent.globalToLocal(te*t.scaX,Oe*t.scaY);var Qe=i=="both"||i=="horizontal",it=i=="both"||i=="vertical",Be;h&&k?k=="vertical"?(Be=ae(Ce,Xe.x-fe,Xe.y-U),Qe&&(Ce.x=Be.x),it&&(Ce.y=Xe.y-U)):k=="horizontal"?(Be=ae(Ce,Xe.x-fe,Xe.y-U),Qe&&(Ce.x=Xe.x-fe),it&&(Ce.y=Be.y)):(Qe&&(Ce.x=Xe.x-fe),it&&(Ce.y=Xe.y-U)):(Be=ae(Ce,Xe.x-fe,Xe.y-U),Qe&&(Ce.x=Be.x),it&&(Ce.y=Be.y)),h&&!N&&(Ce.slideStartX!=Ce.x||Ce.slideStartY!=Ce.y)&&(N=!0)}}e.zimPosition=oe,e.zimUp=e.on("pressup",function(Ce){Me(Ce)},!0);function Me(Ce,te){if(!(B&&!te&&!e.pointers["id"+Math.abs(Ce.pointerID+1)])){ye=!1;var Oe="id"+Math.abs(Ce.pointerID+1);if(delete e.pointers[Oe],!(!e.downCheck||e.dragPaused)){if(e.cur(n(l)?"pointer":l),h){if(ee.dispatchEvent("slidestart"),ee.parent){var Re=p?Ce.rawX:Ce.stageX,Xe=p?Ce.rawY:Ce.stageY;ne=ee.parent.globalToLocal(Re/t.scaX,Xe/t.scaY)}else ne=new t.Point(0,0);L=ne.x,c=ne.y,d=Date.now(),z=L-X,ce=c-m;var Qe=d-O;ie=t.constrain(z*se/Qe,-xe,xe),q=t.constrain(ce*se/Qe,-xe,xe),Ie=!1,K=!1,e.downCheck=!1,o=ee.x,S=ee.y,te&&(X=L=0,m=c=0,O=d=0)}else{e.downCheck=!1;var it=0;for(var Be in e.pointers)it++;it==0&&t.Ticker.remove(e.zimDragTicker),e.type=="Pen"&&(e.zimDragCheck=!1,J&&e.drawing&&e.stopCheck())}e.stage&&e.stage.update()}}}function ae(Ce,te,Oe){if(!Ce.parent)return{x:te,y:Oe};if(ue)if(C){var Re=Ce.getBounds().width,Xe=Ce.getBounds().height,Qe=Ce.getBounds().x,it=Ce.getBounds().y;Re<ke.width?te=ke.x+(ke.width-Re)/2+(Ce.regX-Qe):(te-(Ce.regX-Qe)>ke.x&&(te=ke.x+(Ce.regX-Qe)),te-(Ce.regX-Qe)+Re<ke.x+ke.width&&(te=ke.x+ke.width+(Ce.regX-Qe)-Re)),Ce.height<ke.height?Oe=ke.y+(ke.height-Xe)/2+(Ce.regY-it):(Oe-(Ce.regY-it)>ke.y&&(Oe=ke.y+(Ce.regY-it)),Oe-(Ce.regY-it)+Xe<ke.y+ke.height&&(Oe=ke.y+ke.height+(Ce.regY-it)-Xe))}else{if(ue.type=="Blob")return ue.shape.hitTestPoint(te,Oe)?{x:te,y:Oe}:{x:e.x,y:e.y};if(ne=Ce.parent.localToGlobal(te,Oe),e.circleBounds){var Be=ue.x+ue.width/2,Ke=ue.y+ue.height/2,He=e.circleBounds;if(t.dist(Be,Ke,ne.x,ne.y)<=He)te=ne.x,Oe=ne.y;else{var he=t.angle(Be,Ke,ne.x,ne.y)*RAD;te=Be+He*Math.cos(he),Oe=Ke+He*Math.sin(he)}}else te=Math.max(ue.x,Math.min(ue.x+ue.width,ne.x)),Oe=Math.max(ue.y,Math.min(ue.y+ue.height,ne.y));ne=Ce.parent.globalToLocal(te,Oe),te=ne.x,Oe=ne.y}return{x:te,y:Oe}}function Se(Ce,te,Oe,Re,Xe){Math.abs(Ce.x-de)<.1&&Math.abs(Ce.y-R)<.1?(e.zimDragMoving=!1,Ce.x=Re,Ce.y=Xe,Ce.slideStartX=null,Ce.slideStartY=null,N&&(Ce.dispatchEvent("slidestop"),t.Ticker.remove(e.zimDragTicker)),e.type=="Pen"&&(e.zimDragCheck=!1,J&&e.drawing&&e.stopCheck())):(de=te,R=Oe)}function Le(){e.zimDragTicker=function(){if(!n(e.slideStartX))if(ee||(ee=e),e.downCheck){var Ce;ee.parent?Ce=ee.parent.globalToLocal(e.dragMouseX,e.dragMouseY):Ce=new t.Point(0,0),$++,Q.push(Ce.x),re.push(Ce.y),G.push(Date.now()),$>=Z?(X=Q.shift(),m=re.shift(),O=G.shift()):(X=Q[0],m=re[0],O=G[0])}else{if(!e.zimDragMoving)return;z=ie,ce=q;var te,Oe;i==BOTH?(te=ee.x+z,Oe=ee.y+ce):i==HORIZONTAL?(te=ee.x+z,Oe=ee.y):i==VERTICAL&&(te=ee.x,Oe=ee.y+ce),ie=z*g,q=ce*g;var Re;ue&&(Re=ae(ee,te,Oe),(k===!0||k=="horizontal")&&(Math.round(te)!=Math.round(Re.x)&&(Ie||(V.immediate(te),Ie=!0),ie=0,te=V.convert(Re.x)),k=="horizontal"&&(Oe=Re.y)),(k===!0||k=="vertical")&&(Math.round(Oe)!=Math.round(Re.y)&&(K||(K=!0,b.immediate(Oe),q=0),Oe=b.convert(Re.y)),k=="vertical"&&(te=Re.x)),k||(te=Re.x,Oe=Re.y)),ee.x=te,ee.y=Oe,Se(ee,ee.x,ee.y,te,Oe)}}}return e},t.noDrag=function(e,r){if(De("32"),n(e)||!e.on)return;if(n(r)&&(r=!0),r&&e.numChildren&&e.numChildren>1)for(var i=0;i<e.numChildren;i++){var l=e.getChildAt(i);a(l)}a(e);function a(s){s.cur&&s.cur("default"),s._draggable=!1,t.setSwipe(s,!0),s.off("added",s.zimAdded),s.off("removed",s.zimRemoved),s.off("mousedown",s.zimDown),s.off("pressmove",s.zimMove),s.off("pressup",s.zimUp),s.zmu&&(s.stage?s.stage.frame.off("mouseupplus",s.zmu):j.zdf.off("mouseupplus",s.zmu)),t.Ticker&&(s.zimDragSlide&&t.Ticker.remove(s.zimDragSlide),s.zimDragTicker&&t.Ticker.remove(s.zimDragTicker)),s.zimDragMoving=s.zimAdded=s.zimRemoved=s.zimDown=s.zimMove=s.zimUp=s.zimBoundary=s.zimDragSlide=null,s.slideStartX=s.slideStartY=s.zimDragImmediate=null,s.dragMouseX=s.zimPosition=s.dragMouseY=s.zimDown=s.zimUp=null,s.zimDragTicker=s.zimDragSlide=null}return e},t.dragBoundary=function(e,r){if(De("33"),!(n(e)||!e.on))return e.zimBoundary=r,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},t.dragRect=t.dragBoundary,t.mouse=function(e){return De("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e.zimLastMouseEnabled=!0,e},t.noMouse=function(e){return De("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e.zimLastMouseEnabled=!1,e},t.wire=function(e,r,i,l,a,s,f,u){var v="source, target, prop, twoWay, setSource, filter, call, input",C;if(C=at(t.wire,arguments,v))return C;if(De("33.2"),n(t.Ticker)&&ht)return je("wire() - requires ZIM Frame"),e;if(n(r)&&ht)return je("wire() - requires a target"),e;var h=t.DEFAULTWIRE;return j.DEFAULTWIRE!=null&&(h=j.DEFAULTWIRE),n(u)&&(h&&h!="currentValue"&&h!="selectedIndex"||h&&Object.prototype.hasOwnProperty.call(e,h)?u=h:Object.prototype.hasOwnProperty.call(e,"currentValue")?u="currentValue":Object.prototype.hasOwnProperty.call(e,"selectedIndex")?u="selectedIndex":u=i),n(i)&&(i=u),e.addChild&&(e.zimWire=!0),r.addChild&&(r.zimWired=!0),t.Ticker.addWire(e,[r,i,l,a,s,f,u]),e},t.noWire=function(e,r,i,l){var a="source, target, prop, input",s;return(s=at(t.noWire,arguments,a))?s:(De("33.25"),n(t.Ticker)&&ht?(je("noWire() - requires ZIM Frame"),e):(t.Ticker.removeWire(e,r,i,l),e))},t.wired=function(e,r,i,l,a,s,f,u){var v="target, source, prop, twoWay, setSource, filter, call, input",C;return(C=at(t.wired,arguments,v))?C:(De("33.3"),n(t.Ticker)&&ht?(je("wired() - requires ZIM Frame"),e):(t.wire(r,e,i,l,a,s,f,u),e))},t.noWired=function(e,r,i,l){var a="target, source, prop, input",s;return(s=at(t.noWire,arguments,a))?s:(De("33.35"),n(t.Ticker)&&ht?(je("noWired() - requires ZIM Frame"),e):(t.Ticker.removeWire(r,e,i,l),e))},typeof Tt>"u")var Tt;if(t.bind=function(e,r,i,l,a,s){var f="obj, id, props, extra, filter, bindObj",u;if(u=at(t.bind,arguments,f))return u;if(De("33.17"),!Tt)return ht&&je("bind() - needs a Bind() object created first"),e;if(n(r))return ht&&je("bind() - needs a unique id"),e;var v=s||Tt;return v.add(r,e,i,l,a),e},t.noBind=function(e,r,i,l,a){var s="obj, props, removeConnectionData, call, bindObj",f;if(f=at(t.noBind,arguments,s))return f;if(De("33.18"),!Tt)return e;var u=a||Tt;return u.remove(e,r,i,l),e},t.transform=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b){var Z="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame",$;if($=at(t.transform,arguments,Z))return $;if(e.type=="AC"&&j.zdf)return j.zdf.ac("transform",arguments),e;if(De("33.5"),n(e)||!e.getBounds)return je("zim methods - transform(): please provide object with bounds set"),e;if(!e.getBounds())return je("zim methods - transform(): please setBounds() on object"),e;if(!e.parent)return je("zim methods - transform(): object should be on stage first"),e;n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!0),e.width==0&&(i=!1),e.height==0&&(l=!1),n(a)&&(a=!0),n(s)&&(s=!0);var Q=t.mobile();n(f)&&(f=!0),n(u)&&(u=!0),n(v)&&(v=!0),n(C)&&(C=!!Q),n(h)&&(h=!!Q),n(g)&&(g=!0),n(k)&&(k=!0),n(y)&&(y=!0),n(x)&&(x="brown"),n(I)&&(I=1),n(P)&&(P=null),n(Y)&&(Y=null),P<0||Y<0?P=Y=null:P!=null&&Y==null&&(Y=1),n(_)&&(_=!0),n(V)&&(V=!1),n(b)&&(b=j.zdf),n(E)&&(E=!Q),n(A)&&(A=Q?20:10),n(p)&&(p=16),n(T)&&(T=10),n(B)&&(B=5),n(F)&&(F=!0),n(D)&&(D=!1),(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&(D=!0),e.mouseChildren=!1;var re=e.getConcatenatedMatrix().decompose(),G=e.stage?e.stage:b.stage;n(b.eventRemove)&&(G.enableMouseOver(),b.ctrlKey=!1,b.shiftKey=!1,j.addEventListener("keydown",function(Ne){b.altKey=Ne.altKey,b.ctrlKey=Ne.ctrlKey}),j.addEventListener("keyup",function(Ne){b.altKey=Ne.altKey,b.ctrlKey=Ne.ctrlKey}));var L=e.getBounds(),c=new t.Shape({style:!1}),d=new t.Shape({style:!1}),o=new t.Shape({style:!1});d.mouseEnabled=!1,o.controlType="reg";var S=e.parent,X=c.graphics,m=d.graphics,O=o.graphics,de,R,N,se,ie,q,z,ce,Ie,K=new t.Container({style:!1});K.type="TransformControls";var xe=new t.Container({style:!1}),J=new t.Container({style:!1}),fe=new t.Container({style:!1}),U=new t.Container({style:!1}),ue,ke,ne,ve,we;n(e.zimMaskDynamic)||e.zimMaskApply();function ee(Ne,ct){Ne==ct&&new t.Triangle(16,12,12,"white",null,null,0).addTo(Ne).mov(0,-13.5),new t.Triangle(16,12,12,"white",null,null,0).addTo(Ne).mov(13.5).rot(90),Ne==ct&&new t.Triangle(16,12,12,"white",null,null,0).addTo(Ne).mov(0,13.5).rot(180),new t.Triangle(16,12,12,"white",null,null,0).addTo(Ne).mov(-13.5).rot(-90),Ne==ct&&new t.Triangle(10,7,7,"black",null,null,0).addTo(Ne).mov(0,-13),new t.Triangle(10,7,7,"black",null,null,0).addTo(Ne).mov(13).rot(90),Ne==ct&&new t.Triangle(10,7,7,"black",null,null,0).addTo(Ne).mov(0,13).rot(180),new t.Triangle(10,7,7,"black",null,null,0).addTo(Ne).mov(-13).rot(-90),F&&Ne.cache(-20,-20,40,40)}if(E){var le=new t.Container({style:!1}),ye=new t.Container({style:!1});ee(le,le),ee(ye,le);var oe={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function Me(){var Ne=e;for(ue=0,ke=1,ne=1,ve=0,we=0;Ne.parent;)ue+=Ne.rotation,ke*=Ne.scaleX,ne*=Ne.scaleY,ve+=Ne.skewX,we+=Ne.skewY,Ne=Ne.parent}Me();var ae=ue,Se=["nw-resize","ne-resize","nw-resize","ne-resize"],Le=[2,3,0,1],Ce,te;for(te=0;te<4;te++)g?(Ce=new t.Rectangle(A,A,t.pink,t.grey,2,null,null,null,null,!1),Ce.centerReg(xe),F&&Ce.cache(-1,-1,A+2,A+2)):(Ce=new t.Rectangle(A,A,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1),Ce.centerReg(xe),Ce.expand(0)),Ce.rotation=ue,z=E?"none":Se[te],Ce.drag({overCursor:z,dragCursor:z,onTop:!1}),Ce.controlType="corner",Ce.cu=Se[te];for(te=0;te<Le.length;te++)xe.getChildAt(te).op=xe.getChildAt(Le[te]);var Oe=["n-resize","e-resize","n-resize","e-resize"];for(Le=[1,1,0,0],te=0;te<4;te++){var Re=te%2==0?e.width/2:A,Xe=te%2==0?A:e.height/2;C?(Ce=new t.Rectangle(A,A,t.fog,t.dark,2,null,null,null,null,!1),Ce.centerReg(te%2==0?fe:J),F&&Ce.cache(-1,-1,A+2,A+2)):(Ce=new t.Rectangle(Re,Xe,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),Ce.centerReg(te%2==0?fe:J),Ce.expand(0)),Ce.rotation=ue,z=E?"none":Oe[te],Ce.drag({overCursor:z,dragCursor:z,onTop:!1}),Ce.controlType="side",Ce.cu=Oe[te]}for(te=0;te<Le.length;te++){var Qe=te%2==0?fe:J;Qe.getChildAt(Math.floor(te/2)).op=Qe.getChildAt(Le[te])}var it=["ne-resize","nw-resize","ne-resize","nw-resize"];for(te=0;te<4;te++)h?(Ce=new t.Circle(A,t.pink,null,null,null,null,null,null,!1),Ce.addTo(U),F&&Ce.cache(-A,-A,A*2,A*2)):(Ce=new t.Circle(A,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),Ce.addTo(U),Ce.expand(0)),z=E?"none":it[te],Ce.drag({overCursor:z,dragCursor:z,onTop:!1}),Ce.controlType="rotate",Ce.cu=it[te];var Be=1.8;U.alpha=.5,Ke();function Ke(){var Ne=A*Be*t.sign(ke),ct=A*Be*t.sign(ne);U.getChildAt(0).reg(Ne,ct),U.getChildAt(1).reg(-Ne,ct),U.getChildAt(2).reg(-Ne,-ct),U.getChildAt(3).reg(Ne,-ct),G.update()}function He(){X.c(),m.c(),O.c(),de=e.localToGlobal(L.x,L.y),R=e.localToGlobal(L.x+L.width,L.y),N=e.localToGlobal(L.x+L.width,L.y+L.height),se=e.localToGlobal(L.x,L.y+L.height);var Ne=e.localToGlobal(L.x+L.width/2,L.y),ct=e.localToGlobal(L.x+L.width,L.y+L.height/2),Rt=e.localToGlobal(L.x+L.width/2,L.y+L.height),Ht=e.localToGlobal(L.x,L.y+L.height/2);ie=e.localToGlobal(e.regX,e.regY),q=e.localToGlobal(L.x+L.width/2,L.y+L.height/2),Ie=[de,R,N,se],ce=[Ne,ct,Rt,Ht],y&&(X.s(x),w&&X.sd([10,5],0),X.ss(I).mt(de.x,de.y).lt(R.x,R.y).lt(N.x,N.y).lt(se.x,se.y).lt(de.x,de.y).cp()),n(P)||(m.s(P),_&&m.sd([10,5],0),m.ss(Y).mt(de.x,de.y).lt(R.x,R.y).lt(N.x,N.y).lt(se.x,se.y).lt(de.x,de.y).cp()),c.setBounds(de.x,de.y,R.x-de.x,se.y-de.y),k&&(O.s("#eee").ss(I).f("rgba(0,0,0,.1)").dc(0,0,p),O.s("#222").ss(I).dc(0,0,p*.3)),Me();for(var fn=Math.min(50,Math.abs(ve))*t.sign(ve),rn=Math.min(50,Math.abs(we))*t.sign(we),$t=ue*t.sign(ke*ne)*t.sign(e.scaleX*e.scaleY),xt=0;xt<Ie.length;xt++){var Yt=Ie[xt];xe.getChildAt(xt).loc(Yt.x,Yt.y).ske(fn,rn).rot($t),U.getChildAt(xt).loc(Yt.x,Yt.y).rot($t);var un=ce[xt],dn=xt%2==0?fe:J;dn.getChildAt(Math.floor(xt/2)).loc(un.x,un.y).ske(fn,rn).rot($t),C||dn.getChildAt(Math.floor(xt/2)).sca(xt%2==0?ke/2:1,xt%2==0?1:ne/2)}o.x=ie.x,o.y=ie.y}He();var he=new t.Shape(1e3,1e3,null,null,null,!1);function me(){he.x=0,he.y=0,he.graphics.c().f("rgba(0,0,0,.01)").mt(de.x,de.y).lt(R.x,R.y).lt(N.x,N.y).lt(se.x,se.y).lt(de.x,de.y).cp(),he.reg(ie.x,ie.y),he.x=ie.x,he.y=ie.y}me(),K.on("dblclick",function(Ne){b.ctrlKey&&e.transformControls.visible&&(e.scaleX=1,e.scaleY=1,e.rotation=0,He(),me(),G.update()),Zt(Ne,!0)});var Te=K.on("mousedown",st),ze=e.on("mousedown",st);function st(Ne){var ct=G.getObjectUnderPoint(Ne.stageX,Ne.stageY,1);Q||ct&&(e.contains&&e.contains(ct)||!e.contains&&e==ct)?e.transformControls.visible||(E?(vt=!1,he.mouseEnabled=!1):b.canvas.style.cursor="move",e.transformControls.show(),e.dispatchEvent("transformshow")):e.transformControls.visible&&(!ct||!K.contains(ct))&&(e.transformControls.hide(),e.dispatchEvent("transformhide"))}var Ye=G.on("stagemousedown",function(Ne){var ct=G.getObjectUnderPoint(Ne.stageX,Ne.stageY,1),Rt=ct&&ct.parent&&ct.parent.layer&&ct.parent.layer==e;e.transformControls.visible&&(!ct||!K.contains(ct)&&!Rt)&&(e.dispatchEvent("transformhide"),e.transformControls.hide())});f||(K.off("mousedown",Te),e.off("mousedown",ze),G.off("stagemousedown",Ye));var nt,pe,Je,be,Ee,_e,Ge,Ue,tt,Ae,Ze,lt,Ve,ft=!1,ot=!1,ut,$e,Pt=e.cursor,yt,wt=new t.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(E){wt.mouseEnabled=!1,wt.mouseChildren=!1,wt.addChild(ye),xe.on("mouseover",Ut),xe.on("mouseout",qe),J.on("mouseover",Ut),J.on("mouseout",qe),fe.on("mouseover",Ut),fe.on("mouseout",qe),U.on("mouseover",Ut),U.on("mouseout",qe);var Ft=new t.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);Ft.cursor="none"}xe.on("mousedown",_t),xe.on("pressmove",Jt),xe.on("pressup",Zt),J.on("mousedown",_t),J.on("pressmove",Jt),J.on("pressup",Zt),fe.on("mousedown",_t),fe.on("pressmove",Jt),fe.on("pressup",Zt),U.on("mousedown",_t),U.on("pressmove",nn),U.on("pressup",Zt);function _t(Ne){if(ot=!0,v&&gt(),ut&&G.off("stagemousemove",ut),nt=Ne.target.x,pe=Ne.target.y,Ae=e.x,Ze=e.y,Je=e.scaleX,be=e.scaleY,Ne.target.controlType=="rotate"){ft=!0,Ee=e.rotation;var ct=Ne.stageX/t.scaX,Rt=Ne.stageY/t.scaY,Ht=S.localToGlobal(Ae,Ze);lt=Ht.x,Ve=Ht.y,_e=Math.atan2(Rt-Ve,ct-lt)*180/Math.PI}b.ctrlKey||Ne.target.controlType=="rotate"?(Ge=Math.abs(nt-e.x),Ue=Math.abs(pe-e.y)):(Ge=Math.abs(nt-Ne.target.op.x),Ue=Math.abs(pe-Ne.target.op.y)),Ne.target.controlType!="rotate"&&(tt=Ne.target.op.parent.localToLocal(Ne.target.op.x,Ne.target.op.y,e.parent)),wt.stage?G.setChildIndex(wt,G.getChildIndex(K)):wt.addTo(G,G.getChildIndex(K)+1),wt.x=Ne.stageX/t.scaX,wt.y=Ne.stageY/t.scaY,wt.cursor=E?"none":Ne.target.cu,E&&(e.getConcatenatedMatrix().decompose(re),re.rotation||(re.rotation=0),ye.rotation=re.rotation*t.sign(ke*ne)*t.sign(e.scaleX*e.scaleY)+oe[Ne.target.cu]+ae,Ne.target.controlType!="side"&&ke*ne<0&&(ye.rotation+=90),Ft.addTo(G,1).pos({x:Ne.stageX/t.scaX,y:Ne.stageY/t.scaY,reg:!0})),he.visible=!1,e.cursor="none"}function Jt(Ne){var ct=1;if(b.ctrlKey&&Ne.target.controlType=="corner"?ct=Ge>Ue?(Ne.target.x-Ae)/(nt-Ae):(Ne.target.y-Ze)/(pe-Ze):Ge>Ue?nt-Ne.target.op.x&&(ct=(Ne.target.x-Ne.target.op.x)/(nt-Ne.target.op.x)):pe-Ne.target.op.y&&(ct=(Ne.target.y-Ne.target.op.y)/(pe-Ne.target.op.y)),Ne.target.controlType=="corner"?(e.scaleX=ct*Je,e.scaleY=ct*be):(e.scaleX=Ne.target.cu=="e-resize"?ct*Je:Je,e.scaleY=Ne.target.cu=="n-resize"?ct*be:be),He(),wt.x=Ne.stageX/t.scaX,wt.y=Ne.stageY/t.scaY,E&&(Ft.x=Ne.stageX/t.scaX,Ft.y=Ne.stageY/t.scaY),!b.ctrlKey||Ne.target.controlType=="side"){var Rt=Ne.target.op.parent.localToLocal(Ne.target.op.x,Ne.target.op.y,e.parent);e.x-=(Rt.x-tt.x)*t.sign(ke)*t.sign(e.scaleX),e.y-=(Rt.y-tt.y)*t.sign(ne)*t.sign(e.scaleY)}if(He(),e.transformControls.events){var Ht=Ne.target.controlType;Et(Ne,Ht)}}function nn(Ne){var ct=Math.atan2(Ne.stageY/t.scaY-Ve,Ne.stageX/t.scaX-lt)*180/Math.PI;if(b.shiftKey?e.rot(Math.round((Ee+(ct-_e)*t.sign(ke)*t.sign(e.scaleX))/45)*45):e.rot(Ee+(ct-_e)*t.sign(ke)*t.sign(e.scaleX)),He(),wt.x=Ne.stageX/t.scaX,wt.y=Ne.stageY/t.scaY,E&&(e.getConcatenatedMatrix().decompose(re),re.rotation||(re.rotation=0),ye.rotation=re.rotation*t.sign(ke*ne)*t.sign(e.scaleX*e.scaleY)+oe[Ne.target.cu]+ae,Ne.target.controlType!="side"&&ke*ne<0&&(ye.rotation+=90),Ft.x=Ne.stageX/t.scaX,Ft.y=Ne.stageY/t.scaY),He(),e.transformControls.events){var Rt=Ne.target.controlType;Et(Ne,Rt,null,!1)}}function Zt(Ne,ct){Ke();var Rt=Ne?Ne.target.controlType:"move";ct&&(Rt="reset"),E&&Ft.removeFrom(G),Et(Ne,Rt,!0),G.update()}function Et(Ne,ct,Rt,Ht){Ht==null&&(Ht=!0);var fn=!1;yt=null,ct=="move"?((e.x!=Gt.x||e.y!=Gt.y)&&(yt=new Fe.Event("transformed"),yt.transformType="move"),Ht&&(fn=he.hitTestPoint(Ne.stageX/t.scaX,Ne.stageY/t.scaY))):ct=="corner"?((e.scaleX!=Gt.scaleX||e.scaleY!=Gt.scaleY)&&(yt=new Fe.Event("transformed"),yt.transformType="size"),Ht&&(fn=xe.hitTestPoint(Ne.stageX/t.scaX,Ne.stageY/t.scaY))):ct=="side"?((e.scaleX!=Gt.scaleX||e.scaleY!=Gt.scaleY)&&(yt=new Fe.Event("transformed"),yt.transformType="stretch"),Ht&&(fn=J.hitTestPoint(Ne.stageX/t.scaX,Ne.stageY/t.scaY)||fe.hitTestPoint(Ne.stageX/t.scaX,Ne.stageY/t.scaY))):ct=="rotate"?(e.rotation!=Gt.rotation&&(yt=new Fe.Event("transformed"),yt.transformType="rotate"),Ht&&(fn=U.hitTestPoint(Ne.stageX/t.scaX,Ne.stageY/t.scaY))):ct=="reg"?(e.regX!=Gt.regX||e.regY!=Gt.regY)&&(yt=new Fe.Event("transformed"),yt.transformType="reg"):ct=="reset"?(yt=new Fe.Event("transformed"),yt.transformType="reset"):(yt=new Fe.Event("transformed"),yt.transformType="unknown"),Ht&&!fn&&(wt.removeFrom(G),b.canvas.style.cursor="default",e.cursor=Pt),yt&&(yt.pressup=Rt,(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&e.resize(),e.dispatchEvent(yt))}function Ut(Ne){ot||(wt.stage?G.setChildIndex(wt,G.getChildIndex(K)):wt.addTo(G,G.getChildIndex(K)+1),Ft.addTo(G,1),wt.x=Ne.stageX/t.scaX,wt.y=Ne.stageY/t.scaY,Ft.x=Ne.stageX/t.scaX,Ft.y=Ne.stageY/t.scaY,e.getConcatenatedMatrix().decompose(re),re.rotation||(re.rotation=0),ye.rotation=re.rotation*t.sign(ke*ne)*t.sign(e.scaleX*e.scaleY)+oe[Ne.target.cu]+ae,Ne.target.controlType!="side"&&ke*ne<0&&(ye.rotation+=90),G.update(),ut&&G.off("stagemousemove",ut),ut=G.on("stagemousemove",function(ct){wt.x=ct.stageX/t.scaX,wt.y=ct.stageY/t.scaY,G.update()}))}function qe(){G.off("stagemousemove",ut),!ot&&(e.cursor=Pt,wt.removeFrom(G),Ft.removeFrom(G),G.update())}function gt(){if(v){var Ne=S.numChildren-1;S.getChildAt(Ne).type=="Keyboard"&&Ne--,S.setChildIndex(e,Ne),St()}}function St(){if(S==G)K.removeFrom(),G.addChildAt(K,G.getChildIndex(e)+1);else{for(var Ne=S;Ne.parent&&Ne.parent!=G;)Ne=Ne.parent;e.stage&&(K.parent==G&&G.removeChild(K),G.addChildAt(K,G.getChildIndex(Ne)+1))}}var Ct,Bt;o.drag(),o.on("mousedown",gt),o.on("pressup",function(Ne){if(!b.ctrlKey){for(var ct=0;ct<Ie.length;ct++)if(t.dist(o.x,o.y,Ie[ct].x,Ie[ct].y)<T){o.x=Ie[ct].x,o.y=Ie[ct].y;break}t.dist(o.x,o.y,q.x,q.y)<T&&(o.x=q.x,o.y=q.y)}var Rt=e.rotation;Ct=e.globalToLocal(o.x,o.y),S==G?Bt=new t.Point(o.x,o.y):Bt=S.globalToLocal(o.x,o.y),e.reg(Ct.x,Ct.y),e.rotation=0,e.x=e.x+Bt.x-e.x,e.y=e.y+Bt.y-e.y,e.rotation=Rt,He(),me(),Zt(Ne),G.update()});var vt=!0;z=E?"none":"move",he.drag({overCursor:z,dragCursor:z,onTop:!1}),he.controlType="move",E&&(he.on("mouseover",Vt),he.on("mouseout",bt));function bt(){G.off("stagemousemove",$e),!ot&&(le.removeFrom(K),G.update())}function Vt(Ne){ot||!E||!vt||(le.addTo(K).pos({x:Ne.stageX/t.scaX,y:Ne.stageY/t.scaY,reg:!0}),G.update(),$e&&G.off("stagemousemove",$e),$e=G.on("stagemousemove",function(ct){le.x=ct.stageX/t.scaX,le.y=ct.stageY/t.scaY,G.update()}))}he.on("mousedown",gt),he.on("pressmove",function(Ne){if(e.transformControls.visible){var ct;if(S==G?ct=new t.Point(he.x,he.y):ct=S.globalToLocal(he.x,he.y),e.x=ct.x,e.y=ct.y,He(),e.transformControls.events){var Rt="move";Et(Ne,Rt)}}}),he.on("pressup",function(Ne){e.transformControls.visible&&Zt(Ne)});var qt=G.on("stagemouseup",function(){ot=!1,he.mouseEnabled=!0,vt||(yt=new Fe.Event("transformed"),e.x!=Gt.x||e.y!=Gt.y?yt.transformType="move":yt.transformType="select",yt.pressup=!0,e.dispatchEvent(yt)),vt=!0,he.visible=!0,ft&&!b.ctrlKey&&B>1&&(e.rotation=Math.round(e.rotation/B)*B,He()),me(),he.mouseEnabled=!0,ft=!1,G.update()});function jt(){Gt={x:e.x,y:e.y,rotation:e.rotation,regX:e.regX,regY:e.regY,scaleX:e.scaleX,scaleY:e.scaleY}}var Gt;jt();var pn=e.on("mousedown",jt);K.on("mousedown",jt),K.addChild(c),r&&K.addChild(he),a&&K.addChild(xe),i&&K.addChild(J),l&&K.addChild(fe),s&&K.addChild(U),K.addChild(o);var Kt;r&&(e.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Kt=e.on("pressmove",function(Ne){if(He(),me(),Ke(),e.transformControls.events){var ct="move";Et(Ne,ct)}}));var Mn=f;return e.transformControls={visible:u,events:D,ghost:!n(P),ghostEnabled:!n(P),show:function(){return v&&gt(),St(),e.toggled=!0,e.transformControls.visible=!0,d.parent&&d.removeFrom(),G.update(),e},hide:function(){if(e.transformControls.ghost)var Ne=G.getChildIndex(K);return G.removeChild(K),e.transformControls.ghost&&e.transformControls.ghostEnabled&&G.addChildAt(d,Ne),e.toggled=!1,e.transformControls.visible=!1,E&&(ut&&G.off("stagemousemove",ut),$e&&G.off("stagemousemove",$e),ot=!1,wt.removeFrom(G),Ft.removeFrom(G)),r||e.cur(Pt),G.update(),e},remove:function(Ne){Ne||e.transformControls.hide(),f=!1,r&&(e.noDrag(),e.off("pressmove",Kt))},add:function(Ne){Ne||e.transformControls.show(),f=Mn,r&&(e.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Kt=e.on("pressmove",Kt))},allowToggleOn:function(){f=Mn=!0,Te=K.on("mousedown",Te),ze=e.on("mousedown",ze),Ye=G.on("stagemousedown",Ye)},allowToggleOff:function(){f=Mn=!1,K.off("mousedown",Te),e.off("mousedown",ze),G.off("stagemousedown",Ye)},disable:function(){K.mouseChildren=!1,K.mouseEnabled=!1,r&&(e.noDrag(),e.off("pressmove",Kt))},enable:function(){K.mouseChildren=!0,K.mouseEnabled=!0,r&&(e.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Kt=e.on("pressmove",Kt))},recordData:function(Ne){var ct={type:e.type,index:S.getChildIndex(e),x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY,rotation:e.rotation,skewX:e.skewX,skewY:e.skewY,regX:e.regX,regY:e.regY,controls:e.transformControls.visible};return Ne?JSON.stringify(ct):ct},setData:function(Ne,ct){if(!n(Ne)){ct&&(Ne=JSON.parse(Ne)),delete Ne.controls;var Rt=Ne.index;n(Rt)&&(Rt=0),delete Ne.index;for(var Ht in Ne)e[Ht]=Ne[Ht];return setTimeout(function(){He(),me(),Ke(),S.setChildIndex(e,Rt),e.transformControls.visible&&e.type!="Layer"?e.transformControls.show():e.transformControls.hide(),e.transformControls.ghost&&!e.transformControls.ghostEnabled&&!e.transformControls.visible&&G.addChild(d)},90),e}},hideGhost:function(){e.transformControls.ghost=!1,d.removeFrom()},showGhost:function(){if(e.transformControls.ghost=!0,e.transformControls.ghostEnabled&&!e.transformControls.visible){for(var Ne=S;Ne.parent&&Ne.parent!=G;)Ne=Ne.parent;d.stage?G.setChildIndex(d,G.getChildIndex(Ne)+1):G.addChildAt(d,G.getChildIndex(Ne)+1)}},addGhost:function(){Y>0?(e.transformControls.ghostEnabled=!0,e.transformControls.showGhost()):ht&&je("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){e.transformControls.ghostEnabled=!1,e.transformControls.hideGhost()},resize:function(Ne){if(S=e.parent,He(),me(),Ke(),u&&e.transformControls.show(),Ne){var ct=new Fe.Event("transformed");ct.pressup=!0,ct.transformType="resize",e.dispatchEvent(ct)}return e},dispose:function(){e.transformControls.hide(),f=!1,r&&(e.noDrag(),e.off("pressmove",Kt)),e.transformControls.hideGhost(),he.removeAllEventListeners(),U.removeAllEventListeners(),o.removeAllEventListeners(),J.removeAllEventListeners(),fe.removeAllEventListeners(),xe.removeAllEventListeners(),K.removeAllEventListeners(),ze&&e.off("mousedown",ze),Te&&e.off("mousedown",Te),Ye&&G.off("stagemousedown",Ye),ut&&G.off("stagemousemove",ut),$e&&G.off("stagemousemove",$e),qt&&G.off("stagemouseup",qt),pn&&e.off("mousedown",pn),Kt&&e.off("pressmove",Kt),K=wt=Ft=null,e.transformControls=null},controls:K,scaleControls:xe,stretchXControls:J,stretchYControls:fe,rotateControls:U},e.toggle=function(Ne){return Ne===!0?e.transformControls.show():Ne===!1||e.transformControls.visible?e.transformControls.hide():e.transformControls.show(),e},e.transformControls.ghost&&(e.transformControls.toggleGhost=function(Ne){return Ne===!0?e.transformControls.showGhost():Ne===!1||e.transformControls.visible?e.transformControls.hideGhost():e.transformControls.showGhost(),e}),u?e.transformControls.show():!V&&e.transformControls.ghost&&e.transformControls.showGhost(),e},t.gesture=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I){var w="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect",E;if(E=at(t.gesture,arguments,w))return E;if(De("34.5"),n(e)||!e.on)return;n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!0),n(v)&&(v=!1),n(u)&&(u=1),n(C)&&(C=!1),n(h)&&(h=5),n(g)&&(g=!1),n(k)&&(k=!0),n(y)&&(y=!1),y&&l&&(y=I=null,ht&&je("gesture() - does not support surround when rotate is true")),n(x)&&(x=!1),n(a)&&!n(I)&&(a=I);var A,p,T,B,F=mt();if(n(e.zimMaskDynamic)||e.zimMaskApply(),!e.zimTouch){var D=new t.Damp(e.scaleX,.05),P=new t.Damp(e.scaleY,.05),Y=e.scaleX/e.scaleY;if(e.zimTouch={move:r,scale:i,rotate:l,pointers:{},checkBounds:function(o,S){if(e.zimTouch.boundary){var X=e.zimTouch.boundary,m=e.parent.localToLocal(o,S,e.parent);y?(o=Math.min(X.x,Math.max(X.x+X.width,m.x)),S=Math.min(X.y,Math.max(X.y+X.height,m.y))):(o=Math.max(X.x,Math.min(X.x+X.width,m.x)),S=Math.max(X.y,Math.min(X.y+X.height,m.y))),m=e.parent.globalToLocal(o,S),o=m.x,S=m.y}return{x:o,y:S}}},a){e.zimTouch.boundary=a,v&&(e.zimTouch.boundary=t.boundsToGlobal(e.parent,a)),e.zimTouch.boundaryStartX=e.zimTouch.boundary.x,e.zimTouch.boundaryStartY=e.zimTouch.boundary.y,e.zimTouch.boundaryStartW=e.zimTouch.boundary.width,e.zimTouch.boundaryStartH=e.zimTouch.boundary.height;var _=e.zimTouch.checkBounds(e.x,e.y);e.x=_.x,e.y=_.y}C&&(T=10,B=5,p=0,A=[],e.zimTouch.slideInterval=t.interval(T/(F=="s"?1e3:1),function(){A[p++%B]=[e.x,e.y]}),e.zimTouch.slideInterval.pause(),e.animate({x:e.x,y:e.y},10/(F=="s"?1e3:1),"quadOut"));var V,b,Z,$,Q,re,G,L;e.zimTouch.mousedown=e.on("mousedown",function(o){if(n(L)?L=1:L++,k){var S=e.parent.numChildren-1;e.parent.getChildAt(S).type=="Keyboard"&&S--,e.parent.setChildIndex(e,S),e.ZIMoutlineShape&&e.outline()}g||(G=null,b=e.scaleX,Z=e.scaleY,$=e.rotation,Q=e.regX,re=e.regY,e.reg(0,0),V=e.getMatrix(),e.regX=Q,e.regY=re);var X="id"+Math.abs(o.pointerID+1),m=e.parent.globalToLocal(o.stageX/t.scaX,o.stageY/t.scaY);e.zimTouch.pointers[X]={startX:m.x,startY:m.y,x:m.x,y:m.y},(e.zimTouch.move||e.zimTouch.rotate)&&(e.zimTouch.total=0,t.loop(e.zimTouch.pointers,function(){e.zimTouch.total++})),C&&e.zimTouch.total==1&&e.zimTouch.slideInterval.pause(!1),c()}),e.zimTouch.pressmove=e.on("pressmove",function(o){var S="id"+Math.abs(o.pointerID+1),X=e.parent.globalToLocal(o.stageX/t.scaX,o.stageY/t.scaY);e.zimTouch.pointers[S]&&(e.zimTouch.pointers[S].x=X.x,e.zimTouch.pointers[S].y=X.y);var m=0,O=0,de=0,R=0,N=0,se=0;if(t.loop(e.zimTouch.pointers,function(le,ye){m+=ye.x-ye.startX,O+=ye.y-ye.startY,de+=ye.x,R+=ye.y}),e.zimTouch.total!=0){N=m/e.zimTouch.total,se=O/e.zimTouch.total,m=e.zimTouch.startX+N,O=e.zimTouch.startY+se,de=de/e.zimTouch.total,R=R/e.zimTouch.total;var ie={x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY,rotation:e.rotation};if(e.zimTouch.move){var q=e.zimTouch.checkBounds(m,O);ie.x=q.x,ie.y=q.y}if(e.zimTouch.pair.length==2){var z=e.zimTouch.pair[0],ce=e.zimTouch.pair[1];if(e.zimTouch.scale){var Ie=Math.sqrt(Math.pow(ce.startX-z.startX,2)+Math.pow(ce.startY-z.startY,2)),K=Math.sqrt(Math.pow(ce.x-z.x,2)+Math.pow(ce.y-z.y,2)),xe=e.zimTouch.startSX+(K/Ie-1),J=e.zimTouch.startSY+(K/Ie-1);ie.scaleX=xe,ie.scaleY=J,ie.scaleX=D.convert(xe),ie.scaleY=P.convert(J);var fe=!n(s)&&Math.min(xe,J)<s,U=!n(f)&&Math.max(xe,J)>f;(fe||U)&&(fe?Y>1?(ie.scaleY=s,ie.scaleX=s*Y):(ie.scaleX=s,ie.scaleY=s/Y):U&&(Y>1?(ie.scaleX=f,ie.scaleY=f/Y):(ie.scaleY=f,ie.scaleX=f*Y)),D.immediate(ie.scaleX),P.immediate(ie.scaleY))}if(e.zimTouch.rotate){var ue=Math.atan2(z.startY-ce.startY,z.startX-ce.startX)*(180/Math.PI),ke=Math.atan2(z.y-ce.y,z.x-ce.x)*(180/Math.PI),ne=ke-ue;ie.rotation=e.zimTouch.startR+ne}if(g)e.scaleX=ie.scaleX,e.scaleY=ie.scaleY,e.rotation=ie.rotation,e.zimTouch.move&&(e.x=ie.x,e.y=ie.y);else{e.reg(0,0);var ve=e.parent.localToGlobal(de,R);de=ve.x,R=ve.y;var we=n(G)?e.globalToLocal(de,R):e.globalToLocal(G.x,G.y),ee=V.clone().translate(we.x,we.y).rotate(ie.rotation-$).scale(ie.scaleX/b,ie.scaleY/Z).translate(-we.x,-we.y);ee.decompose(e),e.zimTouch.move&&(e.x+=N,e.y+=se),G=e.localToGlobal(we.x,we.y),e.reg(Q,re)}e.zimTouch.scale&&e.dispatchEvent("scale"),e.zimTouch.rotate&&e.dispatchEvent("rotate"),e.zimTouch.move&&e.dispatchEvent("move")}else e.x=ie.x,e.y=ie.y,e.zimTouch.move&&e.dispatchEvent("move");(e.type=="Tag"||e.type=="TextArea"||e.type=="Loader")&&e.resize(),e.ZIMoutlineShape&&e.outline(),e.getStage&&e.stage&&e.stage.update()}}),e.on("mousedown",function(){var o=1;e.stage.on("stagemousedown",function(){o++}),e.stage.on("stagemouseup",function(){o--,o==0&&setTimeout(function(){e.zimTouch&&(e.zimTouch.total=0),e.zimTouch&&(e.zimTouch.pointers={}),L=null},50)})},null,!0),e.zimTouch.pressup=e.on("pressup",function(o){var S="id"+Math.abs(o.pointerID+1);if(delete e.zimTouch.pointers[S],(e.zimTouch.move||e.zimTouch.rotate)&&e.zimTouch.total--,l&&!n(u)&&e.zimTouch.total==0&&(u>0?e.rotation=Math.round(e.rotation/u)*u:u==0&&(e.rotation=Math.round(e.rotation))),C&&e.zimTouch.total==0&&L==1){e.zimTouch.slideInterval.pause();var X=A[(p+1)%A.length],m=A[p%A.length],O=e.x+(X[0]-m[0])*h,de=e.y+(X[1]-m[1])*h,R=e.zimTouch.checkBounds(O,de),N=B*T*h*Math.min((e.x-R.x)/(e.x-O)||1,(e.y-R.y)/(e.y-de)||1);e.animate({x:R.x,y:R.y},N/(F=="s"?1e3:1),"quadOut",function(){e.dispatchEvent("slidestop")})}e.zimTouch.total==0&&(L=null),e.getStage&&e.stage&&e.stage.update(),c()}),a&&(d(),e.on("move",d))}function c(){e.zimTouch.pair=[],t.loop(e.zimTouch.pointers,function(o,S,X){S.startX=S.x,S.startY=S.y,X<=1&&e.zimTouch.pair.push(S)}),e.zimTouch.startX=e.x,e.zimTouch.startY=e.y,e.zimTouch.startSX=e.scaleX,e.zimTouch.startSY=e.scaleY,e.zimTouch.startR=e.rotation}function d(){var o=e.localToGlobal(e.regX,e.regY),S;if(x){var X=e.parent.localToGlobal(e.x-e.width/2,e.y-e.height/2),m=e.parent.localToGlobal(e.x+e.width/2,e.y+e.height/2);S={x:X.x,y:X.y,width:m.x-X.x,height:m.y-X.y}}else S=e.boundsToGlobal();var O={x:e.zimTouch.boundaryStartX+o.x-S.x,y:e.zimTouch.boundaryStartY+o.y-S.y,width:e.zimTouch.boundaryStartW-S.width,height:e.zimTouch.boundaryStartH-S.height};e.gestureBoundary(O,!1)}return e},t.noGesture=function(e,r,i,l){var a="obj, move, scale, rotate",s;if(s=at(t.noGesture,arguments,a))return s;if(De("34.6"),!(n(e)||!e.on||!e.zimTouch))return n(r)&&(r=!0),n(i)&&(i=!0),n(l)&&(l=!0),e.zimTouch.move=!r,e.zimTouch.scale=!i,e.zimTouch.rotate=!l,!e.zimTouch.move&&!e.zimTouch.scale&&!e.zimTouch.rotate&&(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e},t.gestureBoundary=function(e,r,i){if(De("34.7"),!(n(e)||!e.on)&&!(n(r)||!e.zimTouch)){e.zimTouch.localBoundary&&e.parent?e.zimTouch.boundary=t.boundsToGlobal(e.parent,r):e.zimTouch.boundary=r,n(i)&&(i=!0),i&&(e.zimTouch.boundaryStartX=r.x,e.zimTouch.boundaryStartY=r.y,e.zimTouch.boundaryStartW=r.width,e.zimTouch.boundaryStartH=r.height);var l=e.zimTouch.checkBounds(e.x,e.y);return e.x=l.x,e.y=l.y,e}},t.effect=function(e,r,i,l,a,s){if(De("33.16"),n(r))return e;n(e.effects)&&(e.effects={}),Array.isArray(r)||(r=[r]);for(var f=0,u=0;u<r.length;u++){var v=r[u];v.type||(v instanceof Fe.BlurFilter?v.type="BlurEffect":v instanceof Fe.ColorFilter?v.type="ColorEffect":v instanceof Fe.AlphaMaskFilter?v.type="AlphaEffect":v instanceof Fe.ColorMatrixFilter?v.type="MultiEffect":n(v.type)&&(v.type="custom"+f++));var C=v.type.replace(/effect/i,"");e.effects[C.toLowerCase()]=v}e.filters=[];for(var h in e.effects)e.filters.push(e.effects[h]);return e.cache(i,l,a,s),e},t.updateEffects=function(e,r){return De("33.163"),e.updateCache&&(r?e.cache():e.updateCache()),e},t.noEffect=function(e,r,i){if(De("33.165"),n(i)&&(i=!1),n(r)){var l;e.effects.multi&&(l=e.effects.multi),e.effects={},l&&(e.effects.multi=l)}else{e.effects||(e.effects={}),Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++){var s=r[a].replace(/effect/i,"");delete e.effects[s.toLowerCase()]}}e.filters=[];for(var f in e.effects)e.filters.push(e.effects[f]);return i||e.filters.length>0?e.updateCache&&e.updateCache():e.uncache&&e.uncache(),e},t.addPhysics=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y){var x="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor",I;if(I=at(t.addPhysics,arguments,x))return I;if(De("34.8"),n(g)){if(typeof zimPhysics>"u")return ht&&je("ZIM Physics module must be imported"),e;n(j.zimDefaultPhysics)&&(j.zimDefaultPhysics=new t.Physics),g=j.zimDefaultPhysics}e.physics=g;var w="rectangle";return e.type=="Circle"||e.type=="Dial"?w="circle":e.type=="Triangle"?w="triangle":e.type=="Blob"&&(w="poly"),n(l)&&(l=w),n(v)&&(v=k),We(e,r,i,l,a,s,f,u,v,C,h,y),e},t.removePhysics=function(e){return De("34.85"),n(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null),e},t.hitTestPoint=function(e,r,i,l){if(t.zimhtp||(De("35"),t.zimhtp=!0),!e.stage||n(r)||n(i))return!1;if(!(n(e)||!e.globalToLocal)){if(n(l)&&(l=!0),l){var a=e.getBounds();if(a){var s=e.globalToLocal(r,i);if(s.x>a.x+a.width||s.x<a.x||s.y>a.y+a.height||s.y<a.y)return!1}}var f={x:r,y:i};return e.image||e.spriteSheet||e.type=="Shape"?f=e.globalToLocal(f.x,f.y):f=e.globalToLocal(f.x*t.scaX,f.y*t.scaY),e.hitTest(f.x,f.y)}},t.hitTestReg=function(e,r,i){if(t.zimhtr||(De("36"),t.zimhtr=!0),!e.stage||!r.stage)return!1;if(!(n(e)||n(r)||!e.localToLocal||!r.localToLocal)){n(i)&&(i=!0);var l=r.localToGlobal(r.regX,r.regY),a=e.getBounds();if(i&&a){var s=e.globalToLocal(l.x,l.y);if(s.x>a.x+a.width||s.x<a.x||s.y>a.y+a.height||s.y<a.y)return!1}return e.image||e.spriteSheet||e.type=="Shape"?l=e.globalToLocal(l.x,l.y):l=e.globalToLocal(l.x*t.scaX,l.y*t.scaY),e.hitTest(l.x,l.y)}},t.hitTestRect=function(e,r,i,l,a){if(t.zimhtr||(De("37"),t.zimhtr=!0),!e.stage||!r.stage)return!1;if(n(e)||n(r)||!e.hitTest||!r.getBounds)return;n(i)&&(i=0),n(l)&&(l=!0);var s=r.getBounds();if(!s){ht&&je(`hitTestRect():
 please setBounds() on param b object`);return}if(l){var f=e.getBounds();if(f&&!t.hitTestBounds(e,r))return!1}function u(x){if(e.image||e.spriteSheet||e.type=="Shape"?x=e.globalToLocal(x.x,x.y):x=e.globalToLocal(x.x*t.scaX,x.y*t.scaY),e.hitTest(x.x,x.y))return!0}var v=s.x+s.width/2,C=s.y+s.height/2,h=r.localToGlobal(v,C),g,k;if(a){if(!u(h))return!1;for(var y=0;y<=i;y++)if(g=s.width*(y+1)/(i+1),k=s.height*(y+1)/(i+1),h=r.localToGlobal(s.x+g,s.y),!u(h)||(h=r.localToGlobal(s.x+s.width,s.y+k),!u(h))||(h=r.localToGlobal(s.x+s.width-g,s.y+s.height),!u(h))||(h=r.localToGlobal(s.x,s.y+s.height-k),!u(h)))return!1;return!0}else{if(u(h))return!0;for(var y=0;y<=i;y++)if(g=s.width*(y+1)/(i+1),k=s.height*(y+1)/(i+1),h=r.localToGlobal(s.x+g,s.y),u(h)||(h=r.localToGlobal(s.x+s.width,s.y+k),u(h))||(h=r.localToGlobal(s.x+s.width-g,s.y+s.height),u(h))||(h=r.localToGlobal(s.x,s.y+s.height-k),u(h)))return!0}},t.hitTestCircle=function(e,r,i,l,a){if(t.zimhtc||(De("38"),t.zimhtr=!0),De("38"),!e.stage||!r.stage||n(e)||n(r)||!e.hitTest||!r.getBounds)return;n(i)&&(i=8),n(l)&&(l=!0);var s=r.getBounds();if(!s){ht&&je(`hitTestCircle():
 please setBounds() on param b object`);return}var f=e.getBounds();if(l&&f&&!t.hitTestBounds(e,r))return!1;function u(w){if(e.image||e.spriteSheet||e.type=="Shape"?w=e.globalToLocal(w.x,w.y):w=e.globalToLocal(w.x*t.scaX,w.y*t.scaY),e.hitTest(w.x,w.y))return!0}var v=s.x+s.width/2,C=s.y+s.height/2,h=r.localToGlobal(v,C),g=(s.width+s.height)/2/2,k,y,x;if(a){if(!u(h))return!1;for(var I=0;I<i;I++)if(k=I/i*2*Math.PI,y=v+g*Math.cos(k),x=C+g*Math.sin(k),h=r.localToGlobal(y,x),!u(h))return!1;return!0}else{if(u(h))return!0;for(var I=0;I<i;I++)if(k=I/i*2*Math.PI,y=v+g*Math.cos(k),x=C+g*Math.sin(k),h=r.localToGlobal(y,x),u(h))return!0}return!1},t.hitTestCircleRect=function(e,r,i){if(t.zimhtcr||(De("38.2"),t.zimhtcr=!0),!(!e.stage||!r.stage)){var l=e.stage;if(!(n(e)||n(r)||!e.getBounds||!r.getBounds)){var a=e.getBounds(),s=r.getBounds();if(!a||!s){ht&&je(`hitTestCircleRect():
 please setBounds() on both objects`);return}n(i)&&(i=0);var f=(e.radius?e.radius:(a.width+a.height)/2)+i,u=e.getConcatenatedMatrix().decompose().scaleX;f*=u/l.scaleX;var v=r.boundsToGlobal(),C=e.localToGlobal(0,0),h=C.x,g=C.y,k=v.x,y=v.y,x=v.x+v.width,I=v.y+v.height,w=h<k?k:h>x?x:h,E=g<y?y:g>I?I:g,A=w-h,p=E-g;return A*A+p*p<=f*f}}},t.hitTestCircles=function(e,r,i){if(t.zimhtcs||(De("38.5"),t.zimhtcs=!0),!(!e.stage||!r.stage)){var l=e.stage;if(!(n(e)||n(r)||!e.hitTest||!e.getBounds||!r.getBounds)){var a=e.getBounds(),s=r.getBounds();if(!a||!s){ht&&je(`hitTestCircles():
 please setBounds() on both objects`);return}n(i)&&(i=0);var f=e.localToGlobal(a.x+a.width/2,a.y+a.height/2),u=r.localToGlobal(s.x+s.width/2,s.y+s.height/2),v=e.getConcatenatedMatrix(),C=r.getConcatenatedMatrix(),h=Math.sqrt(v.a/l.scaleX*v.a/l.scaleX+v.c/l.scaleX*v.c/l.scaleX),g=Math.sqrt(v.b/l.scaleY*v.b/l.scaleY+v.d/l.scaleY*v.d/l.scaleY),k=Math.sqrt(C.a/l.scaleX*C.a/l.scaleX+C.c/l.scaleX*C.c/l.scaleX),y=Math.sqrt(C.b/l.scaleY*C.b/l.scaleY+C.d/l.scaleY*C.d/l.scaleY),x=Math.sqrt(Math.abs(Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)));return a.width*Math.max(h,g)/2+s.width*Math.max(k,y)/2>=x-i}}},t.hitTestBounds=function(e,r,i,l){if(t.zimhtb||(De("39"),t.zimhtb=!0),!(!e.stage||!r.stage)&&!(n(e)||n(r)||!e.getBounds||!r.getBounds)){var a=!1;l&&l.graphics&&(a=!0);var s=e.getBounds(),f=r.getBounds();if(!s||!f){ht&&je(`hitTestBounds():
 please setBounds() on both objects`);return}n(i)&&(i=0);var u=t.boundsToGlobal(e),v=t.boundsToGlobal(r);if(a){var C=l.graphics;C.c(),C.ss(1).s("blue"),C.r(u.x,u.y,u.width,u.height),C.s("green"),C.r(v.x,v.y,v.width,v.height),l.stage.update()}return t.rectIntersect(u,v,i)}},t.hitTestPath=function(e,r,i,l,a,s){if(t.zimhtpa||(De("37.5"),t.zimhtpa=!0),!e.stage||!r.stage||n(e)||n(r)||!e.hitTest||r.type!="Squiggle"&&r.type!="Blob")return;var f=e.getBounds();n(i)&&(i=2),n(l)&&(l=!1),n(a)&&(a=!1),n(s)&&(s=!1);var u=[],v;function C(x){var I;if(e.image||e.spriteSheet||e.type=="Shape"?I=e.globalToLocal(x.x,x.y):I=e.globalToLocal(x.x*t.scaX,x.y*t.scaY),e.hitTest(I.x,I.y))if(a)u.push({x:Math.round(x.x),y:Math.round(x.y)});else if(s)v=g/h.length*100;else return!0}var h=r.interpolate(i,null,!0,null,!0),g,k;if(l)for(r.hitPathPoints?r.hitPathPoints.removeAllChildren():r.hitPathPoints=new t.Container().addTo(),r.hitPathPoints.top(),g=0;g<h.length;g++)k=h[g],k=r.localToGlobal(k.x,k.y),new t.Circle(3).loc(k.x,k.y,r.hitPathPoints);if(f){var y=t.boundsAroundPoints(h);if(!t.rectIntersect(e.boundsToGlobal(f),r.boundsToGlobal(y)))return!1}for(g=0;g<h.length;g++){if(k=h[g],k=r.localToGlobal(k.x,k.y),C(k))return!0;if(v!=null)return v}return u.length>0?u:!1},t.hitTestGrid=function(e,r,i,l,a,s,f,u,v,C,h,g,k){if(t.zimhtg||(De("41"),t.zimhtg=!0),!e.stage)return!1;if(!n(e)&&!g){var y=e.globalToLocal(s,f);s=y.x,f=y.y}n(u)&&(u=0),n(v)&&(v=0),n(C)&&(C=0),n(h)&&(h=0),r+=C,i+=h;var x=r/l,I=i/a,w=Math.min(l-1,Math.max(0,Math.floor((s-u+C/2)/x))),E=Math.min(a-1,Math.max(0,Math.floor((f-v+h/2)/I)));if(!(k!="open"&&(s-u>x*(w+1)-C||s-u<x*w||f-v>I*(E+1)-h||f-v<I*E))){var A=E*l+w;if(n(k)||k=="index")return A;if(k=="col")return w;if(k=="row")return E;if(k=="array"||k=="open")return[A,w,E]}},t.animate=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U,ue,ke){var ne="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startCall, startParams, animateCall, animateParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall";if(e&&(e.props||e.obj)){var ve;if(ve=at(t.animate,arguments,ne))return ve}if(e.type=="AC"&&j.zdf)return j.zdf.ac("animate",arguments),e;if(t.animateCheck||(De("45"),t.animateCheck=!0),!e)return;var we=t.ANIMATE;if(j.ANIMATE!=null&&(we=j.ANIMATE),!we)return n(ke)&&(ke=!0),a&&ke&&typeof a=="function"&&a(n(s)?e:s),e;n(ue)&&(ue=!0);var ee=mt(null,U,null,null,n(ue)?!1:!ue);(h||k||g)&&(C=!0),(D||p||D||P||A)&&(E=!0);var le,ye,oe,Me=arguments,ae=Array.prototype.slice.call(arguments);if(n(r)&&!n(z)&&(r=z),z=r,n(z))return ht&&je("animate() - need props"),e;if(e.type=="BeadsContainer"&&n(Z)&&(Z=0),e.type=="Tone"&&(xe=!1),xe===!1?t.pauseAnimateOnBlur=!1:(xe||n(xe)&&t.pauseAnimateOnBlur!==!1)&&(n(t.blurCheck)&&t.setBlurDetect(),t.pauseAnimateOnBlur=!0),!(!n(Z)&&e.addChild)){i=t.Pick.choose(i),l=t.Pick.choose(l),f=t.Pick.choose(f),h=t.Pick.choose(h),g=t.Pick.choose(g),E=t.Pick.choose(E),A=t.Pick.choose(A),n(D)?D=i:D=t.Pick.choose(D),re=t.Pick.choose(re),S=t.Pick.choose(S),X=t.Pick.choose(X);var Se=["loopCount","loopWait","rewind","rewindWait"];for(ye in L)Se.indexOf(ye)>=0&&(L[ye]=t.Pick.choose(L[ye]))}var Le={override:!n(e)&&!n(e.zimX)&&!n(z.x)||!n(e)&&!n(e.zimY)&&!n(z.y)};n(C)||(Le.loop=C),n(h)||(Le.count=h),n(g)||(Le.loopWait=g),n(k)||(Le.loopCall=k),n(I)||(Le.loopWaitParams=I),n(x)||(Le.loopWaitCall=x),n(y)||(Le.loopParams=y),n(w)||(Le.loopPick=w),n(E)||(Le.rewind=E),n(A)||(Le.rewindWait=A),n(p)||(Le.rewindCall=p),n(T)||(Le.rewindParams=T),n(B)||(Le.rewindWaitCall=B),n(F)||(Le.rewindWaitParams=F),n(Y)||(Le.startCall=Y),n(_)||(Le.startParams=_),n(V)||(Le.animateCall=V),n(b)||(Le.animateParams=b),n(r)||(Le=t.merge(Le,L)),L=Le,t.loop(z,function(Pe,rt){if(typeof Pe=="string"){var dt=Pe.split(".");if(dt.length>1&&Pe.substr(0,1)!="."&&(z["."+Pe]=rt,delete z[Pe],Pe="."+Pe),dt.length>1&&typeof rt=="string"){var pt=rt.substr(0,1);pt!="+"&&pt!="-"&&(z[Pe]="+"+rt)}}});function Ce(Pe,rt){if(rt.substr(0,1)=="."){for(var dt=rt.split("."),pt=Pe,Lt=1;Lt<dt.length;Lt++)pt=pt[dt[Lt]];return pt}else return rt=="transform"&&Pe.style?Pe.style.transform:Pe[rt]}function te(Pe,rt,dt){if(rt.substr(0,1)=="."){for(var pt=rt.split("."),Lt=Pe,Nt=1;Nt<pt.length-1;Nt++)Lt=Lt[pt[Nt]];Lt[pt[pt.length-1]]=dt}else Pe[rt]=dt}if(e.zimTweenOriginals={},!n(Z)&&e.addChild){var Oe=[];for(le=0;le<e.numChildren;le++)Oe.push(e.getChildAt(le));de=e,e=Oe}var Re=["extra","zoom","speed","layer","fade"],Xe={zoom:e.type=="Pen"?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(e instanceof Array){for(re&&e.reverse(),le=0;le<e.length;le++){var Qe=e[le];if(S){var it;Qe.zimObj={};for(ye in z){if(Re.indexOf(ye)>=0?it=z[ye]:it=t.Pick.choose(z[ye]),Qe.zimObj[ye]=Qe[ye],typeof it=="string"&&ye!="transform"){var Be;Qe.zimLastObj&&!n(Qe.zimLastObj[ye])?Be=Qe.zimLastObj[ye]:Be=Qe[ye],it=Be+Number(it.replace(/\s/g,""))}Qe.zimLastObj&&(Qe.zimLastObj[ye]=E?Qe.zimTweenOriginals[ye]:z[ye]),Qe[ye]=it}}else{Qe.zimObj={};for(ye in z)Re.indexOf(ye)>=0,Qe.zimObj[ye]=z[ye]}var Ke=le*Z;le==0&&Z!=0&&(Ke=ee=="s"?.02:20),t.animate(Qe,Qe.zimObj,i,l,le==e.length-1?a:null,le==e.length-1?s:null,f,u,v,null,null,null,null,null,null,null,w,null,null,null,null,null,null,D,P,Y,_,V,b,null,$,Q,null,G,t.copy(L),c,d,o,null,X,m,O,de,R,N,se,ie,q,z,ce,Ke,K,xe,J,fe,U,ue,ke)}return de}var He=i,he=D;n(He)&&(He=ee=="s"?1:1e3),n(D)&&(D=he=He),n(l)&&(l="quadInOut"),n(f)&&(f=0),n(A)&&(A=0),n(L)&&(L={override:!n(e.zimX)&&!n(z.x)||!n(e.zimY)&&!n(z.y)}),n(s)&&(s=e),n(G)&&(G=!0),n(c)&&(c=!1),n(d)&&(d=!1),n(S)&&(S=!1),n(X)&&(X={}),X.scale&&(X.scaleX=X.scaleY=X.scale,delete X.scale),n(o)||(L.override=o),n(N)&&(N=!1),n(ie)&&(ie=!!N),n(R)&&(R=!1),n(se)&&(se=!0),n(q)&&(q=!0),n(K)&&(K=1),e.futureRate=K;var me,Te,ze;if(z instanceof Array){if(oe=1,z.length==0)return this;var st,Ye;return Je(),Zt(),nt(),e}function nt(){e.zimLastObj&&t.loop(e.zimLastObj,function(An){n(e.zimTweenOriginals[An])||(e[An]=e.zimTweenOriginals[An],e.zimLastObj[An]=e.zimTweenOriginals[An])});for(var Pe,rt=f,dt=0,pt,Lt,Nt=0;Nt<z.length;Nt++)if(Pe=z[Nt],!n(Pe.target)){n(Pe.time)&&(Pe.time=He),rt+=Pe.wait?Pe.wait:0,pt=Pe.time,Lt=n(Pe.rewindTime)?pt:Pe.rewindTime,Pe.rewind&&(pt=pt+Lt+(Pe.rewindWait?Pe.rewindWait:0)),Pe.loop&&(pt*=Pe.loopCount,pt+=(Pe.loopCount-1)*(Pe.loopWait?Pe.loopWait:0)),n(Pe.params)&&(Pe.params=Pe.target),Ye=Pe.target,rt<0&&(dt+=rt,rt=0);var hn={target:Pe.target,obj:t.copy(Pe.obj),seriesWait:dt,wait:rt,waitedCall:Pe.waitedCall,waitedParams:Pe.waitedParams,time:Pe.time,ease:Pe.ease,from:Pe.from,rewind:Pe.rewind,call:Pe.call,params:Pe.params,loop:Pe.loop,loopCount:Pe.loopCount,loopWait:Pe.loopWait,loopCall:Pe.loopCall,loopParams:Pe.loopParams,loopWaitCall:Pe.loopWaitCall,loopWaitParams:Pe.loopWaitParams,loopPick:Pe.loopPick,rewindWait:Pe.rewindWait,rewindCall:Pe.rewindCall,rewindParams:Pe.rewindParams,rewindWaitCall:Pe.rewindWaitCall,rewindWaitParams:Pe.rewindWaitParams,rewindTime:Pe.rewindTime,rewindEase:Pe.rewindEase,startCall:Pe.startCall,startParams:Pe.startParams,animateCall:Pe.animateCall,animateParams:Pe.animateParams,set:t.copy(Pe.masterSet),events:O,rate:e.futureRate,pauseOnBlur:Pe.pauseOnBlur,easeAmount:Pe.easeAmount,easeFrequency:Pe.easeFrequency,override:!1,id:m};Nt==z.length-1&&pe(hn),t.animate(hn),dt+=rt+pt,rt=0}}function pe(Pe){var rt=Pe.call,dt=Pe.params;L.loop&&(!L.count||oe<L.count)?Pe.call=function(){rt&&typeof rt=="function"&&rt(dt),L.loopCall&&typeof L.loopCall=="function"&&L.loopCall(L.loopParams),L.loopWait?(n(e.zimTweens)&&(e.zimTweens={}),me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,{override:L.override}).wait(L.loopWait,!0).call(pt),me.timeScale=e.futureRate):pt();function pt(){for(var Lt=0;Lt<st.objects.length;Lt++)st.objects[Lt].set&&st.objects[Lt].set(st.values[Lt]);L.loopWaitCall&&typeof L.loopWaitCall=="function"&&L.loopWaitCall(L.loopWaitParams),nt()}}:Pe.call=function(){rt&&typeof rt=="function"&&rt(dt),n(s)&&(s=Ye),a&&typeof a=="function"&&a(s),e.zimLastObj=null},oe++}function Je(){e&&!e.seriesTweens&&(e.seriesTweens=[],e.seriesCalls=[],e.seriesParams=[]);for(var Pe,rt=0;rt<z.length;rt++)Pe=z[rt],Pe.target?(Pe.target.seriesTweens||(Pe.target.seriesTweens=[]),Pe.target.seriesCalls||(Pe.target.seriesCalls=[]),Pe.target.seriesParams||(Pe.target.seriesParams=[]),Pe.target.seriesTweens.push(Pe.props),Pe.target.seriesCalls.push(Pe.call),Pe.target.seriesParams.push(Pe.params)):(e.seriesTweens.push(Pe.props),e.seriesCalls.push(Pe.call),e.seriesParams.push(Pe.params));e.seriesCalls.push(a),e.seriesParams.push(s),Pe=z[0];var dt;for(e?dt=e:dt=Pe.target,dt.zimSeriesOriginals={},rt=z.length-1;rt>=0;rt--)Pe=z[rt],n(Pe.props)&&!n(Pe.obj)&&(Pe.props=Pe.obj),Pe.obj=Pe.props,t.loop(Pe.obj,function(sr){sr=="path"?dt.zimSeriesOriginals[sr]=z[sr]:dt.zimSeriesOriginals[sr]=Ce(dt,sr)});var pt=new t.Dictionary;for(st=new t.Dictionary,rt=0;rt<z.length;rt++)if(Pe=z[rt],e||(e=Pe.target),n(Pe.target)&&(Pe.target=e),n(Pe.ease)&&(Pe.ease=l),!n(Pe.target)){if(rt==0&&(Pe.target.zimSeriesArgs=Me),n(Pe.props)&&!n(Pe.obj)&&(Pe.props=Pe.obj),Pe.obj=Pe.props,Pe.loop&&(n(Pe.loopCount)||Pe.loopCount<=0)&&(Pe.loopCount=0,z.splice(rt+1,z.length)),n(Pe.obj.scale)||(Pe.obj.scaleX=Pe.obj.scaleY=Pe.obj.scale,delete Pe.obj.scale),Pe.from){var Lt=pt.at(Pe.target);if(Lt){if(Pe.set){var Nt=t.copy(Pe.obj),hn=t.merge(Lt,Pe.set);Pe.obj=qt(Pe.target,Pe.obj,hn),Pe.set=t.merge(Pe.set,Nt)}else Pe.set=t.copy(Pe.obj),Pe.obj=qt(Pe.target,Pe.obj,Lt);Pe.from=!1}else pt.add(Pe.target,qt(Pe.target,Pe.obj,Pe.set))}var An={};for(var Xn in Pe.obj)An[Xn]=Pe.set&&Pe.set[Xn]?Pe.set[Xn]:Pe.target[Xn];n(st.at(Pe.target))&&st.add(Pe.target,{});var tr=t.merge(st.at(Pe.target),An);st.remove(Pe.target),st.add(Pe.target,tr),Pe.masterSet=t.copy(Pe.set)}n(e.zimTweens)&&(e.zimTweens={})}if(z&&(z.x&&(e.zimX=!0),z.y&&(e.zimY=!0)),!n(z.shape)&&z.shape.type==e.type&&(e.type=="Blob"||e.type=="Squiggle")){var be=e.pointObjects,Ee=z.shape.pointObjects;if(be.length!=Ee.length)ht&&je("animate() - shapes must be of same number of points"),delete z.shape;else{delete z.shape;var _e=n(z.blobShift)?0:z.blobShift;delete z.blobShift;var Ge=!0;for(le=0;le<be.length;le++){var Ue=be[le],tt=Ee[(be.length*2e4+le+_e)%be.length];for(_n=0;_n<4;_n++)if(_n!=1){var Ae=Ue[_n],Ze=t.copy(ae);Ze[0]=Ae,Ze[1]={x:tt[_n].x,y:tt[_n].y,rotation:tt[_n].rotation},Ge&&(Ze[37]=!0,Ae.animateEvent&&Ae.off("animation",Ae.animateEvent),Ae.animateEvent=Ae.on("animation",function(){e.update()})),Ge=!1,t.animate.apply(t.animate,Ze)}}if(t.isEmpty(z))return e}}if(n(e))return;e.tweenStates||(e.tweenStates={all:!0});var lt=!1;if(z.note){if(Array.isArray(z.note))t.loop(z.note,function(Pe,rt){typeof Pe=="string"&&(z.note[rt]=t.Synth.note(Pe))});else if(z.note.min)z.note.min=t.Synth.note(z.note.min),z.note.max=t.Synth.note(z.note.max);else if(z.note.array)t.loop(z.note.array,function(Pe,rt){typeof Pe=="string"&&(z.note.array[rt]=t.Synth.note(Pe))});else if(typeof z.note=="function"){if(ht)return je("animate() - use frequency in ZIM VEE functions not note"),e}else z.note=t.Synth.note(z.note);z.frequency=z.note,delete z.note}function Ve(Pe,rt){return!!Object.getOwnPropertyDescriptor(Pe,rt).get}(e.type=="Sprite"||!Object.prototype.hasOwnProperty.call(e,"paused"))&&(Object.defineProperty(e,"paused",{get:function(){return e.animatePaused},set:function(Pe){e.animatePaused=Pe}}),e.type!=null&&(e.paused=!0),e.animating=!1),e.endTween=function(Pe,rt){if(e.stopAnimate(rt),Pe!="all"&&Pe!="main"&&Pe!="none"&&(Pe="all"),!e.seriesTweens)t.loop(e.zimLastObj,function(pt){typeof e.zimLastObj[pt]=="string"&&pt!="transform"&&(e.zimLastObj[pt]=e[pt]+Number(e.zimLastObj[pt].replace(/\s/g,""))),te(e,pt,e.zimLastObj[pt])}),Pe!="none"&&a&&a(s);else{if(t.loop(e.seriesTweens,function(pt,Lt){t.loop(pt,function(Nt){typeof pt[Nt]=="string"&&Nt!="transform"&&(pt[Nt]=e[Nt]+Number(pt[Nt].replace(/\s/g,""))),te(e,Nt,pt[Nt])}),Pe=="all"&&e.seriesCalls[Lt]&&e.seriesCalls[Lt](e.seriesParams[Lt])}),Pe!="none"){var dt=e.seriesCalls[e.seriesCalls.length-1];dt&&dt(e.seriesParams[e.seriesParams.length-1])}e.seriesTweens=null,e.seriesCalls=null,e.seriesParams=null}return e.stage&&e.stage.update(),e};var ft=!1;if(t.loop(z,function(Pe,rt){Pe=="path"?e.zimTweenOriginals[Pe]=z[Pe]:e.zimTweenOriginals[Pe]=Ce(e,Pe),Pe.match("hue")?(z.hueBatch=rt,delete z.hue,ft=!0):Pe.match("saturation")?(z.saturationBatch=rt,delete z.saturation,ft=!0):Pe.match("brightness")?(z.brightnessBatch=rt,delete z.brightness,ft=!0):Pe.match("contrast")?(z.contrastBatch=rt,delete z.contrast,ft=!0):Pe.match(/^.effects/)&&(ft=!0)}),e.resetTween=function(Pe){n(Pe)&&(Pe=!0),e.pauseAnimate(),e.percent=null,e.startPercent=null;var rt=e.zimSeriesOriginals?e.zimSeriesOriginals:e.zimTweenOriginals;return t.loop(rt,function(dt){if(dt=="path"){e.percentComplete=0,e.zimPath=rt[dt];var pt;e.zimStartPercent,pt=e.zimPath.getCurvePoint(e.zimStartPercent/100),e.loc(pt.x,pt.y)}else te(e,dt,rt[dt])}),e.zimLastObj=null,e.stage&&e.stage.update(),e.stopAnimate(),e.zimPath&&(ae[1].path=e.zimPath),n(e.zimStartRotation)||(e.rotation=e.zimStartRotation),e.zimStartRotation=null,n(e.zimStartScaleX)||(e.scaleX=e.zimStartScaleX),e.zimStartScaleX=null,n(e.zimStartScaleY)||(e.scaleY=e.zimStartScaleY),e.zimStartScaleY=null,t.animate.apply(null,e.zimSeriesArgs?e.zimSeriesArgs:ae),e.pauseAnimate(Pe),e},e.replayTween=function(){return e.resetTween(!1),e},z.path||R){var ot;e.requestedPercentComplete?ot=e.requestedPercentComplete:e.percentComplete&&!Ve(e,"percentComplete")&&(ot=e.percentComplete),e.requestedPercentComplete=null,n(ot)&&(ot=0),e.pathRatio=0,e.zimStartRotation=e.rotation,e.percent=null,e.parent&&e.parent.type=="BeadsContainer"||(e.startPercent=null)}c&&(G=!1),n(e.zimTweens)&&(e.zimTweens={});var ut;if(c||(e.stage?ut=e.stage:j.zdf?ut=j.zdf.stage:c=!0),e.setColorRange&&!n(z.color)){var $e=z.color;delete z.color,z.colorRange=1,e.setColorRange(e.color,$e),e.colorRange=0}else if(z.color&&(e.material||e.isMaterial)){if(e.isMaterial)return je("ZIM animate - please animate the color on the mesh not the material"),e;var Pt=e;Pt.cT&&t.Ticker.remove(Pt.cT),e={val:0,zimTweens:{},ticker:Pt.cT};var yt=Pt.material.color.getHexString(),wt=z.color;if(z={val:1},Pt.cT=t.Ticker.add(function(){var Pe=t.colorRange("#"+yt,wt,e.val);Pt.material.color.set(Pe)}),a){var Ft=a;a=function(){Pt.cT==e.ticker&&(Ft(callParams||Pt),t.Ticker.remove(Pt.cT),Pt.cT=null,e=null)}}else a=function(){Pt.cT==e.ticker&&(t.Ticker.remove(Pt.cT),Pt.cT=null,e=null)}}var _t={};for(le in z)Re.indexOf(le)>=0||(_t[le]=t.copy(z[le]),z[le]=t.Pick.choose(z[le]));n(z.scale)||(z.scaleX=z.scaleY=t.Pick.choose(z.scale),delete z.scale);for(var Jt in z){if(!e.zimBusy)break;e.zimBusy[Jt]&&delete z[Jt]}if(t.isEmpty(z))return;e.type!="Sprite"&&(e.type!=null&&(e.paused=!1),e.animating=!0);function nn(){e.zimMouseEnabledCheck||(e.zimMouseEnabledCheck=!0,e.zimLastMouseEnabled=e.mouseEnabled),e.mouseEnabled=!1,setTimeout(function(){e.zimBusy||(e.zimBusy={});for(var Pe in z)e.zimBusy[Pe]=!0;e.zimMouseEnabledCheck=null,e.mouseEnabled=e.zimLastMouseEnabled},70)}(d||L.loop||L.rewind)&&nn(),Zt();function Zt(){n(m)?m=t.makeID(null,10):(m=String(m),ze=m),n(e.zimIdSets)&&(e.zimIdSets={}),n(e.zimIdSets[m])?e.zimTweens&&!n(e.zimTweens[m])&&(Te=m,m=t.makeID(null,10),e.zimIdSets[Te]=[Te],e.zimTweens[Te].zimIdSet=Te,e.zimIdSets[Te].push(m)):(Te=m,m=t.makeID(null,10),e.zimIdSets[Te].push(m))}Re.shift();for(le in X)X[le]=t.Pick.choose(X[le]);for(le in L)le=="waitedCall"||le=="waitedParams"||le=="loopCall"||le=="rewindCall"||le=="loopWaitCall"||le=="rewindWaitCall"||le=="startCall"||le=="animateCall"||(L[le]=t.Pick.choose(L[le]));Et();function Et(){qe(),gt(),e.seriesTweens&&(e.seriesTweens[0]=z),S&&!lt&&(z=qt(e,z,X,!0))}function Ut(){qe(),S&&!lt&&(z=qt(e,z,X,!0))}function qe(){var Pe;e.zimLastObj||(e.zimLastObj={});for(le in z){if(typeof z[le]=="string"&&le!="transform"){if(le.substring&&le.substring(0,1)=="."){if(z[le].substr(0,1)=="+"||z[le].substr(0,1)=="-")continue}else if(z[le].substr(0,1)=="+")continue;if(z[le].substr(0,3)=="rgb")continue;e.zimLastObj&&!n(e.zimLastObj[le])?Pe=e.zimLastObj[le]:Pe=e[le],z[le]=Pe+Number(z[le].replace(/\s/g,""))}e.zimLastObj[le]=E?e.zimTweenOriginals[le]:z[le]}}function gt(){var Pe;for(le in X){if(typeof X[le]=="string"&&le!="transform"){if(le.substring&&le.substring(0,1)=="."){if(X[le].substr(0,1)=="+"||X[le].substr(0,1)=="-")continue}else if(X[le].substr(0,1)=="+")continue;if(X[le].substr(0,3)=="rgb")continue;e.zimLastObj&&!n(e.zimLastObj[le])?Pe=e.zimLastObj[le]:Pe=e[le],X[le]=Pe+Number(X[le].replace(/\s/g,""))}e.zimLastObj[le]=E?e.zimTweenOriginals[le]:z[le]}}e.getBounds&&n(e.percentCompleteCheck)&&(e.percentCompleteCheck=!0,e._percentComplete=0,Object.defineProperty(e,"percentComplete",{get:function(){if(e.paused)return e._percentComplete;if(e.tweenStartTime&&e.tweenEndTime){var Pe=Date.now(),rt;return L.loop&&Pe>e.tweenEndTime?rt=(Pe-e.tweenStartTime)%(e.tweenEndTime-e.tweenStartTime):rt=Pe-e.tweenStartTime,Math.max(0,Math.min(100,rt/(e.tweenEndTime-e.tweenStartTime)*100))}else return 0},set:function(Pe){this.zimTween?(tn=!0,St(Pe,!0)):this.requestedPercentComplete=Pe,e._percentComplete=Pe}}),Object.defineProperty(e,"percentCompleteNoAngle",{get:function(){if(e.tweenStartTime&&e.tweenEndTime){var Pe=Date.now(),rt;return L.loop&&Pe>e.tweenEndTime?rt=(Pe-e.tweenStartTime)%(e.tweenEndTime-e.tweenStartTime):rt=Pe-e.tweenStartTime,Math.max(0,Math.min(100,rt/(e.tweenEndTime-e.tweenStartTime)*100))}else return 0},set:function(Pe){this.zimTween?St(Pe,!1):this.requestedPercentComplete=Pe,e._percentComplete=Pe}})),Object.defineProperty(e,"rate",{get:function(){return e.futureRate},set:function(Pe){e.futureRate=Pe,t.loop(e.zimTweens,function(rt,dt){dt.timeScale=Pe})},configurable:!0});function St(Pe,rt){e.zimTween.startPaused=!1,R?n(e.zimTween.currentTime)||(e.zimTween.currentTime=e.zimTween.currentTime-e.zimTween.position+Pe*e.zimTween.duration/100):e.zimTweens?t.loop(e.zimTweens,function(dt,pt,Lt){var Nt=e.tweenStartTime+(e.tweenEndTime-e.tweenStartTime)*Pe/100,hn;pt.zimLoop&&Nt<=pt.startTime?hn=0:pt.zimLoop&&Nt>pt.startTime+pt.duration?hn=(Nt-pt.startTime)%pt.duration:hn=Nt-pt.startTime,pt.percentComplete=Math.max(0,Math.min(100,hn/pt.duration*100))}):e.zimTween.setPosition(Math.round(Pe*e.zimTween.duration/100)),rt&&Ct&&z.orient!==!1&&Ct.getCurvePoint&&(e.rotation=Ct.getCurvePoint(e.pathRatio,null,null,!0).angle+(Tn||0)),tn&&typeof Rt<"u"&&(Rt=Pe),e.handlePath&&e.handlePath()}var Ct,Bt,vt,bt;if(!n(z.path)&&z.path.segmentPoints){n(z.orient)&&(z.orient=!0),z.orient&&n(z.flip)&&(z.flip=!0),e.type=="Pen"&&(e.infinite=!0),e.zimOnPath=!0,n(e.pathRatio)&&(e.pathRatio=0),z.orient&&(z.orient=z.path,z.startOrient=z.rotation),Ct=z.path,N?(delete z.path,delete z.percent,(ht&&e.startPercent&&e.startPercent>0||e.percent&&e.percent!=100)&&je("ZIM.animate() - startPercent and percent currently not supported with drag on path"),Bt=Ct.getCurvePoint(e.pathRatio,Ne,bt),Bt&&(vt=e.parent.globalToLocal(Bt.x,Bt.y),e.x=vt.x,e.y=vt.y)):(n(e.startPercent)&&(e.startPercent=t.Pick.choose(n(z.startPercent)?0:z.startPercent)),n(e.percent)&&(e.percent=t.Pick.choose(n(z.percent)?100:z.percent)),delete z.path,delete z.percent);var Vt=!Ct.lockControls;delete z.path,z.pathRatio=1}function qt(Pe,rt,dt,pt){lt=!0,Ct&&(!n(Pe.percentComplete)||dt&&!n(dt.percentComplete))&&(dt||(dt={}),n(dt.pathRatio)&&(dt.pathRatio=n(dt.percentComplete)?Pe.percentComplete/100:dt.percentComplete/100));var Lt={};for(le in rt)dt&&!n(dt[le])?Lt[le]=dt[le]:Lt[le]=Pe[le],pt&&(Pe[le]=rt[le]);return Lt}var jt=!0,Gt=!1,pn=!0,Kt=!0;n(z.redirect)||(Kt=z.redirect,delete z.redirect);function Mn(Pe){var rt=Ct.globalToLocal(Pe.rawX/t.scaX,Pe.rawY/t.scaY),dt=vn;Ct.type=="Blob"&&(mn[0]<mn[4]?rn=!0:mn[0]>mn[4]&&(rn=!1),dt<10&&!rn?(kn=vn=dt=Yt-5,Zn.immediate(kn/Yt*100),mn=[Yt-1,Yt-2,Yt,Yt-3,Yt-4]):dt>Yt-10&&rn&&(kn=vn=dt=5,Zn.immediate(kn/Yt*100),mn=[0,0,0,0,0]));var pt={x:rt.x,y:rt.y,r:dt};dn.sort(function(Lt,Nt){var hn={x:Lt.x,y:Lt.y,r:Lt.r*Yt},An={x:Nt.x,y:Nt.y,r:Nt.r*Yt},Xn=Math.sqrt(Math.pow(pt.x-hn.x,2)+Math.pow(pt.y-hn.y,2)+Math.pow(pt.r-hn.r,2)),tr=Math.sqrt(Math.pow(pt.x-An.x,2)+Math.pow(pt.y-An.y,2)+Math.pow(pt.r-An.r,2));return Xn-tr}),kn=dn[0].r*Yt,Rt=kn/Yt*100,Rt=t.constrain(Rt,0,99.95),E&&(Rt/=2,me.position>me.duration/2&&(Rt=100-Rt))}if(Ct){var Ne;Vt||(bt=t.copy(Ct.segmentPoints),Ne=t.copy(Ct.segmentRatios)),e.currentPercent=e.startPercent+e.percent*e.pathRatio;var ct=(1e6+e.currentPercent)%100/100;if(Bt=Ct.getCurvePoint(ct,Ne,bt),e.parent&&Bt&&(vt=e.parent.globalToLocal(Bt.x,Bt.y),e.x=vt.x,e.y=vt.y),N){l="linear",e.cur("pointer");var Rt=e.percentComplete,Ht=!1,fn=!0,rn=!0,$t=Rt,xt=10;bt=t.copy(Ct.segmentPoints);var Yt=0;t.loop(bt,function(Pe){Yt+=t.distanceAlongCurve(Pe)});var un=Math.round(Yt/bt.length/xt),dn=Ct.interpolate(un,null,!0,null,!0),vn=(Rt||0)/100*Yt,kn=vn;Ct.zimAnimateChanged=!1,e.zimAnimatePathChange=Ct.on("change",function(){Ct.zimAnimateChanged=!0}),e.zimAnimatePathDown=Ct.on("mousedown",function(){Ht=!0,e.paused==!0&&(Gt=!0)}),e.zimAnimatePathUp=Ct.on("pressup",function(){Gt=!1}),e.zimAnimateDragDown=e.on("mousedown",function(Pe){ut=Pe.target.stage,e.amu||(e.amu=ut.frame.on("mouseupplus",function(){Gt=!1})),ut.mouseMoveOutside=!0,jt=!1,pn=!0,setTimeout(function(){jt=!0},50),Gt=!0,Ct.zimAnimateChanged&&(bt=t.copy(Ct.segmentPoints),Yt=0,t.loop(bt,function(dt){Yt+=t.distanceAlongCurve(dt)}),un=Math.round(Yt/bt.length/xt),dn=Ct.interpolate(un,null,!0,null,!0)),Ct.zimAnimateChanged=!1,Rt=e.percentComplete,Zn.immediate(Rt);var rt=Rt;E&&(me.position>me.duration/2?rt=(100-Rt)*2:rt=Rt*2),vn=(rt||0)/100*Yt,kn=vn});var rr=!1;e.zimAnimateDragPress=e.on("pressmove",function(Pe){rr=!0,Mn(Pe)}),e.animateReturn=function(){if(!E){ht&&je("animate() - animateReturn() needs rewind set to true");return}fn=!1,rn=!1,e.percentComplete<50&&(e.percentComplete=100-e.percentComplete),e.pauseAnimate(!1)},e.zimAnimateDragUp=e.on("pressup",function(){e.paused==!1&&(Gt=!1),jt=!1,setTimeout(function(){jt=!0},50),mn[0]<mn[4]?rn=!0:mn[0]>mn[4]&&(rn=!1),!e.paused&&E&&Kt&&rn!=fn&&(e.percentComplete=100-e.percentComplete,fn=rn)});var Zn=new t.Damp(Rt,.15),jn=0,ur=0,mn=[0,0,0,0,0],tn=!1;e.zimDragAnimateTicker=t.Ticker.add(function(){var Pe;N&&(++ur%20&&(mn.push(kn),mn.shift()),vn=kn,Ht&&(Rt=e.percentComplete),Gt||pn&&e.paused==!0?(Ht||tn||Ct.type=="Blob"&&Math.abs(jn-Rt)>(E?45:90)?(Ht=!1,Pe=Rt,Zn.immediate(Pe),tn=!1):Pe=Zn.convert(Rt),Math.abs(jn-Pe)>.1?(e.percentCompleteNoAngle=Pe,jn=Pe):(e.percentCompleteNoAngle=Pe,pn=!1,rr=!1)):pn=!1)},ut)}}var zt;if(z.orient){if(z.orient===!0){var ir=e.parent.localToGlobal(n(z.x)?e.x:z.x,n(z.y)?e.y:z.y);z.orient={x:ir.x,y:ir.y}}zt=z.orient,delete z.orient;var Tn=e.rotation;if(e.rotation=Ct.getPointAngle(0)+Tn,zt!=Ct){var en;zt.parent?en=zt.parent.localToLocal(zt.x,zt.y,e.parent):en=e.parent.globalToLocal(zt.x,zt.y),e.rotation=t.angle(e.x,e.y,en.x,en.y)+Tn}}var zn=e.scaleX,Wn=e.scaleY,Bn=z.flip!=null?z.flip:!1,Nn=z.flipVertical!=null?z.flipVertical:!1,Dn=e.x,Pn=e.y,In=0;L.loop&&(n(L.count)||(In=L.count,delete L.count,oe=1));var Wt=0;L.loopWait&&(Wt=L.loopWait,g=L.loopWait,delete L.loopWait);var an;L.loopCall&&(an=L.loopCall,delete L.loopCall);var ln=e;L.loopParams&&(ln=L.loopParams,delete L.loopParams),j.TIMECHECK&&ue&&(He&&Mt(He,ee),he&&Mt(he,ee),f&&Mt(f,ee),Fn&&Mt(Fn,ee),Wt&&Mt(Wt,ee),g&&Mt(g,ee),L.rewindWait&&Mt(L.rewindWait,ee),ce&&Mt(ce,ee),Ie&&Mt(Ie,ee)),ee=="s"&&(He&&(He*=1e3),he&&(he*=1e3),f&&(f*=1e3),Fn&&(Fn*=1e3),Wt&&(Wt*=1e3),g&&(g*=1e3),L.rewindWait&&(L.rewindWait*=1e3),ce&&(ce*=1e3),Ie&&(Ie*=1e3));var yn=He;L.rewind&&(yn+=he),e.zimTweenArgs={time:yn,wait:f,wait2:Fn,wait3:Wt,loopWait:g,rewindWait:L.rewindWait,seriesWait:ce,sequenceWait:Ie};function bn(){if(Wt>0&&(e.waiting=!1),!!L.loop){if($&&typeof $=="function"){var Pe=n(Q)?e:Q;$(Pe)}if(an&&typeof an=="function"&&an(ln||e),w){var rt=t.Pick.choose(e.futureRate);n(e.futureRate)||(me.timeScale=rt);var dt;if(n(_t.scale)||(dt=t.Pick.choose(_t.scale)),!S&&me.step&&me.step.prev&&me.step.prev.props){for(var pt in me.step.prev.props)if(!(Re.indexOf(pt)>=0)){var Lt=t.Pick.choose(_t[pt]);if(typeof Lt=="string"&&pt!="transform"&&Lt.substr(0,1)!="+"&&Lt.substr(0,1)!="-"){var Nt;e.zimLastObj&&!n(e.zimLastObj[pt])?Nt=e.zimLastObj[pt]:Nt=e[pt],Lt=Nt+Number(Lt.replace(/\s/g,""))}e.zimLastObj[pt]=E?e.zimTweenOriginals[pt]:Lt,E?(n(_t[pt])||(me.step.prev.props[pt]=Lt),pt=="scaleX"&&!n(dt)&&(me.step.prev.props.scaleX=dt),pt=="scaleY"&&!n(dt)&&(me.step.prev.props.scaleY=dt)):(n(_t[pt])||(me.step.props[pt]=Lt),pt=="scaleX"&&!n(dt)&&(me.step.props.scaleX=dt),pt=="scaleY"&&!n(dt)&&(me.step.props.scaleY=dt))}}}}}var wn;L.loopWaitCall&&(wn=L.loopWaitCall,delete L.loopWaitCall);var Kn=e;L.loopWaitParams&&(Kn=L.loopWaitParams,delete L.loopWaitParams);function Yn(){wn&&typeof wn=="function"&&wn(Kn||e)}var Rn;L.startCall&&(Rn=L.startCall,delete L.startCall);var cr;L.startParams&&(cr=L.startParams,delete L.startParams);function dr(Pe){Pe.startCalled||(Pe.startCalled=!0,Rn&&typeof Rn=="function"&&Rn(cr||e))}function Un(Pe){e.latestTween=Pe,e.waiting?Pe.startTime=Date.now():Pe.startTime=hr,Pe.zimLoop=C,e.animating||e.pauseAnimate(!0),n(Pe.percentComplete)&&Object.defineProperty(Pe,"percentComplete",{get:function(){return this.position/this.duration*100},set:function(rt){this.setPosition(rt*this.duration/100)}})}var lr=Date.now();e.tweenStartTime||(e.tweenStartTime=lr),e.tweenEndTime||(e.tweenEndTime=lr);var hr=lr+(f||0)+(ce||0),pr=hr+(yn||0);pr>e.tweenEndTime&&(e.tweenEndTime=pr);var gr=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];gr.indexOf(l)!=-1&&(l=vr(l));function vr(Pe){var rt=[.4,.75,.9,.95],dt=[.99,-.69,.53,.014],pt=[1.18,.69,1,.96];return Pe=="ballisticIn"?Pe=et(t.zimEase(rt)):Pe=="ballisticOut"?Pe=et(t.zimEase(rt).reverse()):Pe=="ballisticInOut"?Pe=et(t.zimEase(rt,null,!0)):Pe=="snapIn"?Pe=et(t.zimEase(dt)):Pe=="snapOut"?Pe=et(t.zimEase(dt).reverse()):Pe=="snapInOut"?Pe=et(t.zimEase(dt,null,!0)):Pe=="slowmoIn"?Pe=et(t.zimEase(pt)):Pe=="slowmoOut"?Pe=et(t.zimEase(pt).reverse()):Pe=="slowmoInOut"&&(Pe=et(t.zimEase(pt,null,!0))),Pe}var gn,Hn,Jn;if(L.rewind&&(l&&(l instanceof Function?gn=et(l.reverse()):(gn=l,gn.indexOf("InOut")==-1&&(gn.indexOf("Out")!=-1?gn=gn.replace("Out","In"):gn.indexOf("In")!=-1&&(gn=gn.replace("In","Out"))))),P&&(gn=P,gr.indexOf(gn)!=-1&&(gn=vr(gn)))),l instanceof Function)Hn=l;else{var Cn="get"+l.charAt(0).toUpperCase()+l.slice(1),Sn=et(J),En=et(fe);(!n(Sn)||!n(En))&&Fe.Ease[Cn]?(!n(En)&&n(Sn)&&(Sn=1),!n(Sn)&&n(En)&&(En=.3*1.5),Hn=Fe.Ease[Cn](Sn,En)):Hn=Fe.Ease[l]}gn&&(gn instanceof Function?Jn=gn:(Cn="get"+gn.charAt(0).toUpperCase()+gn.slice(1),Sn=et(J),En=et(fe),(!n(Sn)||!n(En))&&Fe.Ease[Cn]?(!n(En)&&n(Sn)&&(Sn=1),!n(Sn)&&n(En)&&(En=.3*1.5),Jn=Fe.Ease[Cn](Sn,En)):Jn=Fe.Ease[gn]));function ai(){Fn>0&&(e.waiting=!1),yr&&typeof yr=="function"&&yr(Mr)}function si(){Fn>0&&(e.waiting=!0),xr&&typeof xr=="function"&&xr(Ir)}function _r(Pe){Ut(),f>0?(e.waiting=!0,me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,{override:L.override}).wait(f,!0).call(function(){e.waiting=!1,f=0,Er(me),u&&typeof u=="function"&&u(n(v)?e:v)}),me.timeScale=e.futureRate,Pe&&wr(Pe,me),Un(me)):Er(Pe)}function Er(Pe){var rt=Fr();e.set&&!S&&e.set(X),me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,L).call(dr).to(z,He,Hn).call(si).wait(Fn,!0).call(ai).to(rt,he,Jn).call(Nr).wait(Wt,!0).call(bn),me.timeScale=e.futureRate,Pe&&wr(Pe,me),Or(),Un(me)}function Xr(Pe){Ut(),f>0?(e.waiting=!0,me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,{override:L.override}).wait(f,!0).call(function(){f=0,e.waiting=!1,Pr(me),u&&typeof u=="function"&&u(n(v)?e:v)}),me.timeScale=e.futureRate,Pe&&wr(Pe,me),Un(me)):Pr(Pe)}function Pr(Pe){e.set&&!S&&e.set(X),me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,L).call(dr).to(z,He,Hn).call(Nr).wait(Wt,!0).call(bn),me.timeScale=e.futureRate,Pe&&wr(Pe,me),Or(),Un(me)}if(L.rewind){var Fn=0;delete L.rewind,E=!0,A=L.rewindWait,L.rewindWait&&(Fn=L.rewindWait,delete L.rewindWait);var yr;if(L.rewindCall){yr=L.rewindCall;var Mr=L.rewindParams;n(Mr)&&(Mr=e),delete L.rewindCall,delete L.rewindParams}var xr;if(L.rewindWaitCall){xr=L.rewindWaitCall;var Ir=L.rewindWaitParams;n(Ir)&&(Ir=e),delete L.rewindWaitCall,delete L.rewindWaitParams}ce>0||Ie>0||f>0?ce>0||Ie>0?(e.waiting=!0,me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,{override:L.override}).wait(ce>0?ce:0,!0).wait(Ie>0?Ie:0,!0).call(function(Pe){Pe.waiting=!1,Ie=ce=0,_r(me)}),me.timeScale=e.futureRate,Un(me)):_r():(Ut(),Er())}else ce>0||Ie>0||f>0?ce>0||Ie>0?(e.waiting=!0,me=e.zimTweens[m]=e.zimTween=Fe.Tween.get(e,{override:L.override}).wait(ce>0?ce:0,!0).wait(Ie>0?Ie:0,!0).call(function(){Ie=ce=0,e.waiting=!1,Xr(me)}),me.timeScale=e.futureRate,Un(me)):Xr():(Ut(),Pr());function wr(Pe,rt){rt.zimIdSet=Pe.zimIdSet,rt.zimObj=Pe.zimObj,rt.zimTicker=Pe.zimTicker,rt.zimExtraTickers=Pe.zimExtraTickers,rt.requestID=Pe.requestID}me.startPaused=ie,me.rewinding=!1,n(K)||(me.timeScale=t.Pick.choose(K)),L.animateCall&&(V=L.animateCall,delete L.animateCall),L.animateParams&&(b=L.animateParams,delete L.animateParams);var ar;!c&&G&&(ot&&(e.pathRatio=e.percentComplete&&Math.round(e.percentComplete)!=100?e.percentComplete/100:0,e.percentCompleteNoAngle=Math.round(ot)!=100?ot:0),O&&!n(de)&&de.dispatchEvent?ar=t.Ticker.add(function(){ft&&e.updateEffects(),(Ct||zt||Bn||Nn)&&er(),de.dispatchEvent("animation")},ut):O&&e.dispatchEvent?ar=t.Ticker.add(function(){ft&&e.updateEffects(),(Ct||zt||Bn||Nn)&&er(),e.dispatchEvent("animation")},ut):V&&typeof V=="function"?ar=t.Ticker.add(function(){ft&&e.updateEffects(),(Ct||zt||Bn||Nn)&&er(),V(b||e)},ut):ar=t.Ticker.add(function(){ft&&e.updateEffects(),(Ct||zt||Bn||Nn)&&er()},ut));function oi(Pe){if(Array.isArray(Pe)){for(var rt=0,dt=0,pt=Pe.length;dt<pt;dt++)rt+=Pe[dt];return rt}}var Sr=[1,1,1],er=function(){if(!(!e.parent||me.passive||me.startPaused)){if(N&&E&&($t<50&&e.percentComplete>50||$t>50&&e.percentComplete<50)&&(fn=e.percentComplete<50),$t=e.percentComplete,Ct){if(Vt&&(bt=Ct.segmentPoints,Ne=Ct.segmentRatios),N)var Pe=Ct.getCurvePoint(e.pathRatio,Ne,bt);else{e.currentPercent=e.startPercent+e.percent*e.pathRatio;var rt=(1e6+e.currentPercent)%100/100;e.pathRatio==1&&(rt+=e.percent>0?1:0),Pe=Ct.getCurvePoint(rt,Ne,bt)}if(Pe){var dt=e.parent.globalToLocal(Pe.x,Pe.y);e.x=dt.x,e.y=dt.y}}var pt=Math.abs(Dn-e.x),Lt=Math.abs(Pn-e.y),Nt=Tn==90||Tn==270||Tn==-90;Bn&&jt&&(Dn>e.x&&pt>.01&&t.sign(Nt?e.scaleY:e.scaleX)==t.sign(zn)||Dn<e.x&&pt>.01&&t.sign(Nt?e.scaleY:e.scaleX)!=t.sign(zn)||e.percentComplete<99&&e.percentComplete>1&&pt<.01&&Lt>.01&&t.sign(Nt?e.scaleY:e.scaleX)!=t.sign(zn))&&(Nt?e.scaleY*=-1:e.scaleX*=-1),Nn&&jt&&(Pn>e.y&&Lt>.01&&t.sign(Nt?e.scaleX:e.scaleY)==t.sign(Wn)||Pn<e.y&&Lt>.01&&t.sign(Nt?e.scaleX:e.scaleY)!=t.sign(Wn)||e.percentComplete<99&&e.percentComplete>1&&Lt<.01&&pt>.01&&t.sign(Nt?e.scaleX:e.scaleY)!=t.sign(Wn))&&(Nt?e.scaleX*=-1:e.scaleY*=-1);var hn;if(zt&&pt>.05||zt&&Lt>.05){if(Ct==zt)hn=t.angle(Dn,Pn,e.x,e.y)+Tn;else{var An;zt.parent?An=zt.parent.localToLocal(zt.x,zt.y,e.parent):An=e.parent.globalToLocal(zt.x,zt.y),hn=t.angle(e.x,e.y,An.x,An.y)+Tn}if(hn!=0&&(!e.paused||rr)){Bn&&Dn-e.x>.01&&(hn+=180);var Xn=hn;e.rotation=Math.round(Xn==Tn?e.rotation:Xn),E&&e.percentComplete>50&&!Bn&&(e.rotation+=180)}}if(N){var tr=e.x-Dn+e.y-Pn;Math.abs(tr)>2&&(Sr.push(t.sign(tr)),Sr.shift(),me.forward=oi(Sr))}Dn=e.x,Pn=e.y}};(Ct||zt||Bn||Nn)&&(e.handlePath=er),n(e.zimMaskDynamic)||e.zimMaskApply();function Nr(){if(e.seriesTweens&&e.seriesTweens.shift(),e.seriesCalls&&e.seriesCalls.shift(),e.seriesParams&&e.seriesParams.shift(),e.paused&&e.type!="Sprite"){a&&typeof a=="function"&&a(s);return}if(L.loop)if(In>0)if(oe<In){Wt>0&&(e.waiting=!0),Yn(),oe++;return}else E?e.set&&e.set(Fr()):e.set&&e.set(z);else{Wt>0&&(e.waiting=!0),Yn();return}if(q?br(m):e.pauseAnimate(!0,m),!L.loop&&$&&typeof $=="function"){var Pe=n(Q)?e:Q;$(Pe)}a&&typeof a=="function"&&a(s)}function Fr(){var Pe={};for(var rt in z)if(c&&e.style)!n(X[rt])&&!S?Pe[rt]=X[rt]:rt=="transform"?Pe[rt]=e.style[rt]:Pe[rt]=Qn(e.style[rt]);else if(!n(X[rt])&&!S)Pe[rt]=X[rt];else if(rt.substr(0,1)=="."){for(var dt=rt.split("."),pt=e,Lt=1;Lt<dt.length;Lt++)pt=pt[dt[Lt]];Pe[rt]=pt}else Pe[rt]=e[rt];return Pe}function fi(Pe){if(e.zimBusy){for(var rt in Pe)delete e.zimBusy[rt];t.isEmpty(e.zimBusy)&&(e.zimBusy=null)}}var ui=!1;Or();function Or(){me.zimObj=z,me.zimTicker=ar,me.zimPaused=ui,Te&&(me.zimIdSet=Te),ze&&(n(t.idSets)&&(t.idSets={}),n(t.idSets[ze])?t.idSets[ze]=[e]:t.idSets[ze].indexOf(e)<0&&t.idSets[ze].push(e)),t.animatedObjects||(t.animatedObjects=new t.Dictionary(!0)),t.animatedObjects.add(e,!0)}function br(Pe){if(e.tweenStates&&e.tweenStates[Pe]&&delete e.tweenStates[Pe],!(n(e.zimTweens)||n(e.zimTweens[Pe]))){e.zimX=null,e.zimY=null,fi(e.zimTweens[Pe].zimObj),e.zimTweens[Pe].paused=!0,Gr(Pe);var rt=e.zimTweens[Pe].zimIdSet;if(!n(rt)&&e.zimIdSets){var dt=e.zimIdSets[rt];dt&&dt.splice(dt.indexOf(Pe),1),dt&&dt.length==0&&(delete e.zimIdSets[rt],t.isEmpty(e.zimIdSets)&&delete e.zimIdSets)}if(e.type=="Pen"&&e.zimOnPath&&(e.stop(),e.zimOnPath=!1),delete e.zimTweens[Pe],e.zimLastObj=null,t.isEmpty(e.zimTweens)&&e.stopAnimate(null,null,null,!1,!0),!(e.zimTweens&&e.zimTweens[Pe]||e.zimIdSets&&e.zimIdSets[rt||Pe])){if(t.idSets&&t.idSets[rt||Pe]){t.idSets[rt||Pe];var pt=t.idSets[rt||Pe].indexOf(e);pt>=0&&t.idSets[rt||Pe].splice(pt,1),t.idSets[rt||Pe].length<=0&&(delete t.idSets[rt||Pe],t.isEmpty(t.idSets)&&delete t.idSets)}}}}function Gr(Pe){-function(){var rt=e.zimTweens[Pe].zimTicker;if(e.zimTweens[Pe].extraTickers)for(var dt=0;dt<e.zimTweens[Pe].extraTickers.length;dt++)t.Ticker.remove(e.zimTweens[Pe].extraTickers[dt]);e.zimTweens[Pe].requestID&&cancelAnimationFrame(e.zimTweens[Pe].requestID),rt&&setTimeout(function(){rt&&t.Ticker.remove(rt),rt=null},200)}()}function Cr(Pe,rt){var dt=e.zimTweens[Pe];dt.paused=rt,rt!=dt.zimPaused&&(dt.zimPaused=rt,rt?dt.zimTicker&&(dt.zimAnimateTimeout=setTimeout(function(){t.Ticker.remove(dt.zimTicker)},200)):(dt.startPaused=!1,clearTimeout(dt.zimAnimateTimeout),dt.zimTicker&&(dt.zimTicker=t.Ticker.add(dt.zimTicker,ut))))}function Vr(Pe){for(var rt=[],dt=0;dt<Pe.length;dt++)e.zimIdSets&&!n(e.zimIdSets[Pe[dt]])?rt=rt.concat(e.zimIdSets[Pe[dt]]):rt.push(Pe[dt]);return rt}(!e.stopAnimate||!e.stopAnimate.real)&&(e.stopAnimate=function(Pe,rt,dt,pt,Lt){var Nt;if(e.dynamicAnimation=null,Lt&&N){e.pauseAnimate();return}if(n(Pe)&&(e.tweenStates={}),rt)return e.endTween(null,Pe),e;if(n(pt)&&(pt=!0),e.pan==null&&(e.type!=null&&(e.paused=!0),e.animating=!1),e.type=="Pen"&&e.zimOnPath&&(e.stop(),e.zimOnPath=!1),n(dt)&&(dt=!0),pt&&N&&(Ct&&Ct.off("change",e.zimAnimatePathChange),e.off("mousedown",e.zimAnimateDragDown),e.off("pressmove",e.zimAnimateDragPress),e.off("pressup",e.zimAnimateDragUp),e.amu&&ut.frame.off("mouseupplus",e.amu),t.Ticker.remove(e.zimDragAnimateTicker)),n(Pe)){if(!dt)return e;e.zimBusy=null,Fe.Tween.removeTweens(e);for(Nt in e.zimTweens)Gr(Nt);e.zimTweens=null,e.zimIdSets=null,e.zimTween=null,t.idSets&&t.idSets[Te||Nt]&&(delete t.idSets[Te||Nt],t.isEmpty(t.idSets)&&delete t.idSets),t.animatedObjects.remove(e)}else{Array.isArray(Pe)||(Pe=[Pe]);var hn=Vr(Pe);for(Nt in e.zimTweens)e.zimTweens[Nt].requestID&&cancelAnimationFrame(e.zimTweens[Nt].requestID),dt&&hn.indexOf(Nt)>=0&&br(Nt,pt),!dt&&hn.indexOf(Nt)<0&&br(Nt,pt)}return e},e.stopAnimate.real=!0,e.pauseAnimate=function(Pe,rt,dt,pt){var Lt;if(rt=="pauseOnBlur"?rt=null:n(rt)&&(e.tweenStates={all:Pe===!1}),e.type=="Pen"&&(Pe===!1?e.zimOnPath&&(e.infinite=!0):e.stop()),Qr&&!pt){if(n(rt))for(Lt in e.zimTweens)Cr(Lt,Pe);else e.pause(Pe,rt);return e}if(n(Pe)&&(Pe=!0),Gt=!1,e.type!=null&&(e.paused=Pe),e.animating=!Pe,n(dt)&&(dt=!0),n(rt)&&!dt)return e;if(n(rt))for(Lt in e.zimTweens)Cr(Lt,Pe);else{Array.isArray(rt)||(rt=[rt]);var Nt=Vr(rt);for(Lt in e.zimTweens)dt&&Nt.indexOf(Lt)>=0&&(Cr(Lt,Pe),e.tweenStates[Lt]=!Pe),!dt&&Nt.indexOf(Lt)<0&&(Cr(Lt,Pe),e.tweenStates[Lt]=!Pe)}return e.type=="Sprite"&&(e.running||e.stop()),e}),ie&&e.pauseAnimate(!0,m,null,!0);var Ln;for(z.extra&&(Ln=z.extra,delete z.extra,Array.isArray(Ln)||(Ln=[Ln])),le=0;le<Re.length;le++){var mr=Re[le];z[mr]&&(n(Ln)&&(Ln=[]),ci(mr,z[mr]),delete z[mr])}function ci(Pe,rt){rt===!0?Ln.push({outputProp:Xe[Pe]}):Array.isArray(rt)?Ln.push({outputProp:Xe[Pe],outputMin:rt[0],outputMax:rt[1],inputMin:rt[2],inputMax:rt[3]}):Ln.push({outputProp:Xe[Pe],outputMax:rt})}if(Ln){e.zimStartScaleX=e.scaleX,e.zimStartScaleY=e.scaleY,me.extraTickers=[];var Wr;for(le=0;le<Ln.length;le++){var sn=Ln[le];n(sn.inputObj)&&(sn.inputObj=e),n(sn.inputProp)&&(sn.inputProp="y"),n(sn.inputMin)&&(sn.inputMin=0),n(sn.inputMax)&&(sn.inputMax=sn.inputProp=="x"?ut.width:ut.height),n(sn.outputObj)&&(sn.outputObj=e),n(sn.outputProp)&&(sn.outputProp="scale"),n(sn.outputMin)&&(sn.outputMin=0),n(sn.outputMax)&&(sn.outputMax=sn.outputMin+1),n(sn.constrain)&&(sn.constrain=!0);for(var _n in sn)z[_n]=t.Pick.choose(z[_n]);sn.outputProp=="percentSpeed"&&(R=!0),Wr=new t.Proportion(sn.inputMin,sn.inputMax,sn.outputMin,sn.outputMax,sn.factor,sn.outputRound);var Ur=function(){var Pe=sn,rt=Wr;return function(){var dt,pt=Pe.outputObj,Lt=Pe.inputObj[Pe.inputProp];if((Pe.inputProp=="x"||Pe.inputProp=="y")&&Pe.inputObj.parent){var Nt=Pe.inputObj.parent.localToGlobal(Lt,Lt);Lt=Nt[Pe.inputProp]}if(Pe.constrain?dt=t.constrain(rt.convert(Lt),Pe.outputMin,Pe.outputMax):dt=rt.convert(Lt),Number.isNaN(dt)&&(dt=Pe.outputMin!=null?Pe.outputMin:0),Pe.outputProp=="scale")pt.scaleX=t.sign(pt.scaleX)*dt,pt.scaleY=t.sign(pt.scaleY)*dt;else if(Pe.outputProp=="scaleX")pt.scaleX=t.sign(pt.scaleX)*dt;else if(Pe.outputProp=="scaleY")pt.scaleY=t.sign(pt.scaleY)*dt;else if(Pe.outputProp=="layer"){if(!pt.parent)return;var hn=t.constrain(Math.round(dt),0,pt.parent.numChildren-1);hn!=pt.parent.getChildIndex(pt)&&pt.parent.setChildIndex(pt,hn)}else Pe.outputProp=="percentSpeed"?pt[Pe.outputProp]=dt*100:pt[Pe.outputProp]=dt}}();Ur(),me.extraTickers.push(t.Ticker.add(Ur,ut))}}var Qr;function qr(){if(me.requestID=requestAnimationFrame(qr),!(!R||me.startPaused&&e.percentSpeed==0)){me.startPaused=!1,me!=Zr&&(Zr=me,me.currentTime=0,e.pauseAnimate(!0,m,null,!0),e.type!=null&&(e.paused=!1),e.animating=!0,Lr=!Ie&&!ce&&!f&&!In&&L.loop),Lr&&(me.currentTime+=1e4*Br,me.setPosition(me.currentTime,!0),Lr=!1);var Pe=me.currentTime+di*e.percentSpeed/100;Dr&&f==0&&(Pe=t.constrain(Pe,0,Dr)),me.currentTime=Pe,me.setPosition(me.currentTime),(Ct||zt||Bn||Nn)&&er(),ut.update()}}if(R&&(e.dynamicAnimation=!0),R||e.zimAnimateDragDown){if(R){Qr=!0,e.pauseAnimate(!0,m,null,!0),e.type!=null&&(e.paused=!1),e.animating=!0,me.currentTime=0;var Zr=me;n(e.percentSpeed)&&(e.percentSpeed=me.startPaused?0:100);var di=1e3/60;me.currentTime=0;var Lr=!Ie&&!ce&&!f&&!In&&L.loop;se&&L.loop&&!In&&(se=!1);var Br=i+(E?D||i:0)+(A||0)+(g||0);Br*=ee=="s"?1e3:1;var Kr=1;L.loop&&In&&(Kr=In);var Dr;se&&(Dr=Br*Kr),qr()}var Tr;e.pause=function(Pe,rt){if(n(Pe)&&(Pe=!0),n(rt)&&(rt=0),Pe){if(e.zimAnimateDragDown&&(N=!1,e.cur("default"),Ct&&Ct.off("change",e.zimAnimatePathChange),e.off("mousedown",e.zimAnimateDragDown),e.off("pressmove",e.zimAnimateDragPress),e.off("pressup",e.zimAnimateDragUp),!R))return;Tr=e.percentSpeed,rt>0?t.animate({target:e,props:{percentSpeed:0},override:!1,ticker:!1,time:rt,call:function(){e.percentSpeed=0,e.type!=null&&(e.paused=!0),e.animating=!1,R=!1,e.dispatchEvent("pause")}}):(me.startPaused=!1,e.percentSpeed=0,e.type!=null&&(e.paused=!0),e.animating=!1,R=!1,setTimeout(function(){e.dispatchEvent("pause")},10))}else{if(e.zimAnimateDragDown&&(N=!0,e.cur("pointer"),Ct&&(e.zimAnimatePathChange=Ct.on("change",e.zimAnimatePathChange)),e.zimAnimateDragDown=e.on("mousedown",e.zimAnimateDragDown),e.zimAnimateDragPress=e.on("pressmove",e.zimAnimateDragPress),e.zimAnimateDragUp=e.on("pressup",e.zimAnimateDragUp),!R&&ie!=!1))return;Gt=!1,me.currentTime=me.position,rt>0?t.animate({target:e,props:{percentSpeed:Tr},override:!1,ticker:!1,time:rt,call:function(){e.percentSpeed=Tr,e.paused=!1,e.animating=!0,R=!0}}):(e.percentSpeed=Tr,e.type!=null&&(e.paused=!1),e.animating=!0,R=!0)}return e}}return e},t.stopAnimate=function(e,r){De("45.12");var i;if(n(e)){if(t.animatedObjects)for(i=t.animatedObjects.length-1;i>=0;i--)t.animatedObjects.objects[i].stopAnimate(null,r);return}if(Array.isArray(e)||(e=[e]),!!t.idSets)for(var l=0;l<e.length;l++){var a=e[l];if(t.idSets[a]){var s=t.idSets[a].length-1;for(i=s;i>=0;i--)t.idSets[a][i].stopAnimate(a,r)}}},t.stopZimAnimate=function(e){De("45.1"),t.stopAnimate(e)},t.pauseAnimate=function(e,r){De("45.22"),n(e)&&(e=!0);var i;if(n(r)||r=="pauseOnBlur"){if(t.animatedObjects)for(i=t.animatedObjects.length-1;i>=0;i--)t.animatedObjects.objects[i].pauseAnimate(e,r);return}if(Array.isArray(r)||(r=[r]),!!t.idSets)for(var l=0;l<r.length;l++){var a=r[l];if(t.idSets[a])for(i=t.idSets[a].length-1;i>=0;i--)t.idSets[a][i].pauseAnimate(e,a)}},t.pauseZimAnimate=function(e,r){De("45.2"),t.pauseAnimate(e,r)},t.wiggle=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I){var w="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur",E;if(E=at(t.wiggle,arguments,w))return E;if(De("45.25"),n(e)||n(i)||n(l))return e;n(a)&&(a=l);var A=mt(s,null,40);n(s)&&(s=A=="s"?1:1e3),n(f)&&(f=s),Mt(f,A,40),n(C)&&(C="quadInOut"),n(h)&&(h=!1),n(g)&&(g=t.makeID()),n(v)&&(v="both"),n(k)&&(k="both"),n(y)&&(y=!0),n(x)&&(x=0),Mt(u,A,40),n(u)||(e.wiggleTimeout=setTimeout(function(){e.stopAnimate(g),e.dispatchEvent("wigglestop")},u*(A=="s"?1e3:1)));var p=0,T;function B(){var F=t.rand(t.Pick.choose(s),t.Pick.choose(f),!1),D={},P={},Y;P[r]=t.Pick.choose(i),v=="negative"||p==0&&k=="negative"?Y=-t.rand(t.Pick.choose(l),t.Pick.choose(a),h):v=="positive"||p==0&&k=="positive"?Y=t.rand(t.Pick.choose(l),t.Pick.choose(a),h):p==0?Y=t.rand(t.Pick.choose(l),t.Pick.choose(a),h,!0):Y=t.rand(t.Pick.choose(l),t.Pick.choose(a),h)*t.sign(T)*-1,D[r]=t.Pick.choose(i)+Y,p==0&&(F=F/2),T=Y,p++;var _=e.futureRate;v=="negative"||v=="positive"?t.animate({target:e,obj:D,set:P,ease:C,time:F*2,wait:et(x),rewind:!0,override:!1,call:B,id:g,ticker:!!e.stage,timeCheck:!1,pauseOnBlur:I}):t.animate({target:e,obj:D,ease:C,time:F,wait:et(x),override:!1,call:B,id:g,ticker:!!e.stage,timeCheck:!1,pauseOnBlur:I}),_&&(e.futureRate=_)}return e.addTo&&!e.stage?e.added(B):B(),e},t.loop=function(e,r,i,l,a,s,f,u){var v="obj, call, reverse, interval, step, start, end, immediate",C;if(C=at(t.loop,arguments,v))return C;if(t.zimLoopCheck||De("45.3"),t.zimLoopCheck=!0,n(e)||n(r))return;n(i)&&(i=!1),n(l)&&(l=0),(n(a)||a<=0)&&(a=1),n(u)&&(u=!0),e.constructor===Number&&(e=Number(e)),e.constructor===String&&(e=String(e));var h=typeof e=="number"?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":typeof e=="string"?"string":e instanceof HTMLCollection?"htmlcollection":e.type&&e.type=="Dictionary"?"Dictionary":"invalid";if(h=="container"&&!e.addChild)return;var g,k,y,x;if(h=="number"||h=="string"||h=="array"||h=="nodelist"||h=="htmlcollection"||h=="Dictionary"){if(h=="Dictionary"){var I=t.copy(e.values);e=t.copy(e.objects)}if(g=h=="number"?e:e.length,y=E(g-1),y==0)return;if(i)if(l===0){for(k=s;k>=f;k-=a)if(h=="number"?x=r(k,y,s,f,e):h=="array"||h=="string"?x=r(e[k],k,y,s,f,e):h=="Dictionary"?x=r(e[k],I[k],k,y,s,f,e):x=r(e.item(k),k,y,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(k=A.count,u||k--,a&&(k*=a),k=s-k,h=="number"?x=r(k,y,s,f,e):h=="array"||h=="string"?x=r(e[k],k,y,s,f,e):h=="Dictionary"?x=r(e[k],I[k],k,y,s,f,e):x=r(e.item(k),k,y,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},y,u);else if(l===0){for(k=s;k<=f;k+=a)if(h=="number"?x=r(k,y,s,f,e):h=="array"||h=="string"?x=r(e[k],k,y,s,f,e):h=="Dictionary"?x=r(e[k],I[k],k,y,s,f,e):x=r(e.item(k),k,y,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(k=A.count,u||k--,a&&(k*=a),h=="number"?x=r(k,y,s,f,e,A):h=="array"||h=="string"?x=r(e[k],k,y,s,f,e,A):h=="Dictionary"?x=r(e[k],I[k],k,y,s,f,e):x=r(e.item(k),k,y,s,f,e,A),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},y,u);return!0}else if(h=="object"){g=0;var w=[];for(k in e)g++,w.push(k);if(y=E(g-1),y==0)return;if(i)if(l===0){for(k=s;k>=f;k-=a)if(x=r(w[k],e[w[k]],k,y,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(k=A.count,u||k--,a&&(k*=a),k=s-k,x=r(w[k],e[w[k]],k,y,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},y,u);else if(l===0){for(k=s;k<=f;k+=a)if(x=r(w[k],e[w[k]],k,y,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(k=A.count,u||k--,a&&(k*=a),x=r(w[k],e[w[k]],k,y,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},y,u);return!0}else{if(y=E(e.numChildren-1),y==0)return;if(i)if(l===0){for(k=s;k>=f;k-=a)if(x=r(e.getChildAt(k),k,y,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(k=A.count,u||k--,a&&(k*=a),k=s-k,x=r(e.getChildAt(k),k,y,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},y,u);else if(l===0){for(k=s;k<=f;k+=a)if(x=r(e.getChildAt(k),k,y,s,f,e),typeof x<"u"&&x!="next")return x}else t.interval(l,function(A){if(k=A.count,u||k--,a&&(k*=a),x=r(e.getChildAt(k),k,y,s,f,e),x=="next")A.next();else if(typeof x<"u")return A.clear(),x},y,u);return!0}function E(A){return n(s)&&(s=i?A:0),n(f)&&(f=i?0:A),i&&f>s||!i&&s>f||(s<0&&f)<0||s>A&&f>A?0:(s=Math.max(0,Math.min(s,A)),f=Math.max(0,Math.min(f,A)),Math.floor((i?s-f:f-s)/a)+1)}},t.scaleTo=function(e,r,i,l,a,s,f){var u="obj, boundObj, percentX, percentY, type, boundsOnly, simple",v;if(v=at(t.scaleTo,arguments,u))return v;if(e.type=="AC"&&j.zdf)return j.zdf.ac("scaleTo",arguments),e;if(De("43"),n(r)&&(r=j.zdf&&j.zdf.stage?j.zdf.stage:null),n(e)||!e.getBounds||!e.getBounds())return Gn("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),e;if(n(r)||!r.getBounds||!r.getBounds())return Gn("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),e;n(i)&&(i=-1),n(l)&&(l=-1),i==-1&&l==-1&&(i=l=100,n(a)&&(a="fill")),n(a)&&(a="fit"),a=="smallest"?a="fit":a=="biggest"||a=="outside"||a=="largest"?a="fill":(a=="both"||a=="stretch")&&(a="full"),n(s)&&(s=!1),n(f)&&(f=!1);var C=r.getBounds().width*i/100*(s?1:r.scaleX),h=r.getBounds().height*l/100*(s?1:r.scaleY);(r.type=="Stage"||r.type=="StageGL")&&(C=r.width*i/100,h=r.height*l/100);var g,k;if(f)g=e.getBounds().height,k=e.getBounds().width;else{var y=t.boundsToGlobal(e);g=y.height/e.scaleX,k=y.width/e.scaleY,(isNaN(g)||isNaN(k)||g>5e3)&&(g=e.getBounds().height,k=e.getBounds().width)}if((i==-1||l==-1)&&a!="full")return i==-1?t.sca(e,h/g):t.sca(e,C/k),e;var x;return a=="full"?(e.scaleX=i!=-1?C/k:e.scaleX,e.scaleY=l!=-1?h/g:e.scaleY,e):(a=="fill"?x=Math.max(C/k,h/g):x=Math.min(C/k,h/g),t.sca(e,x),e)},t.fit=function(e,r,i,l,a,s){var f="obj, left, top, width, height, type",u;if(u=at(t.fit,arguments,f))return u;if(e.type=="AC"&&j.zdf)return j.zdf.ac("fit",arguments),e;if(De("46"),!(n(e)||!e.getBounds)){if(!e.getBounds()){je("zim methods - fit(): please setBounds() on object");return}if(n(r)){if(!e.stage){je("zim methods - fit(): please add boundary dimensions or add obj to stage first");return}if(!e.stage.getBounds()){je("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var v=e.stage.getBounds().width,C=e.stage.getBounds().height;r=0,i=0,l=v,a=C}s===!0?s="fit":s===!1&&(s="fill"),n(s)&&(s="fit"),e.scaleX=e.scaleY=1;var h=l,g=a,k=e.getBounds().width,y=e.getBounds().height,x,I,w,E,A;return s=="full"?(e.scaleX=w=h/k,e.scaleY=E=g/y,x=h,I=g):(s=="fit"?h/g>=k/y?A=g/y:A=h/k:s=="fill"&&(h/g>=k/y?A=h/k:A=g/y),w=E=A),e.scaleX=w,e.scaleY=E,x=k*w,I=y*E,e.x=(e.regX-e.getBounds().x)*w+r+(h-x)/2,e.y=(e.regY-e.getBounds().y)*E+i+(g-I)/2,{x:e.x,y:e.y,width:x,height:I,scale:A,scaleX:w,scaleY:E,bX:r,bY:i,bWidth:l,bHeight:a}}},t.boundsCheck=!1,t.boundsToGlobal=function(e,r,i,l,a){if(t.boundsCheck||(De("40"),t.boundsCheck=!0),!(n(e)||!e.getBounds)){if(n(i)&&(i=!1),a&&!e.getBounds&&!e.getBounds())return e;var s=e.getBounds();if(!s&&n(r)){je(`zim methods - boundsToGlobal():
 please setBounds() on object (or a rectangle)`);return}r&&(s=r);var f,u,v,C;a&&a.type&&!(a.type=="Stage"||a.type=="StageGL")?(f=e.localToLocal(s.x,s.y,a),u=e.localToLocal(s.x+s.width,s.y,a),v=e.localToLocal(s.x+s.width,s.y+s.height,a),C=e.localToLocal(s.x,s.y+s.height,a)):i?(f=e.globalToLocal(s.x,s.y),u=e.globalToLocal(s.x+s.width,s.y),v=e.globalToLocal(s.x+s.width,s.y+s.height),C=e.globalToLocal(s.x,s.y+s.height)):(f=e.localToGlobal(s.x,s.y),u=e.localToGlobal(s.x+s.width,s.y),v=e.localToGlobal(s.x+s.width,s.y+s.height),C=e.localToGlobal(s.x,s.y+s.height));var h=Math.min(f.x,u.x,v.x,C.x),g=Math.min(f.y,u.y,v.y,C.y),k=Math.max(f.x,u.x,v.x,C.x),y=Math.max(f.y,u.y,v.y,C.y);return new Fe.Rectangle(h,g,k-h,y-g)}},t.resetBounds=function(e,r,i,l,a,s){var f="obj, a, b, c, d, margin",u;if(u=at(t.resetBounds,arguments,f))return u;De("40.5");var v,C,h,g;return n(l)?(v=0,C=r,h=0,g=i):(v=r,C=l,h=i,g=a),n(g)&&(g=C),n(r)?e.setBounds(null):e.setBounds(v,h,C,g),s&&(i=e.getBounds(),i&&e.setBounds(i.x-s,i.y-s,i.width+s*2,i.height+s*2)),e},t.copyMatrix=function(e,r){return De("45.5"),e.x=r.x,e.y=r.y,e.scaleX=r.scaleX,e.scaleY=r.scaleY,e.regX=r.regX,e.regY=r.regY,e.rotation=r.rotation,e.skewX=r.skewX,e.skewY=r.skewY,e},t.duplicate=function(e,r){De("45.6");var i=e.clone(r);for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&i[l]==null){if(l=="parent"||l=="zimTouch")continue;i[l]=e[l]}return i},t.expand=function(e,r,i,l,a){var s="obj, padding, paddingV, paddingRight, paddingBottom",f;if(f=at(t.expand,arguments,s))return f;if(De("50"),n(e)||!e.getBounds||!e.getBounds())return je("zim methods - expand(): please provide object with bounds set"),e;n(r)&&(r=20),n(i)&&(i=r);var u,v;!n(l)||!n(a)?(n(l)&&(l=r),n(a)&&(a=i),u=r,v=i):(u=l=r,v=a=i);var C=e.getBounds(),h=new t.Shape({style:!1});return h.graphics.f("rgba(0,0,0,.01)").r(C.x-u,C.y-v,C.width+u+l,C.height+v+a),e.hitArea=h,e},t.setSwipe=function(e,r){if(De("34"),n(e)||!e.on)return;e.zimNoSwipe=r?null:!0,e instanceof Fe.Container&&i(e);function i(l){for(var a=l.numChildren,s,f=0;f<a;f++)s=l.getChildAt(f),s.zimNoSwipe=e.zimNoSwipe,s instanceof Fe.Container&&i(s)}return e},t.setMask=function(e,r,i){if(De("50.1"),n(e)&&je("zim methods - setMask(): please provide obj"),n(r))return a(),e;var l=e.stage||(j.zdf?j.zdf.stage:null);function a(){e.zimMask&&e.zimMask.parent&&e.zimMask.parent.removeChild(e.zimMask),e.zimMask=null,e.zimMaskTicker&&t.Ticker.remove(e.zimMaskTicker),e.mask=null}e.zimMaskOriginal&&e.zimMaskOriginal!=r&&a(),n(i)&&(i=r.type=="Blob"||!n(r.zimDown)||!n(r.transformControls)||!n(r.zimTouch)||!n(r.zimTweens),r.zimMaskDynamic=i),e.zimMaskOriginal=r;var s;function f(){if(i&&(!l||!r.stage))return e;if(s&&s.dispose&&s.dispose(),s=null,e.zimMask=r.zimMask=s=r.shape.clone(),t.copyMatrix(s,r),r.addChildAt(s,0),s.alpha=0,!e.parent){e.mask=s;return}var u=r.getConcatenatedMatrix().decompose(),v=e.parent.getConcatenatedMatrix().decompose();s.scaleX=u.scaleX/v.scaleX,s.scaleY=u.scaleY/v.scaleY,s.rotation=(u.rotation?u.rotation:0)-(v.rotation?v.rotation:0);var C=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,e.parent);s.x=C.x,s.y=C.y,e.mask=s}return r.zimMaskApply=function(){e.zimMaskTicker&&t.Ticker.remove(e.zimMaskTicker),e.zimMaskTicker=t.Ticker.add(f)},r&&r.shape?(f(),i&&r.zimMaskApply()):(s=r,e.mask=s),e},t.outline=function(e,r,i,l){var a="obj, color, size, boundsOnly",s;if(s=at(t.outline,arguments,a))return s;if(e.type=="AC"&&j.zdf)return j.zdf.ac("outline",arguments),e;if(De("47"),e.type&&e.type=="zimOultineShape")return ht&&je("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),e;if(n(e)||!e.getBounds)return je("zim methods - outline(): please provide object with bounds set"),e;if(!e.getBounds())return je("zim methods - outline(): please setBounds() on object"),e;if(!e.parent)return je("zim methods - outline(): object should be on stage first"),e;if(n(r)&&(r="brown"),n(i)&&(i=2),i<=0){e.ZIMoutlineShape&&e.ZIMoutlineShape.parent.removeChild(e.ZIMoutlineShape),e.ZIMoutlineShapeC&&e.ZIMoutlineShapeC.parent.removeChild(e.ZIMoutlineShapeC),e.ZIMoutlineShape=e.ZIMoutlineShapeC=null;return}var f=e.getBounds(),u=e.ZIMoutlineShape=e.ZIMoutlineShape?e.ZIMoutlineShape:new t.Shape;u.type="zimOutlineShape";var v=e.ZIMoutlineShapeC=e.ZIMoutlineShapeC?e.ZIMoutlineShapeC:new t.Shape;v.type="zimOutlineShape";var C=e.parent;e.outlineToggled=!0,e.outlineToggle=function(T){return T===!0?(e.ZIMoutlineShape.visible=!0,e.ZIMoutlineShapeC.visible=!0):T===!1?(e.ZIMoutlineShape.visible=!1,e.ZIMoutlineShapeC.visible=!1):(e.ZIMoutlineShape.visible=!e.ZIMoutlineShape.visible,e.ZIMoutlineShapeC.visible=!e.ZIMoutlineShapeC.visible),e.outlineToggled=e.ZIMoutlineShape.visible,e};var h=e.localToLocal(f.x,f.y,C),g=e.localToLocal(f.x+f.width,f.y,C),k=e.localToLocal(f.x+f.width,f.y+f.height,C),y=e.localToLocal(f.x,f.y+f.height,C),x=e.localToLocal(0,0,C),I=u.graphics.c(),w=v.graphics.c();if(I.s(r).ss(i).mt(h.x,h.y).lt(g.x,g.y).lt(k.x,k.y).lt(y.x,y.y).lt(h.x,h.y).cp(),!l){var E=10,A=E+1;w.s("white").ss(i+2),w.mt(-A,0).lt(A,0),w.mt(0,-A).lt(0,A),w.s(r).ss(i),w.mt(-E,0).lt(E,0),w.mt(0,-E).lt(0,E),w.cp(),v.x=x.x,v.y=x.y,v.rotation=e.rotation,I.s("white").ss(i+2).dc(e.x,e.y,E+6),I.s(r).ss(i).dc(e.x,e.y,E+6)}e.parent.removeChild(u),e.parent.removeChild(v);var p=e.parent.getChildIndex(e);return e.parent.addChildAt(v,p+1),e.parent.addChildAt(u,p+1),u.mouseEnabled=!1,v.mouseEnabled=!1,e},t.blendmodes=function(e,r,i){De("47.05"),n(r)&&(r=1);var l=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];i===!1&&l.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var a=0,s=t.interval(r,function(){var f=l[a%l.length];a++,e.ble(f),Rr(f),e.stage&&e.stage.update()});return e.on("mousedown",function(){s.pause(!s.paused)}),e},t.STYLE=null,t.ignore="ignore",t.getStyle=function(e,r,i){t.STYLECHECK||(De("50.34"),t.STYLECHECK=!0);var l=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache"],a=j.STYLE||t.STYLE,s=a,f;a&&a.type&&typeof a.type=="string"&&(a.ttype=a.type,delete a.type);for(var u in a)f=a[u],u.match(/^[(A-Z)]/)?(a.type||(a.type={}),a.type[u]?a.type[u]=t.merge(a.type[u],f):a.type[u]=f,delete a[u]):f.constructor==={}.constructor&&u!="group"&&u!="type"&&!t.isPick(f)&&l.indexOf(u)==-1&&(a.group||(a.group={}),a.group[u]?a.group[u]=t.merge(a.group[u],f):a.group[u]=f,delete a[u]);n(s)?s={}:s=t.copy(s);var v;if(n(i))i={};else for(v=0;v<l.length;v++)delete i[l[v]];var C=i,h=s.type;if(h&&delete s.type,!n(r)&&!n(s.group)){var g=r.split(","),k={};for(v=0;v<g.length;v++){var y=g[v].trim();n(s.group[y])||(k=t.merge(k,s.group[y]))}delete s.group}!n(e)&&!n(h)&&!n(h[e])&&(s=t.merge(s,h[e])),!n(r)&&!n(k)&&(s=t.merge(s,k));for(var x in s){if(C[x]){delete s[x];continue}if(f=l.indexOf(x)==-1&&!s.delayPick?t.Pick.choose(s[x]):s[x],f=="ignore"){delete s[x];continue}else f&&f.constructor==={}.constructor&&(f=t.copy(f,!0,!1));var I;for(var w in s)(I=w.match(/^(.+)gColor$/))&&(s[I[1]+"ackgroundColor"]=s[w],delete s[w]);s[x]=f}return s=t.merge(s,C),s.ttype&&!s.type&&(s.type=s.ttype,delete s.ttype),s.style===!1?{}:s},t.styleTransforms=function(e,r){var i=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"],l;if(r){for(r.add&&e.addTo(),r.addTo&&e.addTo(r.addTo===!0?null:r.addTo),l=0;l<i.length;l++)r[i[l]]!=null&&(e[i[l]]=t.Pick.choose(r[i[l]]));if((r.regX!=null||r.regY!=null)&&e.reg(n(r.regX)?DEFAULT:r.regX,n(r.regY)?DEFAULT:r.regY),r.bounds&&r.bounds.constructor==={}.constructor&&e.setBounds(r.bounds.x?r.bounds.x:0,r.bounds.y?r.bounds.y:0,r.bounds.width?r.bounds.width:100,r.bounds.height?r.bounds.height:100),r.center&&e.center(r.center===!0?null:r.center),r.centerReg&&e.centerReg(r.centerReg===!0?null:r.centerReg),r.reg!=null&&(r.reg.constructor==={}.constructor?e.reg(t.Pick.choose(r.reg.x),t.Pick.choose(r.reg.y),r.reg.still):e.reg(r.reg)),r.x!=null&&(r.loc?r.loc.x==null&&(r.loc.x=r.x):r.loc={x:r.x}),r.y!=null&&(r.loc?r.loc.y==null&&(r.loc.y=r.y):r.loc={y:r.y}),r.loc&&(r.loc.constructor==={}.constructor?e.loc(t.Pick.choose(r.loc.x),t.Pick.choose(r.loc.y)):e.loc(t.Pick.choose(r.loc))),r.pos)if(r.pos.constructor==={}.constructor)e.pos(t.Pick.choose(r.pos.x),t.Pick.choose(r.pos.y),t.Pick.choose(r.pos.horizontal),t.Pick.choose(r.pos.vertical),t.Pick.choose(r.pos.container),t.Pick.choose(r.pos.index),r.pos.add,t.Pick.choose(r.pos.reg),t.Pick.choose(r.pos.regX),t.Pick.choose(r.pos.regY));else{var a=t.Pick.choose(r.pos);(a=="left"||a=="top")&&e.pos(),a=="right"&&e.pos({horizontal:"right"}),a=="bottom"&&e.pos({vertical:"bottom"}),(a=="rightbottom"||a=="bottomright")&&e.pos({horizontal:"right",vertical:"bottom"}),a=="center"&&e.center()}if((r.mov||r.move)&&(r.move&&(r.mov=r.move),r.mov.constructor==={}.constructor?e.mov(t.Pick.choose(r.mov.x),t.Pick.choose(r.mov.y)):e.mov(t.Pick.choose(r.mov))),r.outline&&setTimeout(function(){e.outline(r.outline.constructor==={}.constructor?r.outline:null),e.stage&&e.stage.update()},20),r.drag&&e.drag(r.drag.constructor==={}.constructor?r.drag:{currentTarget:!0}),r.gesture&&e.gesture(r.gesture.constructor==={}.constructor?r.gesture:null),r.mouse===!1&&e.noMouse(),r.transform&&setTimeout(function(){e.transform(r.transform.constructor==={}.constructor?r.transform:null)},20),r.animate)for(Array.isArray(r.animate)||(r.animate=[r.animate]),l=0;l<r.animate.length;l++)-function(){var f=r.animate[l];f.constructor==={}.constructor&&setTimeout(function(){e.animate(f)},20)}();if(r.wiggle)for(Array.isArray(r.wiggle)||(r.wiggle=[r.wiggle]),l=0;l<r.wiggle.length;l++)-function(){var f=r.wiggle[l];f.constructor==={}.constructor&&setTimeout(function(){e.wiggle(f)},20)}();r.expand&&e.expand(r.expand===!0?null:r.expand),r.cache&&(r.cache.constructor==={}.constructor?r.cache.x?e.cache(t.Pick.choose(r.cache.x),t.Pick.choose(r.cache.y),t.Pick.choose(r.cache.x),t.Pick.choose(r.cache.y)):e.cache(t.Pick.choose(r.cache.width),t.Pick.choose(r.cache.height)):e.cache()),r.tap&&e.tap&&e.tap(r.tap),r.change&&e.change&&e.change(r.change),r.hold&&e.hold&&e.hold(r.hold),r.noChange&&e.noChange&&e.noChange(),r.noTap&&e.noTap&&e.noTap(),r.noHold&&e.noHold&&e.noHold();var s=j.STYLE||t.STYLE;s&&(s.once===!0||s.once==e.type)&&(j.STYLE?j.STYLE={}:t.STYLE={})}},t.Style={remembered:{},clear:function(){return j.STYLE&&(j.STYLE={}),t.STYLE&&(t.STYLE={}),t.Style},clearTypes:function(){var e=j.STYLE||t.STYLE;return delete e.types,t.Style},clearGroups:function(){var e=j.STYLE||t.STYLE;return delete e.groups,t.Style},remember:function(e){n(e)&&(e="default");var r=j.STYLE||t.STYLE;return r||(kt?r=t.STYLE={}:r=j.STYLE={}),t.Style.remembered[e]=t.copy(r,!0),t.Style},clearRemembered:function(e){return n(e)?t.Style.remembered={}:delete t.Style.remembered[e],t.Style},recall:function(e){return n(e)&&(e="default"),j.STYLE?j.STYLE=t.Style.remembered[e]:t.STYLE=t.Style.remembered[e],t.Style},add:function(e){var r=j.STYLE||t.STYLE;return r||(kt?r=t.STYLE={}:r=j.STYLE={}),j.STYLE?j.STYLE=t.merge(r,e):t.STYLE=t.merge(r,e),t.Style},addType:function(e,r){var i=j.STYLE||t.STYLE;return i||(kt?i=t.STYLE={}:i=j.STYLE={}),i.type||(i.type={}),i.type[e]=r,t.Style},addGroup:function(e,r){var i=j.STYLE||t.STYLE;return i||(kt?i=t.STYLE={}:i=j.STYLE={}),i.group||(i.group={}),i.group[e]=r,t.Style},remove:function(e){var r=j.STYLE||t.STYLE;return r||(kt?r=t.STYLE={}:r=j.STYLE={}),delete r[e],t.Style},removeType:function(e){var r=j.STYLE||t.STYLE;return r||(kt?r=t.STYLE={}:r=j.STYLE={}),r.type&&delete r.type[e],t.Style},removeGroup:function(e){var r=j.STYLE||t.STYLE;return r||(kt?r=t.STYLE={}:r=j.STYLE={}),r.group&&delete r.group[e],t.Style}},t.PATH=null,t.TIME="seconds",t.TIMECHECK=!1,t.DIR="ltr",t.SEEDRAND=null,t.SEEDRANDCOUNT=0,t.ANIMATE=!0,t.OPTIMIZE=!1,t.ACTIONEVENT="mousedown",t.DEFAULTWIRE="currentValue",t.KEYFOCUS=null,t.POSREG=!1,t.DRAGALL=!1,t.MOBILE="default",t.Ticker={stages:null,myUpdate:null,alwaysList:new t.Dictionary,list:new t.Dictionary,wire:new t.Dictionary,setFPS:function(e,r){n(e)&&n(r)?(e=60,r=60):n(e)?e=60:n(r)&&(r=e),t.Ticker.framerate=Fe.Ticker.framerate=t.mobile()?e:r},setTimingMode:function(e){Fe.Ticker.timingMode=Fe.Ticker.RAF,e=="synched"&&(Fe.Ticker.timingMode=Fe.Ticker.RAF_SYNCHED),e=="timeout"&&(Fe.Ticker.timingMode=Fe.Ticker.TIMEOUT)},add:function(e,r){De("30");var i=t.Ticker;if(i.has(e,r))return e;if((n(r)||!r.update)&&(r=j.zdf.stage),n(e)||typeof e!="function"){je("zim.Ticker.add() - only add functions");return}return i.list.at(r)?i.list.at(r).push(e):i.list.add(r,[e]),i.ticker||(i.ticker=Fe.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),e},addWire:function(e,r){if(De("30"),n(r[0]))return e;var i=t.Ticker;i.wire.add(e,r);var l=r[0][r[1]];return r[4]&&(l=r[4](l,"from")),r[3]&&(e[r[6]]=r[7]=l),i.ticker||(i.ticker=Fe.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),e},rawID:{},raw:function(e){De("30");var r=t.makeID("letters",7);return-function i(l){e(l),t.Ticker.rawID[r]=requestAnimationFrame(i)}(),r},removeRaw:function(e){cancelAnimationFrame(t.Ticker.rawID[e]),delete t.Ticker.rawID[e]},call:function(e){var r=t.Ticker,i,l,a,s=[];for(a=0;a<r.list.length;a++){i=r.list.objects[a],l=r.list.values[a];for(var f=0;f<l.length;f++)l[f](e);var u=!1;(r.alwaysList.at(i)||l.length>0&&(n(r.update)&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)||r.update))&&(u=!0),u&&s.indexOf(i)<0&&s.push(i)}for(a=r.wire.length-1;a>=0;a--){var v=r.wire.objects[a],C=r.wire.values[a];if(C){var h=v[C[6]];h!=C[7]&&(C[4]&&(h=C[4](h,"to",C[7])),C[0][C[1]]=C[7]=h,C[5]&&C[5](h),i=C[0].stage,i&&s.indexOf(i)<0&&s.push(i)),C[2]&&C[0]&&(h=C[0][C[1]],C[7]!=h&&(C[4]&&(h=C[4](h,"from",C[7])),v[C[6]]=C[7]=h,C[5]&&C[5](h),i=v.stage,i&&s.indexOf(i)<0&&s.push(i)))}}if(r.list.length==0)for(a=0;a<r.alwaysList.length;a++)i=r.alwaysList.objects[a],s.indexOf(i)<0&&s.push(i);var g=s.length;for(a=0;a<g;a++)s[a].update()},always:function(e){De("30");var r=t.Ticker;r.framerate||r.setFPS(),(n(e)||!e.update)&&(e=j.zdf.stage),r.alwaysList.add(e,!0),r.ticker||(r.ticker=Fe.Ticker.on("tick",r.call))},alwaysOff:function(e){var r=t.Ticker;(n(e)||!e.update)&&(e=j.zdf.stage),r.alwaysList.remove(e)},remove:function(e){var r=t.Ticker;if(n(e)||typeof e!="function"){je("zim.Ticker - only remove functions");return}for(var i=0;i<r.list.length;i++){var l=r.list.values[i].indexOf(e);l>-1&&r.list.values[i].splice(l,1)}r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(Fe.Ticker.off("tick",r.ticker),r.ticker=null)},removeAll:function(e){for(var r=t.Ticker,i,l=0;l<r.list.length;l++)i=r.list.objects[l],(n(e)||e===i)&&(r.list.values[l]=[]);r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(Fe.Ticker.off("tick",r.ticker),r.ticker=null)},removeWire:function(e,r,i,l){var a=t.Ticker;if(n(e)&&n(r)&&n(i)&&n(l))a.wire.clear();else for(var s=a.wire.length-1;s>=0;s--){var f=a.wire.objects[s],u=a.wire.values[s];u&&(e&&f!=e||r&&u[0]!=r||i&&u[1]!=i||l&&u[6]!=l||(a.wire.objects.splice(s,1),a.wire.values.splice(s,1)))}a.alwaysList.length>0||a.list.length>0||a.wire.length>0||(Fe.Ticker.off("tick",a.ticker),a.ticker=null)},isUpdating:function(e){n(e)&&(e=j.zdf.stage);var r=!1,i=t.Ticker;return(i.alwaysList.at(e)||i.list&&i.list.values.at(e)&&i.list.values.at(e).length>0&&(n(i.update)&&!t.OPTIMIZE&&(kt||!j.OPTIMIZE)||i.update))&&(r=!0),r},has:function(e,r){return(n(r)||!r.update)&&(r=j.zdf.stage),t.Ticker.list&&t.Ticker.list.at(r)&&t.Ticker.list.at(r).indexOf(e)>=0},getFPS:function(){return Fe.Ticker.getMeasuredFPS()},dispose:function(e){for(var r=t.Ticker,i=0,l,a=r.list.length-1;a>=0;a--)l=r.list.objects[a],n(e)||e===l?(r.list.remove(e),r.alwaysList.remove(e)):i+=r.list.values[a].length;if(!(r.alwaysList.length>0))return i==0&&(Fe.Ticker.off("tick",r.ticker),r.ticker=null),!0}},t.Ticker.setFPS(),Object.defineProperty(t.Ticker,"update",{get:function(){return t.Ticker.myUpdate},set:function(e){var r=t.Ticker;typeof e!="boolean"&&(e=null),r.myUpdate=e,r.myUpdate===!1&&(cancelAnimationFrame(r.ticker),r.alwaysList=new t.Dictionary)}}),t.Pages=function(e,r,i,l,a,s,f,u,v){var C="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",h;if(h=at(t.Pages,arguments,C,this))return h;De("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=u;var g=f===!1?{}:t.getStyle(this.type,this.group,v),k=mt(i);if(n(e)&&(e=g.pages!=null?g.pages:[]),this.pages=e,n(r)&&(r=g.transition!=null?g.transition:"none"),n(i)&&(i=g.speed!=null?g.speed:k=="s"?.2:200),n(l)&&(l=g.transitionTable!=null?g.transitionTable:[]),this.transitionTable=l,n(s)&&(s=g.arrowDisableColor!=null?g.arrowDisableColor:t.grey),this.arrowDisableColor=s,n(a)&&(a=g.holder!=null?g.holder:null),n(a)&&j.zdf&&(a=j.zdf.stage),!a.getBounds||!a.getBounds()){je(`zim controls - Pages():
holder object must have bounds set`);return}this.speed=i,this.active=!0;var y=this;y.transitioning=!1;var x=a.getBounds().width,I=a.getBounds().height,w,E;(r!="none"||l!=[])&&A();function A(){w=new Fe.Shape,w.graphics.f("black").r(0,0,x,I+1),E=new Fe.Shape,E.graphics.f("white").r(0,0,x,I+1)}var p=["left","right","up","down"],T,B,F=!0,D;for(D=0;D<e.length;D++)T=e[D],T.constructor!={}.constructor&&(T=e[D]={page:e[D]}),T.swipe&&(F=!1);for(D=0;D<e.length;D++){if(T=e[D],T.constructor!=={}.constructor&&(T=e[D]={page:e[D]}),F){var P=e[D-1],Y=e[D+1];T.swipe=[P?P.page:null,Y?Y.page:null]}$(T.page,T.swipe)}var _=this.page=e[0]?e[0].page:null;n(this.page)||(this.index=0),this.addChild(_),Q(_),this.swipe=new t.Swipe(a);var V,b=!1,Z=this.swipe.on("swipe",function(L){if(y.active){var c=L.currentTarget.direction;if(c!="none"){var d="";c=="left"?d="right":c=="right"?d="left":c=="up"?d="down":c=="down"&&(d="up"),c=d;var o=p.indexOf(c);B=_.zimSwipeArray[o],V=[B,c,null,null,!0],y.page=_,y.nextPage=B,y.direction=c,y.dispatchEvent("swipe"),setTimeout(function(){b||y.go(B,c,null,null,!0)},50)}}});function $(L,c){n(L)||(L.zimHTMLList=new t.Dictionary,re(L),L.zimSwipeArray=c||[],L.zimOriginalAlpha=L.alpha,L.parent&&L.parent.removeChild(T.page))}function Q(L){if(!n(L))for(L.removedHTML=!1,D=0;D<L.zimHTMLList.length;D++)L.addChildAt(L.zimHTMLList.values[D].obj,L.zimHTMLList.values[D].depth)}function re(L){if(!L.removedHTML){L.removedHTML=!0,L.zimHTMLList.clear();var c,d;for(d=0;d<L.numChildren;d++)if(c=L.getChildAt(d),c.type=="TextArea"||c.type=="Loader"||c.type=="Tag"){var o={obj:c,depth:L.getChildIndex(c)};L.zimHTMLList.add(c,o)}for(d=L.numChildren-1;d>=0;d--)c=L.getChildAt(d),(c.type=="TextArea"||c.type=="Loader"||c.type=="Tag")&&L.removeChild(c)}}this.addPage=function(L,c){$(L,c),y.pages.push({page:L}),_?L.parent&&L.parent.removeChild(L):(_=y.page=L,y.addChild(_))},this.removePage=function(L){re(L),y.currentPage==L&&(y.removeChild(L),a.stage&&a.stage.update()),t.loop(y.pages,function(c,d){(c.page==L||c==L)&&y.pages.splice(d,1)},!0),L.zimSwipeArray=null},this.setSwipeArray=function(L,c){n(c)&&(c=[]);var d={page:L,swipe:c};d.page.zimSwipeArray=d.swipe?d.swipe:[]},this.pause=function(){b=!0},this.unpause=function(){b&&y.go(V[0],V[1],V[2],V[3],V[4])};var G=!0;this.go=function(L,c,d,o,S){if(typeof L=="number"){var X=y.pages[L];if(n(X))return;L=X.page}setTimeout(function(){b=!1},200);for(var m=[{x},{x:-x},{y:I},{y:-I}],O=[{x:0},{x:0},{y:0},{y:0}],de=[{x:x/2,alpha:0},{x:-x/2,alpha:0},{y:I/2,alpha:0},{y:-I/2,alpha:0}],R=r,N=y.speed,se=0;se<y.transitionTable.length;se++)if(y.transitionTable[se][0]==_&&y.transitionTable[se][1]==L){R=y.transitionTable[se][2],n(y.transitionTable[se][3])||(N=y.transitionTable[se][3]);break}n(d)&&(d=R),n(o)&&(o=N),y.speed=o;function ie(we){we[0].uncache(),we[1].uncache(),y.transitioning=!1,y.dispatchEvent("pagetransitioned"),y.removeChild(y.lastPage),d=="fan"&&(c=="right"||c=="down"?(y.lastPage.rotation=0,y.lastPage.regY=0,y.lastPage.mov(0,-y.lastPage.height)):(y.page.rotation=0,y.page.regY=0,y.page.mov(0,-y.lastPage.height))),y.removeChild(w),y.removeChild(E),Q(_),G=!0}function q(we){y.removeChild(y.lastPage),t.animate(we.shift(),{alpha:0},y.speed/2,null,ie,we)}if(y.direction=c,L==""||L==null)y.page=_,y.dispatchEvent("nothing");else if(typeof L=="string")y.page=_,y.dispatchEvent(L);else{if(L==_)return;n(c)&&(c="right");var z=p.indexOf(c);if(!G)return;G=!1,L.x=0,L.y=0,L.alpha=L.zimOriginalAlpha;var ce,Ie=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"];if(Ie.indexOf(d)>=0){var K=d;ce=!0,d="slide"}var xe=["explodeDark","explodeLight","explodeZIM"];if(xe.indexOf(d)>=0){var J=d;ce=!0,d="fade"}if(d.type=="Emitter"&&(ce=d,d.horizontal||d.vertical?d="slide":d="fade"),y.transitioning=!0,d=="slide"?(L.x=-(m[z].x|0),L.y=-(m[z].y|0),L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),y.addChild(L),y.addChild(_),t.animate(_,m[z],y.speed,null,ie,[_,L]),t.animate(L,O[z],y.speed)):d=="reveal"?(L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),y.addChild(L),y.addChild(_),t.animate(_,de[z],y.speed,null,ie,[_,L])):d=="fade"?(L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),L.alpha=1,y.addChild(L),y.addChild(_),t.animate(_,{alpha:0},y.speed,null,ie,[_,L])):d=="black"?(L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),L.alpha=1,y.addChild(L),y.addChild(_),w.alpha=0,y.addChild(w),t.animate(w,{alpha:1},y.speed/2,null,q,[w,_,L])):d=="clear"?(L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),L.alpha=0,y.addChild(L),y.addChild(_),t.animate(_,{alpha:0},y.speed/2),t.animate(L,{alpha:1},y.speed/2,null,ie,[_,L],y.speed/2)):d=="white"?(L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),L.alpha=1,y.addChild(L),y.addChild(_),E.alpha=0,y.addChild(E),t.animate(E,{alpha:1},y.speed/2,null,q,[E,_,L])):d=="fan"?(L.cache(0,0,(x+1)/L.scaleX,(I+1)/L.scaleY),_.cache(0,0,(x+1)/_.scaleX,(I+1)/_.scaleY),L.alpha=1,c=="right"||c=="down"?(y.addChild(L),y.addChild(_),_.regY=_.height,_.mov(0,_.height),t.animate(_,{rotation:-90},y.speed,null,ie,[_,L])):(y.addChild(_),y.addChild(L),L.regY=_.height,L.mov(0,_.height),L.rotation=-90,t.animate(L,{rotation:0},y.speed,null,ie,[_,L]))):(y.transitioning=!1,y.addChild(L),y.removeChild(_),G=!0),ce){var fe=z<2,U,ue;if(K||d=="slide"){K?(K=="lineDark"||K=="lineLight"?U=new t.Rectangle(fe?30:x+5,fe?I+5:30,K=="lineDark"?t.dark:t.white).alp(.2):K=="lineZIM"?U=new t.Rectangle(fe?50:x+5,fe?I+5:50,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.5):K=="pixelDark"||K=="pixelLight"?U=new t.Rectangle(40,40,t.clear,K=="pixelDark"?t.dark:t.white,2).alp(.7):K=="pixelZIM"?U=new t.Rectangle(40,40,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.7):K=="bubbleDark"||K=="bubbleLight"?U=new t.Circle(30,t.clear,K=="bubbleDark"?t.dark:t.white,2).alp(.7):K=="bubbleZIM"&&(U=new t.Circle(30,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.7)),U.centerReg({add:!1}),K=="lineDark"||K=="lineLight"||K=="lineZIM"?ue=new t.Emitter({obj:U,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):ue=new t.Emitter({obj:U,num:6,life:.5,decayTime:.5,width:fe?0:x,height:fe?I:0,vertical:fe,horizontal:!fe,startPaused:!0})):ue=ce;var ke=[{x:0,y:I/2},{x,y:I/2},{x:x/2,y:0},{x:x/2,y:I}],ne=[{x,y:I/2},{x:0,y:I/2},{x:x/2,y:I},{x:x/2,y:0}];ue.centerReg(a).spurt(null,y.speed),ue.x=ke[z].x,ue.y=ke[z].y,t.animate(ue,ne[z],y.speed,null,function(){K&&ue.dispose()})}else(J||d=="fade")&&(J?(J=="explodeDark"||J=="explodeLight"?U=new t.Circle(150,J=="explodeDark"?t.dark:t.white).alp(.5):J=="explodeZIM"&&(U=new t.Circle(130,[t.green,t.yellow,t.orange,t.pink,t.blue]).alp(.7)),ue=new t.Emitter({obj:U,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):ue=ce,ue.centerReg(a).spurt(null,y.speed*.35),ue.on("fizzed",function(){J&&ue.dispose()}));a&&a.type!="Stage"&&a.type!="StageGL"&&ue.particles&&a.shape&&ue.particles.setMask(a.shape)}for(a&&a.shape&&ue&&ue.particles&&ue.particles.setMask(a.shape),re(_),y.lastPage=_,y.page=L,y.index=-1,se=0;se<y.pages.length;se++){var ve=y.pages[se].page;ve==y.page&&(y.index=se)}d=="none"&&Q(L),n(S)&&(S=!1),y.fromSwipe=S,y.dispatchEvent("page"),_=L,y.setArrows(e.index),a.stage&&a.stage.update()}},a&&a.shape&&(a.mouseChildren=!0,a.mouseEnabled=!0,y.setMask(a.shape)),this.resize=function(){x=a.getBounds().width,I=a.getBounds().height,(r!="none"||l!=[])&&A()},this.puff=function(L){for(var c=0;c<e.length;c++)y.addChild(e[c].page);y.addChild(_),L>0&&setTimeout(function(){y.settle()},L*(k=="s"?1e3:1))},this.settle=function(){y.removeAllChildren(),y.addChild(_),y.dispatchEvent("puffed")},this.disable=function(){y.active=!1},this.enable=function(){y.active=!0},this.arrows={},this.setArrows=function(){if(!t.isEmpty(y.arrows)){var L=y.pages[y.index];if(!(!L||!L.swipe)){var c=L.swipe,d=[t.LEFT,t.RIGHT,t.DOWN,t.UP];t.loop(d,function(o,S){c[S]?t.loop(y.arrows[o],function(X){if(X.setDisabled===!0){X.activate(!1,y.arrowDisableColor),X.setDisabled=null;return}X.enabled||X.activate(!0,X.arrowBackgroundColor)}):t.loop(y.arrows[o],function(X){if(X.setDisabled===!1){X.activate(!0,X.arrowBackgroundColor),X.setDisabled=null;return}X.enabled&&X.activate(!1,y.arrowDisableColor)})}),y.stage&&y.stage.update()}}},y.added(function(L){if(L.frame&&L.frame.scaling=="full"){if(!t.globalManager){var c=t.globalManager=new t.Manager;c.frame=L.frame,c.event=L.frame.on("resize",function(){c.resize()})}t.globalManager.add(y)}}),f!==!1&&t.styleTransforms(this,g),this.dispose=function(L,c,d){if(t.globalManager){var o=t.globalManager;o.remove(y),t.globalManager.items.length==0&&(o.frame.off("resize",o.event),o.dispose(),t.globalManager=null)}return y.swipe.off("swipe",Z),y.swipe.dispose(),d||this.zimContainer_dispose(!0),!0}},t.extend(t.Pages,t.Container,["clone","dispose"],"zimContainer",!1),t.Arrow=function(e,r,i,l,a,s,f,u,v,C,h){var g="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",k;if(k=at(t.Arrow,arguments,g,this))return k;De("71.2"),this.group=C;var y=v===!1?{}:t.getStyle("Arrow",this.group,h);n(l)&&(l=y.direction!=null?y.direction:"right"),n(e)&&(e=y.backgroundColor!=null?y.backgroundColor:t.blue),this.arrowBackgroundColor=e,n(r)&&(r=y.rollBackgroundColor!=null?y.rollBackgroundColor:t.blue.lighten(.2)),this.arrowRollBackgroundColor=r,n(a)&&(a=y.type!=null?y.type:"triangle"),n(s)&&(s=y.newPage!=null?y.newPage:null),n(f)&&(f=y.trans!=null?y.trans:null),n(u)&&(u=y.speed!=null?y.speed:null);var x,I,w,E,A;a=="triangle"?(x=new t.Triangle(45,45,45,e,null,null,null,null,-7).rot(90),I=new t.Triangle(45,45,45,r,null,null,null,null,-7).rot(90)):a=="thick"?(x=new t.Shape,w=x.graphics.f(e).command,A="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",x.p(A).reg(-4),I=new t.Shape,E=I.graphics.f(r).command,I.p(A).reg(-4)):a=="thin"?(x=new t.Shape,w=x.graphics.f(e).command,A="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",x.p(A).reg(-4),I=new t.Shape,E=I.graphics.f(r).command,I.p(A).reg(-4)):a=="angle"&&(x=new t.Shape,w=x.graphics.f(e).command,A="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",x.p(A).reg(-3),I=new t.Shape,E=I.graphics.f(r).command,I.p(A).reg(-3)),this.zimButton_constructor(50,50,"",t.clear,t.clear,null,null,null,null,null,null,null,null,null,null,null,x,I),this.type="Arrow";var p=this;if(this.activate=function(D,P){return n(D)&&(D=!0),n(P)&&(P=t.grey),P===!1||(D?(p.enabled=!0,P!==!1&&(a=="triangle"?(p.icon.color=p.arrowBackgroundColor,p.rollIcon.color=p.arrowRollBackgroundColor):(w.style=p.arrowBackgroundColor,E.style=p.arrowRollBackgroundColor))):(p.enabled=!1,P!==!1&&(a=="triangle"?(p.icon.color=P,p.rollIcon.color=P):(w.style=P,E.style=P)))),p},n(i)||i.type!="Pages")return;var T=(kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click";n(i.arrows)&&(i.arrows={}),n(i.arrows[l])&&(i.arrows[l]=[]),i.arrows[l].push(this);var B=F();B||this.activate(!1,i.arrowDisableColor);function F(){var D=i.pages[i.index];if(!(!D||!D.page||!D.page.zimSwipeArray)){var P=D.page.zimSwipeArray;if(l=="left")return P[0];if(l=="right")return P[1];if(l=="up")return P[2];if(l=="down")return P[3]}}this.expand(),this.on(T,function(){if(!i.transitioning){var D=F();D&&i.go(D,l,f,u)}}),v!==!1&&t.styleTransforms(this,y),this.clone=function(){return p.cloneProps(new t.Arrow(e,r,i,l,a,s,f,u,v,this.group,h))}},t.extend(t.Arrow,t.Button,"clone","zimButton",!1),t.HotSpots=function(e,r,i){var l="spots, local, mouseDowns",a;if(a=at(t.HotSpots,arguments,l,this))return a;De("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",n(r)&&(r=!0),n(i)&&(i=!1);var s=(kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",f=this,u,v,C=f.hotSpots=[];n(e)&&(e=[]);for(var h=0;h<e.length;h++)g(e[h]);function g(y){var x=null;if(!Array.isArray(y.rect)){if(x=y.rect,!x){je("zim controls - HotSpots(): HotSpot "+y.page+" "+y.rect+" button does not exist");return}y.rect=[x.x,x.y,x.width||1,x.height||1]}v=new t.HotSpot(y.page,y.rect[0],y.rect[1],y.rect[2],y.rect[3],y.call,y.callOver,y.callOut,r,y.talk),v.zimHSpage=y.page,v.button=x,C.push(v),v.on(s,k),x&&n(y.callOver)&&n(y.callOut)&&(v.spot.mouseEnabled=!1,v.spot.mouseChildren=!1,x.zimHScall=y.call,x.zimHSEvent=x.on(s,k,!0),i||(x.zimHSMDEvent=x.on("mousedown",function(I){I.stopImmediatePropagation()})),x.cur("pointer"))}function k(y){y.stopImmediatePropagation&&y.stopImmediatePropagation(),j.event&&(j.event.cancelBubble=!0),typeof y.currentTarget.zimHScall=="function"&&y.currentTarget.zimHScall(y)}this.add=this.addHotSpot=function(y,x,I,w,E,A){u={page:y,rect:x,call:I,callOver:w,callOut:E,talk:A},e.push(u),g(u)},this.show=function(){for(var y=0;y<C.length;y++)v=C[y],v.button||(v.spot.alpha=.2)},this.hide=function(){for(var y=0;y<C.length;y++)v=C[y],v.spot.alpha=0},this.remove=this.removeHotSpots=function(y,x){for(var I=e.length-1;I>=0;I--)u=e[I],v=C[I],x&&!Array.isArray(x)&&(x=[x.x,x.y,x.getBounds().width,x.getBounds().height]),(n(y)&&n(x)||n(x)&&y==u.page||n(y)&&t.arraysEqual(x,u.rect)||y==u.page&&t.arraysEqual(x,u.rect))&&(e.splice(I,1),v.button&&(v.button.off(s,v.button.zimHSEvent),v.button.zimHSEvent=null,i||(v.button.off("mousedown",v.button.zimHSMDEvent),v.button.zimHSMDEvent=null)),v.off(s,k),v.dispose(),C.splice(I,1))},this.dispose=function(){for(var y=0;y<C.length;y++)v=C[y],v.button&&(v.button.off(s,v.button.zimHSEvent),v.button.zimHSCall=null,v.button.zimHSEvent=null,i||(v.button.off("mousedown",v.button.zimHSMDEvent),v.button.zimHSMDEvent=null)),v.off(s,k),v.dispose();return!0}},t.extend(t.HotSpots,t.Container,"dispose","zimContainer",!1),t.HotSpot=function(e,r,i,l,a,s,f,u,v,C){var h="obj, x, y, width, height, call, callOver, callOut, local, talk",g;if(g=at(t.HotSpot,arguments,h,this))return g;if(De("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",n(e)||!e.addChild){je(`zim controls - HotSpot():
Please pass in container object for obj`);return}if(!(e instanceof Fe.Container)){je(`zim controls - HotSpot():
Objects passed in should be Containers`);return}if(n(r)||n(i)||n(l)||n(a)){je(`zim controls - HotSpot():
Please pass in x, y, width, height`);return}n(v)&&(v=!0);var k=(kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",y=l,x=a,I,w,E;if(v)I=new t.Point(r,i),w=l,E=a;else{I=e.globalToLocal(r,i);var A=e.globalToLocal(r+y,i+x);w=A.x-I.x,E=A.y-I.y}var p=new t.Shape(l,a);if(p.talk=n(C)?"HotSpot":C,p.alpha=0,p.graphics.f("black").dr(0,0,w,E),p.x=I.x,p.y=I.y,p.cur("pointer"),p.expand(0),this.spot=p,typeof s=="function")var T=p.on(k,function(D){s(D)});if(typeof f=="function")var B=p.on("mouseover",function(D){f(D)});if(typeof u=="function")var F=p.on("mouseout",function(D){u(D)});e.addChild(p),this.show=function(){p.alpha=.5,e.stage&&e.stage.update()},this.hide=function(){p.alpha=0,e.stage&&e.stage.update()},this.dispose=function(){return T&&p.off(k,B),B&&p.off("mouseover",B),F&&p.off("mouseout",F),e.removeChild(p),p=null,!0}},t.extend(t.HotSpot,t.Container,"dispose","zimContainer",!1),t.Guide=function(e,r,i,l,a,s,f,u){var v="obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",C;if(C=at(t.Guide,arguments,v,this))return C;De("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=f;var h=s===!1?{}:t.getStyle(this.type,this.group,u);if(n(e)&&(j.zdf?e=j.zdf.stage:e="stage"),n(r)&&(r=h.vertical!=null?h.vertical:!0),e!="stage"&&(!e.addChild||!e.getBounds||!e.getBounds())){Gn("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=h.pixels!=null?h.pixels:!(zdf&&zdf.scaling=="full")),n(l)&&(l=h.hideKey!=null?h.hideKey:"G"),n(a)&&(a=h.pixelKey!=null?h.pixelKey:"P");var g=this,k,y=80,x=26,I=y/6+y/2,w=x*2,E,A,p;r?(p=T("#00c5af","white","white"),p.shape.regX=y+y/6,p.shape.regY=x/2,p.label.x=-y/2-y/6):(p=T("#d61fa0","white","white"),p.shape.regX=y/2,p.shape.regY=x+x/4,p.label.y=-x*3/4);function T(G,L,c){var d=new t.Container({style:!1});return d.shape=new t.Shape,d.shape.graphics.s(L).ss(1).f(G).r(0,0,y,x),d.shape.alpha=.9,d.addChild(d.shape),d.label=new Fe.Text("10","16px arial",c),d.label.textAlign="center",d.label.textBaseline="middle",d.addChild(d.label),d.mouseChildren=!1,d.mouseEnabled=!1,d}var B;e!="stage"&&e.addChild(g);var F=t.added(g,b),D=!1,P,Y,_,V;function b(){if(e=="stage"?(B=g.stage,e=B):B=e.stage,B.frame&&B.frame.scaling=="full"){if(!t.globalManager){var G=t.globalManager=new t.Manager;G.frame=B.frame,G.event=B.frame.on("resize",function(){G.resize()})}t.globalManager.add(g)}e.addChild(g),P=e.getBounds().width,Y=e.getBounds().height,r?(p.y=Y/2,p.label.text="x:"+(g.pixels?Math.round(P*70/100):"70%")):(p.x=P/2,p.label.text="y:"+(g.pixels?Math.round(Y*70/100):"70%")),_=new t.Shape,g.addChild(_),r?_.x=P*.7:_.y=Y*.7,D||(e.addChild(g),Q()),B.off("stagemousemove",k),k=B.on("stagemousemove",$),B.update()}var Z={x:0,y:0};function $(G){var L,c;G?(L=e.globalToLocal(G.rawX/t.scaX,G.rawY/t.scaY),Z=L):L={x:Z.x,y:Z.y},i?r?(c=Math.round(Math.abs(L.x-_.x)),p.label.text="x:"+Math.max(0,Math.min(c,Math.round(P))),p.y=Math.max(w,Math.min(L.y,A))):(c=Math.round(Math.abs(L.y-_.y)),p.label.text="y:"+Math.max(0,Math.min(c,Math.round(Y))),p.x=Math.max(I,Math.min(L.x,E))):r?(c=Math.round(Math.abs(L.x-_.x)/P*100),p.label.text="x:"+Math.max(0,Math.min(c,100))+"%",p.y=Math.max(w,Math.min(L.y,A))):(c=Math.round(Math.abs(L.y-_.y)/Y*100),p.label.text="y:"+Math.max(0,Math.min(c,100))+"%",p.x=Math.max(I,Math.min(L.x,E))),B&&B.update()}function Q(){D=!0,P=e.getBounds().width,Y=e.getBounds().height;var G;r?(G="ew-resize",V=new Fe.Rectangle(0,0,P,0)):(G="ns-resize",V=new Fe.Rectangle(0,0,0,Y)),t.noDrag(_),setTimeout(function(){t.drag(_,V,null,G,G,null,null,!0)},500),B.mouseMoveOutside=!0,B.enableMouseOver(10),E=P-y*2/3,A=Y-x-x,_.uncache();var L=_.graphics;r?(L.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,Y),L.f().s("white").ss(2).mt(0,0).lt(0,Y),L.s("#00c5af").sd([20,20]).mt(0,0).lt(0,Y).sd(),_.cache(-10,0,20,Y)):(L.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(P,0),L.f().s("white").ss(2).mt(0,0).lt(P,0),L.s("#d61fa0").sd([20,20]).mt(0,0).lt(P,0).sd(),_.cache(0,-10,P,20)),r?p.x=P:p.y=Y,g.addChild(p)}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(G){i=G,g.resize()}}),j.addEventListener("keydown",re);function re(G){G||(G=event),B&&(String.fromCharCode(G.keyCode)==l.toUpperCase()&&g.toggle(),String.fromCharCode(G.keyCode)==a.toUpperCase()&&(g.pixels=!g.pixels))}this.toggled=!0,this.toggle=function(G){return G===!0?g.visible=g.toggled=!0:G===!1?g.visible=g.toggled=!1:(g.visible=!g.visible,g.toggled=g.visible),B&&(B.off("stagemousemove",k),g.visible&&(k=B.on("stagemousemove",$,g)),B.update()),g},this.resize=function(){return g?(B&&(Q(),$()),!0):!1},s!==!1&&t.styleTransforms(this,h),this.dispose=function(){if(!g)return!1;if(t.globalManager){var G=t.globalManager;G.remove(g),t.globalManager.items.length==0&&(G.frame.off("resize",G.event),G.dispose(),t.globalManager=null)}return t.noDrag(_),clearInterval(F),g.removeAllChildren(),j.removeEventListener("keydown",re),g.parent&&g.parent.removeChild(g),g=null,!0}},t.extend(t.Guide,t.Container,"clone","zimContainer",!1),t.Grid=function(e,r,i,l,a,s,f,u,v,C,h){var g="obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",k;if(k=at(t.Grid,arguments,g,this))return k;De("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=C;var y=v===!1?{}:t.getStyle(this.type,this.group,h);if(n(e)&&(j.zdf?e=j.zdf.stage:e="stage"),n(r)&&(r=y.color!=null?y.color:t.black),e!="stage"&&(!e.addChild||!e.getBounds||!e.getBounds())){Gn("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=y.pixels!=null?y.pixels:!(zdf&&zdf.scaling=="full")),n(l)&&(l=y.hideKey!=null?y.hideKey:"G"),n(a)&&(a=y.pixelKey!=null?y.pixelKey:"P"),n(s)&&(s=y.allowToggle!=null?y.allowToggle:!0),n(f)&&(f=y.cache!=null?y.cache:!0),n(u)&&(u=y.numbers!=null?y.numbers:!0);var x=this,I=10,w;this.mouseChildren=!1,this.mouseEnabled=!1;var E=80,A=26,p=x.numbersX=B("#dddddd",r,"#333333");p.shape.regX=E/2,p.shape.regY=-A/4,p.label.y=A*3/4;var T=x.numbersY=B("#dddddd",r,"#333333");T.shape.regX=-E/6,T.shape.regY=A/2,T.label.x=E/2+E/6,u||(p.visible=!1,T.visible=!1);function B(o,S,X){var m=new t.Container({style:!1});return m.shape=new Fe.Shape,m.shape.graphics.s(S).ss(1).f(o).r(0,0,E,A),m.shape.alpha=.9,m.addChild(m.shape),m.label=new Fe.Text("10","16px arial",X),m.label.textAlign="center",m.label.textBaseline="middle",m.addChild(m.label),m.mouseChildren=!1,m.mouseEnabled=!1,m}var F=E/6+E/2,D=A*2,P,Y;p.x=F,T.y=D,p.label.text="x:0",T.label.text="y:0";var _;e!="stage"&&e.addChild(x);var V=t.added(x,Z),b=!1;function Z(){if(e=="stage"?(_=x.stage,e=_):_=e.stage,_.frame&&_.frame.scaling=="full"){if(!t.globalManager){var o=t.globalManager=new t.Manager;o.frame=_.frame,o.event=_.frame.on("resize",function(){o.resize()})}t.globalManager.add(x)}b||(c(),e.addChild(x)),_.off("stagemousemove",w),w=_.on("stagemousemove",Q),_.update()}var $={x:0,y:0};function Q(o){var S;o?(S=e.globalToLocal(o.rawX/t.scaX,o.rawY/t.scaY),$=S):S={x:$.x,y:$.y},i?(p.label.text="x:"+Math.max(0,Math.min(Math.round(S.x),Math.round(re))),p.x=Math.max(F,Math.min(S.x,P)),T.label.text="y:"+Math.max(0,Math.min(Math.round(S.y),Math.round(G))),T.y=Math.max(D,Math.min(S.y,Y))):(p.label.text="x:"+Math.max(0,Math.min(Math.round(S.x/re*100),100))+"%",p.x=Math.max(F,Math.min(S.x,P)),T.label.text="y:"+Math.max(0,Math.min(Math.round(S.y/G*100),100))+"%",T.y=Math.max(D,Math.min(S.y,Y))),_&&_.update()}var re,G,L;function c(){b=!0,e&&e.getBounds&&(re=e.getBounds().width,G=e.getBounds().height),_&&(_.mouseMoveOutside=!0,_.enableMouseOver(10)),P=re-E*2/3,Y=G-A-A,L=x.grid=new t.Container({style:!1}),x.addChild(L);var o=new Fe.Shape;L.addChild(o);var S=o.graphics;S.s(r).ss(1);var X=new Fe.Shape;L.addChild(X);var m;if(i){for(m=0;m<re/I;m++)S.mt(m*I,0).lt(m*I,G);for(m=0;m<G/I;m++)S.mt(0,m*I).lt(re,m*I);for(o.alpha=.3,S=X.graphics,S.s(r).ss(1),m=0;m<re/(I*10);m++)S.mt(m*(I*10),0).lt(m*(I*10),G);for(m=0;m<G/(I*10);m++)S.mt(0,m*(I*10)).lt(re,m*(I*10))}else{for(m=1;m<20+1;m++)S.mt(m*re/20,0).lt(m*re/20,G);for(m=1;m<20;m++)S.mt(0,m*G/20).lt(re,m*G/20);for(o.alpha=.3,S=X.graphics,S.s(r).ss(1),m=1;m<10;m++)S.mt(m*re/10,0).lt(m*re/10,G);for(m=1;m<10;m++)S.mt(0,m*G/10).lt(re,m*G/10)}var O=80;S.s("#FFFFFF").ss(8),S.mt(re/2,G/2-O/2).lt(re/2,G/2+O/2),S.mt(re/2-O/2,G/2).lt(re/2+O/2,G/2),S.s("#000000").ss(4),S.mt(re/2,G/2-O/2).lt(re/2,G/2+O/2),S.mt(re/2-O/2,G/2).lt(re/2+O/2,G/2),S.s(r).ss(f?3:2),S.dr(0,0,re,G),X.alpha=.5,f&&L.cache(0,0,re,G),x.addChild(p),x.addChild(T),_&&_.update()}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(o){i=o,x.resize()}}),j.addEventListener("keydown",d);function d(o){o||(o=event),!(!_||!s)&&(String.fromCharCode(o.keyCode)==l.toUpperCase()&&x.toggle(),String.fromCharCode(o.keyCode)==a.toUpperCase()&&(x.removeChild(L),L=null,x.pixels=!x.pixels))}this.toggled=!0,this.toggle=function(o){return o===!0?x.visible=x.toggled=!0:o===!1?x.visible=x.toggled=!1:(x.visible=!x.visible,x.toggled=x.visible),_.off("stagemousemove",w),x.visible&&(w=_.on("stagemousemove",Q,x)),_&&_.update(),x},this.resize=function(){return x?(x.removeChild(L),L=null,_&&(c(),Q(),setTimeout(function(){x&&x.removeChild(L),L=null,c()},200)),!0):!1},v!==!1&&t.styleTransforms(this,y),this.dispose=function(){if(t.globalManager){var o=t.globalManager;o.remove(x),t.globalManager.items.length==0&&(o.frame.off("resize",o.event),o.dispose(),t.globalManager=null)}return clearInterval(V),x.removeAllChildren(),j.removeEventListener("keydown",d),x.parent&&x.parent.removeChild(x),x=null,!0}},t.extend(t.Grid,t.Container,"clone","zimContainer",!1),t.Wrapper=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D){var P="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",Y=null;if(Y=at(t.Wrapper,arguments,P,this))return Y;De("78.5"),this.group=F;var _=B===!1?{}:t.getStyle("Wrapper",this.group,D);n(r)&&(r=_.width!=null?_.width:300),n(x)&&(x=_.height!=null?_.height:null),n(i)&&(i=_.spacingH!=null?_.spacingH:null),n(l)&&(l=_.spacingV!=null?_.spacingV:null),n(a)&&(a=_.wrapperType!=null?_.wrapperType:"spacing"),n(s)&&(s=_.align!=null?_.align:"left"),n(f)&&(f=_.valign!=null?_.valign:"top"),n(u)&&(u=_.alignInner!=null?_.alignInner:"left"),n(v)&&(v=_.valignInner!=null?_.valignInner:"bottom"),n(C)&&(C=_.flip!=null?_.flip:!1),n(h)&&(h=_.reverse!=null?_.reverse:!1),n(g)&&(g=_.bottomFull!=null?_.bottomFull:!1),n(k)&&(k=_.colSize!=null?_.colSize:100),n(y)&&(y=_.rowSize!=null?_.rowSize:null),n(i)&&(i=0),n(l)&&(l=0),n(I)&&(I=_.minSpreadNum!=null?_.minSpreadNum:2),n(w)&&(w=_.minStretchNum!=null?_.minStretchNum:3),n(E)&&(E=_.percentVoidH!=null?_.percentVoidH:0),n(A)&&(A=_.offsetVoidH!=null?_.offsetVoidH:0),n(p)&&(p=_.percentVoidV!=null?_.percentVoidV:0),n(T)&&(T=_.offsetVoidV!=null?_.offsetVoidV:0);var V=200,b=0,Z=0,$=0,Q=r;this.items=[];var re,G;a=="spread"?re=!0:a=="stretch"&&(G=!0),this.zimContainer_constructor(r,V),this.type="Wrapper",s=="middle"&&(s="center"),f=="middle"&&(f="center"),u=="middle"&&(u="center"),v=="middle"&&(v="center");var L=this;this.add=function(d){return this.addAt(d,this.numChildren-1),L},this.addAt=function(d,o){return n(d)||((n(o)||o<0)&&(o=0),Array.isArray(d)||(d=[d]),t.loop(d,function(S,X){L.addChildAt(S,o+X)}),L.resize()),L},this.remove=function(d){return Array.isArray(d)||(d=[d]),t.loop(d,function(o){o&&o.removeFrom&&o.removeFrom()},!0),L.resize(),L},this.convert=function(d,o){var S=[];return d.loop(function(X){S.push(X),o&&X.cache()}),L.add(S),d.removeFrom(),L},this.resize=function(d,o){if(!L.preventResize){n(d)||(r=d),n(o)||(x=o),this.items2D=[],this.items=[],b=0,Z=0,$=0,n(E)&&(E=0),n(A)&&(A=0);var S=t.Pick.choose(E),X=t.Pick.choose(A);Q=r*(100-S)/100,this.setBounds(Q,V);var m=0,O=0,de=0;L.cols=0,L.rows=0;var R=[],N=[0],se=null,ie=0,q=null,z=t.Pick.choose(k);a!="column"&&(z=null);var ce=t.Pick.choose(y),Ie=0,K,xe;t.loop(this,function(we,ee){g||C?we.pos(m+(we.marginRight?we.marginRight:0),O+(we.marginTop?we.marginTop:0),t.RIGHT,C?t.TOP:t.BOTTOM):we.pos(m+(we.marginLeft?we.marginLeft:0),O+(we.marginTop?we.marginTop:0)),Ie++,q=we.boundsToGlobal();var le=L.globalToLocal(q.x,q.y),ye=L.globalToLocal(q.x+q.width,q.y+q.height);if(g||C?K=L.globalToLocal(q.x,q.y):K=L.globalToLocal(q.x+q.width,q.y+q.height),we.wrapHeight=ye.y-le.y,we.wrapWidth=ye.x-le.x,S){var oe=L.globalToLocal(q.x+we.wrapWidth/2,q.y+we.wrapHeight/2);we.centerX=oe.x,we.centerY=oe.y,oe=null}z?xe=z*Ie:g||C?xe=Q-K.x+(we.marginLeft?we.marginLeft:0)+i:xe=K.x+(we.marginRight?we.marginRight:0)+i,Math.round(xe)-i>Q&&(c(R,se,de,ie,z,S,X,!1),ie=0,L.cols==0&&(L.cols=ee),m=0,O+=de+(ce?0:t.Pick.choose(l)),de=0,ce=t.Pick.choose(y),S=t.Pick.choose(E),X=t.Pick.choose(A),Ie=0,L.items2D.push(t.copy(R)),L.rows++,N.push(O),R=[],g||C?we.pos(m+(we.marginRight?we.marginRight:0),O+(we.marginTop?we.marginTop:0),t.RIGHT,C?t.TOP:t.BOTTOM):we.pos(m+(we.marginLeft?we.marginLeft:0),O+(we.marginTop?we.marginTop:0)),S&&(q=we.boundsToGlobal(),oe=L.globalToLocal(q.x+we.wrapWidth/2,q.y+we.wrapHeight/2),we.centerX=oe.x,we.centerY=oe.y,oe=null),Ie++,z?xe=0:(xe=(we.marginLeft?we.marginLeft:0)+we.wrapWidth+(we.marginRight?we.marginRight:0)+t.Pick.choose(i),g||C?K.x=Q-((we.marginRight?we.marginRight:0)+we.wrapWidth):K.x=(we.marginLeft?we.marginLeft:0)+we.wrapWidth)),R.push(we),ie+=we.wrapWidth,m=xe,ce?de=ce:de=Math.max(de,we.wrapHeight+(we.marginTop?we.marginTop:0)+(we.marginBottom?we.marginBottom:0)),se=new t.Point(K.x,O+de)},h&&g?!1:h||g),L.numChildren>0&&(L.cols==0&&(L.cols=L.numChildren),L.items2D.push(t.copy(R)),N.push(O),c(R,se,de,ie,z,S,X,!0),L.rows+=1);var J=t.Pick.choose(f),fe;n(J)&&(J="top"),g&&(fe=O+de-V,t.loop(this,function(we){we.mov(0,fe)}),L.items2D.reverse(),t.loop(L.items2D,function(we){we.reverse()}));var U=t.Pick.choose(p),ue=t.Pick.choose(T);if(!n(U)){n(ue)&&(ue=0);var ke=O+de,ne=ke*U/100,ve=ke/2+ue/100*ke;t.loop(N,function(we,ee){if(we>=ve)return t.loop(L.items2D,function(le){t.loop(le,function(ye){ye.mov(0,ne)})},null,1,ee),"break"})}return n(x)||(f=="bottom"?(fe=x-(O+de),t.loop(this,function(we){we.mov(0,fe)})):(f=="center"||f=="middle")&&(fe=(x-(O+de))/2,t.loop(this,function(we){we.mov(0,fe)}))),L.setBounds(null),q=L.getBounds(),q&&L.setBounds(0,q.y,r,q.height),t.loop(L.items2D,function(we){t.loop(we,function(ee){L.items.push(ee)})}),this.stage&&this.stage.update(),L}};function c(d,o,S,X,m,O,de,R){var N=t.Pick.choose(s),se=t.Pick.choose(re),ie=t.Pick.choose(G),q=t.Pick.choose(C),z=t.Pick.choose(u),ce=t.Pick.choose(v);n(N)&&(N="left"),n(ce)&&(ce="top"),n(z)&&(z="left"),q&&d.reverse();var Ie=((100-O)/100/2+de/100)*r,K=r*O/100,xe=0,J=!1,fe,U;if(m){(g||C)&&d.reverse();var ue=Q%m,ke=Q/2+de/100*Q,ne=0,ve=0,we=Math.floor(Q/m);L.rows!=0&&R&&(J=!0),t.loop(d,function(Me,ae){xe=0,z=="right"?ve=m*ae+ne+m-Me.wrapWidth:z=="center"||z=="middle"?ve=m*ae+ne+(m-Me.wrapWidth)/2:ve=m*ae+ne,fe=Me.x,Me.pos(ve),U=Me.x-fe,Me.centerX+=U,Me.marginLeft&&(xe+=Me.marginLeft),Me.marginRight&&(xe-=Me.marginRight);var Se;N=="center"||N=="middle"?(Se=Math.floor(Q/m)-d.length,xe+=(ue+(Se?Se*m:0))/2):N=="right"&&(Se=Math.floor(Q/m)-d.length,xe+=ue+(Se?Se*m:0)),Me.mov(xe),Me.centerX+=xe}),N=="center"&&J&&(d.length+we)%2!=0&&(xe=(ke<=Q/2?-1:1)*m/2,t.loop(d,function(Me){Me.mov(xe),Me.centerX+=xe}))}else if(se||ie){var ee,le;se?ee=d.length?(Q-X)/(d.length+1):0:ie&&(ee=d.length-1>0?(Q-X)/(d.length-1):0),d.length<w&&L.rows!=0&&R&&(ee=$,J=!0),$=ee;var ye=0;if((g||C)&&d.reverse(),t.loop(d,function(Me,ae){xe=0,fe=Me.x,Me.pos(ee*(ae+(se?1:0))+ye),U=Me.x-fe,Me.centerX+=U,J||(Me.marginLeft&&(xe+=Me.marginLeft),Me.marginRight&&(xe-=Me.marginRight),Me.mov(xe),Me.centerX+=xe),ye+=Me.wrapWidth}),J){xe=0;var oe=se?ee:0;U=0,t.loop(d,function(Me){if(N=="right")fe=Me.x,Me.pos(oe,null,t.RIGHT),U=Me.x-fe,oe+=Me.wrapWidth+ee;else if(N=="center"){var ae=(Q-(ye+(d.length-1)*ee))/2-(se?ee:0);fe=Me.x,Me.pos(oe+ae,null,t.RIGHT),U=Me.x-fe,oe+=Me.wrapWidth+ee}Me.marginLeft&&(xe+=Me.marginLeft),Me.marginRight&&(xe-=Me.marginRight),Me.mov(xe),Me.centerX+=U+xe},!0)}}else N=="center"?t.loop(d,function(Me){xe=((g||C?0:r)-o.x)/2,(se||ie)&&(Me.marginLeft&&(xe+=Me.marginLeft),Me.marginRight&&(xe-=Me.marginRight)),Me.mov(xe),Me.centerX+=xe}):(g||C)&&N=="left"?(le=d[d.length-1].marginLeft,t.loop(d,function(Me){xe=-o.x+(le||0),se&&(xe+=Z),Me.mov(xe),Me.centerX+=xe})):!(g||C)&&N=="right"?(le=d[d.length-1].marginRight,t.loop(d,function(Me){xe=r-o.x-(le||0),se&&(xe-=Z),Me.mov(xe),Me.centerX+=xe})):se&&se&&t.loop(d,function(Me){xe=Z*(N=="right"?-1:1),Me.mov(xe),Me.centerX+=xe});O&&(Ie=(1/2+de/100)*Q,K=r*O/100,t.loop(d,function(Me){m||ie||se?N=="right"?Me.centerX>Q-Ie&&Me.mov(K):N=="center"?Math.round(Me.centerX)==Math.round(Q/2+de/100*Q)?Me.mov(K/2):Math.round(Me.centerX)>Math.round(Q/2+de/100*Q)&&Me.mov(K):Me.centerX>Ie&&Me.mov(K):!(g||C)&&N=="right"?Me.centerX<r-Ie&&Me.mov(-K):!(g||C)&&N=="center"?Me.centerX>r/2+de/100*Q?Me.mov(K/2):Me.mov(-K/2):(g||C)&&N=="right"?Me.centerX>Q-Ie&&Me.mov(K):(g||C)&&N=="center"?Me.centerX>Q/2+de/100*Q&&Me.mov(K):Me.centerX>Ie&&Me.mov(K)})),se&&(b+=ee,Z=b/(L.rows+1)),ce=="center"?t.loop(d,function(Me){Me.mov(0,(S-Me.wrapHeight)/2*(g?-1:1))}):!g&&ce=="bottom"?t.loop(d,function(Me){Me.mov(0,S-Me.wrapHeight-(Me.marginBottom?Me.marginBottom:0))}):g&&ce=="top"&&t.loop(d,function(Me){Me.mov(0,-(S-Me.wrapHeight)+(Me.marginTop?Me.marginTop:0))})}Object.defineProperty(L,"spacingH",{get:function(){return i},set:function(d){i=d,this.resize()}}),Object.defineProperty(L,"spacingV",{get:function(){return l},set:function(d){l=d,this.resize()}}),Object.defineProperty(L,"wrapperType",{get:function(){return a},set:function(d){d=="spread"?re=!0:re=!1,d=="stretch"?G=!0:G=!1,a=d,this.resize()}}),Object.defineProperty(L,"align",{get:function(){return s},set:function(d){s=d,s=="middle"&&(s="center"),this.resize()}}),Object.defineProperty(L,"valign",{get:function(){return f},set:function(d){f=d,f=="middle"&&(f="center"),this.resize()}}),Object.defineProperty(L,"alignInner",{get:function(){return u},set:function(d){u=d,u=="middle"&&(u="center"),this.resize()}}),Object.defineProperty(L,"valignInner",{get:function(){return v},set:function(d){v=d,v=="middle"&&(v="center"),this.resize()}}),Object.defineProperty(L,"colSize",{get:function(){return k},set:function(d){k=d,a=="column"&&this.resize()}}),Object.defineProperty(L,"rowSize",{get:function(){return y},set:function(d){y=d,this.resize()}}),Object.defineProperty(L,"flip",{get:function(){return C},set:function(d){C=d,this.resize()}}),Object.defineProperty(L,"reverse",{get:function(){return h},set:function(d){h=d,this.resize()}}),Object.defineProperty(L,"bottomFull",{get:function(){return g},set:function(d){g=d,this.resize()}}),Object.defineProperty(L,"percentVoidH",{get:function(){return E},set:function(d){E=d,this.resize()}}),Object.defineProperty(L,"offsetVoidH",{get:function(){return A},set:function(d){A=d,this.resize()}}),Object.defineProperty(L,"percentVoidV",{get:function(){return p},set:function(d){p=d,this.resize()}}),Object.defineProperty(L,"offsetVoidV",{get:function(){return T},set:function(d){T=d,this.resize()}}),n(e)||L.add(e),B!==!1&&t.styleTransforms(this,_),this.clone=function(){var d=L.cloneProps(new t.Wrapper(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,this.style,this.group));return d}},t.extend(t.Wrapper,t.Container,"clone","zimContainer",!1),t.Tile=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D){var P="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, style, group, inherit",Y;if(Y=at(t.Tile,arguments,P,this))return Y;De("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=F;var _=B===!1?{}:t.getStyle(this.type,this.group,D);n(e)&&(e=_.obj!=null?_.obj:new t.Circle),n(r)&&(r=_.cols!=null?_.cols:1121),n(i)&&(i=_.rows!=null?_.rows:1121);var V;r==1121&&i==1121?r=i=V=3:r==1121?r=1:i==1121&&(i=1),n(s)&&(s=_.unique!=null?_.unique:!1),n(f)&&(f=_.width!=null?_.width:null),n(u)&&(u=_.height!=null?_.height:null),n(h)&&(h=_.colSize!=null?_.colSize:null),n(g)&&(g=_.rowSize!=null?_.rowSize:null),n(f)||(h=null),n(u)||(g=null),n(l)&&(l=_.spacingH!=null?_.spacingH:V?3:null),n(a)&&(a=_.spacingV!=null?_.spacingV:V?3:null),(n(l)||!n(h))&&(l=0),(n(a)||!n(g))&&(a=0),n(v)&&(v=_.squeezeH!=null?_.squeezeH:!1),n(C)&&(C=_.squeezeV!=null?_.squeezeV:!1),n(k)&&(k=_.align!=null?_.align:"left"),n(y)&&(y=_.valign!=null?_.valign:"top"),n(x)&&(x=_.count!=null?_.count:s&&Array.isArray(e)?e.length:null),x===0&&(x=null,ht&&je("ZIM Tile() - count parameter of 0 is ignored - see docs")),n(I)&&(I=_.mirrorH!=null?_.mirrorH:!1),n(w)&&(w=_.mirrorV!=null?_.mirrorV:!1),n(E)&&(E=_.snapToPixel!=null?_.snapToPixel:!0),E&&(e&&e.stage?e.stage.snapToPixelEnabled=!0:typeof elem<"u"&&j.zdf&&(j.zdf.stage.snapToPixelEnabled=!0)),n(A)&&(A=_.clone!=null?_.clone:s?!1:null),A==null&&(A=!(typeof e=="function"&&e.type!="series")),n(p)&&(p=_.events!=null?_.events:!0);var b=this;b.cols=r=Math.round(r),b.rows=i=Math.round(i),b.spacingH=l,b.spacingV=a,b.squeezeH=v,b.squeezeV=C;var Z=typeof k=="function",$=typeof y=="function";b.align=Z?"left":k,b.valign=$?"top":y,b.mirrorH=I,b.mirrorV=w,b.items=[];var Q,re=0,G=!1;e:for(var L=0;L<i;L++)for(var c=0;c<r;c++){if(re++,!n(x)&&re>x)break e;Q=s?e[re-1]:t.Pick.choose(e),typeof Q=="string"&&(Q=j.asset(Q).centerReg({add:!1}).clone()),n(Q)&&(Q=new t.Container(0,0,0,0)),A&&(L!=0||c!=0)&&(Q=Q.clone(T)),p&&Q.on("change",function(ne){var ve=new Fe.Event("change");ve.item=ne.currentTarget,b.dispatchEvent(ve)}),b.items.push(Q),Q.type=="AC"&&(G=!0),Q.tileNum=re-1,Q.tileCol=c,Q.tileRow=L}G&&ht&&je("ZIM Tile - assets must have dimensions for Tile");var d,o,S,X,m,O,de,R,N,se,ie,q,z,ce;function Ie(){b.removeAllChildren(),d=[],o=[],S=[],X=[],m=[],O=0,de=0,R=0,N=0,se=[],ie=[],q=[],ce=[],z=[],(!b.items||!b.items.length)&&(b.items=[]),x=b.items.length;var ne=0,ve,we,ee=0,le=0,ye,oe;for(we=0;we<x;we++)ee=Math.floor(we/b.cols),le=we%b.cols,n(d[ee])&&(d[ee]=[]),n(b.items[we])&&(b.items[we]=new t.Container(0,0,0,0)),d[ee][le]=b.items[we];b.rows=Math.max(1,d.length),b.cols=Math.max(1,n(d[0])?0:d[0].length);e:for(ee=0;ee<b.rows;ee++)for(se.push([]),ie.push([]),ce.push([]),g&&n(u)&&(ye=t.Pick.choose(g)),we=0;we<b.cols;we++){if(ne++,!n(x)&&ne>x)break e;ve=d[ee][we],ve.snapToPixel=E,b.addChild(ve),se[ee].push(ve.scaleX),ie[ee].push(ve.scaleY),h&&n(f)&&(oe=t.Pick.choose(h)),ee==0&&z.push(t.Pick.choose(k)),(!h||!n(f))&&(oe=Math.abs(ve.width)),(!g||!n(u))&&(ye=Math.abs(ve.height)),ce[ee][we]=[oe,ye],n(X[we])&&(X[we]=0),n(m[ee])&&(m[ee]=0),oe>X[we]&&(X[we]=oe),ye>m[ee]&&(m[ee]=ye),n(o[ee])&&(o[ee]=0),n(S[we])&&(S[we]=0),o[ee]+=oe,S[we]+=ye,o[ee]>O&&(O=o[ee]),S[we]>de&&(de=S[we]),n(q[we])&&(q[we]=0),q[we]++}var Me;if(b.squeezeH===!1)for(we=0;we<X.length;we++)Me=X[we],R+=Me;if(b.squeezeV===!1)for(we=0;we<m.length;we++)Me=m[we],N+=Me}Ie();var K,xe,J,fe;function U(ne,ve){ne<=0&&(ne=null),ve<=0&&(ve=null),!n(ne)&&b.squeezeH=="full"?K=ne:n(ne)?R>0?K=R+(b.cols-1)*b.spacingH:K=O+(b.cols-1)*b.spacingH:K=Math.max(O+(b.cols-1)*b.spacingH,ne),!n(ve)&&b.squeezeV=="full"?xe=ve:n(ve)?N>0?xe=N+(b.rows-1)*b.spacingV:xe=de+(b.rows-1)*b.spacingV:xe=Math.max(de+(b.rows-1)*b.spacingV,ve),b.setBounds(0,0,K,xe);var we,ee;J=[],fe=[];var le=[];for(L=0;L<d.length;L++)for(we=d[L],ee=0,c=0;c<we.length;c++){Q=we[c];var ye,oe;if(L==0&&(J[c]=0,n(ve)||(b.squeezeV=="full"?fe[c]=q[c]>1?(ve-S[c])/(q[c]-1):0:b.squeezeV?fe[c]=q[c]>1?Math.max(b.spacingV,(ve-S[c])/(q[c]-1)):0:fe[c]=q[c]>1?Math.max(b.spacingV,(xe-S[c])/(q[c]-1)):0),b.squeezeV?b.valign=="center"||b.valign=="middle"?le[c]=(xe-(S[c]+(q[c]-1)*(n(ve)?b.spacingV:fe[c])))/2:b.valign=="bottom"?le[c]=xe-(S[c]+(q[c]-1)*(n(ve)?b.spacingV:fe[c])):le[c]=0:le[c]=0),c==0){n(ne)||(b.squeezeH=="full"?oe=we.length>1?(ne-o[L])/(we.length-1):0:b.squeezeH?oe=we.length>1?Math.max(b.spacingH,(ne-o[L])/(we.length-1)):0:oe=we.length>1?Math.max(b.spacingH,(K-o[L])/(we.length-1)):0),b.squeezeH?b.align=="center"||b.align=="middle"?ye=(K-(o[L]+(we.length-1)*(n(ne)?b.spacingH:oe)))/2:b.align=="right"?ye=K-(o[L]+(we.length-1)*(n(ne)?b.spacingH:oe)):ye=0:ye=0;var Me=t.Pick.choose(y)}k=z[c];var ae=ce[L][c][0],Se=ce[L][c][1];b.mirrorH&&c%2==1&&(Q.scaleX=-se[L][c]),Q.pos(ee,null),!b.squeezeH&&Z?n(ne)&&(k=="center"||k=="middle")?Q.x+=(X[c]-Q.width)/2:n(ne)&&k=="right"&&(Q.x+=X[c]-Q.width):b.squeezeH?n(ne)&&(b.align=="center"||b.align=="middle")?Q.x+=(ae-Q.width)/2:n(ne)&&b.align=="right"&&(Q.x+=ae-Q.width):n(ne)&&(b.align=="center"||b.align=="middle")?Q.x+=(X[c]-Q.width)/2:n(ne)&&b.align=="right"&&(Q.x+=X[c]-Q.width),b.mirrorV&&L%2==1&&(Q.scaleY=-ie[L][c]),Q.pos(null,J[c]),!b.squeezeV&&$?n(ve)&&(Me=="center"||Me=="middle")?Q.y+=(m[L]-Q.height)/2:n(ve)&&Me=="bottom"&&(Q.y+=m[L]-Q.height):b.squeezeV?n(ve)&&(b.valign=="center"||b.valign=="middle")?Q.y+=(Se-Q.height)/2:n(ve)&&b.valign=="bottom"&&(Q.y+=Se-Q.height):n(ve)&&(b.valign=="center"||b.valign=="middle")?Q.y+=(m[L]-Q.height)/2:n(ve)&&b.valign=="bottom"&&(Q.y+=m[L]-Q.height),b.squeezeH===!0||!n(ne)?ee+=ae+(n(ne)?b.spacingH:oe):ee+=X[c]+(n(ne)?b.spacingH:oe),Q.x+=ye,Q.y+=le[c],b.squeezeV===!0||!n(ve)?J[c]+=Se+(n(ve)?b.spacingV:fe[c]):J[c]+=m[L]+(n(ve)?b.spacingV:fe[c])}}U(f,u),this.itemUnderPoint=function(ne,ve,we){if(n(we)&&(we=!0),!(n(ne)||n(ve))){var ee=b.globalToLocal(ne,ve);ne=ee.x,ve=ee.y;var le=0,ye=t.loop(X,function(ae,Se){if(le+=ae+b.spacingH,(!we||we=="vertical")&&ne>le-b.spacingH&&ne<le)return!1;if(ne<le-b.spacingH/2)return Se});if(ye!==!1&&(ye===!0&&(ye=r-1),!(ne<0||ne>K||ve<0||ve>xe))){var oe=0,Me=t.loop(m,function(ae,Se){var Le=n(u)?b.spacingV:fe[c];if((!we||we=="horizontal")&&ve>oe-Le&&ve<oe)return!1;if(oe+=ae+Le,ve<oe-Le/2)return Se});if(Me!==!1)return Me===!0&&(Me=i-1),b.items2D[Me][ye]}}},this.remake=function(ne){return n(ne)||(b.items=ne),Ie(),U(f,u),b},this.resize=function(ne,ve){return n(ne)&&(ne=f),n(ve)&&(ve=u),f=ne,u=ve,U(ne,ve),b};function ue(ne){for(var ve=[],we,ee=0;ee<ne.length;ee++)ee%b.cols==0&&(we=[],ve.push(we)),we.push(ne[ee]);return ve}function ke(ne){var ve=[],we;for(we=0;we<b.cols;we++)ve.push([]);for(we=0;we<ne.length;we++)ve[we%b.cols][Math.floor(we/b.cols)]=ne[we];return ve}Object.defineProperty(this,"items2D",{get:function(){return ue(b.items)},set:function(){ht&&je("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return ke(b.items)},set:function(){ht&&je("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var ne=[];return t.loop(b.items,function(ve){var we=ve.getBounds(),ee=ve.x-ve.regX+we.x+we.width/2,le=ve.y-ve.regY+we.y+we.height/2,ye=b.hitTestGrid(b.width,b.height,b.cols,b.rows,ee,le,null,null,b.spacingH,b.spacingV,!0,"open");ye!=null&&(ne[ye[0]]=ve)}),ne},set:function(){ht&&je("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return ue(b.current)},set:function(){ht&&je("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return ke(b.current)},set:function(){ht&&je("Tile() - current2DCols is read only")}}),B!==!1&&t.styleTransforms(this,_),this.clone=function(ne){if(ne)for(var ve=[],we=0;we<b.items.length;we++)ve.push(b.items[we].clone(!0));return b.cloneProps(new t.Tile(ne?t.series(ve):e.clone?e.clone():e,b.cols,b.rows,b.spacingH,b.spacingV,s,f,u,b.squeezeH,b.squeezeV,h,g,k,y,b.items.length,b.mirrorH,b.mirrorV,E,ne?!1:A,p,ne,this.style,this.group))}},t.extend(t.Tile,t.Container,"clone","zimContainer",!1),t.Pack=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P){var Y="width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, style, group, inherit",_;if(_=at(t.Pack,arguments,Y,this))return _;De("66.52"),this.group=D;var V=F===!1?{}:t.getStyle("Pack",this.group,P);n(e)&&(e=V.width!=null?V.width:500),n(r)&&(r=V.height!=null?V.height:500),this.zimContainer_constructor(e,r),this.type="Pack",n(i)&&(i=V.items!=null?V.items:[new t.Rectangle(400,300,t.orange),new t.Rectangle(400,200,t.purple),new t.Rectangle(500,300,t.blue)]),n(l)&&(l=V.spacingH!=null?V.spacingH:10),n(a)&&(a=V.spacingV!=null?V.spacingV:10),n(s)&&(s=V.flatten!=null?V.flatten:"top"),n(f)&&(f=V.direction!=null?V.direction:"horizontal"),n(u)&&(u=V.lock!=null?V.lock:"auto"),n(v)&&(v=V.backgroundColor!=null?V.backgroundColor:t.clear),n(C)&&(C=V.align!=null?V.align:"center"),n(h)&&(h=V.valign!=null?V.valign:"center"),n(g)&&(g=V.lastAlign!=null?V.lastAlign:f=="horizontal"?"left":"top"),n(k)&&(k=V.paddingH!=null?V.paddingH:0),n(y)&&(y=V.paddingV!=null?V.paddingV:0),n(x)&&(x=V.dragOrder!=null?V.dragOrder:!1),n(I)&&(I=V.dragColor!=null?V.dragColor:t.white),n(w)&&(w=V.dragThickness!=null?V.dragThickness:2),n(E)&&(E=V.dragDashed!=null?V.dragDashed:!0),n(A)&&(A=V.reverse!=null?V.reverse:!1),n(p)&&(p=V.funnel!=null?V.funnel:!1),n(T)&&(T=V.showPacking!=null?V.showPacking:!1),n(B)&&(B=V.order!=null?V.order:null);var b=this;b.funnel=p;var Z=i.length,$=e-k*2,Q=r-y*2,re=50;s===!1&&(s=NONE);var G=this.backing=new On({width:e,height:r,color:v,scaleDimensions:!1}).addTo(this);if(b.items=t.copy(i),i.length<=0)return this;if(i.length==1)return c(i[0]),d(i[0]),this;var L=function(oe,Me,ae){return oe.width>Me.width?1:oe.width<Me.width?-1:0};function c(oe){oe.scaleTo(G,100-k/$*100*2,100-y/Q*100*2),oe.scale*=b.scale,oe.scale<0&&(oe.scale=.05)}function d(oe){oe.pos(C!=CENTER&&C!=MIDDLE?k:0,h!=CENTER&&h!=MIDDLE?y:0,C,h,G).addTo(b)}function o(oe){var Me=[];t.loop(oe,function(ae,Se){Me[Se]=b.items[ae]}),i=[],t.loop(Me,function(ae){ae&&i.push(ae)})}var S=b.content=new t.Container,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe;t.loop(i,function(oe,Me){oe.zpRotation=oe.rotation,oe.zpIndex=Me}),B&&o(B),f==VERTICAL&&J(!0);function J(oe){S.rotation=0;var Me=r;r=e,e=Me;var ae=Q;Q=$,$=ae;var Se=a;a=l,l=Se;var Le=y;y=k,k=Le,s==RIGHT?s=BOTTOM:s!=CENTER&&s!=NONE&&(s=TOP),g==BOTTOM?g=LEFT:g!=CENTER&&g!=MIDDLE&&(g=RIGHT),G.dispose(),G=new On(e,r,v).center(b),oe?(u==HORIZONTAL?u=VERTICAL:u==VERTICAL&&(u=HORIZONTAL),t.loop(i,function(Ce,te){var Oe=new t.Container(Ce.height,Ce.width);Ce.rotation+=90,Ce.pos(0,0,TOP,LEFT,Oe),i[te]=Oe})):(u==HORIZONTAL?u=VERTICAL:u==VERTICAL&&(u=HORIZONTAL),S.rotation-=90,t.loop(i,function(Ce,te){var Oe=Ce,Re=Ce.getChildAt(0).addTo(S).sca(Oe.scale);Oe.dispose(),i[te]=Re}))}var fe=u;function U(oe){u==AUTO&&(u=HORIZONTAL),X=Math.ceil(Math.sqrt(Z)),m=Math.ceil(Z/X),R=null,N=null,se=0,xe=null,ie=0,q=0,z=null,ce=null,Ie=null,K=null,ye(oe,X,m),le(S,X,m)}U(i),ue();function ue(){if(c(S),d(S),s==NONE){t.loop(i,function(Se){Se.surrogate?(i.splice(i.indexOf(Se),1),Se.dispose()):Se.bot()},!0);var oe=m*X-Z;if(s==NONE&&oe>0){var Me=S.getChildAt(S.numChildren-1);if(f==HORIZONTAL&&!A&&g!=LEFT){var ae=S.getBounds().width-(Me.x+(Me.getBounds().x-Me.regX)*Me.scaleX+Me.width);t.loop(X-oe,function(Se){S.getChildAt(S.numChildren-Se-1).mov(g==RIGHT?ae:ae/2)})}else if(f==HORIZONTAL&&A&&g!=RIGHT){var ae=Me.x+(Me.getBounds().x-Me.regX)*Me.scaleX;t.loop(X-oe,function(Le){S.getChildAt(S.numChildren-Le-1).mov(g==LEFT?-ae:-ae/2)})}else if(f==VERTICAL&&!A&&g!=RIGHT){var ae=Me.x;t.loop(X-oe,function(Le){S.getChildAt(S.numChildren-Le-1).mov(g==LEFT?-ae:-ae/2)})}else if(f==VERTICAL&&A&&g!=LEFT){var ae=S.getBounds().width-Me.x;t.loop(X-oe,function(Le){S.getChildAt(S.numChildren-Le-1).mov(g==RIGHT?ae:ae/2)})}}}f==VERTICAL&&(J(!1),c(S),d(S)),b.cols=X,b.rows=m,b.iterations=se-2,b.currentItems=i,b.dispatchEvent("change")}var ke,ne,ve;x&&b.added(we);function we(){ee(),ve=Math.min(30,f==HORIZONTAL?S.height/m/3*b.scale*S.scale:S.width/X/3*b.scale*S.scale),ke?ke.siz(ve,ve).reg(CENTER):ke=b.beacon=new t.Rectangle({width:ve,height:ve,borderColor:I,borderWidth:w,scaleDimensions:!1}).reg(CENTER).rot(45),ne||(ne=b.ghost=new t.Rectangle({width:100,height:100,borderColor:I,borderWidth:w,dashed:E,scaleDimensions:!1}).reg(CENTER));var oe,Me,ae,Se;b.mdEvent=b.on("mousedown",function(Le){if(ae=Le.target,ke.top(),oe=null,!(i.indexOf(ae)<0)){Se=b.localToGlobal(b.getBounds().x,b.getBounds().y);var Ce=ae.boundsToGlobal();b.ghost.siz(Ce.width,Ce.height).reg(CENTER).loc(Ce.x+ne.width/2,Ce.y+ne.height/2,b.stage),ne.diffX=b.stage.frame.mouseX-ne.x,ne.diffY=b.stage.frame.mouseY-ne.y,Me=S.getChildIndex(ae),b.stage.update()}}),b.pmEvent=b.on("pressmove",function(){if(ne.parent){var Le=b.stage.frame;ne.loc(Le.mouseX-ne.diffX,Le.mouseY-ne.diffY);var Ce=b.getObjectUnderPoint((ne.x-Se.x)/b.scaleX,(ne.y-Se.y)/b.scaleY,1);if(i.indexOf(Ce)>=0){var te=Ce.boundsToGlobal();f==HORIZONTAL?ne.x>=te.x+te.width/2?(ke.loc(te.x+te.width+l/2*b.scaleX*S.scaleX,te.y+te.height/2,b.stage),oe=S.getChildIndex(Ce)+(A?0:1)):(ke.loc(te.x-l/2*b.scaleX*S.scaleX,te.y+te.height/2,b.stage),oe=S.getChildIndex(Ce)+(A?1:0)):ne.y>=te.y+te.height/2?(ke.loc(te.x+te.width/2,te.y+te.height+a/2,b.stage),oe=S.getChildIndex(Ce)+(A?0:1)):(ke.loc(te.x+te.width/2,te.y-a/2,b.stage),oe=S.getChildIndex(Ce)+(A?1:0))}b.stage.update()}}),b.puEvent=b.on("pressup",function(){ne.parent&&(oe!=null&&(oe>Me&&oe--,oe!=Me&&(ae.level=oe,i=[],S.loop(function(Le,Ce){i.push(Le.rot(Le.zpRotation||0).sca(1))}),u=fe,f==VERTICAL&&J(!0),U(i),ue())),ne.removeFrom(),ke.removeFrom(),b.stage.update())})}function ee(){b.mdEvent&&b.off("mousedown",b.mdEvent),b.pmEvent&&b.off("pressmove",b.pmEvent),b.puEvent&&b.off("pressup",b.puEvent),ke&&ke.removeFrom(),ne&&ne.removeFrom()}function le(oe,Me,ae){if(oe.scale=1,se++>20){xe&&xe.clear();return}var Se=!1;if(oe.height>Q){if(O=Me+1,de=Math.ceil(Z/O),Me==N&&u==VERTICAL)if(q>ie)O=ce,de=K,Se=!0;else return oe}else if(oe.height<=Q&&(O=Math.max(Me-1,1),de=Math.ceil(Z/O),Me==N&&u==HORIZONTAL))if(q>ie)O=ce,de=K,Se=!0;else return oe;if(N=R,R=X,X=O,m=de,t.loop(i,function(Le){s==NONE&&Le.surrogate?(i.splice(i.indexOf(Le),1),Le.dispose()):Le.siz(null,Q)},!0),ye(i,X,m),q=ie,ce=z,K=Ie,fe==AUTO||u==HORIZONTAL&&Math.round(oe.width)==$||u==VERTICAL&&Math.round(oe.height)==Q?ie=oe.width*oe.height:ie=0,z=X,Ie=m,Se){xe&&xe.clear(),d(oe),b.stage&&b.stage.update();return}T?(xe=$r(1,function(){le(oe,X,m)}),d(oe),b.stage&&b.stage.update(),oe.sca(1)):(oe.sca(1),le(oe,X,m))}function ye(oe,Me,ae){var Se=0;t.loop(oe,function(Be,Ke){Be.siz(null,re),Se+=Be.width});var Le=Se/Z,Ce=oe;Z%Me!=0&&s==NONE&&t.loop(Me-Z%Me,function(){var Be=new t.Rectangle(Le,re,grey);Be.surrogate=!0,Ce.push(Be)});var te=new ei(Ce,Me,ae,0,0,!0),Oe=[],Re=t.copy(te.items2D);if(s!=NONE&&Me*ae!=Z&&Re.length>1){var Xe;if(s==BOTTOM)Xe=b.funnel?Math.floor((Me*ae-Z)/2):Math.ceil((Me*ae-Z)/2),t.loop(Xe,function(Be){Re[ae-1].unshift(Re[ae-2].pop())});else{var Qe=Me*ae-Z;t.loop(Re,function(Be,Ke,He){Ke!=He-1&&t.loop(Be.splice(-Qe,Qe),function(he){Re[Ke+1].unshift(he)},!0)}),Xe=b.funnel?Math.floor((Me*ae-Z)/2):Math.ceil((Me*ae-Z)/2),t.loop(Xe,function(Be){Re[0].push(Re[1].shift())})}}t.loop(Re,function(Be,Ke,He){var he=0;t.loop(Be,function(st){he+=st.width});var me=($-l*(Be.length-1))/he;t.loop(Be,function(st){st.scale*=me});var Te=t.copy(Be);(A&&f==HORIZONTAL||!A&&f==VERTICAL)&&Te.reverse();var ze=new ei(Te,Be.length,1,l,0,!0);A&&ze.loop(function(st){st.bot()}),Oe.push(ze)}),te.dispose();var it=0;return S.loc(G,null,b),S.removeAllChildren(),t.loop(Oe,function(Be){Be.loc(0,it,S),it+=Be.height+a,Be.loop(function(Ke,He,he){Ke.addTo(S).ord(-(he-He))},!0)}),t.loop(Oe,function(Be){Be.dispose()},!0),c(S),S}b.getOrder=function(oe){if(n(oe)&&(oe=!1),oe){if(!Me){var Me=b.pane=new t.Pane({displayClose:!1,container:b.stage,width:Math.min(500,b.stage.width-20),height:Math.min(500,b.stage.height-20),draggable:!0}),ae=b.textArea=new t.TextArea(Math.min(400,b.stage.width-70),Math.min(400,b.stage.height-70));ae.centerReg(Me)}Me.show(),ae.text=JSON.stringify(b.order)}return b.order},this.setOrder=function(oe){return o(oe),U(i),ue(),b},this.addAt=function(oe,Me){return n(oe)||(n(Me)&&(Me=b.items.length),Array.isArray(oe)||(oe=[oe]),t.loop(oe,function(ae,Se){b.items.push(ae),ae.zpIndex=b.items.length-1,b.currentItems.splice(Me+Se,0,ae)}),U(b.currentItems),ue()),b},this.removeAt=function(oe,Me){n(oe)&&(oe=1),n(Me)&&(Me=b.items.length);var ae=b.currentItems.splice(Me,oe);return t.loop(ae,function(Se){var Le=b.items.indexOf(Se);b.items.splice(Le,1)}),U(b.currentItems),ue(),b},Object.defineProperty(b,"order",{get:function(){var oe=[];return S.loop(function(Me){oe.push(Me.zpIndex)}),oe},set:function(oe){b.setOrder(oe)}}),Object.defineProperty(b,"lock",{get:function(){return fe},set:function(oe){oe!=fe&&(u=oe,U(i),ue(),x&&we())}}),Object.defineProperty(b,"direction",{get:function(){return f},set:function(oe){oe!=f&&(f=oe,S.rotation=0,i=[],S.loop(function(Me,ae){i.push(Me.rot(Me.zpRotation||0).sca(1))}),f==VERTICAL&&J(!0),U(i),ue(),x&&we())}}),Object.defineProperty(b,"spacing",{get:function(){return f==VERTICAL?a:l},set:function(oe){l=a=oe,U(i),ue()}}),Object.defineProperty(b,"outerWidth",{get:function(){return e},set:function(oe){e!=oe&&(e=oe,$=e-k*2,G&&(G.widthOnly=e,G.center(b)),U(i),ue(),x&&we())}}),Object.defineProperty(b,"outerHeight",{get:function(){return r},set:function(oe){r!=oe&&(r=oe,Q=r-y*2,G&&(G.heightOnly=r,G.center(b)),U(i),ue(),x&&we())}}),Object.defineProperty(b,"flatten",{get:function(){return s},set:function(oe){s!=oe&&(s=oe,U(i),ue())}}),Object.defineProperty(b,"dragOrder",{get:function(){return x},set:function(oe){oe?we():(ee(),b.stage&&b.stage.update())}}),F!==!1&&t.styleTransforms(this,V),this.dispose=function(oe){return x&&ee(),b.items=null,b.currentItems=null,oe||this.zimContainer_dispose(!0),!0},this.clone=function(){return b.cloneProps(new t.Pack(e,r,t.copy(i,!0),l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,t.copy(b.order),this.style,this.group))}},t.extend(t.Pack,t.Container,["dispose","clone"],"zimContainer",!1),t.Beads=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x){var I="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",w;if(w=at(t.Beads,arguments,I,this))return w;De("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=k;var E=y===!1?{}:t.getStyle(this.type,this.group,x);n(u)&&(u=E.onTop!=null?E.onTop:!1),n(v)&&(v=E.showControls!=null?E.showControls:!1),n(C)&&(C=E.visible!=null?E.visible:!0),n(h)&&(h=E.interactive!=null?E.interactive:!0),n(e)&&(e=E.path!=null?E.path:new t.Blob({color:null,borderWidth:3,borderColor:t.blue})),e.visible=C,e.interactive=h,e.toggle(v),e.onTop=u,n(r)&&(r=E.obj!=null?E.obj:new t.Circle(10)),n(i)&&(i=E.count!=null?E.count:10),n(l)&&(l=E.angle!=null?E.angle:null),n(a)&&(a=E.startPercent!=null?E.startPercent:0),n(s)&&(s=E.endPercent!=null?E.endPercent:100),n(f)&&(f=E.percents!=null?E.percents:null);var A=s;s<a&&(A=100+s);var p;if(n(f)){var T;e.type=="Squiggle"?T=(A-a)/(i-1):T=(A-a)/(i-(a!=A%100?1:0)),f=[];var B=a-T;for(p=0;p<i;p++)f.push(B+T),B+=T,B>100&&(B-=100)}n(g)&&(g=E.clone!=null?E.clone:!0);var F=this;F.count=i,F.percents=f,F.items=[];var D;for(p=0;p<i;p++)D=t.Pick.choose(r),g&&p!=0&&(D=D.clone()),D.beadNum=p,D.startPercent=f[p],F.items.push(D);F.path=e.addTo(F),F.beads=new t.Container().addTo(F,u?0:null),F.beads.type="BeadsContainer",this.resize=function(){for(var P=e.segmentRatios,Y=e.segmentPoints,_=0;_<F.count;_++){var V=e.getCurvePoint(Math.max(0,Math.min(.9999,f[_]/100)),P,Y,!0);if(V){var b=F.beads.globalToLocal(V.x,V.y);b&&F.items[_].loc(b,null,F.beads).rot(n(l)?V.angle>180?V.angle-360+e.rotation:V.angle+e.rotation:l)}}return this},F.resize(),h&&(e.on("pressmove",F.resize),e.on("update",F.resize)),y!==!1&&t.styleTransforms(this,E),this.dispose=function(P){return P||this.zimContainer_dispose(!0),F.items=[],!0},this.clone=function(P){if(P)for(var Y=[],_=0;_<F.items.length;_++)Y.push(F.items[_].clone(!0));return F.cloneProps(new t.Beads(e.clone(),P?t.series(Y):r.clone?r.clone():r,F.count,l,a,s,f,u,v,C,h,g,this.style,this.group))}},t.extend(t.Beads,t.Container,["clone","dispose"],"zimContainer",!1),t.Layout=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",y;if(y=at(t.Layout,arguments,k,this))return y;De("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=h;var x=C===!1?{}:t.getStyle(this.type,this.group,g);if(n(e)&&(e=x.holder!=null?x.holder:null),n(u)&&(u=x.scalingObject!=null?x.scalingObject:null),n(e)||!e.getBounds){Gn("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");return}if(u=n(u)?e:u,!u.getBounds||!u.getBounds()){Gn("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var I=u.getBounds();e.setBounds(0,0,I.width,I.height),n(i)&&(i=x.lastMargin!=null?x.lastMargin:0),n(l)&&(l=x.lastMarginMin!=null?x.lastMarginMin:0),n(s)&&(s=x.vertical!=null?x.vertical:!0),n(a)&&(a=x.backgroundColor!=null?x.backgroundColor:""),n(v)&&(v=x.hideKey!=null?x.hideKey:"B"),n(f)&&(f=x.showRegions!=null?x.showRegions:null);var w;f&&(w=new t.Shape);var E=this.backing=new t.Shape,A=this;if(this.active=!0,n(r)&&(r=x.regions!=null?t.copy(x.regions):null),n(r))return;t.loop(r,function(c,d){c instanceof Fe.DisplayObject&&(r[d]={obj:c}),r[d].object&&(r[d].obj=r[d].object,delete r[d].object)}),this.regions=r;var p,T=0,B="minWidth",F="width",D="height",P="marginLeft",Y="marginMinLeft",_="maxHeight";s&&(B="minHeight",F="height",D="width",P="marginTop",Y="marginMinTop",_="maxWidth");for(var V=[],b=0,Z=0;Z<r.length;Z++){if(p=r[Z],!p.obj||!p.obj.getBounds()){je("Layout(): each region object must have an object with setBounds() set");return}p[B]||(p[B]=0),p[F]||(p[F]=0),p.backgroundColor||(p.backgroundColor=""),p.given=0,p.maxGiven=0,p[P]=="auto"?(V[Z]=!0,b++,p[Y]?p[P]=p[Y]:delete p[P]):p[P]&&p[Y]&&p[P]<p[Y]&&(p[P]=p[Y]),n(p[P])&&(p[P]=1e-4),p[_]||(p[_]=100),s?(p.align||(p.align="middle"),p.valign||(Z==0?p.valign="top":Z==r.length-1?p.valign="bottom":p.valign="middle",r.length==1&&(p.valign="middle"))):(p.valign||(p.valign="top"),p.align||(Z==0?p.align="left":Z==r.length-1?p.align="right":p.align="middle",r.length==1&&(p.align="middle"))),p[F]&&(p[B]=0),T+=p[F]+p[P]}if(i=="auto"?(V[r.length]=!0,i=l||0):i&&l&&i<l&&(i=l),T+=i,T>100){je("Layout(): cannot fit regions into 100% bounds");return}var $=100-T;Q();function Q(){var c=0,d;for(d=0;d<r.length;d++)p=r[d],p.given=0,p[F]==0&&(c+=p.obj.getBounds()[F]);for(d=0;d<r.length;d++)p=r[d],p[F]==0&&(p.given=p.obj.getBounds()[F]/c*$)}this.resize=function(){var c;if(A.active){for(I=u.getBounds(),e.setBounds(0,0,I.width,I.height),E.graphics.clear(),a!=""&&(re(E,a),E.graphics.r(0,0,I.width,I.height)),c=0;c<r.length;c++)p=r[c],p.maxGiven=0,p.marginGiven=0;for(var d=!0,o,S,X,m,O,de,R=$;d;){for(d=!1,o=!0,c=0;c<r.length;c++)p=r[c],p.given>0&&p.maxGiven==0&&(S=p.obj.getBounds()[F],X=p.obj.getBounds()[D],m=p.given*I[F]/100,O=p[_]*I[D]/100,de=X/S*m,de>O&&p.obj.type!="Window"?(p.maxGiven=S/X*O*100/I[F],R-=p.maxGiven):o=!1);if(o)break;var N=0;for(c=0;c<r.length;c++)p=r[c],p[F]==0&&p.maxGiven==0&&(N+=p.obj.getBounds()[F]);for(c=0;c<r.length;c++)p=r[c],p[F]==0&&p.maxGiven==0&&(p.given=p.obj.getBounds()[F]/N*R)}var se=!0;if(p=r[0],p.maxGiven>0?p.maxGiven<p[B]&&(p[F]=p[B],se=!1):p.given>0&&p.given<p[B]&&(p[F]=p[B],se=!1),p=r[r.length-1],p.maxGiven>0?p.maxGiven<p[B]&&(p[F]=p[B],se=!1):p.given>0&&p.given<p[B]&&(p[F]=p[B],se=!1),!se){for(T=0,c=0;c<r.length;c++)p=r[c],T+=p[F]+p[P];if(T+=i,T>100){je("zim display - Layout(): cannot fit regions into 100% bounds");return}$=100-T,Q(),A.resize();return}var ie=!0,q=0,z=0;for(c=0;c<r.length;c++)p=r[c],q+=p[P],p[F]>0?z+=p[F]:p.maxGiven>0?z+=p.maxGiven:p.given>0&&(z+=p.given),p[F]==0&&(ie=!1);if(ie||o){q+=i;var ce=100-z-q;if(q-=i+r[0][P],ce!=0&&q!=0)for(c=0;c<r.length;c++)c!=0&&(p=r[c],p.marginGiven=p[P]/q*(q+ce))}if(b>0){var Ie=0,K=0;for(c=0;c<r.length;c++)p=r[c],p.marginGiven>0?K+=p.marginGiven:K+=p[P],p.marginGiven=0,Ie+=p[P]>.05?p[P]:0;var xe=(K-Ie)/b;for(c=0;c<V.length;c++)V[c]&&r[c]&&(p=r[c],p.marginGiven=(p[Y]?p[Y]:0)+xe)}var J=0,fe=0,U,ue,ke;if(w&&w.graphics){var ne=w.graphics;ne.c()}for(c=0;c<r.length;c++)p=r[c],p.marginGiven>0?J+=p.marginGiven*I[F]/100:J+=p[P]*I[F]/100,p[F]>0?S=p[F]:p.maxGiven>0?S=p.maxGiven:p.given>0?S=p.given:S=0,S=S*I[F]/100,X=p[_]*I[D]/100,fe=(I[D]-X)/2,s?(p.obj.type=="Wrapper"&&p.obj.resize(X),p.obj.type=="Window"&&p.obj.resize(X,S),p.obj.type=="Region"&&p.obj.setBounds(X,S),U=t.fit(p.obj,fe,J,X,S)):(p.obj.type=="Wrapper"&&p.obj.resize(S),p.obj.type=="Window"&&p.obj.resize(S,X),p.obj.type=="Region"&&p.obj.setBounds(S,X),U=t.fit(p.obj,J,fe,S,X)),p.valign=="top"?p.obj.y=U.bY:p.valign=="bottom"&&(p.obj.y=U.bY+U.bHeight-U.height),p.align=="left"?p.obj.x=U.bX:p.align=="right"&&(p.obj.x=U.bX+U.bWidth-U.width),w&&w.graphics&&(ne.s("white").ss(2).r(U.bX,U.bY,U.bWidth,U.bHeight),ne.s("#ff8203").sd([20,20]).r(U.bX,U.bY,U.bWidth,U.bHeight).sd()),ke=ue=0,(J==0||J+S==I[F])&&(s?ke=1:ue=1),X==I[D]&&(s?ue=1:ke=1),p.backgroundColor!=""&&(re(E,p.backgroundColor),E.graphics.r(U.bX,U.bY,U.bWidth+ue,U.bHeight+ke)),J+=S,p.obj.ZIMoutlineShape&&p.obj.outline()}};function re(c,d){d.type=="GradientColor"?c.graphics.lf(d.colors,d.ratios,d.x0,d.y0,d.x1,d.y1):d.type=="RadialColor"?c.graphics.rf(d.colors,d.ratios,d.x0,d.y0,d.r0,d.x1,d.y1,d.r1):d.type=="BitmapColor"?c.graphics.bf(d.image,d.repetition,d.matrix):c.graphics.f(p.backgroundColor)}this.resize(),w&&e.addChild(w),e.addChildAt(E,0),j.addEventListener("keydown",G);function G(c){c||(c=event),w&&String.fromCharCode(c.keyCode)==v.toUpperCase()&&(A.toggle(),w.stage&&w.stage.update())}this.disable=function(){A.active=!1,j.removeEventListener("keydown",G),w&&(w.alpha=0)},this.enable=function(){A.active=!0,j.addEventListener("keydown",G),A.resize(),w&&(w.alpha=1)},this.removeShape=function(){w&&(w.graphics.clear(),w.dispose(),w=null,w=!1),j.removeEventListener("keydown",G)},this.toggled=!0,this.toggle=function(c){return c===!0?w.visible=!0:c===!1?w.visible=!1:w.visible=!w.visible,A.toggled=w.visible,A},this.addShape=function(c){A.removeShape(),w=c,j.addEventListener("keydown",G),e.addChild(w),A.resize()},C!==!1&&t.styleTransforms(this,x),u.added?u.added(L):L(u);function L(c){if(c&&c.frame&&c.frame.scaling=="full"){if(!t.globalManager){var d=t.globalManager=new t.Manager;d.frame=c.frame,d.event=c.frame.on("resize",function(){d.resize()})}t.globalManager.add(A)}}this.dispose=function(){if(A.resize=null,t.globalManager){var c=t.globalManager;c.remove(A),t.globalManager.items.length==0&&(c.frame.off("resize",c.event),c.dispose(),t.globalManager=null)}return A.backing&&A.backing.dispose(),A.backing=null,A.removeShape(),!0}},t.extend(t.Layout,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.Accessibility=function(e,r,i,l,a,p,f,u,v,C,h,g,k,y,x){var I="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",w;if(w=at(t.Accessibility,arguments,I,this))return w;De("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",n(e)&&(e="application"),n(l)&&(l=!1),n(a)&&(a=2),n(p)&&(p=j.zdf),n(f)&&(f=!t.mobile()),n(u)&&(u=!1);var E=mt(v);if(n(v)&&(v=E=="s"?.7:700),n(C)&&(C="brown"),n(h)&&(h=3),n(g)&&(g=5),n(k)&&(k=.8),n(x)&&(x=.8),n(y)){var A=new t.Shape({style:!1});A.mouseEnabled=!1}else y.mouseEnabled&&(y.mouseEnabled=!1);if(typeof p>"u")var p=j.zdf;if(n(p)){ht&&je("Accessibility - needs a Frame");return}var T=p.retina&&j.devicePixelRatio||1,B=this;B.cycle=l,B.decimals=a,B.alwaysHighlight=u,B.AHTime=v,B.AHColor=C,B.AHBorderWidth=h,B.AHBorderPadding=g,B.AHAlpha=k,B.AHObjectScale=x;var F=-1,D=-1,P=[],Y=[],_={RadioButtons:"option",Tabs:"tab",Pad:"key"},V,b=p.canvas.id,Z=t.mobile(),$=!1,Q=null,re=[],G,L,c,d,o,S,X,m=150,O;Object.defineProperty(this,"tabOrder",{get:function(){return F},set:function(ae){var Se;for(G&&G.removeEventListener("focus",N),L&&L.removeEventListener("focus",N),Se=0;Se<P.length;Se++)P[Se].parentElement&&(P[Se].outerHTML="");P=[];var Le,Ce;for(Se=0;Se<Y.length;Se++)Le=F[Se],Le&&Y[Se][0].off("mousedown",Y[Se][1]);Y=[],F=[];var te=[];O=p.shim?document.body:p.canvas,oe=!1;var Oe=0;for(Se=0;Se<ae.length;Se++){if(Le=ae[Se],Le.type=="HotSpots"&&(ae.splice.apply(ae,[Se,1].concat(Le.hotSpots)),Le=Le.hotSpots[0]),Le.type=="HotSpot"&&(Le=Le.spot),Le.constructor=={}.constructor){if(Ce=Le.obj,!Ce||!Ce.getStage)continue;Le.title||(Le.title=J(Ce,Se+Oe))}else Ce=Le,Le={obj:Le,title:J(Le,Se+Oe)};if(Ce.type=="RadioButtons"||Ce.type=="Tabs"||Ce.type=="Pad"){var Re=[];Oe--;for(var Xe=0;Xe<Ce.buttons.length;Xe++){Oe++;var Qe=Ce.buttons[Xe],it={obj:Qe,title:Le.title+" - "+_[Ce.type]+": "+(Qe.text=="a"||Qe.text=="A"?"eh":Qe.text)};Re.push(it),Qe.zimTabParent=Ce,Qe.zimTabParent.zimAccessibility=B,Qe.zimTabIndex=Se+Oe,Qe.tabIndex=Xe,Qe.zimAccessibility=B,fe(it),O=U(b+"Tab"+(Se+Oe),it.title,O,it),Y.push([Qe,Qe.on("mousedown",xe)]),$||re.push([Qe,Qe.on("mousedown",R)])}te=te.concat(Re)}else Ce.zimTabIndex=Se+Oe,Ce.zimTabParent=Ce,fe(Le),Ce.zimAccessibility=B,Y.push([Ce,Ce.on("mousedown",xe)]),$||re.push([Ce,Ce.on("mousedown",R)]),te.push(Le),O=U(b+"Tab"+(Se+Oe),Le.title,O,Le)}G=B.startAppTag=U(b+"PrefixTab",e+" start",p.shim?document.body:p.canvas,null,"before"),G.addEventListener("focus",N),$||(G.addEventListener("focus",ce),d=U(b+"noAriaTab","",G,null,"before"),d.setAttribute("aria-hidden",!0),d.focusTab=G,d.addEventListener("focus",z),S=U(b+"noAriaTab","",G),S.setAttribute("aria-hidden",!0),S.focusTab=G,S.addEventListener("focus",z)),O=U(b+"BufferTab","",O),Z&&O.setAttribute("aria-hidden",!0),O=L=B.endAppTag=U(b+"SuffixTab",e+" end",O),L.addEventListener("focus",N),$||(L.addEventListener("focus",ce),O=o=U(b+"noAriaTab","",L),o.setAttribute("aria-hidden",!0),o.focusTab=L,o.addEventListener("focus",z),X=U(b+"noAriaTab","",L,null,"before"),X.setAttribute("aria-hidden",!0),X.focusTab=L,X.addEventListener("focus",z)),F=te}});function de(){G&&(G.removeEventListener("focus",N),G.removeEventListener("focus",ce),G.parentNode&&(G.outerHTML="")),d&&(d.removeEventListener("focus",z),d.parentNode&&(d.outerHTML="")),S&&(S.removeEventListener("focus",z),S.parentNode&&(S.outerHTML="")),O&&O.parentNode&&(O.outerHTML=""),L&&(L.removeEventListener("focus",N),L.removeEventListener("focus",ce),L.parentNode&&(L.outerHTML="")),o&&(o.removeEventListener("focus",z),o.parentNode&&(o.outerHTML="")),X&&(X.removeEventListener("focus",z),X.parentNode&&(X.outerHTML=""))}Object.defineProperty(this,"tabIndex",{get:function(){return D},set:function(ae){if(!Me)return;if(ae<0||ae>=F.length)Be();else{ae!=D&&it();var Se=F[ae].obj;if(Se.stage){if(D=ae,Se.focus=!0,ue=!0,ke=!1,B.changeTitle(Se),Se.zimTabTag.focus(),setTimeout(function(){Se.zimTabTag.focus();var Ke=new Fe.Event("change");Ke.title=Se.zimTabTag.getAttribute("aria-label"),B.dispatchEvent(Ke)},m),B.alwaysHighlight&&(!Q||!Z)){if(B.AHObject){V=B.AHObject;var Qe=t.boundsToGlobal(Se);B.AHObject.alp(B.AHAlpha).addTo(p.stage,null,!1),B.AHObject.fit(Qe.x,Qe.y,Qe.width,Qe.height),B.AHObject.sca(B.AHObject.scaleX*B.AHObjectScale),B.AHTime>0&&(le=setTimeout(function(){p.stage.removeChild(B.AHObject),p.stage.update()},B.AHTime*(E=="s"?1e3:1)))}else{V=A;var Le=Se.getBounds(),Ce=Se.localToGlobal(Le.x-5,Le.y-5),te=Se.localToGlobal(Le.x+Le.width+5,Le.y-5),Oe=Se.localToGlobal(Le.x+Le.width+5,Le.y+Le.height+5),Re=Se.localToGlobal(Le.x-5,Le.y+Le.height+5),Xe=A.graphics;Xe.clear(),Xe.s(B.AHColor).ss(B.AHBorderWidth).mt(Ce.x-B.AHBorderPadding,Ce.y-B.AHBorderPadding).lt(te.x+B.AHBorderPadding,te.y-B.AHBorderPadding).lt(Oe.x+B.AHBorderPadding,Oe.y+B.AHBorderPadding).lt(Re.x-B.AHBorderPadding,Re.y+B.AHBorderPadding).lt(Ce.x-B.AHBorderPadding,Ce.y-B.AHBorderPadding).cp(),A.alpha=B.AHAlpha,B.AHTime>0&&(le=setTimeout(function(){p.stage.removeChild(A),p.stage.update()},B.AHTime*(E=="s"?1e3:1)))}p.stage.addChild(V),p.stage.update()}}else Be()}function it(){if(D&&D>-1)F&&F[D]&&(F[D].obj.focus=!1);else for(var Ke=0;Ke<F.length;Ke++)F[Ke].obj.focus=!1}function Be(){it(),ue=!1,B.AHObject&&p.stage.removeChild(B.AHObject),B.alwaysHighlightShape&&p.stage.removeChild(B.alwaysHighlightShape),p.stage.update(),D=-1}}}),Object.defineProperty(this,"aria",{get:function(){return Q},set:function(ae){Q=ae,Q&&se()}});function R(ae){var Se=ae.currentTarget,Le=Se.boundsToGlobal(),Ce=Le.x+Le.width/2,te=Le.y+Le.height/2,Oe=5;ae.stageX/t.scaX<Ce-Oe||ae.stageX/t.scaX>Ce+Oe||ae.stageY/t.scaY<te-Oe||ae.stageY/t.scaY>te+Oe?ie():se()}function N(){c&&(c.innerHTML="")}Z=="android"&&(t.ACTIONEVENT="click",kt||(j.ACTIONEVENT="click"));function se(){Q=!0,Ie(),c&&c.setAttribute("aria-hidden",!1),t.ACTIONEVENT="click",kt||(j.ACTIONEVENT="click"),p.stage.removeChild(V),Z&&(B.alwaysHighlight=!1),p.stage.update();for(var ae,Se,Le,Ce=0;Ce<F.length;Ce++)ae=F[Ce],Se=ae.obj,Le=Se.zimTabTag,Le.disabled=!1,ae.title=ae.title.replace(/\s\(use arrow keys\)/,""),Le.setAttribute("aria-label",ae.title),Le.addEventListener("focus",q)}function ie(){Q=!1;for(var ae,Se,Le,Ce=0;Ce<F.length;Ce++)ae=F[Ce],Se=ae.obj,Le=Se.zimTabTag,Le.disabled=!1;Ie(),u&&K()}function q(ae){var Se=ae.currentTarget,Le=Se.zimObject;D=Le.zimTabIndex,Le.focus=!0;var Ce=new Fe.Event("change");Ce.title=Se.getAttribute("aria-label"),B.dispatchEvent(Ce)}function z(ae){Q=!1,ae.target.focusTab.focus()}function ce(){n(Q)||Q?se():ie()}function Ie(){$=!0,G.removeEventListener("focus",ce),L.removeEventListener("focus",ce),d.removeEventListener("focus",z),o.removeEventListener("focus",z),d.parentNode&&(d.parentNode.removeChild(d),o.parentNode.removeChild(o)),S.removeEventListener("focus",z),X.removeEventListener("focus",z),S.parentNode&&(S.parentNode.removeChild(S),X.parentNode.removeChild(X));for(var ae=0;ae<re.length;ae++)re[ae][0].off("mousedown",re[ae][1])}function K(){for(var ae=0;ae<P.length;ae++){var Se=P[ae];Se.zimObject&&(Se.zimObject.type=="Loader"||Se.zimObject.type=="TextArea"||Se.zimObject.type=="Tag")||(P[ae].style.left="-2000px")}}n(r)?setTimeout(function(){if(F==-1){F=[];var ae=[];t.loop(p.stage,function(Se){Se.type&&ae.push(Se)}),B.tabOrder=ae,n(i)||(B.tabIndex=i)}},50):(F=[],B.tabOrder=r,n(i)||(B.tabIndex=i));function xe(ae){var Se=ae.currentTarget;if(Se.type=="RadioButton"||Se.type=="TabsButton"||Se.type=="PadButton")for(var Le=0;Le<Se.zimTabParent.buttons.length;Le++){var Ce=Se.zimTabParent.buttons[Le];Ce.zimTabTag.setAttribute("aria-label",Ce.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(Se.zimTabParent.selectedIndex==Ce.tabIndex?" - currently selected.":" - currently not selected."))}B.tabIndex=ae.currentTarget.zimTabIndex,B.activatedObject=Se}function J(ae){return ae.talk?ae.talk:ae.type=="TextArea"||ae.type=="RadioButtons"||ae.type=="Tabs"||ae.type=="Pad"?ae.type:ae.type=="Waiter"?"Waiter active - please wait":ae.text?ae.type+" - "+(ae.text=="a"||ae.text=="A"?"eh":ae.text):ae.type+(ae.type=="Dial"||ae.type=="Slider"||ae.type=="ColorPicker"||ae.type=="Stepper"?" (use arrow keys)":"")+(ae.type=="TextArea"?" (press ENTER to edit)":"")}function fe(ae){var Se=ae.obj;ae.title=ae.title.replace(/\.$/,""),Se.type=="RadioButton"||Se.type=="TabsButton"||Se.type=="PadButton"?ae.title=ae.title+(Se.tabIndex==Se.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):Se.type=="CheckBox"?ae.title=ae.title+(Se.checked?" - currently checked":" - currently not checked"):Se.type=="Stepper"?ae.title=ae.title+" - currently displaying "+Se.currentValue:Se.type=="Slider"||Se.type=="Dial"?ae.title=ae.title+" - currently at "+t.decimals(Se.currentValue,B.decimals):Se.type=="ColorPicker"?ae.title=ae.title+" - currently at "+Se.selectedColor:Se.type=="TextArea"?ae.title=ae.title+(Se.tag.value!=""?"":" - placeholder: "+Se.tag.placeholder):Se.type=="Indicator"?ae.title=ae.title+" - currently "+(Se.selectedIndex>=0?"at "+(Se.selectedIndex+1)+" of "+Se.num:"not indicating"):Se.type=="TextInput"&&(ae.title=ae.title+(Se.htmlTag.value!=""?"":" - placeholder: "+Se.htmlTag.placeholder)),ae.title+="."}function U(ae,Se,Le,Ce,te){var Oe,Re;if(Ce&&(Oe=Ce.obj),Ce&&(Oe.type=="TextArea"||Oe.type=="Loader"))return Re=Oe.tag,Re.setAttribute("aria-label",Se),Oe&&Re.setAttribute("aria-hidden",!Oe.stage),te=="before"?Le.parentNode.insertBefore(Re,Le):Le.parentNode.insertBefore(Re,Le.nextSibling),Oe.type=="TextArea"?Re.style.zIndex=3:Re.style.zIndex=-5,Re.zimObject=Oe,Ce.obj.zimTabTag=Re,P.push(Re),Re;if(Ce&&Oe.type=="TextInput")return Re=Oe.htmlTag,Re.setAttribute("aria-label",Se),Oe&&Re.setAttribute("aria-hidden",!Oe.stage),te=="before"?Le.parentNode.insertBefore(Re,Le):Le.parentNode.insertBefore(Re,Le.nextSibling),Re.style.zIndex=-5,Re.zimObject=Oe,Ce.obj.zimTabTag=Re,P.push(Re),Re;var Xe;if(Ce&&(Oe.type=="Dial"||Oe.type=="Slider"||Oe.type=="Stepper"||Oe.type=="ColorPicker")){var Qe=[];if(Oe.type=="Dial"||Oe.type=="Slider"){var it=Oe.step<=0?(Oe.max-Oe.min)/20:Oe.step;for(Xe=Oe.min;Xe<Oe.max;Xe=Xe+it)Qe.push(Oe.min+Xe)}else Oe.type=="Stepper"?Qe=Oe.stepperArray:Oe.type=="ColorPicker"&&(Qe=Oe.colors);Re=document.createElement("select"),Re.disabled=!0,Re.zimObject=Oe,Re.addEventListener("change",function(he){!Q&&!Z=="android"||(he.currentTarget.zimObject.zimTabParent.currentValueEvent=he.target.value,p.stage.update())}),Re.size=1;var Be,Ke;for(Xe=0;Xe<Qe.length;Xe++)Be=Qe[Xe],Ke=document.createElement("option"),Ke.setAttribute("aria-label",Be),Ke.innerHTML=Be,Re.add(Ke),Be==Oe.zimTabParent.currentValue&&Ke.setAttribute("selected","selected");Re.setAttribute("role","button")}else Re=document.createElement("div"),Oe&&(Re.zimObject=Oe),Re.innerHTML="tag",Re.setAttribute("role",f?"application":"button"),Z=="android"&&Re.addEventListener("click",function(){Oe.dispatchEvent("click")});if(Re.setAttribute("id",ae),Re.setAttribute("tabindex",0),Re.setAttribute("aria-label",Se),Oe&&Re.setAttribute("aria-hidden",!Oe.stage),te=="before"?Le.parentNode.insertBefore(Re,Le):Le.parentNode.insertBefore(Re,Le.nextSibling),Re.style.position="absolute",Ce){Oe=Ce.obj;var He=Oe.boundsToGlobal();p.retina?(Re.style.left=p.x+He.x*p.scale/T+"px",Re.style.top=p.y+He.y*p.scale/T+"px",Re.style.width=He.width*p.scale/T+"px",Re.style.height=He.height*p.scale/T+"px"):(Re.style.left=p.x+He.x*p.scale+"px",Re.style.top=p.y+He.y*p.scale+"px",Re.style.width=He.width*p.scale+"px",Re.style.height=He.height*p.scale+"px"),Ce.obj.zimTabTag=Re}else Re.style.left="-1000px",Re.style.top=p.y+"px";return Re.style.overflow="hidden",Re.style.zIndex=-5,Re.style.fontSize="20px",Re.style.color="rgba(0,0,0,.01)",P.push(Re),Re}var ue=!1,ke=!0,ne=p.on("keydown",function(ae){if(ae.keyCode==9&&(ve()||(ue=!1,B.tabIndex!=-1&&(B.tabIndex=-1)),ue?ee(ae):we(ae)),ue&&F.length>0&&B.tabIndex>=0&&ae.keyCode==13){var Se=F[B.tabIndex],Le=Se.obj;if(Se&&Le.stage){var Ce=new Fe.Event("mousedown"),te=new Fe.Event("click");Ce.fromEnter=te.fromEnter=!0,Le.type=="Pane"?(Le.backdrop.dispatchEvent(Ce),Le.backdrop.dispatchEvent(te)):(Le.dispatchEvent(Ce),Le.dispatchEvent(te))}}});function ve(){for(var ae=!1,Se=0;Se<P.length;Se++)if(document.activeElement==P[Se]){ae=!0;break}return!!(document.activeElement==p.canvas||ae)}function we(ae){!p.shiftKey&&(xn(b+"PrefixTab")==document.activeElement||p.canvas==document.activeElement)?(F.length>0&&(F[F.length-1].obj.focus=!0),ke=!0,ue=!0,ee(ae)):p.shiftKey&&(xn(b+"SuffixTab")==document.activeElement||xn(b+"BufferTab")==document.activeElement)&&(F.length>0&&(F[0].obj.focus=!0),ke=!0,ue=!0,ee(ae))}function ee(ae){if(ae.ctrlKey){ye(ae.shiftKey?-1:1);return}ae.shiftKey?B.tab(-1):B.tab(1),ae.preventDefault()}var le;this.tab=function(ae){if(clearTimeout(le),V&&p.stage.removeChild(V),n(ae)&&(ae=1),F.length==0){ye(ae);return}for(var Se=0;Se<F.length;Se++){var Le=F[Se].obj;if(Le.focus){Le.focus=!1;var Ce=Se+ae,te=(Ce+F.length*1e4)%F.length,Oe=F[te];Le=Oe.obj;for(var Re=0,Xe=!1;!(Le.stage&&(!Le.zimTabParent&&(n(Le.enabled)||Le.enabled)||Le.zimTabParent&&(n(Le.zimTabParent.enabled)||Le.zimTabParent.enabled)));)if(Re++,Ce=Ce+ae,te=(Ce+F.length*100)%F.length,Oe=F[te],Le=Oe.obj,Re==F.length){Xe=!0;break}if(Xe||!B.cycle&&Ce!=te&&!ke){ye(ae);return}ke=!1,B.tabIndex=te;break}}};function ye(ae){ue=!1,xn(b+(ae==1?"SuffixTab":"PrefixTab")).focus(),p.stage.removeChild(y),p.stage.update(),B.tabIndex=-1}this.changeTitle=function(ae,Se,Le){if(typeof ae!="number"&&(ae=ae.zimTabIndex),!n(ae)){if(Le&&n(Se)){B.tabIndex=ae;return}var Ce=F[ae],te=Ce.obj;n(Se)&&(Se=te.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),Ce.title=Se,fe(Ce),te.zimTabTag.setAttribute("aria-label",Ce.title),Le&&(B.tabIndex=ae)}};var oe=!1;this.talk=function(ae){oe||(c=U(b+"TalkTab","",L),c.setAttribute("role","alert"),oe=!0),c.removeAttribute("role"),c.setAttribute("aria-label",ae),c.setAttribute("role","alert");var Se=new Fe.Event("change");Se.title=ae,B.dispatchEvent(Se)},this.resize=function(ae){if(n(ae))for(var Ce=0;Ce<F.length;Ce++)te(F[Ce].obj);else{if(typeof ae!="number"&&(ae=ae.zimTabIndex),ae<0)return;var Se=F[ae],Le=Se.obj;!Le.stage&&V&&Le==B.currentObject&&(p.stage.removeChild(V),p.stage.update()),te(Le)}function te(Oe){if(Oe.type=="TextArea"||Oe.type=="Loader"){Oe.resize();return}else{var Re=Oe.boundsToGlobal(),Xe=Oe.zimTabTag;p.retina?(Xe.style.left=p.x+Re.x*p.scale/T+"px",Xe.style.top=p.y+Re.y*p.scale/T+"px",Xe.style.width=Re.width*p.scale/T+"px",Xe.style.height=Re.height*p.scale/T+"px"):(Xe.style.left=p.x+Re.x*p.scale/T/T+"px",Xe.style.top=p.y+Re.y*p.scale/T/T+"px",Xe.style.width=Re.width*p.scale/T/T+"px",Xe.style.height=Re.height*p.scale/T/T+"px")}Xe.setAttribute("aria-hidden",!Oe.stage),Xe.hidden=!Oe.stage}},Object.defineProperty(this,"currentObject",{get:function(){return F[D]&&F[D].obj?F[D].obj:null},set:function(ae){for(var Se=0;Se<F.length;Se++)if(F[Se].obj==ae){B.tabIndex=Se;break}}});var Me=!0;Object.defineProperty(this,"enabled",{get:function(){return Me},set:function(ae){Me=ae}}),this.dispose=function(){A&&A.graphics.clear(),B.tabOrder=[];for(var ae=0;ae<P.length;ae++)P[ae].parentElement&&(P[ae].outerHTML="");de(),B.removeAllEventListeners(),p.off("keydown",ne)}},t.extend(t.Accessibility,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.TextureActive=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I){var w="width, height, color, color2, angle, borderColor, borderWidth, corner, interactive, animated, backingOrbit, pattern, scalePattern, style, group, inherit",E;if(E=at(t.TextureActive,arguments,w,this))return E;De("35.2"),this.group=x;var A=y===!1?{}:t.getStyle("TextureActive",this.group,I);n(e)&&(e=A.width!=null?A.width:j.zdf.width),n(r)&&(r=A.height!=null?A.height:j.zdf.height),n(v)&&(v=A.interactive!=null?A.interactive:!0),n(C)&&(C=A.animated!=null?A.animated:!0),n(i)&&(i=A.color!=null?A.color:null),n(l)&&(l=A.color2!=null?A.color2:null),n(a)&&(a=A.angle!=null?A.angle:null),n(s)&&(s=A.borderColor!=null?A.borderColor:null),n(f)&&(f=A.borderWidth!=null?A.borderWidth:null),s<0||f<0?s=f=null:s!=null&&f==null&&(f=1),n(u)&&(u=A.corner!=null?A.corner:10),n(h)&&(h=A.backingOrbit!=null?A.backingOrbit:!0),n(g)&&(g=A.pattern!=null?A.pattern:null),n(k)&&(k=A.scalePattern!=null?A.scalePattern:null),this.zimPage_constructor(e,r,i,l,a,g,k,null,y,x,I),this.type="TextureActive",u&&(this.backing.corner=u),n(f)||(this.backing.borderWidth=f),n(s)||(this.backing.borderColor=s),(f||!n(s))&&(this.backing.siz(this.width-f,this.height-f),this.backing.center()),this.backing.mouseChildren=!1,this.interactive=v,this.animated=C,this.backingOrbit=h,y!==!1&&t.styleTransforms(this,A),this.clone=function(){return this.cloneProps(new t.TextureActive(e,r,i,l,a,s,f,u,v,C,h,g,k,y,this.group,I))}},t.extend(t.TextureActive,t.Page,["clone"],"zimPage",!1),t.TextureActive.makeLogo=function(e,r){n(e)&&(e="light");var i=e!="dark",l=i?t.light:t.dark,a=i?t.dark:t.light,s=i?t.white:t.black,f=i?t.black:t.white,u=new t.Container(400,100),v=j.zdf.makeIcon(l,a,[l,l,l,l,l]).ske(0,30).scaleTo(u,100,100).center(u),C=new t.Rectangle((400-v.width)/2+4,80-10,new t.GradientColor([i?l:s,i?s:l,i?l:s],-70),f,.5).addTo(u),h=C.clone().pos(0,0,"right","bottom",u);return new t.Label({text:"Texture",size:50,color:a,variant:!0}).scaleTo(C,75,75).center(C),new t.Label({text:"Active",size:50,color:a,variant:!0}).scaleTo(C,72,72).center(h),r?u:u.noMouse()},t.TextureActive.makeBacking=function(e,r,i,l){n(e)&&(e=800),n(r)&&(r=600),n(i)&&(i="CANVAS WINDOW"),n(l)&&(l=t.light);var a=new t.Container(e,r);return a.icon=j.zdf.makeIcon({box:black}).scaleTo(a,75,70),a.label=new t.Label(i,30,null,l).scaleTo(a.icon,100,15),a.tile=new t.Tile({obj:[a.icon,a.label],rows:2,spacingV:a.label.width*.05,unique:!0,align:CENTER}).center(a),a.tile.items[1].mov(-a.label.width*.05),a},t.TextureActives=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w){var E="actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey, color, outerColor, style, group, inherit",A;if(A=at(t.TextureActives,arguments,E,this))return A;De("35.4"),this.group=I;var p=x===!1?{}:t.getStyle("TextureActives",this.group,w),T,B,F="ZIM TextureActives - need a ZIM Frame";if(n(e)&&n(e[0]))if(j.zdf)B=j.zdf,T=j.zdf.stage;else{je(F);return}else if(n(e[0].stage))if(j.zdf)B=j.zdf,T=j.zdf.stage;else{je(F);return}else T=e[0].stage,B=T.frame;n(e)&&(e=p.actives!=null?p.actives:null),n(r)&&(r=p.threejs!=null?p.threejs:null),n(i)&&(i=p.zimThree!=null?p.zimThree:null),n(l)&&(l=p.renderer!=null?p.renderer:null),n(a)&&(a=p.scene!=null?p.scene:null),n(s)&&(s=p.camera!=null?p.camera:null),n(f)&&(f=p.controls!=null?p.controls:null),n(u)&&(u=p.layers!=null?p.layers:[]),Array.isArray(u)||(u=[u]),n(v)&&(v=p.near!=null?p.near:void 0),n(C)&&(C=p.far!=null?p.far:void 0),n(h)&&(h=p.ignoreList!=null?p.ignoreList:[]),Array.isArray(h)||(h=[h]),n(g)&&(g=p.toggleKey!=null?p.toggleKey:"t"),n(k)&&(k=p.color!=null?p.color:t.darker),n(y)&&(y=p.outerColor!=null?p.outerColor:"black");var D=this;t.TAM||(t.TAM=new t.TextureActivesManager(T,g)),D.manager=t.TAM,this.ignoreList=h,this.raycast=!0,this.renderer=l,this.layers=u,this.animated=!1,this.interactive=!1,this.actives=[],this.threeMeshes=[];var P=!1;function Y(V){n(V)&&(V=[]),Array.isArray(V)||(V=[V]);var b=0,Z,$;return t.loop(V,function(Q){D.actives.indexOf(Q)<0&&(D.actives.push(Q),Q.cache(),Q.canvas.content=Q,Q.interactive&&(Z=!0,Q.canvas.isTextureActive=!0),Q.animated&&($=!0),b++)}),Z&&!D.interactive&&(D.interactive=!0,b>0&&_()),$&&!D.animated&&(D.animated=!0),b}Y(e),t.TAM.updateTile(D,D.actives),t.TAM.color=k,t.TAM.outerColor=y,B.canvas.style.display="none";function _(){if(P)return;P=!0,D.pointerCheck||(D.pointerCheck=t.TAM.addPointer(D)),D.pointerData={x:B.mouseX,y:B.mouseY,mousedown:!1};var V=window.innerWidth,b=window.innerHeight,Z=-1,$=-2,Q=-1,re=-2;D.overInterval=t.interval(.05,function(){if($&&$!=Z||re&&re!=Q){var X=new Fe.Event("rayover");X.mesh=D.mesh=$,X.material=D.material=re,re.userData&&(X.textureActive=D.textureActive=re.userData.ta_content),X.intersect=D.intersect,D.dispatchEvent(X),f&&!f.screenSpacePanning&&(f.activeLook=!1)}else if(!$&&Z||!re&&Q){var X=new Fe.Event("rayout");X.mesh=Z,X.material=Q,Q.userData&&(X.textureActive=Q.userData.ta_content),X.intersect=D.intersect,D.dispatchEvent(X),f&&!f.screenSpacePanning&&(f.activeLook=!0)}Z=$,Q=re});var G=D.raycaster=new r.Raycaster(void 0,void 0,v,C);u.length>0&&t.loop(u,function(X){G.layers.set(X)});var L;window.addEventListener("pointerdown",c);function c(X){if(D.raycast){var m;!i||i.resizeEvent?m={x:X.clientX/window.innerWidth*2-1,y:1-X.clientY/window.innerHeight*2}:m={x:X.clientX/V*2-1,y:1-X.clientY/b*2},G.setFromCamera(m,s);var O=G.intersectObjects(a.children);L=null;var de,R,N;for(R=0;R<O.length;R++)if(de=O[R].object,!(D.ignoreList.indexOf(de)>-1)){if(D.threeMeshes.indexOf(de)>-1)if(de.material&&Array.isArray(de.material))N=de.material[O[R].face.materialIndex];else if(de.material)N=de.material;else break;if(N&&N.map&&N.map.source&&N.map.source.data&&N.map.source.data.isTextureActive&&N.userData.ta_content){L=de;var se=N.userData.ta_content;if(D.pointerData.mousedown=!0,S(se,O[R],N.userData.ta_flipped),Fe.handleRemotePointer(D.pointerData.x,D.pointerData.y,"down",X,T,X.pointerID),f&&f.maxAzimuthAngle&&se)if(se.backingOrbit){var ie=se.globalToLocal(B.mouseX,B.mouseY),q=se.backing;q&&se.getObjectUnderPoint(ie.x,ie.y,1)!=q?f.enableRotate=!1:f.enableRotate=!0}else f.enableRotate=!1;var X=new Fe.Event("raydown");X.mesh=D.mesh=de,X.material=D.material=N,X.textureActive=D.textureActive=se,X.intersect=D.intersect=O[R],D.dispatchEvent(X);break}else break}}}window.addEventListener("pointerup",d);function d(X){if(D.raycast){if(D.pointerData.mousedown=!1,f&&f.maxAzimuthAngle&&(f.enableRotate=!0),L){var X=new Fe.Event("rayup");X.mesh=D.mesh,X.material=D.material,X.textureActive=D.textureActive,X.intersect=D.intersect,D.dispatchEvent(X)}L=null,Fe.handleRemotePointer(null,null,"up",X,T,-1)}}window.addEventListener("pointermove",o);function o(X){if(D.raycast){var m;!i||i.resizeEvent?m={x:X.clientX/window.innerWidth*2-1,y:1-X.clientY/window.innerHeight*2}:m={x:X.clientX/V*2-1,y:1-X.clientY/b*2},G.setFromCamera(m,s);var O=!1,de,R,N;if(L){let q=G.intersectObject(L);if(q.length>0&&(de=L,de.material&&Array.isArray(de.material)?N=de.material[q[0].face.materialIndex]:de.material&&(N=de.material),N)){var se=N.userData.ta_content;S(se,q[0],N.userData.ta_flipped),Fe.handleRemotePointer(D.pointerData.x,D.pointerData.y,"move",X,T,X.pointerID),O=!0;var X=new Fe.Event("raymove");X.mesh=$=D.mesh=de,X.material=re=D.material=N,X.textureActive=D.textureActive=se,X.intersect=D.intersect=q[0],D.dispatchEvent(X)}}else{var ie=G.intersectObjects(a.children);for(R=0;R<ie.length;R++)if(de=ie[R].object,!(D.ignoreList.indexOf(de)>-1)){if(D.threeMeshes.indexOf(de)>-1)if(de.material&&Array.isArray(de.material))N=de.material[ie[R].face.materialIndex];else if(de.material)N=de.material;else break;if(N&&N.map&&N.map.source&&N.map.source.data&&N.map.source.data.isTextureActive&&N.userData.ta_content){var se=N.userData.ta_content;S(se,ie[R],N.userData.ta_flipped),Fe.handleRemotePointer(D.pointerData.x,D.pointerData.y,"move",X,T,X.pointerID),O=!0;var X=new Fe.Event("raymove");X.material=re=D.material=N,X.mesh=$=D.mesh=de,X.textureActive=D.textureActive=se,X.intersect=D.intersect=ie[R],D.dispatchEvent(X);break}else break}}O||($=null,re=null),t.TAM.setActive(D,O)}}function S(X,m,O){if(!(!X||!X.getBounds)){var de=X.getBounds(),R=O?de.width-m.uv.x*de.width:m.uv.x*de.width,N=(1-m.uv.y)*de.height,se=X.localToGlobal(R,N);D.pointerData.x=se.x,D.pointerData.y=se.y}}}this.add=function(V){var b=Y(V);return b>0&&t.TAM.updateTile(D,D.actives),D},this.remove=function(V){n(V)&&(V=[]),Array.isArray(V)||(V=[V]);var b=0;return t.loop(V,function(Z){if(Fe.remoteQueue){var $=Fe.remoteQueue.indexOf(Z);$>=0&&Fe.remoteQueue.splice($,1)}$=D.actives.indexOf(Z),$>=0&&(D.actives.splice($,1),b++),Z.textureMap&&delete Z.textureMap.userData.ta_content,$=D.threeMeshes.indexOf(Z),$>=0&&D.threeMeshes.splice($,1),Z.dispose()},!0),b>0&&t.TAM.updateTile(D,D.actives),D},D.addMesh=function(V,b){if(n(b)||V.layers.enable(b),V.material){var Z=D.threeMeshes.indexOf(V);if(Z<0)D.threeMeshes.push(V);else return D;var $;Array.isArray(V.material)?$=V.material:$=[V.material],t.loop($,function(Q){if(Q&&Q.map&&Q.map.source&&Q.map.source.data&&Q.map.source.data.content){var re=Q.map.source.data.content;re.mesh=V,V.textureActive=!0,Q.userData.ta_content=re,re.textureMaps||(re.textureMaps=[]);var G=re.textureMaps.indexOf(Q.map);G<0&&re.textureMaps.push(Q.map),(re.animated||re.interactive)&&(Fe.remoteQueue||(Fe.remoteQueue=[]),Fe.remoteQueue.indexOf(re)<0&&Fe.remoteQueue.push(re))}})}return D},D.dispose=function(){D.raycast=!1,f&&(f.enableRotate=!0,f.enabled=!0),D.remove(D.actives),t.TAM.remove(D),t.TAM.count<1&&(t.TAM.dispose(),t.TAM=null),D.material=D.mesh=D.content=D.intersect=null}},t.extend(t.TextureActives,Fe.EventDispatcher,"dispose"),t.TextureActivesManager=function(e,r){De("35.6");var i=this;this.type="TextureActivesManager",i.color=t.darker,i.outerColor="black",i.toggleKey=r||"t";var l=i.objects=new t.Dictionary(!0),a=e.frame;i.backing=new t.Rectangle(100,100,t.faint).addTo(e,0),i.updateTile=function(C,h,g){g||l.add(C,h);var k=[];if(t.loop(l,function(x,I){t.loop(I,function(w){k.push(w)})}),k.length<0){var y=i.message=new t.Rectangle(W,H,t.yellow);new t.Label("No TextureActives Added").center(y),k.push(y)}i.tile?(i.tile.cols=k.length,i.tile.remake(k)):i.tile=new t.Tile(k,k.length,1,20,0,!0).addTo(e),i.backing.scaleTo(i.tile,100,100,"full").siz(null,e.height,!0)},this.addPointer=function(C){var h=[];return t.loop(l,function(g){h.indexOf(g.renderer.domElement)<0&&h.push(g.renderer.domElement)}),h.indexOf(C)<0&&h.push(C.renderer.domElement),Fe.remotePointers?Fe.remotePointers=h:Fe.addRemotePointers(e,h),!0},this.setActive=function(C,h){if(C.active=h,!h){var g=t.loop(l,function(k){if(k.active)return!1});g&&(e.mouseInBounds=!1)}};var s=this.nav=new t.Panel({width:200,height:80,titleBar:"TextureActives",draggable:!0,close:!0}).pos(50,50,RIGHT,BOTTOM),f=this.slider=new t.Slider({min:0,max:100,damp:.1}).scaleTo(s,80);f.on("mousedown",function(){i.swiper.enabled=!1}),f.on("pressup",function(){setTimeout(function(){i.swiper.immediate(f.currentValue),i.swiper.enabled=!0},500)}),s.on("close",function(){i.hide(),s.addTo()}),this.ticker=t.Ticker.add(function(){i.tile.x=-f.currentValue*(i.tile.width-W)/100}),s.add(f,0,!0),s.removeFrom(),t.Ticker.remove(i.ticker),i.swiper=new t.Swiper({swipeOn:i.backing,target:f,property:"currentValue",sensitivity:-.1}),i.toggled=!1;var u=a.color,v=a.outerColor;this.show=function(){if(!i.toggled)return a.color=i.color,a.outerColor=i.outerColor,i.toggled=!0,t.Ticker.add(i.ticker),s.addTo(),t.loop(l,function(C){C.lastRaycast=C.raycast,C.raycast=!1,C.renderer.domElement.style.display="none"}),a.canvas.style.display="block",Fe.removeRemotePointers(e),this},this.hide=function(){if(i.toggled){a.color=u,a.outerColor=v,i.toggled=!1,t.Ticker.remove(i.ticker),s.removeFrom();var C=[];return t.loop(l,function(h){h.raycast=h.lastRaycast,h.renderer.domElement.style.display="block",C.push(h.renderer.domElement)}),a.canvas.style.display="none",Fe.addRemotePointers(e,C),this}},i.toggle=function(C){return n(C)&&(C=!i.toggled),C&&!i.toggled?i.show():!C&&i.toggled&&i.hide(),this},i.keyEvent=a.on("keydown",function(C){C.key==i.toggleKey&&(i.toggled?i.hide():i.show())}),i.remove=function(C){l.remove(C),i.updateTile(null,null,!0)},i.dispose=function(){i.hide(),s.dispose(),a.off("keydown",i.keyEvent),i.objects.dispose(),i.tile.dispose(),i.objects=i.tile=s=null}},t.extend(t.TextureActivesManager,Fe.EventDispatcher),t.Manager=function(e){De("75");var r=this;this.type=e,this.items=[],this.add=function(a){return Array.isArray(a)?r.items=r.items.concat(a):r.items.push(a),r};var i,l;this.remove=function(a){if(r){if(!a)r.items=[];else for(Array.isArray(a)||(a=[a]),i=a.length-1;i>=0;i--){l=a[i];var s=r.items.indexOf(l);s!=-1&&r.items.splice(s,1)}return r}},this.resize=function(a){if(r){if(a)for(Array.isArray(a)||(a=[a]),i=a.length-1;i>=0;i--)l=a[i],!l.resize&&r.items.indexOf(l)!=-1?r.items.splice(r.items.indexOf(l),1):l.resize();else for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].resize():r.items.splice(i,1);return r}},this.toggle=function(a,s){if(r){if(s)for(Array.isArray(s)||(s=[s]),f=s.length-1;f>=0;f--)l=s[f],!l.resize&&r.items.indexOf(l)!=-1?r.items.splice(r.items.indexOf(l),1):l.toggle(a);else for(var f=r.items.length-1;f>=0;f--)r.items[f].resize?r.items[f].toggle(a):r.items.splice(f,1);return r}},this.dispose=function(a){if(r){if(r.resize=null,a)for(Array.isArray(a)||(a=[a]),i=a.length-1;i>=0;i--)l=a[i],r.items.indexOf(l)!=-1&&r.items.splice(r.items.indexOf(l)),l.dispose&&l.dispose();else{for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].dispose():r.items.splice(i,1);r.items=null}return!0}}},t.ResizeManager=function(){De("75.5"),t.Manager.call(this,"ResizeManager")},t.ResizeManager.prototype=new t.Manager,t.ResizeManager.prototype.constructor=t.ResizeManager,t.TransformManager=function(e,r){De("75.7");var i=this;this.type="TransformManager",this.persistID=r,this.items=[];function l(s){!localStorage||s&&!s.pressup||i.savePersist(s)}this.add=function(s){var f=[];Array.isArray(s)?f=s:f=[s];for(var u,v=!1,C=0;C<f.length;C++)if(u=f[C],u.transformControls&&(u.originalVisible=u.transformControls.visible),u.toggle&&u.toggle(!1),i.items.length==0&&C==0&&(v=!0),u.type=="Blob"||u.type=="Squiggle")i.persistID||v&&(v=!1,u.controlsVisible=!0,i.currentObject=u),u.on("change",function(g){var k=new Fe.Event("transformed");k.transformObject=g.target,k.transformType=g.controlType,i.dispatchEvent(k)}),u.on("controlsshow",function(g){var k=new Fe.Event("transformshow");i.currentObject=k.transformObject=g.target,i.dispatchEvent(k)}),u.on("controlshide",function(g){var k=new Fe.Event("transformhide");k.transformObject=g.target,i.currentObject=null,i.dispatchEvent(k)}),u.on("update",function(g){var k=new Fe.Event("transformed");k.transformObject=g.target,k.transformType=g.controlType,i.dispatchEvent(k)});else if(u.type=="Connectors")i.persistID||v&&(v=!1,i.currentObject=u),u.on("connection",function(g){var k=new Fe.Event("transformed");k.transformObject=g.target,k.transformType="connection",i.dispatchEvent(k)});else if(u.type=="Pack")i.persistID||v&&(v=!1,i.currentObject=u),u.on("change",function(g){var k=new Fe.Event("transformed");k.transformObject=g.target,k.transformType="change",i.dispatchEvent(k)});else{var h=u.transformControls;i.persistID||v&&u.type!="Layer"&&(v=!1,u.originalVisible&&(h.show(),i.currentObject=u)),u.on("transformed",function(g){var k=new Fe.Event("transformed");k.transformObject=g.target,k.transformType=g.transformType,i.dispatchEvent(k)}),u.on("transformshow",function(g){var k=new Fe.Event("transformshow");i.currentObject=k.transformObject=g.target,i.dispatchEvent(k)}),u.on("transformhide",function(g){var k=new Fe.Event("transformhide");k.transformObject=g.target,i.currentObject=null,i.dispatchEvent(k)})}i.items=i.items.concat(s),i.persist&&!n(i.persistID)&&i.persist(i.persistID)},this.remove=function(s){if(n(s)){i.items=[];return}Array.isArray(s)||(s=[s]);for(var f,u=0;u<s.length;u++){f=s[u],i.currentObject==f&&(i.currentObject=null),f.transformedEvent&&(f.off("transformed",f.transformedEvent),f.transformedEvent=null),f.type=="Blob"||f.type=="Squiggle"?f.controlsVisible=!1:f.transformControls&&f.transformControls.remove();var v=i.items.indexOf(f);v!=-1&&i.items.splice(v,1)}r&&i.savePersist()},this.show=function(s){if(!n(s)){if(s.type=="Blob"||s.type=="Squiggle")s.controlsVisible||(s.controlsVisible=!0);else{var f=s.transformControls;if(!f||f.visible)return;f.show()}i.currentObject=s}},this.hide=function(s){if(!n(s))if(i.currentObject==s&&(i.currentObject=null),s.type=="Blob"||s.type=="Squiggle")s.controlsVisible&&(s.controlsVisible=!1);else{var f=s.transformControls;if(!f||f.visible)return;f.hide()}},this.hideAll=function(s){for(var f,u,v=0;v<i.items.length;v++)if(u=i.items[v],!u||!(u.transformControls||u.update))i.items.splice(v);else{if(i.items[v]==s)continue;u.type=="Blob"||u.type=="Squiggle"?u.controlsVisible&&(u.controlsVisible=!1):(f=i.items[v].transformControls,f.visible&&f.hide())}i.currentObject=null},this.resize=function(){if(i){for(var s,f=0;f<i.items.length;f++)s=i.items[f],!s||!(s.transformControls||s.update)?i.items.splice(f):s.type=="Blob"||s.type=="Squiggle"?s.update():s.transformControls.resize();r&&i.savePersist()}},n(e)||i.add(e);var a="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(s){var f,u;if(n(s)&&ht){je(a);return}i.persistID=s;var v=0;if(localStorage&&localStorage[s]){var C=i.persistData=JSON.parse(localStorage[s]);if(C.length==i.items.length)for(u=0;u<i.items.length;u++)C[u].controls&&(i.currentObject=i.items[u]),C[u]&&(C[u].type=="Blob"||C[u].type=="Squiggle")?(i.items[u].points.length!=C[u].points.length&&(i.items[u].points=C[u].points),i.items[u].setData(C[u]),i.items[u]==i.currentObject&&i.currentObject.toggle(!0),v++,v==C.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):C[u]&&C[u].type=="Connectors"?(i.items[u].setSteps(C[u].steps),i.items[u].loc(C[u].x,C[u].y),i.items[u].sca(C[u].scale),v++,v==C.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):C[u]&&C[u].type=="Pack"?(i.items[u].setOrder(C[u].order),i.items[u].outerWidth=C[u].outerWidth,i.items[u].outerHeight=C[u].outerHeight,v++,v==C.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):C[u]&&(n(i.items[u].transformControls)?-function(){var h=f=i.items[u],g=C[u];t.interval(50,function(k){h.transformControls&&(h.transformControls.setData(g),h.dispatchEvent("persistset"),v++,v==C.length&&(setTimeout(function(){h==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),k.clear()))},20,null,null,"ms")}():(i.items[u].transformControls.setData(C[u]),-function(){var h=f=i.items[u];t.interval(50,function(g){h.dispatchEvent("persistset"),v++,v==C.length&&(setTimeout(function(){h==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),g.clear())},20,null,null,"ms")}()))}for(u=0;u<i.items.length;u++)f=i.items[u],f.transformedEvent||(f.type=="Blob"||f.type=="Squiggle"?(f.transformedEvent=f.on("change",function(h){h.pressup=!0,l(h)}),f.transformedUEvent=f.on("update",function(h){h.pressup=!0,l(h)}),f.transformedSEvent=f.on("controlsshow",function(h){h.pressup=!0,l(h)}),f.transformedHEvent=f.on("controlshide",function(h){h.pressup=!0,l(h)})):f.type=="Connectors"?f.transformedEvent=f.on("connection",function(h){h.pressup=!0,l(h)}):f.type=="Pack"?f.transformedEvent=f.on("change",function(h){h.pressup=!0,l(h)}):(f.transformedEvent=f.on("transformed",l),f.transformedSEvent=f.on("transformshow",l),f.transformedHEvent=f.on("transformhide",l)))},this.savePersist=function(){for(var s=[],f=0;f<i.items.length;f++){var u=i.items[f];u.type=="Blob"||u.type=="Squiggle"?u.recordData&&s.push(u.recordData()):u.type=="Connectors"?s.push({type:u.type,x:u.x,y:u.y,scale:u.scale,steps:u.getSteps()}):u.type=="Pack"?s.push({type:u.type,outerWidth:u.outerWidth,outerHeight:u.outerHeight,order:u.getOrder()}):u.transformControls&&u.transformControls.recordData&&s.push(u.transformControls.recordData())}i.persistData=s,localStorage[i.persistID]=JSON.stringify(s)},this.clearPersist=function(s){if(n(s)&&ht){je(a);return}i.persistData=null,localStorage&&localStorage.removeItem(s)},this.stopPersist=function(){for(var s=0;s<i.items.length;s++){var f=i.items[s];f.transformedEvent&&(f.type=="Blob"||f.type=="Squiggle"?(f.off("change",f.transformedEvent),f.off("update",f.transformedUEvent),f.off("controlsshow",f.transformedSEvent),f.off("controlshide",f.transformedHEvent)):f.type=="Connectors"?f.off("connection",f.transformedEvent):f.type=="Pack"?f.off("change",f.transformedEvent):(f.off("transformed",f.transformedEvent),f.off("transformshow",f.transformedSEvent),f.off("transformhide",f.transformedHEvent)),f.transformedEvent=null,f.transformedUEvent=null,f.transformedSEvent=null,f.transformedHEvent=null)}i.persistData=null},n(r)||i.persist(r),this.dispose=function(s,f){if(n(s)&&(s=!0),i.removeAllEventListeners(),i.persistID&&s&&i.stopPersist(),f)for(var u=0;u<i.items.length;u++){var v=i.items[u];v.type=="Blob"||v.type=="Squiggle"?v.dispose():v.transformControls.dispose()}}},t.extend(t.TransformManager,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.GuideManager=function(){De("77"),t.Manager.call(this,"GuideManager")},t.GuideManager.prototype=new t.Manager,t.GuideManager.prototype.constructor=t.GuideManager,t.GridManager=function(){De("79"),t.Manager.call(this,"GridManager")},t.GridManager.prototype=new t.Manager,t.GridManager.prototype.constructor=t.GridManager,t.LayoutManager=function(){De("81"),t.Manager.call(this,"LayoutManager")},t.LayoutManager.prototype=new t.Manager,t.LayoutManager.prototype.constructor=t.LayoutManager,t.SelectionSet=function(e){De("81.5"),this.type="SelectionSet",n(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(r){return this.selections.indexOf(r)>=0},this.add=function(r,i,l,a){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear();var s=this.selections.indexOf(r);if(!(s>=0)){if(this.selections.push(r),!n(l)){Array.isArray(l)||(l=[l]);for(var f=0;f<=l.length;f++)l[f].add(r,i)}if(!n(a))for(Array.isArray(a)||(a=[a]),f=0;f<=a.length;f++)a[f].remove(r,i)}}},this.remove=function(r,i,l,a){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||this.selectionManager.setCurrent(this),i||this.clear();var s=this.selections.indexOf(r);if(n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear(),i?s>=0&&this.selections.splice(s,1):this.clear(),!n(l)){Array.isArray(l)||(l=[l]);for(var f=0;f<=l.length;f++)l[f].remove(r,i)}if(!n(a))for(Array.isArray(a)||(a=[a]),f=0;f<=a.length;f++)a[f].add(r,i)}},this.toggle=function(r,i,l,a){this.isSelected(r)?this.remove(r,i,l,a):this.add(r,i,l,a)},this.dispose=function(){return this.clear(),this.selections=null,!0}},t.SelectionManager=function(e,r,i){De("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",n(e)&&(e=[]),n(i)&&(i=!0),Array.isArray(e)||(e=[e]),this.sets=e,this.multipleKey=r,this.multipleSets=i,this.multiple=!1;for(var l=this,a=0;a<e.length;a++)e[a].selectionManager=this;this.clear=function(){this.currentSet=null;for(var f=0;f<e.length;f++)e[f].clear()},this.setCurrent=function(f){this.currentSet=f;for(var u=0;u<e.length;u++)e[u]!=f&&(this.multipleSets||e[u].clear())};var s=new Fe.Event("keydown");this.eventRemove=s.remove,this.keydownEvent=function(f){f.remove=l.eventRemove,l.multipleKey&&(l.multiple=f[l.multipleKey+"Key"]),l.ctrlKey=f.ctrlKey,l.shiftKey=f.shiftKey,l.metaKey=f.metaKey,l.dispatchEvent(f),f.keyCode==90&&(l.ctrlKey||l.metaKey)&&l.dispatchEvent("undo")},j.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(f){l.multipleKey&&(l.multiple=f[l.multipleKey+"Key"]),l.ctrlKey=f.ctrlKey,l.shiftKey=f.shiftKey,l.metaKey=f.metaKey,f.remove=l.eventRemove,l.dispatchEvent(f)},j.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),j.removeEventListener("keydown",this.keydownEvent),j.removeEventListener("keyup",this.keyupEvent)}},t.extend(t.SelectionManager,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),typeof Tt>"u")var Tt;t.Bind=function(e,r,i,l,a,s,f,u){var v="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",C;if(C=at(t.Bind,arguments,v,this))return C;De("81.8"),this.type="Bind";var h=this;n(e)&&localStorage&&n(Tt)&&(n(r)||r==t.LOCALSTORAGE)?(e="zimBind",r=t.LOCALSTORAGE):e&&e.match(/\/|\./)?(n(r)&&(r=t.GET),e.match(/\?/)?e+="&":e+="?"):e&&n(r)&&(r=t.LOCALSTORAGE),n(s)&&(s=!0),r==t.LOCALSTORAGE&&!localStorage&&(ht&&je("Bind() - no localStorage"),h.error="error - no localStorage"),this.connection=e,this.bindType=r,this.master=i,this.masterFilter=l,this.smartDecimals=s,n(f)&&(f=!1),(!Tt||u)&&(Tt=this),Object.defineProperty(h,"default",{get:function(){return h==Tt},set:function(w){!w&&Tt==h?Tt=null:w&&(Tt=h)}}),this.bindType==t.POST&&(h.ajax=new t.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new t.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(w,E,A,p,T){if(n(A)||n(E)||n(w))return h;if(h.bindings[w]){if(h.bindings[w].obj!=E)return ht&&je("Bind() - id can be used with only one object"),h}else{h.ids.indexOf(w)<=0&&h.ids.push(w),h.bindings[w]={obj:E,props:[]},!n(T)&&typeof T=="function"&&(h.bindings[w].filter=T);var B=h.objIDs.at(E);B?B.indexOf(w)<0&&B.push(w):h.objIDs.add(E,[w])}!Array.isArray(A)&&A.constructor!={}.constructor&&(A=[A]);var F=h.bindings[w].props;Array.isArray(A)?t.loop(A,function(P){D(h.toIDs,P,w),D(h.fromIDs,P,w),F.indexOf(P)<0&&F.push(P)}):t.loop(A,function(P,Y){(Y==t.BOTH||Y==t.TO)&&D(h.toIDs,P,w),(Y==t.BOTH||Y==t.FROM)&&D(h.fromIDs,P,w),F.indexOf(P)<0&&F.push(P)});function D(P,Y,_){n(P[Y])?P[Y]=[_]:P[Y].indexOf(_)<0&&P[Y].push(_)}return f&&I("Bind Report: ADD ["+w+"]",(A?" "+A:"")+(p?" "+p:"")),h.bindType==t.LOCALSTORAGE?(h.from(null,w,A,p),(!h.data||t.isEmpty(h.data))&&h.to(w,A)):(y("bind",null,[T],h.data,p),h.applyData()),h},this.updatefilter=function(w,E){var A=h.bindings[w];return A&&(n(E)?A.filter&&delete A.filter:typeof E=="function"&&(A.filter=E)),h},this.remove=function(w,E,A,p,T,B){var F;if(!n(w)&&!Array.isArray(w)&&(w=[w]),!n(w)){F=[];var D=[];t.loop(w,function(re){typeof re=="string"?F.push(re):D.push(re)})}!n(E)&&!Array.isArray(E)&&(E=[E]),n(T)&&(T=!0),w=F.concat(D),w.length==0&&(w=null);var P=g("from",w,E,!1),Y=P[0];P=P[1];var _=y("remove",p,Y,P,A);if(_=="stop")return;var V=t.copy(P);n(E)||E.length==0?(F.length>0&&t.loop(F,function(re){Q(re,!0)}),D.length>0&&t.loop(D,function(re){F=h.objIDs.at(re),F.length>0&&t.loop(F,function(G){Q(G,!1)}),h.objIDs.remove(re)})):(F=[],t.loop(P,function(re,G){var L=h.bindings[re],c=L.props;t.loop(G,function(d){var o=c.indexOf(d);o>=0&&c.splice(o,1),$(d,re)}),c.length==0&&F.push(re)}),F.length>0&&h.remove(F));function b(re){B&&typeof B=="function"&&(a&&(re=t.couple(re)),B(re)),f&&I("Bind Report: REMOVE"+(A?" ["+A+"]":""),re)}if(T){var Z="type="+h.bindType+"&";h.bindType==t.LOCALSTORAGE?(h.to(),b("success")):h.bindType==t.GET?(_=JSON.stringify(V),a&&(_=t.couple(_)),t.async(h.connection+Z+"remove="+_,b,"callbackRemove")):h.bindType==t.POST?h.ajax.post(h.connection+Z,V,b,"remove"):h.bindType==t.SOCKET}function $(re,G){var L,c;L=h.fromIDs[re],L&&(c=L.indexOf(G),c>=0&&L.splice(c,1),L.length==0&&delete h.fromIDs[re]),L=h.toIDs[re],L&&(c=L.indexOf(G),c>=0&&L.splice(c,1),L.length==0&&delete h.toIDs[re])}function Q(re,G){var L=h.bindings[re].obj,c=h.bindings[re].props,d=h.objIDs.at(L),o=d.indexOf(re);o>=0&&d.splice(o,1),G&&d.length==0&&D.push(L),o=h.ids.indexOf(re),o>=0&&h.ids.splice(o,1),t.loop(c,function(S){$(S,re)}),delete h.bindings[re]}return h};function g(w,E,A){var p=[],T;if(n(E)&&n(A)){if(w=="from"&&h.bindType!=t.LOCALSTORAGE)return t.loop(h.bindings,function(P){P.filter&&p.push(P.filter)}),[p,"full"];T=h.ids}else!n(E)&&!Array.isArray(E)&&(E=[E]),!n(A)&&!Array.isArray(A)&&(A=[A]),E&&(T=[],t.loop(E,function(P){if(typeof P=="string")T.indexOf(P)<0&&T.push(P);else{var Y=h.objIDs.at(P);Y&&t.loop(Y,function(_){T.indexOf(_)<0&&T.push(_)})}}));var B={};return T?F(A):A&&D(),[p,B];function F(P){t.loop(T,function(Y){var _=h.bindings[Y];if(_){_.filter&&p.push(_.filter);var V=_.obj;t.loop(P||_.props,function(b){var Z=h.toIDs[b];if(Z&&Z.indexOf(Y)>=0)if(w=="from")B[Y]||(B[Y]=[]),B[Y].push(b);else{B[Y]||(B[Y]={});var $=V[b];typeof $=="number"&&h.smartDecimals&&($>1?$=t.decimals($,1):$=t.decimals($,2)),B[Y][b]=t.copy($)}})}})}function D(){var P=[];t.loop(A,function(Y){t.loop(h.toIDs[Y],function(_){var V=h.bindings[_];P.indexOf(_)<0&&(V.filter&&p.push(V.filter),P.push(_));var b=V.obj;if(w=="from")B[_]||(B[_]=[]),B[_].push(Y);else{B[_]||(B[_]={});var Z=b[Y];typeof Z=="number"&&h.smartDecimals&&(Z>1?Z=t.decimals(Z,1):Z=t.decimals(Z,2)),B[_][Y]=t.copy(Z)}})})}}this.stopProcess=!1,this.stop=function(){h.stopped=!0};var k=function(){var w=this;w.stop=function(){w.stopped=!0}};function y(w,E,A,p,T){var B=new k,F=p!=null&&!t.isEmpty(p)&&h.data;if(x(B,T))return["stop",p];h.masterFilter&&typeof h.masterFilter=="function"&&(p=h.data=h.masterFilter(p,w,T,B));var D=t.loop(A,function(P){if(typeof P=="function"){if(x(B,T))return"stop";p=h.data=P(p,w,T,B)}});return D=="stop"||x(B,T)?["stop",p]:(E&&typeof E=="function"&&(p=h.data=E(p,w,T,B)),x(B,T)?["stop",p]:(F&&!h.data&&ht&&je("Bind()"+(w?" ["+w+"]":"")+(T?" ["+T+"]":"")+" - warning, a filter may not have returned data"),["go",p]))}function x(w,E){if(h.stopped||w.stopped)return I("STOP"+(E?" ["+E+"]":""),w.stopped?"process stopped":"bind stopped"),w.stopped?w.stop=null:h.stopped=!1,!0}this.to=function(w,E,A,p,T,B,F,D){var P="targets, props, extra, filter, smartDecimals, call, lock, unique",Y;if(Y=at(h.to,arguments,P))return Y;var _=g("to",w,E,T),V=_[0];_=_[1];var b=y("to",p,V,_,A);if(_=b[1],b[0]=="stop")return;if(h.bindType==t.LOCALSTORAGE)localStorage[h.connection]=JSON.stringify(_),d(_);else{var Z="type="+h.bindType+"&";if(!_||t.isEmpty(_))return h;if(h.bindType==t.GET){var $=_;t.isJSON($)||($=JSON.stringify($)),a&&($=t.couple($)),f&&I("Bind Report: TO [bindings]",$),$=t.urlEncode($);var Q=n(h.master)?"":"&master="+t.urlEncode(i),re=n(F)?"":"&lock="+t.urlEncode(F),G=n(D)?"":"&unique="+t.urlEncode(D),L=n(A)?"":"&extra="+t.urlEncode(A),c=h.connection+Z+"command=to&data="+$+Q+re+G+L;f&&I("Bind Report: TO [url]",c),t.async(c,d,"callbackTo")}else h.bindType==t.POST&&(h.ajax.master=i,h.ajax.couple=a,h.ajax.lock=F,h.ajax.unique=D,f&&I("Bind Report: TO [bindings]",_),h.ajax.post(h.connection+Z,_,"to",A,d))}function d(o){a&&(o=t.decouple(o)),B&&typeof B=="function"&&B(o),f&&I("Bind Report: TO"+(A?" ["+A+"]":" -"),o)}return h},this.toLock=function(w,E,A,p,T,B){var F="targets, props, extra, filter, smartDecimals, call",D;if(D=at(h.toLock,arguments,F))return D;if(h.bindType.toLowerCase()=="localstorage")return h.to(w,E,A,p,T,B),h;var P=t.makeID();h.from(Y,w,E,A,p,P);function Y(){h.to(w,E,A,p,T,B,P)}return h},this.toUnique=function(w,E,A,p,T,B){var F="targets, props, extra, filter, smartDecimals, call",D;return(D=at(h.toUnique,arguments,F))?D:(h.to(w,E,A,p,T,B,null,!0),h)},this.toggleReport=function(w){return n(w)?f=!f:f=w,h},f&&I("Bind Report: CREATE ["+r.toUpperCase()+"]",e+(i?" "+i:""));function I(w,E){h==Tt?Ar(w,E):kr(w,E)}return this.report=function(){var w="Bind {DATA} Report:",E=t.copy(h.data);return h==Tt?Ar(w,E):kr(w,E),w="Bind {BINDINGS} Report:",E=t.copy(h.bindings),h==Tt?Ar(w,E):kr(w,E),h},this.from=function(w,E,A,p,T,B){var F="call, targets, props, extra, filter, lock",D;if(D=at(h.from,arguments,F))return D;var P=g("from",E,A,s),Y=P[0];P=P[1];var _=y("fromTo",T,Y,P,p);if(P=_[1],_[0]=="stop")return;var V="type="+h.bindType+"&";if(h.bindType==t.LOCALSTORAGE)(!localStorage[h.connection]||localStorage[h.connection]==null)&&(localStorage[h.connection]="{}"),h.data=JSON.parse(localStorage[h.connection]),G(h.data);else if(h.bindType==t.GET){var b=P;t.isJSON(b)||(b=JSON.stringify(b)),a&&(b=t.couple(b)),f&&I("Bind Report: FROM [bindings]",b),b=t.urlEncode(b);var Z=n(h.master)?"":"&master="+t.urlEncode(i),$=n(B)?"":"&lock="+t.urlEncode(B),Q=n(p)?"":"&extra="+t.urlEncode(p),re=h.connection+V+"data="+b+"&command=from"+Z+$+Q;f&&I("Bind Report: FROM [url]",re),t.async(re,G,"callbackFrom")}else h.bindType==t.POST&&(h.ajax.master=i,h.ajax.couple=a,h.ajax.lock=B,f&&I("Bind Report: FROM [bindings]",P),h.ajax.post(h.connection+V,P,"from",p,G));function G(L){if(h.data=L,a&&(h.data=t.decouple(h.data)),!n(B))var c=JSON.stringify(h.data);var d=y("from",T,Y,h.data,p);if(d[0]!="stop"){var o=!1;(n(B)||c!=JSON.stringify(h.data))&&(o=!0,h.applyData()),f&&I("Bind Report: FROM"+(p?" ["+p+"]":" -"),o?h.data:"data not applied in toLock()"),w&&typeof w=="function"&&w(h.data)}}return h},this.applyData=function(){return t.loop(h.data,function(w,E){var A=h.bindings[w];if(A){var p=h.bindings[w].obj;t.loop(E,function(T,B){p[T]=B})}}),h},this.clear=function(){return h.bindType==t.LOCALSTORAGE&&(localStorage[h.connection]=null),h},this.removeAllBindings=function(w,E){if(n(w)&&(w=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new t.Dictionary(!0),this.toIDs={},this.fromIDs={},w){var A="type="+h.bindType+"&";if(h.bindType==t.LOCALSTORAGE)h.clear(),T("success");else if(h.bindType==t.GET){var p=n(h.master)?"":"&master="+encodeURI(i);t.async(h.connection+A+"command=removeAll"+p,T,"callbackRemoveAll")}else h.bindType==t.POST&&(h.ajax.master=i,h.ajax.post(h.connection+A,{},"removeAll",null,T,"removeAll"))}function T(B){E&&typeof E=="function"&&E(B),f&&I("Bind Report: REMOVEALL",B)}return h},h},t.Swipe=function(e,r,i,l,a){var s="obj, distance, duration, isometric, overrideNoSwipe",f;if(f=at(t.Swipe,arguments,s,this))return f;if(De("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",n(e)||!e.on){je(`zim controls - Swipe():
Please pass in object`);return}n(r)&&(r=30);var u=mt(i);n(i)&&(i=u=="s"?.08:80),this.distance=r,this.duration=i,this.active=!0;var v,C,h,g,k,y,x=this,I,w,E=e.on("mousedown",function(A){if(!x.active||!a&&A.target.zimNoSwipe)return;x.obj=A.target,g=v=A.stageX/t.scaX,k=C=A.stageY/t.scaY,h=!0,x.dispatchEvent("swipedown"),clearTimeout(y),y=setTimeout(function(){h&&(p(),h=!1)},x.duration*(u=="s"?1e3:1)),I=e.on("pressmove",function(T){g=T.stageX/t.scaX,k=T.stageY/t.scaY}),w=e.on("pressup",function(){h&&(p(),h=!1,clearTimeout(y))});function p(){var T=new Fe.Event("swipe");if(T.obj=x.obj,T.stageX=A.stageX/t.scaX,T.stageY=A.stageY/t.scaY,T.rawX=A.rawX/t.scaX,T.rawY=A.rawY/t.scaY,T.swipeX=T.swipeY=0,x.direction="none",l){if(Math.abs(g-v)>x.distance||Math.abs(k-C)>x.distance){var B=Math.atan2(k-C,g-v)*180/Math.PI;B=(B+360)%360,B>=270&&B<360?(T.swipeY=-1,x.direction="up"):B>=0&&B<90?(T.swipeX=1,x.direction="right"):B>=90&&B<180?(T.swipeY=1,x.direction="down"):B>=180&&B<270&&(T.swipeX=-1,x.direction="left")}}else Math.abs(g-v)>Math.abs(k-C)?(g-v>x.distance&&(T.swipeX=1,x.direction="right"),v-g>x.distance&&(T.swipeX=-1,x.direction="left")):(k-C>x.distance&&(T.swipeY=1,x.direction="down"),C-k>x.distance&&(T.swipeY=-1,x.direction="up"));x.dispatchEvent(T)}});this.disable=function(){x.active=!1},this.enable=function(){x.active=!0},this.dispose=function(){E&&e.off("mousedown",E),I&&e.off("pressmove",I),w&&e.off("pressup",w)}},t.extend(t.Swipe,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.Swiper=function(e,r,i,l,a,s,f,u,v,C,h,g,k){var y="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",x;if(x=at(t.Swiper,arguments,y,this))return x;if(De("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",n(e)||!e.getStage||!e.stage){je("zim.Swiper() - please provide container on stage");return}if(n(r))return;n(l)&&(l=1),n(a)&&(a="horizontal"),n(u)&&(u=.1),n(v)&&(v=!1),n(C)&&(C=1),n(h)&&(h=!1);var I=mt(g);n(g)&&(g=I=="s"?.2:200);var w=this,E=e,A,p,T=w.desiredValue=r[i],B;this.target=r,this.property=i,this.sensitivity=l;var F=!1,D=j.zdf||e.stage?e.stage.frame:{};E.canvas?(B=E,w.downEvent=E.on("stagemousedown",function(R){F=!0,G(R),w.moveEvent=E.on("stagemousemove",L),w.upEvent=E.on("stagemouseup",P),w.upEvent2=D.on("mouseupplus",P)})):(B=E.stage,m(),w.downEvent=E.on("mousedown",G),w.moveEvent=E.on("pressmove",L),w.upEvent=E.on("pressup",Y),w.upEvent2=D.on("mouseupplus",Y));function P(){F=!1,E.off("stagemousemove",w.moveEvent),E.off("stagemouseup",w.upEvent),w.dispatchEvent("swipeup")}function Y(){F=!1,w.dispatchEvent("swipeup")}var _,V,b,Z=Math.sqrt(Math.pow(E.width,2)+Math.pow(E.height,2)),$,Q,re=!1;function G(R){re=!0,B=R.target.stage,b=(E.parent?E.parent:E).localToGlobal(E.x,E.y),F=!0,a=="radial"?($=R.stageX/t.scaX,Q=R.stageY/t.scaY,_=Math.atan2(Q-b.y,$-b.x)*t.DEG):A=a=="horizontal"?R.stageX/t.scaX:R.stageY/t.scaY,p=w.target[w.property],w.dispatchEvent("swipedown")}function L(R){if(F){if(a=="radial"){w.diff=t.dist($,Q,R.stageX/t.scaX,R.stageY/t.scaY),V=Math.atan2(R.stageY/t.scaY-b.y,R.stageX/t.scaX-b.x)*t.DEG;var N=t.sign(_-V);if(Math.abs(V-_)>180){F=!1;return}w.diff=w.diff*N;var se=Math.max(10,t.dist(b.x,b.y,R.stageX/t.scaX,R.stageY/t.scaY));w.diff*=(Z-se)/Z}else w.diff=A-(a=="horizontal"?R.stageX/t.scaX:R.stageY/t.scaY);if(k&&(Math.abs(w.diff)<Math.abs(k.diff)?(w.override=!0,k.override=!1):(w.override=!1,k.override=!0)),!w.override){if(Math.abs(w.diff)>0&&(w.swiperMoving=!0),T=p-w.diff*w.sensitivity*C,!n(s)&&!n(f)&&h){var ie=T;T=(T+(f-s)*1e4-s)%(f-s)+s,Math.abs(ie-T)>Math.abs(f-s)*.8&&(w.immediate(T),A=a=="horizontal"?R.stageX/t.scaX:R.stageY/t.scaY,p=w.target[w.property])}else n(s)||(T=Math.max(T,s)),n(f)||(T=Math.min(T,f));w.desiredValue=T,w.dispatchEvent("swipemove")}}}var c=new t.Damp(w.target[w.property],u),d=T,o=T;w.swiperTicker=t.Ticker.add(function(){T==d?T!=o&&(w.pauseTimeout&&w.pauseTimeout.clear(),o=T,w.pauseTimeout=t.timeout(g,function(){F&&w.dispatchEvent("swipepause"),w.pauseTimeout=null})):(o=null,d=T,w.pauseTimeout&&w.pauseTimeout.clear()),w.swiperMoving&&(w.target[w.property]=v?Math.round(c.convert(T)):c.convert(T),re&&!F&&Math.abs(w.target[w.property]-T)<l/2&&(w.swiperMoving=!1,re=!1,w.target[w.property]=T,w.immediate(w.target[w.property]),w.dispatchEvent("swipestop")))},B),this.immediate=function(R){c.immediate(R),w.target[w.property]=v?Math.round(R):R,w.desiredValue=T=R};var S=!0;Object.defineProperty(w,"enabled",{get:function(){return S},set:function(R){S!=R&&(R?de():O(),S=!!R)}}),Object.defineProperty(w,"desiredValue",{get:function(){return T},set:function(R){w.swiperMoving=!0,T=R}}),Object.defineProperty(w,"damp",{get:function(){return u},set:function(R){u=R,c.damp=u}});function X(){E.off("stagemousedown",w.downEvent),E.off("stagemousemove",w.moveEvent),E.off("stagemouseup",w.upEvent),D.off("mouseupplus",w.upEvent2)}function m(){E.off("mousedown",w.downEvent),E.off("pressmove",w.moveEvent),E.off("pressup",w.upEvent),D.off("mouseupplus",w.upEvent2)}function O(){E.canvas?X():m(),t.Ticker.remove(w.swiperTicker)}function de(){E.canvas?w.downEvent=E.on("stagemousedown",w.downEvent):(w.downEvent=E.on("mousedown",w.downEvent),w.moveEvent=E.on("pressmove",w.moveEvent),w.upEvent=E.on("pressup",w.upEvent),w.upEvent2=D.on("mouseupplus",w.upEvent2)),w.immediate(w.target[w.property]),w.swiperTicker=t.Ticker.add(w.swiperTicker,B)}this.dispose=function(){O(),c=null,w.swiperTicker=null}},t.extend(t.Swiper,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.MotionController=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F){var D="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",P;if(P=at(t.MotionController,arguments,D,this))return P;De("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var Y=this,_,V="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(n(I))if(j.zdf)_=I=j.zdf.stage;else{je(V);return}else if(n(I.stage))if(j.zdf)_=j.zdf.stage;else{je(V);return}else _=I.stage;var b=_.frame;n(C)||(F=C),n(e)&&(e=new t.Container(1,1,null,null,!1));var Z=e.type=="Accelerator";if(n(i)&&(i=r=="pressmove"?20:7),!n(r)&&r.type=="DPad"){var $=r;r="manual",n(l)&&(l=$.axis),l=="all"&&(l="both"),$.on("change",function(){Y.convert(e.x+$.dirX*i,e.y+$.dirY*i)})}(n(r)||r!="mousemove"&&r!="pressmove"&&r!="pressdrag"&&r!="keydown"&&r!="gamebutton"&&r!="gamestick"&&r!="swipe"&&r!="follow"&&r!="manual")&&(r="mousedown"),n(l)&&(l=Z?"horizontal":"both"),r=="keydown"&&n(s)&&(s=[[65,37],[68,39],[87,38],[83,40]]),r=="gamebutton"&&n(s)&&(g?s=[14,15,t.GamePad.RT,t.GamePad.LT]:s=[14,15,12,13]),r=="gamestick"&&n(s)&&(g?s=[[0,2],[0,2],[1],[1]]:s=[0,0,1,1]),r=="gamestick"&&n(s)&&(s=[0,0,1,1]),n(f)&&(f=!0),(l=="horizontal"||l=="vertical")&&(f=!1),n(u)&&(u=r=="keydown"||r=="gamebutton"?1:r=="pressmove"?.5:.1),n(g)&&(g=!1),n(k)&&(k=i*.4),n(y)&&(y=4),n(x)&&(x=.2),n(E)&&(E=!0),_.mouseMoveOutside=E,n(A)&&(A=[]),Array.isArray(A)||(A=[A]),e.type=="Pen"&&!e.move?A.push(e,e.paper):A.push(e),a&&a.getBounds&&(A?A.indexOf(a)==-1&&A.push(a):A=[a]),e.motionController=this,this.mousedownIncludes=A,n(B)&&(B=.3),Y.dampKeyup=B,this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=k,this.axis=l,this.target=e,this.moveThreshold=y,this.stickThreshold=x,this.boundary=a,e.zimMCStartAngle=e.rotation;var Q=Y.speed,re=Y.speed,G=0;Y.rotation=e.zimMCStartAngle;var L,c;if(Z){c=I.getBounds();var d;!c||l=="vertical"&&!c.height||l!="vertical"&&!c.width?d=1e3:d=l=="vertical"?c.height:c.width,n(p)&&(p=0),n(T)&&(T=100),n(this.target.percentSpeed)&&(this.target.percentSpeed=(T-p)/2),Y.x=d/2,Y.y=d/2,L=new t.Proportion(0,d,p,T)}else Y.x=this.target.x,Y.y=this.target.y;var o=Y.scaleX=e.scaleX,S=Y.scaleY=e.scaleY,X,m,O,de,R=!1,N=!1,se,ie,q,z,ce;if(r=="keydown"||r=="gamebutton"){for(ie=0;ie<4;ie++)Array.isArray(s[ie])||(s[ie]=[s[ie]]);var Ie=[0,0,0,0],K=[],xe=["X","X","Y","Y"],J=[-1,1,-1,1],fe={dirX:0,dirY:0};if(r=="keydown")var U=b.on("keydown",oe);else{z=Y.gamepad=new t.GamePad;var ue=z.on("buttondown",oe)}if(n(h))if(r=="keydown")var ke=b.on("keyup",Me);else var ne=z.on("buttonup",Me);ce={rotation:0,speedX:Y.speed,speedY:Y.speed};var ve=t.Ticker.add(function(){if(g){Se(fe);return}var Ye=Y.speed,nt=Y.speed;if(Y.axis=="both"&&fe.dirX!=0&&fe.dirY!=0){var pe=te(fe.dirX,fe.dirY);Ye=pe.speedX,nt=pe.speedY}(Y.axis=="horizontal"||Y.axis=="both")&&(Y.x+=Ye*fe.dirX),(Y.axis=="vertical"||Y.axis=="both")&&(Y.y+=nt*fe.dirY),Le()},_)}else if(r=="mousedown"||r=="mousemove")X=_.on("stage"+r,function(Ye){if(_=Ye.target.stage,r=="mousedown"){if(Array.isArray(Y.mousedownIncludes)||(Y.mousedownIncludes=[Y.mousedownIncludes]),Y.mousedownIncludes.indexOf(I)<0)for(ie=0;ie<I.numChildren;ie++){var nt=I.getChildAt(ie);if(Y.mousedownIncludes.indexOf(nt)==-1&&nt.mouseEnabled&&nt.hitTestPoint&&nt.hitTestPoint(Ye.stageX/t.scaX,Ye.stageY/t.scaY))return}Y.dispatchEvent("mousedown")}var pe=I.globalToLocal(E?Ye.rawX/t.scaX:Ye.stageX/t.scaX,E?Ye.rawY/t.scaY:Ye.stageY/t.scaY);Y.x=pe.x,Y.y=pe.y,Le()});else if(r=="pressmove"||r=="pressdrag"||r=="follow")e.type=="Pen"&&(e.write=!1),X=_.on("stagemousedown",function(Ye){var nt;if(!((e.type=="Pen"||r=="pressmove")&&Y.boundary&&!Y.boundary.type=="Blob"&&(nt={x:Ye.stageX/t.scaX,y:Ye.stageY/t.scaY},nt.x<Y.boundary.x||nt.x>Y.boundary.x+Y.boundary.width||nt.y<Y.boundary.y||nt.y>Y.boundary.y+Y.boundary.height))&&!(Y.boundary&&Y.boundary.type=="Blob"&&(r=="pressmove"||r=="pressdrag")&&(nt={x:Ye.stageX/t.scaX,y:Ye.stageY/t.scaY},!Y.boundary.shape.hitTestPoint(nt.x,nt.y)))&&!(r=="pressdrag"&&!e.hitTestPoint(Ye.stageX/t.scaX,Ye.stageY/t.scaY))){N=!1,Array.isArray(Y.mousedownIncludes)||(Y.mousedownIncludes=[Y.mousedownIncludes]);var pe=!1;for(Y.mouseDownIncludes&&(se=_.getObjectUnderPoint(Ye.stageX,Ye.stageY,1)),ie=0;ie<Y.mousedownIncludes.length;ie++)se&&Y.mousedownIncludes[ie].hitTestPoint&&Y.mousedownIncludes[ie].hitTestPoint(Ye.stageX/t.scaX,Ye.stageY/t.scaY)&&Y.mousedownIncludes[ie].contains(se)&&(pe=!0);if(!pe)for(ie=0;ie<I.numChildren;ie++){var Je=I.getChildAt(ie);if(Y.mousedownIncludes.indexOf(Je)==-1&&Je.mouseEnabled&&Je.hitTestPoint&&Je.hitTestPoint(Ye.stageX/t.scaX,Ye.stageY/t.scaY))return}var be=I.globalToLocal(E?Ye.rawX/t.scaX:Ye.stageX/t.scaX,E?Ye.rawY/t.scaY:Ye.stageY/t.scaY);r!="follow"&&r!="pressdrag"&&Y.immediate(l=="both"||l=="horizontal"?be.x:null,l=="both"||l=="vertical"?be.y:null),Le(),Y.dispatchEvent("mousedown"),R=!0,Y.moveX=E?Ye.rawX/t.scaX:Ye.stageX/t.scaX,Y.moveY=E?Ye.rawY/t.scaY:Ye.stageY/t.scaY,m=_.on("stagemousemove",function(Ee){Y.moveX=E?Ee.rawX/t.scaX:Ee.stageX/t.scaX,Y.moveY=E?Ee.rawY/t.scaY:Ee.stageY/t.scaY,r!="follow"&&ae()}),de&&t.Ticker.remove(de),r=="follow"&&(de=t.Ticker.add(ae)),e.type=="Pen"&&(e.write=!0,e.paper.noMouse(),e.zimDragCheck=!0)}}),O=_.on("stagemouseup",function(){e.type=="Pen"&&(e.write=!1,e.paper.mouse(),e.zimDragCheck=!1,N&&e.stopCheck()),de&&t.Ticker.remove(de),_.off("stagemousemove",m),R=!1});else if(r=="gamestick"){for(z=this.gamepad=new t.GamePad,ie=0;ie<4;ie++)Array.isArray(s[ie])||(s[ie]=[s[ie]]);ce={rotation:e.zimMCStartAngle,speedX:Y.speed,speedY:Y.speed};var we=z.on("data",function(Ye){for(fe={dirX:0,dirY:0},ie=0;ie<s[0].length;ie++)if(q=Ye.axes[s[0][ie]],Math.abs(q)>Y.stickThreshold){fe.dirX=q;break}for(ie=0;ie<s[2].length;ie++)if(q=Ye.axes[s[2][ie]],Math.abs(q)>Y.stickThreshold){fe.dirY=q;break}if(g){Se(fe);return}Y.x+=Y.speed*fe.dirX,Y.y+=Y.speed*fe.dirY,Le()})}else if(r=="swipe")var ee=new t.Swiper(_,Y,"x",.8),le=new t.Swiper(_,Y,"y",.8,!1),ye=ee.on("swipemove",function(){Le()});function oe(Ye){var nt=r=="keydown"?Ye.keyCode:Ye.buttonCode,pe;for(ie=0;ie<4;ie++)if(s[ie].indexOf(nt)>-1){if(!f&&Y.axis=="both"&&(fe.dirX=fe.dirY=0),fe["dir"+xe[ie]]=J[ie],Ie[ie]=1,pe=K.indexOf(ie),pe==0)return;pe>0&&K.splice(pe,1),K.unshift(ie);return}}function Me(Ye){var nt=r=="keydown"?Ye.keyCode:Ye.buttonCode,pe;for(ie=0;ie<4;ie++)if(s[ie].indexOf(nt)>-1){if(Ie[ie]=0,pe=K.indexOf(ie),pe>=0&&K.splice(pe,1),Y.axis!="both"||f)fe["dir"+xe[ie]]=-Ie[Math.floor(ie/2)*2]+Ie[Math.floor(ie/2)*2+1];else if(K.length>0){fe["dir"+xe[ie]]=0;var Je=K[0];fe["dir"+xe[Je]]=J[Je]}else fe.dirX=fe.dirY=0;return}}function ae(){var Ye=I.globalToLocal(Y.moveX,Y.moveY);Y.x=Ye.x,Y.y=Ye.y,Le(),e.type=="Pen"&&!N&&e.drawing&&(N=!0)}function Se(Ye){ce.rotation+=Ye.dirX*Y.turnSpeed,Y.rotation=ce.rotation,ce.speedX=Math.sin(ce.rotation*Math.PI/180)*Y.speed*-Ye.dirY,ce.speedY=-Math.cos(ce.rotation*Math.PI/180)*Y.speed*-Ye.dirY,Y.x+=ce.speedX,Y.y+=ce.speedY}function Le(){var Ye=Y.x-(Z?Y.target.percentSpeed:Y.target.x),nt=Y.y-(Z?Y.target.percentSpeed:Y.target.y),pe=te(Ye,nt);if(Q=pe.speedX,re=pe.speedY,!!F){if(n(pe.angle)||(Y.rotation=pe.angle+e.zimMCStartAngle),n(Y.rotation)){Y.rotation=Y.target.rotation;return}Y.rotation+=G;var Je=Ce(Y.rotation),be=Y.target.rotation=Ce(Y.target.rotation);Math.abs(Je-be)>180&&(be>Je?be-=360:Je-=360),Y.dampR.immediate(be),Y.target.rotation=be,Y.rotation=Je}}function Ce(Ye){return(Ye%360+360)%360}function te(Ye,nt){var pe=Y.speed,Je=Y.speed,be,Ee=Math.sqrt(Math.pow(Ye,2)+Math.pow(nt,2));return Ee>0&&(pe=Math.abs(Ye)/Ee*Y.speed,Je=Math.abs(nt)/Ee*Y.speed,be=90-Math.atan2(Ye,nt)*180/Math.PI),{speedX:pe,speedY:Je,angle:be}}var Oe=this.x,Re=this.y,Xe=this.x,Qe=this.y,it=this.x=Z?d/2:this.target.x,Be=this.y=Z?d/2:this.target.y;this.dampX=new t.Damp(it,u),this.dampY=new t.Damp(Be,u),this.dampR=new t.Damp(this.target.rotation,u);var Ke=0,He=0,he=t.Ticker.add(function(){if(r=="manual"&&Le(),Y.boundary&&Y.boundary.type!="Blob"&&(Y.x=t.constrain(Y.x,Y.boundary.x,Y.boundary.x+Y.boundary.width),Y.y=t.constrain(Y.y,Y.boundary.y,Y.boundary.y+Y.boundary.height)),Y.axis=="horizontal"||Y.axis=="both"){if(Y.dirX=t.sign(Y.x-it),Math.abs(Y.x-it)<Q?it=Y.x:it+=Y.dirX*Q,fe&&fe.dirX==0){var Ye=Y.boundary?Y.boundary.width/2:_.width/2,nt=Y.x-(Y.x-Ye)*(Z?Y.dampKeyup:0);it=nt,Y.x=it}Z&&c&&c.width?Y.target.percentSpeed=L.convert(Y.dampX.convert(it)):Y.target.x=Y.dampX.convert(it)}if(Y.axis=="vertical"||Y.axis=="both"){if(Y.dirY=t.sign(Y.y-Be),Math.abs(Y.y-Be)<re?Be=Y.y:Be+=t.sign(Y.y-Be)*re,fe&&fe.dirY==0){Ye=Y.boundary?Y.boundary.height/2:_.height/2;var pe=Y.y-(Y.y-Ye)*(Z?Y.dampKeyup:0);Be=pe,Y.y=Be}Z&&c&&c.height?Y.target.percentSpeed=L.convert(Y.dampY.convert(Be)):Y.target.y=Y.dampY.convert(Be)}if(Y.boundary&&Y.boundary.type=="Blob"&&(Y.boundary.shape.hitTestPoint(Y.target.x,Y.target.y)?(Oe=Y.target.x,Re=Y.target.y):(Y.target.x=Y.x=Oe,Y.target.y=Y.y=Re,Y.immediate(Oe,Re))),r=="pressmove"&&R&&Y.dispatchEvent("pressing"),u==1?(Y.movingX=Math.round(Xe-Y.x)!=0,Y.movingY=Math.round(Qe-Y.y)!=0,Xe=Y.x,Qe=Y.y):(Y.movingX=Math.abs(it-(Z?Y.target.percentSpeed:Y.target.x))>Y.moveThreshold,Y.movingY=Math.abs(Be-(Z?Y.target.percentSpeed:Y.target.y))>Y.moveThreshold),Y.moving&&!(Y.movingX||Y.movingY)?Y.dispatchEvent("stopmoving"):!Y.moving&&(Y.movingX||Y.movingY)&&Y.dispatchEvent("startmoving"),Y.moving=Y.movingX||Y.movingY,Y.moving&&Y.dispatchEvent("moving"),Y.dirX!=Ke||Y.dirY!=He){var Je=new Fe.Event("change"),be;Y.dirX!=Ke?(be=["left",null,"right"],Je.dir=be[Y.dirX+1],Ke=Y.dirX,!e.zimMCStartAngle&&(v=="horizontal"||v=="both")&&(Y.scaleX=e.scaleX=Y.dirX?Math.abs(e.scaleX)*Y.dirX:e.scaleX,o!=0&&Math.round(Y.scaleX/o)==-1?G=180:G=0)):(be=["up",null,"down"],Je.dir=be[Y.dirY+1],He=Y.dirY,!e.zimMCStartAngle&&(v=="vertical"||v=="both")&&(Y.scaleY=e.scaleY=Y.dirY?-Math.abs(e.scaleY)*Y.dirY:e.scaleY,S!=0&&Math.round(Y.scaleY/S)==-1?G=180:G=0)),Y.dispatchEvent(Je)}F&&!n(Y.rotation)&&(Y.target.rotation=Y.dampR.convert(Y.rotation))},_);this.immediate=function(Ye,nt,pe){return!n(Ye)&&Y.dampX&&(Y.dampX.immediate(Ye),Z?Y.x=Y.target.percentSpeed=it=Ye:Y.x=Y.target.x=it=Ye,ee&&ee.immediate(Ye)),!n(nt)&&Y.dampY&&(Y.dampY.immediate(nt),Z?Y.y=Y.target.percentSpeed=Be=nt:Y.y=Y.target.y=Be=nt,le&&le.immediate(nt)),!n(pe)&&Y.dampR&&(Y.dampR.immediate(pe),Y.rotation=Y.target.rotation=pe),Oe=Y.x,Re=Y.y,Y},this.convert=function(Ye,nt){n(Ye)||(Y.x=Ye),n(nt)||(Y.y=nt),Le()},Object.defineProperty(Y,"pausingSpeed",{get:function(){return Y.speed},set:function(Ye){Y.speed=Ye}}),this.paused=!1;var me;this.pause=function(Ye,nt,pe){return n(Ye)&&(Ye=!0),n(nt)&&(nt=0),n(pe)&&(pe=!1),Ye?(me=Y.speed,nt>0?(t.animate({target:Y,obj:{pausingSpeed:0},ticker:!1,time:nt,call:function(){Y.speed=0,Y.paused=!0,Y.enabled=!1,Y.immediate(Y.target.x,Y.target.y),Y.dispatchEvent("pause")}}),pe&&(R=!1,m&&_.off("stagemousemove",m),de&&t.Ticker.remove(de),e.type=="Pen"&&(e.write=!1,e.zimDragCheck=!1),O&&_.off("stagemouseup",O),N&&e.stopCheck(),r=="keydown"?ke&&b.off("keyup",ke):ne&&z.off("buttonup",ne))):(Y.speed=0,Y.paused=!0,Y.enabled=!1,Y.immediate(Y.target.x,Y.target.y),setTimeout(function(){Y.dispatchEvent("pause")},10))):(Y.enabled=!0,nt>0?t.animate({target:Y,obj:{pausingSpeed:me},ticker:!1,time:nt,call:function(){Y.speed=me,Y.paused=!1}}):(Y.speed=me,Y.paused=!1)),Y};var Te=!0;Object.defineProperty(Y,"enabled",{get:function(){return Te},set:function(Ye){Te!=Ye&&(Ye?(ze(),Y.paused=!1):(st(),Y.paused=!0),Te=!!Ye)}});function ze(){r=="keydown"?(U=b.on("keydown",U),ke&&(ke=b.on("keyup",ke)),ve=t.Ticker.add(ve,_)):r=="gamebutton"?(ue=z.on("buttondown",ue),ne&&(ne=z.on("buttonup",ne)),ve=t.Ticker.add(ve,_)):r=="gamestick"?we=z.on("data",we):r=="swipe"?(ee.enabled=!0,le.enabled=!0,ye&&(ye=ee.on("swipemove",ye))):r=="mousedown"||r=="mousemove"?X=_.on("stage"+r,X):r=="pressmove"&&(X=_.on("stagemousedown",X),m&&(m=_.on("stagemousemove",m)),O&&(O=_.on("stagemouseup",O))),he=t.Ticker.add(he,_)}function st(){r=="keydown"?(b.off("keydown",U),b.off("keyup",ke),t.Ticker.remove(ve)):r=="gamebutton"?(z.off("buttondown",ue),z.off("buttonup",ne),t.Ticker.remove(ve)):r=="gamestick"?z.off("data",we):r=="swipe"?(ee.enabled=!1,le.enabled=!1,ee.off("swipemove",ye)):r=="mousedown"||r=="mousemove"?_.off("stage"+r,X):r=="pressmove"&&(_.off("stagemousedown",X),_.off("stagemousemove",m),_.off("stagemouseup",O)),t.Ticker.remove(he)}this.dispose=function(){st(),z&&z.dispose(),ee&&ee.dispose(),le&&ee.dispose()}},t.extend(t.MotionController,Fe.EventDispatcher,"enabled","cjsEventDispatcher"),t.GamePad=function(){if(De("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads){this.error=!0,ht&&je("zim.GamePad() - no browswer support");return}var e;j.addEventListener("gamepadconnected",i),this.currentIndex=0;var r=this;function i(f){r.connected=!0,a("gamepadconnected",f);var u=navigator.getGamepads()[r.currentIndex];r.lastData=[];for(var v=0;v<u.buttons.length;v++)r.lastData[v]=u.buttons[v].pressed;function C(){if(e=requestAnimationFrame(C),r.data=navigator.getGamepads()[r.currentIndex],!!r.data){for(var h=r.buttons=[],g,k=0;k<r.data.buttons.length;k++)h[k]=r.data.buttons[k].pressed,h[k]!=r.lastData[k]&&(r.lastData[k]=h[k],h[k]?g=new Fe.Event("buttondown"):g=new Fe.Event("buttonup"),g.buttonCode=k,g.button=Dt[k],r.dispatchEvent(g));g=new Fe.Event("data"),g.axes=r.axes=r.data.axes,g.buttons=r.buttons,r.dispatchEvent(g)}}C()}var l=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(r.connected||i(),clearInterval(l))},500);function a(f,u){var v=new Fe.Event(f);v.index=u.gamepad.index,v.id=u.gamepad.id,v.buttons=u.gamepad.buttons,v.axes=u.gamepad.axes,r.dispatchEvent(v)}var s=function(f){f.gamepad.index==r.currentIndex&&(cancelAnimationFrame(e),r.connected=!1,r.dispatchEvent("gamepaddisconnected"))};j.addEventListener("gamepaddisconnected",s),this.dispose=function(){j.removeEventListener("gamepadconnected",i),j.removeEventListener("gamepaddisconnected",s),cancelAnimationFrame(e),clearInterval(l),r.connected=!1}};var Dt=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(on=0;on<Dt.length;on++)t.GamePad[Dt[on]]=on;var Qt=["LSX","LSY","RSX","RSY"];for(on=0;on<Qt.length;on++)t.GamePad[Qt[on]]=on;t.extend(t.GamePad,Fe.EventDispatcher,null,"cjsEventDispatcher"),t.Portal=function(e,r){var i="obj, lands",l;if(l=at(t.Portal,arguments,i,this))return l;if(De("69.96"),n(e)||!e.stage)return;this.type="Portal";var a=this,s=r&&r.numChildren&&r.numChildren>0;if(s){var f=r.getChildAt(r.numChildren-1),u=r.getChildAt(r.numChildren-2);r.setChildIndex(u,r.numChildren-1),u.setMask(e)}function v(){r.setChildIndex(f,0),f=u,u=r.getChildAt(r.numChildren-2),r.setChildIndex(u,r.numChildren-1),f.setMask(null),u.setMask(e),e.stage.update()}e.on(t.mobile()?"mousedown":"mouseover",function(){a._enabled&&(s&&v(),a.dispatchEvent("enter"))}),e.on(t.mobile()?"pressup":"mouseout",function(){a._enabled&&a.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return e},set:function(C){if((n(C)||!C.stage)&&ht){je("zim.Portal() - please provide a Display Object to act as the portal");return}u.setMask(e)}}),Object.defineProperty(this,"currentLand",{get:function(){return f},set:function(C){if(r.contains(C))for(;C!=f;)v()}}),Object.defineProperty(this,"nextLand",{get:function(){return u},set:function(){if(ht){je("zim.Portal() - nextLand is read only - remake Portal to change");return}}}),this._enabled=!0,Object.defineProperty(a,"enabled",{get:function(){return a._enabled},set:function(C){a._enabled=C}})},t.extend(t.Portal,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),j.zimContactListener=null;var At,Xt;function We(e,r,i,l,a,s,f,u,v,C,h,g){if(De("69.97"),n(i)&&(i=0),l=="rectangle")e.body=e.physics.makeRectangle(e.width-i,e.height-i,r,a,f,u,v,C,h,s,g);else if(l=="circle")e.body=e.physics.makeCircle(e.width/2-i,r,a,f,u,v,C,h,s,g);else if(l=="triangle")n(e.a)&&(e.a=e.width,e.b=e.c=Math.sqrt(Math.pow(e.a/2,2)+Math.pow(e.height,2))),e.body=e.physics.makeTriangle(e.a-i,e.b-i,e.c-i,r,a,f,u,v,C,h,s,g);else if(l=="poly"){var k=[];e.reg(0,0,!0);var y=e;e.scale!=1&&(y=e.clone().transformPoints("scale",e.scale)),i&&(y=e.clone().transformPoints("scale",Math.max(0,1-i/((e.width+e.height)/4)))),t.loop(y.points,function(I){k.push({x:I[0],y:I[1]})}),e.body=e.physics.makePoly(k,e.width,e.height,r,a,f,u,v,C,h,s,g)}e.body.x=e.x,e.body.y=e.y,e.body.rotation=e.rotation,e.physics.addMap(e.body,e),e.impulse=function(I,w,E,A){n(I)&&(I=0),n(w)&&(w=0);var p=e.body.GetWorldCenter();return n(E)&&(E=p.x*e.physics.scale),n(A)&&(A=p.y*e.physics.scale),e.body.ApplyImpulse(new j.b2Vec2(I,w),new j.b2Vec2(E/e.physics.scale,A/e.physics.scale)),e},e.force=function(I,w,E,A){n(I)&&(I=0),n(w)&&(w=0);var p=e.body.GetWorldCenter();return n(E)&&(E=p.x*e.physics.scale),n(A)&&(A=p.y*e.physics.scale),e.body.ApplyForce(new j.b2Vec2(I,w),new j.b2Vec2(E/e.physics.scale,A/e.physics.scale)),e},e.setLinearVelocity=function(I,w){return e.body.SetLinearVelocity(new j.b2Vec2(I,w)),e},e.setAngularVelocity=function(I){return e.body.SetAngularVelocity(I),e},e.spin=function(I){return n(I)&&(I=10),e.body.ApplyTorque(I*1e3),e},e.torque=function(I){return n(I)&&(I=10),e.body.ApplyTorque(I),e},e.follow=function(I,w,E,A,p,T,B,F,D,P,Y,_){var V="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal",b;return(b=at(e.follow,arguments,V))?b:(e.physics.follow(e,I,w,E,A,p,T,B,F,D,P,Y,_),e)},e.noFollow=function(){return e.physics.follow(null),e},e.control=function(I,w,E,A,p){var T="type, speed, speedY, horizontal, vertical",B;return(B=at(e.control,arguments,T))?B:(e.physics.control(e,I,w,E,A,p),e)},e.customControl=function(I,w,E){var A="dir, speed, speedY",p;return(p=at(e.customControl,arguments,A))?p:(e.physics.customControl(I,w,E),e)},e.noControl=function(){return e.physics.noControl(e),e},e.sleep=function(){return e.body.SetAwake(!1),e},e.wake=function(){return e.body.SetAwake(!0),e};function x(){j.zimContactListener=new j.b2ContactListener,At=new t.Dictionary(!0),Xt=new t.Dictionary(!0),j.zimContactListener.BeginContact=I,j.zimContactListener.EndContact=w;function I(E){var A=At.at(E.m_fixtureB.GetBody());A&&A(E.m_fixtureA.GetBody().zimObj,E.m_fixtureA.GetBody()),A=At.at(E.m_fixtureA.GetBody()),A&&A(E.m_fixtureB.GetBody().zimObj,E.m_fixtureB.GetBody())}function w(E){var A=Xt.at(E.m_fixtureB.GetBody());A&&A(E.m_fixtureA.GetBody().zimObj,E.m_fixtureA.GetBody()),A=Xt.at(E.m_fixtureA.GetBody()),A&&A(E.m_fixtureB.GetBody().zimObj,E.m_fixtureB.GetBody())}e.physics.world.SetContactListener(j.zimContactListener)}e.contact=function(I){return j.zimContactListener||x(),At.add(e.body,I),e},e.noContact=function(){return At.remove(e.body),e},e.contactEnd=function(I){return j.zimContactListener||x(),Xt.add(e.body,I),e},e.noContactEnd=function(){return Xt.remove(e.body),e},e.hasOwnProperty("dynamic")||Object.defineProperty(e,"dynamic",{get:function(){return e.body.GetType()==2},set:function(I){e.body.SetType(I==!0?2:0)}})}for(t.Timeline=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x){var I="objects, width, startPaused, barColor, buttonColor, themeColor, corner, ticks, damp, loop, noLoop, call, style, group, inherit",w;if(w=at(t.Timeline,arguments,I,this))return w;De("69.971"),this.group=y;var E=k===!1?{}:t.getStyle("Timeline",y,x),A=this.stage?this.stage:zimDefaultFrame.stage,p=A.frame,T=A.width,B=A.height;n(i)&&(i=E.startPaused!=null?E.startPaused:!1),n(C)&&(C=E.loop!=null?E.loop:!0),n(h)&&(h=E.noLoop!=null?E.noLoop:!1),n(l)&&(l=E.barColor!=null?E.barColor:t.tin),n(a)&&(a=E.buttonColor!=null?E.buttonColor:t.light),n(s)&&(s=E.themeColor!=null?E.themeColor:t.purple),n(r)&&(r=E.width!=null?E.width:T*.5),n(u)&&(u=E.ticks!=null?E.ticks:!0),n(v)&&(v=E.damp!=null?E.damp:!1),n(N)&&(N=E.labels!=null?E.labels:!0),n(f)&&(f=E.corner!=null?E.corner:5);var F=50;this.zimContainer_constructor(r,F,null,null,!1),this.type="Timeline";var D=this,P=e,Y=t.toBW(p.color);if(n(P)){if(!t.animatedObjects||!t.animatedObjects.objects)return je("ZIM Timeline - add Timeline after animated objects"),D;P=t.copy(t.animatedObjects.objects)}Array.isArray(P)||(P=[P]);var _=Date.now(),V=0;t.loop(P,function(ve){ve.pauseAnimate(),ve.tweenEndTime&&ve.tweenEndTime>V&&(V=ve.tweenEndTime)});var b=Math.ceil((V-_)/1e3),Z=this.backing=new t.Rectangle(r,F,l,null,null,f).alp(.8).addTo(D),$=Y=="#000000"?0:1,Q=this.shade=new t.Rectangle(F-$,F-$*2,black,null,null,[f,0,0,f]).alp(.7).pos($,$,LEFT,TOP,D),re=this.shade2=new t.Rectangle(F-$,F-$*2,black,null,null,[0,f,f,0]).alp(.7).pos($,$,RIGHT,TOP,D),G=new t.Container(50,50).alp(.9);new t.Rectangle(7,24,white).center(G).mov(-6),new t.Rectangle(7,24,white).center(G).mov(6);var L=D.controls=new t.Button({icon:new t.Triangle(30,30,30,white).reg(null,16).rot(90).alp(.9),toggleIcon:G.reg("center"),downBackgroundColor:t.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(Z,null,70).center(Q).addTo(D).expand(10).tap(function(){K.pauseAnimate(!L.toggled)});i||L.toggle();var c=new t.Container(50,50).reg("center").alp(.8).expand(10);new On(24,5,t.white).center(c).mov(0,-8),new On(24,5,t.white).center(c),new On(24,5,t.white).center(c).mov(0,8);var d=!0,o=D.menu=new t.Button({icon:c,downBackgroundColor:t.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(Z,null,70).center(re).addTo(D).tap(function(){Ie.show(),d&&Ie.loc(D.x,D.y).mov(D.width-Ie.width/2,-Ie.height/2-10)});function S(ve){K.rate=ve,ne.speed=ve,D.trailInterval.time=ke.convert(ne.speed),localStorage&&(localStorage.zim_tl=JSON.stringify(ne))}function X(ve){K.ticks.vis(ve),K.labels.vis(ve),A.update(),ne.labels=ve,localStorage&&(localStorage.zim_tl=JSON.stringify(ne))}function m(ve){C=ve,ne.looping=ve,localStorage&&(localStorage.zim_tl=JSON.stringify(ne))}function O(ve){ue(),ve&&(K.percentComplete=0,setTimeout(function(){U()},50)),ne.trailing=ve,localStorage&&(localStorage.zim_tl=JSON.stringify(ne))}function de(ve){return t.loop([L,o],function(we){we.backgroundColor=ve,we.toggleBackgroundColor=ve,we.rollBackgroundColor=ve.lighten(.2),we.rollToggleBackgroundColor=ve.lighten(.2),we.downBackgroundColor=ve.darken(.2)}),Ie.backing.color=ve,R.slider.bar.color=ve,A.update(),ne.color=ve,localStorage&&(localStorage.zim_tl=JSON.stringify(ne)),this}this.setThemeColor=de;var R=t.List.slider("speed",0,2,1,S,.1),N=t.List.checkBox("labels",!1,X),se=t.List.checkBox("loop",!1,m),ie=t.List.checkBox("trails",!1,O),q=t.List.colorPicker("color",t.purple,new t.ColorPicker({colors:[t.purple,t.pink,t.red,t.orange,t.brown,t.green,t.blue,t.grey,t.black],cols:9}),de),z=this.title=new t.Container(300,25).noMouse();new t.Rectangle(500,70,t.black.toAlpha(.4)).pos(0,-45,CENTER,TOP,z),this.icon=p.makeIcon({edges:"white",box:faint,slats:["white","white","white","white","white"]}).alp(.6).scaleTo(z,null,140).pos(7,-10,"left","center",z),new t.Label({text:"Z  I  M  -  T  I  M  E  L  I  N  E",color:"white"}).alp(.6).sca(.47).loc(51,-4,z),new t.Line(219,1,"white").alp(.6).center(z).mov(8,3);var ce=this.list=new t.List({width:300,height:260,backdropColor:clear,borderWidth:-1,shadowColor:-1,viewNum:6,padding:12,scrollBarV:!1,list:[R,N,se,ie,q],swipe:!1});R.slider.bar.color=t.purple,ce.tabs.mov(0,8);var Ie=D.pane=new t.Pane({width:ce.width,height:ce.height+40,backgroundColor:t.purple,backdropColor:t.faint,draggable:!0,corner:8,content:ce,resets:!1});Ie.contentContainer.mov(0,20),Ie.backing.on("pressmove",function(){d=!1},null,!0),z.scaleTo(Ie.contentContainer,100).pos(0,2,"center","top",Ie.contentContainer).setMask(Ie.backing);var K=D.slider=new t.Slider({min:0,max:b,inside:!0,barColor:l,barWidth:F,barLength:r-F*2-12,tickColor:Y.toAlpha(.8),damp:v,useTicks:!0,tickScale:1,tickStep:.1,semiTicks:4,semiTickScale:1,useLabels:!0,labelColor:Y.toAlpha(.8)}).center(D,1);K.bar.dye(t.faint),K.currentValue=0,K.ticks.mov(0,-20),K.bar.widthOnly=K.bar.width+14,new t.Triangle({color:t.dark}).alp(.3).scaleTo(K.button,70,90,"full").center(K.button),K.animate({props:{currentValue:K.max},time:K.max,ease:"linear",startPaused:i,loop:!0,loopWait:.5,loopWaitCall:function(){C||(K.pauseAnimate(),L.toggle(!1),K.currentValue=K.max),J&&D.trailInterval.pause(),g&&typeof g=="function"&&g()},loopCall:function(){t.loop(P,function(ve){ve.percentComplete=0})}}),K.bar.on("mousedown",function(){K.percentComplete=K.currentValue/K.max*100});var xe=!0;K.button.on("mousedown",function(){xe=K.animating,K.pauseAnimate()}),K.button.on("pressup",function(){xe&&K.pauseAnimate(!1),K.percentComplete=K.currentValue/K.max*100}),D.keyEvent=p.on("keydown",function(ve){ve.key==" "&&(L.toggled?(L.toggle(!1),K.pauseAnimate(!0)):(L.toggle(!0),K.pauseAnimate(!1)))}),D.tickerID=t.Ticker.add(function(){var ve=Math.min(100,D.slider.currentValue/b*100)-.01;t.loop(P,function(we){var ee=_+ve/100*(V-_)-we.tweenStartTime;h&&(we.percentComplete=Math.max(0,Math.min(100,ee/(we.tweenEndTime-we.tweenStartTime)*100))),we.percentComplete=ee/(we.tweenEndTime-we.tweenStartTime)*100})});var J;function fe(){t.loop(P,function(ve){var we=ve.clone().addTo(J).alp(.05);we.color=clear,we.borderColor=Y}),J.updateCache("source-over"),J.disposeAllChildren()}D.trailInterval=t.interval(.05,function(){K.animating&&R.slider.currentValue>0&&fe()}),D.trailInterval.pause();function U(){D.trails||(J=new t.Container(T,B).addTo(A,0).cache(),D.trails=new t.Bitmap(J.cacheCanvas).addTo(A,1),D.trailInterval.pause(!1))}function ue(){D.trails&&(D.trailInterval.pause(),D.trails.dispose(),D.trails=null,J.dispose(),J=null)}var ke=new t.Proportion(.1,2,.1,.01);if(localStorage){var ne=localStorage.zim_tl;ne||(ne=JSON.stringify({speed:1,labels:!1,looping:!1,color:purple})),ne=JSON.parse(ne),S(ne.speed),R.slider.currentValue=ne.speed,R.stepper.currentValue=ne.speed,X(ne.labels),N.checkBox.checked=ne.labels,m(ne.looping),se.checkBox.checked=ne.looping,de(ne.color),q.colorPicker.selectedColor=ne.color,q.swatch.color=ne.color,q.colorLabel.text=ne.color.toUpperCase(),ne.trailing&&U(),ie.checkBox.checked=ne.trailing,D.trailInterval.time=ke.convert(ne.speed)}this.pos(0,20,"center","bottom"),s!=t.purple&&de(s),this.dispose=function(ve,we,ee){return t.Ticker.remove(D.tickerID),p.off("keydown",D.keyEvent),ee||this.zimContainer_dispose(!0),!0},k!==!1&&t.styleTransforms(this,E)},t.extend(t.Timeline,t.Container,"dispose","zimContainer",!1),t.BlurEffect=function(e,r,i,l,a,s){var f="blurX, blurY, quality, style, group, inherit",u;if(u=at(t.BlurEffect,arguments,f,this))return u;De("69.972"),this.group=a;var v=l===!1?{}:t.getStyle("BlurEffect",a,s);n(e)&&(e=v.blurX!=null?v.blurX:10),n(r)&&(r=v.blurY!=null?v.blurY:10),n(i)&&(i=v.quality!=null?v.quality:1);var C=h(e,r,i);this.veeObj={blurX:C[0],blurY:C[1],quality:C[2]};function h(){return arguments}e=et(e),r=et(r),i=et(i),this.createjsBlurFilter_constructor(e,r,i),this.type="BlurEffect",this.clone=function(g){return new t.BlurEffect(g||!t.isPick(C[0])?e:C[0],g||!t.isPick(C[1])?r:C[1],g||!t.isPick(C[2])?i:C[2],l,this.group,s)}},t.extend(t.BlurEffect,Fe.BlurFilter,"clone","createjsBlurFilter",!1),t.GlowEffect=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",y;if(y=at(t.GlowEffect,arguments,k,this))return y;De("69.9725"),this.group=h;var x=C===!1?{}:t.getStyle("GlowEffect",h,g);n(e)&&(e=x.color!=null?x.color:t.white),n(r)&&(r=x.alpha!=null?x.alpha:1),n(i)&&(i=x.blurX!=null?x.blurX:30),n(l)&&(l=x.blurY!=null?x.blurY:30),n(a)&&(a=x.strength!=null?x.strength:1),n(s)&&(s=x.quality!=null?x.quality:1),n(f)&&(f=x.inner!=null?x.inner:!1),n(u)&&(u=x.knockout!=null?x.knockout:!1),n(v)&&(v=x.hideObject!=null?x.hideObject:!1);var I=w(e,r,i,l,a,s,f,u,v);this.veeObj={color:I[0],alpha:I[1],blurX:I[2],blurY:I[3],strength:I[4],quality:I[5],inner:I[6],knockout:I[7],hideObject:I[8]};function w(){return arguments}i=et(i),l=et(l),s=et(s),e=et(e),this.alpha=et(r),this.strength=et(a),this.inner=et(f),this.knockout=et(u),this.hideObject=et(v),this.createjsBlurFilter_constructor(i,l,s),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(E,A,p,T,B,F,D,P){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;F=F||E,D===void 0&&(D=A),P===void 0&&(P=p);var Y=F.getImageData(D,P,T,B),_=Y.data,V=document.createElement("canvas");V.width=T,V.height=B;for(var b=V.getContext("2d",{willReadFrequently:!0}),Z=b.getImageData(0,0,T,B),$=Z.data,Q=this.inner,re=this._red,G=this._green,L=this._blue,c=0,d=$.length;c<d;c+=4){var o=c+3,S=_[o];Q?S!==255&&($[c]=re,$[c+1]=G,$[c+2]=L,$[o]=255-S):S!==0&&($[c]=re,$[c+1]=G,$[c+2]=L,$[o]=S)}b.putImageData(Z,0,0);var X=this.strength;if(0<X){this.createjsBlurFilter_applyFilter(b,0,0,T,B),255<X&&(X=255);for(var m=1;m<X;m++)b.drawImage(V,0,0)}var O=this.alpha;O<0?O=0:1<O&&(O=1);var de;return this.knockout?Q?de="source-in":de="source-out":this.hideObject?Q?de="source-in":de="copy":Q?de="source-atop":de="destination-over",F.save(),F.setTransform(1,0,0,1,0,0),F.globalAlpha=O,F.globalCompositeOperation=de,F.drawImage(V,D,P),F.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(E){E=t.convertColor(E,"hexNumber"),this._red=E>>16&255,this._green=E>>8&255,this._blue=E&255}}),this.color=e,this.clone=function(E){return new t.GlowFilter(E||!t.isPick(I[0])?e:I[0],E||!t.isPick(I[1])?r:I[1],E||!t.isPick(I[2])?i:I[2],E||!t.isPick(I[3])?l:I[3],E||!t.isPick(I[4])?s:I[4],E||!t.isPick(I[5])?a:I[5],E||!t.isPick(I[6])?f:I[6],E||!t.isPick(I[7])?u:I[7],E||!t.isPick(I[8])?u:I[8],C,this.group,g)}},t.extend(t.GlowEffect,Fe.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),t.ShadowEffect=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y){var x="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",I;if(I=at(t.ShadowEffect,arguments,x,this))return I;De("69.973"),this.group=k;var w=g===!1?{}:t.getStyle("ShadowEffect",k,y);n(e)&&(e=w.distance!=null?w.distance:10),n(r)&&(r=w.angle!=null?w.angle:45),n(i)&&(i=w.color!=null?w.color:t.black),n(l)&&(l=w.alpha!=null?w.alpha:.4),n(a)&&(a=w.blurX!=null?w.blurX:15),n(s)&&(s=w.blurY!=null?w.blurY:15),n(f)&&(f=w.strength!=null?w.strength:1),n(u)&&(u=w.quality!=null?w.quality:1),n(v)&&(v=w.inner!=null?w.inner:!1),n(C)&&(C=w.knockout!=null?w.knockout:!1),n(h)&&(h=w.hideObject!=null?w.hideObject:!1);var E=A(e,r,i,l,a,s,f,u,v,C,h);this.veeObj={distance:E[0],angle:E[1],color:E[2],alpha:E[3],blurX:E[4],blurY:E[5],strength:E[6],quality:E[7],inner:E[8],knockout:E[9],hideObject:E[10]};function A(){return arguments}a=et(a),s=et(s),u=et(u),i=et(i),e=et(e),r=et(r);var p=this;this.alpha=et(l),this.strength=et(f),this.inner=et(v),this.knockout=et(C),this.hideObject=et(h),this.createjsBlurFilter_constructor(a,s,u),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return r},set:function(B){r=B=(B%360+360)%360,T(e,B)}}),this.angle=r,Object.defineProperty(this,"distance",{get:function(){return e},set:function(B){e=B,T(B,r)}}),this.distance=e;function T(B,F){var D=F*t.RAD;p._offsetX=Math.cos(D)*B,p._offsetY=Math.sin(D)*B}Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(B){B=t.convertColor(B,"hexNumber"),this._red=B>>16&255,this._green=B>>8&255,this._blue=B&255}}),this.color=i,this.applyFilter=function(B,F,D,P,Y,_,V,b){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;_=_||B,V===void 0&&(V=F),b===void 0&&(b=D);var Z=_.getImageData(V,b,P,Y),$=Z.data,Q=document.createElement("canvas");Q.width=P,Q.height=Y;for(var re=Q.getContext("2d",{willReadFrequently:!0}),G=re.getImageData(0,0,P,Y),L=G.data,c=this.inner,d=this._red,o=this._green,S=this._blue,X=0,m=L.length;X<m;X+=4){var O=X+3,de=$[O];c?de!==255&&(L[X]=d,L[X+1]=o,L[X+2]=S,L[O]=255-de):de!==0&&(L[X]=d,L[X+1]=o,L[X+2]=S,L[O]=de)}re.putImageData(G,0,0);var R=this.strength;if(0<R){this.createjsBlurFilter_applyFilter(re,0,0,P,Y),255<R&&(R=255);for(var N=1;N<R;N++)re.drawImage(Q,0,0)}var se=this.alpha;se<0?se=0:1<se&&(se=1);var ie;return this.knockout?c?ie="source-in":ie="source-out":this.hideObject?c?ie="source-in":ie="copy":c?ie="source-atop":ie="destination-over",_.save(),_.setTransform(1,0,0,1,0,0),_.globalAlpha=se,_.globalCompositeOperation=ie,_.drawImage(Q,V+this._offsetX,b+this._offsetY),_.restore(),!0},this.getBounds=function(B){var F=this.createjsBlurFilter_getBounds(B),D=this._offsetX,P=this._offsetY;return D!==0&&(D<0?(F.x+=D,F.width+=-D):F.width+=D),P!==0&&(P<0?(F.y+=P,F.height+=-P):F.height+=P),F},this.clone=function(B){return new t.ShadowFilter(B||!t.isPick(E[0])?e:E[0],B||!t.isPick(E[1])?r:E[1],B||!t.isPick(E[2])?i:E[2],B||!t.isPick(E[3])?l:E[3],B||!t.isPick(E[4])?a:E[4],B||!t.isPick(E[5])?s:E[5],B||!t.isPick(E[6])?u:E[6],B||!t.isPick(E[7])?f:E[7],B||!t.isPick(E[8])?v:E[8],B||!t.isPick(E[9])?C:E[9],B||!t.isPick(E[10])?h:E[10],g,this.group,y)}},t.extend(t.ShadowEffect,Fe.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),t.ColorEffect=function(e,r,i,l,a,s,f,u,v,C,h){var g="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",k;if(k=at(t.ColorEffect,arguments,g,this))return k;De("69.9735"),this.group=C;var y=v===!1?{}:t.getStyle("ColorEffect",C,h);n(e)&&(e=y.redMultiplier!=null?y.redMultiplier:1),n(r)&&(r=y.greenMultiplier!=null?y.greenMultiplier:1),n(i)&&(i=y.blueMultiplier!=null?y.blueMultiplier:1),n(l)&&(l=y.alphaMultiplier!=null?y.alphaMultiplier:1),n(a)&&(a=y.redOffset!=null?y.redOffset:0),n(s)&&(s=y.greenOffset!=null?y.greenOffset:0),n(f)&&(f=y.blueOffset!=null?y.blueOffset:0),n(u)&&(u=y.alphaOffset!=null?y.alphaOffset:0);var x=I(e,r,i,l,a,s,f,u);this.veeObj={redMultiplier:x[0],greenMultiplier:x[1],blueMultiplier:x[2],alphaMultiplier:x[3],redOffset:x[4],greenOffset:x[5],blueOffset:x[6],alphaOffset:x[7]};function I(){return arguments}e=et(e),r=et(r),i=et(i),l=et(l),a=et(a),s=et(s),f=et(f),u=et(u),this.createjsColorFilter_constructor(e,r,i,l,a,s,f,u),this.type="ColorEffect",this.clone=function(w){return new t.ColorEffect(e,r,i,l,a,s,f,u,w||!t.isPick(x[0])?e:x[0],w||!t.isPick(x[1])?r:x[1],w||!t.isPick(x[2])?i:x[2],w||!t.isPick(x[2])?l:x[3],w||!t.isPick(x[2])?a:x[4],w||!t.isPick(x[2])?s:x[5],w||!t.isPick(x[2])?f:x[6],w||!t.isPick(x[2])?u:x[7],v,this.group,h)}},t.extend(t.ColorEffect,Fe.ColorFilter,"clone","createjsColorFilter",!1),t.MultiEffect=function(e,r,i,l,a,s,f){var u="hue, saturation, brightness, contrast, style, group, inherit",v;if(v=at(t.MultiEffect,arguments,u,this))return v;De("69.974"),this.group=s;var C=a===!1?{}:t.getStyle("MultiEffect",s,f);n(e)&&(e=C.hue!=null?C.hue:0),n(r)&&(r=C.saturation!=null?C.saturation:0),n(i)&&(i=C.brightness!=null?C.brightness:0),n(l)&&(l=C.contrast!=null?C.contrast:0);var h=g(e,r,i,l);this.veeObj={hue:h[0],saturation:h[1],brightness:h[2],contrast:h[3]};function g(){return arguments}e=et(e),this.createjsColorMatrixFilter_constructor(new Fe.ColorMatrix().adjustColor(i,l,r,e)),this.type="MultiEffect",this.adjustColor=function(k,y,x,I){n(e)||(e=et(k)),n(r)||(r=et(y)),n(i)||(i=et(x)),n(l)||(l=et(I)),this.matrix.reset().adjustColor(k,y,x,I)},Object.defineProperty(this,"brightness",{get:function(){return i},set:function(k){i=et(k),this.matrix.reset().adjustColor(i,l,r,e)}}),Object.defineProperty(this,"contrast",{get:function(){return l},set:function(k){l=et(k),this.matrix.reset().adjustColor(i,l,r,e)}}),Object.defineProperty(this,"saturation",{get:function(){return r},set:function(k){r=et(k),this.matrix.reset().adjustColor(i,l,r,e)}}),Object.defineProperty(this,"hue",{get:function(){return e},set:function(k){e=et(k),this.matrix=new Fe.ColorMatrix().adjustColor(i,l,r,e),this.applyFilter()}}),this.clone=function(k){return new t.MultiEffect(k||!t.isPick(h[0])?e:h[0],k||!t.isPick(h[0])?r:h[0],k||!t.isPick(h[0])?i:h[0],k||!t.isPick(h[0])?l:h[0],a,this.group,f)}},t.extend(t.MultiEffect,Fe.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),t.AlphaEffect=function(e,r,i,l){var a="mask, style, group, inherit",s;if(s=at(t.AlphaEffect,arguments,a,this))return s;De("69.9745"),this.group=i;var f=r===!1?{}:t.getStyle("AlphaEffect",i,l);n(e)&&(e=f.mask!=null?f.mask:null);var u=v(e);this.veeObj={mask:u[0]};function v(){return arguments}e=et(e),e.type=="Bitmap"?e=e.image:e.cache&&(e=e.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(e),this.type="AlphaEffect",this.clone=function(C){return new t.AlphaEffect(C||!t.isPick(u[0])?e:u[0],r,this.group,l)}},t.extend(t.AlphaEffect,Fe.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),t.Pixel=function(e,r,i,l,a,s,f,u,v,C,h,g,k){var y="obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",x;if(x=at(t.Pixel,arguments,y,this))return x;De("69.9747"),this.group=g;var I=h===!1?{}:t.getStyle("Pixel",g,k);n(e)&&(e=I.obj!=null?I.obj:null),n(r)&&(r=I.amount!=null?I.amount:.5),n(i)&&(i=I.amountY!=null?I.amountY:null);var w=!1;i==null&&(w=!0,i=r),n(l)&&(l=I.blur!=null?I.blur:0),n(a)&&(a=I.dynamic!=null?I.dynamic:!1),n(s)&&(s=I.blendmode!=null?I.blendmode:null),n(f)&&(f=I.boundary!=null?I.boundary:new t.Boundary(e.getBounds())),n(u)&&(u=I.expand!=null?I.expand:0),n(v)&&(v=I.amountFactor!=null?I.amountFactor:.6),n(C)&&(C=I.blurFactor!=null?I.blurFactor:.6);var E=A(e,r,i,l,s,v,C);this.veeObj={obj:E[0],amount:E[1],amountY:E[2],blur:E[3],blendmode:E[4],amountFactor:E[5],blurFactor:E[6]};function A(){return arguments}e=et(e),r=et(r),i=et(i),l=et(l),s=et(s),v=et(v),C=et(C),u&&(Array.isArray(u)?u.length==1?f.contract(-u):u.length==2?f.contract(-u[0],-u[1]):f.contract(-u[0],-u[1],-u[2],-u[3]):f.contract(-u));var p=t.constrain(v*10,0,10),T=t.constrain(C*10,0,10),B=this,F=Math.pow(Math.E,-r*p),D=Math.pow(Math.E,-i*p),P=Math.pow(Math.E,-l*T);n(e)&&(e=new t.Tile(new t.Circle(20,[t.green,t.blue,t.yellow,t.pink,t.purple]),5,5,5,5));var Y=document.createElement("canvas"),_=Y.getContext("2d"),V=document.createElement("canvas"),b=V.getContext("2d"),Z=P;this.update=function(){!e.cacheCanvas||P!=Z?(e.cache(f.x,f.y,f.width,f.height,P),Z=P):e.updateCache(s);var $=e.width,Q=e.height,re=e.width*F,G=e.height*D;Y.width=$,Y.height=Q,V.width=$,V.height=Q,b.msImageSmoothingEnabled=!1,b.mozImageSmoothingEnabled=!1,b.webkitImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1,_.drawImage(e.cacheCanvas,0,0,re,G),b.drawImage(Y,0,0,re,G,-u*e.scale,-u*e.scale,V.width+u*2*e.scaleX,V.height+u*2*e.scaleY)},this.update(),this.zimBitmap_constructor(V),a&&(this.dynamicTicker=t.Ticker.add(function(){B.update()})),Object.defineProperty(this,"amount",{get:function(){return r},set:function($){r=$,F=Math.pow(Math.E,-r*p),w&&(D=Math.pow(Math.E,-r*p),i=r),B.update()}}),Object.defineProperty(this,"amountX",{get:function(){return r},set:function($){r=$,w=!1,F=Math.pow(Math.E,-r*p),B.update()}}),Object.defineProperty(this,"amountY",{get:function(){return i},set:function($){i=$,w=!1,D=Math.pow(Math.E,-i*p),B.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return v},set:function($){v=$,p=t.constrain(v*10,0,10),F=Math.pow(Math.E,-r*p),D=Math.pow(Math.E,-i*p),B.update()}}),Object.defineProperty(this,"blur",{get:function(){return l},set:function($){l=$,P=Math.pow(Math.E,-l*T),B.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return C},set:function($){C=$,T=t.constrain(C*10,0,10),P=Math.pow(Math.E,-l*T),B.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return a},set:function($){a!=$&&(a=$,a?B.dynamicTicker?B.dynamicTicker=t.Ticker.add(B.dynamicTicker):B.dynamicTicker=t.Ticker.add(B.update):B.dynamicTicker&&t.Ticker.remove(B.dynamicTicker))}}),this.dispose=function(){B.dynamicTicker&&t.Ticker.remove(B.dynamicTicker),this.zimBitmap_dispose()},h!==!1&&t.styleTransforms(this,I),this.clone=function($){return B.cloneProps(new t.Pixel($||!t.isPick(E[0])?e:E[0],$||!t.isPick(E[1])?r:E[1],$||!t.isPick(E[2])?i:E[2],$||!t.isPick(E[3])?l:E[3],a,$||!t.isPick(E[4])?s:E[4],f,u,$||!t.isPick(E[5])?v:E[5],$||!t.isPick(E[6])?C:E[6],h,this.group,k))}},t.extend(t.Pixel,t.Bitmap,["clone","dispose"],"zimBitmap",!1),t.Parallax=function(e,r,i,l,a,s,f){var u="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",v;if(v=at(t.Parallax,arguments,u,this))return v;if(De("68"),this.type="Parallax",n(l))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)l=e[0].obj.stage;else if(j.zdf)l=j.zdf.stage;else return;n(i)?i=!0:i=!1,n(a)&&(a=!1),n(s)&&(s=!1);var C=l.getBounds().width,h=l.getBounds().height;l.mouseMoveOutside=s;var g=this;g.stageEvent=l.on("stagemousemove",function(E){g.mouseX=E.rawX/t.scaX,g.mouseY=E.rawY/t.scaY});var k=n(r)?.1:r;this.addLayer=function(E){if(!(n(E.obj)||n(E.prop)||n(E.propChange))){var A={obj:E.obj,prop:E.prop};A[A.prop]=E.propChange,n(E.input)&&(E.input="mouseX"),A.input=E.input,A.split=n(E.split)?!!(E.input=="mouseX"&&i):E.split;var p=n(E.inMin)?0:E.inMin,T=n(E.inMax)?E.input=="mouseX"||E.input=="scrollX"?C:h:E.inMax,B=n(E.factor)?1:E.factor,F=n(E.integer)?!1:E.integer;return A["p_"+A.prop]=new t.ProportionDamp(p,T,0,A[A.prop],k,B,F,f),A.prop=="scale"?A["s_"+A.prop]=A.obj.scaleX:A.prop=="frame"?A["s_"+A.prop]=A.obj.currentFrame:A["s_"+A.prop]=A.obj[A.prop],n(E.immediate)||A["p_"+A.prop].immediate(E.immediate),y.push(A),g}},this.removeLayer=function(E){if(!n(E)){var A=y[E];return A["p_"+A.prop].dispose(),y.splice(E,1),g}},this.immediate=function(E){for(var A,p=0;p<y.length;p++)A=y[p],A["p_"+A.prop].immediate(E[p]);return g},this.dispose=function(){return l.off("stagemousemove",g.stageEvent),y=null,i&&t.Ticker.remove(I),!0},e=n(e)?[]:e;for(var y=[],x=0;x<e.length;x++)this.addLayer(e[x]);if(i){var I=t.Ticker.add(w,l);a&&t.Ticker.remove(I)}function w(){g.step()}this.step=function(E){for(var A,p,T=0;T<y.length;T++)A=y[T],n(E)?A.input=="mouseX"?p=g.mouseX:A.input=="mouseY"?p=g.mouseY:A.input=="scrollX"?p=t.scrollX():A.input=="scrollY"&&(p=t.scrollY()):p=E,A.prop=="scale"?A.obj.scaleX=A.obj.scaleY=A["s_"+A.prop]+A["p_"+A.prop].convert(p):A.prop=="frame"?A.obj.gotoAndStop(A["s_"+A.prop]+A["p_"+A.prop].convert(p)):(A.obj[A.prop]=A["s_"+A.prop]+A["p_"+A.prop].convert(p),A.split&&(A.obj[A.prop]-=A[A.prop]/2));return g},g.paused=a,g.pause=function(E){return n(E)&&(E=!0),g.paused!=E&&(g.paused=E,I&&(E?t.Ticker.remove(I):I=t.Ticker.add(I))),g},Object.defineProperty(g,"damp",{get:function(){return k},set:function(E){k=E;for(var A,p=0;p<y.length;p++)A=y[p],A["p_"+A.prop].damp=k}})},t.Flipper=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y){var x="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",I;if(I=at(t.Flipper,arguments,x,this))return I;De("68.5"),this.group=k;var w=g===!1?{}:t.getStyle("Flipper",this.group,y);if(n(e)&&(e=w.front!=null?w.front:j.zdf.makeIcon().sca(2)),n(r)&&(r=w.back!=null?w.back:new t.Page(e.width,e.height,t.dark)),this.front=e,this.back=r,s){var E=e;e=r,r=E}var A=Math.max(e.width,r.width),p=Math.max(e.height,r.height);this.zimContainer_constructor(A,p),this.type="Flipper",n(l)&&(l=w.time!=null?w.time:.2),n(a)&&(a=w.vertical!=null?w.vertical:!1),n(i)&&(i=w.interactive!=null?w.interactive:!1),n(s)&&(s=w.flipped!=null?w.flipped:!1),n(f)&&(f=w.easeRoot!=null?w.easeRoot:"quad"),n(u)&&(u=w.frontPress!=null?w.frontPress:!0),n(v)&&(v=w.backPress!=null?w.backPress:!0),n(C)&&(C=w.reverse!=null?w.reverse:!1),n(h)&&(h=w.continuous!=null?w.continuous:!1);var T=s;this.flipped=s;var B=this;e.centerReg(this);var F;(u&&!s||v&&s)&&(F=i&&e.backing?e.backing:e,F.on("mousedown",function(){D(e,r)}),F.cur()),(v&&!s||u&&s)&&(F=i&&r.backing?r.backing:r,F.on("mousedown",function(){D(r,e,-1)}),F.cur()),e.oScale=e.scale,r.oScale=r.scale,e.flipper=B,e.other=r,r.flipper=B,r.other=e,i||(e.mouseChildren=r.mouseChildren=!1),this.flip=function(P,Y){P!=B.flipped&&(B.flipped?D(T?e:r,T?r:e,-1,Y):D(T?r:e,T?e:r,1,Y))};function D(P,Y,_,V){if(n(_)&&(_=1),_*=C?-1:1,h&&(_=C?T?1:-1:T?-1:1),n(V)&&(V=l),B.flipped=!B.flipped,B.dispatchEvent("flip"),V==0){B.removeAllChildren(),Y.scale=Y.oScale,Y.skewX=Y.skewY=0,Y.centerReg(B),B.dispatchEvent("flipped");return}var b,Z;a?(b={skewX:-90*_,scaleY:P.oScale/2},Z={skewX:0,scaleY:Y.oScale},Y.ske(90*_,0).sca(Y.oScale,Y.oScale/2)):(b={skewY:-90*_,scaleX:P.oScale/2},Z={skewY:0,scaleX:Y.oScale},Y.ske(0,90*_).sca(Y.oScale/2,Y.oScale)),P.animate({props:b,time:l,ease:f+"In",call:function(){P.removeFrom(),Y.centerReg(B).animate({props:Z,time:l,ease:f+"Out",call:function(){B.dispatchEvent("flipped")}})}})}g!==!1&&t.styleTransforms(this,w),this.clone=function(){return B.cloneProps(new t.Flipper(e.clone(),r.clone(),i,l,a,s,f,u,v,C,h,g,this.group,y))}},t.extend(t.Flipper,t.Container,"clone","zimContainer"),t.Book=function(e,r,i,l,a,s,f,u){var v="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",C;if(C=at(t.Book,arguments,v,this))return C;De("68.7"),n(e)&&(e=j.zdf?j.zdf.stage.width:1024),n(r)&&(r=j.zdf?j.zdf.stage.height:768),this.zimContainer_constructor(e,r),this.type="Book",n(i)&&(i=[]),n(l)&&(l=0),n(a)&&(a=!0),n(f)&&(f=t.darker),n(u)&&(u=!0);var h=mt(),g=this;if(i.length==0)return;g.backing=new t.Rectangle(e-2,r-2,f),t.loop(i,function(B,F){typeof B=="string"&&(i[F]=t.asset(B)),i[F].zimBookIndex=F,w(B)}),g.added(I);var k,y,x;function I(B){k=B,y=k.frame;var F=new t.Shape,D,P,Y,_,V,b,Z;g._currentPage=l;function $(S){if(g._currentPage=S,g.removeAllChildren(),g.backing.loc(1,1,g),g.setMask(g.backing),F.addTo(g),F.c().f(t.black).dr(0,0,0,0),g.moving=!1,i[S-1]?D=i[S-1].reg(0,0).rot(0).loc(0,0,g):S>0&&Z.reg(0,0).rot(0).loc(0,0,g).setMask(null),i[S-2]?P=i[S-2].reg(e/2,r).loc(0,r,g).rot(-90):P=new t.Rectangle(e/2,r,f).reg(e/2,r).loc(0,r,g).rot(-90),i[S-3]?Y=i[S-3].rot(0).loc(0,0,g).setMask(F):Y=new t.Rectangle(e/2,r,f).loc(0,0,g).setMask(F),i[S])_=i[S].rot(0).reg(0,0).pos(0,0,t.RIGHT,t.TOP,g);else{k.update();return}i[S+1]?V=i[S+1].reg(0,r).loc(e,r,g).rot(90):(V=new t.Rectangle(e/2,r,f).reg(0,r).loc(e,r,g).rot(90),Z=V),i[S+2]?b=i[S+2].rot(0).pos(0,0,t.RIGHT,t.TOP,g).setMask(F):b=new t.Rectangle(e/2,r,f).pos(0,0,t.RIGHT,t.TOP,g).setMask(F),k.update()}$(l),Object.defineProperty(g,"directPage",{get:function(){return g._currentPage},set:function(S){T(),l%2==1?S=Math.ceil(S/2)*2-1:S=Math.ceil(S/2)*2,S!=g.page&&(S>g.page?(V.reg(0,0),b.setMask(null)):(P.reg(0,0),Y.setMask(null)),$(S),g.moving=!1,Q=!1,g.currentW=0,g.currentH=0,p())}});var Q=!1;g.currentW=0,g.currentH=0,g.moving=!1;function re(){g.stageEvent=k.on("stagemousedown",function(){var S,X;if(!g.moving){var m=g.globalToLocal(y.mouseX,y.mouseY);if(!(m.x<0||m.x>e||m.y<0||m.y>r)&&!(s>0&&t.dist(m,new t.Point(0,r))>s&&t.dist(m,new t.Point(e,r))>s)){var O=m.x>e/2?"right":"left";O=="right"&&g._currentPage>=i.length-1||O=="left"&&g._currentPage<=1||(g.moving=!0,O=="right"?(_.addTo(g),V.addTo(g),b.addTo(g),g.pageNext=b.zimBookIndex):(D.addTo(g),P.addTo(g),Y.addTo(g),g.rolledUp&&c(0,0,"right"),g.pageNext=P.zimBookIndex),T(),g.direction=O,g.dispatchEvent("rollpress"),g.moveEvent=k.on("stagemousemove",function(){G&&(G.clear(),G=null);var de=g.globalToLocal(y.mouseX,y.mouseY);O=="right"?S=e-de.x:S=de.x,X=r-de.y+S,g.currentW=S=t.constrain(S,0,e/2),g.currentH=X=t.constrain(X,0,r),c(S,X,O)}),g.upEvent=k.on("stagemouseup",function(){k.off("stagemousemove",g.moveEvent),!Q&&L(S,X,O)},null,!0))}}})}if(re(),g.rollUp=function(S,X,m,O,de){if(!g.moving&&!(m=="right"&&g._currentPage>=i.length-1)&&!(m=="left"&&g._currentPage<=1)){m=="right"?(_.addTo(g),V.addTo(g),b.addTo(g)):(g.rolledUp&&c(0,0,"right"),D.addTo(g),P.addTo(g),Y.addTo(g)),g.moving=!0,n(O)&&(O=h=="s"?.5:.5/1e3),n(de)&&(de=null),g.animate({props:{currentW:S,currentH:X},time:O,ease:de,call:function(){t.Ticker.remove(R),g.moving=!1,c(S,X,m)}});var R=t.Ticker.add(function(){c(g.currentW,g.currentH,m)})}},a!==!1){g.rolledUp=!0,a===!0&&(a=h=="s"?1:1/1e3);var G=t.timeout(a,function(){g.rollUp(60,130,"right",.5),g.dispatchEvent("rollup")})}g.rollDown=function(S,X,m,O){g.moving||m=="right"&&g._currentPage>=i.length-1||m=="left"&&g._currentPage<=1||L(S,X,m,O)};function L(S,X,m,O){g.moving=!0,g.rolledUp=!1,n(O)&&(O=h=="s"?.7:.7/1e3),g.animate({props:{currentW:0,currentH:0},time:O,call:function(){t.Ticker.remove(de),c(0,0,m),g.moving=!1,p(),g.dispatchEvent("rolldown")}});var de=t.Ticker.add(function(){c(g.currentW,g.currentH,m)})}function c(S,X,m){var O;m=="right"?(F.c().mt(e,r).lt(e-S,r).lt(e,r-X).cp(),O=Math.atan2(S,X),V.loc(e-(S+S*Math.cos(2*O)),r-S*Math.sin(2*O)).rot(O*2*t.DEG),!Q&&S>=e/2&&X>=r&&d()):(F.c().mt(0,r).lt(S,r).lt(0,r-X).cp(),O=Math.atan2(S,X),P.loc(S+S*Math.cos(2*O),r-S*Math.sin(2*O)).rot(-O*2*t.DEG),!Q&&S>=e/2&&X>=r&&o()),k.update()}function d(){T(),Q=!0,g.moving=!0,g.moveEvent&&k.off("stagemousemove",g.moveEvent),g.upEvent&&k.off("stagemouseup",g.upEvent),g.currentW=0,g.currentH=0,g.lastPage=t.constrain(g._currentPage),g.direction="right",g.pageNext=b.zimBookIndex,g.dispatchEvent("pageanimate"),g.animate({ease:"quadOut",props:{currentW:e/2},time:.3,timeUnit:"s",call:function(){t.Ticker.remove(S),V.reg(0,0),b.setMask(null),$(g._currentPage+2),g.moving=!1,Q=!1,g.currentW=0,g.currentH=0,p(),g.dispatchEvent("page")}});var S=t.Ticker.add(function(){F.c().mt(e,r).lt(e/2,r).lt(e-g.currentW,0).lt(e,0).cp()});V.reg(e/2,r).loc(e/2,r,g).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function o(){T(),Q=!0,g.moving=!0,g.moveEvent&&k.off("stagemousemove",g.moveEvent),g.upEvent&&k.off("stagemouseup",g.upEvent),g.currentW=0,g.currentH=0,g.lastPage=t.constrain(g._currentPage),g.direction="left",g.pageNext=P.zimBookIndex,g.dispatchEvent("pageanimate"),g.animate({ease:"quadOut",props:{currentW:e/2},time:.3,timeUnit:"s",call:function(){t.Ticker.remove(S),P.reg(0,0),Y.setMask(null),$(g._currentPage-2),g.moving=!1,Q=!1,g.currentW=0,g.currentH=0,p(),g.dispatchEvent("page")}});var S=t.Ticker.add(function(){F.c().mt(0,r).lt(e/2,r).lt(g.currentW,0).lt(0,0).cp()});P.reg(0,r).loc(e/2,r,g).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}u&&(u===!0&&(u=.2),g.keydown=y.on("keydown",function(S){S.keyCode==39?g.nextPage(u):S.keyCode==37&&g.prevPage(u)})),g.changeFrame=function(S){return g.stageEvent&&k.off("stagemousedown",g.stageEvent),g.moveEvent&&k.off("stagemousemove",g.moveEvent),g.upEvent&&k.off("stagemouseup",g.upEvent),y=S,k=S.stage,re(),g},p()}g.nextPage=function(B){if(n(g.rollUp))return setTimeout(function(){g.nextPage(B)},10),g;g.moving||g.rollUp(e/2+.1,r+.1,"right",B,"quadIn")},g.prevPage=function(B){if(n(g.rollUp))return setTimeout(function(){g.prevPage(B)},10),g;g.moving||g.rollUp(e/2+.1,r+.1,"left",B,"quadIn")},g.gotoPage=function(B,F){if(n(g.rollUp))return setTimeout(function(){g.gotoPage(B,F)},10),g;B=t.constrain(B,0,g.pages.length-1),n(F)&&(F=h=="s"?.3:300);var D=F+(h=="s"?.35:350);g.pageInterval=t.interval(D,function(P){var Y=!1;g._currentPage<B?g.nextPage(F):g._currentPage>B?g.prevPage(F):Y=!0,g.dispatchEvent("pageturn"),P.count==P.total-1&&(Y?(p(),g.dispatchEvent("pagedone")):t.timeout(D,function(){p(),g.dispatchEvent("pagedone")}))},Math.floor(Math.abs(B-g._currentPage)/2+1),!0)};function w(B){B.addChild&&(B.zimHTMLList=new t.Dictionary,A(B),B.parent&&B.parent.removeChild(data.page))}function E(B){if(!(n(B)||!B.addChild))for(B.removedHTML=!1,x=0;x<B.zimHTMLList.length;x++)B.addChildAt(B.zimHTMLList.values[x].obj,B.zimHTMLList.values[x].depth)}function A(B){if(!(B.removedHTML||!B.addChild)){B.removedHTML=!0,B.zimHTMLList.clear();var F,D;for(D=0;D<B.numChildren;D++)if(F=B.getChildAt(D),F.type=="TextArea"||F.type=="Loader"||F.type=="Tag"){var P={obj:F,depth:B.getChildIndex(F)};B.zimHTMLList.add(F,P)}for(D=B.numChildren-1;D>=0;D--)F=B.getChildAt(D),(F.type=="TextArea"||F.type=="Loader"||F.type=="Tag")&&B.removeChild(F)}}function p(){g.pages[g.page]&&E(g.pages[g.page]),g.pages[g.page-1]&&E(g.pages[g.page-1])}function T(){g.pages[g.page]&&A(g.pages[g.page]),g.pages[g.page-1]&&A(g.pages[g.page-1])}Object.defineProperty(g,"page",{get:function(){return g._currentPage},set:function(B){g.gotoPage(B,h=="s"?.1:100)}}),Object.defineProperty(g,"pages",{get:function(){return i},set:function(){ht&&je("Book() - pages is read only")}}),this.dispose=function(B,F,D){return g.stageEvent&&k.off("stagemousedown",g.stageEvent),g.moveEvent&&k.off("stagemousemove",g.moveEvent),g.upEvent&&k.off("stagemouseup",g.upEvent),g.keydown&&y.off("keydown",g.keydown),g.removeFrom(),D||this.zimContainer_dispose(!0),!0}},t.extend(t.Book,t.Container,["clone","dispose"],"zimContainer"),t.Scrambler=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y){var x="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",I;if(I=at(t.Scrambler,arguments,x,this))return I;De("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=k;var w=g===!1?{}:t.getStyle(this.type,this.group,y);n(e)&&(e=w.tile!=null?w.tile:e),n(r)&&(r=w.keys!=null?w.keys:null),n(i)&&(i=w.keyProperty!=null?w.keyProperty:null),n(l)&&(l=w.scramble!=null?w.scramble:!0),n(a)&&(a=w.time!=null?w.time:0),n(s)&&(s=w.wait!=null?w.wait:0),n(f)&&(f=w.num!=null?w.num:1),n(u)&&(u=w.shadowColor!=null?w.shadowColor:"rgba(0,0,0,.3)"),n(v)&&(v=w.shadowBlur!=null?w.shadowBlur:5),n(C)&&(C=w.swap!=null?w.swap:!1),n(h)&&(h=w.swapLock!=null?w.swapLock:!1),h&&(C=!0),n(e)&&(e=new t.Tile(new t.Rectangle(100,100,t.series(t.silver,t.tin,t.grey,t.dark,t.darker)),5,1,5)),e.addTo(this);var E=this;E.complete=!0;var A=mt(a);mt(s);var p=(e.width+e.spacingH)/e.cols,T=(e.height+e.spacingV)/e.rows,B=j.zdf,F=t.makeID(null,10),D,P,Y,_=!1;e.pointers={},e.on("mousedown",function(L){if(_)return;_=!0,b(L.target),E.myDownCheck=!0,Y=L.target;var c="id"+Math.abs(L.pointerID+1);if(e.pointers[c]=!0,D=L.target.x,P=L.target.y,h){var d=e.current;if(E.testItem(L.target,d.indexOf(L.target))){L.target.noMouse(),L.target.noDrag(),L.target.locked=!0,E.myDownCheck=_=!1,Z();return}}if(u!=-1&&v>0){var o=new Fe.Shadow(u,3,3,v);L.target.backing?L.target.backing.shadow=o:L.target.shadow=o}B&&(E.scrmu||(E.scrmu=B.on("mouseupplusonly",function(m){if(E.myDownCheck){E.myDownCheck=!1;var O=t.loop(e.pointers,function(de,R){return R});O||(e.pointers.id0=!0),m={target:Y,pointerID:m.pointerID?O:-1},S(m)}}))),E.upEvent&&e.off("pressup",E.upEvent),E.upEvent=e.on("pressup",function(m){var O="id"+Math.abs(m.pointerID+1);e.pointers[O]&&(E.myDownCheck=_=!1,S(m))});function S(m){var O="id"+Math.abs(m.pointerID+1);if(e.pointers[O]){delete e.pointers[O];var de=!0;if(Z(),_=!1,E.moveEvent&&e.off("pressmove",E.moveEvent),h){var R=m.target.boundsToGlobal(),N=e.hitTestGrid(e.width,e.height,e.cols,e.rows,R.x+R.width/2,R.y+R.height/2,null,null,e.spacingH,e.spacingV,null,"open");if(n(N))de=!1;else{var se=d[N[0]];m.target==se?de=!1:de=!E.testItem(se,N[0])}}C&&de&&V(m),m.target.mouseEnabled=!1,m.target.animate({props:{x:D,y:P},time:.1,id:F,timeUnit:"seconds",pauseOnBlur:!1,call:X,params:m})}}function X(m){!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete")),u!=-1&&v>0&&(m.target.backing?m.target.backing.shadow=null:m.target.shadow=null),m.target.mouseEnabled=!0}C||(E.moveEvent&&e.off("pressmove",E.moveEvent),E.moveEvent=e.on("pressmove",function(m){V(m)}))});function V(L){var c=L.target;c.stopAnimate();var d=c.boundsToGlobal(),o=e.hitTestGrid(e.width,e.height,e.cols,e.rows,d.x+d.width/2,d.y+d.height/2,null,null,e.spacingH,e.spacingV,null,"open");n(o)||t.loop(e,function(S){if(!(S==c||S.paused===!1)){var X=S.boundsToGlobal(),m=e.hitTestGrid(e.width,e.height,e.cols,e.rows,X.x+X.width/2,X.y+X.height/2,null,null,e.spacingH,e.spacingV,null,"open");if(!n(m)){var O;o[2]==m[2]&&(S.x>=c.x&&S.x<=c.x+p/2||S.x<=c.x&&S.x>=c.x-p/2)&&(O=S.x,S.top().ord(-1),S.animate({props:{x:D},time:.2,id:F,timeUnit:"seconds",call:function(){C&&!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete"))}}),D=O),o[1]==m[1]&&(S.y>=c.y&&S.y<=c.y+T/2||S.y<=c.y&&S.y>=c.y-T/2)&&(O=S.y,S.top().ord(-1),S.animate({props:{y:P},time:.201,override:!1,id:F,timeUnit:"seconds",call:function(){C&&!E.complete&&E.test()&&(E.complete=!0,E.dispatchEvent("complete"))}}),P=O)}}},!0)}function b(L){e.loop(function(c){c!=L&&c.noMouse()})}function Z(){e.loop(function(L){L.locked||L.mouse()})}this.test=function(){var L=e.current;return t.loop(L,function(c,d){if(n(c)||!E.testItem(c,d))return!1})},this.testItem=function(L,c){if(!n(L)){if(n(c)&&(c=e.current.indexOf(L)),r){var d=n(i)?L.key:L[i];if(d!=r[c])return!1}else if(e.items[c]!=L)return!1;return!0}},this.starts=[];var $=[];t.loop(e.rows*e.cols,function(L){$.push(L)});var Q=$.slice();e.loop(function(L){L.mouseChildren=!1,E.starts.push({x:L.x,y:L.y})}),this.inactive=!1,this.scramble=function(L,c,d){n(c)&&(c=0),n(L)&&(L=0),(n(d)||L==0)&&(d=1),re(),t.timeout(c,function(){L>0?t.interval(L/d,o,d,!0):o()}),setTimeout(function(){E.complete=!1,e.loop(function(S){S.mouse(),S.locked=!1}),E.mouse(),e.drag({boundary:e,singleTouch:!0}),_=!1},A=="s"?(c+L)*1e3:c+L);function o(){for(var S=!0,X=0;S&&X<50;)X++,t.shuffle($),S=t.loop($,function(m,O){var de=e.getChildAt(m);if(r){var R=n(i)?de.key:de[i];if(R!=r[O])return!1}else if(e.items[O]!=de)return!1});G($,L/d),t.timeout(L,function(){E.dispatchEvent("scrambled")})}return E},l?E.scramble(a,s,f):E.added(function(){e.drag({boundary:e,singleTouch:!0})});function re(){E.upEvent&&e.off("pressup",E.upEvent),E.moveEvent&&e.off("pressmove",E.moveEvent),e.noDrag(),s+a>0&&E.noMouse()}function G(L,c,d){t.stopAnimate(F),t.loop(e.items,function(o,S,X){var m=E.starts[L[S]];c?o.animate({props:{x:m.x,y:m.y},time:c,ease:d?"quadInOut":"quadOut",wait:d,timeUnit:"seconds",id:F}):(o.loc(m),E.stage?o.drag({boundary:e,singleTouch:!0}):S==X-1&&E.added(function(){e.drag({boundary:e,singleTouch:!0})}))})}this.solve=function(L,c,d){n(d)&&(d=!0),n(c)&&(c=0),n(L)&&(L=0),c+L==0&&d&&E.noMouse(),setTimeout(function(){$=Q.slice(),re(),G($,L,0,d)},A=="s"?c*1e3:c),d||setTimeout(function(){E.mouse(),e.drag({boundary:e,singleTouch:!0})},A=="s"?(c+L)*1e3:c+L)},this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(L){Ot(E,L),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&E.stage&&E.stage.update()}}),Object.defineProperty(E,"order",{get:function(){var L=[],c=t.loop(e.current,function(d){if(!d)return!1;L.push(d.tileNum)});return!c||L.length!=$.length||($=L),$},set:function(L){var c=[];t.loop(L,function(d){c.push(e.items[d])}),e.remake(c),e.stage&&e.stage.update()}}),this.dispose=function(L,c,d){return E.scrmu&&B.off("mouseupplus",E.scrmu),e.removeAllEventListeners(),d||(E.zimContainer_dispose(!0),E.stage&&E.stage.update()),!0},g!==!1&&t.styleTransforms(this,w),this.clone=function(){return E.cloneProps(new t.Scrambler(e.clone(),r,i,l,a,s,f,u,v,C,h,g,E.group,y))}},t.extend(t.Scrambler,t.Container,["clone","dispose"],"zimContainer",!1),t.Scroller=function(e,r,i,l,a,s,f,u,v,C){var h="backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",g;if(g=at(t.Scroller,arguments,h,this))return g;De("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=v;var k=u===!1?{}:t.getStyle(this.type,this.group,C);if(n(e)&&(e=k.backing!=null?k.backing:null),n(e))return;var y=this.backing1=e;if(n(y)||!y.getBounds)return;var x=this.backing2=e.clone(!0);n(l)&&(l=k.horizontal!=null?k.horizontal:!0),n(a)&&(a=k.gapFix!=null?k.gapFix:0),n(f)&&(f=k.container!=null?k.container:null),n(s)&&(s=k.stage!=null?k.stage:null);var I=this;n(r)&&(r=k.speed!=null?k.speed:1),this.speed=r;var w=this.baseSpeed=this.speed;n(i)&&(i=k.direction!=null?k.direction:1),this.direction=i;var E=l?y.scaleX:y.scaleY;if(y.type=="AC"){je("ZIM Scroller(): please provide Pic() with dimensions for backing objects");return}if(!y.getBounds()){je("ZIM Scroller(): please setBounds() on backing objects");return}if(!s&&!y.stage){je("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start");return}if(!y.parent){je("ZIM Scroller(): please add object to container or stage before adding to Scroller");return}if(y.parent.addChildAt(x,y.parent.getChildIndex(y)),s=s||y.stage,n(f)&&(f=s),!f.getBounds()){je("zim display - Scroller(): please setBounds() on container or stage if no container");return}var A=y.getBounds().width*E-a,p=y.getBounds().height*E-a,T,B;l?x.x=A:x.y=p;var F=!1,D=t.Ticker.add(P,s);function P(){T||(T=f.getBounds().width,B=f.getBounds().height),!(I.speed==0||I.direction==0)&&(l?(y.x-=I.speed*I.direction,y.x<x.x?x.x=y.x+A:x.x=y.x-A,I.direction*I.speed>0?x.x<0&&y.x<x.x?y.x=x.x+A:y.x<0&&x.x<y.x&&(x.x=y.x+A):x.x>T&&x.x>y.x?x.x=y.x-A:y.x>T&&y.x>x.x&&(y.x=x.x-A)):(y.y-=I.speed*I.direction,y.y<x.y?x.y=y.y+p:x.y=y.y-p,I.direction*I.speed>0?x.y<0&&y.y<x.y?y.y=x.y+p:y.y<0&&x.y<y.y&&(x.y=y.y+p):x.y>B&&x.y>y.y?x.y=y.y-p:y.y>B&&y.y>x.y&&(y.y=x.y-p)))}this.paused=!1,this.pause=function(Y,_){return n(Y)&&(Y=!0),n(_)&&(_=0),Y?(w=I.speed,_>0?(F=!0,t.animate({target:I,obj:{pausingSpeed:0},ticker:!1,time:_,call:function(){I.speed=0,I.paused=!0,F=!1,I.dispatchEvent("pause")}})):(F=!1,I.speed=0,I.paused=!0,setTimeout(function(){I.dispatchEvent("pause")},10))):(F=!1,_>0?t.animate({target:I,obj:{pausingSpeed:w},ticker:!1,time:_,call:function(){I.speed=w,I.paused=!1,F=!1}}):(I.speed=w,I.paused=!1)),I},Object.defineProperty(I,"percentSpeed",{get:function(){return I.baseSpeed==0?NaN:I.speed/I.baseSpeed*100},set:function(Y){F||I.paused||(I.speed=I.baseSpeed*Y/100)}}),Object.defineProperty(I,"pausingSpeed",{get:function(){return I.baseSpeed==0?NaN:I.speed/I.baseSpeed*100},set:function(Y){I.speed=I.baseSpeed*Y/100}}),Object.defineProperty(I,"percentComplete",{get:function(){return l?y.x<0&&y.x>x.x?-y.x/y.width*100:(-x.x/x.width*100+1e9)%100:y.y<0&&y.y>x.y?-y.y/y.height*100:(-x.y/x.height*100+1e9)%100},set:function(Y){Y=(Y+1e9)%100,l?(y.x=-Y*y.width/100,x.x=y.x+A):(y.y=-Y*y.height/100,x.y=y.y+p)}}),u!==!1&&t.styleTransforms(this,k),this.dispose=function(){return t.Ticker.remove(D),!0}},t.extend(t.Scroller,Fe.EventDispatcher,null,"cjsEventDispatcher"),t.Dynamo=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",y;if(y=at(t.Dynamo,arguments,k,this))return y;De("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=h;var x=C===!1?{}:t.getStyle(this.type,this.group,g);if(n(e)&&(e=x.sprite!=null?x.sprite:null),n(e))return;var I=this.frames=e.parseFrames(i,l,a,!0);if(I.length==0)return;this.totalFrames=I.length;var w=0;n(r)&&(r=x.speed!=null?x.speed:30),n(f)&&(f=x.reversible!=null?x.reversible:!0);var E=this.baseSpeed=this.speed=r;n(s)&&(s=x.update!=null?x.update:!1),n(u)&&(u=x.flip!=null?x.flip:null),n(u)&&f==!1&&(u=!0);var A=this,p,T,B=Date.now(),F,D,P,Y=!1;A.scaleX=e.scaleX,A.scaleY=e.scaleY;function _(){if(p=requestAnimationFrame(_),T=I[w].s,!(A.speed==0||T==0)&&(D=1e3/Math.abs(A.speed)*T,F=Date.now(),F-B>D)){B=F;var V=A.frame+(A.speed>0||!f?1:-1),b=!1;V>=I.length&&(b=!0,V=0),V<0&&(b=!0,V=I.length-1),A.frame=V,u&&(A.speed<0?e.scaleX=-A.scaleX:e.scaleX=A.scaleX),v&&(A.speed<0?e.scaleY=-A.scaleY:e.scaleY=A.scaleY),b&&A.dispatchEvent("loop"),A.dispatchEvent("change"),s&&e.stage&&e.stage.update(),!n(P)&&P==A.frame&&(Y=!1,A.speed=0,A.paused=!0,A.dispatchEvent("pause"))}}_(),this.paused=!1,this.pause=function(V,b,Z){if(n(V)&&(V=!0),V!=A.paused)return n(b)&&(b=0),V?(E=A.speed,typeof Z>"u"?b>0?(Y=!0,t.animate({target:A,obj:{pausingSpeed:0},ticker:!1,time:b,call:function(){Y=!1,A.speed=0,A.paused=!0,A.dispatchEvent("pause")}})):(Y=!1,A.speed=0,A.paused=!0,setTimeout(function(){A.dispatchEvent("pause")},10)):(Y=!0,P=Z)):(P=null,b>0?(Y=!0,t.animate({target:A,obj:{pausingSpeed:E},ticker:!1,time:b,call:function(){Y=!1,A.speed=E,A.paused=!1}})):(Y=!1,A.speed=E,A.paused=!1)),A},Object.defineProperty(A,"frame",{get:function(){return w},set:function(V){w=Math.round(V)%I.length;var b=I[w];n(b)||(e.frame=b.f)}}),Object.defineProperty(A,"percentSpeed",{get:function(){return A.baseSpeed==0?NaN:Y||A.paused?E/A.baseSpeed*100:A.speed/A.baseSpeed*100},set:function(V){if(Y||A.paused){E=A.baseSpeed*V/100;return}A.speed=A.baseSpeed*V/100}}),Object.defineProperty(A,"pausingSpeed",{get:function(){return A.baseSpeed==0?NaN:A.speed/A.baseSpeed*100},set:function(V){A.speed=A.baseSpeed*V/100}}),C!==!1&&t.styleTransforms(this,x),this.dispose=function(){cancelAnimationFrame(p)}},t.extend(t.Dynamo,Fe.EventDispatcher,null,"cjsEventDispatcher"),t.Accelerator=function(e){De("69.3"),this.cjsEventDispatcher_constructor();var r=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(i){var l;Array.isArray(i)?l=i:l=[i];for(var a,s=0;s<l.length;s++)a=r.items.indexOf(l[s]),a<0&&r.items.push(l[s]);return r},e&&this.add(e),this.remove=function(i){var l;Array.isArray(i)?l=i:l=[i];for(var a,s=0;s<l.length;s++)a=r.items.indexOf(l[s]),a>=0&&r.items.splice(a,1);return r},this.pause=function(i,l,a){if(n(i)&&(i=!0),i==r.paused)return;var s=[];if(i){n(a)||(l=null);for(var f=!1,u=0;u<r.items.length;u++)(!n(l)&&n(a)&&!r.items[u].totalFrames||r.items[u].totalFrames&&(!n(l)||!n(a)))&&(r.items[u].pause(!0,l,a),f=!0,s[u]=1,r.items[u].on("pause",function(){r.paused||(v(!0),r.paused=!0,r.dispatchEvent("pause"))},null,!0));f||(v(),r.paused=!0,setTimeout(function(){r.dispatchEvent("pause")},10))}else r.paused=!1,v();function v(){for(var C=0;C<r.items.length;C++)s[C]!=1&&r.items[C].pause(i)}},Object.defineProperty(r,"percentSpeed",{get:function(){return r._percentSpeed},set:function(i){r._percentSpeed=i;for(var l=0;l<r.items.length;l++)r.items[l].percentSpeed=i}}),this.dispose=function(){for(var i=0;i<r.items.length;i++)r.items[i].dispose();return r.items=null,!0}},t.extend(t.Accelerator,Fe.EventDispatcher,null,"cjsEventDispatcher"),t.Emitter=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c){var d="obj, width, height, interval, num, life, fade, shrink, warm, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, focusWarm, style, group, inherit",o;if(o=at(t.Emitter,arguments,d,this))return o;De("69.9"),this.type="Emitter",this.group=L;var S=G===!1?{}:t.getStyle(this.type,this.group,c);n(e)&&(e=S.obj!=null?S.obj:[new t.Circle(20,t.pink),new t.Circle(20,t.green),new t.Circle(20,t.blue)]),n(r)&&(r=S.width!=null?S.width:300),n(i)&&(i=S.height!=null?S.height:300);var X=mt(l);n(l)&&(l=S.interval!=null?S.interval:X=="s"?.02:20),typeof l=="number"&&(l=Math.max(X=="s"?.01:10,l)),n(a)&&(a=S.num!=null?S.num:1),n(g)&&(g=S.trace!=null?g.size:!1),n(k)&&(k=S.traceFadeTime!=null?S.traceFadeTime:C),n(y)&&(y=S.traceShiftX!=null?S.traceShiftX:0),n(x)&&(x=S.traceShiftY!=null?S.traceShiftY:0),Mt(s,X),n(s)&&(s=S.life!=null?S.life:X=="s"?1:1e3),n(f)&&(f=S.fade!=null?S.fade:!0),n(u)&&(u=S.shrink!=null?S.shrink:!g),n(v)&&(v=S.warm!=null?S.warm:null),Mt(C,X),n(C)&&(C=S.decayTime!=null?S.decayTime:X=="s"?1:1e3),n(I)&&(I=S.angle!=null?S.angle:{min:0,max:360}),n(w)&&(w=S.force!=null?S.force:5),n(E)&&(E=S.gravity!=null?S.gravity:9.8),n(A)&&(A=S.wind!=null?S.wind:0),n(p)&&(p=S.layers!=null?S.layers:"top"),n(r)&&(r=S.width!=null?S.width:100),n(i)&&(i=S.height!=null?S.height:100),n(F)&&(F=S.horizontal!=null?S.horizontal:!1),n(D)&&(D=S.vertical!=null?S.vertical:!1),n(P)&&(P=S.sink!=null?S.sink:null),!n(P)&&n(Y)&&(Y=S.sinkForce!=null?S.sinkForce:10),n(V)&&(V=S.events!=null?S.events:!1),n(b)&&(b=S.startPaused!=null?S.startPaused:!1),n(Z)&&(Z=S.pool!=null?S.pool:!0),n($)&&($=S.poolMin!=null?S.poolMin:0),n(Q)&&(Q=S.particles!=null?S.particles:new t.Container),n(re)&&(re=S.focusWarm!=null?S.focusWarm:!0),e.type=="shape"&&(re=!1),Q.type="Particles",Q.emitter=this,this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var m=this;this.regX=r/2,this.regY=i/2,m.obj=e,m.particles=Q,m.interval=l,m.num=a,m.life=s,m.fade=f,m.shrink=u,m.decayTime=C,m.decayStart=h,m.trace=g,m.traceFadeTime=k,m.traceShiftX=y,m.traceShiftY=x,m.angle=I,m.emitterForce=w,m.gravity=E,m.wind=A,m.layers=p,m.animation=T,m.random=B,m.horizontal=F,m.vertical=D,m.sink=P,m.sinkForce=Y,m.events=V,m.startEmitterPaused=m.emitterPaused=b,m.pool=Z,m.poolMin=$,m.particlesEmitted=0;var O=[],de=0,R=0,N,se;t.added(m,ie);function ie(K){if(m.emitterPaused=null,m.on("added",function(){t.loop(m.particles,function(fe){fe.visible=!1}),m.particles.addTo(m.parent)}),se=K,n(_)&&(se.isWebGL?_=!1:_=t.mobile()),_&&(se.snapToPixelEnabled=!0),se){let fe=function(){var ue=t.isPick(m.life)?t.Pick.getMinMax(m.life).max:m.life;if(n(ue)&&(ue=X=="s"?1:1e3),m.startEmitterPaused){m.pauseEmitter();return}if(e=Array.isArray(m.obj)?m.obj:[m.obj],e.length<=0)return;var ke,ne;function ve(we,ee){return we-ee}Array.isArray(m.interval)?(m.interval.sort(ve),ke=m.interval[0]):m.interval.constructor=={}.constructor?ke=m.interval.min:ke=m.interval,Array.isArray(m.num)?(m.num.sort(ve),ne=m.num[m.num.length-1]):m.num.constructor=={}.constructor?ne=m.num.max:ne=m.num,t.loop(t.Pick.choose(m.num),function(){if(m.decayTime>0){var we={};m.shrink&&(we.scale=0),m.fade&&(we.alpha=0)}var ee,le,ye;if(m.pool&&O.length>0&&R>=Math.max(m.poolMin,ue/ke*ne))ee=O[de++%O.length],ee.visible=!0,ye=ee.trace?ee.getChildAt(0):ee,ye.emitShape&&(le=ye.template,ye.graphics.c().s(le.s?t.Pick.choose(le.s):null).ss(le.ss?t.Pick.choose(le.ss):null).sd(le.sd?t.Pick.choose(le.sd):null,le.offset?t.Pick.choose(le.offset):null)),ee.trace&&ee.cacheCanvas&&ee.updateCache(),m.layers=="top"?ye.emitShape?ee.addTo(Q,null,!1):ee.addTo(Q,Q.numChildren-1):ye.emitShape?ee.addTo(Q,m.layers=="bottom"?0:t.rand(Q.numChildren),!1):ee.addTo(Q,m.layers=="bottom"?0:t.rand(Q.numChildren)),g||ee.reg("center"),ee.scaleX=1,ee.scaleY=1,ee.alpha=ee.originalAlpha,ye.scaleX=ye.originalScaleX,ye.scaleY=ye.originalScaleY,ye.rotation=ye.originalRotation,ye.color=ye.originalColor,ye.endSpurt=!1;else{R++,m.trace&&(ee=new t.Container(r,i,null,null,!1),ee.trace=!0);var oe=t.Pick.choose(t.shuffle(e)[0]);oe.type=="shape"?(le=oe,ye=new t.Shape(1,1,null,null,null,!1),ye.emitShape=!0,ye.template=le,ye.graphics.s(le.s?t.Pick.choose(le.s):null).ss(le.ss?t.Pick.choose(le.ss):null).sd(le.sd?t.Pick.choose(le.sd):null,le.offset?t.Pick.choose(le.offset):null),m.trace?ye.addTo(ee,null,!1):m.layers=="top"?ye.addTo(Q,null,!1):ye.addTo(Q,m.layers=="bottom"?0:t.rand(Q.numChildren),null,!1)):(ye=oe.clone(),ye.centerReg||Vn(ye),m.trace?ye.centerReg(ee).loc(-1e3,-1e3):m.layers=="top"?ye.centerReg(Q):ye.centerReg(Q,m.layers=="bottom"?0:t.rand(Q.numChildren))),m.trace&&(m.layers=="top"?ee.addTo(Q,null,!1):ee.addTo(Q,m.layers=="bottom"?0:t.rand(Q.numChildren),!1),ee.cache(y,x,r*2,i*2)),m.trace||(ee=ye),ee.particle=ye,ee.originalAlpha=ee.alpha,ye.originalAlpha=ye.alpha,ye.originalScaleX=ye.scaleX,ye.originalScaleY=ye.scaleY,ye.originalRotation=ye.rotation,ye.originalColor=ye.color}m.currentParticle=ye,m.particlesEmitted++,ee.particleNormal=!0,ee.particleDecaying=!1,ee.particleFizzing=!1;var Me=t.Pick.choose(m.angle),ae=t.Pick.choose(m.emitterForce),Se=ae*Math.cos(Me*Math.PI/180),Le=ae*Math.sin(Me*Math.PI/180);ye.info={position:{x:m.x,y:m.y},velocity:{x:Se,y:Le},sink:n(Y)?null:et(Y)},m.horizontal&&(ye.info.position={x:m.x-m.regX+t.rand(0,r),y:m.y-m.regY+(m.vertical?i/2:0)}),m.vertical&&(ye.info.position={x:m.x-m.regX+(m.horizontal?r/2:0),y:m.y-m.regY+t.rand(0,i)}),ye.emitShape?ye.graphics.mt(ye.info.position.x,ye.info.position.y):(ye.x=ye.info.position.x,ye.y=ye.info.position.y),ye.alpha=ye.originalAlpha,m.random&&t.loop(m.random,function(Xe,Qe){var it=t.Pick.choose(Qe);Xe=="scale"?ye.sca(it):(Xe=="x"?ye.info.position.x=m.horizontal||m.vertical?it:it+r/2:Xe=="y"&&(ye.info.position.y=m.horizontal||m.vertical?it:it+i/2),(Xe=="x"||Xe=="y")&&ye.emitShape&&ye.graphics.mt(ye.info.position.x,ye.info.position.y),ye[Xe]=it,ye.emitShape&&(ye.x=0,ye.y=0))}),_&&!ye.emitShape&&ye.cache(ye.getBounds().x-10,ye.getBounds().y-10,ye.getBounds().width+20,ye.getBounds().height+20);var Ce=ye.emitShape?!1:m.shrink,te=(ee||ye).life=et(m.life);if(m.decayTime>0&&(m.fade||Ce||m.trace&&m.traceFadeTime>0)){if(m.trace&&m.traceFadeTime>0&&ee.animate({obj:{alpha:0},time:m.traceFadeTime,wait:te-m.traceFadeTime,waitedCall:function(Xe){Xe.particleNormal=!1,Xe.particleFizzing=!0},call:q,override:!1,id:"decay"}),m.fade||Ce){var Oe={};m.fade&&(Oe.alpha=0),Ce&&(Oe.scaleX=0,Oe.scaleY=0),ye.animate({obj:Oe,time:m.decayTime,wait:n(m.decayStart)?te-m.decayTime:m.decayStart,waitedCall:function(Xe){Xe.parent!=m&&(Xe=Xe.parent),Xe.particleNormal=!1,Xe.particleDecaying=!0},call:function(Xe){m.events&&z("decayed",Xe),Xe.endSpurt&&z("spurtdecayed",Xe),m.trace&&m.traceFadeTime>0||(n(m.decayStart)||m.decayStart+m.decayTime>m.life?Xe.parent&&q(Xe.parent.trace?Xe.parent:Xe):-function(){var Qe=ee;t.timeout(te-(m.decayStart+m.decayTime),function(){q(Qe)})}())},override:!1,id:"decay"})}}else ee.life=m.life,m.life>0&&-function(){var Xe=ee;Xe.timeOut=t.timeout(m.life,function(){q(Xe)})}();if(m.events&&z("emitted",ee),ce(ye),m.animation){var Re=t.Pick.choose(m.animation);Array.isArray(Re)?t.loop(Re,function(Xe){n(Xe.override)&&(Xe.override=!1),ye.animate(t.copy(Xe))}):(n(Re.override)&&(Re.override=!1),ye.animate(t.copy(Re)))}})},U=function(){t.loop(Q,function(ue){if(ue.trace){var ke=ue;ue=ue.getChildAt(0)}var ne=ue.info,ve=0,we=0;if(!n(m.sink)){var ee=m.particles.localToGlobal(ne.position.x,ne.position.y),le;m.sink.parent&&m.sink.parent.localToGlobal?le=m.sink.parent.localToGlobal(m.sink.x,m.sink.y):le=new Fe.Point(t.Pick.choose(m.sink.x),t.Pick.choose(m.sink.y));var ye=t.angle(ee.x,ee.y,le.x,le.y);ve=ne.sink*Math.cos(ye*Math.PI/180),we=ne.sink*Math.sin(ye*Math.PI/180)}var oe=m.wind+ve,Me=m.gravity+we;ne.velocity.x+=oe*J,ne.velocity.y+=Me*J,ne.position.x+=ne.velocity.x*J*100,ne.position.y+=ne.velocity.y*J*100,ue.emitShape?ue.graphics.lt(ne.position.x,ne.position.y):(ue.x=ne.position.x,ue.y=ne.position.y),m.trace&&ke&&ke.cacheCanvas&&ke.updateCache(ue.emitShape?null:"source-over")})};var xe=m.parent.getChildIndex(m);m.parent.addChildAt(Q,xe),!F&&!D&&m.centerReg(null,null,!1),m.zimInterval=t.interval(m.interval,fe,null,!0,!0);var J=0;N=m.emitterTicker=t.Ticker.add(U,se),J=1/t.Ticker.framerate,m.focusWarm=re,m.doWarm=function(ue){if(n(ue)||ue===!0){var ke;s.max?ke=s.max:Array.isArray(s)?ke=t.arrayMinMax(s).max:ke=et(s);var ne;l.min?ne=l.min:Array.isArray(l)?ne=t.arrayMinmin(l).min:ne=et(l),ue=Math.min(200,Math.round(ke/ne))}var ve=m.pool;m.pool=!1;var we=Math.round(l*t.Ticker.framerate);t.loop(Math.round(ue*l*t.Ticker.framerate),function(ee){ee%we==0&&fe(),t.loop(Q,function(le){le.warmTick?le.warmTick++:le.warmTick=1,le.warmTick/t.Ticker.framerate>le.life&&q(le)}),U()}),t.loop(Q,function(ee){if(ee.zimTweens){var le=ee.warmTick/t.Ticker.framerate/ee.life*100;le>=100&&(ee.alpha=0),ee.percentComplete=le}}),m.pool=ve},v&&m.doWarm(v)}}m.particles.noMouse();function q(K){if(m.events&&z("fizzed",K),(K.trace?K.getChildAt(0).endSpurt:K.endSpurt)&&(z("spurtfizzed",K),m.spurting=!1),m.pool&&K.pooled!="end")if(K.pooled){K.visible=!1;return}else{K.pooled=!0,O&&O.push(K),K.visible=!1;return}m.removeChild(K),m.trace&&K.uncache(),K=null}function z(K,xe){if(!n(xe)){var J=new Fe.Event(K);J.particle=xe.trace?xe.getChildAt(0):xe,m.dispatchEvent(J)}}function ce(K){n(m.spurtCount)&&n(m.spurtNum)||(m.spurtCount++,m.spurtCount>=m.spurtNum&&Ie(K))}function Ie(K){m.pauseEmitter(),m.spurtCount=m.spurtNum=null,!n(K)&&(z("spurted",K),K.endSpurt=!0)}Object.defineProperty(m,"interval",{get:function(){return l},set:function(K){l=K,m.zimInterval&&(m.zimInterval.time=l)}}),this.removeFrom=function(){m.parent&&m.parent.removeChild(m),m.particles.removeFrom()},this.spurting=!1,this.spurt=function(K,xe,J){var fe="num, time, restart",U;return(U=at(m.spurt,arguments,fe))?U:(n(xe)||(t.timeout(t.Pick.choose(xe),function(){Ie(m.currentParticle)},!0),m.spurting=!0),n(K)||(m.spurtNum=t.Pick.choose(K),m.spurtCount=0,m.spurting=!0),m.pauseEmitter(!1,J,null,!0),m)},this.clearPool=function(){t.loop(m.particles,function(K){K.pooled="end",K.visible||m.removeChild(K)},!0),R=0,de=0,O=[]},m.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(K,xe,J,fe){if(m.startEmitterPaused=null,n(K)&&(K=!0),n(xe)&&(xe=!1),n(J)&&(J=!1),K){if(m.emitterPaused)return m;J&&(N&&t.Ticker.remove(N),t.loop(m.particles,function(U){U.pauseAnimate(),U.trace&&U.getChildAt(0).pauseAnimate(),U.timeOut&&U.timeOut.pause()})),m.zimInterval.pause(),m.emitterPaused=!0}else{if(!m.emitterPaused)return m;xe&&(t.loop(m.particles,function(U){U.stopAnimate(),U.timeOut&&U.timeOut.clear(),U.trace&&U.getChildAt(0).pauseAnimate()}),m.removeAllChildren()),se&&N&&!t.Ticker.has(se,N)&&(t.Ticker.add(N,se),t.loop(m.particles,function(U){U.pauseAnimate(!1),U.timeOut&&U.timeOut.pause(!1),U.trace&&U.getChildAt(0).pauseAnimate(!1)})),m.zimInterval&&m.zimInterval.pause(!1,fe),m.emitterPaused=!1}return m},this.resize=function(K,xe){n(K)||(r=K),n(xe)||(i=xe),m.setBounds(0,0,r,i),!F&&!D&&m.centerReg(),m.clearPool()},G!==!1&&t.styleTransforms(this,S),this.clone=function(K){var xe;return Array.isArray(m.obj)||m.obj.constructor=={}.constructor?xe=t.copy(m.obj):m.obj.clone?xe=m.obj.clone(K):xe=m.obj,m.cloneProps(new t.Emitter(xe,r,i,m.interval,m.num,m.life,m.fade,m.shrink,m.decayTime,m.decayStart,m.trace,m.traceFadeTime,m.traceShiftX,m.traceShiftY,m.angle,m.emitterForce,m.gravity,m.wind,m.layers,m.animation,t.copy(m.random),m.horizontal,m.vertical,m.sink,m.sinkForce,_,m.events,b,m.pool,m.poolMin,G,m.group,c))},this.dispose=function(){return m.zimInterval&&m.zimInterval.clear(),N&&t.Ticker.remove(N),t.loop(O,function(K){K&&K.dispose()}),Q&&Q.dispose&&Q.dispose(),m.currentParticle&&m.currentParticle.dispose&&m.currentParticle.dispose(),e&&Array.isArray(e)?t.loop(e,function(K){K.dispose&&K.dispose()}):e&&e.dispose&&e.dispose(),Q=m.currentParticle=m.particles=e=m.obj=O=m.poolList=null,!0}},t.extend(t.Emitter,t.Container,"clone","zimContainer",!1),t.Generator=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B){var F="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",D;if(D=at(t.Generator,arguments,F,this))return D;De("69.92"),this.group=T;var P=p===!1?{}:t.getStyle("Generator",this.group,B);n(I)&&(I=P.frame!=null?P.frame:j.zdf);var Y=I.stage;n(e)&&(e=P.color!=null?P.color:null),n(r)&&(r=P.strokeColor!=null?P.strokeColor:t.white),n(i)&&(i=P.strokeWidth!=null?P.strokeWidth:1),n(f)&&(f=P.maxCount!=null?P.maxCount:1e3),n(u)&&(u=P.boundary!=null?P.boundary:new t.Boundary(0,0,Y.width,Y.height)),n(v)&&(v=P.drawCount!=null?P.drawCount:1),n(C)&&(C=P.drawPause!=null?P.drawPause:!0),n(h)&&(h=P.drawSpacebarPause!=null?P.drawSpacebarPause:!0),n(g)&&(g=P.startX!=null?P.startX:Y.width/2),n(k)&&(k=P.startY!=null?P.startY:Y.height/2),n(y)&&(y=P.cache!=null?P.cache:!1);var _=this.drawing=new t.Container(u.x,u.y,u.width,u.height).addTo(Y),V=this.shape=new t.Shape(u.width,u.height).addTo(_);this.drawCount=v,n(C)&&(C=!0),y&&V.cache(u.x,u.y,u.width,u.height),this.zimContainer_constructor(u.x,u.y,u.width,u.height),this.type="Generator";var b=this;if(b.draw=null,E){b.drawCount=10,!n(a)&&n(l)&&(l=a),a=null;var Z=new t.Loader;b.outputNum=0,b.outputName=E===!0?"gen_":E.match(/_$/)?E:E+"_"}this.color=e,this.strokeColor=r,this.strokeWidth=i;var $=g,Q=k;this.fill=function(d){return b.color=d,b.currentColor=et(b.color),V.f(b.currentColor),this},this.stroke=function(d,o){return n(d)||(b.strokeColor=d,b.currentStrokeColor=et(b.strokeColor),V.s(b.currentStrokeColor)),n(o)||(b.strokeWidth=o,b.currentStrokeWidth=et(b.strokeWidth),V.ss(b.currentStrokeWidth)),this},this.noStroke=function(){return b.strokeColor=b.currentStrokeColor=null,b.strokeWidth=b.currentStrokeWidth=null,V.s(),V.ss(1),this},V.matrix=V.getMatrix(),this.translate=function(d,o){n(d)&&(d=0),n(o)&&(o=0),d=et(d),o=et(o);var S=V.matrix.transformPoint(d,o);return $=S.x,Q=S.y,V.mt($,Q),V.matrix.translate(d,o),this},this.rotate=function(d){return n(d)&&(d=0),d=et(d),V.matrix.rotate(d),this},this.scale=function(d,o){return n(d)&&(d=1),n(o)&&(o=d),d=et(d),o=et(o),V.matrix.scale(d,o),this},this.skew=function(d,o){return n(d)&&(d=0),n(o)&&(o=0),d=et(d),o=et(o),V.matrix.skew(d,o),this},x&&(b.linePoints=[]),this.line=function(d,o,S,X){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=0),n(X)&&(X=0),d=et(d),o=et(o),S=et(S),X=et(X),(x=="zero"||x=="nonzero"&&d&&o)&&b.linePoints.push([d,o]),b.translate(d,o);var m=V.matrix.transformPoint(S,X);return $=m.x,Q=m.y,V.lt($,Q),x&&b.linePoints.push([$,Q]),V.matrix.translate(S,X),this},this.arc=function(d,o,S,X,m,O){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=50),d=et(d),o=et(o),S=et(S),S=Math.abs(S),n(X)&&(X=0),n(m)&&(m=180),X=et(X),m=et(m),n(O)&&(O=!1),O=et(O),b.translate(d,o);var de=V.matrix.transformPoint(0,0);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var R=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,N=V.decomp.rotation||0,se=S*R;return V.mt(de.x+se*Math.cos((X+N)*Math.PI/180),de.y+se*Math.sin((X+N)*Math.PI/180)),V.a(de.x,de.y,se,(X+N)*Math.PI/180,(m+N)*Math.PI/180,O),this},this.curve=function(d,o,S,X,m,O){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=50),n(X)&&(X=50),n(m)&&(m=100),n(O)&&(O=0),d=et(d),o=et(o),S=et(S),X=et(X),m=et(m),O=et(O),b.translate(d,o);var de=V.matrix.transformPoint(S,X),R=V.matrix.transformPoint(m,O),N=R.x,se=R.y;return V.qt(de.x,de.y,N,se),V.matrix.translate(m,O),this},this.bezier=function(d,o,S,X,m,O,de,R){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=50),n(X)&&(X=50),n(m)&&(m=-50),n(O)&&(O=-50),n(de)&&(de=100),n(R)&&(R=0),d=et(d),o=et(o),S=et(S),X=et(X),m=et(m),O=et(O),de=et(de),R=et(R),b.translate(d,o);var N=V.matrix.transformPoint(S,X),se=V.matrix.transformPoint(m,O),ie=V.matrix.transformPoint(de,R),q=ie.x,z=ie.y;return V.bt(N.x,N.y,se.x,se.y,q,z),V.matrix.translate(de,R),this},this.rectangle=function(d,o,S,X,m,O,de,R){if(n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=100),n(X)&&(X=S),d=et(d),o=et(o),S=et(S),X=et(X),!m&&!O&&!de&&!R){b.translate(d,o);var N=V.matrix.transformPoint(0,0),se=V.matrix.transformPoint(S,0),ie=V.matrix.transformPoint(S,X),q=V.matrix.transformPoint(0,X);return V.mt(N.x,N.y).lt(se.x,se.y).lt(ie.x,ie.y).lt(q.x,q.y).lt(N.x,N.y).lt(se.x,se.y),V.mt(N.x,N.y),this}n(m)&&(m=0),n(O)&&(O=m),n(de)&&(de=m),n(R)&&(R=m),m=et(m),O=et(O),de=et(de),R=et(R);var z=(S<X?S:X)/2,ce=0,Ie=0,K=0,xe=0;z=Math.abs(z),m<0&&(m*=ce=-1),m>z&&(m=z),O<0&&(O*=Ie=-1),O>z&&(O=z),de<0&&(de*=K=-1),de>z&&(de=z),R<0&&(R*=xe=-1),R>z&&(R=z),b.translate(d,o),V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var J=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,fe=S<0?-1:1,U=X<0?-1:1,ue=V.matrix.transformPoint(S-O*fe,0),ke=V.matrix.transformPoint(S+O*Ie*fe,-O*Ie*U),ne=V.matrix.transformPoint(S,O*U),ve=V.matrix.transformPoint(S,X-de*U),we=V.matrix.transformPoint(S+de*K*fe,X+de*K*U),ee=V.matrix.transformPoint(S-de*fe,X),le=V.matrix.transformPoint(R*fe,X),ye=V.matrix.transformPoint(-R*xe*fe,X+R*xe*U),oe=V.matrix.transformPoint(0,X-R*U),Me=V.matrix.transformPoint(0,m*U),ae=V.matrix.transformPoint(-m*ce*fe,-m*ce*U),Se=V.matrix.transformPoint(m*fe,0);return V.mt(ue.x,ue.y).at(ke.x,ke.y,ne.x,ne.y,O*J).lt(ve.x,ve.y).at(we.x,we.y,ee.x,ee.y,de*J).lt(le.x,le.y).at(ye.x,ye.y,oe.x,oe.y,R*J).lt(Me.x,Me.y).at(ae.x,ae.y,Se.x,Se.y,m*J).cp(),this},this.circle=function(d,o,S,X,m){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=50),n(X)&&(X=100),n(m)&&(m=!0),d=et(d),o=et(o),S=et(S),X=et(X),S=Math.abs(S),b.translate(d,o);var O=V.matrix.transformPoint(0,0);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var de=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,R=V.decomp.rotation||0,N=S*de;if(b.circleHeight=N*2,typeof X=="number"&&X>=0&&X<100){var se=360*X/100/2;V.mt(O.x+N*Math.cos((-se-90+R)*Math.PI/180),O.y+N*Math.sin((-se-90+R)*Math.PI/180)),V.a(O.x,O.y,N,(-se-90+R)*Math.PI/180,(se-90+R)*Math.PI/180,!1),m&&V.cp(),b.circleHeight=N-Math.cos(se*Math.PI/180)*N}else V.mt(O.x+N,O.y),V.a(O.x,O.y,N,0,Math.PI*2);return this},this.elipse=function(d,o,S,X){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=100),n(X)&&(X=50),d=et(d),o=et(o),S=et(S),X=et(X),b.translate(d,o);var m=V.matrix.transformPoint(-S/2,-X/2);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var O=V.decomp.scaleX,de=V.decomp.scaleY;return V.de(m.x,m.y,S*O,X*de),this},this.poly=function(d,o,S,X,m,O){n(d)&&(d=0),n(o)&&(o=0),n(S)&&(S=100),n(X)&&(X=5),n(m)&&(m=0),n(O)&&(O=0),d=et(d),o=et(o),S=et(S),X=et(X),m=et(m),O=et(O),S=Math.abs(S),b.translate(d,o);var de=V.matrix.transformPoint(0,0);V.decomp||(V.decomp={}),V.matrix.decompose(V.decomp);var R=(Math.abs(V.decomp.scaleX)+Math.abs(V.decomp.scaleY))/2,N=V.decomp.rotation||0,se=S*R;return V.dp(de.x,de.y,se,X,m,N),this},this.closePath=this.close=this.cp=function(){return V.cp(),this},this._noise=new t.Noise(w),this.noise=function(){if(arguments.length==1)return(this._noise.simplex1D.apply(null,arguments)+1)/2;if(arguments.length==2)return(this._noise.simplex2D.apply(null,arguments)+1)/2;if(arguments.length==3)return(this._noise.simplex3D.apply(null,arguments)+1)/2;if(arguments.length==4)return(this._noise.simplex4D.apply(null,arguments)+1)/2},this.stack=[],this.colorStrokeStack=[],this.push=function(){return b.stack.push(V.matrix.clone()),b.colorStrokeStack.push([b.color,b.strokeColor,b.strokeWidth,b.currentColor,b.currentStrokeColor,b.currentStrokeWidth]),this},this.pop=function(){V.matrix=b.stack.pop()||V.matrix;var d=b.colorStrokeStack.pop()||[b.color,b.strokeColor,b.strokeWidth,b.currentColor,b.currentStrokeColor,b.currentStrokeWidth];return b.color=d[0],b.strokeColor=d[1],b.strokeWidth=d[2],b.currentColor=d[3],b.currentStrokeColor=d[4],b.currentStrokeWidth=d[5],V.f(b.currentColor).s(b.currentStrokeColor).ss(b.currentStrokeWidth),V.mt(V.matrix.x,V.matrix.y),this},this.blit=function(){return V.updateCache("source-over"),V.c(),this},this.step=function(){return b.draw&&c(),this},n(b.color)||this.fill(b.color),!n(b.strokeColor)&&b.strokeWidth?this.stroke(b.strokeColor,b.strokeWidth):b.noStroke(),this.translate($,Q),typeof s=="function"&&(this.setup=s,t.timeout(.01,function(){s(0,b.count,b),y&&V.updateCache(),Y.update()}));var re=0;this.maxCount=f,this.resetup=function(d){return n(d)&&(d=!0),re=0,d&&b.shape.c(),n(b.color)||this.fill(b.color),!n(b.strokeColor)&&b.strokeWidth?this.stroke(b.strokeColor,b.strokeWidth):b.noStroke(),this.reset(),this.setup&&(s(0,b.count,b),y&&V.updateCache(),Y.update()),this},this.stampNum=0,typeof a=="function"&&(this.stamp=a,t.timeout(.015,function(){L(0)})),this.restamp=function(d,o){return n(d)&&(d=!0),n(o)&&(o=!0),re=0,d&&b.shape.c(),o&&b.resetup(d),L(0),this},this.reset=function(){return this.fill(e),!n(r)&&i?this.stroke(r,i):this.noStroke(),V.matrix.identity(),this.translate(g,k),this},this.clear=function(){return this.shape.c(),this};function G(){Z.save({content:Y,filename:b.outputName+t.decimals(b.outputNum,null,null,6),type:A}),b.outputNum++}E&&(Y.update(),G());function L(d){b.stampNum++;var o=t.loop(b.maxCount,function(S,X){if(b.paused)return b.pausedCount=S,!1;if(b.changeCount)return b.changeCount=!1,!1;re=S+1;var m=a(S+1,X,b,b.stampNum);if(b.currentColor=et(b.color),V.f(b.currentColor),b.currentStrokeColor=et(b.strokeColor),V.s(b.currentStrokeColor),b.currentStrokeWidth=et(b.strokeWidth),V.ss(b.currentStrokeWidth),E&&(Y.update(),G()),m)return m},null,null,d);y&&V.updateCache(),o&&b.dispatchEvent("complete"),Y.update()}b.iterator=0,typeof l=="function"&&(this.draw=l,s?setTimeout(function(){b.ticker=t.Ticker.add(c)},100):this.ticker=t.Ticker.add(c),b.generatorPaused=!1,C&&(b.pauseEvent=Y.on("stagemousedown",function(){b.count>=b.maxCount||b.pauseTimeout||(t.Ticker.has(b.ticker)?(t.Ticker.remove(b.ticker),b.generatorPaused=!0,b.dispatchEvent("generatorpaused")):(b.ticker=t.Ticker.add(b.ticker),b.generatorPaused=!1,b.dispatchEvent("generatorunpaused")))})),h&&(b.pauseSpacebarEvent=I.on("keydown",function(d){b.count>=b.maxCount||b.pauseTimeout||d.keyCode==20&&(t.Ticker.has(b.ticker)?(t.Ticker.remove(b.ticker),b.generatorPaused=!0,b.dispatchEvent("generatorpaused")):(b.ticker=t.Ticker.add(b.ticker),b.generatorPaused=!1,b.dispatchEvent("generatorunpaused")))})));function c(){b.iterator++,b.iterator%Math.ceil(b.drawCount)==0&&(b.count++,b.draw(b.count,b.maxCount,b),y&&b.blit(),b.currentColor=et(b.color),V.f(b.currentColor),b.currentStrokeColor=et(b.strokeColor),V.s(b.currentStrokeColor),b.currentStrokeWidth=et(b.strokeWidth),V.ss(b.currentStrokeWidth),b.dispatchEvent("drawing"),Y.update(),E&&G()),b.maxCount&&b.count>=b.maxCount&&(b.dispatchEvent("complete"),t.Ticker.remove(b.ticker))}this.redraw=function(d,o){return n(d)&&(d=!0),b.reset(),n(o)&&(o=!0),b.ticker&&t.Ticker.remove(b.ticker),b.iterator=0,b.count=0,d&&b.shape.c(),o?(b.resetup(d),setTimeout(function(){b.ticker&&(b.ticker=t.Ticker.add(b.ticker))},100)):b.ticker&&(b.ticker=t.Ticker.add(b.ticker)),this},this.paused=!1,this.pause=function(d,o){if(n(d)&&(d=!0),!(b.count>=b.maxCount)){if(d==this.paused)return this;this.paused=d,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?b.ticker&&t.Ticker.remove(b.ticker):b.ticker?b.ticker=t.Ticker.add(b.ticker):L(b.pausedCount,b.maxCount),setTimeout(function(){Y.update()},20),o&&(this.pauseTimeout=t.timeout(o,function(){b.pause(!b.paused),b.pauseTimeout=null})),b.dispatchEvent(b.paused?"paused":"unpaused")}},this.outOfBounds=function(d,o){n(d)&&(d=0),n(o)&&(o=d);var S=b.shape.stage;if(S)return b.currentX>S.width-d||b.currentX<0+d||b.currentY>S.height-o||b.currentY<0+o},this.stop=function(){b.pause(),b.pauseEvent&&Y.off("stagemousedown",b.pauseEvent),b.pauseSpaceEvent&&I.off("keydown",b.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return re},set:function(d){re=d,b.stamp&&(b.changeCount=!0,setTimeout(function(){L(re,b.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return $},set:function(){ht&&je("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return Q},set:function(){ht&&je("Generator() - currentY is read only")}}),this.clone=function(){return b.cloneProps(new t.Generator(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,p,b.group,B))},b.dispose=function(d,o,S){return b.pause(),b.ticker&&t.Ticker.remove(b.ticker),b.pauseEvent&&Y.off("stagemousedown",b.pauseEvent),b.pauseSpacebarEvent&&I.off("keydown",b.pauseSpacebarEvent),b._noise&&(b._noise=null),b.shape&&b.shape.dispose(),b.drawing&&b.drawing.dispose(),b.shape=b.drawing=null,S||b.zimContainer_dispose(),!0},p!==!1&&t.styleTransforms(this,P)},t.extend(t.Generator,t.Container,["clone","dispose"],"zimContainer",!1),t.Pen=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z){var $="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",Q;if(Q=at(t.Pen,arguments,$,this))return Q;De("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=b;var re=V===!1?{}:t.getStyle(this.type,this.group,Z);n(i)&&(i=re.penType!=null?re.penType:"line");var G={size:2,color:t.dark,spread:{min:5,max:20},borderColor:t.darker,borderWidth:0},L={line:{size:2},kitetail:{size:{min:5,max:20},color:t.series(t.pink,t.blue,t.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:t.green,size:3,spread:{min:10,max:30}},hair:{color:[t.pink,t.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[t.dark,t.darker,t.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};n(L[i])&&(i="line"),n(e)&&(e=re.size!=null?re.size:n(L[i].size)?G.size:L[i].size),n(r)&&(r=re.color!=null?re.color:n(L[i].color)?G.color:L[i].color),n(l)&&(l=re.damp!=null?re.damp:.5),l===!1&&(l=1),n(a)&&(a=re.spread!=null?re.spread:n(L[i].spread)?G.spread:L[i].spread),n(s)&&(s=re.borderColor!=null?re.borderColor:n(L[i].borderColor)?G.borderColor:L[i].borderColor),n(f)&&(f=re.borderWidth!=null?re.borderWidth:n(L[i].borderWidth)?G.borderWidth:L[i].borderWidth),n(u)&&(u=re.end!=null?re.end:t.isPick(e)||t.isPick(r)||i!="line"?"butt":"round"),n(k)&&(k=re.cropScale!=null?re.cropScale:1),n(h)&&(h=re.cache!=null?re.cache:!0),n(y)&&(y=re.undo!=null?re.undo:0),n(x)&&(x=re.undoKeys!=null?re.undoKeys:!0),n(I)&&(I=re.move!=null?re.move:!0),n(E)&&(E=re.deleteable!=null?re.deleteable:!0),n(A)&&(A=re.doubleClickDelete!=null?re.doubleClickDelete:!0),n(p)&&(p=re.holdDelete!=null?re.holdDelete:!0),n(w)&&(w=re.onTop!=null?re.onTop:!0),n(T)&&(T=re.immediateStop!=null?re.immediateStop:"both"),n(B)&&(B=re.lineAlpha!=null?re.lineAlpha:1),n(F)&&(F=re.lineBlendMode!=null?re.lineBlendMode:"normal"),n(v)&&(v=re.paper!=null?re.paper:new t.Container),n(C)&&(C=re.nib!=null?re.nib.clone():null),n(D)&&(D=re.frame!=null?re.frame:j.zdf),n(P)&&(P=re.dashed!=null?re.dashed:null),P===!0&&(P=[3,100]),n(Y)&&(Y=re.pullColor!=null?re.pullColor:null),n(_)&&(_=re.pullThickness!=null?re.pullThickness:1);var c=this;this.dampX=new t.Damp(null,l),this.dampY=new t.Damp(null,l);var d=!0;this.drawing=!1,this.immediateStop=T,this.undoLevels=y,this.undoKeys=x,this.move=I,this.draggable=!0,this.lineAlpha=B,this.lineBlendMode=F;var o=c.shape=new t.Shape,S=D.stage.width,X=D.stage.height,m,O,de,R;c.paperNum=0,c.sizeScale=1,c.spreadScale=1,c.sizeFactor=1,c.spreadFactor=1,c.pullThickness=_,c.stop=function(){};var N;this.added(function(J){N=J,c.paper=v,S=c.stage.width,X=c.stage.height,n(C)?c.stageDown=N.on("stagemousedown",function(ne){c.dispatchEvent("start")}):c.zimDown?c.nib=C.addTo(c):(c.nib=C.addTo(c.parent,c.parent.getChildIndex(c)),c.nib.x=c.x,c.nib.y=c.y,c.nib.mouseEnabled=!1,c.stageDown=N.on("stagemousedown",function(ne){N=ne.target.stage,c.nibEvent=N.on("stagemousemove",fe),c.dispatchEvent("start")}),c.stageUp=N.on("stagemouseup",function(){N.off("stagemousemove",c.nibEvent)}));function fe(ne){c.drawing&&(c.nib.x=ne.stageX/t.scaX,c.nib.y=ne.stageY/t.scaY)}c.zimDragCheck=!1,c.stop=function(){c.stopCheck(!0)},c.infinite=!1,c.stopCheck=function(ne){if(ne)c.drawing=!1,c.infinite=!1;else if(c.infinite||c.zimDragCheck||!c.immediateStop&&c.drawing)return;c.immediate(c.x,c.y),setTimeout(function(){var ve;if(!c.drawing){if(h?(o.cache(-(S*k-S)/2,-(X*k-X)/2,S*k,X*k),ve=v.bitmap=new t.Bitmap(o.cacheCanvas).reg((S*k-S)/2,(X*k-X)/2).addTo(v),o.graphics.clear(),o.uncache(),o.top()):ve=o,c.undoLevels>0){var we={paper:v,line:ve};y.push(we),y.length>c.undoLevels&&y.shift(),c.dispatchEvent("recordUndo")}h||(o=new t.Shape().clone().addTo(v)),c.lastSegment=ve,c.lastSelected=ve,ve.alpha=c.lineAlpha,ve.blendMode=c.lineBlendMode,ve.paper=v,c.dispatchEvent("stop"),c.dispatchEvent("change")}},c.immediateStop||ne?0:50)};var U=0;c.dampX.immediate(c.x),c.dampY.immediate(c.y),c.lastX=c.lastMidX=c.drawX=c.x,c.lastY=c.lastMidY=c.drawY=c.y;var ue,ke;c.ticker=t.Ticker.add(function(){if(c.parent){var ne=c.dampX.convert(d?c.x:c.finishX),ve=c.dampY.convert(d?c.y:c.finishY),we=c.parent.localToLocal(ne,ve,o);if(Math.abs(c.lastX-ne)+Math.abs(c.lastY-ve)<1){if(c.drawing&&(c.drawing=!1,c.zimDown?(c.x=c.lastX=c.lastMidX=d?c.x:c.finishX,c.y=c.lastY=c.lastMidY=d?c.y:c.finishY):(c.x=c.finishX=c.lastX=c.lastMidX=ne,c.y=c.finishY=c.lastY=c.lastMidY=ve),c.stopCheck(),ue=ke=null),c.lastX=c.lastMidX=ne,c.lastY=c.lastMidY=ve,v){var ee=v.localToLocal(0,0,c.parent);c.lastMidX-=ee.x,c.lastMidY-=ee.y}return}else{var le=t.Pick.choose(e)*c.sizeScale*c.sizeFactor,ye=t.Pick.choose(a)*c.spreadScale*c.spreadFactor;c.drawing||(q=[],v.getChildIndex(o)!=v.numChildren-1&&o.top()),c.drawing=!0,c.dispatchEvent("drawing")}var oe=c.parent.localToLocal(c.lastX,c.lastY,o),Me;v?Me=v.localToLocal(c.lastMidX,c.lastMidY,o):Me=c.parent.localToLocal(c.lastMidX,c.lastMidY,o);var ae,Se,Le;if(i=="splatter")for(var Ce=0;Ce<=3;Ce++){var te=t.rand(360)*Math.PI/180,Oe=ye,Re={x:ne+Oe*Math.cos(te),y:ve+Oe*Math.sin(te)},Xe=c.parent.localToLocal(Re.x,Re.y,o);o.graphics.mt(Xe.x,Xe.y).f(t.Pick.choose(r)).dc(Xe.x,Xe.y,le/2)}else i=="grass"||i=="hair"||i=="city"?((i=="grass"||i=="hair")&&(ae=c.lastX+(ne-c.lastX)/2,Se=c.lastY+(ve-c.lastY)/2,Le=c.parent.localToLocal(ae,Se,o),o.graphics.s(t.Pick.choose(r)).ss(le,u).mt(Le.x,Le.y).lt(Le.x+t.rand(-ye/4,ye/4),i=="hair"?Le.y+ye:Le.y-ye)),(i=="grass"||i=="hair"||i=="city"&&U%3==0)&&o.graphics.s(t.Pick.choose(r)).ss(le,u).mt(we.x,we.y).lt(we.x+(i=="city"?0:t.rand(-ye/4,ye/4)),i=="hair"?Le.y+ye:we.y-ye),U++):(i=="kitetail"&&o.graphics.s(t.Pick.choose(r)).ss(le,u),i=="barbwire"?(o.graphics.s(t.Pick.choose(r)).ss(le,u),ae=c.lastX+(ne-c.lastX)/2+t.rand(-ye,ye),Se=c.lastY+(ve-c.lastY)/2+t.rand(-ye,ye)):(ae=c.lastX+(ne-c.lastX)/2,Se=c.lastY+(ve-c.lastY)/2),Le=c.parent.localToLocal(ae,Se,o),i!="line"&&o.graphics.qt(oe.x,oe.y,Le.x,Le.y));if(f>0&&i!="line"&&(ae=c.lastX+(ne-c.lastX)/2,Se=c.lastY+(ve-c.lastY)/2,Le=c.parent.localToLocal(ae,Se,o),o.graphics.s(t.Pick.choose(s)).ss(t.Pick.choose(f)).mt(Me.x,Me.y).qt(oe.x,oe.y,Le.x,Le.y),i=="splatter"&&o.graphics.es()),i=="splatter")o.graphics.f(t.Pick.choose(r));else if(i!="kitetail")if(i=="line"){if(t.isPick(r)||le!=ke){var Qe=t.Pick.choose(r);(Qe!=ue||le!=ke)&&o.graphics.s(Qe).ss(le,u),ue=Qe,ke=le}}else o.graphics.s(t.Pick.choose(r)).ss(le,u);i!="grass"&&i!="hair"&&i!="city"&&i!="splatter"&&o.graphics.mt(Me.x,Me.y).qt(oe.x,oe.y,Le.x,Le.y),P&&o.graphics.sd(P),c.lastX=ne,c.lastY=ve,Le&&(c.lastMidX=Le.x,c.lastMidY=Le.y),c.drawX=c.lastMidX||0,c.drawY=c.lastMidY||0}}),n(Y)||se(N),c.mouseChildren=!1});function se(J){var fe=J.frame;c.ppdEvent&&c.off("drawing",c.ppdEvent),c.ppsEvent&&c.off("stop",c.ppsEvent),c.ppmEvent&&J.off("stagemousedown",c.ppmEvent),c.pullShape||(c.pullShape=new t.Shape),c.ppdEvent=c.on("drawing",function(){setTimeout(function(){var U=v.localToGlobal(c.drawX,c.drawY);c.pullShape.c().s(Y).ss(c.pullThickness).mt(fe.mouseX,fe.mouseY).lt(U.x,U.y)},10)}),c.ppsEvent=c.on("stop",function(){c.pullShape.removeFrom(),c.pullShape.c()}),c.ppmEvent=J.on("stagemousedown",function(){c.pullShape.addTo(J),c.immediate(fe.mouseX,fe.mouseY),c.motionController&&c.motionController.immediate(fe.mouseX,fe.mouseY)})}function ie(){c.ppdEvent&&c.off("drawing",c.ppdEvent),c.ppsEvent&&c.off("stop",c.ppsEvent),c.ppmEvent&&c.off("stagemousedown",c.ppmEvent),c.pullShape&&c.pullShape.dispose()}y=[];var q=[];this.saveState=function(J,fe,U){var ue=J.type=="Container"?"paper":"line",ke={paper:c.paper};ke[ue]=J,ke[ue+"Transform"]={x:J.x,y:J.y,r:J.rotation,a:J.alpha,rX:J.regX,rY:J.regY,sX:J.scaleX,sY:J.scaleY,skX:J.skewX,skY:J.skewY,v:J.visible},!n(fe)&&!n(U)&&fe!=U&&(ke.startLayer=fe,ke.endLayer=U),y.push(ke),c.dispatchEvent("recordUndo"),y.length>c.undoLevels&&y.shift()};var z={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var J=y.pop();if(J){if(q.push(J),J.clear){for(var fe=0;fe<J.clear.length;fe++)J.paper.addChild(J.clear[fe]);J.paper.addChild(o)}else J.line&&J.lineTransform?(n(J.startLayer)||(o.top(),J.paper.setChildIndex(J.line,de)),ce("line",J.line)):J.line?J.line.removeFrom():J.paperTransform&&ce("paper",J.paper);c.lastPaper=c.paper,J.paper!=c.paper&&(c.paper=J.paper,c.dispatchEvent("paperChange")),c.dispatchEvent("change"),c.dispatchEvent("undo"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&c.stage&&c.stage.update()}};function ce(J,fe){for(var U,ue=y.length-1;ue>=0;ue--)if(y[ue][J]==fe&&y[ue][J+"Transform"]){U=y[ue][J+"Transform"];break}U||(U=t.copy(z)),fe.x=U.x,fe.y=U.y,fe.alpha=U.a,fe.rotation=U.r,fe.regX=U.rX,fe.regY=U.rY,fe.scaleX=U.sX,fe.scaleY=U.sY,fe.skewX=U.skX,fe.skewY=U.skY,fe.visible=U.v,J=="line"&&h&&(fe.regX=(S*k-S)/2,fe.regY=(X*k-X)/2)}this.redo=function(){var J=q.pop(),fe,U;J&&(y.push(J),J.clear?(J.paper.removeAllChildren(),J.paper.addChild(o)):J.line&&J.lineTransform?(n(J.endLayer)||(o.top(),J.paper.setChildIndex(J.line,R)),U=J.lineTransform,fe=J.line):J.line?J.line.addTo(J.paper):J.paperTransform&&(U=J.paperTransform,fe=J.paper),fe&&(fe.x=U.x,fe.y=U.y,fe.alpha=U.a,fe.rotation=U.r,fe.regX=U.rX,fe.regY=U.rY,fe.scaleX=U.sX,fe.scaleY=U.sY,fe.skewX=U.skX,fe.skewY=U.skY,fe.visible=U.v),c.lastPaper=c.paper,J.paper!=c.paper&&(c.paper=J.paper,c.dispatchEvent("paperChange")),c.dispatchEvent("change"),c.dispatchEvent("redo"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&c.stage&&c.stage.update())},c.ctrlKey=!1,c.shiftKey=!1,c.ctrlKeyCheck=!1,c.zimkeydownEvent=function(J){c.ctrlKey=J.ctrlKey,c.shiftKey=J.shiftKey,J.keyCode==17&&I&&!c.ctrlKeyCheck&&(c.ctrlKeyCheck=!0,v.noDrag(),v.drag({onTop:w,all:!0})),!(c.undoLevels<=0)&&c.undoKeys&&(J.ctrlKey&&(J.shiftKey&&J.keyCode==90||J.keyCode==89)?c.redo():J.ctrlKey&&J.keyCode==90&&c.undo(),D&&D.ctrlKey&&c.write&&(c.lastWrite=c.write,c.write=!1))},j.addEventListener("keydown",c.zimkeydownEvent),c.zimkeyupEvent=function(J){J.keyCode==17&&I&&c.ctrlKeyCheck&&(c.ctrlKeyCheck=!1,v.noDrag(),v.drag({onTop:w})),J.ctrlKey||(c.ctrlKey=!1),J.shiftKey||(c.shiftKey=!1),D&&!D.ctrlKey&&c.write==!1&&(c.write=c.lastWrite)},j.addEventListener("keyup",c.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return v},set:function(J){J.type=="Container"&&(v=J,o.addTo(v,0,!1),v.shape=o,c.dampX.immediate(c.x),c.dampY.immediate(c.y),c.lastX=c.lastMidX=c.finishX=c.x,c.lastY=c.lastMidY=c.finishY=c.y,i=="barbwire"&&o.graphics.s(t.Pick.choose(r)).ss(t.Pick.choose(e)*c.sizeScale*c.sizeFactor,u),o.graphics.mt(c.x,c.y),v.parent||v.addTo(c.parent,c.parent.getChildIndex(c)),n(v.paperNum)&&(v.paperNum=++c.paperNum,E&&v.on("mousedown",function(fe){c.lastSelected=fe.target,c.nibEvent&&c.stage.off("stagemousemove",c.nibEvent);var U=fe.target.paper;U&&(U!=c.paper&&(c.paper=U,c.dispatchEvent("paperChange")),c.shiftKey&&(c.ctrlKey?c.clear():(fe.target.visible=!1,c.undoLevels>0&&c.saveState(fe.target),c.dispatchEvent("change"))))}),A&&v.on("dblclick",function(fe){fe.target.visible=!1,c.undoLevels>0&&c.saveState(fe.target)}),A&&v.hold(function(fe){fe.target.visible=!1,c.undoLevels>0&&c.saveState(fe.target)}),I&&(v.on("mousedown",function(fe){N=fe.target.stage,c.draggingCheck=!0,!(c.shiftKey&&E)&&(m=fe.stageX/t.scaX,O=fe.stageY/t.scaY,o.top(),de=v.getChildIndex(fe.target))}),v.drag({onTop:w}),v.on("pressup",function(fe){if(!(E&&c.shiftKey)&&fe.target.visible!=!1&&!(c.undoLevels<=0)){if(Math.abs(fe.stageX/t.scaX-m)<1&&Math.abs(fe.stageY/t.scaY-O)<1){w&&(o.top(),R=v.getChildIndex(fe.target),de!=R&&c.saveState(fe.target,de,R));return}c.ctrlKey?(c.saveState(v),c.dispatchEvent("paperChange")):(o.top(),R=v.getChildIndex(fe.target),c.saveState(fe.target,de,R)),c.dispatchEvent("change"),o.top()}}))))}}),Object.defineProperty(this,"write",{get:function(){return d},set:function(J){d&&J===!1&&(c.finishX=c.x,c.finishY=c.y),!d&&J&&(o.graphics.es(),o.graphics.ef(),c.dampX.immediate(c.x),c.dampY.immediate(c.y),c.lastX=c.lastMidX=c.x,c.lastY=c.lastMidY=c.y),d=J}}),Object.defineProperty(this,"size",{get:function(){return e},set:function(J){o.graphics.es(),o.graphics.ef(),e=J,i!="splatter"&&o.graphics.ss(t.Pick.choose(e)*c.sizeScale*c.sizeFactor,u)}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(J){r=J,o.graphics.es(),o.graphics.ef(),i!="splatter"&&o.graphics.s(t.Pick.choose(r))}}),Object.defineProperty(this,"penType",{get:function(){return i},set:function(J){i=J,o.graphics.ef().es(),i!="splatter"?o.graphics.s(t.Pick.choose(r)):o.graphics.s(t.Pick.choose(r)).ss(t.Pick.choose(e)*c.sizeScale*c.sizeFactor,u)}}),Object.defineProperty(this,"end",{get:function(){return u},set:function(J){u=J}}),Object.defineProperty(this,"damp",{get:function(){return l},set:function(J){l=J,c.dampX.damp=l,c.dampY.damp=l}}),Object.defineProperty(this,"spread",{get:function(){return a},set:function(J){a=J}});var Ie,K;this.setColorRange=function(J,fe){return n(fe)?(Ie=c.color,K=J):n(J)?(Ie=c.color,K=fe):(Ie=J,K=fe),c};var xe=0;Object.defineProperty(c,"colorRange",{get:function(){return xe},set:function(J){xe=J,!n(Ie)&&!n(K)&&(c.color=t.colorRange(Ie,K,J))}}),Object.defineProperty(this,"borderColor",{get:function(){return s},set:function(J){s=J}}),Object.defineProperty(this,"borderWidth",{get:function(){return f},set:function(J){f=J}}),Object.defineProperty(this,"pullColor",{get:function(){return Y},set:function(J){if(n(J||J==-1))ie(),Y=null;else if(n(Y)){Y=J;var fe=N||zdf.stage;se(fe)}else Y=J}}),c.setPen=function(J){c.dampX.immediate(c.x),c.dampY.immediate(c.y),c.lastX=c.lastMidX=c.finishX=c.x,c.lastY=c.lastMidY=c.finishY=c.y,n(J)&&(J=i),n(L[J])&&(J="line"),c.penType=i=J;var fe=t.merge(G,L[J]);for(var U in fe)c[U]!=fe[U]&&(c[U]=fe[U]);return c},c.immediate=function(J,fe){return n(J)||(c.x=J,c.dampX.immediate(c.x),c.lastX=c.lastMidX=c.finishX=c.x),n(fe)||(c.y=fe,c.dampY.immediate(c.y),c.lastY=c.lastMidY=c.finishY=c.y),c},c.clear=function(){for(var J=[],fe=0;fe<v.numChildren-1;fe++)J.push(v.getChildAt(fe));return y.push({paper:v,clear:J}),y.length>c.undoLevels&&y.shift(),c.dispatchEvent("recordUndo"),v.removeAllChildren(),o.graphics.clear(),v.addChild(o),c.dispatchEvent("change"),c.stage&&c.stage.update(),c},this.deleteSegment=function(J){J.visible=!1,c.undoLevels>0&&c.saveState(J)},this.clone=function(){return this.cloneChildren(this.cloneProps(new t.Pen(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z)))},c.dispose=function(J,fe,U){return n(J)&&(J=!0),j.removeEventListener("keydown",c.zimkeydownEvent),j.removeEventListener("keyup",c.zimkeyupEvent),N&&c.nibEvent&&N.off("stagemousemove",c.nibEvent),N&&c.stageDown&&N.off("stagemousedown",c.stageDown),N&&c.stageUp&&N.off("stagemouseup",c.stageUp),N&&c.upEvent&&N.off("stagemouseup",c.upEvent),t.Ticker.remove(c.ticker),c.removeAllEventListeners(),C&&C.removeFrom(),J&&(c.shape&&c.shape.dispose(),c.paper&&c.paper.dispose(),h&&(c.bitmap&&c.bitmap.dispose(),c.bitmap=null),c.zimContainer_dispose(U),v=o=c.shape=null),!0},V!==!1&&t.styleTransforms(this,re)},t.extend(t.Pen,t.Container,["dispose","clone"],"zimContainer",!1),t.SoundWave=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",y;if(y=at(t.SoundWave,arguments,k,this))return y;De("69.95"),this.type="SoundWave",n(e)&&(e=120),n(r)&&(r="mic"),n(i)&&(i=120/1024),n(l)&&(l=.85),n(a)&&(a=r=="mic"?-80:(r.oscillator,-100)),n(s)&&(s=r=="mic"?-40:(r.oscillator,-10)),n(f)&&(f=function(B,F){return B*(.5+F*1/Math.pow(t.SoundWave.bufferLength,.95))}),n(u)&&(u=r=="mic"?0:(r.oscillator,30)),n(v)&&(v=r=="mic"?1:r.oscillator?5:10),n(C)&&(C=0),n(h)&&(h=5),t.SoundWave.bufferLength=1024;var x=e,I=this;I.baseline=u,I.magnify=v,I.reduce=C,I.input=r,I.adjust=h;var w;r.type=="Tone"||r.type=="SynthSound"?w=r.audioContext:w=new(j.AudioContext||j.webkitAudioContext);var E=I.analyser=w.createAnalyser();E.minDecibels=a,E.maxDecibels=s,E.smoothingTimeConstant=l,Object.defineProperty(this,"smoothing",{get:function(){return E.smoothingTimeConstant},set:function(B){E.smoothingTimeConstant=B}}),Object.defineProperty(this,"num",{get:function(){return x},set:function(B){x=B,A=Math.floor(i*t.SoundWave.bufferLength/x),A<1&&je("ZIM SoundWave: num is too big")}}),this.setInput=function(B){if(I.input=B,B=="mic"){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(P){var Y=I.source=w.createMediaStreamSource(P);T(Y)}).catch(function(P){je("ZIM SoundWave: Error occured: "+P)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(P){var Y=I.source=w.createMediaStreamSource(P);T(Y)},function(P){je("ZIM SoundWave: Error occured: "+P)}):je("ZIM SoundWave: Sorry, mic not supported");return}else if(B.type=="Tone")T(B.compressor);else if(B.type=="SynthSound")T(B.gain);else{if(B.type&&B.type=="sound"){je("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");return}var F,D;B.playbackResource?(F=B.playbackResource,D=w.createMediaElementSource(F)):(F=B,D=w.createMediaElementSource(F)),T(D)}},this.setInput(r);var A,p;function T(B){if(p&&p.disconnect(E),p=B,n(g)||g!==0&&g!==1)B.connect(E),r!="mic"&&E.connect(w.destination);else{var F=new ChannelSplitterNode(w,{numberOfOutputs:2});B.connect(F),F.connect(E,g);var D=new ChannelMergerNode(w,{numberOfInputs:2});E.connect(D,0,g),r!="mic"&&D.connect(w.destination)}if(E.fftSize=t.SoundWave.bufferLength*2,A=Math.floor(i*t.SoundWave.bufferLength/x),A<1){je("ZIM SoundWave: include param is too small or num param is too big");return}var P=E.frequencyBinCount,Y=new Uint8Array(P),_=300,V=0,b=0,Z=Math.round(60*I.adjust*.8),$=new t.Damp(_,.01);I.calculate=function(Q){n(Q)&&(Q=!0),E.getByteFrequencyData(Y);var re=Y.map(f);if(A==1&&!Q)return re;var G=[],L=0,c;for(c=0;c<=i*t.SoundWave.bufferLength;c++)L+=re[c],c!=0&&c%A==0&&(G.push(Math.max(0,(L/A-I.baseline)*I.magnify-I.reduce)),L=0);var d=G.length;if(r!="mic"&&(G[0]*=.75,G[1]*=.85,G[2]*=.9,G[d-2]*=.8,G[d-1]*=.75),G[d-1]*=1.3,G[d-2]*=1.2,G[d-3]*=1.1,Q){var o=[];Z++,Z>=60*I.adjust&&(_=V/Z,V=0,b=0,Z=0);var S=$.convert(_);for(c=0;c<d;c++)G[c]>b&&(b=G[c]),o[c]=Math.min(1,S!=0?G[c]/S:0);return V+=b,o}return G},setTimeout(function(){I.dispatchEvent("ready")},50)}this.dispose=function(B){return B&&w&&w.close(),E&&E.disconnect(),!0}},t.extend(t.SoundWave,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.Synth=function(e,r){De("69.955"),this.type="Synth",n(e)&&(e=.3),n(r)&&(r=220),this.volume=e,this.frequency=r;var i=this,l;this.play=function(a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe){var J=Array.prototype.slice.call(arguments);if(J=J.shift(),!l&&(j.AudioContext||j.webkitAudioContext)&&(l=new(j.AudioContext||j.webkitAudioContext),l.z=l.createBufferSource,l.createBufferSource=function(ue){return ue==null&&(ue=l.z()),ue.start=ue.start||function(ke){l.noteOn(ke)},ue}),!!l){for(a=a!=null?et(a):0,s=s!=null?et(s):.3,f=f!=null?et(f):.05,u=u!=null?et(u):220,v=v!=null?et(v):0,C=C!=null?et(C):0,h=h!=null?et(h):.1,g=g!=null?et(g):0,k=k!=null?et(k):1,y=y!=null?et(y):0,x=x!=null?et(x):0,I=I!=null?et(I):0,w=w!=null?et(w):0,E=E!=null?et(E):0,A=A!=null?et(A):0,p=p!=null?et(p):0,T=T!=null?et(T):0,B=B!=null?et(B):0,P=P!=null?et(P):0,F=F!=null?et(F):1,D=D!=null?et(D):0,Q=Q!=null?et(Q):44100,re==null&&(re=99+v*Q),G==null&&(G=C*Q),L==null&&(L=h*Q),c==null&&(c=D*Q),d==null&&(d=B*Q),o==null&&(o=Math.PI*2),S==null&&(S=function(ue){return ue>0?1:-1}),X==null&&(X=re+c+G+L+d),m==null&&(m=y*=500*o/Math.pow(Q,2)),O==null&&(O=u*=(1+f*2*Math.random()-f)*o/Q),de==null&&(de=S(p)*o/4),R==null&&(R=0),N==null&&(N=0),se==null&&(se=0),ie==null&&(ie=0),q==null&&(q=0),z==null&&(z=0),ce==null&&(ce=1),Ie==null&&(Ie=[]),K==null&&(K=l.createBufferSource()),xe==null&&(xe=l.createBuffer(1,X,Q)),K.connect(l.destination);se<Math.floor(X);Ie[se++]=z)++q>T*100&&(q=0,z=R*u*Math.sin(N*p*o/Q-de),z=g?g>1?g>2?g>3?Math.sin(Math.pow(z%o,3)):Math.max(Math.min(Math.tan(z),1),-1):1-(2*z/o%2+2)%2:1-4*Math.abs(Math.round(z/o)-z/o):Math.sin(z),z=(E?1-P+P*Math.sin(o*se/E):1)*S(z)*Math.pow(Math.abs(z),k)*s*i.volume*(se<re?se/re:se<re+c?1-(se-re)/c*(1-F):se<re+c+G?F:se<X-d?(X-se-d)/L*F:0),z=d?z/2+(d>se?0:(se<X-d?1:(se-X)/d)*Ie[se-d|0]/2):z),R+=1-A+(Math.sin(se)+1)*1e9%2*A,N+=1-A+(Math.pow(Math.sin(se),2)+1)*1e9%2*A,u+=y+=x*500*o/Math.pow(Q,3),ce&&++ce>w*Q&&(u+=I*o/Q,O+=I*o/Q,ce=0),E&&++ie>E*Q&&(u=O,y=m,ie=1,ce=ce||1);xe.getChannelData(0).set(Ie),K.buffer=xe;var fe=new Fe.EventDispatcher;fe.type="SynthSound",fe.audioContext=l,fe.gain=l.createGain(),K.connect(fe.gain),fe.gain.connect(l.destination),fe.pan=l.createStereoPanner(),fe.pan.pan.value=a,K.connect(fe.pan),fe.pan.connect(l.destination),K.start(),fe.duration=Ie.length/Q,fe.playing=!0,fe.stop=function(){clearTimeout(fe.completeID),clearInterval(fe.repeatID),fe.gain.gain.setTargetAtTime(0,l.currentTime,.1),fe.playing=!1,setTimeout(function(){l.close()},.1*1e3)};var U;return fe.repeat=fe.loop=function(ue,ke){U=0,ue===!0&&(ue=null),n(ke)&&(ke=0),clearTimeout(fe.completeID);function ne(){return fe.duration+et(ke)}return fe.repeatID=t.interval(ne,function(){U++,ue&&U>=ue?(fe.dispatchEvent("complete"),fe.repeatID.clear(),fe.playing=!1):(fe.dispatchEvent("loop"),i.play.apply(i,J))}),fe},fe.play=function(){return i.play.apply(i,J),fe.playing=!0,fe},fe.completeID=setTimeout(function(){fe.dispatchEvent("complete")},(Ie.length/Q+.1)*1e3),fe}},this.Tone=function(a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D){var P="volume, note, shape, pan, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",Y;if(Y=at(i.Tone,arguments,P,this))return Y;this.type="Tone";var _=this,V;n(a)&&(a=i.volume),n(s)&&(s=i.frequency),n(f)&&(f=t.SINE),n(u)&&(u=0),n(C)&&(C=.02),n(h)&&(h=.05),n(F)&&(F=0),j.AudioContext||j.webkitAudioContext?V=this.audioContext=new(j.AudioContext||j.webkitAudioContext):ht&&je("Synth tone() needs AudioContext"),a=et(a),s=et(s),f=et(f),u=et(u),v=et(v),C=et(C),h=et(h),g=et(g),k=et(k),y=et(y),x=et(x),I=et(I),w=et(w),E=et(E),A=et(A),p=et(p),T=et(T),B=et(B),F=et(F);var b=mt(v);i.duration=v,v&&(v=v*(b=="s"?1:1/1e3)),F&&(mt(F),F=F*(b=="s"?1:1/1e3)),i.attack=C,i.release=h,i.rampDuration=.02,i.hush=.1;var Z=this.note=this.oscillator=V.createOscillator();Z.frequency.value=t.Synth.note(s),t.Synth.setShape(Z,f);var $=this.filter=V.createBiquadFilter();$.type="bandpass",$.frequency.value=Z.frequency.value,$.Q.value=0;var Q=this.gain=Z.gain=V.createGain();Q.type="gain",Q.gain.setValueAtTime(0,V.currentTime);var re=this.compressor=V.createDynamicsCompressor();re.threshold.setValueAtTime(-50,V.currentTime),re.knee.setValueAtTime(40,V.currentTime),re.ratio.setValueAtTime(12,V.currentTime),re.attack.setValueAtTime(0,V.currentTime),re.release.setValueAtTime(.25,V.currentTime);var G=this.panNode=V.createStereoPanner();this.panNode.pan.value=u,Z.connect($),$.connect(G),G.connect(Q),Q.connect(re),re.connect(V.destination);function L(q,z){n(q)&&(q=V.currentTime),n(z)&&(z=i.attack),Z.start(q);var ce=j.zdf&&new Date().getTime()-j.zdf.startTime<200?.1:i.attack;Q.gain.setValueAtTime(0,V.currentTime+.1),Q.gain.linearRampToValueAtTime(a*i.hush,V.currentTime+.1+ce)}L(F),this.stop=function(q){n(q)&&(q=i.release),Q&&d(Q.gain,0,!0,q),N&&d(N.gain,0,!0,q),O&&d(O.gain,0,!0,q),setTimeout(function(){_.dispatchEvent("complete")},(.6+q+i.rampDuration)*1e3),setTimeout(function(){V&&!V.iamClosed&&(V.iamClosed=!0,V.close())},(q+1)*1e3),setTimeout(function(){o&&_.removeWah()},(q+1)*1e3)},v&&this.stop(F+v-.1);var c=this.notes=[Z];this.addNote=function(q,z,ce,Ie,K,xe){n(Ie)&&(Ie=!0),n(K)&&(K=!1),n(q)&&(q=.1),n(xe)&&(xe=0);var J={type:"Note"};J._volume=q,J._note=t.Synth.note(z),c.push(J);var fe=J.oscillator=V.createOscillator();fe.frequency.value=J._note,fe.type=t.Synth.setShape(fe,ce);var U=J.gain=V.createGain();return d(U.gain,J._volume,!0),U.connect(Ie?$:Q),fe.connect(U),O&&K&&O.connect(fe.frequency),fe.start(V.currentTime+xe),Object.defineProperty(J,"volume",{get:function(){return J._volume},set:function(ue){n(ue)||(J._volume=et(ue),d(J.gain.gain,J._volume,!0))}}),Object.defineProperty(J,"note",{get:function(){return J._note},set:function(ue){n(ue)||(J._note=et(ue),d(J.oscillator.frequency,t.Synth.note(J._note)))}}),J},this.removeNote=function(q){var z=c.indexOf(q);return z>=0&&c.splice(z,1),q.oscillator.disconnect(),q=null,this};function d(q,z,ce,Ie){n(z)&&(z=0),n(Ie)&&(Ie=i.rampDuration),ce?(q.cancelScheduledValues(V.currentTime),q.linearRampToValueAtTime(q.value,V.currentTime+.02),q.linearRampToValueAtTime(z,V.currentTime+.05+Ie)):(q.cancelScheduledValues(V.currentTime),q.setTargetAtTime(z,V.currentTime,Ie))}this.ramp=function(q,z){d(Q.gain,q*i.hush,!0,z)},this.rampPan=function(q,z){d(G.pan,q,!1,z)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),t.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),t.wiggle.apply(null,arguments),this},t.addWires(this);var o,S;function X(){n(g)&&(g=1e3),n(k)&&(k=1),n(y)&&(y="sine"),n(x)&&(x=5),n(I)?I=_.oscillator.frequency.value:I=t.Synth.note(I),n(S)&&(S=200),_.filter.Q.value=x,o=_.wah=i.oscillator(k,g/2,y,I+g/2+S),o.ticker=t.Ticker.add(function(){_.filter.frequency.value=_.wah.amplitude})}(g||k||!n(y)||!n(x))&&X(),_.removeWah=function(){t.Ticker.remove(o.ticker),o.dispose(),o=_.wah=null,_.filter.Q.value=0};var m,O;function de(){n(E)&&(E=5),n(A)&&(A="sine"),n(w)&&(w=10),m=_.vibrato=V.createOscillator(),O=_.vibratoGain=V.createGain(),O.gain.value=0,m.frequency.value=E,t.Synth.setShape(m,A),m.connect(O),O.connect(Z.frequency),m.start(0),O.gain.setValueAtTime(0,V.currentTime+.1),O.gain.linearRampToValueAtTime(w,V.currentTime+.1+i.attack)}(w||E||!n(A))&&de(),_.removeVibrato=function(){d(O.gain,0,!0),setTimeout(function(){O.disconnect(),m.disconnect(),m.stop(),m=null},(i.rampDuration+1)*1e3)};var R,N;function se(){n(T)&&(T=5),n(B)&&(B="sine"),R=_.tremelo=V.createOscillator(),N=_.tremeloGain=V.createGain(),N.gain.value=0,R.frequency.value=T,t.Synth.setShape(R,B),R.connect(N),N.connect(Q.gain),R.start(0);var q=j.zdf&&new Date().getTime()-j.zdf.startTime<200?.1:i.attack;N.gain.setValueAtTime(0,V.currentTime+.1),N.gain.linearRampToValueAtTime(a*i.hush,V.currentTime+.1+q)}(p||T||!n(B))&&se(),_.removeTremelo=function(){d(N.gain,0,!0),setTimeout(function(){N.disconnect(),R.disconnect(),R.stop(),R=null},(i.rampDuration+1)*1e3)},Object.defineProperty(this,"volume",{get:function(){return a},set:function(q){if(!n(q)){var z;R?(Q.gain.value?z=N.gain.value/Q.gain.value:z=a?p/a:0,a=et(q),a=t.constrain(a,.001),d(N.gain,a*z*i.hush,!0)):a=et(q),d(Q.gain,a*i.hush,!1,i.rampDuration)}}}),this.paused=!1;var ie=a;this.pause=function(q){n(q)&&(q=!0),q?(ie=_.volume,_.volume=0):_.volume=ie},D&&(n(t.blurCheck)&&t.setBlurDetect(),t.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return r},set:function(q){n(q)||(r=et(q),d(Z.frequency,q))}}),Object.defineProperty(this,"note",{get:function(){return s},set:function(q){n(q)||(s=et(q),Z.frequency.value=t.Synth.note(s))}}),Object.defineProperty(this,"shape",{get:function(){return f},set:function(q){f=et(q),t.Synth.setShape(Z,f)}}),Object.defineProperty(this,"pan",{get:function(){return u},set:function(q){n(q)||(u=et(q),d(G.pan,u,!1,.1))}}),Object.defineProperty(this,"currentTime",{get:function(){return V.currentTime},set:function(){ht&&je("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return g},set:function(q){n(q)||(g=et(q),g=t.constrain(g,i.wahAmountMin,i.wahAmountMax),n(o)?X():o.gain=g/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return k},set:function(q){n(q)||(k=et(q),k=t.constrain(k,i.wahRateMin,i.wahRateMax),n(o)?X():o.frequency=k)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return x},set:function(q){x=et(q),x=t.constrain(x,i.wahThroatMin,i.wahThroatMax),n(o)?X():$.Q.value=x}}),Object.defineProperty(this,"wahNote",{get:function(){return I},set:function(q){n(q)||(I=et(q),n(o)?X():o.offset=I+g/2+S)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return S},set:function(q){n(q)||(S=et(q),n(o)?X():o.offset=I+g/2+S)}}),Object.defineProperty(this,"wahShape",{get:function(){return y},set:function(q){y=et(q),n(o)?X():o.shape=y}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return p},set:function(q){n(q)||(p=et(q),n(R)?se():N.gain.setValueAtTime(p,V.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return T},set:function(q){n(q)||(T=et(q),n(o)?se():R.frequency.value=T)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return B},set:function(q){B=et(q),n(R)?se():t.Synth.setShape(R,B)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return w},set:function(q){n(q)||(w=et(q),n(m)?de():O.gain.setValueAtTime(w,V.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return E},set:function(q){n(q)||(E=et(q),n(m)?de():m.frequency.value=E)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return A},set:function(q){A=et(q),n(m)?de():t.Synth.setShape(m,A)}})},t.extend(this.Tone,Fe.EventDispatcher),this.tone=function(a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(a,s,f,u){var v="frequency, gain, shape, offset",C;if(C=at(i.Oscillator,arguments,v,this))return C;this.type="Oscillator",n(a)&&(a=1),n(s)&&(s=10),n(f)&&(f="sine"),n(u)&&(u=0),this.frequency=et(a),this.gain=et(s),this.shape=et(f),this.shape=="saw"&&(this.shape="sawtooth"),this.offset=et(u),this.paused=!1;var h=this,g=0,k=t.Ticker.framerate;this.ticker=t.Ticker.add(function(){if(!h.paused){var y=0;h.shape=="sine"?y=Math.sin(h.frequency*(Math.PI*2*(g/k))):h.shape=="square"?(y=Math.sin(h.frequency*(Math.PI*2*(g/k))),y=y<=0?0:1):h.shape=="triangle"?y=2/Math.PI*Math.asin(Math.sin(h.frequency*Math.PI*2*g/k)):h.shape=="sawtooth"||h.shape=="saw"?y=-2/Math.PI*Math.atan(1/Math.tan(h.frequency*Math.PI*g/k)):h.shape=="zap"&&(y=2/Math.PI*Math.atan(1/Math.tan(h.frequency*Math.PI*g/k))),h.amplitude=y*h.gain+h.offset,g++}}),this.pause=function(y){h.paused=y},this.dispose=function(){t.Ticker.remove(this.ticker)}},this.oscillator=function(a,s,f,u){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},t.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],t.Synth.major=["C","D","E","F","G","A","B","C4"],t.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],t.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],t.Synth.setShape=function(e,r){if(!n(e)){n(r)&&(r="sine"),r=="saw"&&(r="sawtooth");var i;if(typeof r=="number")r=t.Synth.shapes[r],r||(r="sine");else if(r.real&&r.imag)i=e.context.createPeriodicWave(new Float32Array(r.real),new Float32Array(r.imag));else if(r.constructor==PeriodicWave)i=r;else if(typeof r=="string"){var l=t.Synth.shapes.indexOf(r);if(l<0&&(r="sine"),r=="noise"){for(var a=4096,s=new Float32Array(a),f=new Float32Array(a),u=1;u<a;u+=2)f[u]=t.shuffle([0,.5,1])[0];i=e.context.createPeriodicWave(s,f)}else r=="tan"&&(r="sawtooth")}else r="sine";i?(e.setPeriodicWave(i),r="custom"):e.type=r}},t.Synth.getNote=function(e,r){return n(r)&&(r=0),e*Math.pow(2,r/12)},t.Synth.note=function(e){if(typeof e=="string"){var r=e.substr(0,1).toUpperCase(),i=t.loop(e,function(u){if(!isNaN(u))return Number(u)});i=i!==!0&&!isNaN(i)?i:3;var l=t.Synth.notes.indexOf(r);l<0&&(l=9);var a=e.match(/b/g),s=e.match(/#/g);a=a?a.length:0,s=s?s.length:0;var f=(i-3)*12+l+s-a;return t.Synth.getNote(t.Synth.getNote(220,-9),f)}else return typeof e!="number"&&(e=220),e},t.Synth.wave=function(e,r){if(j.AudioContext||j.webkitAudioContext){var i=new(j.AudioContext||j.webkitAudioContext);if(e.real)r=e.imag,e=e.real;else if(n(r)&&ht){je("Synth.wave() - pass in asset('wave.json') or real and imag properties");return}return e.constructor!==Float32Array&&(e=new Float32Array(e)),r.constructor!==Float32Array&&(r=new Float32Array(r)),i.createPeriodicWave(e,r)}},t.Synth.drawWave=function(e,r,i,l,a,s,f,u,v){var C="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV",h;if(h=at(t.Synth.drawWave,arguments,C))return h;var g=45,k=45;e=et(e),n(i)&&(i=2),n(r)&&(r=t.darker),n(u)&&(u=8),n(v)&&(v=u);var y=u,x=v,I=new t.Container(g,k);I.mouseChildren=!1,n(l)||(I.backing=new t.Rectangle(g,k,l,a,s,f).addTo(I)),I.shape=new t.Shape(g,k).addTo(I).s(r).ss(i);var w=g-y*2;return e=="square"?I.shape.mt(y,k/2).lt(y,x+3).lt(g/2,x+3).lt(g/2,k-x-3).lt(g-y,k-x-3).lt(g-y,k/2):e=="triangle"?I.shape.mt(y,k/2).lt(y+w/4,x+3).lt(y+w*3/4,k-x-3).lt(g-y,k/2):e=="sawtooth"||e=="saw"?I.shape.mt(y,k/2).lt(g/2,x+2).lt(g/2,k-x-2).lt(g-y,k/2):e=="zap"?I.shape.mt(y,k/2).lt(g/2,k-x-2).lt(g/2,x+2).lt(g-y,k/2):I.shape.mt(y,k/2).bt(g/2,0-15,g/2,k+15,g-y,k/2),I.type=e,I},t.VR=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",y;if(y=at(t.VR,arguments,k,this))return y;if(De("69.98"),this.type="VR",!j.zdf){ht&&je("VR() - please use ZIM Frame");return}var x=j.zdf;(n(g)||!g.getBounds||!g.getBounds().width)&&(g=x.stage),n(r)&&(r=0),n(i)&&(i=100),n(s)&&(s=.5),n(l)&&(l=0),n(a)&&(a=60),n(f)&&(f=.1),n(u)&&(u=0),n(v)&&(v=!1),n(C)&&(C=!0),n(h)&&(h=!0),this.angle=r,this.currentAngle=u,t.mobile()&&(h=!1);var I=this,w=g.width,E=g.height;I.zimContainer_constructor();var A=I.left=new t.Container(w/2,E,null,null,!1),p=new t.Rectangle(w/2,E,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1);A.addChild(p);var T=I.right=A.clone();I.addChild(A,T),T.x=w/2;var B=I.contentLeft=I.content=e,F=I.contentRight=e.clone();if(u!=0)var D=setTimeout(P,100);else P();function P(){B.addTo(A,null,!1).setMask(A.getChildAt(0)).pos({y:(g.height-B.height)/2,reg:!0}),F.addTo(T,null,!1).setMask(T.getChildAt(0)).pos({y:(g.height-B.height)/2,reg:!0})}var Y=[],_=[];function V(J,fe,U,ue){J.vrMatch=fe,fe.vrMatch=J,J.cacheCanvas&&fe.cache(),J.dep&&!n(J.depth)&&(Y.push(J),_.push(fe),n(U)||U.push(J),n(ue)||ue.push(fe),fe.dep(J.depth)),t.loop(J,function(ke,ne){V(ke,fe.getChildAt(ne),U,ue)})}V(B,F);function b(J,fe){t.loop(J,function(U){U.vrChannel=fe,U.vrStartX=U.x,r!=0&&i!=0&&(U.vrAngle=r,U.vrDistance=i),l!=0&&i!=0&&(U.vrParallax=l/100,U.vrParallaxDistance=0,r!=0&&(U.vrParallaxDamp=new t.Damp(0,f))),U.dep(U.depth)})}if(b(Y,"left"),b(_,"right"),r!=0&&i!=0){var Z=new t.Damp(180+u,s);Z.immediate(180+u);var $=!1,Q=!1;x.on("deviceorientation",function(J){re(Z.convert((J.rotation.z>180?-180:180)+J.rotation.z+u)-180)}),t.Ticker.always()}function re(J){I.currentAngle=J;var fe=-I.currentAngle*i/r;I.contentLeft.x=fe,I.contentRight.x=fe;var U;Math.round(I.currentAngle)<=-r/2&&!$?(U=new Fe.Event("boundaryout"),U.boundary="left",$=!0,I.dispatchEvent(U)):Math.round(I.currentAngle)>=r/2&&!Q?(U=new Fe.Event("boundaryout"),U.boundary="right",Q=!0,I.dispatchEvent(U)):Math.round(I.currentAngle)>-r/2&&Math.round(I.currentAngle)<r/2&&(U=new Fe.Event("boundaryin"),$?(U.boundary="left",I.dispatchEvent(U),$=!1):Q&&(U.boundary="right",I.dispatchEvent(U),Q=!1))}function G(J){var fe=J.parent.localToLocal(J.vrStartX,0,g),U=J.vrParallaxDamp.convert(J.vrChannel=="left"?I.contentLeft.x+fe.x-w/4:I.contentRight.x+fe.x-w/2-w/4);J.depth<=0&&!v&&(U=0),J.vrParallaxDistance=Math.max(-i/r*a/2,Math.min(i/r*a/2,U)),J.dep(J.depth)}if(l!=0&&i!=0){var L=new t.ProportionDamp(180-a/2,180+a/2,-a/2,a/2,f);L.immediate(180),x.on("deviceorientation",function(J){var fe=0;r==0&&l!=0&&i!=0&&(fe=L.convert((J.rotation.z>180?-180:180)+J.rotation.z)),d(fe)}),t.Ticker.always()}function c(J,fe){J.vrParallaxDistance=J.depth<=0&&!v?0:fe,J.dep(J.depth)}function d(J){r!=0&&i!=0?(t.loop(Y,G),t.loop(_,G)):(t.loop(Y,function(fe){c(fe,J)}),t.loop(_,function(fe){c(fe,J)}))}h&&i!=0&&(r!=0||l!=0)&&I.added(function(){var J={swipeAngle:0};I.swiper=new t.Swiper({swipeOn:I,target:J,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),t.Ticker.add(function(){r!=0&&i!=0&&re(J.swipeAngle),l!=0&&i!=0&&d(L.convert(J.swipeAngle+180))})});var o=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,S=o,X=!1;B.startRegX=B.regX,F.startRegX=F.regX;var m=this.adjuster=new t.Container(800,300,null,null,!1);p=m.backing=new t.Rectangle(m.width,m.height,t.lighter,null,null,null,null,null,null,!1).center(m).alp(1).sha("rgba(0,0,0,.2)",0,0,30),m.strip=new t.Rectangle(m.width,m.height/3,t.white,null,null,null,null,null,null,!1).center(m).alp(1),m.label=new t.Label({text:"slide to adjust center of left and right",size:28,color:t.dark,align:"center",valign:"center"}).center(m).pos({y:50,reg:!0});var O=m.close=new t.Rectangle(50,50,t.light,null,null,null,null,null,null,!1).addTo(m).mov(m.width-70,26),de=new t.Shape(-40,-40,80,80,null,!1);de.graphics.f(t.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),de.center(O).sca(.3),O.cur("pointer"),O.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){I.hideAdjuster(),se.currentValue=(se.max-se.min)/2+S,I.dispatchEvent("closed")});var R=new t.Circle(30,t.dark,null,null,null,null,null,null,!1).center(m).pos({x:m.width/4,reg:!0});R.shape.alpha=.2,new t.Circle(12,t.dark,null,null,null,null,null,!1).center(R);var N=new t.Circle(30,t.dark,null,null,null,null,null,!1).center(m).pos({x:m.width/4*3,reg:!0});N.shape.alpha=.2,new t.Circle(12,t.dark,null,null,null,null,null,null,!1).center(N);var se=m.slider=new t.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(m).pos({y:m.height-40,reg:!0});se.currentValue=(se.max-se.min)/2+o;var ie=new t.Proportion(se.min,se.max,R.x-m.width/4,R.x+m.width/4,-1),q=new t.Proportion(se.min,se.max,N.x-m.width/4,N.x+m.width/4);se.on("change",function(){R.x=ie.convert(se.currentValue),N.x=q.convert(se.currentValue)}),new t.Label("closer",24,null,t.silver).centerReg(m).pos({x:se.x-220,y:se.y,reg:!0}),new t.Label("farther",24,null,t.silver).centerReg(m).pos({x:se.x+220,y:se.y,reg:!0});var z=I.ok=new t.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:t.blue,rollBackgroundColor:t.green,shadowColor:-1,style:!1}).centerReg(m).sca(.8).pos({x:m.width-58,y:se.y,reg:!0});z.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=se.currentValue-(se.max-se.min)/2),K(),I.hideAdjuster(),I.dispatchEvent("saved"),I.dispatchEvent("closed")});var ce=I.zero=new t.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:t.yellow,rollBackgroundColor:t.green,shadowColor:-1,style:!1}).centerReg(m).sca(.8).pos({x:58,y:se.y,reg:!0});ce.on((kt?t.ACTIONEVENT=="mousedown":j.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){se.currentValue=(se.max-se.min)/2,R.x=ie.convert(se.currentValue),N.x=q.convert(se.currentValue)});var Ie=new t.Proportion(0,30,-g.width/4,g.width/4);function K(){var J=Ie.convert(se.currentValue);B.regX=B.startRegX+J,F.regX=F.startRegX-J}K(),this.showAdjuster=function(){if(X)return I;X=!0,R.x=ie.convert(se.currentValue),N.x=q.convert(se.currentValue),S=se.currentValue-(se.max-se.min)/2,m.scaleTo(g,100,100).center(this),g.stage.update()},this.hideAdjuster=function(){if(!X)return I;X=!1,m.removeFrom(this),g.stage.update()},this.position=function(J,fe,U){ue(J),ue(J.vrMatch);function ue(ke){ke.vrStartX=fe,ke.vrParallaxDamp&&ke.vrParallaxDamp.immediate(fe),ke.mov(fe,U)}return J},this.register=function(J){if(!J.parent||!J.parent.vrMatch)return ht&&je("ZIM VR() - please only register objects already inside content container"),J;var fe=J.clone().addTo(J.parent.vrMatch),U=[],ue=[];return V(J,fe,U,ue),b(U,"left"),b(ue,"right"),J},r!=0&&i!=0&&C&&(I.boundaryRight=new t.Container({style:!1}),new t.Circle(24,t.light,null,null,null,null,null,null,!1).addTo(I.boundaryRight).dep(-2),new t.Triangle(16,16,16,t.yellow,t.grey,null,null,null,-3,null,null,!1).rot(-90).center(I.boundaryRight).dep(-6),I.boundaryRight.center(e).mov(i/2+24),I.boundaryLeft=new t.Container({style:!1}),new t.Circle(24,t.light,null,null,null,null,null,null,!1).addTo(I.boundaryLeft).dep(-2),new t.Triangle(16,16,16,t.yellow,t.grey,null,null,null,-3,null,null,!1).rot(90).center(I.boundaryLeft).dep(-6),I.boundaryLeft.center(e).mov(-i/2-24),I.register(I.boundaryRight),I.register(I.boundaryLeft));function xe(J){var fe=Y.indexOf(J);Y.indexOf(J)>=0&&(Y.splice(fe,1),_.splice(fe,1)),t.loop(J,function(U){xe(U)})}this.remove=function(){return t.loop(arguments,function(J,fe){e.contains(fe)&&(xe(fe),fe.parent.removeChild(fe),fe.vrMatch.parent.removeChild(fe.vrMatch))}),I},this.resize=function(){w=g.width,E=g.height,A.getChildAt(0).widthOnly=T.getChildAt(0).widthOnly=w/2,A.getChildAt(0).heightOnly=T.getChildAt(0).heightOnly=E,T.x=w/2,A.setBounds(0,0,w/2,E),T.setBounds(0,0,w/2,E),u!=0?(clearTimeout(D),D=setTimeout(P,100)):P(),m.scaleTo(g,100,100).center(this,null,!1)}},t.extend(t.VR,t.Container,"clone","zimContainer",!1),t.scaX=1,t.scaY=1,t.Frame=function(e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re){var G="scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",L;if(L=at(t.Frame,arguments,G,this))return L;De("83"),ht&&ti("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var c=this;(!j.zdf||!j.zdf.type)&&(j.zimDefaultFrame=j.zdf=j.F=this),j.M=t.mobile();var d=Date;this.startTime=new d().getTime(),n(A)&&(A=!0);var o=!!j.HTMLCanvasElement;if(!o&&A){setTimeout(function(){c.dispatchEvent("failed")},100);return}var S=t.mobile();n(e)&&(e="full"),e=="outside"&&(e="fill"),n(u)||(j.PATH=u),n(h)&&(h=!S),n(g)&&(g=!0),n(k)&&(k=!1),n(y)&&(y="center"),n(x)&&(x="center");var X="";n(I)&&(j.zdf!=this?(X=t.makeID(null,5),I="myCanvas"+X):I="myCanvas");var m=mt(E);n(w)&&(w=20),n(E)&&(E=S?m=="s"?1:1e3:m=="s"?.03:30),n(p)&&(p=!1),n(D)&&(D=!1),n(P)&&(P="circles"),this.loadFailObj=P,n(Y)&&(Y=!1),n(_)&&(_=!0),this.retina=_,n(V)&&(V=!1),n(b)&&(b=!0),n(Z)&&(Z=!1),n($)&&($=10),n(re)&&(re=!1),re&&(g=!0);var O=$;c.maxNum=Q,p&&(_=!1),this.retina=_;var de=!1,R=!1;this.leftMouseDown=!1;function N(Ae){c.leftMouseDown=Ae.buttons===void 0?Ae.which===1:Ae.buttons===1,de&&!c.leftMouseDown&&c.dispatchEvent("mouseupplus"),R&&!c.leftMouseDown&&c.dispatchEvent("mouseupplusonly"),de=R=c.leftMouseDown}var se=["fit","fill","full"],ie,q,z;if(Z){this.shim=!0,Z.stage.frame=this;var ce=this.canvas=Z.canvas;this.scale=Z.stage.scaleX;var Ie,K;setTimeout(function(){xe(),K=function(){xe(),Ie&&clearTimeout(Ie),Ie=setTimeout(xe,50)},j.addEventListener("resize",K)},20),ie=Z.stage,q=ie.getBounds()?ie.getBounds().width:ce.width/ie.scaleX,z=ie.getBounds()?ie.getBounds().height:ce.height/ie.scaleY,ie.getBounds()||ie.setBounds(0,0,q,z),l=ce.style.backgroundColor,Xe(),xe()}else this.scale=1,this.x=0,this.y=0;function xe(){c.scale=Z.stage.scaleX;var Ae=ce.getBoundingClientRect();c.x=Ae.x+t.scrollX(),c.y=Ae.y+t.scrollY(),t.scaX=Fe.stageTransformable?1:Z.stage.scaleX,t.scaY=Fe.stageTransformable?1:Z.stage.scaleY}var J,fe,U=!1,ue,ke,ne=!1,ve=!1,we=!1;Z||(document.readyState==="interactive"||document.readyState==="complete"?setTimeout(function(){te()},200):document.addEventListener("DOMContentLoaded",te));var ee,le=!1,ye=e=="full"&&typeof InstallTrigger<"u";if(this.swapRotation=!1,S&&!j.parent){var oe=isNaN(j.innerWidth)?j.clientWidth:j.innerWidth,Me=isNaN(j.innerHeight)?j.clientHeight:j.innerHeight;this.swapRotation=(j.orientation==0||j.orientation==180)&&oe>Me||Math.abs(j.orientation)==90&&Me>oe}j.addEventListener("resize",Se);var ae;function Se(){if(Z){if(ie.canvas){var Ae=q=ie.canvas.width,Ze=z=ie.canvas.height;ie.setBounds(0,0,Ae,Ze)}c.dispatchEvent("resize");return}ae=Date.now()+E*(m=="s"?1e3:1),ye?le||(le=!0,ee=t.Ticker.update,t.tickerFrame||(t.Ticker.update=!1,t.tickerFrame=c),it(),He(),clearInterval(c.frameTime),c.frameTime=setInterval(function(){if(Date.now()>ae){clearInterval(c.frameTime),le=!1,c==t.tickerFrame&&(t.Ticker.update=ee);return}it(),He()},50)):(it(),He(),clearInterval(c.frameTime),c.frameTime=setInterval(function(){if(Date.now()>ae){clearInterval(c.frameTime);return}it(),He()},E*(m=="s"?1e3:1)<50?E*(m=="s"?1e3:1)+5:50))}c.loadAssetsCount=0,n(t.assets)&&(t.assets={},t.assetIDs={});var Le=[];Le[0]="h",Le[1]="c",Le[2]="o",Le[3]="p",Le[4]="e";var Ce=!1;function te(){if(we)return;if(we=!0,se.indexOf(e)==-1){if(ue=e,n(xn(ue))){je("Frame - scaling: HTML tag with id="+e+" must exist");return}ke=c.tag=xn(ue),c.scaling=e=n(r)||n(i)?"tag":"inline",I.indexOf("myCanvas")==0&&(I=ue+"Canvas"),ke.tagName.toLowerCase()=="canvas"&&(Ce=!0,I=ue)}else c.scaling=e;c.canvasID=I,n(r)&&(r=500),n(i)&&(i=500),q=r,z=i,n(a)||(c.outerColor=a),Re(),Qe(),S?(k&&setTimeout(function(){j.scrollTo(0,0)},50),setTimeout(Ae,100),E*(m=="s"?1e3:1)!=100&&setTimeout(Ae,E*(m=="s"?1e3:1))):(ne=!0,Oe());function Ae(){it(),ne=!0,Oe(),He(),ie&&ie.update()}if(n(f))ve=!0,Oe();else{var Ze;f.constructor=={}.constructor&&!(f.audioSprite||f.id||f.data||f.src)?Ze=c.loadAssets(t.merge(f,{progress:v,queueOnly:!0})):Ze=c.loadAssets({assets:f,path:u,progress:v,queueOnly:!0}),n(Ze)||!Ze.on?(ht&&je("Frame() - load failed"),ve=!0,Oe()):Ze.on("complete",function(){ve=!0,Oe()})}}function Oe(){if(ne&&ve&&!U)if(ie.width>=1&&ie.height>=1){if(!n(v)&&v.show&&v.hide(),c==j.zdf&&(j.S=ie,j.W=ie.width,j.H=ie.height),s&&typeof s=="function"&&s(c,ie,ie.width,ie.height),!c)return;if(C&&typeof C=="function"){var Ae=0;if(!c)return;c.updateID=t.Ticker.add(function(){C(++Ae,c,ie,ie.width,ie.height)}),c.pauseTicker=function(Ze){n(Ze)&&(Ze=!0),Ze?t.Ticker.remove(c.updateID):t.Ticker.add(c.updateID)}}c.dispatchEvent("ready"),U=!0,He(),ie.update()}else setTimeout(function(){it(),Oe()},50)}function Re(){var Ae;Ce?Ae=c.canvas=c.tag:(Ae=c.canvas=document.createElement("canvas"),Ae.setAttribute("id",I)),Ae.setAttribute("tabindex",0);var Ze=t.windowWidth(),lt=t.windowHeight(),Ve=j.devicePixelRatio||1;e=="full"||e=="tag"?_?(c.scale=Ve,Ae.setAttribute("width",Ze*c.scale),Ae.setAttribute("height",lt*c.scale),e=="full"&&(Ae.style.width=Ze+"px",Ae.style.height=lt+"px")):(Ae.setAttribute("width",Ze),Ae.setAttribute("height",lt)):(Ae.setAttribute("width",q),Ae.setAttribute("height",z));var ft=xn(I+"Alternative");ft&&Ae.appendChild(ft),Ce||(e=="tag"||e=="inline"?ke.appendChild(Ae):document.body.appendChild(Ae)),n(l)||(Ae.style.backgroundColor=l),e=="full"||e=="fit"||e=="fill"?(Ae.style.position="absolute",D||(document.body.style.overflow="hidden")):getComputedStyle(Ae.parentElement).position=="static"&&(Ae.parentElement.style.position="relative"),Ae.addEventListener("pointerdown",function(ot){Ae.setPointerCapture(ot.pointerId),c.dispatchEvent(ot)}),Ae.addEventListener("pointerup",function(ot){Ae.releasePointerCapture(ot.pointerId),c.dispatchEvent(ot)}),Ae.addEventListener("pointermove",function(ot){c.dispatchEvent(ot)}),Ae.addEventListener("pointerenter",function(ot){c.dispatchEvent(ot)}),Ae.addEventListener("pointerleave",function(ot){c.dispatchEvent(ot)})}function Xe(){b&&(c.mouseX=0,c.mouseY=0,c.mousedownEvent=ie.on("stagemousedown",function(Ae){c.mouseX=Ae.stageX/t.scaX,c.mouseY=Ae.stageY/t.scaY}),c.mousemoveEvent=ie.on("stagemousemove",function(Ae){c.mouseX=Ae.stageX/t.scaX,c.mouseY=Ae.stageY/t.scaY})),j.removeEventListener("mousedown",N,!0),j.removeEventListener("mousemove",N,!0),j.removeEventListener("mouseup",N),j.addEventListener("mousedown",N,!0),j.addEventListener("mousemove",N,!0),j.addEventListener("mouseup",N)}function Qe(){it(),se.indexOf(e)!=-1&&!D&&(c.zil=Yr()),c.mousedownEvent&&ie&&ie.off("stagemousedown",c.mousedownEvent),c.mousemoveEvent&&ie&&ie.off("stagemousemove",c.mousemoveEvent),ie=p?new t.StageGL(I,T):new t.Stage(I),ie.frame=c,ie.mouseMoveOutside=V,!n(l)&&p&&ie.setClearColor(t.convertColor(l)),ie.setBounds(0,0,q,z),ie.width=q,ie.height=z,_&&it(),h&&ie.enableMouseOver(w),g&&(re?Fe.Touch.enable(ie,!0,D):Fe.Touch.enable(ie,!1,D)),D&&(ie.preventSelection=!1),B&&(ie.nextStage=B.stage),F&&(ie.nextStage=F),Xe(),ie.on("stagemouseup",function(){R=!1})}function it(){if(c){var Ae=xn(I),Ze=t.windowWidth(),lt=t.windowHeight(),Ve,ft,ot,ut;if(J=c.orientation=Ze>lt?"horizontal":"vertical",J!=fe&&(fe=J,c.dispatchEvent("orientation")),S&&k&&setTimeout(function(){j.scrollTo(0,0)},100),!!Ae){if(e=="fit")c.scale=Ze/lt>=q/z?lt/z:Ze/q;else if(e=="fill")c.scale=Ze/lt>=q/z?Ze/q:lt/z;else if(e=="full"){Ae.style.left=Ae.style.top="0px",Ae.width=q=Ze,Ae.height=z=lt,ie&&(ie.setBounds(0,0,q,z),_?(ot=j.devicePixelRatio||1,Ae.width=Ze*ot,Ae.height=lt*ot,Ae.style.width=Ze+"px",Ae.style.height=lt+"px",c.scale=ot,ie.scaleX=ie.scaleY=c.scale):ie.scaleX=ie.scaleY=1,ie.tickOnUpdate=!1,ie.update(),ie.tickOnUpdate=!0,ie.width=q,ie.height=z,p&&ie.updateViewport(q/ie.scaleX,z/ie.scaleY),t.scaX=Fe.stageTransformable?1:ie.scaleX,t.scaY=Fe.stageTransformable?1:ie.scaleY),D||(t.scrollX(0),t.scrollY(0)),Ke();return}else if(e=="tag"){q=ke.style.width==""?ke.getAttribute("width")||ke.offsetWidth:ke.style.width,z=ke.style.height==""?ke.getAttribute("height")||ke.offsetHeight:ke.style.height,_?(Ae.width=q*c.scale,Ae.height=z*c.scale,Ae.style.width=q+"px",Ae.style.height=z+"px",ie&&(ie.scaleX=ie.scaleY=c.scale)):(ie&&(ie.scaleX=ie.scaleY=1),Ae.width=q,Ae.height=z),ie&&(ie.tickOnUpdate=!1,ie.update(),ie.tickOnUpdate=!0,ie.setBounds(0,0,q,z),ie.width=q,ie.height=z,p&&ie.updateViewport(q/ie.scaleX,z/ie.scaleY),t.scaX=Fe.stageTransformable?1:ie.scaleX,t.scaY=Fe.stageTransformable?1:ie.scaleY),ke.style.overflow="hidden",Ae.style.left=Ae.style.top="0px",ut=Ae.getBoundingClientRect(),c.x=ut.x+t.scrollX(),c.y=ut.y+t.scrollY(),Ke();return}else if(e=="inline"){if(_){if(document.styleSheets[0])try{for(var $e=document.styleSheets[0].rules||document.styleSheets[0].cssRules,Pt=0;Pt<$e.length;Pt++){var yt=$e[Pt];if(yt.selectorText=="#"+I){var wt=yt.style.getPropertyValue("width");if(wt){var Ft=Qn(Ae.style.width),_t=Qn(Ae.style.height);Ae.style.width=wt}}}}catch (e8){+function(){}()}var Jt=j.getComputedStyle(Ae),nn=Qn(Jt.getPropertyValue("width"));Ft&&(Ae.style.height=_t*nn/Ft+"px",Jt=j.getComputedStyle(Ae));var Zt=Qn(Jt.getPropertyValue("height"));ot=j.devicePixelRatio||1,c.scale=nn/r*ot,Ae.width=q*c.scale,Ae.height=z*c.scale,Ae.style.width=nn+"px",Ae.style.height=Zt+"px",ie&&(ie.scaleX=ie.scaleY=c.scale)}else ie&&(ie.scaleX=ie.scaleY=1);ie&&(ie.tickOnUpdate=!1,ie.update(),ie.tickOnUpdate=!0,ie.setBounds(0,0,q,z),ie.width=q,ie.height=z,p&&ie.updateViewport(q/ie.scaleX,z/ie.scaleY),t.scaX=Fe.stageTransformable?1:ie.scaleX,t.scaY=Fe.stageTransformable?1:ie.scaleY),Ae.style.left=Ae.style.top="0px",ut=Ae.getBoundingClientRect(),c.x=ut.x+t.scrollX(),c.y=ut.y+t.scrollY(),Ke();return}ft=z*c.scale,Ve=q*c.scale,_?(ot=j.devicePixelRatio||1,c.scale*=ot,Ae.width=q*c.scale,Ae.height=z*c.scale,Ae.style.width=q*c.scale/ot+"px",Ae.style.height=z*c.scale/ot+"px",ie&&(ie.scaleX=ie.scaleY=c.scale)):(ie&&(ie.scaleX=ie.scaleY=1),Ae.style.width=Ve+"px",Ae.style.height=ft+"px"),ie&&(ie.tickOnUpdate=!1,ie.update(),ie.tickOnUpdate=!0),y=="left"?c.x=0:y=="right"?c.x=Ze-Ve:c.x=(Ze-Ve)/2,x=="top"?c.y=0:x=="bottom"?c.y=lt-ft:c.y=(lt-ft)/2,Ae.style.left=c.x+"px",Ae.style.top=c.y+"px",D||(t.scrollX(0),t.scrollY(0)),Ke(),ie&&(t.scaX=Fe.stageTransformable?1:ie.scaleX,t.scaY=Fe.stageTransformable?1:ie.scaleY)}}}var Be=Le.reverse().join("");this.update=function(){it(),c.dispatchEvent("update")};function Ke(){if(e=="fill"){var Ae=(Qn(c.canvas.style.width)-t.windowWidth())/2;y=="left"?(c.visibleLeft=0,c.visibleRight=t.windowWidth()/(t.windowWidth()+Ae*2)*q):y=="right"?(c.visibleLeft=Ae*2/(t.windowWidth()+Ae*2)*q,c.visibleRight=q):(c.visibleLeft=Ae/(t.windowWidth()+Ae*2)*q,c.visibleRight=(t.windowWidth()+Ae)/(t.windowWidth()+Ae*2)*q);var Ze=(Qn(c.canvas.style.height)-t.windowHeight())/2;x=="top"?(c.visibleTop=0,c.visibleBottom=t.windowHeight()/(t.windowHeight()+Ze*2)*z):x=="bottom"?(c.visibleTop=Ze*2/(t.windowHeight()+Ze*2)*z,c.visibleBottom=z):(c.visibleTop=Ze/(t.windowHeight()+Ze*2)*z,c.visibleBottom=(t.windowHeight()+Ze)/(t.windowHeight()+Ze*2)*z)}else c.visibleLeft=c.visibleTop=0,c.visibleRight=q,c.visibleBottom=z}function He(){if(!(!U||!c)){c==j.zdf&&(j.W=c.width,j.H=c.height),c.dispatchEvent("resize");var Ae=new Date().getTime();setTimeout(function(){new Date().getTime()-Ae>80&&(it(),c==j.zdf&&(j.W=c.width,j.H=c.height),setTimeout(function(){c.dispatchEvent("resize"),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&ie&&(e=="full"||e=="tag")&&ie.update()},100))},100),!t.OPTIMIZE&&(kt||!j.OPTIMIZE)&&ie&&(e=="full"||e=="tag")&&ie.update()}}setTimeout(function(){c&&c.dispatchEvent("orientation")},250);var he=["ttf","otf","woff2","woff","fnt"];d[Be]=function(){var lt=d.now(),Ae=Math.floor(lt/1e3%10),Ze=(Ze=lt.toString()).substring(0,Ze.length-2)+(10+Ae-3)%10+Ze.substring(Ze.length-1),lt=Math.floor(lt/1e4%10);return Ze=(Ze=Ze.substring(0,Ze.length-1)+(lt+1)%10).substring(0,Ze.length-3)+(Ae+lt+3)%10+Ze.substring(Ze.length-2),Number(Ze)},this.loadAssets=function(Ae,Ze,lt,Ve,ft,ot,ut,$e,Pt,yt,wt,Ft){if(n(Ae))return Zt();if(n(Ae.src)){var _t="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum",Jt;if(Jt=at(c.loadAssets,arguments,_t))return Jt}n(Ze)||(j.PATH=Ze);var nn=mt(ft||null);if(!n(lt)&&lt.type=="ProgressBar"&&n(Ve)&&(Ve=!0),n(Ve)&&(Ve=!0),Array.isArray(Ae)||(Ae=[Ae]),Ae.length==0)return Zt();function Zt(){var Wt=new t.Queue;return Wt.isLoading=!1,Wt.loadAssetsCount=0,setTimeout(function(){Wt.dispatchEvent("complete"),c.dispatchEvent("complete")},10),Wt}n(ft)&&(ft=0),n(ot)&&(ot=nn=="s"?8:8e3),n(ut)&&(ut=!1),n($e)&&($e="anonymous"),n(yt)&&(yt=!1),n(wt)&&(wt=O),n(Ft)&&(Ft=c.maxNum);var Et=!1,Ut=[],qe,gt,St,Ct,Bt,vt=/\.([^.]+)$/i,bt=[],Vt=[],qt=[],jt=0,Gt=!0;for(St=0;St<Ae.length;St++){if(qe=Ae[St],qe.assets){var pn=[];for(Ae.splice(St,1),Array.isArray(qe.assets)||(qe.assets=[qe.assets]),Ct=0;Ct<qe.assets.length;Ct++){var Kt=qe.assets[Ct];if(Kt.split){var Mn=Kt.split("?");gt=Mn[0].match(vt)}gt&&he.indexOf(gt[1])>=0?bt.push(Kt):Kt.match&&Kt.match(/fonts\.googleapis\.com/i)?Vt.push(Kt):Kt.font?(Kt.src?Kt.src=qe.path+Kt.src:Kt.font=qe.path+Kt.font,bt.push(Kt)):t.assetIDs[Kt]?pn.push({id:qe.path+Kt,src:qe.path+Kt,path:null,loadTimeout:qe.loadTimeout,maxNum:qe.maxNum,noCORSonImage:qe.noCORSonImage}):pn.push({id:Kt,src:Kt,path:qe.path,loadTimeout:qe.loadTimeout,maxNum:qe.maxNum,noCORSonImage:qe.noCORSonImage})}for(var Ne=pn.length-1;Ne>=0;Ne--)Ae.splice(St,0,pn[Ne]);if(qe=pn[0],qe==null)continue}if(qe.constructor=={}.constructor){var ct=0;for(var Rt in qe)ct++;ct==1&&qe.src&&!qe.src.match(/fonts\.googleapis\.com/i)&&(qe=qe.src)}var Ht;if(qe.constructor=={}.constructor)if(qe.audioSprite){Bt=t.copy(qe),qe=Bt.src,mn(qe);var fn=[],rn;for(Ct=0;Ct<Bt.audioSprite.length;Ct++)rn=Bt.audioSprite[Ct],fn.push({id:rn[0],startTime:Math.round(rn[1]*1e3),duration:Math.round((rn[2]-rn[1])*1e3)});delete Bt.audioSprite,Bt.data={audioSprite:fn},Ut.push(Bt)}else if(qe.data&&qe.data.audioSprite)Bt=t.copy(qe),qe=Bt.src,mn(qe),Ut.push(Bt);else if(qe.id){if(qe.path){var $t,xt;if(qe.path.match(/http/i))qe.src=qe.path+qe.src;else if(qe.path.match(/^\//))$t=j.location.href,xt=$t.match(/(.*?)([^/])\/[^/]/),$t=xt[1]+xt[2],qe.src=$t+qe.path+qe.src;else{var Yt=j.location.pathname;$t=j.location.href;var un=$t.split(Yt)[0]+Yt;xt=un.match(/(.*)\//),qe.src=xt[1]+"/"+qe.path+qe.src}delete qe.path}if(qe.noCORSonImage){var dn=new Image;qt.push(dn),dn.src=qe.src,dn.id=qe.id;var vn;dn.onload=function(Wt){var an=Wt.currentTarget,ln=t.assets[an.id]=new t.Bitmap({image:an,style:!1}).expand(0);vn=new Fe.Event("assetload"),ln&&typeof ln!="string"&&typeof ln!="number"&&(ln.file=an.id,ln.src=an.src),vn.asset=ln,tn.dispatchEvent(vn),yt||(vn=new Fe.Event("assetload"),vn.asset=ln,c.dispatchEvent(vn)),tn.loadAssetsCount--,tn.loadAssetsCount==0&&In()}}else{t.assetIDs[qe.id]=qe.src;var kn=qe.maxNum;n(kn)&&(kn=Ft);var rr=qe.type,Zn=n(qe.loadTimeout)?ot:qe.loadTimeout;qe=qe.src,mn(qe),Ht={src:qe,loadTimeout:Zn*(nn=="s"?1e3:1),data:kn,type:rr},n(Pt)||(Ht.type=Pt),Ut.push(Ht)}}else qe.src&&qe.src.match(/fonts\.googleapis\.com/i)?Vt.push(qe):bt.push(qe);else{var jn=mn(qe);jn&&he.indexOf(jn[1])>=0?(bt.push(qe),jt--):qe.match(/fonts\.googleapis\.com/i)?(Vt.push(qe),jt--):(Ht={src:qe,loadTimeout:ot*(nn=="s"?1e3:1),data:Ft},n(Pt)||(Ht.type=Pt),Ut.push(Ht))}if(Et&&Gt){var ur=document.createElement("audio");ur.setAttribute("src",(!n(Ze)&&!qe.match(/^http:\/\/|https:\/\//i)?Ze:"")+qe),document.body.appendChild(ur),Gt=!1}}function mn(Wt){if(gt=null,Wt.split){var an=Wt.split("?");gt=an[0].match(vt),gt&&Fe.Sound.SUPPORTED_EXTENSIONS.indexOf(gt[1])>=0&&(Et=!0)}return jt++,gt}c.loadAssetsCount++,c.isLoading=!0;var tn=new t.Queue;tn.isLoading=!0,tn.loadAssetsCount=0,!n(lt)&&lt.show&&(lt.zimActiveLoader=tn,lt.show());var zt;if(bt.length>0){var ir=[],Tn,en;for(St=0;St<bt.length;St++){if(en=bt[St],en.font&&!en.src){en.src=en.font,en.font=en.font.split(".")[0];var zn=en.font.split("/");en.font=zn[zn.length-1]}typeof en=="string"&&(en={font:en.split(".")[0],src:en}),Tn={src:"url("+(en.src.match(/\//i)?"":Ze||"")+en.src+")"+(en.type?" format('"+en.type+"')":""),family:en.font},en.weight&&(Tn.weight=en.weight),en.style&&(Tn.style=en.style),ir.push(Tn)}zt=new Fe.FontLoader({src:ir},!0),zt.on("complete",Wn),zt.on("error",Wn),zt.load(),tn.loadAssetsCount++}if(Vt.length>0)for(St=0;St<Vt.length;St++)en=Vt[St],typeof en=="string"&&(en={src:en}),Tn={src:en.src,type:"fontcss"},tn.loadAssetsCount++,zt=new Fe.FontLoader(Tn,!0),zt.on("complete",Wn),zt.on("error",Wn),zt.load();function Wn(){tn.loadAssetsCount--,tn.loadAssetsCount==0&&In()}if(qt.length>0)for(St=0;St<qt.length;St++)tn.loadAssetsCount++;function Bn(Wt,an){tn.loadAssetsCount--;var ln=an.item,yn=t.assets[ln.id]=Wt;yn.src=ln.src,yn.file=ln.id,yn.item=ln,yn.svg=an.svg;var bn=new Fe.Event("assetload");bn.item=ln,bn.asset=yn,yn.type="SVG",tn.dispatchEvent(bn),yt||(bn=new Fe.Event("assetload"),bn.item=ln,bn.asset=yn,c.dispatchEvent(bn)),tn.loadAssetsCount==0&&In()}var Nn=Date.now(),Dn=new Fe.Event("complete");if(jt>0){tn.loadAssetsCount++;var Pn=tn.preload=c.preload=new Fe.LoadQueue(Ve,Ze,$e);wt!=1&&Pn.setMaxConnections(wt),Et&&Pn.installPlugin(Fe.Sound),Pn.on("progress",function(Wt){tn.dispatchEvent(Wt),yt||c.dispatchEvent(Wt)}),Pn.on("error",function(Wt){tn.dispatchEvent(Wt),yt||c.dispatchEvent(Wt)}),Pn.on("fileload",function(Wt){if(!Wt.result||(Wt.result.nodeName=="IMG"||Wt.result.nodeName=="SVG")&&!Wt.rawResult&&Ve){var an=new Fe.Event("error");an=new Fe.Event("error"),an.item=Wt.item,tn.dispatchEvent(an),an=new Fe.Event("error"),an.item=Wt.item,c.dispatchEvent(an)}else{var ln=Wt.item,yn=Wt.item.type,bn=ln.id.match(vt),wn;if(yn&&yn=="sound"){var Kn=[];if(ln.data&&ln.data.audioSprite)for(var Yn=0;Yn<ln.data.audioSprite.length;Yn++)Kn.push(ln.data.audioSprite[Yn].id);else Kn.push(ln.id);for(Yn=0;Yn<Kn.length;Yn++)~function(){var Rn=Kn[Yn],cr=Wt.item.src,dr=Wt.item;wn=t.assets[Rn]={type:"sound",path:Ze,id:Rn,file:Rn,src:cr,item:dr,dispose:function(){delete t.assets[Rn],wn=null},play:function(Un,lr,hr,pr,gr,vr,gn){var Hn="volume, loop, loopCount, pan, offset, delay, interrupt",Jn;if(Jn=at(t.assets[Rn].play,arguments,Hn))return Jn;var Cn={volume:Un,loop:lr,loopCount:hr,pan:pr,offset:gr,delay:vr,interrupt:gn},Sn=mt(Cn.offset,null,30);Sn=="s"&&(Cn.offset&&(Cn.offset*=1e3),Cn.delay&&(Cn.delay*=1e3)),Cn.loop===!0&&(Cn.loop=-1),Cn.loopCount&&(Cn.loop=Cn.loopCount,delete Cn.loopCount);var En=Fe.Sound.play(Rn,Cn);return En.getStage=function(){return ie},En.dispose=function(){En.destroy()},En}}}()}else if(yn=="image")Wt.result.width&&(wn=t.assets[ln.id]=new t.Bitmap({image:Wt.result,width:Wt.result.width,height:Wt.result.height,style:!1}),ln.avoidCORS&&wn.expand(0));else if(yn=="svg"){tn.loadAssetsCount++,t.svgToBitmap(Wt.result,Bn,null,null,{svg:Wt.result,item:ln,type:yn,ext:bn});return}else wn=t.assets[ln.id]=Wt.result;wn&&typeof wn!="string"&&typeof wn!="number"&&yn!="json"&&yn!="xml"&&(wn.file=Wt.item.id,wn.src=Wt.item.src,wn.item=Wt.item),an=new Fe.Event("assetload"),an.item=ln,an.asset=wn,tn.dispatchEvent(an),yt||(an=new Fe.Event("assetload"),an.item=ln,an.asset=wn,c.dispatchEvent(an))}}),c.preloadEvent=Pn.on("complete",function(Wt){Dn=Wt,tn.loadAssetsCount--,tn.loadAssetsCount==0&&In()});try{Pn.loadManifest(Ut)}catch (e9){+function(){}()}}function In(){var Wt=Date.now();ft=Math.max(0,ft-(Wt-Nn)),setTimeout(function(){c.loadAssetsCount--,c.loadAssetsCount<=0&&(c.isLoading=!1),tn.isLoading=!1,tn.dispatchEvent(Dn),!n(lt)&&lt.show&&lt.hide(),yt||c.dispatchEvent(Dn)},ft*(nn=="s"?1e3:1))}return tn},this.ac=function(Ae,Ze,lt){lt?(lt.commands||(lt.commands=[]),lt.commands.push([Ae,Ze,lt])):(Ze[0].commands||(Ze[0].commands=[]),Ze[0].commands.push([Ae,Ze]))},t.asset=this.asset=function(Ae,Ze,lt,Ve,ft){if(!n(Ae)){Ae=et(Ae);var ot=t.assetIDs[Ae];if(ot&&(Ae=ot),t.assets[Ae]&&(!t.assets[Ae].type||t.assets[Ae].type&&t.assets[Ae].type.substr(0,2)!="AC"))return t.assets[Ae];if(j.PATH!=null&&(t.PATH=j.PATH),ft){var ut;return c.loadFailObj=="circles"?ut=c.makeCircles(14):ut=c.loadFailObj,ut&&(ut.type="EmptyAsset",ut.id=Ae,ut.play=function(){if(ht)return je("Frame - asset("+Ae+") not found"),{}}),ut}else{var $e=new t.Container(Ze,lt);t.assets[Ae]=$e,Ze&&lt?$e.type="ACWD":$e.type="AC";var Pt=c.loadAssets({assets:Ae,path:Ae.split("/").length==1?t.PATH:null,queueOnly:!0,maxNum:Ve}),yt=Ae.split(".");return Fe.Sound.SUPPORTED_EXTENSIONS.indexOf(yt[yt.length-1])>=0&&($e.play=function(){return $e.playParams=arguments,$e.proxy=new Fe.EventDispatcher,Object.defineProperty($e.proxy,"volume",{get:function(){return $e.sound?$e.sound.volume:null},set:function(wt){$e.volume=wt,$e.sound&&($e.sound.volume=wt)}}),Object.defineProperty($e.proxy,"pan",{get:function(){return $e.sound?$e.sound.pan:null},set:function(wt){$e.pan=wt,$e.sound&&($e.sound.pan=wt)}}),$e.proxy}),Pt.on("complete",function(){Ae.id?Ae=Ae.id:Ae.src&&(Ae=Ae.src);var wt=c.asset(Ae,null,null,null,!0),Ft=Ae.split("."),_t;if(Fe.Sound.SUPPORTED_EXTENSIONS.indexOf(Ft[Ft.length-1])>=0)$e.play=wt.play,$e.type="Sound",$e.src=wt.src,$e.item=wt.item,$e.playParams&&($e.sound=$e.play.apply(null,$e.playParams),$e.volume!=null&&($e.sound.volume=$e.volume),$e.pan!=null&&($e.sound.pan=$e.pan),$e.sound.on("complete",function(){$e.proxy.dispatchEvent("complete")}));else if(wt.type=="Bitmap"||wt.type=="Image"||wt.type=="Pic"){if(wt.type=="Bitmap"?(wt.addTo($e),$e.bitmap=wt,$e.image=wt.image,$e.id=wt.id,$e.item=wt.item):($e.bitmap=wt.getChildAt(0).clone(),$e.bitmap.addTo($e),$e.image=$e.bitmap.image,$e.id=$e.bitmap.id,$e.item=$e.bitmap.item),$e.mouseChildren=!1,$e.type="Image",$e.commands)for(_t=0;_t<$e.commands.length;_t++)$e.commands[_t][2]?$e[$e.commands[_t][0]].apply($e,$e.commands[_t][1]):t[$e.commands[_t][0]].apply($e,$e.commands[_t][1]);$e.commands=null,$e.stage&&$e.stage.update()}else if(wt.type=="EmptyAsset"){if(wt.addTo($e),$e.mouseChildren=!1,$e.type="EmptyAsset",$e.commands)for(_t=0;_t<$e.commands.length;_t++)$e.commands[_t][2]?$e[$e.commands[_t][0]].apply($e,$e.commands[_t][1]):t[$e.commands[_t][0]].apply($e,$e.commands[_t][1]);$e.commands=null,$e.stage&&$e.stage.update()}else if(wt.type=="SVG"){if(wt.addTo($e),$e.mouseChildren=!1,$e.type="SVG",$e.bitmap=wt,$e.svg=wt.svg,$e.commands)for(_t=0;_t<$e.commands.length;_t++)$e.commands[_t][2]?$e[$e.commands[_t][0]].apply($e,$e.commands[_t][1]):t[$e.commands[_t][0]].apply($e,$e.commands[_t][1]);$e.commands=null,$e.stage&&$e.stage.update()}t.assets[Ae]=$e,$e.dispatchEvent("assetLoad"),$e.dispatchEvent("complete")}),Pt.on("error",function(wt){var Ft=new Fe.Event("error");Ft.id=wt.id,Ft.item=wt.item,$e.dispatchEvent(Ft)}),$e}}},t.asset.getIDs=function(){var Ae=[];for(var Ze in t.assetIDs)Ae.push(Ze);return Ae},t.image=function(Ae,Ze,lt,Ve,ft){return Ae.match(/^htt/i)&&(Ae="https://cors.zimjs.com/"+Ae),t.asset(Ae,Ze,lt,Ve,ft)},t.zimObjectIDs={},t.object=this.object=function(Ae){return t.zimObjectIDs[Ae]},t.object.getNames=function(){var Ae=[];for(var Ze in t.zimObjectIDs)Ae.push(Ze);return Ae},j.zns||(j.asset=this.asset,j.image=t.image,j.object=this.object),this.setDefault=function(){return j.zimDefaultFrame=j.zdf=j.F=c,j.S=ie,j.W=ie.width,j.H=ie.height,c},Object.defineProperty(c,"isDefault",{get:function(){return j.zdf==c},set:function(){je("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(c,"stage",{get:function(){return ie},set:function(){je("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(c,"width",{get:function(){return q},set:function(){je("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(c,"height",{get:function(){return z},set:function(){je("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return l},set:function(Ae){l=Ae,n(Ae)?c.canvas.style.backgroundColor="default":(c.canvas.style.backgroundColor=l,!n(l)&&p&&ie.setClearColor(t.convertColor(l)))}});var me;Object.defineProperty(this,"outerColor",{get:function(){return me},set:function(Ae){me=Ae,fr("body").css({backgroundColor:me})}}),Object.defineProperty(c,"allowDefault",{get:function(){return D},set:function(Ae){Ae?(ie.preventSelection=!1,document.body.style.overflow="visible",c.zil&&(j.removeEventListener("keydown",c.zil[0]),j.removeEventListener("wheel",c.zil[1]),j.removeEventListener("DOMMouseScroll",c.zil[2]),c.zil=null)):(ie.preventSelection=!0,ie.enableDOMEvents(!0),(e=="full"||e=="fit"||e=="fill")&&(document.body.style.overflow="hidden"),n(c.zil)&&(c.zil=Yr())),D=Ae,ie.__touch&&(ie.__touch.preventDefault=!D)}});var Te;Object.defineProperty(c,"cursors",{get:function(){return Te},set:function(Ae){Te=Ae&&Ae.constructor=={}.constructor?Ae:null,Te?ze(Te):st()}}),c.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],c.cursorList=new t.Dictionary(!0);function ze(Ae){t.loop(Ae,function(ot,ut){ut.noMouse&&ut.noMouse()}),c.pme&&st(),t.loop(c.cursorList,function(ot){!ot._cursor&&ot.cursor&&Ae[ot.cursor]&&(ot._cursor=ot.cursor,c.cursorList.add(ot,ot._cursor),ot.cursor="none")}),Ae.default&&(document.body.style.cursor="none"),c.pme=c.on("pointermove",function(ot){if(c.cursorObj){var ut=c.cursorObj,$e=c.stage.getObjectUnderPoint(c.mouseX,c.mouseY,1);$e&&($e._cursor||$e.cursor)?ft($e):Ae.default?(Ye("none"),c.cursorObj=Ae.default,Ae.default.addTo(c.stage)):Ye(),c.cursorObj!=ut&&ut.removeFrom&&ut.removeFrom(),c.cursorObj.x=c.mouseX,c.cursorObj.y=c.mouseY,c.cursorObj.top(),t.Ticker.isUpdating(c.stage)||c.stage.update()}});var Ze=!1;if(c.mouseX!=0&&c.mouseY!=0){Ze=!0;var lt=c.stage.getObjectUnderPoint(c.mouseX,c.mouseY,1);lt&&(lt._cursor||lt.cursor)?(Gn("setting"),ft(lt)):Ae.default?(Ye("none"),Ae.default.x=c.mouseX,Ae.default.y=c.mouseY,c.cursorObj=Ae.default,c.cursorObj.mouseChildren=!1,c.cursorObj.mouseEnabled=!1,Ae.default.addTo(c.stage)):Ye(),c.stage.update()}function Ve(ot){Ye("none"),c.cursorObj=ot,c.cursorObj.x=c.mouseX,c.cursorObj.y=c.mouseY,c.cursorObj.mouseChildren=!1,c.cursorObj.mouseEnabled=!1,c.cursorObj.addTo(c.stage)}c.pee=c.on("pointerenter",function(ot){if(Ze){Ze=!1;return}setTimeout(function(){var ut=c.stage.getObjectUnderPoint(c.mouseX,c.mouseY,1);ut&&(ut._cursor||ut.cursor)||(Ae.default?Ve(Ae.default):Ye(),c.stage.update())},50)}),c.smo=c.stage.on("mouseover",function(ot){ft(ot.target)});function ft(ot){var ut=c.cursorsExclude;if(ut&&(Array.isArray(ut)||(ut=[ut]),ut.includes(ot))){ot.cursor=c.cursorTypes.includes(ot._cursor)?ot._cursor:"default";return}if(ot._cursor&&Ae[ot._cursor]){if(Ae[ot._cursor]==c.cursorObj)return;c.cursorObj&&c.cursorObj.removeFrom(),Ve(Ae[ot._cursor])}else if(Ae.default&&(!ot.cursor||!c.cursorTypes.includes(ot.cursor))){if(Ae.default==c.cursorObj)return;c.cursorObj&&c.cursorObj.removeFrom(),Ve(Ae.default)}else c.cursorTypes.includes(ot.cursor)||(ot.cursor="default"),c.cursorObj&&c.cursorObj.removeFrom();c.stage.update()}c.ple=c.on("pointerdown",function(ot){c.cursorObj&&t.interval(.001,function(){c.cursorObj&&c.cursorObj.top(),c.stage.update()},2,!0)}),c.pde=c.on("pointerleave",function(ot){Ze=!1,c.cursorObj&&c.cursorObj.removeFrom(),c.stage.update()}),c.smu=c.stage.on("mouseout",function(ot){c.cursorObj&&c.cursorObj.removeFrom(),Ae.default?Ve(Ae.default):Ye()})}function st(){c.pme&&c.off("pointermove",c.pme),c.pee&&c.off("pointerenter",c.pee),c.ple&&c.off("pointerdown",c.ple),c.pde&&c.off("pointerleave",c.pde),c.smo&&c.stage.off("mouseover",c.smo),c.smu&&c.stage.off("mouseout",c.smu),c.pme=c.pee=c.ple=c.pde=c.smo=c.smu=null,t.loop(c.cursorList,function(Ae,Ze){Ze!==!0&&(Ae.cursor=Ze),Ae._cursor=null}),t.loop(c.cursorList,function(Ae){c.cursorList.add(Ae,!0)}),c.cursorObj&&(c.cursorObj.dispose(),c.cursorObj=null,c.stage.update()),Ye()}function Ye(Ae){Ae!="none"&&(c.cursorObj=null),c.canvas.parentElement&&(c.canvas.parentElement.style.cursor=Ae||"default")}function nt(Ae){c.dispatchEvent(Ae)}j.addEventListener("contextmenu",nt,!1);var pe=new Fe.Event("keydown");this.eventRemove=pe.remove;function Je(Ae){Ae.remove=c.eventRemove,c.altKey=Ae.altKey,c.ctrlKey=Ae.ctrlKey,c.metaKey=Ae.metaKey,c.shiftKey=Ae.shiftKey,c.dispatchEvent(Ae)}j.addEventListener("keydown",Je);function be(Ae){c.altKey=Ae.altKey,c.ctrlKey=Ae.ctrlKey,c.metaKey=Ae.metaKey,c.shiftKey=Ae.shiftKey,Ae.remove=c.eventRemove,c.dispatchEvent(Ae)}j.addEventListener("keyup",be);function Ee(Ae){c.dispatchEvent(Ae)}j.addEventListener("wheel",Ee);function _e(Ae){Ae.remove=c.eventRemove,c.dispatchEvent(Ae)}Y&&j.DeviceMotionEvent&&j.addEventListener("devicemotion",_e);function Ge(Ae){Ae.remove=c.eventRemove;var Ze=360-Ae.alpha;Math.abs(Ze-Ue)>180-45&&Math.abs(Ze-Ue)<180+45&&(tt=tt==0?180:0),Ue=Ze,Ae.rotation={x:Ae.beta,y:Ae.gamma,z:(Ze+tt)%360},c.dispatchEvent(Ae)}if(Y&&j.DeviceOrientationEvent){var Ue=0,tt=0;j.addEventListener("deviceorientation",Ge)}this.isFullscreen=!!document.fullscreenElement,this.htmlobc=fr("html").css("backgroundColor"),this.fullscreen=function(Ae){if(n(Ae)&&(Ae=!0),Ae){if(document.fullscreenElement)return;var Ze=c.canvas.parent?c.canvas.parent:document.body;Ze.requestFullscreen?Ze.requestFullscreen():Ze.webkitRequestFullscreen?Ze.webkitRequestFullscreen():Ze.mozRequestFullscreen?Ze.mozRequestFullscreen():Ze.msRequestFullscreen&&Ze.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=Ae},document.addEventListener("fullscreenchange",function(){c.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(fr("html").css("backgroundColor",c.color),c.dispatchEvent("fullscreenenter")):(fr("html").css("backgroundColor",c.htmlobc?c.htmlobc:"transparent"),c.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(Ae,Ze){if(e!="full"){n(Ae)&&(Ae=q),n(Ze)&&(Ze=z),xn(I)&&xn(I).parentNode.removeChild(xn(I)),q=Ae,z=Ze;for(var lt=[],Ve=0;Ve<c.stage.numChildren;Ve++)lt.push(c.stage.getChildAt(Ve));for(Re(),Qe(),Ve=0;Ve<lt.length;Ve++)c.stage.addChild(lt[Ve])}},this.follow=function(Ae,Ze,lt,Ve,ft,ot,ut,$e,Pt,yt,wt,Ft,_t,Jt){var nn="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag",Zt;if(Zt=at(c.follow,arguments,nn))return Zt;if(c.followObj=null,c.followTicker&&t.Ticker.remove(c.followTicker),n(Ae))return;Ae.dirX=Ae.dirY=0,c.followObj=Ae,Ae.followDampX=null,Ae.followDampY=null,n(Ze)&&(Ze=new t.Boundary(0,0,c.stage.width,c.stage.height)),c.followBoundary=Ze,n(lt)&&(lt=.05),n(Ve)&&(Ve=lt),n(ft)&&(ft=0),n(ot)&&(ot=0),n(ut)&&(ut=0),n($e)&&($e=0),n(Pt)&&(Pt=.02),n(yt)&&(yt=Pt),n(wt)&&(wt=!0),n(Ft)&&(Ft=!0),n(_t)&&(_t=!1),n(Jt)&&(Jt=!1),Ae.parent?Et():Ae.on("added",Et);function Et(){var Ut=Ae.parent;c.frameBorderLock=_t,wt&&(c.followDampX=new t.Damp(Ut.x,lt),c.offsetDampX=new t.Damp(Ze.x+ft+(Ze.width-ft-ot)/2,Pt)),Ft&&(c.followDampY=new t.Damp(Ut.y,Ve),c.offsetDampY=new t.Damp(Ze.y+ut+(Ze.height-ut-$e)/2,yt)),c.followTicker=t.Ticker.add(function(){var qe=c.followBoundary;if(wt){var gt=qe.x+ft+(qe.width-ft-ot)/2;c.followOffsetX=[Jt?qe.x+qe.width-ft:gt,gt,Jt?qe.x+ft:gt],c.followObj&&(Ut.x=c.followDampX.convert(c.offsetDampX.convert(c.followOffsetX[Ae.motionController?Ae.motionController.dirX+1:1])-Ae.x))}if(Ft){var St=qe.y+ut+(qe.height-ut-$e)/2;c.followOffsetY=[Jt?qe.y+qe.height-$e:St,St,Jt?qe.y+ut:St],c.followObj&&(Ut.y=c.followDampY.convert(c.offsetDampY.convert(c.followOffsetY[Ae.motionController?Ae.motionController.dirY+1:1])-Ae.y))}c.frameBorderLock&&(Ut.x>c.followBoundary.x&&(Ut.x=c.followBoundary.x),Ut.y>c.followBoundary.y&&(Ut.y=c.followBoundary.y),Ut.x<c.followBoundary.x+c.followBoundary.width-Ut.width&&(Ut.x=c.followBoundary.x+c.followBoundary.width-Ut.width),Ut.y<c.followBoundary.y+c.followBoundary.height-Ut.height&&(Ut.y=c.followBoundary.y+c.followBoundary.height-Ut.height))})}return Ae},n(t.blurCheck)&&t.setBlurDetect(),this.keyboardMessage=function(Ae,Ze,yt,Ve,ft){var ot="color, backgroundColor, message, response, percent",ut;if(ut=at(c.keyboardMessage,arguments,ot))return ut;n(Ae)&&(Ae=t.yellow),n(Ze)&&(Ze="black"),n(yt)&&(yt="PRESS SCREEN FOR KEYBOARD CONTROL"),n(Ve)&&(Ve="YOU HAVE KEYBOARD CONTROL"),n(ft)&&(ft=80);function $e(){try{return window.self!==window.top}catch (e10){return!0}}var Pt=$e();Pt&&(c.canvas.style.pointerEvents="none");var yt=new t.Label({text:yt,size:40,color:Ae,backgroundColor:Ze,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(c.stage,ft).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM);document.addEventListener("mousedown",wt),document.addEventListener("pointerdown",wt);function wt(){Pt&&(c.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",wt),document.removeEventListener("pointerdown",wt),yt&&(yt.text=Ve,yt.animate({props:{alpha:0},wait:1,call:()=>{yt.dispose(),yt=null}}),c.stage.update())}return yt},this.dispose=function(){c.zil&&c.zil.length&&(j.removeEventListener("keydown",c.zil[0]),j.removeEventListener("wheel",c.zil[1]),j.removeEventListener("DOMMouseScroll",c.zil[2])),ce&&ce.removeAllEventListeners(),K&&j.removeEventListener("resize",K),j.removeEventListener("resize",Se),j.removeEventListener("contextmenu",nt),j.removeEventListener("keydown",Je),j.removeEventListener("keyup",be),j.removeEventListener("wheel",Ee),j.removeEventListener("devicemotion",_e),j.removeEventListener("deviceorientation",Ge),j.removeEventListener("mousedown",N,!0),j.removeEventListener("mousemove",N,!0),j.removeEventListener("mouseup",N),D||(document.body.style.overflow="auto"),Ae(ie);function Ae(Ze){if(Ze.dispose)Ze.dispose();else{if(Ze.removeAllEventListeners(),Ze.numChildren)for(var lt=Ze.numChildren-1;lt>=0;lt--)Ae(Ze.getChildAt(lt));Ze.parent&&Ze.parent.removeChild(Ze)}Ze=null}return xn(I)&&xn(I).parentNode.removeChild(xn(I)),c==t.tickerFrame&&(t.tickerFrame=null),c===j.zdf&&(j.zdf=j.S=j.W=j.H=null),ie=null,c=null,!0},this.makeCircles=function(Ae,Ze){n(Ae)&&(Ae=100);var lt=[t.orange,t.green,t.pink,t.blue,t.brown,t.dark],Ve,ft;if(Ze)for(Ve=new t.Container({style:!1}),Ve.radius=Ae,ft=0;ft<lt.length;ft++)Ve.addChild(new t.Circle(Ve.radius/lt.length*(lt.length-ft),lt[ft],null,null,null,null,null,null,!1));else{Ve=new t.Shape({style:!1});var ot=Ve.graphics;for(Ve.radius=Ae,ft=0;ft<lt.length;ft++)ot.f(lt[ft]).dc(0,0,Ve.radius/lt.length*(lt.length-ft));Ve.setBounds(-Ve.radius,-Ve.radius,Ve.radius*2,Ve.radius*2)}return Ve},this.madeWith=function(Ae,Ze,lt,Ve,ft,ot,ut){var $e="color, text, edges, box, slats, borderColor, borderWidth",Pt;if(Pt=at(c.madeWith,arguments,$e))return Pt;n(Ae)&&(Ae=t.dark),n(Ze)&&(Ze="Made with ZIM");var yt=new t.Container,wt=yt.icon=c.makeIcon(lt,Ve,ft,ot,ut).sca(.5).alp(.92).hov(1).addTo(yt).tap(function(){wt.alp(.92),wt.stage.update(),nr("https://zimjs.com","_blank")});return yt.label=new t.Label(Ze,16,null,Ae).sca(.7).pos(0,-19,t.CENTER,t.BOTTOM,yt),yt},this.makeIcon=function(Ae,Ze,lt,Ve,ft){var ot="edges, box, slats, borderColor, borderWidth",ut;if(ut=at(c.makeIcon,arguments,ot))return ut;var $e=new t.Container(-20,-13,102,120).reg(-20,-13);n(Ae)&&(Ae=t.light),n(Ze)&&(Ze=t.dark),lt===!0&&(lt=[t.silver,t.silver,t.silver,t.silver,t.silver]),new t.Rectangle($e.width,$e.height,Ze,Ve,ft).loc(-20,-13,$e);var Pt=[[lt?lt[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[lt?lt[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[lt?lt[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[lt?lt[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[lt?lt[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[Ae,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return t.loop(Pt,function(yt){var wt=new t.Shape().addTo($e);wt.graphics.f(yt[0]).p(yt[1]),wt.setTransform(yt[2],yt[3])}),$e.mouseChildren=!1,$e},this.makeAbstract=function(Ae){n(Ae)&&(Ae="black");var Ze=[[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],lt=new t.Rectangle(200,200);t.loop(Ze,function(ft){var ot=new t.Shape().f(ft[2]).p(ft[3]);ot.setTransform(ft[0]+20,ft[1]+27),ot.addTo(lt)},!0);var Ve=new t.Container;return lt.sca(.4).addTo(Ve),Ve.mouseChildren=!1,Ve},this.makeCat=function(Ae){n(Ae)&&(Ae=246);var Ze=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],lt=new t.Container(157.5,246);t.loop(Ze,function(ft){var ot=new t.Shape().f(ft[2]).s(ft[3]).ss(ft[4]?ft[4][0]:null,ft[4]?ft[4][1]:null,ft[4]?ft[4][2]:null).p(ft[5]);ot.setTransform(ft[0],ft[1]),ot.addTo(lt)},!0);var Ve=new t.Container;return lt.sca(Ae/246).addTo(Ve).mov(0,-.4),S&&Ve.cache(),Ve.mouseChildren=!1,Ve}},t.extend(t.Frame,Fe.EventDispatcher,null,"cjsEventDispatcher",!1),t.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},t.extend(t.Queue,Fe.EventDispatcher,null,"cjsEventDispatcher"),t.Pic=function(e,r,i,l,a,s,f){var u="file, width, height, noCors, style, group, inherit",v;if(v=at(t.Pic,arguments,u,this))return v;De("83.03"),this.group=s;var C=a===!1?{}:t.getStyle("Pic",this.group,f);if(n(e)&&(e=C.file!=null?C.file:null),n(l)&&(l=C.noCors!=null?C.noCors:!1),n(e)){ht&&je("ZIM Pic - needs a file");return}this.zimContainer_constructor(r,i);var h=this,g=e;e=h.file=t.Pick.choose(e),r&&i?this.type="ACWD":this.type="AC";var k=l?t.image(e):t.asset(e);h.mouseChildren=!1,k.type=="Bitmap"||k.type=="Image"?(k.type=="Bitmap"?h.bitmap=k.clone().addTo(h):h.bitmap=k.getChildAt(0).clone().addTo(h),h.id=k.id,h.image=h.bitmap.image,h.src=h.bitmap.src,h.item=h.bitmap.item,h.setBounds(null),h.type="Pic",setTimeout(function(){h.dispatchEvent("ready"),h.dispatchEvent("complete")},20)):k.on("complete",function(){if(h.bitmap=k.getChildAt(0).clone().addTo(h),h.id=k.id,h.setBounds(null),h.type="Pic",h.commands)for(var y=0;y<h.commands.length;y++)h.commands[y][2]?h[h.commands[y][0]].apply(h,h.commands[y][1]):t[h.commands[y][0]].apply(h,h.commands[y][1]);h.image=h.bitmap.image,h.src=h.bitmap.src,h.item=h.bitmap.item,h.commands=null,h.dispatchEvent("ready"),h.dispatchEvent("complete"),h.stage&&h.stage.update()}),h.keyOut=function(y,x,I){return h.type=="AC"&&j.zdf?(j.zdf.ac("keyOut",arguments,h),h):(h.bitmap&&h.bitmap.keyOut(y,x,I),h.stage&&h.stage.update(),h)},t.styleTransforms(this,C),h.clone=function(y){return this.cloneProps(new t.Pic(y?e:g,r,i,l,a,this.group,f))}},t.extend(t.Pic,t.Container,["clone"],"zimContainer",!1),t.Aud=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",y;if(y=at(t.Aud,arguments,k,this))return y;De("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=h;var x=C===!1?{}:t.getStyle(this.type,this.group,g);if(n(e)&&(e=x.file!=null?x.file:null),n(e)){ht&&je("ZIM Sound - needs a file");return}n(r)&&(r=x.volume!=null?x.volume:1),n(i)&&(i=x.loop!=null?x.loop:!1),n(l)&&(l=x.loopCount!=null?x.loopCount:null),n(a)&&(a=x.pan!=null?x.pan:0),n(s)&&(s=x.offset!=null?x.offset:0),n(f)&&(f=x.delay!=null?x.delay:0),n(u)&&(u=x.interrupt!=null?x.interrupt:"none"),n(v)&&(v=x.maxNum!=null?x.maxNum:null);var I=this;e=I.file=t.Pick.choose(e);var w=I.sound=t.asset(e,null,null,v);w.type=="AC"?w.on("complete",function(){I.src=w.src,I.item=w.item,I.dispatchEvent("ready"),I.dispatchEvent("complete")}):setTimeout(function(){I.src=w.src,I.item=w.item,I.dispatchEvent("ready"),I.dispatchEvent("complete")},20),I.volume=r,I.loop=i,I.loopCount=l,I.pan=a,I.offset=s,I.delay=f,I.interrupt=u,I.maxNum=v,I.play=function(E,A,p,T,B,F,D){var P="volume, loop, loopCount, pan, offset, delay, interrupt",Y;return(Y=at(I.play,arguments,P))?Y:(n(E)&&(E=I.volume),n(A)&&(A=I.loop),n(p)&&(p=I.loopCount),n(T)&&(T=I.pan),n(B)&&(B=I.offset),n(F)&&(F=I.delay),n(D)&&(D=I.interrupt),I.sound.play(E,A,p,T,B,F,D))},I.dispose=function(){return I.sound&&I.sound.dispose(),I.sound=null,!0}},t.extend(t.Aud,Fe.EventDispatcher,null,"cjsEventDispatcher"),t.Vid=function(e,r,i,l,a,s,f,u,v,C,h,g){var k="file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",y;if(y=at(t.Vid,arguments,k,this))return y;De("83.07"),this.group=h;var x=C===!1?{}:t.getStyle("Vid",this.group,g);if(n(e)&&(e=x.file!=null?x.file:null),n(e)){ht&&je("ZIM Vid - needs a file");return}n(r)&&(r=x.width!=null?x.width:null),n(i)&&(i=x.height!=null?x.height:null),n(l)&&(l="fit"),n(s)&&(s=x.loop!=null?x.loop:!1),n(a)&&(a=x.volume!=null?x.volume:1),n(f)&&(f=x.align!=null?x.align:"center"),n(u)&&(u=x.valign!=null?x.valign:"center"),n(v)&&(v=x.type!=null?x.type:"video/mp4"),this.zimContainer_constructor(r,i),r&&i?this.type="ACWD":this.type="AC";var I=this,w,E=e;e=t.Pick.choose(e),I.file=e,j.PATH!=null&&(t.PATH=j.PATH);var A="";e.split("/").length==1&&t.PATH&&(A=t.PATH),this.mouseChildren=!1;var p=I.source=document.createElement("video");document.body.appendChild(p),p.style.display="none",p.setAttribute("autoplay","autoplay"),p.setAttribute("playsinline","playsinline"),p.setAttribute("crossorigin","anonymous"),s&&p.setAttribute("loop","loop");var T=I.innerSource=document.createElement("source");e.split("?").length==1&&(e+="?playsinline=1"),T.setAttribute("src",A+e),T.setAttribute("type",v),p.appendChild(T),F();var B=0;function F(){B++>5&&I.dispatchEvent("error"),p.addEventListener("stalled",F),p.addEventListener("error",F),p.addEventListener("canplay",D)}function D(){I.type="Vid",p.removeEventListener("stalled",F),p.removeEventListener("error",F),p.removeEventListener("canplay",D),p.pause();var P=p.videoWidth,Y=p.videoHeight;if(I.setBounds(0,0,r||P,i||Y),w=I.bitmap=new t.Bitmap(p,P,Y).addTo(I),w.setBounds(0,0,P,Y),w.scaleTo(I,100,100,l).pos(0,0,f,u,I),I.commands)for(var _=0;_<I.commands.length;_++)I.commands[_][2]?I[I.commands[_][0]].apply(I,I.commands[_][1]):t[I.commands[_][0]].apply(I,I.commands[_][1]);I.commands=null,I.dispatchEvent("ready")}I.videoPaused=!0,I.play=function(){if(!w){ht&&je("ZIM Vid - no file found");return}if(p.play(),p.volume=a,I.videoPaused=!1,!I.ticker)if(I.keyObj){var P=I.keyObj.color,Y=I.keyObj.tolerance,_=I.keyObj.replacement;I.ticker=t.Ticker.add(function(){w.keyOut(P,Y,_)})}else I.ticker=t.Ticker.add(function(){});return I},I.keyOut=function(P,Y,_){return I.ticker?(t.Ticker.remove(I.ticker),I.ticker=t.Ticker.add(function(){w.keyOut(P,Y,_)})):I.keyObj={color:P,tolerance:Y,replacement:_},I},I.pause=function(P){return n(P)&&(P=!0),I.videoPaused=P,P?p.pause():p.play(),I},Object.defineProperty(this,"duration",{get:function(){return p.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return p.currentTime},set:function(P){p.currentTime=P}}),Object.defineProperty(this,"volume",{get:function(){return p.volume},set:function(P){a=P,p.volume=P}}),t.styleTransforms(this,x),I.clone=function(P){return this.cloneProps(new t.Vid(P?e:E,r,i,l,a,s,f,u,v,C,this.group,g))},I.dispose=function(P,Y,_){this.ticker&&t.Ticker.remove(this.ticker);var V=I.stage;return I.bitmap.dispose(),w=I.bitmap=null,p.pause(),p.removeAttribute("src"),p.load(),p.remove(),p=null,_||this.zimContainer_dispose(!0),V&&V.update(),!0}},t.extend(t.Vid,t.Container,["clone","dispose"],"zimContainer",!1),t.SVG=function(e,r,i,l,a,s,f,u,v,C,h){var g="svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",k;if(k=at(t.SVG,arguments,g,this))return k;De("83.09"),this.group=C;var y=v===!1?{}:t.getStyle("SVG",this.group,h);if(n(e)&&(e=y.svg!=null?y.svg:null),n(e)){ht&&je("ZIM SVG - needs a svg value");return}n(l)&&(l=y.bitmap!=null?y.bitmap:!0),n(a)&&(a=y.splitTypes!=null?y.splitTypes:!1),n(s)&&(s=y.geometric!=null?y.geometric:!0),n(f)&&(f=y.showControls!=null?y.showControls:!0),n(u)&&(u=y.interactive!=null?y.interactive:!0),this.zimContainer_constructor(r,i);var x=this;l&&(this.mouseChildren=!1);var I=e;e=t.Pick.choose(e),r&&i?this.type="ACWD":this.type="AC";var w=t.assets[e];if(w&&(x.src=w.src,x.file=w.file,x.item=w.item,x.svg=w.svg),w&&w.type=="Bitmap")x.type="SVG",x.bitmap=w.clone(),A();else if(w&&w.type=="AC")w.on("complete",function(){x.type="SVG",x.bitmap=w.bitmap.clone(),A(n(r)&&n(i))});else if(w&&w.type=="ACWB")n(r)&&n(i)&&x.setBounds(0,0,w.width,w.height),w.on("complete",function(){x.type="SVG",x.bitmap=w.bitmap.clone(),A()});else if(w&&w.type=="SVG")x.type="SVG",w.bitmap?x.bitmap=w.bitmap.clone():x.bitmap=w.clone(),A();else if(e&&e.match(/<svg/i)&&(x.svg=e),x.svg&&x.svg.match(/<svg/i))x.type="SVG",A();else{var E=t.asset(e);E.on("complete",function(){x.type="SVG",E.bitmap&&(x.src=E.bitmap.src,x.file=E.bitmap.file,x.item=E.bitmap.item,x.svg=E.bitmap.svg,x.bitmap=E.bitmap.clone()),A(n(r)&&n(i))})}function A(T){if(l)x.bitmap?(x.svg=x.bitmap.svg,x.bitmap.addTo(x),T&&p(),setTimeout(function(){x.dispatchEvent("ready"),x.dispatchEvent("complete")},20)):t.svgToBitmap(x.svg,function(D){x.bitmap=D,x.bitmap.addTo(x),p(),x.dispatchEvent("ready"),x.dispatchEvent("complete"),x.stage&&x.stage.update()});else if(x.bitmap&&(x.svg=x.bitmap.svg),e.match(/<svg/i)||w&&w.type=="SVG"||T){var B=new t.SVGContainer(x.svg);B.loop(function(D){D&&D.addTo(x)},!0),T&&p(),setTimeout(function(){x.dispatchEvent("ready"),x.dispatchEvent("complete")},20)}else{var F=t.asset(e);F.on("complete",function(){var D=new t.SVGContainer(F);D.loop(function(P){P&&P.addTo(x)},!0),p(),x.dispatchEvent("ready"),x.dispatchEvent("complete"),x.stage&&x.stage.update()})}}function p(){if(n(r)&&n(i)&&x.setBounds(null),x.type="SVG",x.commands)for(var T=0;T<x.commands.length;T++)x.commands[T][2]?x[x.commands[T][0]].apply(x,x.commands[T][1]):t[x.commands[T][0]].apply(x,x.commands[T][1]);x.commands=null}x.keyOut=function(T,B,F){return x.type=="AC"&&j.zdf?(j.zdf.ac("keyOut",arguments,x),x):(x.bitmap&&x.bitmap.keyOut(T,B,F),x.stage&&x.stage.update(),x)},t.styleTransforms(this,y),x.clone=function(T){return this.cloneProps(new t.SVG(T?e:I,r,i,l,a,s,f,u,v,this.group,h))}},t.extend(t.SVG,t.Container,["clone"],"zimContainer",!1),t.SensorAsk=function(e,r,i,l,a,s,f){var u="callback, sensorType, color, backgroundColor, style, group, inherit",v;if(v=at(t.SensorAsk,arguments,u,this))return v;De("83.01"),this.group=s;var C=a===!1?{}:t.getStyle("SensorAsk",this.group,f);if(n(r)&&(r=C.sensorType!=null?C.sensorType:"deviceorientation"),r!="devicemotion"&&(r="deviceorientation"),this.sensorType=r,!n(e)){n(i)&&(i=C.color!=null?C.color:t.dark),n(l)&&(l=C.backgroundColor!=null?C.backgroundColor:t.lighter),this.zimPane_constructor("",l,i,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk";var h=this;if(Style.addGroup("sensorAsk",{width:100,color:i,rollColor:l,corner:10,backgroundColor:t.faint,rollBackgroundColor:i,borderColor:i,borderWidth:2}),h.yes=new t.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){h.hide(!0);var k=DeviceMotionEvent;r!="devicemotion"&&(k=DeviceOrientationEvent),k.requestPermission().then(function(y){y!="denied"?e(!0):e(!1)})}),h.label=new t.Label("Use sensor?",null,null,i,null,null,null,"center").sca(.9).centerReg(this),h.no=new t.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){h.hide(!1),e(!1)}),new t.Circle(110,t.clear,i,1).center(this).alp(.8),new t.Circle(120,t.clear,i,1).center(this).alp(.5),new t.Circle(130,t.clear,i,1).center(this).alp(.2),t.styleTransforms(this,C),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")h.show();else{let k=function(y){r=="deviceorientation"?y.alpha==null||y.alpha==0&&y.beta==0&&y.gamma==0?e(!1):e(!0):!y.acceleration||y.acceleration.x==null||y.acceleration.x==0&&y.acceleration.y==0&&y.acceleration.z==0?e(!1):e(!0),g=!0,j.removeEventListener(r,k)};var g=!1;j.addEventListener(r,k),setTimeout(function(){g||e(!1)},100)}}},t.extend(t.SensorAsk,t.Pane,null,"zimPane",!1),t.colorsHex=["#fb4758","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#112233","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],t.colors=["red","orange","yellow","green","blue","purple","pink","brown","interstellar","black","darker","licorice","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],on=0;on<t.colors.length;on++)t[t.colors[on]]=t.colorsHex[on];return String.prototype.darken=function(e){return t.darken(this,e)},String.prototype.lighten=function(e){return t.lighten(this,e)},String.prototype.toColor=function(e,r){return t.toColor(this,e,r)},String.prototype.toAlpha=function(e){return t.toAlpha(this,e)},t.FIT="fit",t.FILL="fill",t.FULL="full",t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.MIDDLE="middle",t.START="start",t.END="end",t.TOP="top",t.BOTTOM="bottom",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.BOTH="both",t.RADIAL="radial",t.UP="up",t.DOWN="down",t.NEXT="next",t.PREV="prev",t.AUTO="auto",t.AVE="ave",t.DEFAULT="default",t.ALL="all",t.NONE="none",t.GET="get",t.POST="post",t.LOCALSTORAGE="localStorage",t.SOCKET="socket",t.TO="to",t.FROM="from",t.SINE="sine",t.SQUARE="square",t.TRIANGLE="triangle",t.SAW="saw",t.SAWTOOTH="saw",t.ZAP="zap",t.DISTILL=!1,t.distillery=[],t.distill=function(){!j.zns&&t&&(t.DISTILL||j.DISTILL)&&t.distillery.push("83.3","83.35");function e(r,i,l){return l.indexOf(r)===i}t.distillery.length>0?(t.distillery=t.distillery.filter(e),je("zim.distill() - go to https://zimjs.com/distill and enter the following:"),Gn(t.distillery.join(" "))):je("must set zim.DISTILL = true;")},t.parseAudioSprite=function(e,r){if(De("83.25"),!(n(e)||n(e.resources)||n(e.spritemap))){var i=e,l=i.resources[0],a=i.spritemap,s=[],f,u={src:l,data:{}};for(var v in a)f=a[v],s.push({id:v,startTime:Math.round(f.start*1e3),duration:Math.round((f.end-f.start)*1e3)});return u.data.audioSprite=s,r&&je(JSON.stringify(u)),u}},t.previewAudioSprite=function(e,r,i){if(De("83.26"),!n(e)){if(n(r)&&(r=3),typeof i>"u"){if(n(j.zdf))return;var i=j.zdf}var l=i.width,a=e,s=[],f=[];if(a.constructor=={}.constructor)a.resources&&(a=t.parseAudioSprite(a)),a.audioSprite?t.loop(a.audioSprite,function(v){s.push(v[0].substr(0,r)),f.push(v[0])}):a.data&&a.data.audioSprite&&t.loop(a.data.audioSprite,function(v){s.push(v.id.substr(0,r)),f.push(v.id)});else return;var u=new t.Tabs({tabs:s,width:l,currentEnabled:!0}).addTo();return u.on("change",function(){i.asset(f[u.selectedIndex]).play()}),u}},t.svgToBitmap=function(e,r,i,l,a){if(De("83.27"),!n(e.draggable)){var s=new DOMParser;e=e.innerHTML?s.parseFromString(e.innerHTML,"text/xml"):e;var f=e.getElementsByTagName("svg"),u=f?e.getElementsByTagName("svg")[0]:null;e=u}if(!XMLSerializer&&ht){je("ZIM svgToBitmap() - sorry, not supported in Browser");return}var v=typeof e=="string"?e:new XMLSerializer().serializeToString(e);if(v){var C=v.split(">")[0];if(C.length>1){var h=C.split(/width/i);if(h.length==1){var g=100,k=100,y=C.split(/viewBox/i);if(y.length>1){var x=y[1].split('"')[1];if(x){var I=x.split(" ");I.length>1&&(g=I[I.length-2],k=I[I.length-1])}}v=v.replace(/svg /i,'svg  width="'+g+'" height="'+k+'" ')}}v.match(/xmlns/i)||(v=v.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var w=self.URL||self.webkitURL||self,E=new Image;E.onload=function(){var p=new t.Bitmap(E,i,l);r(p,a),w.revokeObjectURL(A)};var A=w.createObjectURL(new document.Blob([v],{type:"image/svg+xml"}));E.src=A},t.makeContent=function(e,r,i){De("83.29");var l;if(n(i)&&(i=t.dark),typeof e=="string"||typeof e=="number")e=this.message=new t.Label(e,null,null,i);else if(e.constructor=={}.constructor){var a=e;a.buttonScale||(a.buttonScale=.5),n(a.spacingH)&&(a.spacingH=20*a.buttonScale),n(a.spacingV)&&(a.spacingV=20);var s=a.spacingH,f=a.spacingV;a.align||(a.align="center"),e=new t.Container;var u=new jr(10,f).addTo(e);if(a.header&&a.header.pos(0,f,"left","top",e),a.message)var v=new t.Label(a.message,null,null,n(a.color)?i:a.color).loc(0,e.height+(a.header?f:0),e);if(a.display&&a.display.pos(0,-a.display.height-(a.header||a.message?f:0),"left","bottom",e),a.buttons){Array.isArray(a.buttons)||(a.buttons=[a.buttons]);for(var C=a.length*100,h=new t.Container().loc(0,e.height+(a.header||a.message||a.display?f:0),e),g=0;g<a.buttons.length;g++){var k=a.buttons[g],y=k.call||function(){};k.button||(k.button=new t.Button({width:k.width,label:k.label,backgroundColor:k.backgroundColor||k.bgColor,color:k.color,rollBackgroundColor:k.rollBackgroundColor||k.rollBgColor,rollColor:k.rollColor})),k.button.call=y,k.button.sca(a.buttonScale).loc(g==0?0:h.width+s,0,h).tap(function(I){I.target.call(I.target)})}}for(l=0;l<e.numChildren;l++){var x=e.getChildAt(l);x.lastY=x.y,a.align=="center"?x.center(e).loc(null,x.lastY):a.align=="right"&&x.pos(0,null,"right")}if(r&&typeof r=="number"&&(e.width=Math.min(e.width,r-s*2-(a.scrollBar===!0?12:a.scrollBar>0?a.scrollBar:0))),new t.Container(10,f).pos(0,-u.height,"center","bottom",e).bot(),u.top(),e.config=a,e.header=a.header,e.message=v,e.text=a.message,e.display=a.display,a.buttons)for(e.buttons=[],l=0;l<h.numChildren;l++)e.buttons.push(h.getChildAt(l))}return e},t}(ge||{});function De(t){ge&&(ge.DISTILL||j.DISTILL)&&ge.distillery.push(t)}function Vn(t,mt,Mt,It,Ot,Tt){if(De("83.3"),t&&t.noDrag)return t;Tt!==!0&&(Tt=null);var Dt={drag:function(We,e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w){return cn(arguments)?(arguments[0].obj=this,ge.drag(arguments[0])):ge.drag(this,We,e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w)},noDrag:function(We){return ge.noDrag(this,We)},mouse:function(){return ge.mouse(this)},noMouse:function(){return ge.noMouse(this)},effect:function(We,e,r,i,l){return ge.effect(this,We,e,r,i,l)},noEffect:function(We,e){return ge.noEffect(this,We,e)},updateEffects:function(We){return ge.updateEffects(this,We)},wire:function(We,e,r,i,l,a,s){return cn(arguments)?(arguments[0].source=this,ge.wire(arguments[0])):ge.wire(this,We,e,r,i,l,a,s)},noWire:function(We,e,r){return cn(arguments)?(arguments[0].source=this,ge.noWire(arguments[0])):ge.noWire(this,We,e,r)},wired:function(We,e,r,i,l,a,s){return cn(arguments)?(arguments[0].target=this,ge.wired(arguments[0])):ge.wired(this,We,e,r,i,l,a,s)},noWired:function(We,e,r){return cn(arguments)?(arguments[0].target=this,ge.noWired(arguments[0])):ge.noWired(this,We,e,r)},bind:function(We,e,r,i,l){return cn(arguments)?(arguments[0].obj=this,ge.bind(arguments[0])):ge.bind(this,We,e,r,i,l)},noBind:function(We,e,r,i){return cn(arguments)?(arguments[0].obj=this,ge.noBind(arguments[0])):ge.noBind(this,We,e,r,i)},dragBoundary:function(We){return ge.dragBoundary(this,We)},dragRect:function(We){return ge.dragBoundary(this,We)},transform:function(We,e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_){return cn(arguments)?(arguments[0].obj=this,ge.transform(arguments[0])):ge.transform(this,We,e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_)},setSwipe:function(We){return ge.setSwipe(this,We)},gesture:function(We,e,r,i,l,a,s,f,u,v,C,h,g,k,y){return cn(arguments)?(arguments[0].obj=this,ge.gesture(arguments[0])):ge.gesture(this,We,e,r,i,l,a,s,f,u,v,C,h,g,k,y)},noGesture:function(We,e,r){return cn(arguments)?(arguments[0].obj=this,ge.noGesture(arguments[0])):ge.noGesture(this,We,e,r)},gestureBoundary:function(We,e){return ge.gestureBoundary(this,We,e)},gestureRect:function(We,e){return ge.gestureBoundary(this,We,e)},addPhysics:function(We,e,r,i,l,a,s,f,u,v,C){return cn(arguments)?(arguments[0].obj=this,ge.addPhysics(arguments[0])):ge.addPhysics(this,We,e,r,i,l,a,s,f,u,v,C)},removePhysics:function(){return ge.removePhysics(this)},hitTestPoint:function(We,e,r){return ge.hitTestPoint(this,We,e,r)},hitTestReg:function(We,e){return ge.hitTestReg(this,We,e)},hitTestRect:function(We,e,r,i){return ge.hitTestRect(this,We,e,r,i)},hitTestCircle:function(We,e,r,i){return ge.hitTestCircle(this,We,e,r,i)},hitTestCircleRect:function(We,e){return ge.hitTestCircleRect(this,We,e)},hitTestCircles:function(We,e){return ge.hitTestCircles(this,We,e)},hitTestBounds:function(We,e,r){return ge.hitTestBounds(this,We,e,r)},boundsToGlobal:function(We,e,r,i){return ge.boundsToGlobal(this,We,e,r,i)},resetBounds:function(We,e,r,i,l){return cn(arguments)?(arguments[0].obj=this,ge.resetBounds(arguments[0])):ge.resetBounds(this,We,e,r,i,l)},hitTestPath:function(We,e,r,i,l){return ge.hitTestPath(this,We,e,r,i,l)},hitTestGrid:function(We,e,r,i,l,a,s,f,u,v,C,h){return ge.hitTestGrid(this,We,e,r,i,l,a,s,f,u,v,C,h)},animate:function(We,e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U){return We&&(We.props||We.obj)&&cn(arguments)?(arguments[0].target=this,ge.animate(arguments[0])):ge.animate(this,We,e,r,i,l,a,s,f,u,v,C,h,g,k,y,x,I,w,E,A,p,T,B,F,D,P,Y,_,V,b,Z,$,Q,re,G,L,c,d,o,S,X,m,O,de,R,N,se,ie,q,z,ce,Ie,K,xe,J,fe,U)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(We,e,r,i,l,a,s,f,u,v,C,h,g,k,y){return cn(arguments)?(arguments[0].target=this,ge.wiggle(arguments[0])):ge.wiggle(this,We,e,r,i,l,a,s,f,u,v,C,h,g,k,y)},loop:function(We,e,r,i,l,a,s,f){return ge.loop(this,We,e,r,i,l,a,s,f)},copyMatrix:function(We){return ge.copyMatrix(this,We)},duplicate:function(We){return ge.duplicate(this,We)},cur:function(We){return ge.cur(this,We)},sha:function(We,e,r,i){return ge.sha(this,We,e,r,i)},pos:function(We,e,r,i,l,a,s,f,u,v){return cn(arguments)?(arguments[0].obj=this,ge.pos(arguments[0])):ge.pos(this,We,e,r,i,l,a,s,f,u,v)},loc:function(We,e,r,i,l,a,s){return cn(arguments)?(arguments[0].obj=this,ge.loc(arguments[0])):ge.loc(this,We,e,r,i,l,a,s)},mov:function(We,e){return cn(arguments)?(arguments[0].obj=this,ge.mov(arguments[0])):ge.mov(this,We,e)},top:function(){return ge.top(this)},bot:function(){return ge.bot(this)},ord:function(We){return ge.ord(this,We)},dep:function(We){return ge.dep(this,We)},nam:function(We){return ge.nam(this,We)},alp:function(We){return ge.alp(this,We)},vis:function(We){return ge.vis(this,We)},ble:function(We){return ge.ble(this,We)},dye:function(We){return ge.dye(this,We)},hov:function(We,e){return ge.hov(this,We,e)},rot:function(We,e,r){return ge.rot(this,We,e,r)},siz:function(We,e,r){return ge.siz(this,We,e,r)},ske:function(We,e){return ge.ske(this,We,e)},reg:function(We,e,r){return ge.reg(this,We,e,r)},sca:function(We,e){return ge.sca(this,We,e)},scaleTo:function(We,e,r,i,l){return cn(arguments)?(arguments[0].obj=this,ge.scaleTo(arguments[0])):ge.scaleTo(this,We,e,r,i,l)},fit:function(We,e,r,i,l){return cn(arguments)?(arguments[0].obj=this,ge.fit(arguments[0])):ge.fit(this,We,e,r,i,l)},outline:function(We,e,r){return cn(arguments)?(arguments[0].obj=this,ge.outline(arguments[0])):ge.outline(this,We,e,r)},blendmodes:function(We){return ge.blendmodes(this,We)},addTo:function(We,e,r){return cn(arguments)?(arguments[0].obj=this,ge.addTo(arguments[0])):ge.addTo(this,We,e,r)},removeFrom:function(We){return ge.removeFrom(this,We)},added:function(We,e,r){return ge.added(this,We,e,r)},movement:function(We,e){return ge.movement(this,We,e)},noMovement:function(){return ge.noMovement(this)},tap:function(We,e,r,i,l,a,s,f,u){return cn(arguments)?(arguments[0].obj=this,ge.tap(arguments[0])):ge.tap(this,We,e,r,i,l,a,s,f,u)},noTap:function(){return ge.noTap(this)},hold:function(We,e,r,i){return ge.hold(this,We,e,r,i)},noHold:function(){return ge.noHold(this)},change:function(We,e){return ge.change(this,We,e)},noChange:function(){return ge.noChange(this)},centerReg:function(We,e,r){return cn(arguments)?(arguments[0].obj=this,ge.centerReg(arguments[0])):ge.centerReg(this,We,e,r)},center:function(We,e,r){return cn(arguments)?(arguments[0].obj=this,ge.center(arguments[0])):ge.center(this,We,e,r)},place:function(We){return ge.place(this,We)},placeReg:function(We){return ge.placeReg(this,We)},expand:function(We,e,r,i){return cn(arguments)?(arguments[0].obj=this,ge.expand(arguments[0])):ge.expand(this,We,e,r,i)},setMask:function(We,e){return ge.setMask(this,We,e)},cloneProps:function(We){return We.type=this.type,We.group=this.group,We.style=this.style,We.alpha=this.alpha,We.rotation=this.rotation,We.mouseEnabled=this.mouseEnabled,We.mouseChildren=this.mouseChildren,We.tickEnabled=this.tickEnabled,We.x=this.x,We.y=this.y,We.scaleX=this.scaleX,We.scaleY=this.scaleY,We.skewX=this.skewX,We.skewY=this.skewY,We.name&&(We.name=this.name),We.regX=this.regX*We.width/(this.width||1),We.regY=this.regY*We.height/(this.height||1),We.visible=this.visible,We.shadow=this.shadow,(!this.type||this.type=="Shape")&&ge.copyMatrix(We,this),We.compositeOperation=this.compositeOperation,We.snapToPixel=this.snapToPixel,this.filters&&this.filters.length>0&&(We.filters=this.filters.slice(0),We.cache()),We.mask=this.mask,We.hitArea=this.hitArea,(!this.type||this.type=="Shape"||this.type=="Blob"||this.type=="Squiggle")&&this._bounds&&We.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),We},cloneChildren:function(We,e){We.children.length&&We.removeAllChildren();for(var r=We.children,i=0,l=this.children.length;i<l;i++){var a=this.children[i].clone(e);a.parent=We,r.push(a)}return We}};if(!n(Tt)){Tt=[];for(var Qt in Dt)Tt.push(Qt);return Tt}for(var At in Dt)Object.prototype.hasOwnProperty.call(Dt,At)&&(t[At]=Dt[At]);if(ge&&(t.cjsLocalToGlobal=t.localToGlobal,t.cjsGlobalToLocal=t.globalToLocal,t.cjsLocalToLocal=t.localToLocal,t.localToGlobal=function(We,e){return ge.localToGlobal(We,e,t,t.cjsLocalToGlobal)},t.globalToLocal=function(We,e){return ge.globalToLocal(We,e,t,t.cjsGlobalToLocal)},t.localToLocal=function(We,e,r){return ge.localToLocal(We,e,r,t)},t.hueBatch||ge.displayBase(t)),!n(mt)&&!n(Mt)&&!n(It)&&!n(Ot)?mt=mt:!n(mt)&&!n(Mt)&&(It=mt,Ot=Mt,mt=0,Mt=0),!n(mt)&&!n(Mt)&&!n(It)&&!n(Ot))t.setBounds(mt,Mt,It,Ot);else if(t.nominalBounds!=null&&t.getBounds&&t.getBounds()==null){var Xt=t.nominalBounds;t.setBounds(Xt.x,Xt.y,Xt.width,Xt.height)}return t.parent&&t.parent.actionFrames&&!t.parent.addPhysics&&Vn(t.parent,zdf?zdf.width:null,zdf?zdf.height:null),t}var wi;function Ci(t){De("83.35"),document.Window=Ti,document.Blob=li,wi="ignore",n(t)&&(t=[]),Array.isArray(t)||(t=[t]);var mt=Vn(null,null,null,null,null,!0),Mt=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var It in ge)(mt.indexOf(It)==-1||Mt.indexOf(It)>=0)&&t.indexOf(It)==-1&&(window[It]=ge[It])}ge.fastFrame=function(t,mt){if(De("83.355"),Fe=t,n(j.zdf))return mt.frame=new ge.Frame({shim:{stage:mt,canvas:mt.canvas}}),j.zimDefaultFrame=j.zdf=mt.frame,ge.scaX=Fe.stageTransformable?1:mt.scaleX,ge.scaY=Fe.stageTransformable?1:mt.scaleY,mt.frame};ge.addWires=function(t){return De("83.365"),t.wire=function(){return Array.prototype.unshift.call(arguments,t),ge.wire.apply(null,arguments),t},t.noWire=function(){return Array.prototype.unshift.call(arguments,t),ge.noWire.apply(null,arguments),t},t.wired=function(){return Array.prototype.unshift.call(arguments,t),ge.wired.apply(null,arguments),t},t.noWired=function(){return Array.prototype.unshift.call(arguments,t),ge.noWired.apply(null,arguments),t},t};ge.setBlurDetect=function(){De("83.36"),ge.blurCheck=!0,ge.pauseAnimateOnBlur=!0,ge.pauseOnBlur=[],ge.blurDetect=function(){var t,mt,Mt={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in Mt)if(t in document){mt=Mt[t];break}return function(It){return It&&document.addEventListener(mt,It),!document[t]}}(),ge.blurDetect(function(){var t,mt,Mt;if(ge.blurDetect())setTimeout(function(){if(ge.pauseOnBlur)for(t=0;t<ge.pauseOnBlur.length;t++)mt=ge.pauseOnBlur[t],mt.pauseOnBlurPaused||mt.pause(!1);if(ge.pauseAnimateOnBlur&&ge.animatedObjects){var It=[],Ot;for(t=0;t<ge.animatedObjects.objects.length;t++){mt=ge.animatedObjects.objects[t];var Tt=ge.copy(mt.tweenStates);if(!mt.tweenStates)mt.pauseAnimate(!1);else if(n(Tt.all)||Tt.all){if(mt.pauseAnimate(!1),!mt.dynamicAnimation)for(Mt in Tt)Mt!="all"&&Tt[Mt]===!1&&mt.pauseAnimate(!0,Mt)}else{mt.pauseAnimate(!0);for(Mt in Tt)Mt!="all"&&Tt[Mt]&&mt.pauseAnimate(!1,Mt)}mt.type=="Sprite"&&(mt.paused=!0),mt.parent&&mt.parent.type=="Particles"&&mt.parent.emitter&&mt.parent.emitter.focusWarm&&(Ot=mt.parent.emitter,It.indexOf(mt.parent.emitter)<0&&It.push(mt.parent.emitter))}if(It.length>0)for(t=0;t<It.length;t++)It[t].doWarm(It[t].focusWarm)}},300),j.zdf&&j.zdf.dispatchEvent("tabfocus");else{if(ge.pauseOnBlur)for(t=0;t<ge.pauseOnBlur.length;t++)mt=ge.pauseOnBlur[t],mt.pauseOnBlurPaused=mt.paused,mt.pause(!0);ge.pauseAnimateOnBlur&&ge.animatedObjects&&ge.pauseAnimate(!0,"pauseOnBlur"),j.zdf&&j.zdf.dispatchEvent("tabblur")}})};var ii=!1;ge=function(t){t.ZIMON={stringify:function(Mt,It){if(De("83.39"),n(Mt))return;if(!ii){ht&&je("ZIMON - set ZIMONON=true before using ZIMON.stringify()");return}return Mt=t.copy(Mt),Ot(Mt),JSON.stringify({obj:Mt,key:It,zimon:1,info:"https://zimjs.com/zimon/"});function Ot(Tt,Dt,Qt){if(!n(Tt))if(Array.isArray(Tt))t.loop(Tt,function(Xt,We){Ot(Xt,Tt,We)});else if(Tt.constructor=={}.constructor)t.loop(Tt,function(Xt,We){Ot(We,Tt,Xt)});else if(Tt.type){var At={zimon:Tt.type};Tt.arguments&&(At.args=Array.prototype.slice.call(Tt.arguments),Ot(At.args)),Tt.type=="series"&&(At.args=Array.prototype.slice.call(Tt.array),Ot(At.args)),It&&It[Tt.type]&&It[Tt.type].props&&(At.props=[],t.loop(It[Tt.type].props,function(Xt){At.props.push(Tt[Xt])})),Dt?Dt[Qt]=At:Mt=At}else typeof Tt!="string"&&typeof Tt!="number"&&typeof Tt!="boolean"&&Tt!==null&&ht&&je("ZIMON - potentially bad JSON value"+Tt)}},parse:function(Mt,It){if(De("83.39"),n(Mt))return;var Ot=JSON.parse(Mt),Tt=Ot.obj;return It=Ot.key,Qt(Tt),Tt;function Dt(At){try{return Function("return("+At+")")()}catch (e11){return ht&&je("ZIMON - bad function scope or name: "+At),null}}function Qt(At,Xt,We){if(!n(At)){if(Array.isArray(At))t.loop(At,function(s,f){Qt(s,At,f)});else if(n(At.zimon)&&At.constructor=={}.constructor)t.loop(At,function(s,f){Qt(f,At,s)});else if(At.zimon){var e=At.zimon,r="";It&&(It[e]&&It[e].scope?r=It[e].scope+".":It.scope&&(r=It.scope+"."));var i=Dt(r+e),l=At.args;n(l)&&(l=[]),Qt(l);var a;At.type=="series"?a=t.series(l):a=i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(l)))):null,Xt?Xt[We]=a:Tt=a,It&&It[e]&&It[e].props&&a&&t.loop(It[e].props,function(s,f){n(At.props[f])||(a[s]=At.props[f])})}}}}},t.Wonder=function(Mt,It,Ot,Tt,Dt){var Qt="wid, client, app, notes, server",At;if(At=at(t.Wonder,arguments,Qt,this))return At;if(De("82"),n(Mt)){je("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");return}n(Dt)&&(Dt="https://wonder.zimjs.org/wonder");var Xt=this;n(t.wonderSession)&&(t.wonderSession="W"+t.rand(1e5,999999));var We=[],e=setInterval(i,1e3),r=0;function i(){We.length>0&&(t.async(Dt+"?wonder="+JSON.stringify(We)),We=[],r++)}var l,a=setInterval(function(){r>28&&(We.push({id:Mt,c:It,a:Ot,n:Tt,k:l,t:"e",v:"frequency max - terminated",s:t.wonderSession}),je("zim.Wonder() - frequency max - terminated"),Xt.dispose()),r=0},30*1e3);this.countsOff={},this.timesOff={},this.ordersOff={};function s(v,C){return n(v)?(je("zim.Wonder "+C+" - please provide a keyword"),!1):!Xt[C+"sOff"][v]}this.count=function(v){s(v,"count")&&(l=v,We.push({id:Mt,c:It,a:Ot,n:Tt,k:v,t:"c",v:1,s:t.wonderSession}))};var f={};this.timeStart=function(v){s(v,"time")&&(Xt.timeEnd(v),l=v,f[v]=new Date().getTime())};var u={};this.timePause=function(v){s(v,"time")&&(u[v]||(u[v]=new Date().getTime()))},this.timeUnpause=function(v){if(s(v,"time")&&u[v]){var C=new Date().getTime()-u[v];f[v]&&(f[v]+=C),delete u[v]}},this.timeEnd=function(v){if(s(v,"time")&&f[v]){var C=u[v]?u[v]:new Date().getTime(),h=Math.round((C-f[v])/1e3);delete u[v],delete f[v],We.push({id:Mt,c:It,a:Ot,n:Tt,k:v,t:"t",v:h,s:t.wonderSession})}},this.order=function(v,C){if(s(v,"order")){if(l=v,n(C)){je("zim.Wonder order() - please provide an item");return}We.push({id:Mt,c:It,a:Ot,n:Tt,k:v,t:"o",v:C,s:t.wonderSession})}},this.countOff=function(v){Xt.countsOff[v]=1},this.countOn=function(v){delete Xt.countOff[v]},this.timeOff=function(v){Xt.timesOff[v]=1},this.timeOn=function(v){delete Xt.timesOff[v]},this.orderOff=function(v){Xt.ordersOff[v]=1},this.orderOn=function(v){delete Xt.ordersOff[v]},this.dispose=function(){return i(),clearInterval(e),clearInterval(a),!0}},t.VERSION="015/zim",t.getLatestVersions=function(Mt){De("82.2");var It="https://zimjs.com/live/getLatestVersions.php";function Ot(Tt){Mt(JSON.parse(Tt))}t.async(It,Ot,"returnLatestVersions")},typeof Fe<"u"&&(t.PWA=function(Mt,It,Ot,Tt,Dt,Qt,At){var Xt="call, label, backgroundColor, color, backdropColor, pane, noScale",We;if(We=at(t.PWA,arguments,Xt,this))return We;De("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var e,r=this,i=j.M=="ios"?`In Safari, please add to
home screen as an app`:`Please add to
home screen as an app`;if(n(It)&&(It=new t.Label({text:i,align:t.LEFT,lineHeight:44,color:Tt})),n(Ot)&&(Ot=t.yellow),n(Qt)){Qt=new t.Pane({width:1200,height:230,content:It,backgroundColor:Ot,backdropColor:Dt});var l=new t.Container;new t.Shape().s(t.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(l),new t.Shape().s(t.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(l).mov(0,-38);var a=new t.Tile([l,It],2,1,40,0,!0);a.width>zdf.stage.width*.7&&(a.width=zdf.stage.width*.7),a.setBounds(-70,-10,480,100),l.mov(-30,35),a.center(Qt)}M&&!(j.matchMedia("(display-mode: standalone)").matches||j.navigator.standalone||document.referrer.includes("android-app://"))?s():(Mt&&Mt.constructor===Function&&Mt(),setTimeout(function(){r.dispatchEvent("ready")},20));function s(){r.pane=e=Qt.show(),e.on("close",function(){Mt&&Mt.constructor===Function&&Mt(),r.scaleEvent&&f.off("resize",r.scaleEvent),r.dispatchEvent("ready"),j.zdf.stage.update()});var f=f||j.zdf;f&&!At&&(e.scaleTo(f.stage,105).center(),(f.scaling=="full"||f.scaling=="tag")&&(r.scaleEvent=f.on("resize",function(){e.scaleTo(f.stage,105).center()})),f.stage.update())}this.show=function(){return s(),this}},t.extend(t.PWA,Fe.EventDispatcher,null,"cjsEventDispatcher",!1)),t.QR=function(Mt,It,Ot,Tt,Dt,Qt){var At="url, color, backgroundColor, size, clickable, correctLevel",Xt;if(Xt=at(t.QR,arguments,At,this))return Xt;De("82.5"),n(Mt)&&(Mt="https://zimjs.com"),n(Tt)&&(Tt=256),n(It)&&(It=t.black),n(Ot)&&(Ot=t.white),n(Dt)&&(Dt=!0),n(Qt)&&(Qt=2);var We=document.createElement("div");if(typeof QRCode>"u"){je("ZIM QR - needs qrcode.js library - see docs");return}var e=new QRCode(We,{text:Mt,width:Tt,height:Tt,colorDark:It,colorLight:Ot,correctLevel:Qt});this.zimBitmap_constructor(e._oDrawing._oContext.canvas),Dt&&this.cur().on("click",function(){nr(Mt,"_blank")}),We=null},t.extend(t.QR,t.Bitmap,null,"zimBitmap",!1),t.GIF=function(Mt,It,Ot,Tt){var Dt="file, width, height, startPaused",Qt;if(Qt=at(t.GIF,arguments,Dt,this))return Qt;if(De("82.7"),typeof gifler>"u"){je("ZIM GIF - needs gifler.js library - see docs");return}n(It)&&(It=100),n(Ot)&&(Ot=100);var At=this;At.paused=!1,this.zimBitmap_constructor(null,It,Ot),this.cache();var Xt,We,e;if(j.PATH!=null&&(t.PATH=j.PATH),Mt.match(/http/)||Mt.match(/^\//)?e=Mt:e=(t.PATH?t.PATH:"")+Mt,At.gifler=gifler(e).animate(this.cacheCanvas).then(function(a){At.animator=a,Tt&&(Xt=setInterval(function(){At.animator.running()&&(We=setTimeout(function(){At.animator.stop(),At.paused=!0},.1),clearInterval(Xt))},.05))}),!At.ticker)if(At.keyObj){var r=At.keyObj.color,i=At.keyObj.tolerance,l=At.keyObj.replacement;At.ticker=t.Ticker.add(function(){At.keyOut(r,i,l)})}else At.ticker=t.Ticker.add(function(){});At.keyOut=function(a,s,f){return At.ticker?(t.Ticker.remove(At.ticker),At.ticker=t.Ticker.add(function(){At.keyOut(a,s,f)})):At.keyObj={color:a,tolerance:s,replacement:f},At},this.pause=function(a){return n(a)&&(a=!0),At.animator&&(Xt&&clearInterval(Xt),We&&clearTimeout(We),a&&At.animator.running()?(At.animator.stop(),t.Ticker.remove(At.ticker)):!a&&!At.animator.running()&&(At.animator.start(),t.Ticker.add(At.ticker))),At.paused=a,At},this.stop=function(){At.dispose()},this.reset=function(){return At.animator.reset(),At.paused&&(At.animator.start(),t.Ticker.add(At.ticker)),At},this.clone=function(){return this.cloneProps(new t.GIF(Mt,It,Ot,Tt))},this.dispose=function(){At.animator.stop(),At.parent&&At.removeFrom(),t.Ticker.remove(At.ticker),t.gD(this)}},t.extend(t.GIF,t.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),t.Theme={set:function(Mt,It,Ot,Tt,Dt){var Qt="name, lightenRatio, tint, tintRatio, exclude",At;if(At=at(t.Theme.set,arguments,Qt))return At;De("82.8"),n(Mt)&&(Mt="zim");var Xt=Mt.toLowerCase();n(It)&&(It=0),Ot==-1&&(Ot=null),n(Tt)&&(Tt=0),Dt==-1&&(Dt=null),!n(Dt)&&!Array.isArray(Dt)&&(Dt=[Dt]),t.THEME=window.THEME={name:Xt,lightenRatio:It,tint:Ot,tintRatio:Tt,exclude:Dt};var We={},e,r=t.colors.slice(0,8),i=t.colors.slice(8,25);Xt=="zim"?t.loop(t.colors,function(l,a){l=="clear"||l=="faint"||(We[l]=t.colorsHex[a])}):Xt=="html"?(t.loop(r,function(l){We[l]=l}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8]})):Xt=="future"?(e=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor("#1dcfae",.4-a*.025)})):Xt=="invert"?(We={},t.loop(t.colorsHex,function(l,a,s){if(a==s-2)return 1;We[t.colors[a]]=t.invertColor(l)})):Xt=="greyscale"?(e=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],t.loop(r,function(l,a){We[l]="#"+e[a]})):Xt=="neon"?(e=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor("#000",.9)}),We.light=t.lighter,We.moon=t.lighter,We.lighter=t.white,We.white=t.white):Xt=="seventies"?(e=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor(a<8?"#344f00":"#f4a127",.8-a*.04)})):Xt=="warm"?(e=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],t.loop(r,function(l,a){We[l]="#"+e[a]}),t.loop(i,function(l,a){We[l]=t.colorsHex[a+8].toColor(a<8?"#4e352e":"#745c58",.8-a*.05)})):Xt.constructor=={}.constructor&&(We=Xt,t.loop(We,function(l){t.colors.indexOf(l)==-1&&delete We[l]})),t.loop(Dt,function(l){l.toLowerCase()=="colors"?t.loop(t.colors,function(a,s){if(s>=8)return 1;Dt.push(a)}):(l.toLowerCase()=="greys"||l.toLowerCase()=="grays")&&t.loop(t.colors,function(a,s){s<8||Dt.push(a)})}),t.loop(We,function(l,a){Dt&&Dt.indexOf(l)!=-1||(Ot&&(a=a.toColor(Ot,Tt)),It!=0&&(a=a.lighten(It)),kt||(window[l]=a),t[l]=a)})},apply:function(Mt,It,Ot,Tt,Dt){var Qt="name, lightenRatio, tint, tintRatio, exclude",At;if(At=at(t.Theme.apply,arguments,Qt))return At;if(localStorage){n(Mt)&&(Mt="zim");var Xt=Mt.toLowerCase();n(It)&&(It=0),n(Ot)&&(Ot=-1),n(Tt)&&(Tt=0),n(Dt)?Dt=-1:Array.isArray(Dt)||(Dt=[Dt]),localStorage.setItem(mt,JSON.stringify({name:Xt,lightenRatio:It,tint:Ot,tintRatio:Tt,exclude:Dt})),window.location.reload()}else je("ZIM applyTheme() - needs localStorage")},clear:function(){localStorage&&localStorage.getItem(mt)&&localStorage.removeItem(mt),window.location.reload()}};var mt=window.location.href.replace(/[.\/:]/g,"");return localStorage&&localStorage.getItem(mt)?(t.THEME=window.THEME=JSON.parse(localStorage.getItem(mt)),t.Theme.set(or.name,or.lightenRatio,or.tint,or.tintRatio,or.exclude)):t.THEME=window.THEME=null,t}(ge||{});var Hr=[["zog",Gn],["zid",xn],["zss",gi],["zgo",nr],["zum",Qn],["zot",n],["zop",vi],["zil",Yr],["zet",fr],["zob",at],["zik",et],["zta",yi],["zor",xi],["zogg",ti],["zogp",pi],["zogb",Rr],["zogr",ni],["zogy",je],["zogo",ri],["zogl",Ar],["zogd",kr],["zimplify",Ci],["zimify",Vn]];for(on=0;on<Hr.length;on++)qn=Hr[on],j[qn[0]]=ge[qn[0]]=qn[1];var qn,Jr=[["FIT",ge.FIT],["FILL",ge.FILL],["FULL",ge.FULL],["LEFT",ge.LEFT],["RIGHT",ge.RIGHT],["CENTER",ge.CENTER],["MIDDLE",ge.MIDDLE],["START",ge.START],["END",ge.END],["TOP",ge.TOP],["BOTTOM",ge.BOTTOM],["HORIZONTAL",ge.HORIZONTAL],["VERTICAL",ge.VERTICAL],["BOTH",ge.BOTH],["RADIAL",ge.RADIAL],["UP",ge.UP],["DOWN",ge.DOWN],["NEXT",ge.NEXT],["PREV",ge.PREV],["AUTO",ge.AUTO],["AVE",ge.AVE],["DEFAULT",ge.DEFAULT],["ALL",ge.ALL],["NONE",ge.NONE],["GET",ge.GET],["POST",ge.POST],["LOCALSTORAGE",ge.LOCALSTORAGE],["SOCKET",ge.SOCKET],["TO",ge.TO],["FROM",ge.FROM],["SINE",ge.SINE],["SQUARE",ge.SQUARE],["TRIANGLE",ge.TRIANGLE],["SAW",ge.SAW],["SAWTOOTH",ge.SAWTOOTH],["ZAP",ge.ZAP],["TAU",ge.TAU],["DEG",ge.DEG],["RAD",ge.RAD],["PHI",ge.PHI]];for(on=0;on<Jr.length;on++)qn=Jr[on],j[qn[0]]=qn[1];var qn;for(on=0;on<ge.colors.length;on++)j[ge.colors[on]]=ge.colorsHex[on];var Ei=ge;j.zim=ge;var Pi=ge.chop,Mi= exports.shuffle =ge.shuffle,Ii= exports.pluck =ge.pluck,Si= exports.rand =ge.rand,Oi= exports.seedRandom =ge.seedRandom,bi= exports.odds =ge.odds,Li= exports.rarity =ge.rarity,Bi= exports.repeats =ge.repeats,Di= exports.series =ge.series,Ri= exports.loop =ge.loop,Yi= exports.getTIME =ge.getTIME,$r= exports.timeout =ge.timeout,mi= exports.interval =ge.interval,_i= exports.async =ge.async,Xi= exports.couple =ge.couple,Ni= exports.decouple =ge.decouple,Fi= exports.convertColor =ge.convertColor,Gi= exports.colorRange =ge.colorRange,Vi= exports.lighten =ge.lighten,Wi= exports.darken =ge.darken,Ui= exports.toColor =ge.toColor,Qi= exports.toAlpha =ge.toAlpha,qi= exports.toBW =ge.toBW,Zi= exports.invertColor =ge.invertColor,Ki= exports.zimEase =ge.zimEase,Hi= exports.spline =ge.spline,Ji= exports.pointAlongCurve =ge.pointAlongCurve,$i= exports.distanceAlongCurve =ge.distanceAlongCurve,ji= exports.closestPointAlongCurve =ge.closestPointAlongCurve,zi= exports.transformPoints =ge.transformPoints,el= exports.trimEndPoints =ge.trimEndPoints,tl= exports.reversePoints =ge.reversePoints,nl= exports.appendPoints =ge.appendPoints,rl= exports.prependPoints =ge.prependPoints,il= exports.splitPoints =ge.splitPoints,ll= exports.makeID =ge.makeID,al= exports.makeSyllable =ge.makeSyllable,sl= exports.makePrimitive =ge.makePrimitive,ol= exports.makeMath =ge.makeMath,fl= exports.swapProperties =ge.swapProperties,ul= exports.mobile =ge.mobile,cl= exports.vee =ge.vee,dl= exports.extend =ge.extend,hl= exports.copy =ge.copy,pl= exports.merge =ge.merge,gl= exports.sortObject =ge.sortObject,vl= exports.arraysEqual =ge.arraysEqual,yl= exports.arrayMinMax =ge.arrayMinMax,xl= exports.isEmpty =ge.isEmpty,wl= exports.isJSON =ge.isJSON,Cl= exports.isPick =ge.isPick,ml= exports.decimals =ge.decimals,Tl= exports.countDecimals =ge.countDecimals,Al= exports.sign =ge.sign,kl= exports.constrain =ge.constrain,El= exports.dist =ge.dist,Pl= exports.rectIntersect =ge.rectIntersect,Ml= exports.boundsAroundPoints =ge.boundsAroundPoints,Il= exports.angle =ge.angle,Sl= exports.smoothStep =ge.smoothStep,Ol= exports.unicodeToUTF =ge.unicodeToUTF,bl= exports.capitalizeFirst =ge.capitalizeFirst,Ll= exports.Ajax =ge.Ajax,Bl= exports.Noise =ge.Noise,Dl= exports.Point =ge.Point,Rl= exports.Bezier =ge.Bezier,Yl= exports.Boundary =ge.Boundary,_l= exports.GradientColor =ge.GradientColor,Xl= exports.RadialColor =ge.RadialColor,Nl= exports.BitmapColor =ge.BitmapColor,Fl= exports.Damp =ge.Damp,Gl= exports.Proportion =ge.Proportion,Vl= exports.ProportionDamp =ge.ProportionDamp,Wl= exports.Dictionary =ge.Dictionary,Ul= exports.Hierarchy =ge.Hierarchy,Ql= exports.Pick =ge.Pick,ql= exports.scrollX =ge.scrollX,Zl= exports.scrollY =ge.scrollY,Kl= exports.windowWidth =ge.windowWidth,Hl= exports.windowHeight =ge.windowHeight,Jl= exports.browserZoom =ge.browserZoom,$l= exports.getQueryString =ge.getQueryString,jl= exports.swapHTML =ge.swapHTML,zl= exports.urlEncode =ge.urlEncode,ea= exports.urlDecode =ge.urlDecode,ta= exports.setCookie =ge.setCookie,na= exports.getCookie =ge.getCookie,ra= exports.deleteCookie =ge.deleteCookie,ia= exports.Stage =ge.Stage,la= exports.StageGL =ge.StageGL,jr= exports.Container =ge.Container,aa= exports.Shape =ge.Shape,sa= exports.Bitmap =ge.Bitmap,oa= exports.Sprite =ge.Sprite,fa= exports.MovieClip =ge.MovieClip,ua= exports.SVGContainer =ge.SVGContainer,ca= exports.CustomShape =ge.CustomShape,da= exports.Circle =ge.Circle,On= exports.Rectangle =ge.Rectangle,ha= exports.Triangle =ge.Triangle,pa= exports.Poly =ge.Poly,ga= exports.Line =ge.Line,va= exports.Squiggle =ge.Squiggle,li= exports.Blob =ge.Blob,Ti= exports.Window =ge.Window,ya= exports.Flare =ge.Flare,xa= exports.MultiFlare =ge.MultiFlare,wa= exports.FlareBox =ge.FlareBox,zr= exports.Label =ge.Label,Ca= exports.LabelOnPath =ge.LabelOnPath,ma= exports.LabelOnArc =ge.LabelOnArc,Ta= exports.LabelLetters =ge.LabelLetters,Aa= exports.Emoji =ge.Emoji,ka= exports.Button =ge.Button,Ea= exports.CheckBox =ge.CheckBox,Pa= exports.RadioButtons =ge.RadioButtons,Ma= exports.Toggle =ge.Toggle,Ia= exports.Tip =ge.Tip,Sa= exports.Pane =ge.Pane,Oa= exports.Panel =ge.Panel,ba= exports.Page =ge.Page,La= exports.Layer =ge.Layer,Ba= exports.Waiter =ge.Waiter,Da= exports.ProgressBar =ge.ProgressBar,Ra= exports.Indicator =ge.Indicator,Ya= exports.TextInput =ge.TextInput,_a= exports.List =ge.List,Xa= exports.Stepper =ge.Stepper,Na= exports.Slider =ge.Slider,Fa= exports.Selector =ge.Selector,Ga= exports.Dial =ge.Dial,Va= exports.Tabs =ge.Tabs,Wa= exports.Pad =ge.Pad,Ua= exports.NumPad =ge.NumPad,Qa= exports.DPad =ge.DPad,qa= exports.Radial =ge.Radial,Za= exports.RadialMenu =ge.RadialMenu,Ka= exports.ColorPicker =ge.ColorPicker,Ha= exports.EmojiPicker =ge.EmojiPicker,Ja= exports.TextEditor =ge.TextEditor,$a= exports.Keyboard =ge.Keyboard,ja= exports.Organizer =ge.Organizer,za= exports.Connectors =ge.Connectors,es= exports.Marquee =ge.Marquee,ts= exports.Carousel =ge.Carousel,ns= exports.Loader =ge.Loader,rs= exports.TextArea =ge.TextArea,is= exports.Tag =ge.Tag,ls= exports.localToGlobal =ge.localToGlobal,as= exports.globalToLocal =ge.globalToLocal,ss= exports.localToLocal =ge.localToLocal,os= exports.addTo =ge.addTo,fs= exports.removeFrom =ge.removeFrom,us= exports.added =ge.added,cs= exports.centerReg =ge.centerReg,ds= exports.center =ge.center,hs= exports.place =ge.place,ps= exports.placeReg =ge.placeReg,gs= exports.pos =ge.pos,vs= exports.loc =ge.loc,ys= exports.mov =ge.mov,xs= exports.sca =ge.sca,ws= exports.alp =ge.alp,Cs= exports.vis =ge.vis,ms= exports.ble =ge.ble,Ts= exports.dye =ge.dye,As= exports.hov =ge.hov,ks= exports.rot =ge.rot,Es= exports.siz =ge.siz,Ps= exports.ske =ge.ske,Ms= exports.reg =ge.reg,Is= exports.top =ge.top,Ss= exports.bot =ge.bot,Os= exports.ord =ge.ord,bs= exports.cur =ge.cur,Ls= exports.sha =ge.sha,Bs= exports.dep =ge.dep,Ds= exports.nam =ge.nam,Rs= exports.movement =ge.movement,Ys= exports.noMovement =ge.noMovement,_s= exports.tap =ge.tap,Xs= exports.noTap =ge.noTap,Ns= exports.hold =ge.hold,Fs= exports.noHold =ge.noHold,Gs= exports.change =ge.change,Vs= exports.noChange =ge.noChange,Ws= exports.drag =ge.drag,Us= exports.noDrag =ge.noDrag,Qs= exports.dragBoundary =ge.dragBoundary,qs= exports.mouse =ge.mouse,Zs= exports.noMouse =ge.noMouse,Ks= exports.wire =ge.wire,Hs= exports.noWire =ge.noWire,Js= exports.wired =ge.wired,$s= exports.noWired =ge.noWired,js= exports.bind =ge.bind,zs= exports.noBind =ge.noBind,eo= exports.transform =ge.transform,to= exports.gesture =ge.gesture,no= exports.noGesture =ge.noGesture,ro= exports.gestureBoundary =ge.gestureBoundary,io= exports.effect =ge.effect,lo= exports.updateEffects =ge.updateEffects,ao= exports.noEffect =ge.noEffect,so= exports.addPhysics =ge.addPhysics,oo= exports.removePhysics =ge.removePhysics,fo= exports.hitTestPoint =ge.hitTestPoint,uo= exports.hitTestReg =ge.hitTestReg,co= exports.hitTestRect =ge.hitTestRect,ho= exports.hitTestCircle =ge.hitTestCircle,po= exports.hitTestCircleRect =ge.hitTestCircleRect,go= exports.hitTestCircles =ge.hitTestCircles,vo= exports.hitTestBounds =ge.hitTestBounds,yo= exports.hitTestPath =ge.hitTestPath,xo= exports.hitTestGrid =ge.hitTestGrid,wo= exports.animate =ge.animate,Co= exports.stopAnimate =ge.stopAnimate,mo= exports.pauseAnimate =ge.pauseAnimate,To= exports.wiggle =ge.wiggle,Ao= exports.scaleTo =ge.scaleTo,ko= exports.fit =ge.fit,Eo= exports.boundsToGlobal =ge.boundsToGlobal,Po= exports.resetBounds =ge.resetBounds,Mo= exports.copyMatrix =ge.copyMatrix,Io= exports.duplicate =ge.duplicate,So= exports.expand =ge.expand,Oo= exports.setSwipe =ge.setSwipe,bo= exports.setMask =ge.setMask,Lo= exports.outline =ge.outline,Bo= exports.blendmodes =ge.blendmodes,Do= exports.Pages =ge.Pages,Ro= exports.Arrow =ge.Arrow,Yo= exports.HotSpots =ge.HotSpots,_o= exports.HotSpot =ge.HotSpot,Xo= exports.Guide =ge.Guide,No= exports.Grid =ge.Grid,Fo= exports.Wrapper =ge.Wrapper,ei= exports.Tile =ge.Tile,Go= exports.Pack =ge.Pack,Vo= exports.Beads =ge.Beads,Wo= exports.Layout =ge.Layout,Uo= exports.Accessibility =ge.Accessibility,Qo= exports.TextureActive =ge.TextureActive,qo= exports.TextureActives =ge.TextureActives,Zo= exports.TextureActivesManager =ge.TextureActivesManager,Ko= exports.Manager =ge.Manager,Ho= exports.ResizeManager =ge.ResizeManager,Jo= exports.TransformManager =ge.TransformManager,$o= exports.GuideManager =ge.GuideManager,jo= exports.GridManager =ge.GridManager,zo= exports.LayoutManager =ge.LayoutManager,ef= exports.SelectionSet =ge.SelectionSet,tf= exports.SelectionManager =ge.SelectionManager,nf= exports.Bind =ge.Bind,rf= exports.Swipe =ge.Swipe,lf= exports.Swiper =ge.Swiper,af= exports.MotionController =ge.MotionController,sf= exports.GamePad =ge.GamePad,of= exports.Portal =ge.Portal,ff= exports.Physics =ge.Physics,uf= exports.TimeLine =ge.TimeLine,cf= exports.BlurEffect =ge.BlurEffect,df= exports.GlowEffect =ge.GlowEffect,hf= exports.ShadowEffect =ge.ShadowEffect,pf= exports.ColorEffect =ge.ColorEffect,gf= exports.MultiEffect =ge.MultiEffect,vf= exports.AlphaEffect =ge.AlphaEffect,yf= exports.Pixel =ge.Pixel,xf= exports.Parallax =ge.Parallax,wf= exports.Flipper =ge.Flipper,Cf= exports.Book =ge.Book,mf= exports.Scrambler =ge.Scrambler,Tf= exports.Scroller =ge.Scroller,Af= exports.Dynamo =ge.Dynamo,kf= exports.Accelerator =ge.Accelerator,Ef= exports.Emitter =ge.Emitter,Pf= exports.Generator =ge.Generator,Mf= exports.Pen =ge.Pen,If= exports.SoundWave =ge.SoundWave,Sf= exports.Synth =ge.Synth,Of= exports.VR =ge.VR,bf= exports.Frame =ge.Frame,Lf= exports.Pic =ge.Pic,Bf= exports.Aud =ge.Aud,Df= exports.Vid =ge.Vid,Rf= exports.SVG =ge.SVG,Yf= exports.SensorAsk =ge.SensorAsk,_f= exports.distill =ge.distill,Xf= exports.parseAudioSprite =ge.parseAudioSprite,Nf= exports.previewAudioSprite =ge.previewAudioSprite,Ff= exports.svgToBitmap =ge.svgToBitmap,Gf= exports.makeContent =ge.makeContent,Vf= exports.fastFrame =ge.fastFrame,Wf= exports.addWires =ge.addWires,Uf= exports.setBlurDetect =ge.setBlurDetect,Qf= exports.Wonder =ge.Wonder,qf= exports.getLatestVersions =ge.getLatestVersions,Zf= exports.PWA =ge.PWA,Kf= exports.QR =ge.QR,Hf= exports.GIF =ge.GIF,or= exports.THEME =ge.THEME;exports.Accelerator = kf; exports.Accessibility = Uo; exports.Ajax = Ll; exports.AlphaEffect = vf; exports.Arrow = Ro; exports.Aud = Bf; exports.Beads = Vo; exports.Bezier = Rl; exports.Bind = nf; exports.Bitmap = sa; exports.BitmapColor = Nl; exports.Blob = li; exports.BlurEffect = cf; exports.Book = Cf; exports.Boundary = Yl; exports.Button = ka; exports.Carousel = ts; exports.CheckBox = Ea; exports.Circle = da; exports.ColorEffect = pf; exports.ColorPicker = Ka; exports.Connectors = za; exports.Container = jr; exports.CustomShape = ca; exports.DPad = Qa; exports.Damp = Fl; exports.Dial = Ga; exports.Dictionary = Wl; exports.Dynamo = Af; exports.Emitter = Ef; exports.Emoji = Aa; exports.EmojiPicker = Ha; exports.Flare = ya; exports.FlareBox = wa; exports.Flipper = wf; exports.Frame = bf; exports.GIF = Hf; exports.GamePad = sf; exports.Generator = Pf; exports.GlowEffect = df; exports.GradientColor = _l; exports.Grid = No; exports.GridManager = jo; exports.Guide = Xo; exports.GuideManager = $o; exports.Hierarchy = Ul; exports.HotSpot = _o; exports.HotSpots = Yo; exports.Indicator = Ra; exports.Keyboard = $a; exports.Label = zr; exports.LabelLetters = Ta; exports.LabelOnArc = ma; exports.LabelOnPath = Ca; exports.Layer = La; exports.Layout = Wo; exports.LayoutManager = zo; exports.Line = ga; exports.List = _a; exports.Loader = ns; exports.Manager = Ko; exports.Marquee = es; exports.MotionController = af; exports.MovieClip = fa; exports.MultiEffect = gf; exports.MultiFlare = xa; exports.Noise = Bl; exports.NumPad = Ua; exports.Organizer = ja; exports.PWA = Zf; exports.Pack = Go; exports.Pad = Wa; exports.Page = ba; exports.Pages = Do; exports.Pane = Sa; exports.Panel = Oa; exports.Parallax = xf; exports.Pen = Mf; exports.Physics = ff; exports.Pic = Lf; exports.Pick = Ql; exports.Pixel = yf; exports.Point = Dl; exports.Poly = pa; exports.Portal = of; exports.ProgressBar = Da; exports.Proportion = Gl; exports.ProportionDamp = Vl; exports.QR = Kf; exports.Radial = qa; exports.RadialColor = Xl; exports.RadialMenu = Za; exports.RadioButtons = Pa; exports.Rectangle = On; exports.ResizeManager = Ho; exports.SVG = Rf; exports.SVGContainer = ua; exports.Scrambler = mf; exports.Scroller = Tf; exports.SelectionManager = tf; exports.SelectionSet = ef; exports.Selector = Fa; exports.SensorAsk = Yf; exports.ShadowEffect = hf; exports.Shape = aa; exports.Slider = Na; exports.SoundWave = If; exports.Sprite = oa; exports.Squiggle = va; exports.Stage = ia; exports.StageGL = la; exports.Stepper = Xa; exports.Swipe = rf; exports.Swiper = lf; exports.Synth = Sf; exports.THEME = or; exports.Tabs = Va; exports.Tag = is; exports.TextArea = rs; exports.TextEditor = Ja; exports.TextInput = Ya; exports.TextureActive = Qo; exports.TextureActives = qo; exports.TextureActivesManager = Zo; exports.Tile = ei; exports.TimeLine = uf; exports.Tip = Ia; exports.Toggle = Ma; exports.TransformManager = Jo; exports.Triangle = ha; exports.VR = Of; exports.Vid = Df; exports.Waiter = Ba; exports.Window = Ti; exports.Wonder = Qf; exports.Wrapper = Fo; exports.addPhysics = so; exports.addTo = os; exports.addWires = Wf; exports.added = us; exports.alp = ws; exports.angle = Il; exports.animate = wo; exports.appendPoints = nl; exports.arrayMinMax = yl; exports.arraysEqual = vl; exports.async = _i; exports.bind = js; exports.ble = ms; exports.blendmodes = Bo; exports.bot = Ss; exports.boundsAroundPoints = Ml; exports.boundsToGlobal = Eo; exports.browserZoom = Jl; exports.capitalizeFirst = bl; exports.center = ds; exports.centerReg = cs; exports.change = Gs; exports.chop = Pi; exports.closestPointAlongCurve = ji; exports.colorRange = Gi; exports.constrain = kl; exports.convertColor = Fi; exports.copy = hl; exports.copyMatrix = Mo; exports.countDecimals = Tl; exports.couple = Xi; exports.cur = bs; exports.darken = Wi; exports.decimals = ml; exports.decouple = Ni; exports.default = Ei; exports.deleteCookie = ra; exports.dep = Bs; exports.dist = El; exports.distanceAlongCurve = $i; exports.distill = _f; exports.drag = Ws; exports.dragBoundary = Qs; exports.duplicate = Io; exports.dye = Ts; exports.effect = io; exports.expand = So; exports.extend = dl; exports.fastFrame = Vf; exports.fit = ko; exports.gesture = to; exports.gestureBoundary = ro; exports.getCookie = na; exports.getLatestVersions = qf; exports.getQueryString = $l; exports.getTIME = Yi; exports.globalToLocal = as; exports.hitTestBounds = vo; exports.hitTestCircle = ho; exports.hitTestCircleRect = po; exports.hitTestCircles = go; exports.hitTestGrid = xo; exports.hitTestPath = yo; exports.hitTestPoint = fo; exports.hitTestRect = co; exports.hitTestReg = uo; exports.hold = Ns; exports.hov = As; exports.interval = mi; exports.invertColor = Zi; exports.isEmpty = xl; exports.isJSON = wl; exports.isPick = Cl; exports.lighten = Vi; exports.loc = vs; exports.localToGlobal = ls; exports.localToLocal = ss; exports.loop = Ri; exports.makeContent = Gf; exports.makeID = ll; exports.makeMath = ol; exports.makePrimitive = sl; exports.makeSyllable = al; exports.merge = pl; exports.mobile = ul; exports.mouse = qs; exports.mov = ys; exports.movement = Rs; exports.nam = Ds; exports.noBind = zs; exports.noChange = Vs; exports.noDrag = Us; exports.noEffect = ao; exports.noGesture = no; exports.noHold = Fs; exports.noMouse = Zs; exports.noMovement = Ys; exports.noTap = Xs; exports.noWire = Hs; exports.noWired = $s; exports.odds = bi; exports.ord = Os; exports.outline = Lo; exports.parseAudioSprite = Xf; exports.pauseAnimate = mo; exports.place = hs; exports.placeReg = ps; exports.pluck = Ii; exports.pointAlongCurve = Ji; exports.pos = gs; exports.prependPoints = rl; exports.previewAudioSprite = Nf; exports.rand = Si; exports.rarity = Li; exports.rectIntersect = Pl; exports.reg = Ms; exports.removeFrom = fs; exports.removePhysics = oo; exports.repeats = Bi; exports.resetBounds = Po; exports.reversePoints = tl; exports.rot = ks; exports.sca = xs; exports.scaleTo = Ao; exports.scrollX = ql; exports.scrollY = Zl; exports.seedRandom = Oi; exports.series = Di; exports.setBlurDetect = Uf; exports.setCookie = ta; exports.setMask = bo; exports.setSwipe = Oo; exports.sha = Ls; exports.shuffle = Mi; exports.sign = Al; exports.siz = Es; exports.ske = Ps; exports.smoothStep = Sl; exports.sortObject = gl; exports.spline = Hi; exports.splitPoints = il; exports.stopAnimate = Co; exports.svgToBitmap = Ff; exports.swapHTML = jl; exports.swapProperties = fl; exports.tap = _s; exports.timeout = $r; exports.toAlpha = Qi; exports.toBW = qi; exports.toColor = Ui; exports.top = Is; exports.transform = eo; exports.transformPoints = zi; exports.trimEndPoints = el; exports.unicodeToUTF = Ol; exports.updateEffects = lo; exports.urlDecode = ea; exports.urlEncode = zl; exports.vee = cl; exports.vis = Cs; exports.wiggle = To; exports.windowHeight = Hl; exports.windowWidth = Kl; exports.wire = Ks; exports.wired = Js; exports.zimEase = Ki;
/*! ZIM - JavaScript Canvas Framework - Code Creativity
https://zimjs.com (c) 2023 modified MIT License
Donations welcome https://zimjs.com/donate
Node module - also see ES6 modules at https://zimjs.com/cdn
*/
