(()=>{var xi=Object.create;var zr=Object.defineProperty;var wi=Object.getOwnPropertyDescriptor;var _i=Object.getOwnPropertyNames;var Ti=Object.getPrototypeOf,Ci=Object.prototype.hasOwnProperty;var Ai=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(v,a)=>(typeof require<"u"?require:v)[a]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Ei=(e,v)=>()=>(v||e((v={exports:{}}).exports,v),v.exports);var bi=(e,v,a,u)=>{if(v&&typeof v=="object"||typeof v=="function")for(let c of _i(v))!Ci.call(e,c)&&c!==a&&zr(e,c,{get:()=>v[c],enumerable:!(u=wi(v,c))||u.enumerable});return e};var ki=(e,v,a)=>(a=e!=null?xi(Ti(e)):{},bi(v||!e||!e.__esModule?zr(a,"default",{value:e,enumerable:!0}):a,e));var ei=Ei((Rn,cr)=>{var re=re||{};re.stageTransformable=!0,re.extend=function(e,v){"use strict";function a(){this.constructor=e}return a.prototype=v.prototype,e.prototype=new a},re.promote=function(e,v){"use strict";var a=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(a)||a.__proto__;if(u)for(var c in a[(v+="_")+"constructor"]=u.constructor,u)a.hasOwnProperty(c)&&typeof u[c]=="function"&&(a[v+c]=u[c]);return e},re.indexOf=function(e,v){"use strict";for(var a=0,u=e.length;a<u;a++)if(v===e[a])return a;return-1},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},re.UID=e}(),re.deprecate=function(e,v){"use strict";return function(){var a="Deprecated property or method '"+v+"'. See docs for info.";return console&&(console.warn?console.warn(a):console.log(a)),e&&e.apply(this,arguments)}},function(){"use strict";function e(a,u,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!u,this.cancelable=!!c,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var v=e.prototype;v.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},v.stopPropagation=function(){this.propagationStopped=!0},v.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},v.remove=function(){this.removed=!0},v.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},v.set=function(a){for(var u in a)this[u]=a[u];return this},v.toString=function(){return"[Event (type="+this.type+")]"},re.Event=e}(),function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var v=e.prototype;e.initialize=function(a){a.addEventListener=v.addEventListener,a.on=v.on,a.removeEventListener=a.off=v.removeEventListener,a.removeAllEventListeners=v.removeAllEventListeners,a.hasEventListener=v.hasEventListener,a.dispatchEvent=v.dispatchEvent,a._dispatchEvent=v._dispatchEvent,a.willTrigger=v.willTrigger},v.addEventListener=function(a,u,c){var m=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},B=m[a];return B&&this.removeEventListener(a,u,c),(B=m[a])?B.push(u):m[a]=[u],u},v.on=function(a,u,c,m,B,z){return u.handleEvent&&(c=c||u,u=u.handleEvent),c=c||this,this.addEventListener(a,function(oe){u.call(c,oe,B),m&&oe.remove()},z)},v.removeEventListener=function(a,u,c){var m=c?this._captureListeners:this._listeners;if(m){var B=m[a];if(B){for(var z=0,oe=B.length;z<oe;z++)if(B[z]==u){oe==1?delete m[a]:B.splice(z,1);break}}}},v.off=v.removeEventListener,v.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},v.dispatchEvent=function(a,u,c){if(typeof a=="string"){var m=this._listeners;if(!(u||m&&m[a]))return!0;a=new re.Event(a,u,c)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(be){}if(a.bubbles&&this.parent){for(var B=this,z=[B];B.parent;)z.push(B=B.parent);for(var oe=z.length,Ce=oe-1;0<=Ce&&!a.propagationStopped;Ce--)z[Ce]._dispatchEvent(a,1+(Ce==0));for(Ce=1;Ce<oe&&!a.propagationStopped;Ce++)z[Ce]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented},v.hasEventListener=function(a){var u=this._listeners,c=this._captureListeners;return!!(u&&u[a]||c&&c[a])},v.willTrigger=function(a){for(var u=this;u;){if(u.hasEventListener(a))return!0;u=u.parent}return!1},v.toString=function(){return"[EventDispatcher]"},v._dispatchEvent=function(a,u){var c,m,B=u<=2?this._captureListeners:this._listeners;if(a&&B&&(m=B[a.type])&&(c=m.length)){try{a.currentTarget=this}catch(Ce){}try{a.eventPhase=0|u}catch(Ce){}a.removed=!1,m=m.slice();for(var z=0;z<c&&!a.immediatePropagationStopped;z++){var oe=m[z];oe.handleEvent?oe.handleEvent(a):oe(a),a.removed&&(this.off(a.type,oe,u==1),a.removed=!1)}}u===2&&this._dispatchEvent(a,2.1)},re.EventDispatcher=e}(),function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,re.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return e._inited||e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e._setInterval=function(u){e._interval=u,e._inited&&e._setupTick()},e.setInterval=re.deprecate(e._setInterval,"Ticker.setInterval"),e._getInterval=function(){return e._interval},e.getInterval=re.deprecate(e._getInterval,"Ticker.getInterval"),e._setFPS=function(u){e._setInterval(1e3/u)},e.setFPS=re.deprecate(e._setFPS,"Ticker.setFPS"),e._getFPS=function(){return 1e3/e._interval},e.getFPS=re.deprecate(e._getFPS,"Ticker.getFPS");try{Object.defineProperties(e,{interval:{get:e._getInterval,set:e._setInterval},framerate:{get:e._getFPS,set:e._setFPS}})}catch(u){console.log(u)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){var u;e._raf?(u=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&u(e._timerId):clearTimeout(e._timerId),e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=e._pausedTime=0,e._inited=!1},e.getMeasuredTickTime=function(u){var c=0,m=e._tickTimes;if(!m||m.length<1)return-1;u=Math.min(m.length,u||0|e._getFPS());for(var B=0;B<u;B++)c+=m[B];return c/u},e.getMeasuredFPS=function(u){var c=e._times;return!c||c.length<2?-1:(u=Math.min(c.length-1,u||0|e._getFPS()),1e3/((c[0]-c[u])/u))},e.getTime=function(u){return e._startTime?e._getTime()-(u?e._pausedTime:0):-1},e.getEventTime=function(u){return e._startTime?(e._lastTime||e._startTime)-(u?e._pausedTime:0):-1},e.getTicks=function(u){return e._ticks-(u?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(e._timerId==null){var u=e.timingMode;if(u==e.RAF_SYNCHED||u==e.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return e._timerId=c(u==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var u,c,m=e.paused,B=e._getTime(),z=B-e._lastTime;for(e._lastTime=B,e._ticks++,m&&(e._pausedTicks++,e._pausedTime+=z),e.hasEventListener("tick")&&(u=new re.Event("tick"),c=e.maxDelta,u.delta=c&&c<z?c:z,u.paused=m,u.time=B,u.runTime=B-e._pausedTime,e.dispatchEvent(u)),e._tickTimes.unshift(e._getTime()-B);100<e._tickTimes.length;)e._tickTimes.pop();for(e._times.unshift(B);100<e._times.length;)e._times.pop()};var v=window,a=v.performance.now||v.performance.mozNow||v.performance.msNow||v.performance.oNow||v.performance.webkitNow;e._getTime=function(){return(a&&a.call(v.performance)||new Date().getTime())-e._startTime},re.Ticker=e}(),function(){"use strict";function e(a){this.readyState=a.readyState,this._video=a,this._canvas=null,this._lastTime=-1,this.readyState<2&&a.addEventListener("canplaythrough",this._videoReady.bind(this))}var v=e.prototype;v.getImage=function(){if(!(this.readyState<2)){var a,u=this._canvas,c=this._video;return u||((u=this._canvas=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=c.videoWidth,u.height=c.videoHeight),2<=c.readyState&&c.currentTime!==this._lastTime&&((a=u.getContext("2d")).clearRect(0,0,u.width,u.height),a.drawImage(c,0,0,u.width,u.height),this._lastTime=c.currentTime),u}},v._videoReady=function(){this.readyState=2},re.VideoBuffer=e}(),function(){"use strict";function e(a,u,c,m,B,z,oe,Ce,be,t,r){this.Event_constructor(a,u,c),this.stageX=m,this.stageY=B,this.rawX=be==null?m:be,this.rawY=t==null?B:t,this.nativeEvent=z,this.pointerID=oe,this.primary=!!Ce,this.relatedTarget=r}var v=re.extend(e,re.Event);v._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},v._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},v._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(v,{localX:{get:v._get_localX},localY:{get:v._get_localY},isTouch:{get:v._get_isTouch}})}catch(a){}v.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},v.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},re.MouseEvent=re.promote(e,"Event")}(),function(){"use strict";function e(a,u,c,m,B,z){this.setValues(a,u,c,m,B,z)}var v=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,v.setValues=function(a,u,c,m,B,z){return this.a=a==null?1:a,this.b=u||0,this.c=c||0,this.d=m==null?1:m,this.tx=B||0,this.ty=z||0,this},v.append=function(a,u,c,m,B,z){var oe=this.a,Ce=this.b,be=this.c,t=this.d;return a==1&&u==0&&c==0&&m==1||(this.a=oe*a+be*u,this.b=Ce*a+t*u,this.c=oe*c+be*m,this.d=Ce*c+t*m),this.tx=oe*B+be*z+this.tx,this.ty=Ce*B+t*z+this.ty,this},v.prepend=function(a,u,c,m,B,z){var oe=this.a,Ce=this.c,be=this.tx;return this.a=a*oe+c*this.b,this.b=u*oe+m*this.b,this.c=a*Ce+c*this.d,this.d=u*Ce+m*this.d,this.tx=a*be+c*this.ty+B,this.ty=u*be+m*this.ty+z,this},v.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},v.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},v.appendTransform=function(a,u,c,m,B,z,oe,Ce,be){var t,r=B%360?(r=B*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return z||oe?(z*=e.DEG_TO_RAD,oe*=e.DEG_TO_RAD,this.append(Math.cos(oe),Math.sin(oe),-Math.sin(z),Math.cos(z),a,u),this.append(t*c,r*c,-r*m,t*m,0,0)):this.append(t*c,r*c,-r*m,t*m,a,u),(Ce||be)&&(this.tx-=Ce*this.a+be*this.c,this.ty-=Ce*this.b+be*this.d),this},v.prependTransform=function(a,u,c,m,B,z,oe,Ce,be){var t,r=B%360?(r=B*e.DEG_TO_RAD,t=Math.cos(r),Math.sin(r)):(t=1,0);return(Ce||be)&&(this.tx-=Ce,this.ty-=be),z||oe?(z*=e.DEG_TO_RAD,oe*=e.DEG_TO_RAD,this.prepend(t*c,r*c,-r*m,t*m,0,0),this.prepend(Math.cos(oe),Math.sin(oe),-Math.sin(z),Math.cos(z),a,u)):this.prepend(t*c,r*c,-r*m,t*m,a,u),this},v.rotate=function(B){B*=e.DEG_TO_RAD;var u=Math.cos(B),c=Math.sin(B),m=this.a,B=this.b;return this.a=m*u+this.c*c,this.b=B*u+this.d*c,this.c=-m*c+this.c*u,this.d=-B*c+this.d*u,this},v.skew=function(a,u){return a*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(a),Math.cos(a),0,0),this},v.scale=function(a,u){return this.a*=a,this.b*=a,this.c*=u,this.d*=u,this},v.translate=function(a,u){return this.tx+=this.a*a+this.c*u,this.ty+=this.b*a+this.d*u,this},v.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},v.invert=function(){var a=this.a,u=this.b,c=this.c,m=this.d,B=this.tx,z=a*m-u*c;return this.a=m/z,this.b=-u/z,this.c=-c/z,this.d=a/z,this.tx=(c*this.ty-m*B)/z,this.ty=-(a*this.ty-u*B)/z,this},v.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},v.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},v.transformPoint=function(a,u,c){return(c=c||{}).x=a*this.a+u*this.c+this.tx,c.y=a*this.b+u*this.d+this.ty,c},v.decompose=function(a){a==null&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var u=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);return Math.abs(1-u/c)<1e-5?(a.rotation=c/e.DEG_TO_RAD,this.a<0&&0<=this.d&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=u/e.DEG_TO_RAD,a.skewY=c/e.DEG_TO_RAD),a},v.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},v.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},v.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,re.Matrix2D=e}(),function(){"use strict";function e(a,u,c,m,B){this.setValues(a,u,c,m,B)}var v=e.prototype;v.setValues=function(a,u,c,m,B){return this.visible=a==null||!!a,this.alpha=u==null?1:u,this.shadow=c,this.compositeOperation=m,this.matrix=B||this.matrix&&this.matrix.identity()||new re.Matrix2D,this},v.append=function(a,u,c,m,B){return this.alpha*=u,this.shadow=c||this.shadow,this.compositeOperation=m||this.compositeOperation,this.visible=this.visible&&a,B&&this.matrix.appendMatrix(B),this},v.prepend=function(a,u,c,m,B){return this.alpha*=u,this.shadow=this.shadow||c,this.compositeOperation=this.compositeOperation||m,this.visible=this.visible&&a,B&&this.matrix.prependMatrix(B),this},v.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},v.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},re.DisplayProps=e}(),function(){"use strict";function e(a,u){this.setValues(a,u)}var v=e.prototype;v.setValues=function(a,u){return this.x=a||0,this.y=u||0,this},v.copy=function(a){return this.x=a.x,this.y=a.y,this},v.clone=function(){return new e(this.x,this.y)},v.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},re.Point=e}(),function(){"use strict";function e(a,u,c,m){this.setValues(a,u,c,m)}var v=e.prototype;v.setValues=function(a,u,c,m){return this.x=a||0,this.y=u||0,this.width=c||0,this.height=m||0,this},v.extend=function(a,u,c,m){return m=m||0,a+(c=c||0)>this.x+this.width&&(this.width=a+c-this.x),u+m>this.y+this.height&&(this.height=u+m-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),u<this.y&&(this.height+=this.y-u,this.y=u),this},v.pad=function(a,u,c,m){return this.x-=u,this.y-=a,this.width+=u+m,this.height+=a+c,this},v.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},v.contains=function(a,u,c,m){return c=c||0,m=m||0,a>=this.x&&a+c<=this.x+this.width&&u>=this.y&&u+m<=this.y+this.height},v.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},v.intersection=function(B){var u=B.x,c=B.y,m=u+B.width,B=c+B.height;return this.x>u&&(u=this.x),this.y>c&&(c=this.y),this.x+this.width<m&&(m=this.x+this.width),this.y+this.height<B&&(B=this.y+this.height),m<=u||B<=c?null:new e(u,c,m-u,B-c)},v.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},v.isEmpty=function(){return this.width<=0||this.height<=0},v.clone=function(){return new e(this.x,this.y,this.width,this.height)},v.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},re.Rectangle=e}(),function(){"use strict";function e(a,u,c,m,B,z,oe){a.addEventListener&&(this.target=a,this.overLabel=c==null?"over":c,this.outLabel=u==null?"out":u,this.downLabel=m==null?"down":m,this.play=B,this._isPressed=!1,this._isOver=!1,this._enabled=!1,a.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),z&&(oe&&(z.actionsEnabled=!1,z.gotoAndStop&&z.gotoAndStop(oe)),a.hitArea=z))}var v=e.prototype;v._setEnabled=function(a){var u;a!=this._enabled&&(u=this.target,(this._enabled=a)?(u.cursor="pointer",u.addEventListener("rollover",this),u.addEventListener("rollout",this),u.addEventListener("mousedown",this),u.addEventListener("pressup",this),u._reset&&(u.__reset=u._reset,u._reset=this._reset)):(u.cursor=null,u.removeEventListener("rollover",this),u.removeEventListener("rollout",this),u.removeEventListener("mousedown",this),u.removeEventListener("pressup",this),u.__reset&&(u._reset=u.__reset,delete u.__reset)))},v.setEnabled=re.deprecate(v._setEnabled,"ButtonHelper.setEnabled"),v._getEnabled=function(){return this._enabled},v.getEnabled=re.deprecate(v._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(v,{enabled:{get:v._getEnabled,set:v._setEnabled}})}catch(a){}v.toString=function(){return"[ButtonHelper]"},v.handleEvent=function(c){var u=this.target,c=c.type,c=c=="mousedown"?(this._isPressed=!0,this.downLabel):c=="pressup"?(this._isPressed=!1,this._isOver?this.overLabel:this.outLabel):c=="rollover"?(this._isOver=!0,this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,this._isPressed?this.overLabel:this.outLabel);this.play?u.gotoAndPlay&&u.gotoAndPlay(c):u.gotoAndStop&&u.gotoAndStop(c)},v._reset=function(){var a=this.paused;this.__reset(),this.paused=a},re.ButtonHelper=e}(),function(){"use strict";function e(a,u,c,m){this.color=a||"black",this.offsetX=u||0,this.offsetY=c||0,this.blur=m||0}var v=e.prototype;e.identity=new e("transparent",0,0,0),v.toString=function(){return"[Shadow]"},v.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},re.Shadow=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(a)}var v=re.extend(e,re.EventDispatcher);v._getAnimations=function(){return this._animations.slice()},v.getAnimations=re.deprecate(v._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(v,{animations:{get:v._getAnimations}})}catch(a){}v.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames||0:(a=this._data[a],a==null?0:a.frames.length)},v.getAnimation=function(a){return this._data[a]},v.getFrame=function(a){var u;return this._frames&&(u=this._frames[a])?u:null},v.getFrameBounds=function(a,u){return a=this.getFrame(a),a?(u||new re.Rectangle).setValues(-a.regX,-a.regY,a.rect.width,a.rect.height):null},v.toString=function(){return"[SpriteSheet]"},v.clone=function(){throw"SpriteSheet cannot be cloned."},v._parseData=function(a){var u,c,m,B;if(a!=null){if(this.framerate=a.framerate||0,a.images&&0<(c=a.images.length))for(i=this._images=[],u=0;u<c;u++){var z,oe=a.images[u];typeof oe=="string"&&(z=oe,(oe=document.createElement("img")).src=z),i.push(oe),oe.getContext||oe.naturalWidth||(this._loadCount++,this.complete=!1,function(o,l){oe.onload=function(){o._handleImageLoad(l)}}(this,z),function(o,l){oe.onerror=function(){o._handleImageError(l)}}(this,z))}if(a.frames!=null)if(Array.isArray(a.frames))for(this._frames=[],u=0,c=(i=a.frames).length;u<c;u++){var Ce=i[u];this._frames.push({image:this._images[Ce[4]||0],rect:new re.Rectangle(Ce[0],Ce[1],Ce[2],Ce[3]),regX:Ce[5]||0,regY:Ce[6]||0})}else m=a.frames,this._frameWidth=m.width,this._frameHeight=m.height,this._regX=m.regX||0,this._regY=m.regY||0,this._spacing=m.spacing||0,this._margin=m.margin||0,this._numFrames=m.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(m=a.animations)!=null)for(B in this._data={},m){var be={name:B},t=m[B];if(typeof t=="number")i=be.frames=[t];else if(Array.isArray(t))if(t.length==1)be.frames=[t[0]];else for(be.speed=t[3],be.next=t[2],i=be.frames=[],u=t[0];u<=t[1];u++)i.push(u);else{be.speed=t.speed,be.next=t.next;var r=t.frames,i=be.frames=typeof r=="number"?[r]:r.slice(0)}be.next!==!0&&be.next!==void 0||(be.next=B),(be.next===!1||i.length<2&&be.next==B)&&(be.next=null),be.speed||(be.speed=1),this._animations.push(B),this._data[B]=be}}},v._handleImageLoad=function(a){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},v._handleImageError=function(a){var u=new re.Event("error");u.src=a,this.dispatchEvent(u),--this._loadCount==0&&this.dispatchEvent("complete")},v._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];var a=this._numFrames||1e5,u=0,c=this._frameWidth,m=this._frameHeight,B=this._spacing,z=this._margin;e:for(var oe=0,Ce=this._images;oe<Ce.length;oe++)for(var be=Ce[oe],t=be.width||be.naturalWidth,r=be.height||be.naturalHeight,i=z;i<=r-z-m;){for(var o=z;o<=t-z-c;){if(a<=u)break e;u++,this._frames.push({image:be,rect:new re.Rectangle(o,i,c,m),regX:this._regX,regY:this._regY}),o+=c+B}i+=m+B}this._numFrames=u}},re.SpriteSheet=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var v=e.prototype,a=e;e.getRGB=function(c,m,B,z){return c!=null&&B==null&&(z=m,B=255&c,m=c>>8&255,c=c>>16&255),z==null?"rgb("+c+","+m+","+B+")":"rgba("+c+","+m+","+B+","+z+")"},e.getHSL=function(c,m,B,z){return z==null?"hsl("+c%360+","+m+"%,"+B+"%)":"hsla("+c%360+","+m+"%,"+B+"%,"+z+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var u=re.createCanvas?re.createCanvas():document.createElement("canvas");u.getContext&&(e._ctx=u.getContext("2d"),u.width=u.height=1),v._getInstructions=function(){return this._updateInstructions(),this._instructions},v.getInstructions=re.deprecate(v._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(v,{instructions:{get:v._getInstructions}})}catch(c){}v.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},v.draw=function(c,m){this._updateInstructions();for(var B=this._instructions,z=this._storeIndex,oe=B.length;z<oe;z++)B[z].exec(c,m)},v.drawAsPath=function(c){this._updateInstructions();for(var m,B=this._instructions,z=this._storeIndex,oe=B.length;z<oe;z++)(m=B[z]).path!==!1&&m.exec(c)},v.moveTo=function(c,m){return this.append(new a.MoveTo(c,m),!0)},v.lineTo=function(c,m){return this.append(new a.LineTo(c,m))},v.arcTo=function(c,m,B,z,oe){return this.append(new a.ArcTo(c,m,B,z,oe))},v.arc=function(c,m,B,z,oe,Ce){return this.append(new a.Arc(c,m,B,z,oe,Ce))},v.quadraticCurveTo=function(c,m,B,z){return this.append(new a.QuadraticCurveTo(c,m,B,z))},v.bezierCurveTo=function(c,m,B,z,oe,Ce){return this.append(new a.BezierCurveTo(c,m,B,z,oe,Ce))},v.rect=function(c,m,B,z){return this.append(new a.Rect(c,m,B,z))},v.closePath=function(){return this._activeInstructions.length?this.append(new a.ClosePath):this},v.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},v.beginFill=function(c){return this._setFill(c?new a.Fill(c):null)},v.beginLinearGradientFill=function(c,m,B,z,oe,Ce){return this._setFill(new a.Fill().linearGradient(c,m,B,z,oe,Ce))},v.beginRadialGradientFill=function(c,m,B,z,oe,Ce,be,t){return this._setFill(new a.Fill().radialGradient(c,m,B,z,oe,Ce,be,t))},v.beginBitmapFill=function(c,m,B){return this._setFill(new a.Fill(null,B).bitmap(c,m))},v.endFill=function(){return this.beginFill()},v.setStrokeStyle=function(c,m,B,z,oe){return this._updateInstructions(!0),this._strokeStyle=this.command=new a.StrokeStyle(c,m,B,z,oe),this._stroke&&(this._stroke.ignoreScale=oe),this._strokeIgnoreScale=oe,this},v.setStrokeDash=function(c,m){return this._updateInstructions(!0),this._strokeDash=this.command=new a.StrokeDash(c,m),this},v.beginStroke=function(c){return this._setStroke(c?new a.Stroke(c):null)},v.beginLinearGradientStroke=function(c,m,B,z,oe,Ce){return this._setStroke(new a.Stroke().linearGradient(c,m,B,z,oe,Ce))},v.beginRadialGradientStroke=function(c,m,B,z,oe,Ce,be,t){return this._setStroke(new a.Stroke().radialGradient(c,m,B,z,oe,Ce,be,t))},v.beginBitmapStroke=function(c,m){return this._setStroke(new a.Stroke().bitmap(c,m))},v.endStroke=function(){return this.beginStroke()},v.curveTo=v.quadraticCurveTo,v.drawRect=v.rect,v.drawRoundRect=function(c,m,B,z,oe){return this.drawRoundRectComplex(c,m,B,z,oe,oe,oe,oe)},v.drawRoundRectComplex=function(c,m,B,z,oe,Ce,be,t){return this.append(new a.RoundRect(c,m,B,z,oe,Ce,be,t))},v.drawCircle=function(c,m,B){return this.append(new a.Circle(c,m,B))},v.drawEllipse=function(c,m,B,z){return this.append(new a.Ellipse(c,m,B,z))},v.drawPolyStar=function(c,m,B,z,oe,Ce){return this.append(new a.PolyStar(c,m,B,z,oe,Ce))},v.drawPolygon=function(c,m){return this.append(new a.Polygon(c,m))},v.append=function(c,m){return this._activeInstructions.push(c),this.command=c,m||(this._dirty=!0),this},v.decodePath=function(c){for(var m=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],B=[2,2,4,6,0],z=0,oe=c.length,Ce=[],be=0,t=0,r=e.BASE_64;z<oe;){var i=c.charAt(z),o=r[i],l=o>>3,f=m[l];if(!f||3&o)throw"bad path data (@"+z+"): "+i;var d=B[l];l||(be=t=0),z++;for(var p=2+(o>>2&1),w=Ce.length=0;w<d;w++){var k=(x=r[c.charAt(z)])>>5?-1:1,x=(31&x)<<6|r[c.charAt(z+1)];p==3&&(x=x<<6|r[c.charAt(z+2)]),x=k*x/10,w%2?be=x+=be:t=x+=t,Ce[w]=x,z+=p}f.apply(this,Ce)}return this},v.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},v.unstore=function(){return this._storeIndex=0,this},v.clone=function(){var c=new e;return c.command=this.command,c._stroke=this._stroke,c._strokeStyle=this._strokeStyle,c._strokeDash=this._strokeDash,c._strokeIgnoreScale=this._strokeIgnoreScale,c._fill=this._fill,c._instructions=this._instructions.slice(),c._commitIndex=this._commitIndex,c._activeInstructions=this._activeInstructions.slice(),c._dirty=this._dirty,c._storeIndex=this._storeIndex,c},v.toString=function(){return"[Graphics]"},v.mt=v.moveTo,v.lt=v.lineTo,v.at=v.arcTo,v.bt=v.bezierCurveTo,v.qt=v.quadraticCurveTo,v.a=v.arc,v.r=v.rect,v.cp=v.closePath,v.c=v.clear,v.f=v.beginFill,v.lf=v.beginLinearGradientFill,v.rf=v.beginRadialGradientFill,v.bf=v.beginBitmapFill,v.ef=v.endFill,v.ss=v.setStrokeStyle,v.sd=v.setStrokeDash,v.s=v.beginStroke,v.ls=v.beginLinearGradientStroke,v.rs=v.beginRadialGradientStroke,v.bs=v.beginBitmapStroke,v.es=v.endStroke,v.dr=v.drawRect,v.rr=v.drawRoundRect,v.rc=v.drawRoundRectComplex,v.dc=v.drawCircle,v.de=v.drawEllipse,v.dp=v.drawPolyStar,v.pg=v.drawPolygon,v.p=v.decodePath,v._updateInstructions=function(c){var m=this._instructions,B=this._activeInstructions,z=this._commitIndex;if(this._dirty&&B.length){m.length=z,m.push(e.beginCmd);var oe=B.length,Ce=m.length;m.length=Ce+oe;for(var be=0;be<oe;be++)m[be+Ce]=B[be];this._fill&&m.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&m.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&m.push(this._strokeStyle),c&&(this._oldStrokeStyle=this._strokeStyle,this._oldStrokeDash=this._strokeDash),m.push(this._stroke)),this._dirty=!1}c&&(B.length=0,this._commitIndex=m.length)},v._setFill=function(c){return this._updateInstructions(!0),this.command=this._fill=c,this},v._setStroke=function(c){return this._updateInstructions(!0),(this.command=this._stroke=c)&&(c.ignoreScale=this._strokeIgnoreScale),this},(a.LineTo=function(c,m){this.x=c,this.y=m}).prototype.exec=function(c){c.lineTo(this.x,this.y)},(a.MoveTo=function(c,m){this.x=c,this.y=m}).prototype.exec=function(c){c.moveTo(this.x,this.y)},(a.ArcTo=function(c,m,B,z,oe){this.x1=c,this.y1=m,this.x2=B,this.y2=z,this.radius=oe}).prototype.exec=function(c){c.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(a.Arc=function(c,m,B,z,oe,Ce){this.x=c,this.y=m,this.radius=B,this.startAngle=z,this.endAngle=oe,this.anticlockwise=!!Ce}).prototype.exec=function(c){c.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(a.QuadraticCurveTo=function(c,m,B,z){this.cpx=c,this.cpy=m,this.x=B,this.y=z}).prototype.exec=function(c){c.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(a.BezierCurveTo=function(c,m,B,z,oe,Ce){this.cp1x=c,this.cp1y=m,this.cp2x=B,this.cp2y=z,this.x=oe,this.y=Ce}).prototype.exec=function(c){c.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(a.Rect=function(c,m,B,z){this.x=c,this.y=m,this.w=B,this.h=z}).prototype.exec=function(c){c.rect(this.x,this.y,this.w,this.h)},(a.ClosePath=function(){}).prototype.exec=function(c){c.closePath()},(a.BeginPath=function(){}).prototype.exec=function(c){c.beginPath()},(v=(a.Fill=function(c,m){this.style=c,this.matrix=m}).prototype).exec=function(c){var m;this.style&&(c.fillStyle=this.style,(m=this.matrix)&&(c.save(),c.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)),c.fill(),m&&c.restore())},v.linearGradient=function(c,m,B,z,oe,Ce){for(var be=this.style=e._ctx.createLinearGradient(B,z,oe,Ce),t=0,r=c.length;t<r;t++)be.addColorStop(m[t],c[t]);return be.props={colors:c,ratios:m,x0:B,y0:z,x1:oe,y1:Ce,type:"linear"},this},v.radialGradient=function(c,m,B,z,oe,Ce,be,t){for(var r=this.style=e._ctx.createRadialGradient(B,z,oe,Ce,be,t),i=0,o=c.length;i<o;i++)r.addColorStop(m[i],c[i]);return r.props={colors:c,ratios:m,x0:B,y0:z,r0:oe,x1:Ce,y1:be,r1:t,type:"radial"},this},v.bitmap=function(c,m,B){return B&&(this.matrix=B),(c.naturalWidth||c.getContext||2<=c.readyState)&&((this.style=e._ctx.createPattern(c,m||"")).props={image:c,repetition:m,type:"bitmap"}),this},v.path=!1,(v=(a.Stroke=function(c,m){this.style=c,this.ignoreScale=m}).prototype).exec=function(c){this.style&&(c.strokeStyle=this.style,this.ignoreScale&&(c.save(),c.setTransform(1,0,0,1,0,0)),c.stroke(),this.ignoreScale&&c.restore())},v.linearGradient=a.Fill.prototype.linearGradient,v.radialGradient=a.Fill.prototype.radialGradient,v.bitmap=a.Fill.prototype.bitmap,v.path=!1,(v=(a.StrokeStyle=function(c,m,B,z,oe){this.width=c,this.caps=m,this.joints=B,this.miterLimit=z,this.ignoreScale=oe}).prototype).exec=function(c){c.lineWidth=this.width==null?"1":this.width,c.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],c.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],c.miterLimit=this.miterLimit==null?"10":this.miterLimit,c.ignoreScale=this.ignoreScale!=null&&this.ignoreScale},v.path=!1,(a.StrokeDash=function(c,m){this.segments=c,this.offset=m||0}).prototype.exec=function(c){c.setLineDash&&(c.setLineDash(this.segments||a.StrokeDash.EMPTY_SEGMENTS),c.lineDashOffset=this.offset||0)},a.StrokeDash.EMPTY_SEGMENTS=[],(a.RoundRect=function(c,m,B,z,oe,Ce,be,t){this.x=c,this.y=m,this.w=B,this.h=z,this.radiusTL=oe,this.radiusTR=Ce,this.radiusBR=be,this.radiusBL=t}).prototype.exec=function(c){var m=(r<i?r:i)/2,B=0,z=0,oe=0,Ce=0,be=this.x,t=this.y,r=this.w,i=this.h,o=this.radiusTL,l=this.radiusTR,f=this.radiusBR,d=this.radiusBL;o<0&&(o*=B=-1),m<o&&(o=m),l<0&&(l*=z=-1),m<l&&(l=m),f<0&&(f*=oe=-1),m<f&&(f=m),d<0&&(d*=Ce=-1),m<d&&(d=m),c.moveTo(be+r-l,t),c.arcTo(be+r+l*z,t-l*z,be+r,t+l,l),c.lineTo(be+r,t+i-f),c.arcTo(be+r+f*oe,t+i+f*oe,be+r-f,t+i,f),c.lineTo(be+d,t+i),c.arcTo(be-d*Ce,t+i+d*Ce,be,t+i-d,d),c.lineTo(be,t+o),c.arcTo(be-o*B,t-o*B,be+o,t,o),c.closePath()},(a.Circle=function(c,m,B){this.x=c,this.y=m,this.radius=B}).prototype.exec=function(c){c.arc(this.x,this.y,this.radius,0,2*Math.PI)},(a.Ellipse=function(c,m,B,z){this.x=c,this.y=m,this.w=B,this.h=z}).prototype.exec=function(c){var m=this.x,B=this.y,t=this.w,r=this.h,z=t/2*.5522848,oe=r/2*.5522848,Ce=m+t,be=B+r,t=m+t/2,r=B+r/2;c.moveTo(m,r),c.bezierCurveTo(m,r-oe,t-z,B,t,B),c.bezierCurveTo(t+z,B,Ce,r-oe,Ce,r),c.bezierCurveTo(Ce,r+oe,t+z,be,t,be),c.bezierCurveTo(t-z,be,m,r+oe,m,r)},(a.PolyStar=function(c,m,B,z,oe,Ce){this.x=c,this.y=m,this.radius=B,this.sides=z,this.pointSize=oe,this.angle=Ce}).prototype.exec=function(c){var m=this.x,B=this.y,z=this.radius,oe=(this.angle||0)/180*Math.PI,Ce=this.sides,be=1-(this.pointSize||0),t=Math.PI/Ce;c.moveTo(m+Math.cos(oe)*z,B+Math.sin(oe)*z);for(var r=0;r<Ce+1&&(oe+=t,be==1||(c.lineTo(m+Math.cos(oe)*z*be,B+Math.sin(oe)*z*be),r!=Ce));r++)oe+=t,c.lineTo(m+Math.cos(oe)*z,B+Math.sin(oe)*z);c.closePath()},(a.Polygon=function(c,m){this.points=c,m==null&&(m=!0),this.close=m}).prototype.exec=function(c){var m,B,z=this.points,oe=this.close,Ce=z[0];c.moveTo(Ce[0],Ce[1]);for(var be=1;be<z.length;be++)m=z[be],be==1&&(B=[m[0],m[1]]),c.lineTo(m[0],m[1]);oe&&(c.lineTo(Ce[0],Ce[1]),c.lineTo(B[0],B[1])),c.closePath()},e.beginCmd=new a.BeginPath,re.Graphics=e}(),function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=re.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new re.DisplayProps,this._rectangle=new re.Rectangle,this._bounds=null,this._webGLRenderStyle=e._StageGL_NONE}var v=re.extend(e,re.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1,e._StageGL_NONE=0,e._StageGL_SPRITE=1,e._StageGL_BITMAP=2;var a=re.createCanvas?re.createCanvas():document.createElement("canvas");a.getContext&&(e._hitTestCanvas=a,e._hitTestContext=a.getContext("2d"),a.width=a.height=1),v._getStage=function(){for(var u=this,c=re.Stage;u.parent;)u=u.parent;return u instanceof c?u:null},v.getStage=re.deprecate(v._getStage,"DisplayObject.getStage");try{Object.defineProperties(v,{stage:{get:v._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(u){this.bitmapCache&&(this.bitmapCache.cacheID=u)}},scale:{get:function(){return this.scaleX},set:function(u){this.scaleX=this.scaleY=u}}})}catch(u){}v.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},v.draw=function(u,c){var m=this.bitmapCache;return!(!m||c)&&m.draw(u)},v.updateContext=function(u){var c=this,z=c.mask,m=c._props.matrix;z&&z.graphics&&!z.graphics.isEmpty()&&(z.getMatrix(m),u.transform(m.a,m.b,m.c,m.d,m.tx,m.ty),z.graphics.drawAsPath(u),u.clip(),m.invert(),u.transform(m.a,m.b,m.c,m.d,m.tx,m.ty)),this.getMatrix(m);var B=m.tx,z=m.ty;e._snapToPixelEnabled&&c.snapToPixel&&(B=B+(B<0?-.5:.5)|0,z=z+(z<0?-.5:.5)|0),u.transform(m.a,m.b,m.c,m.d,B,z),u.globalAlpha*=c.alpha,c.compositeOperation&&(u.globalCompositeOperation=c.compositeOperation),c.shadow&&this._applyShadow(u,c.shadow)},v.cache=function(u,c,m,B,z,oe){this.bitmapCache||(this.bitmapCache=new re.BitmapCache),this.bitmapCache.define(this,u,c,m,B,z,oe)},v.updateCache=function(u){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(u)},v.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},v.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getCacheDataURL():null},v.localToGlobal=function(u,c,m){return m=this.getConcatenatedMatrix(this._props.matrix).transformPoint(u,c,m||new re.Point),this.stage&&re.stageTransformable&&(m=this.stage.getConcatenatedMatrix(this._mtx).invert().transformPoint(m.x,m.y)),m},v.globalToLocal=function(u,c,m){var B;return this.stage&&re.stageTransformable&&(u=(B=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(u,c)).x,c=B.y),this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(u,c,m||new re.Point)},v.localToLocal=function(u,c,m,B){return B=this.localToGlobal(u,c,B),m.globalToLocal(B.x,B.y,B)},v.setTransform=function(u,c,m,B,z,oe,Ce,be,t){return this.x=u||0,this.y=c||0,this.scaleX=m==null?1:m,this.scaleY=B==null?1:B,this.rotation=z||0,this.skewX=oe||0,this.skewY=Ce||0,this.regX=be||0,this.regY=t||0,this},v.getMatrix=function(m){var c=this,m=m&&m.identity()||new re.Matrix2D;return c.transformMatrix?m.copy(c.transformMatrix):m.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY)},v.getConcatenatedMatrix=function(u){for(var c=this,m=this.getMatrix(u);c=c.parent;)m.prependMatrix(c.getMatrix(c._props.matrix));return m},v.getConcatenatedDisplayProps=function(u){u=u?u.identity():new re.DisplayProps;for(var c=this,m=c.getMatrix(u.matrix);u.prepend(c.visible,c.alpha,c.shadow,c.compositeOperation),c!=this&&m.prependMatrix(c.getMatrix(c._props.matrix)),c=c.parent;);return u},v.hitTest=function(u,c){var m=e._hitTestContext;return m.setTransform(1,0,0,1,-u,-c),this.draw(m),c=this._testHit(m),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,2,2),c},v.set=function(u){for(var c in u)this[c]=u[c];return this},v.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var u=this.cacheCanvas;if(u){var c=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,u.width/c,u.height/c)}return null},v.getTransformedBounds=function(){return this._getBounds()},v.setBounds=function(u,c,m,B){this._bounds=u!=null?(this._bounds||new re.Rectangle).setValues(u,c,m,B):u},v.clone=function(){return this._cloneProps(new e)},v.toString=function(){return"[DisplayObject (name="+this.name+")]"},v._updateState=null,v._cloneProps=function(u){return u.alpha=this.alpha,u.mouseEnabled=this.mouseEnabled,u.tickEnabled=this.tickEnabled,u.name=this.name,u.regX=this.regX,u.regY=this.regY,u.rotation=this.rotation,u.scaleX=this.scaleX,u.scaleY=this.scaleY,u.shadow=this.shadow,u.skewX=this.skewX,u.skewY=this.skewY,u.visible=this.visible,u.x=this.x,u.y=this.y,u.compositeOperation=this.compositeOperation,u.snapToPixel=this.snapToPixel,u.filters=this.filters==null?null:this.filters.slice(0),u.mask=this.mask,u.hitArea=this.hitArea,u.cursor=this.cursor,u._bounds=this._bounds,u},v._applyShadow=function(u,c){c=c||Shadow.identity,u.shadowColor=c.color,u.shadowOffsetX=c.offsetX,u.shadowOffsetY=c.offsetY,u.shadowBlur=c.blur},v._tick=function(u){var c=this._listeners;c&&c.tick&&(u.target=null,u.propagationStopped=u.immediatePropagationStopped=!1,this.dispatchEvent(u))},v._testHit=function(u){try{var c=1<u.getImageData(0,0,1,1).data[3]}catch(m){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},v._getBounds=function(u,c){return this._transformBounds(this.getBounds(),u,c)},v._transformBounds=function(u,o,i){if(!u)return u;var B=u.x,z=u.y,l=u.width,f=u.height,d=this._props.matrix,d=i?d.identity():this.getMatrix(d);(B||z)&&d.appendTransform(0,0,1,1,0,0,0,-B,-z),o&&d.prependMatrix(o);var oe=l*d.a,Ce=l*d.b,be=f*d.c,t=f*d.d,r=d.tx,i=d.ty,o=r,l=r,f=i,d=i;return(B=oe+r)<o?o=B:l<B&&(l=B),(B=oe+be+r)<o?o=B:l<B&&(l=B),(B=be+r)<o?o=B:l<B&&(l=B),(z=Ce+i)<f?f=z:d<z&&(d=z),(z=Ce+t+i)<f?f=z:d<z&&(d=z),(z=t+i)<f?f=z:d<z&&(d=z),u.setValues(o,f,l-o,d-f)},v._hasMouseEventListener=function(){for(var u=e._MOUSE_EVENTS,c=0,m=u.length;c<m;c++)if(this.hasEventListener(u[c]))return!0;return!!this.cursor},re.DisplayObject=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var v=re.extend(e,re.DisplayObject);v._getNumChildren=function(){return this.children.length},v.getNumChildren=re.deprecate(v._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(v,{numChildren:{get:v._getNumChildren}})}catch(a){}v.initialize=e,v.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;for(var c=this.children.slice(),m=0,B=c.length;m<B;m++){var z=c[m];z.isVisible()&&(a.save(),z.updateContext(a),z.draw(a),a.restore())}return!0},v.addChild=function(a){if(a==null)return a;var u=arguments.length;if(1<u){for(var c=0;c<u;c++)this.addChild(arguments[c]);return arguments[u-1]}var m=a.parent,B=m===this;return m&&m._removeChildAt(re.indexOf(m.children,a),B),(a.parent=this).children.push(a),B||a.dispatchEvent("added"),a},v.addChildAt=function(a,u){var c=arguments.length,m=arguments[c-1];if(m<0||m>this.children.length)return arguments[c-2];if(2<c){for(var B=0;B<c-1;B++)this.addChildAt(arguments[B],m+B);return arguments[c-2]}var z=a.parent,oe=z===this;return z&&z._removeChildAt(re.indexOf(z.children,a),oe),(a.parent=this).children.splice(u,0,a),oe||a.dispatchEvent("added"),a},v.removeChild=function(a){var u=arguments.length;if(1<u){for(var c=!0,m=0;m<u;m++)c=c&&this.removeChild(arguments[m]);return c}return this._removeChildAt(re.indexOf(this.children,a))},v.removeChildAt=function(a){var u=arguments.length;if(1<u){for(var c=[],m=0;m<u;m++)c[m]=arguments[m];c.sort(function(z,oe){return oe-z});for(var B=!0,m=0;m<u;m++)B=B&&this._removeChildAt(c[m]);return B}return this._removeChildAt(a)},v.removeAllChildren=function(){for(var a=this.children;a.length;)this._removeChildAt(0)},v.getChildAt=function(a){return this.children[a]},v.getChildByName=function(a){for(var u=this.children,c=0,m=u.length;c<m;c++)if(u[c].name==a)return u[c];return null},v.sortChildren=function(a){this.children.sort(a)},v.getChildIndex=function(a){return re.indexOf(this.children,a)},v.swapChildrenAt=function(a,u){var c=this.children,m=c[a],B=c[u];m&&B&&(c[a]=B,c[u]=m)},v.swapChildren=function(a,u){for(var c,m,B=this.children,z=0,oe=B.length;z<oe&&(B[z]==a&&(c=z),B[z]==u&&(m=z),c==null||m==null);z++);z!=oe&&(B[c]=u,B[m]=a)},v.setChildIndex=function(a,u){var c=this.children,m=c.length;if(!(a.parent!=this||u<0||m<=u)){for(var B=0;B<m&&c[B]!=a;B++);B!=m&&B!=u&&(c.splice(B,1),c.splice(u,0,a))}},v.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},v.hitTest=function(a,u){return this.getObjectUnderPoint(a,u)!=null},v.getObjectsUnderPoint=function(a,B,c){var m=[],B=this.localToGlobal(a,B);return this._getObjectsUnderPoint(B.x,B.y,m,0<c,c==1),m},v.getObjectUnderPoint=function(a,u,c){return u=this.localToGlobal(a,u),this._getObjectsUnderPoint(u.x,u.y,null,0<c,c==1)},v.getBounds=function(){return this._getBounds(null,!0)},v.getTransformedBounds=function(){return this._getBounds()},v.clone=function(a){var u=this._cloneProps(new e);return a&&this._cloneChildren(u),u},v.toString=function(){return"[Container (name="+this.name+")]"},v._tick=function(a){if(this.tickChildren)for(var u=this.children.length-1;0<=u;u--){var c=this.children[u];c.tickEnabled&&c._tick&&c._tick(a)}this.DisplayObject__tick(a)},v._cloneChildren=function(a){a.children.length&&a.removeAllChildren();for(var u=a.children,c=0,m=this.children.length;c<m;c++){var B=this.children[c].clone(!0);B.parent=a,u.push(B)}},v._removeChildAt=function(a,u){if(a<0||a>this.children.length-1)return!1;var c=this.children[a];return c&&(c.parent=null),this.children.splice(a,1),u||c.dispatchEvent("removed"),!0},v._getObjectsUnderPoint=function(a,u,c,m,B,z){var oe,Ce,be;if(this.stage&&re.stageTransformable&&(oe=a,Ce=u,a=(be=this.stage.getConcatenatedMatrix(this._mtx).transformPoint(a,u)).x,u=be.y),!(z=z||0)&&!this._testMask(this,a,u))return null;var t=re.DisplayObject._hitTestContext;B=B||m&&this._hasMouseEventListener();for(var r=this.children,i=r.length-1;0<=i;i--){var o=r[i],l=o.hitArea;if(o.visible&&(l||o.isVisible())&&(!m||o.mouseEnabled)&&(l||this._testMask(o,a,u))){if(!l&&o instanceof e){var f=o._getObjectsUnderPoint(oe!=null?oe:a,Ce!=null?Ce:u,c,m,B,z+1);if(!c&&f)return m&&!this.mouseChildren?this:f}else if(!m||B||o._hasMouseEventListener()){var d=o.getConcatenatedDisplayProps(o._props),f=d.matrix;if(l&&(f.appendMatrix(l.getMatrix(l._props.matrix)),d.alpha=l.alpha),t.globalAlpha=d.alpha,t.setTransform(f.a,f.b,f.c,f.d,f.tx-a,f.ty-u),(l||o).draw(t),this._testHit(t)){if(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,2,2),!c)return m&&!this.mouseChildren?this:o;c.push(o)}}}}return null},v._testMask=function(B,u,c){var m=B.mask;if(!m||!m.graphics||m.graphics.isEmpty())return!0;var z=this._props.matrix,B=B.parent,z=B?B.getConcatenatedMatrix(z):z.identity();return z=m.getMatrix(m._props.matrix).prependMatrix(z),B=re.DisplayObject._hitTestContext,B.setTransform(z.a,z.b,z.c,z.d,z.tx-u,z.ty-c),m.graphics.drawAsPath(B),B.fillStyle="#000",B.fill(),!!this._testHit(B)&&(B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,2,2),!0)},v._getBounds=function(a,u){var c=this.DisplayObject_getBounds();if(c)return this._transformBounds(c,a,u);var m=this._props.matrix,m=u?m.identity():this.getMatrix(m);a&&m.prependMatrix(a);for(var B=this.children.length,z=null,oe=0;oe<B;oe++){var Ce=this.children[oe];Ce.visible&&(c=Ce._getBounds(m))&&(z?z.extend(c.x,c.y,c.width,c.height):z=c.clone())}return z},re.Container=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof a=="string"?document.getElementById(a):a,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var v=re.extend(e,re.Container);v._get_nextStage=function(){return this._nextStage},v._set_nextStage=function(a){this._nextStage&&(this._nextStage._prevStage=null),a&&(a._prevStage=this),this._nextStage=a};try{Object.defineProperties(v,{nextStage:{get:v._get_nextStage,set:v._set_nextStage}})}catch(a){}v.update=function(a){var u;this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart",!1,!0)!==!1&&(re.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled,u=this.drawRect,(a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),this.autoClear&&(u?a.clearRect(u.x,u.y,u.width,u.height):a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),a.save(),this.drawRect&&(a.beginPath(),a.rect(u.x,u.y,u.width,u.height),a.clip()),this.updateContext(a),this.draw(a,!1),a.restore(),this.dispatchEvent("drawend")))},v.tick=function(a){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var u=new re.Event("tick");if(a)for(var c in a)a.hasOwnProperty(c)&&(u[c]=a[c]);this._tick(u),this.dispatchEvent("tickend")}},v.handleEvent=function(a){a.type=="tick"&&this.update(a)},v.clear=function(){var a;this.canvas&&((a=this.canvas.getContext("2d")).setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))},v.toDataURL=function(a,u){var c,m,B=this.canvas.getContext("2d"),z=this.canvas.width,oe=this.canvas.height;return a&&(c=B.getImageData(0,0,z,oe),m=B.globalCompositeOperation,B.globalCompositeOperation="destination-over",B.fillStyle=a,B.fillRect(0,0,z,oe)),u=this.canvas.toDataURL(u||"image/png"),a&&(B.putImageData(c,0,0),B.globalCompositeOperation=m),u},v.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,a==0&&this._testMouseOver(!0)),a==null)a=20;else if(a<=0)return;var u=this;this._mouseOverIntervalID=setInterval(function(){u._testMouseOver()},1e3/Math.min(50,a))},v.enableDOMEvents=function(a){a==null&&(a=!0);var u,c,m=this._eventListeners;if(!a&&m){for(u in m)(c=m[u]).t.removeEventListener(u,c.f,!1);this._eventListeners=null}else if(a&&!m&&this.canvas){var a=window.addEventListener?window:document,B=this;for(u in(m=this._eventListeners={}).mouseup={t:a,f:function(oe){B._handleMouseUp(oe)}},m.mousemove={t:a,f:function(oe){B._handleMouseMove(oe)}},m.dblclick={t:this.canvas,f:function(oe){B._handleDoubleClick(oe)}},m.mousedown={t:this.canvas,f:function(oe){B._handleMouseDown(oe)}},m)(c=m[u]).t.addEventListener(u,c.f,!1)}},v.clone=function(){throw"Stage cannot be cloned."},v.toString=function(){return"[Stage (name="+this.name+")]"},v._getElementRect=function(a){var u;try{u=a.getBoundingClientRect()}catch(be){u={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var c=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),m=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),Ce=window.getComputedStyle?getComputedStyle(a,null):a.currentStyle,B=parseInt(Ce.paddingLeft)+parseInt(Ce.borderLeftWidth),z=parseInt(Ce.paddingTop)+parseInt(Ce.borderTopWidth),oe=parseInt(Ce.paddingRight)+parseInt(Ce.borderRightWidth),Ce=parseInt(Ce.paddingBottom)+parseInt(Ce.borderBottomWidth);return{left:u.left+c+B,right:u.right+c-oe,top:u.top+m+z,bottom:u.bottom+m-Ce}},v._getPointerData=function(a){return this._pointerData[a]||(this._pointerData[a]={x:0,y:0})},v._handleMouseMove=function(a){a=a||window.event,this._handlePointerMove(-1,a,a.pageX,a.pageY)},v._handlePointerMove=function(a,u,c,m,B){var z,oe;this._prevStage&&B===void 0||this.canvas&&(z=this._nextStage,B=(oe=this._getPointerData(a)).inBounds,this._updatePointerPosition(a,u,c,m),(B||oe.inBounds||this.mouseMoveOutside)&&(a===-1&&oe.inBounds==!B&&this._dispatchMouseEvent(this,B?"mouseleave":"mouseenter",!1,a,oe,u),this._dispatchMouseEvent(this,"stagemousemove",!1,a,oe,u),this._dispatchMouseEvent(oe.target,"pressmove",!0,a,oe,u)),z&&z._handlePointerMove(a,u,c,m,null))},v._updatePointerPosition=function(a,u,c,m){var Ce=this._getElementRect(this.canvas);c-=Ce.left,m-=Ce.top;var B=this.canvas.width,z=this.canvas.height;c/=(Ce.right-Ce.left)/B,m/=(Ce.bottom-Ce.top)/z;var oe,Ce=this._getPointerData(a);re.stageTransformable?(this._mtx=this.getConcatenatedMatrix(this._mtx).invert(),(Ce.inBounds=0<=c&&0<=m&&c<=B-1&&m<=z-1)?(Ce.x=c,Ce.y=m,oe=this._mtx.transformPoint(Ce.x,Ce.y),Ce.x=oe.x,Ce.y=oe.y):this.mouseMoveOutside&&(Ce.x=c<0?0:B-1<c?B-1:c,Ce.y=m<0?0:z-1<m?z-1:m,oe=this._mtx.transformPoint(Ce.x,Ce.y),Ce.x=oe.x,Ce.y=oe.y),Ce.rawX=c,Ce.rawY=m,oe=this._mtx.transformPoint(Ce.rawX,Ce.rawY),Ce.rawX=oe.x,Ce.rawY=oe.y):((Ce.inBounds=0<=c&&0<=m&&c<=B-1&&m<=z-1)?(Ce.x=c,Ce.y=m):this.mouseMoveOutside&&(Ce.x=c<0?0:B-1<c?B-1:c,Ce.y=m<0?0:z-1<m?z-1:m),Ce.rawX=c,Ce.rawY=m),Ce.posEvtObj=u,a!==this._primaryPointerID&&a!==-1||(this.mouseX=Ce.x,this.mouseY=Ce.y,this.mouseInBounds=Ce.inBounds)},v._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},v._handlePointerUp=function(a,u,c,m){var B,z,oe=this._nextStage,Ce=this._getPointerData(a);this._prevStage&&m===void 0||(B=null,z=Ce.target,m||!z&&!oe||(B=this._getObjectsUnderPoint(Ce.x,Ce.y,null,!0)),Ce.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,a,Ce,u,B),Ce.down=!1),B==z&&this._dispatchMouseEvent(z,"click",!0,a,Ce,u),this._dispatchMouseEvent(z,"pressup",!0,a,Ce,u),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):Ce.target=null,oe&&oe._handlePointerUp(a,u,c,m||B&&this))},v._handleMouseDown=function(a){this._handlePointerDown(-1,a,a.pageX,a.pageY)},v._handlePointerDown=function(a,u,c,m,B){this.preventSelection&&u.preventDefault(),this._primaryPointerID!=null&&a!==-1||(this._primaryPointerID=a),m!=null&&this._updatePointerPosition(a,u,c,m);var z=null,oe=this._nextStage,Ce=this._getPointerData(a);B||(z=Ce.target=this._getObjectsUnderPoint(Ce.x,Ce.y,null,!0)),Ce.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,a,Ce,u,z),Ce.down=!0),this._dispatchMouseEvent(z,"mousedown",!0,a,Ce,u),oe&&oe._handlePointerDown(a,u,c,m,B||z&&this)},v._testMouseOver=function(a,u,c){if(!this._prevStage||u!==void 0){var m=this._nextStage;if(this._mouseOverIntervalID){var B=this._getPointerData(-1);if(B&&(a||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var z,oe,Ce=B.posEvtObj,be=c||Ce&&Ce.target==this.canvas,t=null,r=-1,i="";!u&&(a||this.mouseInBounds&&be)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);for(var o=this._mouseOverTarget||[],l=o[o.length-1],f=this._mouseOverTarget=[],d=t;d;)f.unshift(d),i=i||d.cursor,d=d.parent;for(this.canvas.style.cursor=i,!u&&c&&(c.canvas.style.cursor=i),z=0,oe=f.length;z<oe&&f[z]==o[z];z++)r=z;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,B,Ce,t),z=o.length-1;r<z;z--)this._dispatchMouseEvent(o[z],"rollout",!1,-1,B,Ce,t);for(z=f.length-1;r<z;z--)this._dispatchMouseEvent(f[z],"rollover",!1,-1,B,Ce,l);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,B,Ce,l),m&&m._testMouseOver(a,u||t&&this,c||be&&this)}}else m&&m._testMouseOver(a,u,c)}},v._handleDoubleClick=function(a,u){var c=null,m=this._nextStage,B=this._getPointerData(-1);u||(c=this._getObjectsUnderPoint(B.x,B.y,null,!0),this._dispatchMouseEvent(c,"dblclick",!0,-1,B,a)),m&&m._handleDoubleClick(a,u||c&&this)},v._dispatchMouseEvent=function(a,u,c,m,B,z,oe){a&&(c||a.hasEventListener(u))&&(oe=new re.MouseEvent(u,c,!1,B.x,B.y,z,m,m===this._primaryPointerID||m===-1,B.rawX,B.rawY,oe),a.dispatchEvent(oe))},re.Stage=re.promote(e,"Container")}(),function(){"use strict";function e(a,u){if(this.Stage_constructor(a),u!==void 0){if(typeof u!="object")throw"Invalid options object";var c=u.premultiply,m=u.transparent,B=u.antialias,z=u.preserveBuffer,oe=u.autoPurge}this.vocalDebug=!1,this._preserveBuffer=z||!1,this._antialias=B||!1,this._transparent=m||!1,this._premultiply=c||!1,this._autoPurge=void 0,this.autoPurge=oe,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._clearColor={r:.5,g:.5,b:.5,a:0},this._maxCardsPerBatch=e.DEFAULT_MAX_BATCH_SIZE,this._activeShader=null,this._vertices=null,this._vertexPositionBuffer=null,this._uvs=null,this._uvPositionBuffer=null,this._indices=null,this._textureIndexBuffer=null,this._alphas=null,this._alphaBuffer=null,this._textureDictionary=[],this._textureIDs={},this._batchTextures=[],this._baseTextures=[],this._batchTextureCount=8,this._lastTextureInsert=-1,this._batchID=0,this._drawID=0,this._slotBlacklist=[],this._isDrawing=0,this._lastTrackedCanvas=0,this.isCacheControlled=!1,this._cacheContainer=new re.Container,this._initializeWebGL()}var v=re.extend(e,re.Stage);e.buildUVRects=function(a,u,c){if(!a||!a._frames)return null;u===void 0&&(u=-1),c===void 0&&(c=!1);for(var m=u!=-1&&c?u:0,B=u!=-1&&c?u+1:a._frames.length,z=m;z<B;z++){var oe,Ce=a._frames[z];Ce.uvRect||Ce.image.width<=0||Ce.image.height<=0||(oe=Ce.rect,Ce.uvRect={t:oe.y/Ce.image.height,l:oe.x/Ce.image.width,b:(oe.y+oe.height)/Ce.image.height,r:(oe.x+oe.width)/Ce.image.width})}return a._frames[u!=-1?u:0].uvRect||{t:0,l:0,b:1,r:1}},e.isWebGLActive=function(a){return a&&a instanceof WebGLRenderingContext&&typeof WebGLRenderingContext<"u"},e.VERTEX_PROPERTY_COUNT=6,e.INDICIES_PER_CARD=6,e.DEFAULT_MAX_BATCH_SIZE=1e4,e.WEBGL_MAX_INDEX_NUM=Math.pow(2,16),e.UV_RECT={t:0,l:0,b:1,r:1};try{e.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]),e.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),e.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(a){}e.REGULAR_VERTEX_HEADER=(e.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",e.REGULAR_FRAGMENT_HEADER=e.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",e.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",e.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",e.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",e.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",e.PARTICLE_VERTEX_BODY=e.REGULAR_VERTEX_BODY,e.PARTICLE_FRAGMENT_BODY=e.REGULAR_FRAGMENT_BODY,e.COVER_VERTEX_HEADER=(e.COVER_VARYING_HEADER="precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;")+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;",e.COVER_FRAGMENT_HEADER=e.COVER_VARYING_HEADER+"uniform sampler2D uSampler;",e.COVER_VERTEX_BODY="void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}",e.COVER_FRAGMENT_BODY="void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}",v._get_isWebGL=function(){return!!this._webGLContext},v._set_autoPurge=function(a){(a=isNaN(a)?1200:a)!=-1&&(a=a<10?10:a),this._autoPurge=a},v._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(v,{isWebGL:{get:v._get_isWebGL},autoPurge:{get:v._get_autoPurge,set:v._set_autoPurge}})}catch(a){}v._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var a={depth:!1,alpha:this._transparent,stencil:!0,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer},a=this._webGLContext=this._fetchWebGLContext(this.canvas,a);if(!a)return null;this.updateSimultaneousTextureCount(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),this._maxTextureSlots=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._createBuffers(a),this._initTextures(a),a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply),this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else this._webGLContext=null;return this._webGLContext},v.update=function(a){this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart"),this.autoClear&&this.clear(),this._webGLContext?(this._batchDraw(this,this._webGLContext),this._autoPurge==-1||this._drawID%(this._autoPurge/2|0)||this.purgeTextures(this._autoPurge)):((a=this.canvas.getContext("2d")).save(),this.updateContext(a),this.draw(a,!1),a.restore()),this.dispatchEvent("drawend"))},v.clear=function(){var a,u,c;this.canvas&&(e.isWebGLActive(this._webGLContext)?(a=this._webGLContext,u=this._clearColor,c=this._transparent?u.a:1,this._webGLContext.clearColor(u.r*c,u.g*c,u.b*c,c),a.clear(a.COLOR_BUFFER_BIT),this._webGLContext.clearColor(u.r,u.g,u.b,u.a)):this.Stage_clear())},v.draw=function(a,u){if(a===this._webGLContext&&e.isWebGLActive(this._webGLContext)){var c=this._webGLContext;return this._batchDraw(this,c,u),!0}return this.Stage_draw(a,u)},v.cacheDraw=function(a,u,c){if(e.isWebGLActive(this._webGLContext)){var m=this._webGLContext;return this._cacheDraw(m,a,u,c),!0}return!1},v.protectTextureSlot=function(a,u){if(a>this._maxTextureSlots||a<0)throw"Slot outside of acceptable range";this._slotBlacklist[a]=!!u},v.getTargetRenderTexture=function(a,u,c){var m=!1,B=this._webGLContext;if(a.__lastRT!==void 0&&a.__lastRT===a.__rtA&&(m=!0),!(B=m?(a.__rtB===void 0?a.__rtB=this.getRenderBufferTexture(u,c):(u==a.__rtB._width&&c==a.__rtB._height||this.resizeTexture(a.__rtB,u,c),this.setTextureParams(B)),a.__rtB):(a.__rtA===void 0?a.__rtA=this.getRenderBufferTexture(u,c):(u==a.__rtA._width&&c==a.__rtA._height||this.resizeTexture(a.__rtA,u,c),this.setTextureParams(B)),a.__rtA)))throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances";return a.__lastRT=B},v.releaseTexture=function(a){var u,c;if(a){if(a.children)for(u=0,c=a.children.length;u<c;u++)this.releaseTexture(a.children[u]);a.cacheCanvas&&a.uncache();var m=void 0;if(a._storeID!==void 0){if(a===this._textureDictionary[a._storeID])return this._killTextureObject(a),void(a._storeID=void 0);m=a}else if(a._webGLRenderStyle===2)m=a.image;else if(a._webGLRenderStyle===1){for(u=0,c=a.spriteSheet._images.length;u<c;u++)this.releaseTexture(a.spriteSheet._images[u]);return}m!==void 0?(this._killTextureObject(this._textureDictionary[m._storeID]),m._storeID=void 0):this.vocalDebug&&console.log("No associated texture found on release")}},v.purgeTextures=function(a){a==null&&(a=100);for(var u=this._textureDictionary,c=u.length,m=0;m<c;m++){var B=u[m];B&&B._drawID+a<=this._drawID&&this._killTextureObject(B)}},v.updateSimultaneousTextureCount=function(a){var u=this._webGLContext,c=!1;for((a<1||isNaN(a))&&(a=1),this._batchTextureCount=a;!c;)try{this._activeShader=this._fetchShaderProgram(u),c=!0}catch(m){if(this._batchTextureCount==1)throw"Cannot compile shader "+m;this._batchTextureCount-=4,this._batchTextureCount<1&&(this._batchTextureCount=1),this.vocalDebug&&console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}},v.updateViewport=function(a,u){this._viewportWidth=0|a,this._viewportHeight=0|u,u=this._webGLContext,u&&(u.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,.1,0]),this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._projectionMatrixFlip.set(this._projectionMatrix),this._projectionMatrixFlip[5]*=-1,this._projectionMatrixFlip[13]*=-1)},v.getFilterShader=function(a){a=a||this;var u=this._webGLContext,c=this._activeShader;if(a._builtShader)c=a._builtShader,a.shaderParamSetup&&(u.useProgram(c),a.shaderParamSetup(u,this,c));else try{c=this._fetchShaderProgram(u,"filter",a.VTX_SHADER_BODY,a.FRAG_SHADER_BODY,a.shaderParamSetup&&a.shaderParamSetup.bind(a)),(a._builtShader=c)._name=a.toString()}catch(m){console&&console.log("SHADER SWITCH FAILURE",m)}return c},v.getBaseTexture=function(B,z){var c=Math.ceil(0<B?B:1)||1,m=Math.ceil(0<z?z:1)||1,B=this._webGLContext,z=B.createTexture();return this.resizeTexture(z,c,m),this.setTextureParams(B,!1),z},v.resizeTexture=function(a,u,c){var m=this._webGLContext;m.bindTexture(m.TEXTURE_2D,a),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,u,c,0,m.RGBA,m.UNSIGNED_BYTE,null),a.width=u,a.height=c},v.getRenderBufferTexture=function(a,u){var c=this._webGLContext,m=this.getBaseTexture(a,u);if(!m)return null;var B=c.createFramebuffer();return B?(m.width=a,m.height=u,c.bindFramebuffer(c.FRAMEBUFFER,B),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,m,0),(B._renderTexture=m)._frameBuffer=B,m._storeID=this._textureDictionary.length,this._textureDictionary[m._storeID]=m,c.bindFramebuffer(c.FRAMEBUFFER,null),m):null},v.setTextureParams=function(a,u){u&&this._antialias?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},v.setClearColor=function(a){var u,c,m,B,z;typeof a=="string"?a.indexOf("#")==0?(a.length==4&&(a="#"+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3)),u=+("0x"+a.slice(1,3))/255,c=+("0x"+a.slice(3,5))/255,m=+("0x"+a.slice(5,7))/255,B=+("0x"+a.slice(7,9))/255):a.indexOf("rgba(")==0&&(z=a.slice(5,-1).split(","),u=Number(z[0])/255,c=Number(z[1])/255,m=Number(z[2])/255,B=Number(z[3])):(u=((4278190080&a)>>>24)/255,c=((16711680&a)>>>16)/255,m=((65280&a)>>>8)/255,B=(255&a)/255),this._clearColor.r=u||0,this._clearColor.g=c||0,this._clearColor.b=m||0,this._clearColor.a=B||0,this._webGLContext&&this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)},v.toString=function(){return"[StageGL (name="+this.name+")]"},v._fetchWebGLContext=function(a,u){var c,m;try{c=a.getContext("webgl",u)||a.getContext("experimental-webgl",u)}catch(B){}return c?(c.viewportWidth=a.width,c.viewportHeight=a.height):(m="Could not initialize WebGL",console.error?console.error(m):console.log(m)),c},v._fetchShaderProgram=function(a,u,c,m,B){var z,oe;switch(a.useProgram(null),u){case"filter":oe=e.COVER_VERTEX_HEADER+(c||e.COVER_VERTEX_BODY),z=e.COVER_FRAGMENT_HEADER+(m||e.COVER_FRAGMENT_BODY);break;case"particle":oe=e.REGULAR_VERTEX_HEADER+e.PARTICLE_VERTEX_BODY,z=e.REGULAR_FRAGMENT_HEADER+e.PARTICLE_FRAGMENT_BODY;break;case"override":oe=e.REGULAR_VERTEX_HEADER+(c||e.REGULAR_VERTEX_BODY),z=e.REGULAR_FRAGMENT_HEADER+(m||e.REGULAR_FRAGMENT_BODY);break;case"regular":default:oe=e.REGULAR_VERTEX_HEADER+e.REGULAR_VERTEX_BODY,z=e.REGULAR_FRAGMENT_HEADER+e.REGULAR_FRAGMENT_BODY}var Ce=this._createShader(a,a.VERTEX_SHADER,oe),be=this._createShader(a,a.FRAGMENT_SHADER,z),t=a.createProgram();if(a.attachShader(t,Ce),a.attachShader(t,be),a.linkProgram(t),t._type=u,!a.getProgramParameter(t,a.LINK_STATUS))throw a.useProgram(this._activeShader),a.getProgramInfoLog(t);switch(a.useProgram(t),u){case"filter":t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1i(t.samplerUniform,0),t.uprightUniform=a.getUniformLocation(t,"uUpright"),a.uniform1f(t.uprightUniform,0),B&&B(a,this,t);break;case"override":case"particle":case"regular":default:t.vertexPositionAttribute=a.getAttribLocation(t,"vertexPosition"),a.enableVertexAttribArray(t.vertexPositionAttribute),t.uvPositionAttribute=a.getAttribLocation(t,"uvPosition"),a.enableVertexAttribArray(t.uvPositionAttribute),t.textureIndexAttribute=a.getAttribLocation(t,"textureIndex"),a.enableVertexAttribArray(t.textureIndexAttribute),t.alphaAttribute=a.getAttribLocation(t,"objectAlpha"),a.enableVertexAttribArray(t.alphaAttribute);for(var r=[],i=0;i<this._batchTextureCount;i++)r[i]=i;t.samplerData=r,t.samplerUniform=a.getUniformLocation(t,"uSampler"),a.uniform1iv(t.samplerUniform,r),t.pMatrixUniform=a.getUniformLocation(t,"pMatrix")}return a.useProgram(this._activeShader),t},v._createShader=function(a,u,c){c=c.replace(/{{count}}/g,this._batchTextureCount);for(var m="",B=1;B<this._batchTextureCount;B++)m+="} else if (indexPicker <= "+B+".5) { color = texture2D(uSampler["+B+"], vTextureCoord);";if(c=(c=c.replace(/{{alternates}}/g,m)).replace(/{{fragColor}}/g,this._premultiply?e.REGULAR_FRAG_COLOR_PREMULTIPLY:e.REGULAR_FRAG_COLOR_NORMAL),u=a.createShader(u),a.shaderSource(u,c),a.compileShader(u),!a.getShaderParameter(u,a.COMPILE_STATUS))throw a.getShaderInfoLog(u);return u},v._createBuffers=function(a){var u,c=this._maxCardsPerBatch*e.INDICIES_PER_CARD,m=this._vertexPositionBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,m),u=2;for(var B=this._vertices=new Float32Array(c*u),z=0,oe=B.length;z<oe;z+=u)B[z]=B[z+1]=0;a.bufferData(a.ARRAY_BUFFER,B,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c,m=this._uvPositionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=2;var Ce=this._uvs=new Float32Array(c*u);for(z=0,oe=Ce.length;z<oe;z+=u)Ce[z]=Ce[z+1]=0;a.bufferData(a.ARRAY_BUFFER,Ce,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c,m=this._textureIndexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=1;var be=this._indices=new Float32Array(c*u);for(z=0,oe=be.length;z<oe;z++)be[z]=0;a.bufferData(a.ARRAY_BUFFER,be,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c,m=this._alphaBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),u=1;var t=this._alphas=new Float32Array(c*u);for(z=0,oe=t.length;z<oe;z++)t[z]=1;a.bufferData(a.ARRAY_BUFFER,t,a.DYNAMIC_DRAW),m.itemSize=u,m.numItems=c},v._initTextures=function(){this._lastTextureInsert=-1,this._textureDictionary=[],this._textureIDs={},this._baseTextures=[],this._batchTextures=[];for(var a=0;a<this._batchTextureCount;a++){var u=this.getBaseTexture();if(!(this._baseTextures[a]=this._batchTextures[a]=u))throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}},v._loadTextureImage=function(a,u){var c=u.src;c||(u._isCanvas=!0,c=u.src="canvas_"+this._lastTrackedCanvas++);var m=this._textureIDs[c];return m===void 0&&(m=this._textureIDs[c]=this._textureDictionary.length),this._textureDictionary[m]===void 0&&(this._textureDictionary[m]=this.getBaseTexture()),c=this._textureDictionary[m],c?(c._batchID=this._batchID,c._storeID=m,c._imageData=u,this._insertTextureInBatch(a,c),u._storeID=m,u.complete||u.naturalWidth||u._isCanvas?this._updateTextureImageData(a,u):u.addEventListener("load",this._updateTextureImageData.bind(this,a,u))):(u="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances",console.error&&console.error(u)||console.log(u),(c=this._baseTextures[0])._batchID=this._batchID,c._storeID=-1,c._imageData=c,this._insertTextureInBatch(a,c)),c},v._updateTextureImageData=function(a,u){var c=u.width&u.width-1||u.height&u.height-1,m=this._textureDictionary[u._storeID];a.activeTexture(a.TEXTURE0+m._activeIndex),a.bindTexture(a.TEXTURE_2D,m),m.isPOT=!c,this.setTextureParams(a,m.isPOT);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,u)}catch(z){var B="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";console.error?(console.error(B),console.error(z)):console&&(console.log(B),console.log(z))}u._invalid=!1,m._w=u.width,m._h=u.height,this.vocalDebug&&(c&&console.warn("NPOT(Non Power of Two) Texture: "+u.src),(u.width>a.MAX_TEXTURE_SIZE||u.height>a.MAX_TEXTURE_SIZE)&&console&&console.error("Oversized Texture: "+u.width+"x"+u.height+" vs "+a.MAX_TEXTURE_SIZE+"max"))},v._insertTextureInBatch=function(a,u){if(this._batchTextures[u._activeIndex]!==u){var c=-1,m=(this._lastTextureInsert+1)%this._batchTextureCount,B=m;do if(this._batchTextures[B]._batchID!=this._batchID&&!this._slotBlacklist[B]){c=B;break}while((B=(B+1)%this._batchTextureCount)!==m);c===-1&&(this.batchReason="textureOverflow",this._drawBuffers(a),this.batchCardCount=0,c=m),(this._batchTextures[c]=u)._activeIndex=c,(z=u._imageData)&&z._invalid&&u._drawID!==void 0?this._updateTextureImageData(a,z):(a.activeTexture(a.TEXTURE0+c),a.bindTexture(a.TEXTURE_2D,u),this.setTextureParams(a)),this._lastTextureInsert=c}else{var z=u._imageData;u._storeID!=null&&z&&z._invalid&&this._updateTextureImageData(a,z)}u._drawID=this._drawID,u._batchID=this._batchID},v._killTextureObject=function(a){if(a){var u=this._webGLContext;if(a._storeID!==void 0&&0<=a._storeID){for(var c in this._textureDictionary[a._storeID]=void 0,this._textureIDs)this._textureIDs[c]==a._storeID&&delete this._textureIDs[c];a._imageData&&(a._imageData._storeID=void 0),a._imageData=a._storeID=void 0}a._activeIndex!==void 0&&this._batchTextures[a._activeIndex]===a&&(this._batchTextures[a._activeIndex]=this._baseTextures[a._activeIndex]);try{a._frameBuffer&&u.deleteFramebuffer(a._frameBuffer),a._frameBuffer=void 0}catch(m){this.vocalDebug&&console.log(m)}try{u.deleteTexture(a)}catch(m){this.vocalDebug&&console.log(m)}}},v._backupBatchTextures=function(a,u){var c=this._webGLContext;this._backupTextures||(this._backupTextures=[]),u===void 0&&(u=this._backupTextures);for(var m=0;m<this._batchTextureCount;m++)c.activeTexture(c.TEXTURE0+m),a?this._batchTextures[m]=u[m]:(u[m]=this._batchTextures[m],this._batchTextures[m]=this._baseTextures[m]),c.bindTexture(c.TEXTURE_2D,this._batchTextures[m]),this.setTextureParams(c,this._batchTextures[m].isPOT);a&&u===this._backupTextures&&(this._backupTextures=[])},v._batchDraw=function(a,u,c){0<this._isDrawing&&this._drawBuffers(u),this._isDrawing++,this._drawID++,this.batchCardCount=0,this.depth=0,this._appendToBatchGroup(a,u,new re.Matrix2D,this.alpha,c),this.batchReason="drawFinish",this._drawBuffers(u),this._isDrawing--},v._cacheDraw=function(a,u,c,m){var B=this._activeShader,z=this._slotBlacklist,oe=this._maxTextureSlots-1,Ce=this._viewportWidth,be=this._viewportHeight;this.protectTextureSlot(oe,!0);var t=u.getMatrix();(t=t.clone()).scale(1/m.scale,1/m.scale),(t=t.invert()).translate(-m.offX/m.scale*u.scaleX,-m.offY/m.scale*u.scaleY);var r=this._cacheContainer;r.children=[u],r.transformMatrix=t,this._backupBatchTextures(!1),c&&c.length?this._drawFilters(u,c,m):this.isCacheControlled?(a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0)):(a.activeTexture(a.TEXTURE0+oe),u.cacheCanvas=this.getTargetRenderTexture(u,m._drawWidth,m._drawHeight),u=u.cacheCanvas,a.bindFramebuffer(a.FRAMEBUFFER,u._frameBuffer),this.updateViewport(m._drawWidth,m._drawHeight),this._projectionMatrix=this._projectionMatrixFlip,a.clear(a.COLOR_BUFFER_BIT),this._batchDraw(r,a,!0),a.bindFramebuffer(a.FRAMEBUFFER,null),this.updateViewport(Ce,be)),this._backupBatchTextures(!0),this.protectTextureSlot(oe,!1),this._activeShader=B,this._slotBlacklist=z},v._drawFilters=function(a,u,c){var m,B=this._webGLContext,z=this._maxTextureSlots-1,oe=this._viewportWidth,Ce=this._viewportHeight,be=this._cacheContainer,t=u.length;B.activeTexture(B.TEXTURE0+z),m=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,m._frameBuffer),this.updateViewport(c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._batchDraw(be,B,!0),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,m),this.setTextureParams(B);for(var r=!1,i=0,o=u[i];this._activeShader=this.getFilterShader(o),this._activeShader&&(B.activeTexture(B.TEXTURE0+z),m=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,m._frameBuffer),B.viewport(0,0,c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,r),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,m),this.setTextureParams(B),(1<t||u[0]._multiPass)&&(r=!r),o=o._multiPass!==null?o._multiPass:u[++i]),o;);this.isCacheControlled?(B.bindFramebuffer(B.FRAMEBUFFER,null),this.updateViewport(oe,Ce),this._activeShader=this.getFilterShader(this),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,r)):(r&&(B.activeTexture(B.TEXTURE0+z),m=this.getTargetRenderTexture(a,c._drawWidth,c._drawHeight),B.bindFramebuffer(B.FRAMEBUFFER,m._frameBuffer),this._activeShader=this.getFilterShader(this),B.viewport(0,0,c._drawWidth,c._drawHeight),B.clear(B.COLOR_BUFFER_BIT),this._drawCover(B,!r)),B.bindFramebuffer(B.FRAMEBUFFER,null),this.updateViewport(oe,Ce),a.cacheCanvas=m)},v._appendToBatchGroup=function(a,u,c,m,B){a._glMtx||(a._glMtx=new re.Matrix2D);var z,oe,Ce,be,t=a._glMtx;t.copy(c),a.transformMatrix?t.appendMatrix(a.transformMatrix):t.appendTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY);for(var r=a.children.length,i=0;i<r;i++){var o=a.children[i];if(o.visible&&m)if(o.cacheCanvas&&!B||(o._updateState&&o._updateState(),!o.children)){this.batchCardCount+1>this._maxCardsPerBatch&&(this.batchReason="vertexOverflow",this._drawBuffers(u),this.batchCardCount=0),o._glMtx||(o._glMtx=new re.Matrix2D);var l,f,d,p,w=o._glMtx;w.copy(t),o.transformMatrix?w.appendMatrix(o.transformMatrix):w.appendTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY,o.regX,o.regY);var k=o.cacheCanvas&&!B;if(o._webGLRenderStyle===2||k)l=!B&&o.cacheCanvas||o.image;else{if(o._webGLRenderStyle!==1||(f=o.spriteSheet.getFrame(o.currentFrame))===null)continue;l=f.image}var x=this._uvs,T=this._vertices,S=this._indices,b=this._alphas;if(l){if(l._storeID===void 0)d=this._loadTextureImage(u,l),this._insertTextureInBatch(u,d);else{if(!(d=this._textureDictionary[l._storeID])){this.vocalDebug&&console.log("Texture should not be looked up while not being stored.");continue}d._batchID!==this._batchID&&this._insertTextureInBatch(u,d)}var E,R=d._activeIndex;o._webGLRenderStyle===2||k?be=!k&&o.sourceRect?(o._uvRect||(o._uvRect={}),p=o.sourceRect,(E=o._uvRect).t=p.y/l.height,E.l=p.x/l.width,E.b=(p.y+p.height)/l.height,E.r=(p.x+p.width)/l.width,oe=z=0,Ce=p.width+z,p.height+oe):(E=e.UV_RECT,k?(z=(p=o.bitmapCache).x+p._filterOffX/p.scale,oe=p.y+p._filterOffY/p.scale,Ce=p._drawWidth/p.scale+z,p._drawHeight/p.scale+oe):(oe=z=0,Ce=l.width+z,l.height+oe)):o._webGLRenderStyle===1&&(C=f.rect,E=(E=f.uvRect)||e.buildUVRects(o.spriteSheet,o.currentFrame,!1),z=-f.regX,oe=-f.regY,Ce=C.width-f.regX,be=C.height-f.regY);var k=this.batchCardCount*e.INDICIES_PER_CARD,C=2*k;T[C]=z*w.a+oe*w.c+w.tx,T[1+C]=z*w.b+oe*w.d+w.ty,T[2+C]=z*w.a+be*w.c+w.tx,T[3+C]=z*w.b+be*w.d+w.ty,T[4+C]=Ce*w.a+oe*w.c+w.tx,T[5+C]=Ce*w.b+oe*w.d+w.ty,T[6+C]=T[2+C],T[7+C]=T[3+C],T[8+C]=T[4+C],T[9+C]=T[5+C],T[10+C]=Ce*w.a+be*w.c+w.tx,T[11+C]=Ce*w.b+be*w.d+w.ty,x[C]=E.l,x[1+C]=E.t,x[2+C]=E.l,x[3+C]=E.b,x[4+C]=E.r,x[5+C]=E.t,x[6+C]=E.l,x[7+C]=E.b,x[8+C]=E.r,x[9+C]=E.t,x[10+C]=E.r,x[11+C]=E.b,S[k]=S[1+k]=S[2+k]=S[3+k]=S[4+k]=S[5+k]=R,b[k]=b[1+k]=b[2+k]=b[3+k]=b[4+k]=b[5+k]=o.alpha*m,this.batchCardCount++}}else this._appendToBatchGroup(o,u,t,o.alpha*m)}},v._drawBuffers=function(a){if(!(this.batchCardCount<=0)){this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason);var u=this._activeShader,c=this._vertexPositionBuffer,m=this._textureIndexBuffer,B=this._uvPositionBuffer,z=this._alphaBuffer;a.useProgram(u),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(u.vertexPositionAttribute,c.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._vertices),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(u.textureIndexAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._indices),a.bindBuffer(a.ARRAY_BUFFER,B),a.vertexAttribPointer(u.uvPositionAttribute,B.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._uvs),a.bindBuffer(a.ARRAY_BUFFER,z),a.vertexAttribPointer(u.alphaAttribute,z.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,this._alphas),a.uniformMatrix4fv(u.pMatrixUniform,a.FALSE,this._projectionMatrix);for(var oe=0;oe<this._batchTextureCount;oe++){var Ce=this._batchTextures[oe];a.activeTexture(a.TEXTURE0+oe),a.bindTexture(a.TEXTURE_2D,Ce),this.setTextureParams(a,Ce.isPOT)}a.drawArrays(a.TRIANGLES,0,this.batchCardCount*e.INDICIES_PER_CARD),this._batchID++}},v._drawCover=function(a,u){0<this._isDrawing&&this._drawBuffers(a),this.vocalDebug&&console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover");var c=this._activeShader,m=this._vertexPositionBuffer,B=this._uvPositionBuffer;a.clear(a.COLOR_BUFFER_BIT),a.useProgram(c),a.bindBuffer(a.ARRAY_BUFFER,m),a.vertexAttribPointer(c.vertexPositionAttribute,m.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,e.COVER_VERT),a.bindBuffer(a.ARRAY_BUFFER,B),a.vertexAttribPointer(c.uvPositionAttribute,B.itemSize,a.FLOAT,!1,0,0),a.bufferSubData(a.ARRAY_BUFFER,0,u?e.COVER_UV_FLIP:e.COVER_UV),a.uniform1i(c.samplerUniform,0),a.uniform1f(c.uprightUniform,u?0:1),a.drawArrays(a.TRIANGLES,0,e.INDICIES_PER_CARD)},re.StageGL=re.promote(e,"Stage")}(),function(){function e(a){this.DisplayObject_constructor(),typeof a=="string"?(this.image=document.createElement("img"),this.image.src=a):this.image=a,this.sourceRect=null,this._webGLRenderStyle=re.DisplayObject._StageGL_BITMAP}var v=re.extend(e,re.DisplayObject);v.initialize=e,v.isVisible=function(){var a=this.image,a=this.cacheCanvas||a&&(a.naturalWidth||a.getContext||2<=a.readyState);return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;var c,m,B,z,oe,Ce=this.image,be=this.sourceRect;return Ce.getImage&&(Ce=Ce.getImage()),Ce&&(be?(c=be.x,m=be.y,B=c+be.width,z=m+be.height,c<(u=oe=0)&&(oe-=c,c=0),(be=Ce.width)<B&&(B=be),m<0&&(u-=m,m=0),(be=Ce.height)<z&&(z=be),a.drawImage(Ce,c,m,B-c,z-m,oe,u,B-c,z-m)):a.drawImage(Ce,0,0)),!0},v.cache=function(a,u,c,m,B,z){this.bitmapCache||(this.bitmapCache=new re.BitmapCache),this.bitmapCache.define(this,a,u,c,m,B,z)},v.updateCache=function(a){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(a)},v.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},v.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},v.getBounds=function(){var u=this.DisplayObject_getBounds();if(u)return u;var a=this.image,u=this.sourceRect||a;return a&&(a.naturalWidth||a.getContext||2<=a.readyState)?this._rectangle.setValues(0,0,u.width,u.height):null},v.clone=function(a){var u=this.image;return u&&a&&(u=u.cloneNode()),u=new e(u),this.sourceRect&&(u.sourceRect=this.sourceRect.clone()),this._cloneProps(u),u},v.toString=function(){return"[Bitmap (name="+this.name+")]"},re.Bitmap=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=a,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=re.DisplayObject._StageGL_SPRITE,u!=null&&this.gotoAndPlay(u)}var v=re.extend(e,re.DisplayObject);v.initialize=e,v.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){if(this.DisplayObject_draw(a,u))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(0|this._currentFrame);return c?(u=c.rect,u.width&&u.height&&a.drawImage(c.image,u.x,u.y,u.width,u.height,-c.regX,-c.regY,u.width,u.height),!0):!1},v.play=function(){this.paused=!1},v.stop=function(){this.paused=!0},v.gotoAndPlay=function(a){this.paused=!1,this._skipAdvance=!0,this._goto(a)},v.gotoAndStop=function(a){this.paused=!0,this._goto(a)},v.advance=function(a){var u=this.framerate||this.spriteSheet.framerate,u=u&&a!=null?a/(1e3/u):1;this._normalizeFrame(u)},v.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},v.clone=function(){return this._cloneProps(new e(this.spriteSheet))},v.toString=function(){return"[Sprite (name="+this.name+")]"},v._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.currentAnimationFrame=this.currentAnimationFrame,a.framerate=this.framerate,a._animation=this._animation,a._currentFrame=this._currentFrame,a._skipAdvance=this._skipAdvance,a},v._tick=function(a){this.paused||(this._skipAdvance||this.advance(a&&a.delta),this._skipAdvance=!1),this.DisplayObject__tick(a)},v._normalizeFrame=function(a){a=a||0;var u=this._animation,c=this.paused,m=this._currentFrame;if(u){var B,z=u.speed||1,oe=this.currentAnimationFrame;if((B=u.frames.length)<=oe+a*z){var Ce=u.next;if(this._dispatchAnimationEnd(u,m,c,Ce,B-1))return;if(Ce)return this._goto(Ce,a-(B-oe)/z);this.paused=!0,oe=u.frames.length-1}else oe+=a*z;this.currentAnimationFrame=oe,this._currentFrame=u.frames[0|oe]}else if(m=this._currentFrame+=a,B=this.spriteSheet.getNumFrames(),B<=m&&0<B&&!this._dispatchAnimationEnd(u,m,c,B-1)&&(this._currentFrame-=B)>=B)return this._normalizeFrame();m=0|this._currentFrame,this.currentFrame!=m&&(this.currentFrame=m,this.dispatchEvent("change"))},v._dispatchAnimationEnd=function(a,u,c,m,B){var z,oe=a?a.name:null;return this.hasEventListener("animationend")&&((z=new re.Event("animationend")).name=oe,z.next=m,this.dispatchEvent(z)),u=this._animation!=a||this._currentFrame!=u,u||c||!this.paused||(this.currentAnimationFrame=B,u=!0),u},v._goto=function(a,u){var c;this.currentAnimationFrame=0,isNaN(a)?(c=this.spriteSheet.getAnimation(a))&&(this._animation=c,this.currentAnimation=a,this._normalizeFrame(u)):(this.currentAnimation=this._animation=null,this._currentFrame=a,this._normalizeFrame())},re.Sprite=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),this.graphics=a||new re.Graphics}var v=re.extend(e,re.DisplayObject);v.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&a)},v.draw=function(a,u){return this.DisplayObject_draw(a,u)||this.graphics.draw(a,this),!0},v.clone=function(a){return a=a&&this.graphics?this.graphics.clone():this.graphics,this._cloneProps(new e(a))},v.toString=function(){return"[Shape (name="+this.name+")]"},re.Shape=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(u,c,m){this.DisplayObject_constructor(),this.text=u,this.font=c,this.color=m,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var v=re.extend(e,re.DisplayObject),a=re.createCanvas?re.createCanvas():document.createElement("canvas");a.getContext&&(e._workingContext=a.getContext("2d"),a.width=a.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},v.isVisible=function(){var u=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0&&u)},v.draw=function(u,c){return this.DisplayObject_draw(u,c)?!0:(c=this.color||"#000",this.outline?(u.strokeStyle=c,u.lineWidth=+this.outline):u.fillStyle=c,this._drawText(this._prepContext(u)),!0)},v.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},v.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},v.getMeasuredHeight=function(){return this._drawText(null,{}).height},v.getBounds=function(){var B=this.DisplayObject_getBounds();if(B)return B;if(this.text==null||this.text==="")return null;var u=this._drawText(null,{}),c=this.maxWidth&&this.maxWidth<u.width?this.maxWidth:u.width,m=c*e.H_OFFSETS[this.textAlign||"left"],B=(this.lineHeight||this.getMeasuredLineHeight())*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(m,B,c,u.height)},v.getMetrics=function(){var u={lines:[]};return u.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),u.vOffset=u.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,u,u.lines)},v.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},v.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},v._cloneProps=function(u){return this.DisplayObject__cloneProps(u),u.textAlign=this.textAlign,u.textBaseline=this.textBaseline,u.maxWidth=this.maxWidth,u.outline=this.outline,u.lineHeight=this.lineHeight,u.lineWidth=this.lineWidth,u},v._prepContext=function(u){return u.font=this.font||"10px sans-serif",u.textAlign=this.textAlign||"left",u.textBaseline=this.textBaseline||"top",u.lineJoin="miter",u.miterLimit=2.5,u},v._drawText=function(u,c,m){var B=!!u;B||((u=e._workingContext).save(),this._prepContext(u));for(var z=this.lineHeight||this.getMeasuredLineHeight(),oe=0,Ce=0,be=String(this.text).split(/(?:\r\n|\r|\n)/),t=0,r=be.length;t<r;t++){var i=be[t],o=null;if(this.lineWidth!=null&&(o=u.measureText(i).width)>this.lineWidth)for(var l=i.split(/(\s)/),i=l[0],o=u.measureText(i).width,f=1,d=l.length;f<d;f+=2){var p=u.measureText(l[f]+l[f+1]).width;o+p>this.lineWidth?(B&&this._drawTextLine(u,i,Ce*z),m&&m.push(i),oe<o&&(oe=o),i=l[f+1],o=u.measureText(i).width,Ce++):(i+=l[f]+l[f+1],o+=p)}B&&this._drawTextLine(u,i,Ce*z),m&&m.push(i),c&&o==null&&(o=u.measureText(i).width),oe<o&&(oe=o),Ce++}return c&&(c.width=oe,c.height=Ce*z),B||u.restore(),c},v._drawTextLine=function(u,c,m){this.outline?u.strokeText(c,0,m,this.maxWidth||65535):u.fillText(c,0,m,this.maxWidth||65535)},v._getMeasuredWidth=function(u){var c=e._workingContext;return c.save(),u=this._prepContext(c).measureText(u).width,c.restore(),u},re.Text=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(a,u){this.Container_constructor(),this.text=a||"",this.spriteSheet=u,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}var v=re.extend(e,re.Container);e.maxPoolSize=100,e._spritePool=[],v.draw=function(a,u){this.DisplayObject_draw(a,u)||(this._updateState(),this.Container_draw(a,u))},v.getBounds=function(){return this._updateText(),this.Container_getBounds()},v.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&0<this.alpha&&this.scaleX!==0&&this.scaleY!==0&&a)},v.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},v.addChild=v.addChildAt=v.removeChild=v.removeChildAt=v.removeAllChildren=function(){},v._updateState=function(){this._updateText()},v._cloneProps=function(a){return this.Container__cloneProps(a),a.lineHeight=this.lineHeight,a.letterSpacing=this.letterSpacing,a.spaceWidth=this.spaceWidth,a},v._getFrameIndex=function(a,u){var c,m=u.getAnimation(a);return m||(a!=(c=a.toUpperCase())||a!=(c=a.toLowerCase())||(c=null),c&&(m=u.getAnimation(c))),m&&m.frames[0]},v._getFrame=function(a,u){return a=this._getFrameIndex(a,u),a==null?a:u.getFrame(a)},v._getLineHeight=function(a){return a=this._getFrame("1",a)||this._getFrame("T",a)||this._getFrame("L",a)||a.getFrame(0),a?a.rect.height:1},v._getSpaceWidth=function(a){return a=this._getFrame("1",a)||this._getFrame("l",a)||this._getFrame("e",a)||this._getFrame("a",a)||a.getFrame(0),a?a.rect.width:1},v._updateText=function(){var a,u,c=0,m=0,B=this._oldProps,z=!1,oe=this.spaceWidth,Ce=this.lineHeight,be=this.spriteSheet,t=e._spritePool,r=this.children,i=0,o=r.length;for(u in B)B[u]!=this[u]&&(B[u]=this[u],z=!0);if(z){var l=!!this._getFrame(" ",be);l||oe||(oe=this._getSpaceWidth(be)),Ce=Ce||this._getLineHeight(be);for(var f=0,d=this.text.length;f<d;f++){var p,w=this.text.charAt(f);w!=" "||l?w!="\n"&&w!="\r"?(p=this._getFrameIndex(w,be))!=null&&(i<o?a=r[i]:(r.push(a=t.length?t.pop():new re.Sprite),a.parent=this,o++),a.spriteSheet=be,a.gotoAndStop(p),a.x=c,a.y=m,i++,c+=a.getBounds().width+this.letterSpacing):(w=="\r"&&this.text.charAt(f+1)=="\n"&&f++,c=0,m+=Ce):c+=oe}for(;i<o;)t.push(a=r.pop()),a.parent=null,o--;t.length>e.maxPoolSize&&(t.length=e.maxPoolSize)}},re.BitmapText=re.promote(e,"Container")}(),function(){"use strict";function e(u){var c,m,B,z;this.Container_constructor(),e.inited||e.init(),u instanceof String||1<arguments.length?(c=u,m=arguments[1],B=arguments[2],z=arguments[3],B==null&&(B=-1),u=null):u&&(c=u.mode,m=u.startPosition,B=u.loop,z=u.labels),u=u||{labels:z},this.mode=c||e.INDEPENDENT,this.startPosition=m||0,this.loop=B===!0?-1:B||0,this.currentFrame=0,this.paused=u.paused||!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||u.frameBounds,this.framerate=null,u.useTicks=u.paused=!0,this.timeline=new re.Timeline(u),this._synchOffset=0,this._rawPosition=-1,this._bound_resolveState=this._resolveState.bind(this),this._t=0,this._managed={}}var v=re.extend(e,re.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",e.inited=!1,e.init=function(){e.inited||(a.install(),e.inited=!0)},v._getLabels=function(){return this.timeline.getLabels()},v.getLabels=re.deprecate(v._getLabels,"MovieClip.getLabels"),v._getCurrentLabel=function(){return this.timeline.currentLabel},v.getCurrentLabel=re.deprecate(v._getCurrentLabel,"MovieClip.getCurrentLabel"),v._getDuration=function(){return this.timeline.duration},v.getDuration=re.deprecate(v._getDuration,"MovieClip.getDuration");try{Object.defineProperties(v,{labels:{get:v._getLabels},currentLabel:{get:v._getCurrentLabel},totalFrames:{get:v._getDuration},duration:{get:v._getDuration}})}catch(u){}function a(){throw"MovieClipPlugin cannot be instantiated."}v.initialize=e,v.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX!=0&&this.scaleY!=0)},v.draw=function(u,c){return this.DisplayObject_draw(u,c)||(this._updateState(),this.Container_draw(u,c)),!0},v.play=function(){this.paused=!1},v.stop=function(){this.paused=!0},v.gotoAndPlay=function(u){this.paused=!1,this._goto(u)},v.gotoAndStop=function(u){this.paused=!0,this._goto(u)},v.advance=function(u){var c=e.INDEPENDENT;if(this.mode===c){for(var m=this,B=m.framerate;(m=m.parent)&&B===null;)m.mode===c&&(B=m._framerate);if(this._framerate=B,!(this.totalFrames<=1)){var u=B!==null&&B!==-1&&u!==null?u/(1e3/B)+this._t:1,z=0|u;for(this._t=u-z;!this.paused&&z--;)this._updateTimeline(this._rawPosition+1,!1)}}},v.clone=function(){throw"MovieClip cannot be cloned."},v.toString=function(){return"[MovieClip (name="+this.name+")]"},v._updateState=function(){this._rawPosition!==-1&&this.mode===e.INDEPENDENT||this._updateTimeline(-1)},v._tick=function(u){this.advance(u&&u.delta),this.Container__tick(u)},v._goto=function(u){u=this.timeline.resolve(u),u!=null&&(this._t=0,this._updateTimeline(u,!0))},v._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},v._updateTimeline=function(u,c){var m=this.mode!==e.INDEPENDENT,B=this.timeline;m&&(u=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset)),u<0&&(u=0),this._rawPosition===u&&!m||(this._rawPosition=u,B.loop=this.loop,B.setPosition(u,m||!this.actionsEnabled,c,this._bound_resolveState))},v._renderFirstFrame=function(){var u=this.timeline,c=u.rawPosition;u.setPosition(0,!0,!0,this._bound_resolveState),u.rawPosition=c},v._resolveState=function(){var u,c=this.timeline;for(u in this.currentFrame=c.position,this._managed)this._managed[u]=1;for(var m=c.tweens,B=0,z=m.length;B<z;B++){var oe=m[B],Ce=oe.target;Ce===this||oe.passive||(oe=oe._stepPosition,Ce instanceof re.DisplayObject?this._addManagedChild(Ce,oe):this._setState(Ce.state,oe))}for(var be=this.children,B=be.length-1;0<=B;B--){var t=be[B].id;this._managed[t]===1&&(this.removeChildAt(B),delete this._managed[t])}},v._setState=function(u,c){if(u)for(var m=u.length-1;0<=m;m--){var B,z=u[m],oe=z.t,Ce=z.p;for(B in Ce)oe[B]=Ce[B];this._addManagedChild(oe,c)}},v._addManagedChild=function(u,c){u._off||(this.addChildAt(u,0),u instanceof e&&(u._synchOffset=c,u.mode===e.INDEPENDENT&&u.autoReset&&!this._managed[u.id]&&u._reset()),this._managed[u.id]=2)},v._getBounds=function(u,c){var m=this.DisplayObject_getBounds();return m||this.frameBounds&&(m=this._rectangle.copy(this.frameBounds[this.currentFrame])),m?this._transformBounds(m,u,c):this.Container__getBounds(u,c)},re.MovieClip=re.promote(e,"Container"),a.priority=100,a.ID="MovieClip",a.install=function(){re.Tween._installPlugin(a)},a.init=function(u,c,m){c==="startPosition"&&u.target instanceof e&&u._addPlugin(a)},a.step=function(u,c,m){},a.change=function(u,c,m,B,z,oe){if(m==="startPosition")return(z===1?c:c.prev).props[m]}}(),function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var v=re.createCanvas?re.createCanvas():document.createElement("canvas");v.getContext&&(e._workingCanvas=v,e._workingContext=v.getContext("2d"),v.width=v.height=1),e.extractFrame=function(a,u){isNaN(u)&&(u=a.getAnimation(u).frames[0]);var c=a.getFrame(u);return c?(a=c.rect,u=e._workingCanvas,u.width=a.width,u.height=a.height,e._workingContext.drawImage(c.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),a=document.createElement("img"),a.src=u.toDataURL("image/png"),a):null},e.addFlippedFrames=re.deprecate(null,"SpriteSheetUtils.addFlippedFrames"),e.mergeAlpha=re.deprecate(null,"SpriteSheetUtils.mergeAlpha"),e._flip=function(a,u,c,m){for(var B=a._images,z=e._workingCanvas,oe=e._workingContext,Ce=B.length/u,be=0;be<Ce;be++){var t=B[be];t.__tmp=be,oe.setTransform(1,0,0,1,0,0),oe.clearRect(0,0,z.width+1,z.height+1),z.width=t.width,z.height=t.height,oe.setTransform(c?-1:1,0,0,m?-1:1,c?t.width:0,m?t.height:0),oe.drawImage(t,0,0);var r=document.createElement("img");r.src=z.toDataURL("image/png"),r.width=t.width||t.naturalWidth,r.height=t.height||t.naturalHeight,B.push(r)}for(var i=a._frames,o=i.length/u,be=0;be<o;be++){var l=(t=i[be]).rect.clone(),f={image:r=B[t.image.__tmp+Ce*u],rect:l,regX:t.regX,regY:t.regY};c&&(l.x=(r.width||r.naturalWidth)-l.x-l.width,f.regX=l.width-t.regX),m&&(l.y=(r.height||r.naturalHeight)-l.y-l.height,f.regY=l.height-t.regY),i.push(f)}var d="_"+(c?"h":"")+(m?"v":""),p=a._animations,w=a._data,k=p.length/u;for(be=0;be<k;be++){var x=p[be],T={name:x+d,speed:(t=w[x]).speed,next:t.next,frames:[]};t.next&&(T.next+=d);for(var S=0,b=(i=t.frames).length;S<b;S++)T.frames.push(i[S]+o*u);w[T.name]=T,p.push(T.name)}},re.SpriteSheetUtils=e}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=a||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var v=re.extend(e,re.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",v.addFrame=function(a,u,c,m,B){if(this._data)throw e.ERR_RUNNING;return u=u||a.bounds||a.nominalBounds,!u&&a.getBounds&&(u=a.getBounds()),u?(c=c||1,this._frames.push({source:a,sourceRect:u,scale:c,funct:m,data:B,index:this._frames.length,height:u.height*c})-1):null},v.addAnimation=function(a,u,c,m){if(this._data)throw e.ERR_RUNNING;this._animations[a]={frames:u,next:c,speed:m}},v.addMovieClip=function(a,u,c,m,B,z){if(this._data)throw e.ERR_RUNNING;var oe=a.frameBounds,Ce=u||a.bounds||a.nominalBounds;if(!Ce&&a.getBounds&&(Ce=a.getBounds()),Ce||oe){for(var be,t=this._frames.length,r=a.timeline.duration,i=0;i<r;i++){var o=oe&&oe[i]?oe[i]:Ce;this.addFrame(a,o,c,this._setupMovieClipFrame,{i,f:m,d:B})}var l,f=a.timeline._labels,d=[];for(l in f)d.push({index:f[l],label:l});if(d.length)for(d.sort(function(S,b){return S.index-b.index}),i=0,be=d.length;i<be;i++){for(var p=d[i].label,w=t+d[i].index,k=t+(i==be-1?r:d[i+1].index),x=[],T=w;T<k;T++)x.push(T);z&&!(p=z(p,a,w,k))||this.addAnimation(p,x,!0)}}},v.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},v.buildAsync=function(a){if(this._data)throw e.ERR_RUNNING;this.timeSlice=a,this._startBuild();var u=this;this._timerID=setTimeout(function(){u._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},v.stopAsync=function(){clearTimeout(this._timerID),this._data=null},v.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},v.toString=function(){return"[SpriteSheetBuilder]"},v._startBuild=function(){var a=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var u=[];this._data={images:[],frames:u,framerate:this.framerate,animations:this._animations};var c=this._frames.slice();if(c.sort(function(be,t){return be.height<=t.height?-1:1}),c[c.length-1].height+2*a>this.maxHeight)throw e.ERR_DIMENSIONS;for(var m=0,B=0,z=0;c.length;){var oe,Ce=this._fillRow(c,m,z,u,a);Ce.w>B&&(B=Ce.w),m+=Ce.h,Ce.h&&c.length||((oe=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=this._getSize(B,this.maxWidth),oe.height=this._getSize(m,this.maxHeight),this._data.images[z]=oe,Ce.h||(B=m=0,z++))}},v._setupMovieClipFrame=function(a,u){var c=a.actionsEnabled;a.actionsEnabled=!1,a.gotoAndStop(u.i),a.actionsEnabled=c,u.f&&u.f(a,u.d,u.i)},v._getSize=function(a,u){for(var c=4;Math.pow(2,++c)<a;);return Math.min(u,Math.pow(2,c))},v._fillRow=function(a,u,c,m,B){for(var z=this.maxWidth,oe=this.maxHeight-(u+=B),Ce=B,be=0,t=a.length-1;0<=t;t--){var r=a[t],i=this._scale*r.scale,p=r.sourceRect,o=r.source,l=Math.floor(i*p.x-B),f=Math.floor(i*p.y-B),d=Math.ceil(i*p.height+2*B),p=Math.ceil(i*p.width+2*B);if(z<p)throw e.ERR_DIMENSIONS;oe<d||z<Ce+p||(r.img=c,r.rect=new re.Rectangle(Ce,u,p,d),be=be||d,a.splice(t,1),m[r.index]=[Ce,u,p,d,c,Math.round(-l+i*o.regX-B),Math.round(-f+i*o.regY-B)],Ce+=p)}return{w:Ce,h:be}},v._endBuild=function(){this.spriteSheet=new re.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},v._run=function(){for(var a,u=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),c=new Date().getTime()+u,m=!1;c>new Date().getTime();)if(!this._drawNext()){m=!0;break}m?this._endBuild():(a=this)._timerID=setTimeout(function(){a._run()},50-u);var B=this.progress=this._index/this._frames.length;this.hasEventListener("progress")&&((u=new re.Event("progress")).progress=B,this.dispatchEvent(u))},v._drawNext=function(){var a=this._frames[this._index],u=a.scale*this._scale,c=a.rect,m=a.sourceRect,B=this._data.images[a.img].getContext("2d");return a.funct&&a.funct(a.source,a.data),B.save(),B.beginPath(),B.rect(c.x,c.y,c.width,c.height),B.clip(),B.translate(Math.ceil(c.x-m.x*u),Math.ceil(c.y-m.y*u)),B.scale(u,u),a.source.draw(B),B.restore(),++this._index<this._frames.length},re.SpriteSheetBuilder=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a){this.DisplayObject_constructor(),typeof a=="string"&&(a=document.getElementById(a)),this.mouseEnabled=!1;var u=a.style;u.position="absolute",u.transformOrigin=u.WebkitTransformOrigin=u.msTransformOrigin=u.MozTransformOrigin=u.OTransformOrigin="0% 0%",this.htmlElement=a,this._oldProps=null,this._oldStage=null,this._drawAction=null}var v=re.extend(e,re.DisplayObject);v.isVisible=function(){return this.htmlElement!=null},v.draw=function(a,u){return!0},v.cache=function(){},v.uncache=function(){},v.updateCache=function(){},v.hitTest=function(){},v.localToGlobal=function(){},v.globalToLocal=function(){},v.localToLocal=function(){},v.clone=function(){throw"DOMElement cannot be cloned."},v.toString=function(){return"[DOMElement (name="+this.name+")]"},v._tick=function(a){var u=this.stage;u&&u!==this._oldStage&&(this._drawAction&&u.off("drawend",this._drawAction),this._drawAction=u.on("drawend",this._handleDrawEnd,this),this._oldStage=u),this.DisplayObject__tick(a)},v._handleDrawEnd=function(a){var u,c,m,B,z,oe=this.htmlElement;oe&&(u=oe.style,m=(c=this.getConcatenatedDisplayProps(this._props)).matrix,(z=c.visible?"visible":"hidden")!=u.visibility&&(u.visibility=z),c.visible&&(B=1e4,(z=(oe=this._oldProps)&&oe.matrix)&&z.equals(m)||(z="matrix("+(m.a*B|0)/B+","+(m.b*B|0)/B+","+(m.c*B|0)/B+","+(m.d*B|0)/B+","+(m.tx+.5|0),u.transform=u.WebkitTransform=u.OTransform=u.msTransform=z+","+(m.ty+.5|0)+")",u.MozTransform=z+"px,"+(m.ty+.5|0)+"px)",(oe=oe||(this._oldProps=new re.DisplayProps(!0,null))).matrix.copy(m)),oe.alpha!=c.alpha&&(u.opacity=""+(c.alpha*B|0)/B,oe.alpha=c.alpha)))},re.DOMElement=re.promote(e,"DisplayObject")}(),function(){"use strict";function e(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}var v=e.prototype;v.getBounds=function(a){return a},v.shaderParamSetup=function(a,u,c){},v.applyFilter=function(a,u,c,m,B,z,oe,Ce){z=z||a,oe==null&&(oe=u),Ce==null&&(Ce=c);try{var be=a.getImageData(u,c,m,B)}catch(t){return!1}return!!this._applyFilter(be)&&(z.putImageData(be,oe,Ce),!0)},v.toString=function(){return"[Filter]"},v.clone=function(){return new e},v._applyFilter=function(a){return!0},re.Filter=e}(),function(){"use strict";function e(){this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0}var v=e.prototype;e.getFilterBounds=function(a,u){u=u||new re.Rectangle;var c=a.filters,m=c&&c.length;if(!!m<=0)return u;for(var B=0;B<m;B++){var z=c[B];z&&z.getBounds&&(z=z.getBounds())&&(B==0?u.setValues(z.x,z.y,z.width,z.height):u.extend(z.x,z.y,z.width,z.height))}return u},v.toString=function(){return"[BitmapCache]"},v.define=function(a,u,c,m,B,z,oe){if(!a)throw"No symbol to cache";this._options=oe,this.target=a,this.width=1<=m?m:1,this.height=1<=B?B:1,this.x=u||0,this.y=c||0,this.scale=z||1,this.update()},v.update=function(a){if(!this.target)throw"define() must be called before update()";var u=e.getFilterBounds(this.target),c=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+u.width,this._drawHeight=Math.ceil(this.height*this.scale)+u.height,c&&this._drawWidth==c.width&&this._drawHeight==c.height||this._updateSurface(),this._filterOffX=u.x,this._filterOffY=u.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(a),this.cacheID=this.cacheID?this.cacheID+1:1},v.release=function(){var a;this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):(a=this.target.stage)instanceof re.StageGL&&a.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},v.getCacheDataURL=function(){var a=this.target&&this.target.cacheCanvas;return a?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=a.toDataURL?a.getCacheDataURL():null),this._cacheDataURL):null},v.draw=function(a){return!!this.target&&(a.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},v._updateSurface=function(){if(!this._options||!this._options.useGL)return(a=(a=this.target.cacheCanvas)||(this.target.cacheCanvas=re.createCanvas?re.createCanvas():document.createElement("canvas"))).width=this._drawWidth,void(a.height=this._drawHeight);if(!this._webGLCache)if(this._options.useGL==="stage"){if(!this.target.stage||!this.target.stage.isWebGL){var u="Cannot use 'stage' for cache because the object's parent stage is ";throw u+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage."}this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if(this._options.useGL==="new")this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new re.StageGL(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else{if(!(this._options.useGL instanceof re.StageGL))throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=!0,this._webGLCache=this._options.useGL,this._webGLCache.isCacheControlled=!0}var a=this.target.cacheCanvas,u=this._webGLCache;u.isCacheControlled&&(a.width=this._drawWidth,a.height=this._drawHeight,u.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):u.isCacheControlled||u.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},v._drawToCache=function(a){var u=this.target.cacheCanvas,c=this.target,m=this._webGLCache;m?(m.cacheDraw(c,c.filters,this),(u=this.target.cacheCanvas).width=this._drawWidth,u.height=this._drawHeight):(m=u.getContext("2d"),a||m.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),m.save(),m.globalCompositeOperation=a,m.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),m.translate(-this.x,-this.y),c.draw(m,!0),m.restore(),c.filters&&c.filters.length&&this._applyFilters(m)),u._invalid=!0},v._applyFilters=function(a){for(var u,c=this.target.filters,m=this._drawWidth,B=this._drawHeight,z=0,oe=c[z];oe.usesContext?(u&&(a.putImageData(u,0,0),u=null),oe.applyFilter(a,0,0,m,B)):(u=u||a.getImageData(0,0,m,B),oe._applyFilter(u)),oe=oe._multiPass!==null?oe._multiPass:c[++z],oe;);u&&a.putImageData(u,0,0)},re.BitmapCache=e}(),function(){"use strict";function e(a,u,c){this.Filter_constructor(),this._blurX=a,this._blurXTable=[],this._lastBlurX=null,this._blurY=u,this._blurYTable=[],this._lastBlurY=null,this._quality,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE="uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}",(isNaN(c)||c<1)&&(c=1),this.setQuality(0|c)}var v=re.extend(e,re.Filter);v.getBlurX=function(){return this._blurX},v.getBlurY=function(){return this._blurY},v.setBlurX=function(a){(isNaN(a)||a<0)&&(a=0),this._blurX=a},v.setBlurY=function(a){(isNaN(a)||a<0)&&(a=0),this._blurY=a},v.getQuality=function(){return this._quality},v.setQuality=function(a){(isNaN(a)||a<0)&&(a=0),this._quality=0|a},v._getShader=function(){var a=this._lastBlurX!==this._blurX,u=this._lastBlurY!==this._blurY,c=this._lastQuality!==this._quality;return a||u||c?((a||c)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(u||c)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader},v._setShader=function(){this._compiledShader};try{Object.defineProperties(v,{blurX:{get:v.getBlurX,set:v.setBlurX},blurY:{get:v.getBlurY,set:v.setBlurY},quality:{get:v.getQuality,set:v.setQuality},_builtShader:{get:v._getShader,set:v._setShader}})}catch(a){console.log(a)}v._getTable=function(a){if(a<=1)return[1];for(var u=[],a=Math.ceil(2*a),c=(a+=a%2?0:1)/2|0,m=-c;m<=c;m++){var B=m/c*4.2;u.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(B,2)/4))}var z=u.reduce(function(oe,Ce){return oe+Ce});return u.map(function(oe,Ce,be){return oe/z})},v._updateShader=function(){var a;this._blurX!==void 0&&this._blurY!==void 0&&(a=(a=(a=this.FRAG_SHADER_TEMPLATE).replace(/\{\{blurX\}\}/g,this._blurXTable.length.toFixed(0))).replace(/\{\{blurY\}\}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=a)},v.shaderParamSetup=function(a,u,c){a.uniform1fv(a.getUniformLocation(c,"xWeight"),this._blurXTable),a.uniform1fv(a.getUniformLocation(c,"yWeight"),this._blurYTable),a.uniform2f(a.getUniformLocation(c,"textureOffset"),2/(u._viewportWidth*this._quality),2/(u._viewportHeight*this._quality))},e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],v.getBounds=function(a){var u=0|this.blurX,c=0|this.blurY;if(u<=0&&c<=0)return a;var m=Math.pow(this.quality,.2);return(a||new re.Rectangle).pad(c*m+1,u*m+1,c*m+1,u*m+1)},v.clone=function(){return new e(this.blurX,this.blurY,this.quality)},v.toString=function(){return"[BlurFilter]"},v._applyFilter=function(a){var u=this._blurX>>1;if(isNaN(u)||u<0)return!1;var c=this._blurY>>1;if(isNaN(c)||c<0||u==0&&c==0)return!1;var m=this.quality;(isNaN(m)||m<1)&&(m=1),3<(m|=0)&&(m=3),m<1&&(m=1);for(var B=a.data,z=0,oe=0,P=0,Ce=0,be=0,t=0,r=0,i=0,o=0,l=0,f=0,d=0,p=0,w=0,k=0,x=u+u+1|0,T=c+c+1|0,S=0|a.width,b=0|a.height,E=S-1|0,R=b-1|0,C=1+u|0,O=1+c|0,I={r:0,b:0,g:0,a:0},_=I,P=1;P<x;P++)_=_.n={r:0,b:0,g:0,a:0};_.n=I;var F={r:0,b:0,g:0,a:0},K=F;for(P=1;P<T;P++)K=K.n={r:0,b:0,g:0,a:0};K.n=F;for(var V=null,D=0|e.MUL_TABLE[u],U=0|e.SHG_TABLE[u],Q=0|e.MUL_TABLE[c],J=0|e.SHG_TABLE[c];0<m--;){r=t=0;for(var N=D,te=U,oe=b;-1<--oe;){for(i=C*(d=B[0|t]),o=C*(p=B[t+1|0]),l=C*(w=B[t+2|0]),f=C*(k=B[t+3|0]),_=I,P=C;-1<--P;)_.r=d,_.g=p,_.b=w,_.a=k,_=_.n;for(P=1;P<C;P++)Ce=t+((E<P?E:P)<<2)|0,i+=_.r=B[Ce],o+=_.g=B[Ce+1],l+=_.b=B[Ce+2],f+=_.a=B[Ce+3],_=_.n;for(V=I,z=0;z<S;z++)B[t++]=i*N>>>te,B[t++]=o*N>>>te,B[t++]=l*N>>>te,B[t++]=f*N>>>te,Ce=r+((Ce=z+u+1)<E?Ce:E)<<2,i-=V.r-(V.r=B[Ce]),o-=V.g-(V.g=B[Ce+1]),l-=V.b-(V.b=B[Ce+2]),f-=V.a-(V.a=B[Ce+3]),V=V.n;r+=S}for(N=Q,te=J,z=0;z<S;z++){for(i=O*(d=B[t=z<<2|0])|0,o=O*(p=B[t+1|0])|0,l=O*(w=B[t+2|0])|0,f=O*(k=B[t+3|0])|0,K=F,P=0;P<O;P++)K.r=d,K.g=p,K.b=w,K.a=k,K=K.n;for(be=S,P=1;P<=c;P++)t=be+z<<2,i+=K.r=B[t],o+=K.g=B[t+1],l+=K.b=B[t+2],f+=K.a=B[t+3],K=K.n,P<R&&(be+=S);if(t=z,V=F,0<m)for(oe=0;oe<b;oe++)B[(Ce=t<<2)+3]=k=f*N>>>te,0<k?(B[Ce]=i*N>>>te,B[Ce+1]=o*N>>>te,B[Ce+2]=l*N>>>te):B[Ce]=B[Ce+1]=B[Ce+2]=0,Ce=z+((Ce=oe+O)<R?Ce:R)*S<<2,i-=V.r-(V.r=B[Ce]),o-=V.g-(V.g=B[Ce+1]),l-=V.b-(V.b=B[Ce+2]),f-=V.a-(V.a=B[Ce+3]),V=V.n,t+=S;else for(oe=0;oe<b;oe++)B[(Ce=t<<2)+3]=k=f*N>>>te,0<k?(k=255/k,B[Ce]=(i*N>>>te)*k,B[Ce+1]=(o*N>>>te)*k,B[Ce+2]=(l*N>>>te)*k):B[Ce]=B[Ce+1]=B[Ce+2]=0,Ce=z+((Ce=oe+O)<R?Ce:R)*S<<2,i-=V.r-(V.r=B[Ce]),o-=V.g-(V.g=B[Ce+1]),l-=V.b-(V.b=B[Ce+2]),f-=V.a-(V.a=B[Ce+3]),V=V.n,t+=S}}return!0},re.BlurFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.alphaMap=a,this._alphaMap=null,this._mapData=null,this._mapTexture=null,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.alphaMap),a.uniform1i(a.getUniformLocation(c,"uAlphaSampler"),1)},v.clone=function(){var a=new e(this.alphaMap);return a._alphaMap=this._alphaMap,a._mapData=this._mapData,a},v.toString=function(){return"[AlphaMapFilter]"},v._applyFilter=function(a){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var u=a.data,c=this._mapData,m=0,B=u.length;m<B;m+=4)u[m+3]=c[m]||0;return!0},v._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var a,u=this._alphaMap=this.alphaMap,c=u;u instanceof HTMLCanvasElement?a=c.getContext("2d"):((c=re.createCanvas?re.createCanvas():document.createElement("canvas")).width=u.width,c.height=u.height,(a=c.getContext("2d")).drawImage(u,0,0));try{var m=a.getImageData(0,0,u.width,u.height)}catch(B){return!1}return this._mapData=m.data,!0},re.AlphaMapFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a){this.Filter_constructor(),this.mask=a,this.usesContext=!0,this.FRAG_SHADER_BODY="uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){this._mapTexture||(this._mapTexture=a.createTexture()),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._mapTexture),u.setTextureParams(a),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.mask),a.uniform1i(a.getUniformLocation(c,"uAlphaSampler"),1)},v.applyFilter=function(a,u,c,m,B,z,oe,Ce){return!this.mask||(oe==null&&(oe=u),Ce==null&&(Ce=c),(z=z||a).save(),a==z&&(z.globalCompositeOperation="destination-in",z.drawImage(this.mask,oe,Ce),z.restore(),!0))},v.clone=function(){return new e(this.mask)},v.toString=function(){return"[AlphaMaskFilter]"},re.AlphaMaskFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a,u,c,m,B,z,oe,Ce){this.Filter_constructor(),this.redMultiplier=a!=null?a:1,this.greenMultiplier=u!=null?u:1,this.blueMultiplier=c!=null?c:1,this.alphaMultiplier=m!=null?m:1,this.redOffset=B||0,this.greenOffset=z||0,this.blueOffset=oe||0,this.alphaOffset=Ce||0,this.FRAG_SHADER_BODY="uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){a.uniform4f(a.getUniformLocation(c,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),a.uniform4f(a.getUniformLocation(c,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},v.toString=function(){return"[ColorFilter]"},v.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},v._applyFilter=function(a){for(var u=a.data,c=u.length,m=0;m<c;m+=4)u[m]=u[m]*this.redMultiplier+this.redOffset,u[m+1]=u[m+1]*this.greenMultiplier+this.greenOffset,u[m+2]=u[m+2]*this.blueMultiplier+this.blueOffset,u[m+3]=u[m+3]*this.alphaMultiplier+this.alphaOffset;return!0},re.ColorFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(a,u,c,m){this.setColor(a,u,c,m)}var v=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.LENGTH=(e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]).length,v.setColor=function(a,u,c,m){return this.reset().adjustColor(a,u,c,m)},v.reset=function(){return this.copy(e.IDENTITY_MATRIX)},v.adjustColor=function(a,u,c,m){return this.adjustHue(m),this.adjustContrast(u),this.adjustBrightness(a),this.adjustSaturation(c)},v.adjustBrightness=function(a){return a==0||isNaN(a)||(a=this._cleanValue(a,255),this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1])),this},v.adjustContrast=function(a){return a==0||isNaN(a)||(u=(a=this._cleanValue(a,100))<0?127+a/100*127:127*(u=(u=a%1)==0?e.DELTA_INDEX[a]:e.DELTA_INDEX[a<<0]*(1-u)+e.DELTA_INDEX[1+(a<<0)]*u)+127,this._multiplyMatrix([u/127,0,0,0,.5*(127-u),0,u/127,0,0,.5*(127-u),0,0,u/127,0,.5*(127-u),0,0,0,1,0,0,0,0,0,1])),this;var u},v.adjustSaturation=function(a){return a==0||isNaN(a)?this:(a=1+(0<(a=this._cleanValue(a,100))?3*a/100:a/100),this._multiplyMatrix([.3086*(1-a)+a,.6094*(1-a),.082*(1-a),0,0,.3086*(1-a),.6094*(1-a)+a,.082*(1-a),0,0,.3086*(1-a),.6094*(1-a),.082*(1-a)+a,0,0,0,0,0,1,0,0,0,0,0,1]),this)},v.adjustHue=function(z){if(z==0||isNaN(z))return this;z=this._cleanValue(z,180)/180*Math.PI;var u=Math.cos(z),c=Math.sin(z),m=.213,B=.715,z=.072;return this._multiplyMatrix([m+.787*u+c*-m,B+u*-B+c*-B,z+u*-z+.928*c,0,0,m+u*-m+.143*c,B+u*(1-B)+.14*c,z+u*-z+-.283*c,0,0,m+u*-m+-.787*c,B+u*-B+c*B,z+.928*u+c*z,0,0,0,0,0,1,0,0,0,0,0,1]),this},v.concat=function(a){return(a=this._fixMatrix(a)).length!=e.LENGTH||this._multiplyMatrix(a),this},v.clone=function(){return new e().copy(this)},v.toArray=function(){for(var a=[],u=0,c=e.LENGTH;u<c;u++)a[u]=this[u];return a},v.copy=function(a){for(var u=e.LENGTH,c=0;c<u;c++)this[c]=a[c];return this},v.toString=function(){return"[ColorMatrix]"},v._multiplyMatrix=function(a){for(var u,c=[],m=0;m<5;m++){for(u=0;u<5;u++)c[u]=this[u+5*m];for(u=0;u<5;u++){for(var B=0,z=0;z<5;z++)B+=a[u+5*z]*c[z];this[u+5*m]=B}}},v._cleanValue=function(a,u){return Math.min(u,Math.max(-u,a))},v._fixMatrix=function(a){return a instanceof e&&(a=a.toArray()),a.length<e.LENGTH?a=a.slice(0,a.length).concat(e.IDENTITY_MATRIX.slice(a.length,e.LENGTH)):a.length>e.LENGTH&&(a=a.slice(0,e.LENGTH)),a},re.ColorMatrix=e}(),function(){"use strict";function e(a){this.Filter_constructor(),this.matrix=a,this.FRAG_SHADER_BODY="uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}"}var v=re.extend(e,re.Filter);v.shaderParamSetup=function(a,u,c){var m=this.matrix,B=new Float32Array([m[0],m[1],m[2],m[3],m[5],m[6],m[7],m[8],m[10],m[11],m[12],m[13],m[15],m[16],m[17],m[18]]);a.uniformMatrix4fv(a.getUniformLocation(c,"uColorMatrix"),!1,B),a.uniform4f(a.getUniformLocation(c,"uColorMatrixOffset"),m[4]/255,m[9]/255,m[14]/255,m[19]/255)},v.toString=function(){return"[ColorMatrixFilter]"},v.clone=function(){return new e(this.matrix)},v._applyFilter=function(a){for(var u,c,m,B,z=a.data,oe=z.length,a=this.matrix,Ce=a[0],be=a[1],t=a[2],r=a[3],i=a[4],o=a[5],l=a[6],f=a[7],d=a[8],p=a[9],w=a[10],k=a[11],x=a[12],T=a[13],S=a[14],b=a[15],E=a[16],R=a[17],C=a[18],O=a[19],I=0;I<oe;I+=4)u=z[I],c=z[I+1],m=z[I+2],B=z[I+3],z[I]=u*Ce+c*be+m*t+B*r+i,z[I+1]=u*o+c*l+m*f+B*d+p,z[I+2]=u*w+c*k+m*x+B*T+S,z[I+3]=u*b+c*E+m*R+B*C+O;return!0},re.ColorMatrixFilter=re.promote(e,"Filter")}(),function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.MSPointerEvent&&0<window.navigator.msMaxTouchPoints||window.PointerEvent&&0<window.navigator.maxTouchPoints)},e.enable=function(v,a,u,c){return!!(v&&v.canvas&&e.isSupported())&&(v.__touch||(v.__touch={pointers:{},multitouch:!a,preventDefault:!u,count:0},c?"ontouchstart"in window?e._enable(v):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(v):"ontouchstart"in window||re.BrowserDetect.isChrome||re.BrowserDetect.isEdge||re.BrowserDetect.isFirefox?e._enable(v):(window.PointerEvent||window.MSPointerEvent)&&e._IE_enable(v)),!0)},e.disable=function(v){v&&("ontouchstart"in window||re.BrowserDetect.isChrome||re.BrowserDetect.isFirefox?e._disable(v):(window.PointerEvent||window.MSPointerEvent)&&e._IE_disable(v),delete v.__touch)},e._enable=function(v){var a=v.canvas,u=v.__touch.f=function(c){e._handleEvent(v,c)};a.addEventListener("pointerdown",function(c){c.pointerType=="touch"?v.enableDOMEvents(!1):c.pointerType=="mouse"&&v.enableDOMEvents(!0)},!1),a.addEventListener("touchstart",u,!1),a.addEventListener("touchmove",u,!1),a.addEventListener("touchend",u,!1),a.addEventListener("touchcancel",u,!1)},e._disable=function(v){var a=v.canvas;a&&(v=v.__touch.f,a.removeEventListener("touchstart",v,!1),a.removeEventListener("touchmove",v,!1),a.removeEventListener("touchend",v,!1),a.removeEventListener("touchcancel",v,!1))},e._handleEvent=function(v,a){if(v){v.__touch.preventDefault&&a.preventDefault&&a.preventDefault();for(var u=a.changedTouches,c=a.type,m=0,B=u.length;m<B;m++){var z=u[m],oe=z.identifier;z.target==v.canvas&&(c==="touchstart"?this._handleStart(v,oe,a,z.pageX,z.pageY):c==="touchmove"?this._handleMove(v,oe,a,z.pageX,z.pageY):c!=="touchend"&&c!=="touchcancel"||this._handleEnd(v,oe,a))}}},e._IE_enable=function(v){var a=v.canvas,u=v.__touch.f=function(c){e._IE_handleEvent(v,c)};a.style["-webkit-tap-highlight-color"]="transparent",window.PointerEvent===void 0?(a.addEventListener("MSPointerDown",u,!1),window.addEventListener("MSPointerMove",u,!1),window.addEventListener("MSPointerUp",u,!1),window.addEventListener("MSPointerCancel",u,!1),v.__touch.preventDefault&&(a.style.msTouchAction="none")):(a.addEventListener("pointerdown",u,!1),window.addEventListener("pointermove",u,!1),window.addEventListener("pointerup",u,!1),window.addEventListener("pointercancel",u,!1),v.__touch.preventDefault&&(a.style.touchAction="none")),v.__touch.activeIDs={}},e._IE_disable=function(v){var a=v.__touch.f;window.PointerEvent===void 0?(window.removeEventListener("MSPointerMove",a,!1),window.removeEventListener("MSPointerUp",a,!1),window.removeEventListener("MSPointerCancel",a,!1),v.canvas&&v.canvas.removeEventListener("MSPointerDown",a,!1)):(window.removeEventListener("pointermove",a,!1),window.removeEventListener("pointerup",a,!1),window.removeEventListener("pointercancel",a,!1),v.canvas&&v.canvas.removeEventListener("pointerdown",a,!1))},e._IE_handleEvent=function(v,a){if(v){v.__touch.preventDefault&&a.preventDefault&&a.preventDefault();var u=a.type,c=a.pointerId,m=v.__touch.activeIDs;if(u==="MSPointerDown"||u==="pointerdown"){if(a.srcElement==v.canvas)switch(m[c]=!0,this._handleStart(v,c,a,a.pageX,a.pageY),a.pointerType){case"mouse":v.enableDOMEvents(!0);break;case"touch":v.enableDOMEvents(!1)}}else m[c]&&(u==="MSPointerMove"||u==="pointermove"?this._handleMove(v,c,a,a.pageX,a.pageY):u!=="MSPointerUp"&&u!=="MSPointerCancel"&&u!=="pointerup"&&u!=="pointercancel"||(delete m[c],this._handleEnd(v,c,a)))}},e._handleStart=function(v,a,u,c,m){var B,z=v.__touch;!z.multitouch&&z.count||(B=z.pointers)[a]||(B[a]=!0,z.count++,v._handlePointerDown(a,u,c,m))},e._handleMove=function(v,a,u,c,m){v.__touch.pointers[a]&&v._handlePointerMove(a,u,c,m)},e._handleEnd=function(v,a,u){var c=v.__touch,m=c.pointers;m[a]&&(c.count--,v._handlePointerUp(a,u,!0),delete m[a])},re.Touch=e}(),function(){"use strict";var e=re.EaselJS=re.EaselJS||{};e.version="1.0.0",e.buildDate="Thu, 12 Oct 2017 16:34:05 GMT"}(),function(){"use strict";var e=re.PreloadJS=re.PreloadJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";re.proxy=function(e,v){var a=Array.prototype.slice.call(arguments,2);return function(){return e.apply(v,Array.prototype.slice.call(arguments,0).concat(a))}}}(),function(){"use strict";function e(v,a,u){this.Event_constructor("error"),this.title=v,this.message=a,this.data=u}re.extend(e,re.Event).clone=function(){return new re.ErrorEvent(this.title,this.message,this.data)},re.ErrorEvent=re.promote(e,"Event")}(),function(){"use strict";function e(v,a){this.Event_constructor("progress"),this.loaded=v,this.total=a==null?1:a,this.progress=a==0?0:this.loaded/this.total}re.extend(e,re.Event).clone=function(){return new re.ProgressEvent(this.loaded,this.total)},re.ProgressEvent=re.promote(e,"Event")}(window),(function(){var e,v,a,u,c=typeof define=="function"&&define.amd,m={function:!0,object:!0},B=m[typeof Rn]&&Rn&&!Rn.nodeType&&Rn,z=m[typeof window]&&window||this,oe=B&&m[typeof cr]&&cr&&!cr.nodeType&&typeof global=="object"&&global;function Ce(p,t){p=p||z.Object(),t=t||z.Object();var r=p.Number||z.Number,i=p.String||z.String,pe=p.Object||z.Object,o=p.Date||z.Date,l=p.SyntaxError||z.SyntaxError,f=p.TypeError||z.TypeError,d=p.Math||z.Math,p=p.JSON||z.JSON;typeof p=="object"&&p&&(t.stringify=p.stringify,t.parse=p.parse);var w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe=pe.prototype,$=pe.toString,X=new o(-0xc782b5b800cec);try{X=X.getUTCFullYear()==-109252&&X.getUTCMonth()===0&&X.getUTCDate()===1&&X.getUTCHours()==10&&X.getUTCMinutes()==37&&X.getUTCSeconds()==6&&X.getUTCMilliseconds()==708}catch(g){}function y(g){if(y[g]!==x)return y[g];var h;if(g=="bug-string-char-index")h="a"[0]!="a";else if(g=="json")h=y("json-stringify")&&y("json-parse");else{var L,q='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(g=="json-stringify"){var A=t.stringify,Y=typeof A=="function"&&X;if(Y){(L=function(){return 1}).toJSON=L;try{Y=A(0)==="0"&&A(new r)==="0"&&A(new i)=='""'&&A($)===x&&A(x)===x&&A()===x&&A(L)==="1"&&A([L])=="[1]"&&A([x])=="[null]"&&A(null)=="null"&&A([x,$,null])=="[null,null,null]"&&A({a:[L,!0,!1,null,"\0\b\n\f\r	"]})==q&&A(null,L)==="1"&&A([1,2],null,1)=="[\n 1,\n 2\n]"&&A(new o(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&A(new o(864e13))=='"+275760-09-13T00:00:00.000Z"'&&A(new o(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&A(new o(-1))=='"1969-12-31T23:59:59.999Z"'}catch(Z){Y=!1}}h=Y}if(g=="json-parse"){var xe=t.parse;if(typeof xe=="function")try{if(xe("0")===0&&!xe(!1)){var G=(L=xe(q)).a.length==5&&L.a[0]===1;if(G){try{G=!xe('"	"')}catch(Z){}if(G)try{G=xe("01")!==1}catch(Z){}if(G)try{G=xe("1.")!==1}catch(Z){}}}}catch(Z){G=!1}h=G}}return y[g]=!!h}return y("json")||(T="[object Function]",S="[object Number]",b="[object String]",E="[object Array]",R=y("bug-string-char-index"),X||(C=d.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(g,h){return O[h]+365*(g-1970)+C((g-1969+(h=+(1<h)))/4)-C((g-1901+h)/100)+C((g-1601+h)/400)}),(w=pe.hasOwnProperty)||(w=function(g){var h,L={__proto__:null};return L.__proto__={toString:1},w=L.toString!=$?function(Y){var A=this.__proto__,Y=Y in(this.__proto__=null,this);return this.__proto__=A,Y}:(h=L.constructor,function(q){var A=(this.constructor||h).prototype;return q in this&&!(q in A&&this[q]===A[q])}),L=null,w.call(this,g)}),k=function(g,h){var L,q,A,Y=0;for(A in(L=function(){this.valueOf=0}).prototype.valueOf=0,q=new L)w.call(q,A)&&Y++;return L=q=null,(k=Y?Y==2?function(xe,G){var Z,ge={},he=$.call(xe)==T;for(Z in xe)he&&Z=="prototype"||w.call(ge,Z)||!(ge[Z]=1)||!w.call(xe,Z)||G(Z)}:function(xe,G){var Z,ge,he=$.call(xe)==T;for(Z in xe)he&&Z=="prototype"||!w.call(xe,Z)||(ge=Z==="constructor")||G(Z);(ge||w.call(xe,Z="constructor"))&&G(Z)}:(q=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(xe,G){var Z,ge,he=$.call(xe)==T,ne=!he&&typeof xe.constructor!="function"&&m[typeof xe.hasOwnProperty]&&xe.hasOwnProperty||w;for(Z in xe)he&&Z=="prototype"||!ne.call(xe,Z)||G(Z);for(ge=q.length;Z=q[--ge];ne.call(xe,Z)&&G(Z));}))(g,h)},y("json-stringify")||(_={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},P=function(g,h){return("000000"+(h||0)).slice(-g)},F=function(g){for(var h='"',L=0,q=g.length,A=!R||10<q,Y=A&&(R?g.split(""):g);L<q;L++){var xe=g.charCodeAt(L);switch(xe){case 8:case 9:case 10:case 12:case 13:case 34:case 92:h+=_[xe];break;default:if(xe<32){h+="\\u00"+P(2,xe.toString(16));break}h+=A?Y[L]:g.charAt(L)}}return h+'"'},K=function(g,h,L,q,A,Y,xe){var G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e;try{G=h[g]}catch(Re){}if(typeof G=="object"&&G)if((Z=$.call(G))!="[object Date]"||w.call(G,"toJSON"))typeof G.toJSON=="function"&&(Z!=S&&Z!=b&&Z!=E||w.call(G,"toJSON"))&&(G=G.toJSON(g));else if(-1/0<G&&G<1/0){if(I){for(ne=C(G/864e5),ge=C(ne/365.2425)+1970-1;I(ge+1,0)<=ne;ge++);for(he=C((ne-I(ge,0))/30.42);I(ge,he+1)<=ne;he++);ne=1+ne-I(ge,he),ue=C((j=(G%864e5+864e5)%864e5)/36e5)%24,Te=C(j/6e4)%60,Fe=C(j/1e3)%60,j=j%1e3}else ge=G.getUTCFullYear(),he=G.getUTCMonth(),ne=G.getUTCDate(),ue=G.getUTCHours(),Te=G.getUTCMinutes(),Fe=G.getUTCSeconds(),j=G.getUTCMilliseconds();G=(ge<=0||1e4<=ge?(ge<0?"-":"+")+P(6,ge<0?-ge:ge):P(4,ge))+"-"+P(2,he+1)+"-"+P(2,ne)+"T"+P(2,ue)+":"+P(2,Te)+":"+P(2,Fe)+"."+P(3,j)+"Z"}else G=null;if(L&&(G=L.call(h,g,G)),G===null)return"null";if((Z=$.call(G))=="[object Boolean]")return""+G;if(Z==S)return-1/0<G&&G<1/0?""+G:"null";if(Z==b)return F(""+G);if(typeof G=="object"){for(me=xe.length;me--;)if(xe[me]===G)throw f();if(xe.push(G),ie=[],j=Y,Y+=A,Z==E){for(se=0,me=G.length;se<me;se++)Se=K(se,G,L,q,A,Y,xe),ie.push(Se===x?"null":Se);_e=ie.length?A?"[\n"+Y+ie.join(",\n"+Y)+"\n"+j+"]":"["+ie.join(",")+"]":"[]"}else k(q||G,function(Re){var de=K(Re,G,L,q,A,Y,xe);de!==x&&ie.push(F(Re)+":"+(A?" ":"")+de)}),_e=ie.length?A?"{\n"+Y+ie.join(",\n"+Y)+"\n"+j+"}":"{"+ie.join(",")+"}":"{}";return xe.pop(),_e}},t.stringify=function(g,h,L){var q,A,Y,xe;if(m[typeof h]&&h){if((xe=$.call(h))==T)A=h;else if(xe==E){Y={};for(var G,Z=0,ge=h.length;Z<ge;G=h[Z++],(xe=$.call(G))!=b&&xe!=S||(Y[G]=1));}}if(L)if((xe=$.call(L))==S){if(0<(L-=L%1))for(q="",10<L&&(L=10);q.length<L;q+=" ");}else xe==b&&(q=L.length<=10?L:L.slice(0,10));return K("",((G={})[""]=g,G),A,Y,q,"",[])}),y("json-parse")||(V=i.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},J=function(){throw U=Q=null,l()},N=function(){for(var g,h,L,q,A,Y=Q,xe=Y.length;U<xe;)switch(A=Y.charCodeAt(U)){case 9:case 10:case 13:case 32:U++;break;case 123:case 125:case 91:case 93:case 58:case 44:return g=R?Y.charAt(U):Y[U],U++,g;case 34:for(g="@",U++;U<xe;)if((A=Y.charCodeAt(U))<32)J();else if(A==92)switch(A=Y.charCodeAt(++U)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:g+=D[A],U++;break;case 117:for(h=++U,L=U+4;U<L;U++)48<=(A=Y.charCodeAt(U))&&A<=57||97<=A&&A<=102||65<=A&&A<=70||J();g+=V("0x"+Y.slice(h,U));break;default:J()}else{if(A==34)break;for(A=Y.charCodeAt(U),h=U;32<=A&&A!=92&&A!=34;)A=Y.charCodeAt(++U);g+=Y.slice(h,U)}if(Y.charCodeAt(U)==34)return U++,g;J();default:if(h=U,A==45&&(q=!0,A=Y.charCodeAt(++U)),48<=A&&A<=57){for(A==48&&48<=(A=Y.charCodeAt(U+1))&&A<=57&&J(),q=!1;U<xe&&48<=(A=Y.charCodeAt(U))&&A<=57;U++);if(Y.charCodeAt(U)==46){for(L=++U;L<xe&&48<=(A=Y.charCodeAt(L))&&A<=57;L++);L==U&&J(),U=L}if((A=Y.charCodeAt(U))==101||A==69){for((A=Y.charCodeAt(++U))!=43&&A!=45||U++,L=U;L<xe&&48<=(A=Y.charCodeAt(L))&&A<=57;L++);L==U&&J(),U=L}return+Y.slice(h,U)}if(q&&J(),Y.slice(U,U+4)=="true")return U+=4,!0;if(Y.slice(U,U+5)=="false")return U+=5,!1;if(Y.slice(U,U+4)=="null")return U+=4,null;J()}return"$"},te=function(g){var h,L;if(g=="$"&&J(),typeof g=="string"){if((R?g.charAt(0):g[0])=="@")return g.slice(1);if(g=="["){for(h=[];(g=N())!="]";L=L||!0)!L||g==","&&(g=N())!="]"||J(),g==","&&J(),h.push(te(g));return h}if(g=="{"){for(h={};(g=N())!="}";L=L||!0)!L||g==","&&(g=N())!="}"||J(),g!=","&&typeof g=="string"&&(R?g.charAt(0):g[0])=="@"&&N()==":"||J(),h[g.slice(1)]=te(N());return h}J()}return g},ae=function(g,h,L){L=ee(g,h,L),L===x?delete g[h]:g[h]=L},ee=function(g,h,L){var q,A=g[h];if(typeof A=="object"&&A)if($.call(A)==E)for(q=A.length;q--;)ae(A,q,L);else k(A,function(Y){ae(A,Y,L)});return L.call(g,h,A)},t.parse=function(g,h){var L;return U=0,Q=""+g,L=te(N()),N()!="$"&&J(),U=Q=null,h&&$.call(h)==T?ee(((g={})[""]=L,g),"",h):L})),t.runInContext=Ce,t}!oe||oe.global!==oe&&oe.window!==oe&&oe.self!==oe||(z=oe),B&&!c?Ce(z,B):(e=z.JSON,v=z.JSON3,a=!1,u=Ce(z,z.JSON3={noConflict:function(){return a||(a=!0,z.JSON=e,z.JSON3=v,e=v=null),u}}),z.JSON={parse:u.parse,stringify:u.stringify}),c&&define(function(){return u})}).call(Rn),function(){var e={a:function(){return e.el("a")},svg:function(){return e.el("svg")},object:function(){return e.el("object")},image:function(){return e.el("image")},img:function(){return e.el("img")},style:function(){return e.el("style")},link:function(){return e.el("link")},script:function(){return e.el("script")},audio:function(){return e.el("audio")},video:function(){return e.el("video")},text:function(v){return document.createTextNode(v)},el:function(v){return document.createElement(v)}};re.Elements=e}(),function(){var e={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(v){var a={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(v==null)return a;var u,c=re.Elements.a();for(u in c.href=v,a)u in c&&(a[u]=c[u]);var m=v.indexOf("?");return-1<m&&(v=v.substr(0,m)),e.ABSOLUTE_PATT.test(v)?a.absolute=!0:e.RELATIVE_PATT.test(v)&&(a.relative=!0),(v=v.match(e.EXTENSION_PATT))&&(a.extension=v[1].toLowerCase()),a},formatQueryString:function(v,a){if(v==null)throw new Error("You must specify data.");var u,c=[];for(u in v)c.push(u+"="+escape(v[u]));return a&&(c=c.concat(a)),c.join("&")},buildURI:function(v,a){if(a==null)return v;var u,c=[],m=v.indexOf("?");return m!=-1&&(u=v.slice(m+1),c=c.concat(u.split("&"))),m!=-1?v.slice(0,m)+"?"+this.formatQueryString(a,c):v+"?"+this.formatQueryString(a,c)},isCrossDomain:function(v){var a=re.Elements.a();return a.href=v.src,v=re.Elements.a(),v.href=location.href,a.hostname!=""&&(a.port!=v.port||a.protocol!=v.protocol||a.hostname!=v.hostname)},isLocal:function(v){var a=re.Elements.a();return a.href=v.src,a.hostname==""&&a.protocol=="file:"}};re.URLUtils=e}(),function(){var e={container:null,appendToHead:function(v){e.getHead().appendChild(v)},appendToBody:function(v){var a;e.container==null&&(e.container=document.createElement("div"),e.container.id="preloadjs-container",(a=e.container.style).visibility="hidden",a.position="absolute",a.width=e.container.style.height="10px",a.overflow="hidden",a.transform=a.msTransform=a.webkitTransform=a.oTransform="translate(-10px, -10px)",e.getBody().appendChild(e.container)),e.container.appendChild(v)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(v){v.parent&&v.parent.removeChild(v)},isImageTag:function(v){return v instanceof HTMLImageElement},isAudioTag:function(v){return!!window.HTMLAudioElement&&v instanceof HTMLAudioElement},isVideoTag:function(v){return!!window.HTMLVideoElement&&v instanceof HTMLVideoElement}};re.DomUtils=e}(),function(){var e={parseXML:function(v){var a=null;try{window.DOMParser&&(a=new DOMParser().parseFromString(v,"text/xml"))}catch(u){}if(!a)try{(a=new ActiveXObject("Microsoft.XMLDOM")).async=!1,a.loadXML(v)}catch(u){a=null}return a},parseJSON:function(v){if(v==null)return null;try{return JSON.parse(v)}catch(a){throw a}}};re.DataUtils=e}(),function(){var e={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"};re.Types=e}(),function(){var e={POST:"POST",GET:"GET"};re.Methods=e}(),function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=re.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=a.LOAD_TIMEOUT_DEFAULT}var v=e.prototype={},a=e;a.LOAD_TIMEOUT_DEFAULT=8e3,a.create=function(u){if(typeof u=="string"){var c=new e;return c.src=u,c}if(u instanceof a)return u;if(u instanceof Object&&u.src)return u.loadTimeout==null&&(u.loadTimeout=a.LOAD_TIMEOUT_DEFAULT),u;throw new Error("Type not recognized.")},v.set=function(u){for(var c in u)this[c]=u[c];return this},re.LoadItem=a}(),function(){var e={isBinary:function(v){switch(v){case re.Types.IMAGE:case re.Types.BINARY:return!0;default:return!1}},isText:function(v){switch(v){case re.Types.TEXT:case re.Types.JSON:case re.Types.MANIFEST:case re.Types.XML:case re.Types.CSS:case re.Types.SVG:case re.Types.JAVASCRIPT:case re.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(v){if(v==null)return re.Types.TEXT;switch(v.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return re.Types.IMAGE;case"ogg":case"mp3":case"webm":return re.Types.SOUND;case"mp4":case"webm":case"ts":return re.Types.VIDEO;case"json":return re.Types.JSON;case"xml":return re.Types.XML;case"css":return re.Types.CSS;case"js":return re.Types.JAVASCRIPT;case"svg":return re.Types.SVG;default:return re.Types.TEXT}}};re.RequestUtils=e}(),function(){"use strict";function e(u,c,m){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=m,this.resultFormatter=null,this._item=u?re.LoadItem.create(u):null,this._preferXHR=c,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var v=re.extend(e,re.EventDispatcher),a=e;try{Object.defineProperties(a,{POST:{get:re.deprecate(function(){return re.Methods.POST},"AbstractLoader.POST")},GET:{get:re.deprecate(function(){return re.Methods.GET},"AbstractLoader.GET")},BINARY:{get:re.deprecate(function(){return re.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:re.deprecate(function(){return re.Types.CSS},"AbstractLoader.CSS")},FONT:{get:re.deprecate(function(){return re.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:re.deprecate(function(){return re.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:re.deprecate(function(){return re.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:re.deprecate(function(){return re.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:re.deprecate(function(){return re.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:re.deprecate(function(){return re.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:re.deprecate(function(){return re.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:re.deprecate(function(){return re.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:re.deprecate(function(){return re.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:re.deprecate(function(){return re.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:re.deprecate(function(){return re.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:re.deprecate(function(){return re.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:re.deprecate(function(){return re.Types.XML},"AbstractLoader.XML")}})}catch(u){}v.getItem=function(){return this._item},v.getResult=function(u){return u?this._rawResult:this._result},v.getTag=function(){return this._tag},v.setTag=function(u){this._tag=u},v.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var u=new re.Event("initialize");u.loader=this._request,this.dispatchEvent(u),this._request.load()},v.cancel=function(){this.canceled=!0,this.destroy()},v.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},v.getLoadedItems=function(){return this._loadedItems},v._createRequest=function(){this._preferXHR?this._request=new re.XHRRequest(this._item):this._request=new re.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},v._createTag=function(u){return null},v._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},v._sendProgress=function(u){var c;this._isCanceled()||(c=null,typeof u=="number"?(this.progress=u,c=new re.ProgressEvent(this.progress)):(c=u,this.progress=u.loaded/u.total,c.progress=this.progress,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(c))},v._sendComplete=function(){var u;this._isCanceled()||(this.loaded=!0,(u=new re.Event("complete")).rawResult=this._rawResult,this._result!=null&&(u.result=this._result),this.dispatchEvent(u))},v._sendError=function(u){!this._isCanceled()&&this.hasEventListener("error")&&(u==null&&(u=new re.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(u))},v._isCanceled=function(){return!(window.createjs!=null&&!this.canceled)},v.resultFormatter=null,v.handleEvent=function(u){switch(u.type){case"complete":this._rawResult=u.target._response;var c=this.resultFormatter&&this.resultFormatter(this);c instanceof Function?c.call(this,re.proxy(this._resultFormatSuccess,this),re.proxy(this._resultFormatFailed,this)):(this._result=c||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(u);break;case"error":this._sendError(u);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new re.ErrorEvent("PRELOAD_"+u.type.toUpperCase()+"_ERROR"))}},v._resultFormatSuccess=function(u){this._result=u,this._sendComplete()},v._resultFormatFailed=function(u){this._sendError(u)},v.toString=function(){return"[PreloadJS AbstractLoader]"},re.AbstractLoader=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,c){this.AbstractLoader_constructor(a,u,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var v=re.extend(e,re.AbstractLoader);v.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},v._createTag=function(){},v._createRequest=function(){this._preferXHR?this._request=new re.XHRRequest(this._item):this._request=new re.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},v._updateXHR=function(a){a.loader.setResponseType&&a.loader.setResponseType("blob")},v._formatResult=function(a){var u,c;return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(u=window.URL||window.webkitURL,c=a.getResult(!0),a.getTag().src=u.createObjectURL(c)),a.getTag()},re.AbstractMediaLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this._item=a}var v=re.extend(e,re.EventDispatcher);v.load=function(){},v.destroy=function(){},v.cancel=function(){},re.AbstractRequest=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(a,u,c){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=c,this._loadedHandler=re.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var v=re.extend(e,re.AbstractRequest);v.load=function(){this._tag.onload=re.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=re.proxy(this._handleReadyStateChange,this),this._tag.onerror=re.proxy(this._handleError,this);var a=new re.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(re.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},v.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},v._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},v._handleError=function(){this._clean(),this.dispatchEvent("error")},v._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},v._handleTimeout=function(){this._clean(),this.dispatchEvent(new re.Event("timeout"))},v._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},v._handleStalled=function(){},re.TagRequest=re.promote(e,"AbstractRequest")}(),function(){"use strict";function e(a,u,c){this.AbstractRequest_constructor(a),this._tag=u,this._tagSrcAttribute=c,this._loadedHandler=re.proxy(this._handleTagComplete,this)}var v=re.extend(e,re.TagRequest);v.load=function(){var a=re.proxy(this._handleStalled,this);this._stalledCallback=a;var u=re.proxy(this._handleProgress,this);this._handleProgress=u,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",u),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},v._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;a.readyState!="loaded"&&a.readyState!="complete"||this._handleTagComplete()},v._handleStalled=function(){},v._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new re.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},v._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},re.MediaTagRequest=re.promote(e,"TagRequest")}(),function(){"use strict";function e(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=re.proxy(this._handleLoadStart,this),this._handleProgressProxy=re.proxy(this._handleProgress,this),this._handleAbortProxy=re.proxy(this._handleAbort,this),this._handleErrorProxy=re.proxy(this._handleError,this),this._handleTimeoutProxy=re.proxy(this._handleTimeout,this),this._handleLoadProxy=re.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=re.proxy(this._handleReadyStateChange,this),this._createXHR(a)}var v=re.extend(e,re.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],v.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},v.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},v.load=function(){if(this._request!=null){this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(re.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new re.ErrorEvent("XHR_SEND",null,a))}}else this._handleError()},v.setResponseType=function(a){a==="blob"&&(a=window.URL?"blob":"arraybuffer",this._responseType=a),this._request.responseType=a},v.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},v.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},v._handleProgress=function(a){!a||0<a.loaded&&a.total==0||(a=new re.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))},v._handleLoadStart=function(a){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},v._handleAbort=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent("XHR_ABORTED",null,a))},v._handleError=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent(a.message))},v._handleReadyStateChange=function(a){this._request.readyState==4&&this._handleLoad()},v._handleLoad=function(a){if(!this.loaded){this.loaded=!0;var u=this._checkError();if(u)this._handleError(u);else{if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,c.name==="TypeError"&&window.BlobBuilder&&((u=new BlobBuilder).append(this._response),this._response=u.getBlob())}this._clean(),this.dispatchEvent(new re.Event("complete"))}}},v._handleTimeout=function(a){this._clean(),this.dispatchEvent(new re.ErrorEvent("PRELOAD_TIMEOUT",null,a))},v._checkError=function(){var a=parseInt(this._request.status);return 400<=a&&a<=599?new Error(a):a==0&&/^https?:/.test(location.protocol)?new Error(0):null},v._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch(a){}try{if(this._request.responseXML!=null)return this._request.responseXML}catch(a){}return null},v._createXHR=function(a){var u=re.URLUtils.isCrossDomain(a),c={},m=null;if(window.XMLHttpRequest)m=new XMLHttpRequest,u&&m.withCredentials===void 0&&window.XDomainRequest&&(m=new XDomainRequest);else{for(var B=0,z=s.ACTIVEX_VERSIONS.length;B<z;B++){var oe=s.ACTIVEX_VERSIONS[B];try{m=new ActiveXObject(oe);break}catch(t){}}if(m==null)return!1}a.mimeType==null&&re.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType),this._xhrLevel=typeof m.responseType=="string"?2:1;var Ce=null,Ce=a.method==re.Methods.GET?re.URLUtils.buildURI(a.src,a.values):a.src;if(m.open(a.method||re.Methods.GET,Ce,!0),u&&m instanceof XMLHttpRequest&&this._xhrLevel==1&&(c.Origin=location.origin),a.values&&a.method==re.Methods.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),u||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var be in a.headers)c[be]=a.headers[be];for(be in c)m.setRequestHeader(be,c[be]);return m instanceof XMLHttpRequest&&a.withCredentials!==void 0&&(m.withCredentials=a.withCredentials),this._request=m,!0},v._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},v.toString=function(){return"[PreloadJS XHRRequest]"},re.XHRRequest=re.promote(e,"AbstractRequest")}(),function(){"use strict";function e(u,c,m){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[re.FontLoader,re.ImageLoader,re.JavaScriptLoader,re.CSSLoader,re.JSONLoader,re.JSONPLoader,re.SoundLoader,re.ManifestLoader,re.SpriteSheetLoader,re.XMLLoader,re.SVGLoader,re.BinaryLoader,re.VideoLoader,re.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(u,c,m)}var v=re.extend(e,re.AbstractLoader),a=e;try{Object.defineProperties(a,{POST:{get:re.deprecate(function(){return re.Methods.POST},"AbstractLoader.POST")},GET:{get:re.deprecate(function(){return re.Methods.GET},"AbstractLoader.GET")},BINARY:{get:re.deprecate(function(){return re.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:re.deprecate(function(){return re.Types.CSS},"AbstractLoader.CSS")},FONT:{get:re.deprecate(function(){return re.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:re.deprecate(function(){return re.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:re.deprecate(function(){return re.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:re.deprecate(function(){return re.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:re.deprecate(function(){return re.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:re.deprecate(function(){return re.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:re.deprecate(function(){return re.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:re.deprecate(function(){return re.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:re.deprecate(function(){return re.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:re.deprecate(function(){return re.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:re.deprecate(function(){return re.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:re.deprecate(function(){return re.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:re.deprecate(function(){return re.Types.XML},"AbstractLoader.XML")}})}catch(u){}v.init=function(u,c,m){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(u),this._paused=!1,this._basePath=c,this._crossOrigin=m,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},v.registerLoader=function(u){if(!u||!u.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(u)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(u)},v.unregisterLoader=function(u){u=this._availableLoaders.indexOf(u),u!=-1&&u<this._defaultLoaderLength-1&&this._availableLoaders.splice(u,1)},v.setPreferXHR=function(u){return this.preferXHR=u!=0&&window.XMLHttpRequest!=null,this.preferXHR},v.removeAll=function(){this.remove()},v.remove=function(u){var c=null;if(u&&!Array.isArray(u))c=[u];else if(u)c=u;else if(0<arguments.length)return;var m=!1;if(c){for(;c.length;){for(var B=c.pop(),z=this.getResult(B),oe=this._loadQueue.length-1;0<=oe;oe--)if((Ce=this._loadQueue[oe].getItem()).id==B||Ce.src==B){this._loadQueue.splice(oe,1)[0].cancel();break}for(oe=this._loadQueueBackup.length-1;0<=oe;oe--)if((Ce=this._loadQueueBackup[oe].getItem()).id==B||Ce.src==B){this._loadQueueBackup.splice(oe,1)[0].cancel();break}if(z)this._disposeItem(this.getItem(B));else for(var oe=this._currentLoads.length-1;0<=oe;oe--){var Ce=this._currentLoads[oe].getItem();if(Ce.id==B||Ce.src==B){this._currentLoads.splice(oe,1)[0].cancel(),m=!0;break}}}m&&this._loadNext()}else{for(var be in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[be]);this.init(this.preferXHR,this._basePath)}},v.reset=function(){for(var u in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[u]);for(var c=[],m=0,B=this._loadQueueBackup.length;m<B;m++)c.push(this._loadQueueBackup[m].getItem());this.loadManifest(c,!1)},v.installPlugin=function(u){if(u!=null&&u.getPreloadHandlers!=null){this._plugins.push(u);var c=u.getPreloadHandlers();if(c.scope=u,c.types!=null)for(var m=0,B=c.types.length;m<B;m++)this._typeCallbacks[c.types[m]]=c;if(c.extensions!=null)for(m=0,B=c.extensions.length;m<B;m++)this._extensionCallbacks[c.extensions[m]]=c}},v.setMaxConnections=function(u){this._maxConnections=u,!this._paused&&0<this._loadQueue.length&&this._loadNext()},v.loadFile=function(u,c,m){u!=null?(this._addItem(u,null,m),c!==!1?this.setPaused(!1):this.setPaused(!0)):(c=new re.ErrorEvent("PRELOAD_NO_FILE"),this._sendError(c))},v.loadManifest=function(u,c,m){var B=null,z=null;if(Array.isArray(u)){if(u.length==0){var oe=new re.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(oe)}B=u}else if(typeof u=="string")B=[{src:u,type:a.MANIFEST}];else{if(typeof u!="object")return oe=new re.ErrorEvent("PRELOAD_MANIFEST_NULL"),void this._sendError(oe);u.src!==void 0?(u.type==null?u.type=a.MANIFEST:u.type!=a.MANIFEST&&(oe=new re.ErrorEvent("PRELOAD_MANIFEST_TYPE"),this._sendError(oe)),B=[u]):u.manifest!==void 0&&(B=u.manifest,z=u.path)}for(var Ce=0,be=B.length;Ce<be;Ce++)this._addItem(B[Ce],z,m);c!==!1?this.setPaused(!1):this.setPaused(!0)},v.load=function(){this.setPaused(!1)},v.getItem=function(u){return this._loadItemsById[u]||this._loadItemsBySrc[u]},v.getResult=function(u,c){return u=this._loadItemsById[u]||this._loadItemsBySrc[u],u==null?null:(u=u.id,(c&&this._loadedRawResults[u]?this._loadedRawResults:this._loadedResults)[u])},v.getItems=function(u){var c,m=[];for(c in this._loadItemsById){var B=this._loadItemsById[c],z=this.getResult(c);u===!0&&z==null||m.push({item:B,result:z,rawResult:this.getResult(c,!0)})}return m},v.setPaused=function(u){this._paused=u,this._paused||this._loadNext()},v.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},v._addItem=function(u,c,m){c=this._createLoadItem(u,c,m),c==null||(m=this._createLoader(c))!=null&&("plugins"in m&&(m.plugins=this._plugins),c._loader=m,this._loadQueue.push(m),this._loadQueueBackup.push(m),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&c.type==re.Types.JAVASCRIPT||c.maintainOrder===!0)&&(this._scriptOrder.push(c),this._loadedScripts.push(null)))},v._createLoadItem=function(u,c,m){var B=re.LoadItem.create(u);if(B==null)return null;if(u="",m=m||this._basePath,B.src instanceof Object){if(!B.type)return null;c?(u=c,oe=re.URLUtils.parseURI(c),m==null||oe.absolute||oe.relative||(u=m+u)):m!=null&&(u=m)}else{var z=re.URLUtils.parseURI(B.src);z.extension&&(B.ext=z.extension),B.type==null&&(B.type=re.RequestUtils.getTypeByExtension(B.ext));var oe,Ce=B.src;z.absolute||z.relative||(c?(u=c,oe=re.URLUtils.parseURI(c),Ce=c+Ce,m==null||oe.absolute||oe.relative||(u=m+u)):m!=null&&(u=m)),B.src=u+B.src}if(B.path=u,B.id!==void 0&&B.id!==null&&B.id!==""||(B.id=Ce),Ce=this._typeCallbacks[B.type]||this._extensionCallbacks[B.ext],Ce){if(Ce=Ce.callback.call(Ce.scope,B,this),Ce===!1)return null;Ce===!0||Ce!=null&&(B._loader=Ce),(z=re.URLUtils.parseURI(B.src)).extension!=null&&(B.ext=z.extension)}return this._loadItemsById[B.id]=B,(this._loadItemsBySrc[B.src]=B).crossOrigin==null&&(B.crossOrigin=this._crossOrigin),B},v._createLoader=function(u){if(u._loader!=null)return u._loader;for(var c=this.preferXHR,m=0;m<this._availableLoaders.length;m++){var B=this._availableLoaders[m];if(B&&B.canLoadItem(u))return new B(u,c)}return null},v._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var u=0;u<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);u++){var c=this._loadQueue[u];this._canStartLoad(c)&&(this._loadQueue.splice(u,1),u--,this._loadItem(c))}}},v._loadItem=function(u){u.on("fileload",this._handleFileLoad,this),u.on("progress",this._handleProgress,this),u.on("complete",this._handleFileComplete,this),u.on("error",this._handleError,this),u.on("fileerror",this._handleFileError,this),this._currentLoads.push(u),this._sendFileStart(u.getItem()),u.load()},v._handleFileLoad=function(u){u.target=null,this.dispatchEvent(u)},v._handleFileError=function(u){u=new re.ErrorEvent("FILE_LOAD_ERROR",null,u.item),this._sendError(u)},v._handleError=function(u){var c=u.target;this._numItemsLoaded++,this._finishOrderedItem(c,!0),this._updateProgress(),u=new re.ErrorEvent("FILE_LOAD_ERROR",null,c.getItem()),this._sendError(u),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(c),this._cleanLoadItem(c),this._loadNext())},v._handleFileComplete=function(u){var c=u.target,m=c.getItem(),B=c.getResult();this._loadedResults[m.id]=B,u=c.getResult(!0),u!=null&&u!==B&&(this._loadedRawResults[m.id]=u),this._saveLoadedItems(c),this._removeLoadItem(c),this._finishOrderedItem(c)||this._processFinishedLoad(m,c),this._cleanLoadItem(c)},v._saveLoadedItems=function(u){var c=u.getLoadedItems();if(c!==null)for(var m=0;m<c.length;m++){var B=c[m].item;this._loadItemsBySrc[B.src]=B,this._loadItemsById[B.id]=B,this._loadedResults[B.id]=c[m].result,this._loadedRawResults[B.id]=c[m].rawResult}},v._finishOrderedItem=function(u,c){var m=u.getItem();return this.maintainScriptOrder&&m.type==re.Types.JAVASCRIPT||m.maintainOrder?(u instanceof re.JavaScriptLoader&&(this._currentlyLoadingScript=!1),u=re.indexOf(this._scriptOrder,m),u==-1?!1:(this._loadedScripts[u]=c===!0||m,this._checkScriptLoadOrder(),!0)):!1},v._checkScriptLoadOrder=function(){for(var u=this._loadedScripts.length,c=0;c<u;c++){var m,B=this._loadedScripts[c];if(B===null)break;B!==!0&&(m=this._loadedResults[B.id],B.type==re.Types.JAVASCRIPT&&re.DomUtils.appendToHead(m),m=B._loader,this._processFinishedLoad(B,m),this._loadedScripts[c]=!0)}},v._processFinishedLoad=function(u,c){var m;this._numItemsLoaded++,this.maintainScriptOrder||u.type!=re.Types.JAVASCRIPT||(m=c.getTag(),re.DomUtils.appendToHead(m)),this._updateProgress(),this._sendFileComplete(u,c),this._loadNext()},v._canStartLoad=function(u){if(!this.maintainScriptOrder||u.preferXHR||(u=u.getItem(),u.type!=re.Types.JAVASCRIPT))return!0;if(this._currentlyLoadingScript)return!1;for(var c=this._scriptOrder.indexOf(u),m=0;m<c;){if(this._loadedScripts[m]==null)return!1;m++}return this._currentlyLoadingScript=!0},v._removeLoadItem=function(u){for(var c=this._currentLoads.length,m=0;m<c;m++)if(this._currentLoads[m]==u){this._currentLoads.splice(m,1);break}},v._cleanLoadItem=function(u){u=u.getItem(),u&&delete u._loader},v._handleProgress=function(u){u=u.target,this._sendFileProgress(u.getItem(),u.progress),this._updateProgress()},v._updateProgress=function(){var u=this._numItemsLoaded/this._numItems,c=this._numItems-this._numItemsLoaded;if(0<c){for(var m=0,B=0,z=this._currentLoads.length;B<z;B++)m+=this._currentLoads[B].progress;u+=m/c*(c/this._numItems)}this._lastProgress!=u&&(this._sendProgress(u),this._lastProgress=u)},v._disposeItem=function(u){delete this._loadedResults[u.id],delete this._loadedRawResults[u.id],delete this._loadItemsById[u.id],delete this._loadItemsBySrc[u.src]},v._sendFileProgress=function(u,c){var m;this._isCanceled()||this._paused||this.hasEventListener("fileprogress")&&((m=new re.Event("fileprogress")).progress=c,m.loaded=c,m.total=1,m.item=u,this.dispatchEvent(m))},v._sendFileComplete=function(u,c){var m;this._isCanceled()||this._paused||((m=new re.Event("fileload")).loader=c,m.item=u,m.result=this._loadedResults[u.id],m.rawResult=this._loadedRawResults[u.id],u.completeHandler&&u.completeHandler(m),this.hasEventListener("fileload")&&this.dispatchEvent(m))},v._sendFileStart=function(u){var c=new re.Event("filestart");c.item=u,this.hasEventListener("filestart")&&this.dispatchEvent(c)},v.toString=function(){return"[PreloadJS LoadQueue]"},re.LoadQueue=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(v){this.AbstractLoader_constructor(v,!0,re.Types.TEXT)}re.extend(e,re.AbstractLoader),e.canLoadItem=function(v){return v.type==re.Types.TEXT},re.TextLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.BINARY),this.on("initialize",this._updateXHR,this)}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.BINARY},v._updateXHR=function(a){a.loader.setResponseType("arraybuffer")},re.BinaryLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=u?re.Elements.style():re.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.CSS},v._formatResult=function(a){var u;return this._preferXHR?(u=a.getTag()).styleSheet?u.styleSheet.cssText=a.getResult(!0):(a=re.Elements.text(a.getResult(!0)),u.appendChild(a)):u=this._tag,re.DomUtils.appendToHead(u),u},re.CSSLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,a.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=a.injectCSS===void 0||a.injectCSS,this.dispatchEvent("initialize")}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.FONT||a.type==re.Types.FONTCSS},e.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",e._ctx=document.createElement("canvas").getContext("2d"),e._referenceFonts=["serif","monospace"],e.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,e.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,e.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},e.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},e.WATCH_DURATION=10,v.load=function(){var a;if(this.type==re.Types.FONTCSS){if(!this._watchCSS())return void this.AbstractLoader_load()}else this._item.src instanceof Array?this._watchFontArray():(a=this._defFromSrc(this._item.src),this._watchFont(a),this._injectStyleTag(this._cssFromDef(a)));this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},v._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new re.ErrorEvent("PRELOAD_TIMEOUT"))},v._createRequest=function(){return this._request},v.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(a)}},v._watchCSS=function(){var a=this._item.src;return a instanceof HTMLStyleElement&&(this._injectCSS&&!a.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(a),this._injectCSS=!1,a="\n"+a.textContent),a.search(/\n|\r|@font-face/i)!==-1?(this._parseCSS(a),!0):(this._request=new re.XHRRequest(this._item),!1)},v._parseCSS=function(a){for(var u=/@font-face\s*\{([^}]+)}/g;;){var c=u.exec(a);if(!c)break;this._watchFont(this._parseFontFace(c[1]))}this._injectStyleTag(a)},v._watchFontArray=function(){for(var a=this._item.src,u="",c=a.length-1;0<=c;c--){var m=a[c],m=typeof m=="string"?this._defFromSrc(m):this._defFromObj(m);this._watchFont(m),u+=this._cssFromDef(m)+"\n"}this._injectStyleTag(u)},v._injectStyleTag=function(a){var u,c;this._injectCSS&&(u=document.head||document.getElementsByTagName("head")[0],(c=document.createElement("style")).type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),u.appendChild(c))},v._parseFontFace=function(a){var u=this._getCSSValue(a,"font-family"),c=this._getCSSValue(a,"src");return u&&c?this._defFromObj({family:u,src:c,style:this._getCSSValue(a,"font-style"),weight:this._getCSSValue(a,"font-weight")}):null},v._watchFont=function(a){a&&!this._faces[a.id]&&(this._faces[a.id]=a,this._watched.push(a),this._count++,this._calculateReferenceSizes(a),this._startWatching())},v._startWatching=function(){this._watchInterval==null&&(this._watchInterval=setInterval(re.proxy(this._watch,this),e.WATCH_DURATION))},v._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},v._watch=function(){for(var a=this._watched,u=e._referenceFonts,c=a.length,m=c-1;0<=m;m--)for(var B=a[m],z=B.refs,oe=z.length-1;0<=oe;oe--)if(this._getTextWidth(B.family+","+u[oe],B.weight,B.style)!=z[oe]){var Ce=new re.Event("fileload");B.type="font-family",Ce.item=B,this.dispatchEvent(Ce),a.splice(m,1);break}c!==a.length&&(Ce=new re.ProgressEvent(this._count-a.length,this._count),this.dispatchEvent(Ce)),c===0&&(this._stopWatching(),this._sendComplete())},v._calculateReferenceSizes=function(a){for(var u=e._referenceFonts,c=a.refs=[],m=0;m<u.length;m++)c[m]=this._getTextWidth(u[m],a.weight,a.style)},v._defFromSrc=function(a){var u=/[- ._]+/g,c=a,m=null,B=c.search(/[?#]/);B!==-1&&(c=c.substr(0,B)),(B=c.lastIndexOf("."))!==-1&&(m=c.substr(B+1),c=c.substr(0,B)),(B=c.lastIndexOf("/"))!==-1&&(c=c.substr(B+1));var z=c,oe=z.match(e.WEIGHT_REGEX);return oe&&(oe=oe[0],z=z.replace(oe,""),oe=oe.replace(u,"").toLowerCase()),B=c.match(e.STYLE_REGEX),B&&(z=z.replace(B[0],""),B="italic"),z=z.replace(u,""),a="local('"+c.replace(u," ")+"'), url('"+a+"')",m=e.FONT_FORMAT[m],m&&(a+=" format('"+m+"')"),this._defFromObj({family:z,weight:e.FONT_WEIGHT[oe]||oe,style:B,src:a})},v._defFromObj=function(a){return a={family:a.family,src:a.src,style:a.style||"normal",weight:a.weight||"normal"},a.id=a.family+";"+a.style+";"+a.weight,a},v._cssFromDef=function(a){return"@font-face {\n	font-family: '"+a.family+"';\n	font-style: "+a.style+";\n	font-weight: "+a.weight+";\n	src: "+a.src+";\n}"},v._getTextWidth=function(a,u,c){var m=e._ctx;return m.font=c+" "+u+" 72px "+a,m.measureText(e.sampleText).width},v._getCSSValue=function(a,u){return a=new RegExp(u+":s*([^;}]+?)s*[;}]").exec(a),a&&a[1]?a[1]:null},re.FontLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",re.DomUtils.isImageTag(a)?this._tag=a:re.DomUtils.isImageTag(a.src)?this._tag=a.src:re.DomUtils.isImageTag(a.tag)&&(this._tag=a.tag),this._tag!=null?this._preferXHR=!1:this._tag=re.Elements.img(),this.on("initialize",this._updateXHR,this)}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.IMAGE},v.load=function(){var a;this._tag.src!=""&&this._tag.complete?this._sendComplete():((a=this._item.crossOrigin)==1&&(a="Anonymous"),a==null||re.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=a),this.AbstractLoader_load())},v._updateXHR=function(a){a.loader.mimeType="text/plain; charset=x-user-defined-binary",a.loader.setResponseType&&a.loader.setResponseType("blob")},v._formatResult=function(a){return this._formatImage},v._formatImage=function(a,u){var c=this._tag,m=window.URL||window.webkitURL;this._preferXHR&&(m?(this.getResult(!0)&&(m=m.createObjectURL(this.getResult(!0)),c.src=m),c.addEventListener("load",this._cleanUpURL,!1),c.addEventListener("error",this._cleanUpURL,!1)):c.src=this._item.src),c.complete?a(c):(c.onload=re.proxy(function(){a(this._tag),c.onload=c.onerror=null},this),c.onerror=re.proxy(function(B){u(new re.ErrorEvent("IMAGE_FORMAT",null,B)),c.onload=c.onerror=null},this))},v._cleanUpURL=function(a){(window.URL||window.webkitURL).revokeObjectURL(a.target.src)},re.ImageLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(re.Elements.script())}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JAVASCRIPT},v._formatResult=function(a){var u=a.getTag();return this._preferXHR&&(u.text=a.getResult(!0)),u},re.JavaScriptLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.JSON),this.resultFormatter=this._formatResult}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JSON},v._formatResult=function(a){var u=null;try{u=re.DataUtils.parseJSON(a.getResult(!0))}catch(m){var c=new re.ErrorEvent("JSON_FORMAT",null,m);return this._sendError(c),m}return u},re.JSONLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!1,re.Types.JSONP),this.setTag(re.Elements.script()),this.getTag().type="text/javascript"}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.JSONP},v.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},v.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=re.proxy(this._handleLoad,this),re.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(re.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},v._handleLoad=function(a){this._result=this._rawResult=a,this._sendComplete(),this._dispose()},v._handleTimeout=function(){this._dispose(),this.dispatchEvent(new re.ErrorEvent("timeout"))},v._dispose=function(){re.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},re.JSONPLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,c){this.AbstractLoader_constructor(u,c,re.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var v=re.extend(e,re.AbstractLoader),a=e;a.MANIFEST_PROGRESS=.25,a.canLoadItem=function(u){return u.type==re.Types.MANIFEST},v.load=function(){this.AbstractLoader_load()},v._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?re.JSONPLoader:re.JSONLoader)(this._item)},v.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.MANIFEST_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},v.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},v._loadManifest=function(u){if(u&&u.manifest){var c=this._manifestQueue=new re.LoadQueue(this._preferXHR);c.on("fileload",this._handleManifestFileLoad,this),c.on("progress",this._handleManifestProgress,this),c.on("complete",this._handleManifestComplete,this,!0),c.on("error",this._handleManifestError,this,!0);for(var m=0,B=this.plugins.length;m<B;m++)c.installPlugin(this.plugins[m]);c.loadManifest(u)}else this._sendComplete()},v._handleManifestFileLoad=function(u){u.target=null,this.dispatchEvent(u)},v._handleManifestComplete=function(u){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},v._handleManifestProgress=function(u){this.progress=u.progress*(1-a.MANIFEST_PROGRESS)+a.MANIFEST_PROGRESS,this._sendProgress(this.progress)},v._handleManifestError=function(u){var c=new re.Event("fileerror");c.item=u.data,this.dispatchEvent(c)},re.ManifestLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,re.Types.SOUND),re.DomUtils.isAudioTag(a)||re.DomUtils.isAudioTag(a.src)?this._tag=a:re.DomUtils.isAudioTag(a.tag)&&(this._tag=re.DomUtils.isAudioTag(a)?a:a.src),this._tag!=null&&(this._preferXHR=!1)}var v=re.extend(e,re.AbstractMediaLoader);e.canLoadItem=function(a){return a.type==re.Types.SOUND},v._createTag=function(a){var u=re.Elements.audio();return u.autoplay=!1,u.preload="none",u.src=a,u},re.SoundLoader=re.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(a,u){this.AbstractMediaLoader_constructor(a,u,re.Types.VIDEO),re.DomUtils.isVideoTag(a)||re.DomUtils.isVideoTag(a.src)?(this.setTag(re.DomUtils.isVideoTag(a)?a:a.src),this._preferXHR=!1):this.setTag(this._createTag())}var v=e;re.extend(e,re.AbstractMediaLoader)._createTag=function(){return re.Elements.video()},v.canLoadItem=function(a){return a.type==re.Types.VIDEO},re.VideoLoader=re.promote(e,"AbstractMediaLoader")}(),function(){"use strict";function e(u,c){this.AbstractLoader_constructor(u,c,re.Types.SPRITESHEET),this._manifestQueue=null}var v=re.extend(e,re.AbstractLoader),a=e;a.SPRITESHEET_PROGRESS=.25,a.canLoadItem=function(u){return u.type==re.Types.SPRITESHEET},v.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},v._createRequest=function(){var u=this._item.callback;this._request=new(u!=null?re.JSONPLoader:re.JSONLoader)(this._item)},v.handleEvent=function(u){switch(u.type){case"complete":return this._rawResult=u.target.getResult(!0),this._result=u.target.getResult(),this._sendProgress(a.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return u.loaded*=a.SPRITESHEET_PROGRESS,this.progress=u.loaded/u.total,!isNaN(this.progress)&&this.progress!=1/0||(this.progress=0),void this._sendProgress(u)}this.AbstractLoader_handleEvent(u)},v._loadManifest=function(u){var c;u&&u.images&&((c=this._manifestQueue=new re.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin)).on("complete",this._handleManifestComplete,this,!0),c.on("fileload",this._handleManifestFileLoad,this),c.on("progress",this._handleManifestProgress,this),c.on("error",this._handleManifestError,this,!0),c.loadManifest(u.images))},v._handleManifestFileLoad=function(u){var c,m=u.result;m!=null&&(u=(c=this.getResult().images).indexOf(u.item.src),c[u]=m)},v._handleManifestComplete=function(u){this._result=new re.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},v._handleManifestProgress=function(u){this.progress=u.progress*(1-a.SPRITESHEET_PROGRESS)+a.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},v._handleManifestError=function(u){var c=new re.Event("fileerror");c.item=u.data,this.dispatchEvent(c)},re.SpriteSheetLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a,u){this.AbstractLoader_constructor(a,u,re.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",u?this.setTag(re.Elements.svg()):(this.setTag(re.Elements.object()),this.getTag().type="image/svg+xml")}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.SVG},v._formatResult=function(c){var u=re.DataUtils.parseXML(c.getResult(!0)),c=c.getTag();return!this._preferXHR&&document.body.contains(c)&&document.body.removeChild(c),u.documentElement==null?u:(u=u.documentElement,document.importNode&&(u=document.importNode(u,!0)),c.appendChild(u),c)},re.SVGLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.XML),this.resultFormatter=this._formatResult}var v=re.extend(e,re.AbstractLoader);e.canLoadItem=function(a){return a.type==re.Types.XML},v._formatResult=function(a){return re.DataUtils.parseXML(a.getResult(!0))},re.XMLLoader=re.promote(e,"AbstractLoader")}(),function(){var e=re.SoundJS=re.SoundJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var v=e.agent=window.navigator.userAgent;e.isWindowPhone=-1<v.indexOf("IEMobile")||-1<v.indexOf("Windows Phone"),e.isFirefox=-1<v.indexOf("Firefox"),e.isOpera=window.opera!=null,e.isChrome=-1<v.indexOf("Chrome"),e.isIOS=(-1<v.indexOf("iPod")||-1<v.indexOf("iPhone")||-1<v.indexOf("iPad"))&&!e.isWindowPhone,e.isAndroid=-1<v.indexOf("Android")&&!e.isWindowPhone,e.isBlackberry=-1<v.indexOf("Blackberry"),e.isEdge=-1<v.indexOf("Edg"),re.BrowserDetect=e}(),function(){"use strict";function e(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null}var v=e.prototype={},a=e;a.create=function(u){if(typeof u=="string")return console&&(console.warn||console.log)("Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info."),new re.PlayPropsConfig().set({interrupt:u});if(u==null||u instanceof a||u instanceof Object)return new re.PlayPropsConfig().set(u);if(u==null)throw new Error("PlayProps configuration not recognized.")},v.set=function(u){if(u!=null)for(var c in u)this[c]=u[c];return this},v.toString=function(){return"[PlayPropsConfig]"},re.PlayPropsConfig=a}(),function(){"use strict";function e(){throw"Sound cannot be instantiated"}var v=e;function a(c,m){this.init(c,m)}v.INTERRUPT_ANY="any",v.INTERRUPT_EARLY="early",v.INTERRUPT_LATE="late",v.INTERRUPT_NONE="none",v.PLAY_INITED="playInited",v.PLAY_SUCCEEDED="playSucceeded",v.PLAY_INTERRUPTED="playInterrupted",v.PLAY_FINISHED="playFinished",v.PLAY_FAILED="playFailed",v.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],v.EXTENSION_MAP={m4a:"mp4"},v.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,v.defaultInterruptBehavior=v.INTERRUPT_NONE,v.alternateExtensions=[],v.activePlugin=null,v._masterVolume=1,v._getMasterVolume=function(){return this._masterVolume},v.getVolume=re.deprecate(v._getMasterVolume,"Sound.getVolume"),v._setMasterVolume=function(c){if(Number(c)!=null&&(c=Math.max(0,Math.min(1,c)),v._masterVolume=c,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(c)))for(var m=this._instances,B=0,z=m.length;B<z;B++)m[B].setMasterVolume(c)},v.setVolume=re.deprecate(v._setMasterVolume,"Sound.setVolume"),v._masterMute=!1,v._getMute=function(){return this._masterMute},v.getMute=re.deprecate(v._getMute,"Sound.getMute"),v._setMute=function(c){if(c!=null&&(this._masterMute=c,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(c)))for(var m=this._instances,B=0,z=m.length;B<z;B++)m[B].setMasterMute(c)},v.setMute=re.deprecate(v._setMute,"Sound.setMute"),v._getCapabilities=function(){return v.activePlugin==null?null:v.activePlugin._capabilities},v.getCapabilities=re.deprecate(v._getCapabilities,"Sound.getCapabilities"),Object.defineProperties(v,{volume:{get:v._getMasterVolume,set:v._setMasterVolume},muted:{get:v._getMute,set:v._setMute},capabilities:{get:v._getCapabilities}}),v._pluginsRegistered=!1,v._lastID=0,v._instances=[],v._idHash={},v._preloadHash={},v._defaultPlayPropsHash={},v.addEventListener=null,v.removeEventListener=null,v.removeAllEventListeners=null,v.dispatchEvent=null,v.hasEventListener=null,v._listeners=null,re.EventDispatcher.initialize(v),v.getPreloadHandlers=function(){return{callback:re.proxy(v.initLoad,v),types:["sound"],extensions:v.SUPPORTED_EXTENSIONS}},v._handleLoadComplete=function(c){var m=c.target.getItem().src;if(v._preloadHash[m])for(var B=0,z=v._preloadHash[m].length;B<z;B++){var oe=v._preloadHash[m][B];v._preloadHash[m][B]=!0,v.hasEventListener("fileload")&&((c=new re.Event("fileload")).src=oe.src,c.id=oe.id,c.data=oe.data,c.sprite=oe.sprite,v.dispatchEvent(c))}},v._handleLoadError=function(c){var m=c.target.getItem().src;if(v._preloadHash[m])for(var B=0,z=v._preloadHash[m].length;B<z;B++){var oe=v._preloadHash[m][B];v._preloadHash[m][B]=!1,v.hasEventListener("fileerror")&&((c=new re.Event("fileerror")).src=oe.src,c.id=oe.id,c.data=oe.data,c.sprite=oe.sprite,v.dispatchEvent(c))}},v._registerPlugin=function(c){return!!c.isSupported()&&(v.activePlugin=new c,!0)},v.registerPlugins=function(c){v._pluginsRegistered=!0;for(var m=0,B=c.length;m<B;m++)if(v._registerPlugin(c[m]))return!0;return!1},v.initializeDefaultPlugins=function(){return v.activePlugin!=null||!v._pluginsRegistered&&!!v.registerPlugins([re.WebAudioPlugin,re.HTMLAudioPlugin])},v.isReady=function(){return v.activePlugin!=null},v.initLoad=function(c){return c.type=="video"||v._registerSound(c)},v._registerSound=function(c){if(!v.initializeDefaultPlugins()||(c.src instanceof Object?(Ce=v._parseSrc(c.src)).src=c.path+Ce.src:Ce=v._parsePath(c.src),Ce==null))return!1;c.src=Ce.src,c.type="sound";var m=c.data,B=null;if(m!=null&&(isNaN(m.channels)?isNaN(m)||(B=parseInt(m)):B=parseInt(m.channels),m.audioSprite))for(var z,oe=m.audioSprite.length;oe--;)z=m.audioSprite[oe],v._idHash[z.id]={src:c.src,startTime:parseInt(z.startTime),duration:parseInt(z.duration)},z.defaultPlayProps&&(v._defaultPlayPropsHash[z.id]=re.PlayPropsConfig.create(z.defaultPlayProps));c.id!=null&&(v._idHash[c.id]={src:c.src});var Ce=v.activePlugin.register(c);return a.create(c.src,B),m!=null&&isNaN(m)?c.data.channels=B||a.maxPerChannel():c.data=B||a.maxPerChannel(),Ce.type&&(c.type=Ce.type),c.defaultPlayProps&&(v._defaultPlayPropsHash[c.src]=re.PlayPropsConfig.create(c.defaultPlayProps)),Ce},v.registerSound=function(c,m,B,z,oe){if(oe={src:c,id:m,data:B,defaultPlayProps:oe},c instanceof Object&&c.src&&(z=m,oe=c),((oe=re.LoadItem.create(oe)).path=z)==null||oe.src instanceof Object||(oe.src=z+oe.src),z=v._registerSound(oe),!z)return!1;if(v._preloadHash[oe.src]||(v._preloadHash[oe.src]=[]),v._preloadHash[oe.src].push(oe),v._preloadHash[oe.src].length==1)z.on("complete",this._handleLoadComplete,this),z.on("error",this._handleLoadError,this),v.activePlugin.preload(z);else if(v._preloadHash[oe.src][0]==1)return!0;return oe},v.registerSounds=function(c,m){var B=[];c.path&&(m?m+=c.path:m=c.path,c=c.manifest);for(var z=0,oe=c.length;z<oe;z++)B[z]=re.Sound.registerSound(c[z].src,c[z].id,c[z].data,m,c[z].defaultPlayProps);return B},v.removeSound=function(c,m){if(v.activePlugin==null)return!1;var B,z;if(c instanceof Object&&c.src&&(c=c.src),(B=c instanceof Object?v._parseSrc(c):(c=v._getSrcById(c).src,v._parsePath(c)))==null)return!1;for(z in c=B.src,m!=null&&(c=m+c),v._idHash)v._idHash[z].src==c&&delete v._idHash[z];return a.removeSrc(c),delete v._preloadHash[c],v.activePlugin.removeSound(c),!0},v.removeSounds=function(c,m){var B=[];c.path&&(m?m+=c.path:m=c.path,c=c.manifest);for(var z=0,oe=c.length;z<oe;z++)B[z]=re.Sound.removeSound(c[z].src,m);return B},v.removeAllSounds=function(){v._idHash={},v._preloadHash={},a.removeAll(),v.activePlugin&&v.activePlugin.removeAllSounds()},v.loadComplete=function(c){if(!v.isReady())return!1;var m=v._parsePath(c);return c=(m?v._getSrcById(m.src):v._getSrcById(c)).src,v._preloadHash[c]!=null&&v._preloadHash[c][0]==1},v._parsePath=function(c){typeof c!="string"&&(c=c.toString());var m=c.match(v.FILE_PATTERN);if(m==null)return!1;for(var B=m[4],z=m[5],oe=v.capabilities,Ce=0;!oe[z];)if(z=v.alternateExtensions[Ce++],Ce>v.alternateExtensions.length)return null;return{name:B,src:c=c.replace("."+m[5],"."+z),extension:z}},v._parseSrc=function(c){var m,B={name:void 0,src:void 0,extension:void 0},z=v.capabilities;for(m in c)if(c.hasOwnProperty(m)&&z[m]){B.src=c[m],B.extension=m;break}if(!B.src)return!1;var oe=B.src.lastIndexOf("/");return B.name=oe!=-1?B.src.slice(oe+1):B.src,B},v.play=function(c,m){var B;return re.WebAudioPlugin&&re.WebAudioPlugin.context&&(console.log("audio context available"),(B=re.WebAudioPlugin.context).state!=="interrupted"&&B.state!=="suspended"||B.resume()),m=re.PlayPropsConfig.create(m),c=v.createInstance(c,m.startTime,m.duration),B&&(c.audioCtx=B),v._playInstance(c,m)||c._playFailed(),c},v.createInstance=function(c,m,B){if(!v.initializeDefaultPlugins())return new re.DefaultSoundInstance(c,m,B);var z=v._defaultPlayPropsHash[c];c=v._getSrcById(c);var oe=v._parsePath(c.src),Ce=null;return oe!=null&&oe.src!=null?(a.create(oe.src),m==null&&(m=c.startTime),Ce=v.activePlugin.create(oe.src,m,B||c.duration),(z=z||v._defaultPlayPropsHash[oe.src])&&Ce.applyPlayProps(z)):Ce=new re.DefaultSoundInstance(c,m,B),Ce.uniqueId=v._lastID++,Ce},v.stop=function(){for(var c=this._instances,m=c.length;m--;)c[m].stop()},v.setDefaultPlayProps=function(c,m){c=v._getSrcById(c),v._defaultPlayPropsHash[v._parsePath(c.src).src]=re.PlayPropsConfig.create(m)},v.getDefaultPlayProps=function(c){return c=v._getSrcById(c),v._defaultPlayPropsHash[v._parsePath(c.src).src]},v._playInstance=function(c,m){var B=v._defaultPlayPropsHash[c.src]||{};if(m.interrupt==null&&(m.interrupt=B.interrupt||v.defaultInterruptBehavior),m.delay==null&&(m.delay=B.delay||0),m.offset==null&&(m.offset=c.position),m.loop==null&&(m.loop=c.loop),m.volume==null&&(m.volume=c.volume),m.pan==null&&(m.pan=c.pan),m.delay==0){if(!v._beginPlaying(c,m))return!1}else B=setTimeout(function(){v._beginPlaying(c,m)},m.delay),c.delayTimeoutId=B;return this._instances.push(c),!0},v._beginPlaying=function(c,m){return a.add(c,m.interrupt)?c._beginPlaying(m)?!0:(c=re.indexOf(this._instances,c),-1<c&&this._instances.splice(c,1),!1):!1},v._getSrcById=function(c){return v._idHash[c]||{src:c}},v._playFinished=function(c){a.remove(c),c=re.indexOf(this._instances,c),-1<c&&this._instances.splice(c,1)},re.Sound=e,a.channels={},a.create=function(c,m){return a.get(c)==null&&(a.channels[c]=new a(c,m),!0)},a.removeSrc=function(c){var m=a.get(c);return m!=null&&(m._removeAll(),delete a.channels[c],!0)},a.removeAll=function(){for(var c in a.channels)a.channels[c]._removeAll();a.channels={}},a.add=function(c,m){var B=a.get(c.src);return B!=null&&B._add(c,m)},a.remove=function(c){var m=a.get(c.src);return m!=null&&(m._remove(c),!0)},a.maxPerChannel=function(){return u.maxDefault},a.get=function(c){return a.channels[c]};var u=a.prototype;u.constructor=a,u.src=null,u.max=null,u.maxDefault=100,u.length=0,u.init=function(c,m){this.src=c,this.max=m||this.maxDefault,this.max==-1&&(this.max=this.maxDefault),this._instances=[]},u._get=function(c){return this._instances[c]},u._add=function(c,m){return!!this._getSlot(m,c)&&(this._instances.push(c),this.length++,!0)},u._remove=function(c){return c=re.indexOf(this._instances,c),c!=-1&&(this._instances.splice(c,1),this.length--,!0)},u._removeAll=function(){for(var c=this.length-1;0<=c;c--)this._instances[c].stop()},u._getSlot=function(c,m){var B,z;if(c!=e.INTERRUPT_NONE&&(z=this._get(0))==null)return!0;for(var oe=0,Ce=this.max;oe<Ce;oe++){if((B=this._get(oe))==null)return!0;if(B.playState==e.PLAY_FINISHED||B.playState==e.PLAY_INTERRUPTED||B.playState==e.PLAY_FAILED){z=B;break}c!=e.INTERRUPT_NONE&&(c==e.INTERRUPT_EARLY&&B.position<z.position||c==e.INTERRUPT_LATE&&B.position>z.position)&&(z=B)}return z!=null&&(z._interrupt(),this._remove(z),!0)},u.toString=function(){return"[Sound SoundChannel]"}}(),function(){"use strict";function e(a,u,c,m){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this._getVolume,set:this._setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this._getPan,set:this._setPan}),this._startTime=Math.max(0,u||0),Object.defineProperty(this,"startTime",{get:this._getStartTime,set:this._setStartTime}),this._duration=Math.max(0,c||0),Object.defineProperty(this,"duration",{get:this._getDuration,set:this._setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this._getPlaybackResource,set:this._setPlaybackResource}),m!==!1&&m!==!0&&this._setPlaybackResource(m),this._position=0,Object.defineProperty(this,"position",{get:this._getPosition,set:this._setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this._getLoop,set:this._setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this._getMuted,set:this._setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this._getPaused,set:this._setPaused})}var v=re.extend(e,re.EventDispatcher);v.play=function(a){return a=re.PlayPropsConfig.create(a),this.playState==re.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this._setPaused(!1))):(this._cleanUp(),re.Sound._playInstance(this,a),this)},v.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=re.Sound.PLAY_FINISHED,this},v.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},v.applyPlayProps=function(a){return a.offset!=null&&this._setPosition(a.offset),a.loop!=null&&this._setLoop(a.loop),a.volume!=null&&this._setVolume(a.volume),a.pan!=null&&this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this},v.toString=function(){return"[AbstractSoundInstance]"},v._getPaused=function(){return this._paused},v._setPaused=function(a){if(!(a!==!0&&a!==!1||this._paused==a||a==1&&this.playState!=re.Sound.PLAY_SUCCEEDED))return(this._paused=a)?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},v._setVolume=function(a){return a==this._volume||(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume()),this},v._getVolume=function(){return this._volume},v._setMuted=function(a){if(a===!0||a===!1)return this._muted=a,this._updateVolume(),this},v._getMuted=function(){return this._muted},v._setPan=function(a){return a==this._pan||(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan()),this},v._getPan=function(){return this._pan},v._getPosition=function(){return this._paused||this.playState!=re.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},v._setPosition=function(a){return this._position=Math.max(0,a),this.playState==re.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},v._getStartTime=function(){return this._startTime},v._setStartTime=function(a){return a==this._startTime||(this._startTime=Math.max(0,a||0),this._updateStartTime()),this},v._getDuration=function(){return this._duration},v._setDuration=function(a){return a==this._duration||(this._duration=Math.max(0,a||0),this._updateDuration()),this},v._setPlaybackResource=function(a){return this._playbackResource=a,this._duration==0&&this._playbackResource&&this._setDurationFromSource(),this},v._getPlaybackResource=function(){return this._playbackResource},v._getLoop=function(){return this._loop},v._setLoop=function(a){this._playbackResource!=null&&(this._loop!=0&&a==0?this._removeLooping(a):this._loop==0&&a!=0&&this._addLooping(a)),this._loop=a},v._sendEvent=function(a){a=new re.Event(a),this.dispatchEvent(a)},v._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,re.Sound._playFinished(this)},v._interrupt=function(){this._cleanUp(),this.playState=re.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},v._beginPlaying=function(a){return this._setPosition(a.offset),this._setLoop(a.loop),this._setVolume(a.volume),this._setPan(a.pan),a.startTime!=null&&(this._setStartTime(a.startTime),this._setDuration(a.duration)),this._playbackResource!=null&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=re.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},v._playFailed=function(){this._cleanUp(),this.playState=re.Sound.PLAY_FAILED,this._sendEvent("failed")},v._handleSoundComplete=function(a){if((this._position=0)!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=re.Sound.PLAY_FINISHED,this._sendEvent("complete")},v._handleSoundReady=function(){},v._updateVolume=function(){},v._updatePan=function(){},v._updateStartTime=function(){},v._updateDuration=function(){},v._setDurationFromSource=function(){},v._calculateCurrentPosition=function(){},v._updatePosition=function(){},v._removeLooping=function(a){},v._addLooping=function(a){},v._pause=function(){},v._resume=function(){},v._handleStop=function(){},v._handleCleanUp=function(){},v._handleLoop=function(){},re.AbstractSoundInstance=re.promote(e,"EventDispatcher"),re.DefaultSoundInstance=re.AbstractSoundInstance}(),function(){"use strict";function e(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass}var v=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},v.register=function(a){var u=this._loaders[a.src];return u&&!u.canceled?this._loaders[a.src]:(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],(u=new this._loaderClass(a)).on("complete",this._handlePreloadComplete,this),this._loaders[a.src]=u)},v.preload=function(a){a.on("error",this._handlePreloadError,this),a.load()},v.isPreloadStarted=function(a){return this._audioSources[a]!=null},v.isPreloadComplete=function(a){return!(this._audioSources[a]==null||this._audioSources[a]==1)},v.removeSound=function(a){if(this._soundInstances[a]){for(var u=this._soundInstances[a].length;u--;)this._soundInstances[a][u].destroy();delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},v.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},v.create=function(a,u,c){return this.isPreloadStarted(a)||this.preload(this.register(a)),c=new this._soundInstanceClass(a,u,c,this._audioSources[a]),this._soundInstances[a]&&this._soundInstances[a].push(c),c.setMasterVolume&&c.setMasterVolume(re.Sound.volume),c.setMasterMute&&c.setMasterMute(re.Sound.muted),c},v.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},v.getVolume=function(){return this._volume},v.setMute=function(a){return this._updateVolume(),!0},v.toString=function(){return"[AbstractPlugin]"},v._handlePreloadComplete=function(a){var u=a.target.getItem().src;this._audioSources[u]=a.result;for(var c=0,m=this._soundInstances[u].length;c<m;c++)this._soundInstances[u][c].setPlaybackResource(this._audioSources[u]),this._soundInstances[u]=null},v._handlePreloadError=function(a){},v._updateVolume=function(){},re.AbstractPlugin=e}(),function(){"use strict";function e(a){this.AbstractLoader_constructor(a,!0,re.Types.SOUND)}var v=re.extend(e,re.AbstractLoader);e.context=null,v.toString=function(){return"[WebAudioLoader]"},v._createRequest=function(){this._request=new re.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},v._sendComplete=function(a){e.context.decodeAudioData(this._rawResult,re.proxy(this._handleAudioDecoded,this),re.proxy(this._sendError,this))},v._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},re.WebAudioLoader=re.promote(e,"AbstractLoader")}(),function(){"use strict";function e(u,c,m,B){this.AbstractSoundInstance_constructor(u,c,m,B),this.gainNode=a.context.createGain(),this.panNode=a.context.createPanner(),this.panNode.panningModel=a._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=re.proxy(this._handleSoundComplete,this)}var v=re.extend(e,re.AbstractSoundInstance),a=e;a.context=null,a._scratchBuffer=null,a.destinationNode=null,a._panningModel="equalpower",v.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},v.toString=function(){return"[WebAudioSoundInstance]"},v._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},v._removeLooping=function(u){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},v._addLooping=function(u){this.playState==re.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},v._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},v._handleCleanUp=function(){this.sourceNode&&this.playState==re.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},v._cleanUpAudioNode=function(u){if(u){if(u.stop(0),u.disconnect(0),re.BrowserDetect.isIOS)try{u.buffer=a._scratchBuffer}catch(c){}u=null}return u},v._handleSoundReady=function(u){this.gainNode.connect(a.destinationNode);var c=.001*this._duration,m=Math.min(.001*Math.max(0,this._position),c);this.sourceNode=this._createAndPlayAudioNode(a.context.currentTime-c,m),this._playbackStartTime=this.sourceNode.startTime-m,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(c-m)),this._loop!=0&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},v._createAndPlayAudioNode=function(u,c){var m=a.context.createBufferSource();m.buffer=this.playbackResource,m.connect(this.panNode);var B=.001*this._duration;return m.startTime=u+B,m.start(m.startTime,c+.001*this._startTime,B-c),m},v._pause=function(){this._position=1e3*(a.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},v._resume=function(){this._handleSoundReady()},v._updateVolume=function(){var u=this._muted?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},v._calculateCurrentPosition=function(){return 1e3*(a.context.currentTime-this._playbackStartTime)},v._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},v._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},v._updateDuration=function(){this.playState==re.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},re.WebAudioSoundInstance=re.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=a._panningModel,this.context=a.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),re.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=a._capabilities,this._loaderClass=re.WebAudioLoader,this._soundInstanceClass=re.WebAudioSoundInstance,this._addPropsToClasses()}var v=re.extend(e,re.AbstractPlugin),a=e;a._capabilities=null,a._panningModel="equalpower",a.context=null,a._scratchBuffer=null,a._unlocked=!1,a.DEFAULT_SAMPLE_RATE=44100,a.isSupported=function(){var u=re.BrowserDetect.isIOS||re.BrowserDetect.isAndroid||re.BrowserDetect.isBlackberry;return!(location.protocol=="file:"&&!u&&!this._isFileXHRSupported())&&(a._generateCapabilities(),a.context!=null)},a.playEmptySound=function(){var u;a.context!=null&&((u=a.context.createBufferSource()).buffer=a._scratchBuffer,u.connect(a.context.destination),u.start(0,0,0))},a._isFileXHRSupported=function(){return document.location.host},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null||a.context==null&&(a.context=a._createAudioContext(),a.context==null))return null;a._scratchBuffer==null&&(a._scratchBuffer=a.context.createBuffer(1,1,22050)),a._compatibilitySetUp(),"ontouchstart"in window&&a.context.state!="running"&&(a._unlock(),document.addEventListener("mousedown",a._unlock,!0),document.addEventListener("touchstart",a._unlock,!0),document.addEventListener("touchend",a._unlock,!0)),a._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=re.Sound.SUPPORTED_EXTENSIONS,m=re.Sound.EXTENSION_MAP,B=0,z=c.length;B<z;B++){var oe=c[B],Ce=m[oe]||oe;a._capabilities[oe]=u.canPlayType("audio/"+oe)!="no"&&u.canPlayType("audio/"+oe)!=""||u.canPlayType("audio/"+Ce)!="no"&&u.canPlayType("audio/"+Ce)!=""}a.context.destination.numberOfChannels<2&&(a._capabilities.panning=!1)}},a._createAudioContext=function(){var u=window.AudioContext||window.webkitAudioContext;if(u==null)return null;var c,m,B=new u;return console.warn("The AudioContext is ready"),/(iPhone|iPad)/i.test(navigator.userAgent)&&B.sampleRate!==a.DEFAULT_SAMPLE_RATE&&(c=B.createBuffer(1,1,a.DEFAULT_SAMPLE_RATE),(m=B.createBufferSource()).buffer=c,m.connect(B.destination),m.start(0),m.disconnect(),B.close(),B=new u),B},a._compatibilitySetUp=function(){var u;a._panningModel="equalpower",a.context.createGain||(a.context.createGain=a.context.createGainNode,(u=a.context.createBufferSource()).__proto__.start=u.__proto__.noteGrainOn,u.__proto__.stop=u.__proto__.noteOff,a._panningModel=0)},a._unlock=function(){a._unlocked||(a.playEmptySound(),a.context.state=="running"&&(document.removeEventListener("mousedown",a._unlock,!0),document.removeEventListener("touchend",a._unlock,!0),document.removeEventListener("touchstart",a._unlock,!0),a._unlocked=!0))},v.toString=function(){return"[WebAudioPlugin]"},v._addPropsToClasses=function(){var u=this._soundInstanceClass;u.context=this.context,u._scratchBuffer=a._scratchBuffer,u.destinationNode=this.gainNode,u._panningModel=this._panningModel,this._loaderClass.context=this.context},v._updateVolume=function(){var u=re.Sound._masterMute?0:this._volume;u!=this.gainNode.gain.value&&(this.gainNode.gain.value=u)},re.WebAudioPlugin=re.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}var v=e;function a(c){this._tags=[]}v._tags={},v._tagPool=new a,v._tagUsed={},v.get=function(c){var m=v._tags[c];return m==null?(m=v._tags[c]=v._tagPool.get()).src=c:v._tagUsed[c]?(m=v._tagPool.get()).src=c:v._tagUsed[c]=!0,m},v.set=function(c,m){m==v._tags[c]?v._tagUsed[c]=!1:v._tagPool.set(m)},v.remove=function(c){var m=v._tags[c];return m!=null&&(v._tagPool.set(m),delete v._tags[c],delete v._tagUsed[c],!0)},v.getDuration=function(c){return c=v._tags[c],c!=null&&c.duration?1e3*c.duration:0},re.HTMLAudioTagPool=e;var u=a.prototype;u.constructor=a,u.get=function(){var c=this._tags.length==0?this._createTag():this._tags.pop();return c.parentNode==null&&document.body.appendChild(c),c},u.set=function(c){re.indexOf(this._tags,c)==-1&&(this._tags.src=null,this._tags.push(c))},u.toString=function(){return"[TagPool]"},u._createTag=function(){var c=document.createElement("audio");return c.autoplay=!1,c.preload="none",c}}(),function(){"use strict";function e(a,u,c,m){this.AbstractSoundInstance_constructor(a,u,c,m),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=re.proxy(this._handleSoundComplete,this),this._readyHandler=re.proxy(this._handleTagReady,this),this._stalledHandler=re.proxy(this._playFailed,this),this._audioSpriteEndHandler=re.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=re.proxy(this._handleSoundComplete,this),c?this._audioSpriteStopTime=.001*(u+c):this._duration=re.HTMLAudioTagPool.getDuration(this.src)}var v=re.extend(e,re.AbstractSoundInstance);v.setMasterVolume=function(a){this._updateVolume()},v.setMasterMute=function(a){this._updateVolume()},v.toString=function(){return"[HTMLAudioSoundInstance]"},v._removeLooping=function(){this._playbackResource!=null&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},v._addLooping=function(){this._playbackResource==null||this._audioSpriteStopTime||(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},v._handleCleanUp=function(){var a=this._playbackResource;if(a!=null){a.pause(),a.loop=!1,a.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(u){}re.HTMLAudioTagPool.set(this.src,a),this._playbackResource=null}},v._beginPlaying=function(a){return this._playbackResource=re.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(a)},v._handleSoundReady=function(a){if(this._playbackResource.readyState!==4){var u=this._playbackResource;return u.addEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),u.addEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),u.preload="auto",void u.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._loop!=0&&(this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},v._handleTagReady=function(a){this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},v._pause=function(){this._playbackResource.pause()},v._resume=function(){this._playbackResource.play()},v._updateVolume=function(){var a;this._playbackResource==null||(a=this._muted||re.Sound._masterMute?0:this._volume*re.Sound._masterVolume)!=this._playbackResource.volume&&(this._playbackResource.volume=a)},v._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},v._updatePosition=function(){this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},v._handleSetPositionSeek=function(a){this._playbackResource!=null&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},v._handleAudioSpriteLoop=function(a){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),this._loop==0?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},v._handleLoop=function(a){this._loop==0&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},v._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==re.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},v._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==re.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(re.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(re.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},v._setDurationFromSource=function(){this._duration=re.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},re.HTMLAudioSoundInstance=re.promote(e,"AbstractSoundInstance")}(),function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._capabilities=a._capabilities,this._loaderClass=re.SoundLoader,this._soundInstanceClass=re.HTMLAudioSoundInstance}var v=re.extend(e,re.AbstractPlugin),a=e;a.MAX_INSTANCES=30,a._AUDIO_READY="canplaythrough",a._AUDIO_ENDED="ended",a._AUDIO_SEEKED="seeked",a._AUDIO_STALLED="stalled",a._TIME_UPDATE="timeupdate",a._capabilities=null,a.isSupported=function(){return a._generateCapabilities(),a._capabilities!=null},a._generateCapabilities=function(){if(a._capabilities==null){var u=document.createElement("audio");if(u.canPlayType==null)return null;a._capabilities={panning:!1,volume:!0,tracks:-1};for(var c=re.Sound.SUPPORTED_EXTENSIONS,m=re.Sound.EXTENSION_MAP,B=0,z=c.length;B<z;B++){var oe=c[B],Ce=m[oe]||oe;a._capabilities[oe]=u.canPlayType("audio/"+oe)!="no"&&u.canPlayType("audio/"+oe)!=""||u.canPlayType("audio/"+Ce)!="no"&&u.canPlayType("audio/"+Ce)!=""}}},v.register=function(m){var c=re.HTMLAudioTagPool.get(m.src),m=this.AbstractPlugin_register(m);return m.setTag(c),m},v.removeSound=function(u){this.AbstractPlugin_removeSound(u),re.HTMLAudioTagPool.remove(u)},v.create=function(u,c,m){return m=this.AbstractPlugin_create(u,c,m),m.playbackResource=null,m},v.toString=function(){return"[HTMLAudioPlugin]"},v.setVolume=v.getVolume=v.setMute=null,re.HTMLAudioPlugin=re.promote(e,"AbstractPlugin")}(),function(){"use strict";function e(a){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,this._status=-1,this._lastTick=0,a&&(this.useTicks=!!a.useTicks,this.ignoreGlobalPause=!!a.ignoreGlobalPause,this.loop=a.loop===!0?-1:a.loop||0,this.reversed=!!a.reversed,this.bounce=!!a.bounce,this.timeScale=a.timeScale||1,a.onChange&&this.addEventListener("change",a.onChange),a.onComplete&&this.addEventListener("complete",a.onComplete))}var v=re.extend(e,re.EventDispatcher);v._setPaused=function(a){return re.Tween._register(this,a),this},v.setPaused=re.deprecate(v._setPaused,"AbstractTween.setPaused"),v._getPaused=function(){return this._paused},v.getPaused=re.deprecate(v._getPaused,"AbstactTween.getPaused"),v._getCurrentLabel=function(a){var u=this.getLabels();a==null&&(a=this.position);for(var c=0,m=u.length;c<m&&!(a<u[c].position);c++);return c===0?null:u[c-1].label},v.getCurrentLabel=re.deprecate(v._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(v,{paused:{set:v._setPaused,get:v._getPaused},currentLabel:{get:v._getCurrentLabel}})}catch(a){}v.advance=function(a,u){this.setPosition(this.rawPosition+a*this.timeScale,u)},v.setPosition=function(a,u,c,m){var B=this.duration,z=this.loop,oe=this.rawPosition,Ce=0,be=0,t=!1;if(a<0&&(a=0),B===0){if(t=!0,oe!==-1)return t}else{if(be=a-(Ce=a/B|0)*B,(t=z!==-1&&z*B+B<=a)&&(a=(be=B)*(Ce=z)+B),a===oe)return t;!this.reversed!=!(this.bounce&&Ce%2)&&(be=B-be)}this.position=be,this.rawPosition=a,this._updatePosition(c,t),t&&(this.paused=!0),m&&m(this),u||this._runActions(oe,a,c,!c&&oe===-1),this.dispatchEvent("change"),t&&this.dispatchEvent("complete")},v.calculatePosition=function(a){var u=this.duration,c=this.loop,m=0,B=0;return u===0?0:(c!==-1&&c*u+u<=a?(B=u,m=c):B=a<0?0:a-(m=a/u|0)*u,!this.reversed!=!(this.bounce&&m%2)?u-B:B)},v.getLabels=function(){var a=this._labelList;if(!a){a=this._labelList=[];var u,c=this._labels;for(u in c)a.push({label:u,position:c[u]});a.sort(function(m,B){return m.position-B.position})}return a},v.setLabels=function(a){this._labels=a,this._labelList=null},v.addLabel=function(a,u){this._labels||(this._labels={}),this._labels[a]=u;var c=this._labelList;if(c){for(var m=0,B=c.length;m<B&&!(u<c[m].position);m++);c.splice(m,0,{label:a,position:u})}},v.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},v.gotoAndStop=function(a){this.paused=!0,this._goto(a)},v.resolve=function(a){var u=Number(a);return isNaN(u)&&(u=this._labels&&this._labels[a]),u},v.toString=function(){return"[AbstractTween]"},v.clone=function(){throw"AbstractTween can not be cloned."},v._init=function(a){a&&a.paused||(this.paused=!1),a&&a.position!=null&&this.setPosition(a.position)},v._updatePosition=function(a,u){},v._goto=function(a){a=this.resolve(a),a!=null&&this.setPosition(a,!1,!0)},v._runActions=function(a,u,c,m){if(this._actionHead||this.tweens){var B,z,oe,Ce,be=this.duration,t=this.reversed,r=this.bounce,i=this.loop;if(be===0?(B=z=oe=Ce=0,t=r=!1):(oe=a-(B=a/be|0)*be,Ce=u-(z=u/be|0)*be),i!==-1&&(i<z&&(Ce=be,z=i),i<B&&(oe=be,B=i)),c)return this._runActionsRange(Ce,Ce,c,m);if(B!==z||oe!==Ce||c||m){B===-1&&(B=oe=0);var o=a<=u,l=B;do{var f=!t!=!(r&&l%2),d=l===B?oe:o?0:be,p=l===z?Ce:o?be:0;if(f&&(d=be-d,p=be-p),(!r||l===B||d!==p)&&this._runActionsRange(d,p,c,m||l!==B&&!r))return!0}while(m=!1,o&&++l<=z||!o&&--l>=z)}}},v._runActionsRange=function(a,u,c,m){},re.AbstractTween=re.promote(e,"EventDispatcher")}(),function(){"use strict";function e(c,m){this.AbstractTween_constructor(m),this.pluginData=null,this.target=c,this.passive=!1,this._stepHead=new a(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,m&&(this.pluginData=m.pluginData,m.override&&e.removeTweens(c)),this.pluginData||(this.pluginData={}),this._init(m)}var v=re.extend(e,re.AbstractTween);function a(c,m,B,z,oe,Ce){this.next=null,this.prev=c,this.t=m,this.d=B,this.props=z,this.ease=oe,this.passive=Ce,this.index=c?c.index+1:0}function u(c,m,B,z,oe){this.next=null,this.prev=c,this.t=m,this.d=0,this.scope=B,this.funct=z,this.params=oe}e.IGNORE={},e._tweens=[],e._plugins=null,e._tweenHead=null,e._tweenTail=null,e._inTick=0,e.get=function(c,m){return new e(c,m)},e.tick=function(c,m){for(var B=e._tweenHead,z=e._inTick=Date.now();B;){var oe=B._next,Ce=B._status;B._lastTick=z,Ce===1?B._status=0:Ce===-1?e._delist(B):m&&!B.ignoreGlobalPause||B._paused||B.advance(B.useTicks?1:c),B=oe}e._inTick=0},e.handleEvent=function(c){c.type==="tick"&&this.tick(c.delta,c.paused)},e.removeTweens=function(c){if(c.tweenjs_count){for(var m=e._tweenHead;m;){var B=m._next;m.target===c&&e._register(m,!0),m=B}c.tweenjs_count=0}},e.removeAllTweens=function(){for(var c=e._tweenHead;c;){var m=c._next;c._paused=!0,c.target&&(c.target.tweenjs_count=0),c._next=c._prev=null,c=m}e._tweenHead=e._tweenTail=null},e.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!e._tweenHead},e._installPlugin=function(c){for(var m=c.priority=c.priority||0,B=e._plugins=e._plugins||[],z=0,oe=B.length;z<oe&&!(m<B[z].priority);z++);B.splice(z,0,c)},e._register=function(c,m){var B,z=c.target;!m&&c._paused?(z&&(z.tweenjs_count=z.tweenjs_count?z.tweenjs_count+1:1),(B=e._tweenTail)?(e._tweenTail=B._next=c)._prev=B:e._tweenHead=e._tweenTail=c,c._status=e._inTick?1:0,!e._inited&&re.Ticker&&(re.Ticker.addEventListener("tick",e),e._inited=!0)):m&&!c._paused&&(z&&z.tweenjs_count--,e._inTick&&c._lastTick!==e._inTick||e._delist(c),c._status=-1),c._paused=m},e._delist=function(c){var m=c._next,B=c._prev;m?m._prev=B:e._tweenTail=B,B?B._next=m:e._tweenHead=m,c._next=c._prev=null},v.wait=function(c,m){return 0<c&&this._addStep(+c,this._stepTail.props,null,m),this},v.to=function(c,m,B){return(m==null||m<0)&&(m=0),B=this._addStep(+m,null,B),this._appendProps(c,B),this},v.label=function(c){return this.addLabel(c,this.duration),this},v.call=function(c,m,B){return this._addAction(B||this.target,c,m||[this])},v.set=function(c,m){return this._addAction(m||this.target,this._set,[c])},v.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])},v.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])},v.w=v.wait,v.t=v.to,v.c=v.call,v.s=v.set,v.toString=function(){return"[Tween]"},v.clone=function(){throw"Tween can not be cloned."},v._addPlugin=function(c){var m=this._pluginIds||(this._pluginIds={}),B=c.ID;if(B&&!m[B]){m[B]=!0;for(var z=this._plugins||(this._plugins=[]),oe=c.priority||0,Ce=0,be=z.length;Ce<be;Ce++)if(oe<z[Ce].priority)return void z.splice(Ce,0,c);z.push(c)}},v._updatePosition=function(c,m){var B=this._stepHead.next,z=this.position,oe=this.duration;if(this.target&&B){for(var Ce=B.next;Ce&&Ce.t<=z;)Ce=(B=B.next).next;oe=m?oe===0?1:z/oe:(z-B.t)/B.d,this._updateTargetProps(B,oe,m)}this._stepPosition=B?z-B.t:0},v._updateTargetProps=function(c,m,B){if(!(this.passive=!!c.passive)){var z,oe,Ce,be,t=c.prev.props,r=c.props;(be=c.ease)&&(m=be(m,0,1,1));var i=this._plugins;e:for(var o in t){if(z=(oe=t[o])!==(Ce=r[o])&&typeof oe=="number"?oe+(Ce-oe)*m:1<=m?Ce:oe,i)for(var l=0,f=i.length;l<f;l++){var d=i[l].change(this,c,o,z,m,B);if(d===e.IGNORE)continue e;d!==void 0&&(z=d)}this.target[o]=z}}},v._runActionsRange=function(c,m,B,z){var oe=m<c,Ce=oe?this._actionTail:this._actionHead,be=m,t=c;oe&&(be=c,t=m);for(var r=this.position;Ce;){var i=Ce.t;if((i===m||t<i&&i<be||z&&i===c)&&(Ce.funct.apply(Ce.scope,Ce.params),r!==this.position))return!0;Ce=oe?Ce.prev:Ce.next}},v._appendProps=function(c,m,B){var z,oe,Ce,be,t=this._stepHead.props,r=this.target,i=e._plugins,o=m.prev,l=o.props,f=m.props||(m.props=this._cloneProps(l)),d={};for(z in c)if(c.hasOwnProperty(z)&&(d[z]=f[z]=c[z],t[z]===void 0)){if(be=void 0,i){for(oe=i.length-1;0<=oe;oe--)if((Ce=i[oe].init(this,z,be))!==void 0&&(be=Ce),be===e.IGNORE){delete f[z],delete d[z];break}}be!==e.IGNORE&&(be===void 0&&(be=r[z]),l[z]=be===void 0?null:be)}for(z in d){Ce=c[z];for(var p,w=o;(p=w)&&(w=p.prev);)if(w.props!==p.props){if(w.props[z]!==void 0)break;w.props[z]=l[z]}}if(B!==!1&&(i=this._plugins))for(oe=i.length-1;0<=oe;oe--)i[oe].step(this,m,d);(B=this._injected)&&(this._injected=null,this._appendProps(B,m,!1)),this.step=m},v._injectProp=function(c,m){(this._injected||(this._injected={}))[c]=m},v._addStep=function(c,m,B,z){return z=new a(this._stepTail,this.duration,c,m,B,z||!1),this.duration+=c,this._stepTail=this._stepTail.next=z},v._addAction=function(c,m,B){return B=new u(this._actionTail,this.duration,c,m,B),this._actionTail?this._actionTail.next=B:this._actionHead=B,this._actionTail=B,this},v._set=function(c){for(var m in c)this[m]=c[m]},v._cloneProps=function(c){var m,B={};for(m in c)B[m]=c[m];return B},re.Tween=re.promote(e,"AbstractTween")}(),function(){"use strict";function e(a){var u,c;a instanceof Array||a==null&&1<arguments.length?(u=a,c=arguments[1],a=arguments[2]):a&&(u=a.tweens,c=a.labels),this.AbstractTween_constructor(a),this.tweens=[],u&&this.addTween.apply(this,u),this.setLabels(c),this._init(a)}var v=re.extend(e,re.AbstractTween);v.addTween=function(a){a._parent&&a._parent.removeTween(a);var u=arguments.length;if(1<u){for(var c=0;c<u;c++)this.addTween(arguments[c]);return arguments[u-1]}if(u===0)return null;this.tweens.push(a),a._parent=this,a.paused=!0;var m=a.duration;return 0<a.loop&&(m*=a.loop+1),m>this.duration&&(this.duration=m),0<=this.rawPosition&&a.setPosition(this.rawPosition),a},v.removeTween=function(a){var u=arguments.length;if(1<u){for(var c=!0,m=0;m<u;m++)c=c&&this.removeTween(arguments[m]);return c}if(u===0)return!0;for(var B=this.tweens,m=B.length;m--;)if(B[m]===a)return B.splice(m,1),a._parent=null,a.duration>=this.duration&&this.updateDuration(),!0;return!1},v.updateDuration=function(){for(var a=this.duration=0,u=this.tweens.length;a<u;a++){var c=this.tweens[a],m=c.duration;0<c.loop&&(m*=c.loop+1),m>this.duration&&(this.duration=m)}},v.toString=function(){return"[Timeline]"},v.clone=function(){throw"Timeline can not be cloned."},v._updatePosition=function(a,u){for(var c=this.position,m=0,B=this.tweens.length;m<B;m++)this.tweens[m].setPosition(c,!0,a)},v._runActionsRange=function(a,u,c,m){for(var B=this.position,z=0,oe=this.tweens.length;z<oe;z++)if(this.tweens[z]._runActions(a,u,c,m),B!==this.position)return!0},re.Timeline=re.promote(e,"AbstractTween")}(),function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.none=e.linear=function(v){return v},e.get=function(v){return v<-1?v=-1:1<v&&(v=1),function(a){return v==0?a:v<0?a*(a*-v+1+v):a*((2-a)*v+(1-v))}},e.getPowIn=function(v){return function(a){return Math.pow(a,v)}},e.getPowOut=function(v){return function(a){return 1-Math.pow(1-a,v)}},e.getPowInOut=function(v){return function(a){return(a*=2)<1?.5*Math.pow(a,v):1-.5*Math.abs(Math.pow(2-a,v))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(v){return 1-Math.cos(v*Math.PI/2)},e.sineOut=function(v){return Math.sin(v*Math.PI/2)},e.sineInOut=function(v){return-.5*(Math.cos(Math.PI*v)-1)},e.backIn=(e.getBackIn=function(v){return function(a){return a*a*((v+1)*a-v)}})(1.7),e.backOut=(e.getBackOut=function(v){return function(a){return--a*a*((v+1)*a+v)+1}})(1.7),e.backInOut=(e.getBackInOut=function(v){return v*=1.525,function(a){return(a*=2)<1?a*a*((v+1)*a-v)*.5:.5*((a-=2)*a*((v+1)*a+v)+2)}})(1.7),e.circIn=function(v){return-(Math.sqrt(1-v*v)-1)},e.circOut=function(v){return Math.sqrt(1- --v*v)},e.circInOut=function(v){return(v*=2)<1?-.5*(Math.sqrt(1-v*v)-1):.5*(Math.sqrt(1-(v-=2)*v)+1)},e.bounceIn=function(v){return 1-e.bounceOut(1-v)},e.bounceOut=function(v){return v<1/2.75?7.5625*v*v:v<2/2.75?7.5625*(v-=1.5/2.75)*v+.75:v<2.5/2.75?7.5625*(v-=2.25/2.75)*v+.9375:7.5625*(v-=2.625/2.75)*v+.984375},e.bounceInOut=function(v){return v<.5?.5*e.bounceIn(2*v):.5*e.bounceOut(2*v-1)+.5},e.elasticIn=(e.getElasticIn=function(v,a){var u=2*Math.PI;return function(c){if(c==0||c==1)return c;var m=a/u*Math.asin(1/v);return-(v*Math.pow(2,10*--c)*Math.sin((c-m)*u/a))}})(1,.3),e.elasticOut=(e.getElasticOut=function(v,a){var u=2*Math.PI;return function(c){if(c==0||c==1)return c;var m=a/u*Math.asin(1/v);return v*Math.pow(2,-10*c)*Math.sin((c-m)*u/a)+1}})(1,.3),e.elasticInOut=(e.getElasticInOut=function(v,a){var u=2*Math.PI;return function(c){var m=a/u*Math.asin(1/v);return(c*=2)<1?v*Math.pow(2,10*--c)*Math.sin((c-m)*u/a)*-.5:v*Math.pow(2,-10*--c)*Math.sin((c-m)*u/a)*.5+1}})(1,.3*1.5),re.Ease=e}(),function(){"use strict";function e(){throw"MotionGuidePlugin cannot be instantiated."}var v=e;v.priority=0,v.ID="MotionGuide",v.install=function(){return re.Tween._installPlugin(e),re.Tween.IGNORE},v.init=function(a,u,c){u=="guide"&&a._addPlugin(v)},v.step=function(a,u,c){for(var m in c)if(m==="guide"){var B=u.props.guide,z=v._solveGuideData(c.guide,B);B.valid=!z;var oe=B.endData;if(a._injectProp("x",oe.x),a._injectProp("y",oe.y),z||!B.orient)break;if(z=u.prev.props.rotation===void 0?a.target.rotation||0:u.prev.props.rotation,B.startOffsetRot=z-B.startData.rotation,B.orient=="fixed")B.endAbsRot=oe.rotation+B.startOffsetRot,B.deltaRotation=0;else{var oe=c.rotation===void 0?a.target.rotation||0:c.rotation,Ce=oe-B.endData.rotation-B.startOffsetRot,be=Ce%360;switch(B.endAbsRot=oe,B.orient){case"auto":B.deltaRotation=Ce;break;case"cw":B.deltaRotation=(360+be)%360+360*Math.abs(Ce/360|0);break;case"ccw":B.deltaRotation=(be-360)%360+-360*Math.abs(Ce/360|0)}}a._injectProp("rotation",B.endAbsRot)}},v.change=function(a,u,c,m,B,z){var oe=u.props.guide;if(oe&&u.props!==u.prev.props&&oe!==u.prev.props.guide)return c==="guide"&&!oe.valid||c=="x"||c=="y"||c==="rotation"&&oe.orient?re.Tween.IGNORE:void v._ratioToPositionData(B,oe,a.target)},v.debug=function(a,u,c){a=a.guide||a;var m=v._findPathProblems(a);if(m&&console.error("MotionGuidePlugin Error found: \n"+m),!u)return m;var B=a.path,z=B.length;for(u.save(),u.lineCap="round",u.lineJoin="miter",u.beginPath(),u.moveTo(B[0],B[1]),t=2;t<z;t+=4)u.quadraticCurveTo(B[t],B[t+1],B[t+2],B[t+3]);u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="white",u.lineWidth=3,u.stroke(),u.closePath();var oe=c.length;if(c&&oe){var Ce={},be={};v._solveGuideData(a,Ce);for(var t=0;t<oe;t++)Ce.orient="fixed",v._ratioToPositionData(c[t],Ce,be),u.beginPath(),u.moveTo(be.x,be.y),u.lineTo(be.x+9*Math.cos(.0174533*be.rotation),be.y+9*Math.sin(.0174533*be.rotation)),u.strokeStyle="black",u.lineWidth=4.5,u.stroke(),u.strokeStyle="red",u.lineWidth=3,u.stroke(),u.closePath()}return u.restore(),m},v._solveGuideData=function(S,u){if(T=v.debug(S))return T;var c=u.path=S.path;u.orient=S.orient,u.subLines=[],u.totalLength=0,u.startOffsetRot=0,u.deltaRotation=0,u.startData={ratio:0},u.endData={ratio:1},u.animSpan=1;for(var m,B,z,oe,Ce=c.length,be={},t=c[0],r=c[1],i=2;i<Ce;i+=4){m=c[i],B=c[i+1],z=c[i+2],oe=c[i+3];for(var o={weightings:[],estLength:0,portion:0},l=t,f=r,d=1;d<=10;d++){v._getParamsForCurve(t,r,m,B,z,oe,d/10,!1,be);var p=be.x-l,w=be.y-f,k=Math.sqrt(p*p+w*w);o.weightings.push(k),o.estLength+=k,l=be.x,f=be.y}for(u.totalLength+=o.estLength,d=0;d<10;d++)k=o.estLength,o.weightings[d]=o.weightings[d]/k;u.subLines.push(o),t=z,r=oe}k=u.totalLength;var x=u.subLines.length;for(i=0;i<x;i++)u.subLines[i].portion=u.subLines[i].estLength/k;var T=isNaN(S.start)?0:S.start,S=isNaN(S.end)?1:S.end;v._ratioToPositionData(T,u,u.startData),v._ratioToPositionData(S,u,u.endData),u.startData.ratio=T,u.endData.ratio=S,u.animSpan=u.endData.ratio-u.startData.ratio},v._ratioToPositionData=function(a,u,c){for(var m,B,z,oe=u.subLines,Ce=0,be=a*u.animSpan+u.startData.ratio,t=oe.length,r=0;r<t;r++){if(be<=Ce+(B=oe[r].portion)){z=r;break}Ce+=B}z===void 0&&(z=t-1,Ce-=B);var i=oe[z].weightings,o=B;for(t=i.length,r=0;r<t&&!(be<=Ce+(B=i[r]*o));r++)Ce+=B;z=4*z+2,m=r/10+(be-Ce)/B*.1;var l=u.path;return v._getParamsForCurve(l[z-2],l[z-1],l[z],l[z+1],l[z+2],l[z+3],m,u.orient,c),u.orient&&(.99999<=a&&a<=1.00001&&u.endAbsRot!==void 0?c.rotation=u.endAbsRot:c.rotation+=u.startOffsetRot+a*u.deltaRotation),c},v._getParamsForCurve=function(a,u,c,m,B,z,oe,Ce,be){var t=1-oe;be.x=t*t*a+2*t*oe*c+oe*oe*B,be.y=t*t*u+2*t*oe*m+oe*oe*z,Ce&&(be.rotation=57.2957795*Math.atan2((m-u)*t+(z-m)*oe,(c-a)*t+(B-c)*oe))},v._findPathProblems=function(a){var u=a.path,c=u&&u.length||0;if(c<6||(c-2)%4){var m="	Cannot parse 'path' array due to invalid number of entries in path. ";return m+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",m+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",m+="Only [ "+c+" ] values found. Expected: "+Math.max(4*Math.ceil((c-2)/4)+2,6)}for(var B=0;B<c;B++)if(isNaN(u[B]))return"All data in path array must be numeric";return m=a.start,isNaN(m)&&m!==void 0?"'start' out of bounds. Expected 0 to 1, got: "+m:(m=a.end,isNaN(m)&&m!==void 0?"'end' out of bounds. Expected 0 to 1, got: "+m:(a=a.orient,a&&a!="fixed"&&a!="auto"&&a!="cw"&&a!="ccw"?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a:void 0))},re.MotionGuidePlugin=e}(),function(){"use strict";var e=re.TweenJS=re.TweenJS||{};e.version="NEXT",e.buildDate="Thu, 14 Sep 2017 22:19:45 GMT"}(),Rn.createjs=Rn.createjs||{},function(){"use strict";function e(){throw"CSSPlugin cannot be instantiated."}var v=e;function a(u,c){for(var m,B,z,oe=[!1,u];m=v.TRANSFORM_RE.exec(u);)m[3]!=="*"?(B=[m[1]],z=c&&c[oe.length],!c||z&&B[0]===z[0]||(console.log("transforms don't match: ",B[0],z&&z[0]),c=null),function(Ce,be,t){for(;;){var r=v.TRANSFORM_VALUE_RE.exec(Ce);if(!r)return;(t=t||[]).push(+r[1],r[2]),be&&be[t.length-1]!==r[2]&&(console.log("transform units don't match: ",t[0],be[t.length-1],r[2]),be=null)}}(m[2],z,B),oe.push(B)):oe.push(c[oe.length]);return oe[0]=!!c,oe}v.priority=100,v.ID="CSS",v.VALUE_RE=/^(-?[\d.]+)([a-z%]*)$/,v.TRANSFORM_VALUE_RE=/(?:^| |,)(-?[\d.]+)([a-z%]*)/g,v.TRANSFORM_RE=/(\w+?)\(([^)]+)\)|(?:^| )(\*)(?:$| )/g,v.compute=!1,v.install=function(){re.Tween._installPlugin(e)},v.init=function(u,c,m){var B=u.pluginData;if(!B.CSS_disabled&&u.target instanceof HTMLElement){var z,oe=m||(z=u.target,oe=c,((m=B.CSS_compute)||m==null&&v.compute?window.getComputedStyle(z):z.style)[oe]);if(oe!==void 0)return u._addPlugin(e),u=B.CSS||(B.CSS={}),c==="transform"?(u[c]="_t",a(oe)):(B=v.VALUE_RE.exec(oe),B===null?(u[c]="",oe):(u[c]=B[2],parseFloat(B[1])))}},v.step=function(u,c,m){m.transform&&(c.props.transform=a(c.props.transform,c.prev.props.transform))},v.change=function(u,c,m,B,z,oe){var Ce=u.pluginData.CSS[m];if(Ce!==void 0)return m==="transform"?B=function(be,t,r){if(r===1)return t[1];if(r===0||!t[0])return be[1];for(var i,o,l="",f=be.length,d=2;d<f;d++){var p=be[d],w=t[d];for(l+=p[0]+"(",i=1,o=p.length;i<o;i+=2)l+=p[i]+(w[i]-p[i])*r,l+=w[i+1]||p[i+1],i<o-2&&(l+=", ");l+=")",d<f-1&&(l+=" ")}return l}(c.prev.props[m],c.props[m],z):B+=Ce,u.target.style[m]=B,re.Tween.IGNORE},re.CSSPlugin=v}(),re.CSSPlugin.install(),Rn.createjs=Rn.createjs||{},function(){"use strict";function e(){throw"DotPlugin cannot be instantiated."}var v=e;v.priority=100,v.ID="Dot",v.install=function(){re.Tween._installPlugin(e)},v.init=function(a,u,c){var m=a.pluginData;if(!m.Dot_disabled&&u[0]==="."){a._addPlugin(e);for(var B=a.target,z=u.split("."),oe=1,Ce=z.length;oe<Ce-1;oe++)if(!(B=B[z[oe]]))return re.Tween.IGNORE;var be=z[oe],a=B[be],c=c===void 0?a:c;return m.Dot=m.Dot||{},m.Dot[u]={t:B,n:be},c}},v.step=function(a,u,c){},v.change=function(Ce,u,c,m,B,z){var oe,Ce=Ce.pluginData.Dot;if(Ce&&(oe=Ce[c]))return oe.t[oe.n]=m,re.Tween.IGNORE},re.DotPlugin=v}(),Rn.createjs=Rn.createjs||{},function(){"use strict";function e(){throw"RelativePlugin plugin cannot be instantiated."}var v=e;v.ID="Relative",v.install=function(){re.Tween._installPlugin(e)},v.init=function(a,u,c){a.pluginData.Relative_disabled||a._addPlugin(v)},v.step=function(a,u,c){for(var m in c){var B,z,oe=c[m];typeof oe=="string"&&(B=u.prev.props[m],(z=oe[0])!=="+"&&z!=="-"||isNaN(oe=+oe+B)||(u.props[m]=oe))}},v.change=function(a,u,c,m,B,z){},re.RelativePlugin=v}(),re.DotPlugin.install(),re.RelativePlugin.install(),window.addEventListener("DOMContentLoaded",function(){var e=document.createElement("style");e.innerHTML="canvas {-webkit-tap-highlight-color: transparent;}",document.body.appendChild(e)});window.createjs=re;cr.exports=function(){return re}});var Ni=ki(ei(),1);var le=window||{},je=le.createjs,Ot=le.zns,At=le.zon==null?!0:le.zon,fn,Hn=At?console.log.bind(console):function(){},er=" border:thin solid black; color: black",oi=At?console.log.bind(console,"%c Z ","background: #acd241;"+er):function(){},Pi=At?console.log.bind(console,"%c Z ","background: #e472c4;"+er):function(){},Xr=At?console.log.bind(console,"%c Z ","background: #50c4b7;"+er):function(){},li=At?console.log.bind(console,"%c Z ","background: #fb4758;"+er):function(){},ut=At?console.log.bind(console,"%c Z ","background: #ebcb35;"+er):function(){},ui=At?console.log.bind(console,"%c Z ","background: #f58e25;"+er):function(){},kr=At?console.log.bind(console,"%c Z ","background: #eeeeee;"+er):function(){},Pr=At?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function wn(e){return qe("1"),document.getElementById(e)}function Si(e){if(qe("2"),document.getElementById(e))return document.getElementById(e).style;At&&ut("zss(): id not found")}function sr(e,v,a,u,c,m){if(qe("3"),n(v)&&v!=""||v=="_self")le.location.href=e;else{var B="";return a&&(B+="width="+a+","),u&&(B+="height="+u+","),c&&(B+="fullscreen=yes,"),m&&(B+="modal=yes,alwaysRaised=yes"),le.open(e,v,B)}}function Zn(e){if(qe("4"),!n(e))return Number(String(e).replace(/[^\d.-]/g,""))}function n(e){return e==null}function Ii(e){qe("5"),!n(e)&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),le.event&&(le.event.cancelBubble=!0))}function Fr(){return qe("6"),le.zilK&&(le.removeEventListener("keydown",le.zilK),le.removeEventListener("wheel",le.zilW),le.removeEventListener("DOMMouseScroll",le.zilS)),le.zilK=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},le.zilW=function(e){e||(e=event),e.preventDefault()},le.zilS=le.zilW,le.addEventListener("keydown",le.zilK,{passive:!1}),le.addEventListener("wheel",le.zilW,{passive:!1}),le.addEventListener("DOMMouseScroll",le.zilS,{passive:!1}),[le.zilK,le.zilW,le.zilS]}function dr(e,v){qe("6.1");function a(){var u=this;this.on=function(c,m){if(!(n(e)||n(c)||n(m)))for(var B=u.tags,z=0;z<B.length;z++)B[z].addEventListener(c,m)},this.off=function(c,m){if(!(n(e)||n(c)||n(m)))for(var B=u.tags,z=0;z<B.length;z++)B[z].removeEventListener(c,m)},Object.defineProperty(u,"tags",{get:function(){return n(e)?[]:typeof e=="string"||e instanceof String?(v&&ui(e,document.querySelector(e)),v?[document.querySelector(e)]:document.querySelectorAll(e)):typeof e.innerHTML=="string"?[e]:[]},set:function(){}}),this.css=function(c,m){for(var B=u.tags,z=0;z<B.length;z++)if(arguments.length==1&&arguments[0].constructor==={}.constructor)for(var oe in c)B[z].style[oe]=c[oe];else{if(arguments.length==1)return u.tags[0].style[c];B[z].style[c]=m}},this.prop=function(c,m){if(!n(c)){for(var B=u.tags,z=[],oe=0;oe<B.length;oe++)if(n(m))if(c.constructor==={}.constructor)for(var Ce in c)B[oe][Ce]=c[Ce];else z.push(B[oe][c]);else B[oe][c]=m;if(n(m))return z}}}return new a}function dn(e){return e.length==1&&e[0]!=null&&e[0].constructor==={}.constructor}function yt(e,v,a,u){var c=ke&&(ke.ZIMONON||fi);if(dn(v)){qe("7");var m=v[0],B;for(var z in m)(B=z.match(/^(.+)gColor$/))&&(m[B[1]+"ackgroundColor"]=m[z],delete m[z]);var oe=n(a)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):a.replace(/\s+/g,"").split(","),Ce=[],be,t;for(be=0;be<oe.length;be++)t=oe[be].split("=")[0],oe[be]=t,Ce.push(m[t]);for(be in m)oe.indexOf(be)<0&&At&&ut(e,"bad argument "+be);var r;return(r=Object.prototype.isPrototypeOf.call(e.prototype,u)?new(e.bind.apply(e,[null].concat(Ce))):e.apply(null,Ce))?(c&&!r.arguments&&(r.arguments=[m]),r):!0}else c&&u&&v&&n(u.arguments)&&(u.arguments=Array.prototype.slice.call(v))}function ct(e){if(qe("7.5"),qe("17.6"),!n(e))return ke.Pick.choose(e)}var Mi=console.table&&At?console.table.bind(console):function(){},Oi=function(){for(var e=0;e<arguments.length;e++)if(!n(arguments[e]))return arguments[e]},ke=function(e){e.chop=function(t,r,i,o,l,f){if(qe("7.8"),!n(t)){n(r)&&(r=3),n(i)&&(i=3),n(o)&&(o=!0),n(l)&&(l=0),n(f)&&(f=1),t.getBounds||(t=new e.Bitmap(t));var d=t.getBounds();n(d)&&ut("ZIM chop() - obj must have bounds");var p=d.width/r,w=d.height/i,k=l,x=[];return e.loop(i,function(T){e.loop(r,function(S){var b=new e.Bitmap(t,p+k*2,w+k*2,S*p-k,T*w-k,f);l!=0?(b.setBounds(k,k,p,w),b.regX=k,b.regY=k):b.setBounds(k,k,p,w),x.push(b)})}),o?new e.Tile(x,r,i,0,0,!0).sca(t.scaleX,t.scaleY):x}},e.shuffle=function(t,r){if(qe("8"),!n(t)){Array.isArray(t)||(t=Object.values(arguments));var i=t.length,o,l;if(i==0)return t;if(r){for(var f=e.copy(t);e.arraysEqual(f,t);)e.shuffle(t);return t}else{for(;--i;)o=Math.floor(Math.random()*(i+1)),l=t[i],t[i]=t[o],t[o]=l;return t}}},e.pluck=function(t,r){if(qe("9.26"),n(t)||t.length==0)return null;Array.isArray(t)||(t=Object.values(arguments));var i=Math.floor(Math.random()*t.length),o=t[i];return r&&t.splice(i,1),o},e.rand=function(t,r,i,o){if(qe("9"),n(t)&&n(r))return Math.random();(n(t)||isNaN(t))&&(t=0),(n(r)||isNaN(r))&&(r=0),(t%1!=0||r%1!=0)&&(i=!1),n(i)&&(i=!0),o&&Math.random()>.5&&(t*=-1,r*=-1),i&&(t>r?t++:r>t&&r++);var l;return t==0&&r==0?0:(r==0?l=Math.random()*t:l=Math.min(t,r)+Math.random()*(Math.max(t,r)-Math.min(t,r)),i?Math.floor(l):l)},e.seedRandom=function(t){return qe("9.01"),function(r,i,o,l,f,d,p,w,k){function x(F){var K,V=F.length,D=this,U=0,Q=D.i=D.j=0,J=D.S=[];for(V||(F=[V++]);l>U;)J[U]=U++;for(U=0;l>U;U++)J[U]=J[Q=_&Q+F[U%V]+(K=J[U])],J[Q]=K;(D.g=function(N){for(var te,ae=0,ee=D.i,pe=D.j,$=D.S;N--;)te=$[ee=_&ee+1],ae=ae*l+$[_&($[ee]=$[pe=_&pe+te])+($[pe]=te)];return D.i=ee,D.j=pe,ae})(l)}function T(F,K){var V,D=[],U=typeof F;if(K&&U=="object")for(V in F)try{D.push(T(F[V],K-1))}catch(Q){+function(){}()}return D.length?D:U=="string"?F:F+"\0"}function S(F,K){for(var V,D=F+"",U=0;U<D.length;)K[_&U]=_&(V^=19*K[_&U])+D.charCodeAt(U++);return E(K)}function b(F){try{return R?E(R.randomBytes(l)):(r.crypto.getRandomValues(F=new Uint8Array(l)),E(F))}catch(K){return[+new Date,r,(F=r.navigator)&&F.plugins,r.screen,E(i)]}}function E(F){return String.fromCharCode.apply(0,F)}var R,C=o.pow(l,f),O=o.pow(2,d),I=2*O,_=l-1,P=o["seed"+k]=function(F,K,V){var D=[];K=K==1?{entropy:!0}:K||{};var U=S(T(K.entropy?[F,E(i)]:F==null?b():F,3),D),Q=new x(D);return S(E(Q.S),i),(K.pass||V||function(J,N,te){return te?(o[k]=J,N):J})(function(){for(var J=Q.g(f),N=C,te=0;O>J;)J=(J+te)*l,N*=l,te=Q.g(1);for(;J>=I;)J/=2,N/=2,te>>>=1;return(J+te)/N},U,"global"in K?K.global:this==o)};if(S(o[k](),i),p&&p.exports){p.exports=P;try{R=Ai("crypto")}catch(F){}}else w&&w.amd&&w(function(){return P})}(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random"),e.randomO||(e.randomO=Math.random),n(t)?Math.random=e.randomO:Math.seedrandom(t),t},e.odds=function(t){return qe("9.1"),(n(t)||isNaN(t))&&(t=50),Math.random()<=t/100},e.rarity=function(t,r,i,o){if(qe("9.2"),n(t)||t.constructor!={}.constructor)return[];n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!1);var l=[];return e.loop(t,function(f,d){var p=e.colors.indexOf(f);p!=-1&&(f=e.colorsHex[p]);var w;Array.isArray(d)?(+f==+f?f=new Number(f):f=new String(f),f._payload=d[1],f.dynamicPayload=o,Object.defineProperty(f,"payload",{get:function(){return!this.dynamicPayload&&this._lastPayload!=null?this._lastPayload:(this._lastPayload=e.Pick.choose(this._payload),this._lastPayload)},set:function(k){this._lastPayload=null,this._payload=k}}),w=d[0],e.loop(w,function(){l.push(f)})):(w=d,e.loop(w,function(){+f==+f&&(f=+f),l.push(f)}))}),r&&e.shuffle(l),l},e.repeats=function(t,r){if(qe("9.25"),n(t)||!Array.isArray(t))return 0;var i={},o=0,l=0;return e.loop(t,function(f){i[f]!=null?(i[f]++,l++):i[f]=0,i[f]>o&&(o=i[f])}),r?l:o},e.series=function(){qe("13.61");var t,r;if(arguments.length==0)return function(){};arguments.length==1&&Array.isArray(arguments[0])?t=arguments[0]:arguments.length==1&&arguments[0].constructor=={}.constructor?(r=arguments[0],n(r.min)&&(r.min=0),n(r.max)&&(r.max=1),n(r.step)&&(r.step=1),t=[],e.loop(Math.floor(Math.abs(r.max-r.min)+r.step),function(C){t.push(C+r.min)},null,null,r.step),r=null):t=Array.prototype.slice.call(arguments);var i=0,o=1,l=1,f=0,d=0,p=!1,w=!1,k=!1,x=!1,T=!1,S,b,E=function(C,O){if(f&&d%f!=0)return d++,b;d++;var I=t.length,_;if((x||T)&&i%I==0&&e.shuffle(t),_=t[(I*10+i)%I],i==0&&(S=_),T&&i%I==0&&I>1)for(;_==b;)e.shuffle(t),_=t[(I*10+i)%I];return p?o>0&&i+o*l>=I?(o=-1,i=I-1-(i+l-(I-1))):o<0&&i+o*l<0?(o=1,i=l-i):i+=o*l:w?o>0&&i+o*l>=I?(o=-1,i=I-1-(i+l-(I-1))+l):o<0&&i+o*l<0?(o=1,i=l-i-l):i+=o*l:k?o>0&&i+o*l>=I?i=I-1:o<0&&i+o*l<0?i=0:i+=o*l:i+=o*l,b=_,e.isPick(_)?_.noPick&&O?_:e.Pick.choose(_):_},R=E.original=e.copy(t);return E.array=t,E.type="series",Object.defineProperty(E,"index",{get:function(){var C=t.length;return(C*10+i)%C},set:function(C){i=C,d=0}}),Object.defineProperty(E,"length",{get:function(){return t.length},set:function(){}}),E.jump=function(C){return i=C,E},E.reverse=function(C){return n(C)&&(C=!0),C?o=-1:o=1,i=t.length-1,E},E.bounce=function(C){n(C)&&(C=!0);var O=t.length;return i=(O*10+i)%O,p=C,E},E.flip=function(C){n(C)&&(C=!0);var O=t.length;return i=(O*10+i)%O,w=C,E},E.step=function(C){return n(C)&&(C=1),l=Math.floor(C),E},E.every=function(C){return n(C)&&(C=1),f=Math.abs(C),d=0,E},E.constrain=function(C){return n(C)&&(C=!0),k=C,E},E.random=function(C){return n(C)&&(C=!0),C||(t=R),x=C==!0,E},E.mix=function(C){return n(C)&&(C=!0),C||(t=R),T=C==!0,E},E.shuffle=function(C){return n(C)&&(C=!0),C?e.shuffle(t):t=R,E},E},e.makeSeries=function(t){if(qe("13.6"),n(t))return function(){};var r=0,i=function(){return t[r++%t.length]};return i.array=t,i},e.loop=function(t,r,i,o,l,f,d,p){var w="obj, call, reverse, interval, step, start, end, immediate",k;if(k=yt(e.loop,arguments,w))return k;if(qe("9.5"),n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(p)&&(p=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var x=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":typeof t=="string"?"string":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(x=="invalid")return;var T,S,b,E;if(x=="number"||x=="string"||x=="array"||x=="nodelist"||x=="htmlcollection"||x=="Dictionary"){if(x=="Dictionary"){var R=e.copy(t.values);t=e.copy(t.objects)}if(T=x=="number"?t:t.length,S=O(T-1),S==0)return;if(i)if(o===0){for(b=f;b>=d;b-=l)if(x=="number"?E=r(b,S,f,d,t):x=="array"||x=="string"?E=r(t[b],b,S,f,d,t):x=="Dictionary"?E=r(t[b],R[b],b,S,f,d,t):E=r(t.item(b),b,S,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(b=I.count,p||b--,l&&(b*=l),b=f-b,x=="number"?E=r(b,S,f,d,t):x=="array"||x=="string"?E=r(t[b],b,S,f,d,t):x=="Dictionary"?E=r(t[b],R[b],b,S,f,d,t):E=r(t.item(b),b,S,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},S,p);else if(o===0){for(b=f;b<=d;b+=l)if(x=="number"?E=r(b,S,f,d,t):x=="array"||x=="string"?E=r(t[b],b,S,f,d,t):x=="Dictionary"?E=r(t[b],R[b],b,S,f,d,t):E=r(t.item(b),b,S,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(b=I.count,p||b--,l&&(b*=l),x=="number"?E=r(b,S,f,d,t,I):x=="array"||x=="string"?E=r(t[b],b,S,f,d,t,I):x=="Dictionary"?E=r(t[b],R[b],b,S,f,d,t):E=r(t.item(b),b,S,f,d,t,I),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},S,p);return!0}else if(x=="object"){T=0;var C=[];for(b in t)T++,C.push(b);if(S=O(T-1),S==0)return;if(i)if(o===0){for(b=f;b>=d;b-=l)if(E=r(C[b],t[C[b]],b,S,f,d,t),typeof E<"u")return E}else e.interval(o,function(I){if(b=I.count,p||b--,l&&(b*=l),b=f-b,E=r(C[b],t[C[b]],b,S,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},S,p);else if(o===0){for(b=f;b<=d;b+=l)if(E=r(C[b],t[C[b]],b,S,f,d,t),typeof E<"u")return E}else e.interval(o,function(I){if(b=I.count,p||b--,l&&(b*=l),E=r(C[b],t[C[b]],b,S,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},S,p);return!0}function O(I){return n(f)&&(f=i?I:0),n(d)&&(d=i?0:I),i&&d>f||!i&&f>d||(f<0&&d)<0||f>I&&d>I?0:(f=Math.max(0,Math.min(f,I)),d=Math.max(0,Math.min(d,I)),Math.floor((i?f-d:d-f)/l)+1)}};function v(t,r,i,o,l){e.timeCheck||(qe("9.99"),e.timeCheck=!0);var f=n(le.TIME)?n(e.TIME)?"seconds":e.TIME:le.TIME;return f&&f.toLowerCase&&(f=f.toLowerCase()),f!="milliseconds"&&f!="ms"&&(f="seconds"),r&&r.toLowerCase&&(r=r.toLowerCase()),(r=="ms"||r=="milliseconds"||r=="seconds"||r=="s")&&(f=r),n(t)?f.charAt(0):(f=="ms"&&(f="milliseconds"),f=="s"&&(f="seconds"),f=f.charAt(0),l||a(t,f,i,o),f)}function a(t,r,i,o){n(i)&&(i=10),n(o)&&(o=9),!(!e.TIMECHECK&&!le.TIMECHECK)&&(r!="m"&&t>i||r=="m"&&t<o)&&At&&ut("TIME - warning: time is in "+(r=="m"?"milliseconds":"seconds")+" ("+t+")")}if(e.timeout=function(t,r,i,o){var l="time, call, pauseOnBlur, timeUnit",f;if(f=yt(e.timeout,arguments,l,this))return f;if(qe("9.7"),!n(r)&&typeof r=="function"){var d=e.interval(t,r,1,!1,i,o);return d.type="timeoutObj",d}},e.interval=function(t,r,i,o,l,f){var d="time, call, total, immediate, pauseOnBlur, timeUnit",p;if(p=yt(e.interval,arguments,d,this))return p;if(qe("9.8"),n(r)||typeof r!="function")return;var w=v(t,f);if(n(t)&&(t=w=="s"?1:1e3),n(o)&&(o=!1),!n(i)&&(isNaN(i)||i<=0))return;n(i)&&(i=-1);var k={count:0,total:i,paused:!1,time:t,active:!0,timeUnit:f};l&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(k));function x(){k.startTime=Date.now(),k.interval=e.Pick.choose(k.time),k.id=setTimeout(function(){k.paused||k.active&&(k.count++,r(k),x(),T())},k.interval*(w=="s"?1e3:1))}o&&setTimeout(function(){r(k),T()},10);function T(){i!=-1&&k.count>=(o?k.total-1:k.total)&&k.clear()}var S;return k.type="intervalOjbect",k.pause=function(b,E,R){n(b)&&(b=!0),b?(clearTimeout(S),clearTimeout(k.id),cancelAnimationFrame(k.rid),k.pauseTimeLeft=k.interval-(Date.now()-k.startTime)/(w=="s"?1e3:1)):(k.paused||k.pause(!0),S=setTimeout(function(){k.count++,r(k),x(),T()},E?0:(R?k.interval:k.pauseTimeLeft)*(w=="s"?1e3:1)),k.pauseTimeLeft=null),k.paused=b},k.next=function(){k.count++,r(k),T()},k.clear=function(){k.active=!1,clearTimeout(S),cancelAnimationFrame(k.rid),clearTimeout(k.id);var b=k.count;for(var E in k)delete k[E];k.active=!1,k.count=b,k.pause=function(){},k.clear=function(){}},x(),k},e.async=function(t,r,i,o,l){if(qe("29"),!n(t)){var f=document.createElement("script"),d=v(o);n(o)&&(o=d=="s"?2:2e3);var p;r?(i?p=i:p=r.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],e.asyncList||(e.asyncList={}),e.asyncList[p]||(e.asyncList[p]=[]),e.asyncList[p].push(r),e.async[p]=function(){var w=f,k=!1,x=setTimeout(function(){k=l,typeof r=="function"&&r("asyncError",l?"cancelled":"timeout")},o*(d=="s"?1e3:1));return function(T){clearTimeout(x),e.asyncList[p]&&(r=e.asyncList[p].shift()),typeof r=="function"&&!k&&r(T),w&&w.parentNode.removeChild(w),w=null}}()):(e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=f),t.match(/\?/)||(t+="?"),f.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(f)}},e.couple=function(t){if(qe("29.2"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=r[o];for(var f in l)i[o+"_"+f]=l[f]}return JSON.stringify(i)},e.decouple=function(t){if(qe("29.3"),!e.isJSON(t))return t;var r=JSON.parse(t),i={};for(var o in r){var l=o.split("_",2);if(l.length!=2)return t;i[l[0]]||(i[l[0]]={}),i[l[0]][l[1]]=r[o]}return JSON.stringify(i)},e.convertColor=function(t,r,i){if(e.convertColorCheck||(qe("27.5"),e.convertColorCheck=!0),n(r)&&(r="hex"),n(t)||!t.toLowerCase)return;t=ct(t),t=t.toLowerCase(),r=r.toLowerCase();var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(r=="zim"){var f=e.colorsHex.indexOf(t);return f<0?t:e.colors[e.colorsHex.indexOf(t)]}r=="hsv"&&r=="hsl";var d,p;if(d=t.match(/rgba\((.*)\)/)){p=d[1].split(",");var w=p.pop();if(n(i)&&(i=w),r=="array")return p.push(w),p;if(t="rgb("+p.join(",")+")",r=="rgb")return t;if(r=="hsl")return T(p[0],p[1],p[2])}function k(I){var _=Number(I).toString(16);return _.length<2&&(_="0"+_),_}function x(I,_,P,F,K){return(K-F)*(I-_)/(P-_)+F}function T(I,_,P){I/=255,_/=255,P/=255;let F=Math.max(I,_,P),K=F-Math.min(I,_,P),V=K?F===I?(_-P)/K:F===_?2+(P-I)/K:4+(I-_)/K:0;return[60*V<0?60*V+360:60*V,100*(K?F<=.5?K/(2*F-K):K/(2-(2*F-K)):0),100*(2*F-K)/2]}function S(I){var _=I.split(","),P=k(_[0]),F=k(_[1]),K=k(_[2]),V=n(V)?"":k(Math.round(Number(_[3])*255));return[P,F,K,V]}n(i)&&(i=1);var b,E,R;if(d=t.match(/rgb\((.*)\)/))return r=="rgba"?"rgba("+d[1]+","+i+")":r=="hex"?(b=i!=1?","+i:"",E=S(d[1]+b),"#"+E[0]+E[1]+E[2]+E[3]):r=="hexnumber"?(b=i!=1?","+i:0,E=S(d[1]+b),parseInt(E[0]+""+E[1]+E[2],16)):r=="string"?(t=S(d[1]).join("").toLowerCase(),R=l.indexOf(t),R==-1?"#"+t:o[R]):r=="array"?(b=i!=1?","+i:0,S(d[1]+b)):r=="hsl"?(p=d[1].split(","),T(p[0],p[1],p[2])):t;function C(I){var _;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(I)?(_=I.substring(1).split(""),_.length==3&&(_=[_[0],_[0],_[1],_[1],_[2],_[2]]),_="0x"+_.join(""),r=="rgb"?"rgb("+[_>>16&255,_>>8&255,_&255]+")":r=="array"?[_>>16&255,_>>8&255,_&255,i]:"rgba("+[_>>16&255,_>>8&255,_&255].join(",")+","+i+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(I)?(_=I.substring(1).split(""),_.length==8&&(i=_.slice(-2).join(""),_=_.slice(0,6)),_.length==4&&(i=_[3]+""+_[3],_=[_[0],_[0],_[1],_[1],_[2],_[2]]),i=parseInt(i,16)/255,_="0x"+_.join(""),r=="rgb"?"rgb("+[_>>16&255,_>>8&255,_&255]+")":"rgba("+[_>>16&255,_>>8&255,_&255].join(",")+","+i+")"):r=="rgb"?"rgb(0,0,0)":"rgba(0,0,0,1)"}if(r=="hsl")return e.convertColor(e.convertColor(t,"rgb"),"hsl");if(r=="array"||r=="rgb"||r=="rgba")return t.charAt(0)=="#"?C(t):C(e.convertColor(t));if(r=="hex"){if(t.charAt(0)=="#")if(i!=1)if(b=k(Math.round(i*255)),t.length==4||t.length==5){var O=t.split("");return O[1]=O[1]+""+O[1],O[2]=O[2]+""+O[2],O[3]=O[3]+""+O[3],O[4]=b,O.join("")}else return t.length==9?t.substring(0,o.length-2)+b:t+b;else return t}else if(r=="hexnumber"){if(t.charAt(0)=="#")return parseInt(t.replace(/^#/,""),16)}else t.charAt(0)=="#"&&(t=t.replace("#",""),t.length==3&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)));return r=="string"?(R=l.indexOf(t),R==-1?"#"+t:o[R]):r=="hexnumber"?parseInt(l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0],16):(b=i!=1?k(Math.round(i*255)):"","#"+l[o.indexOf(t.toLowerCase())!=-1?o.indexOf(t):0]+b)},e.colorRange=function(t,r,i){e.colorRangeCheck||(qe("27.6"),e.colorRangeCheck=!0),n(i)&&(i=.5),i=Math.max(0,Math.min(1,i)),n(t)&&(t="white"),n(r)&&(r="black");var o=t,l=r,f=e.convertColor(t,"rgb"),d=e.convertColor(r,"rgb");t=f.substring(4,f.length-1).split(","),r=d.substring(4,d.length-1).split(",");var p,w="#",k;if(i==0)w=o;else if(i==1)w=l;else for(var x=0;x<t.length;x++)p=r[x]-t[x],k=Math.floor(parseInt(t[x],10)+p*i).toString(16),k.length<2&&(k="0"+k),w+=k;return w},e.lighten=function(t,r){return e.lightenCheck||(qe("27.65"),e.lightenCheck=!0),n(r)&&(r=.5),r>=0?e.colorRange(String(t),"#FFFFFF",r):e.colorRange(String(t),"#000000",-r)},e.darken=function(t,r){return n(r)&&(r=.5),e.darkenCheck||(qe("27.66"),e.darkenCheck=!0),r>=0?e.colorRange(String(t),"#000000",r):e.colorRange(String(t),"#ffffff",-r)},e.toColor=function(t,r,i){return e.toColorCheck||(qe("27.67"),e.toColorCheck=!0),n(i)&&(i=.5),e.colorRange(String(t),r,i)},e.toAlpha=function(t,r){return e.toAlphaCheck||(qe("27.68"),e.toAlphaCheck=!0),n(r)&&(r=.5),e.convertColor(String(t),"rgba",r)},e.toBW=function(t){if(t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return ut("ZIM toBW() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return r*.299+i*.587+o*.114>186?"#000000":"#FFFFFF"},e.invertColor=function(t){if(e.invertColorCheck||(qe("27.86"),e.invertColorCheck=!0),t.indexOf("#")===0&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return ut("ZIM invertColor() - needs hex input"),t;var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);r=(255-r).toString(16),i=(255-i).toString(16),o=(255-o).toString(16);function l(f,d){d=d||2;var p=new Array(d).join("0");return(p+f).slice(-d)}return"#"+l(r)+l(i)+l(o)},e.zimEase=function(t,r,i,o,l){qe("27.69");var f=!1;n(l)&&(l=!0);var d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V;if(t){if(Array.isArray(t[1])){f=!0,V=t[1],t=t[0];var D=0,U=V[0],Q=V[1],J=V[2],N=V[3],te=1,ae=5*(U-D),ee=10*(Q-D)-4*ae,pe=10*(J-D)+30*(U-Q),$=5*(N+D)-20*(J+U)+30*Q,X=te-D-$-pe-ee-ae}d=0,p=t[0],w=t[1],k=t[2],x=t[3],T=1,S=5*(p-d),b=10*(w-d)-4*S,E=10*(k-d)+30*(p-w),R=5*(x+d)-20*(k+p)+30*w,C=T-d-R-E-b-S}else r?(C=r[0],R=r[1],E=r[2],b=r[3],S=r[4],p=S/5,w=(b+4*S)/10,k=(E+6*S+3*b)/10,x=(R+4*S+3*b+2*E)/5):(C=0,R=0,E=0,b=0,S=1);return i?(F=function(){return e.zimEase(null,[C,R,E,b,S],!0)},K={reverse:F,points:[p,w,k,x],polynomials:[C,R,E,b,S]},K.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return y<.5?(y*=2,O=y*100,I=100,_=(O/=I)*O,P=_*O,(C*P*_+R*_*_+E*P+b*_+S*O)/2):(y=1-(y-.5)*2,O=y*100,I=100,_=(O/=I)*O,P=_*O,1-(C*P*_+R*_*_+E*P+b*_+S*O)/2)}):f?(F=function(){return At&&ut("zimEase - multi array points cannot be reversed"),e.zimEase(null,[C,R,E,b,S])},K={reverse:F,points:[[p,w,k,x],[U,Q,J,N]],polynomials:[[C,R,E,b,S],[X,$,pe,ee,ae]]},K.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return y<.5?(y*=2,O=y*100,I=100,_=(O/=I)*O,P=_*O,(C*P*_+R*_*_+E*P+b*_+S*O)/2):(y=(y-.5)*2,O=y*100,I=100,_=(O/=I)*O,P=_*O,.5+(X*P*_+$*_*_+pe*P+ee*_+ae*O)/2)}):(F=function(){return e.zimEase(null,[C,R,E,b,S],null,!0)},K={reverse:F,points:[p,w,k,x],polynomials:[C,R,E,b,S]},o?K.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return O=100-y*100,I=100,_=(O/=I)*O,P=_*O,1-(C*P*_+R*_*_+E*P+b*_+S*O)}:K.noPick=function(y){if(l){if(y<.025)return 0;if(y>.975)return 1}return O=y*100,I=100,_=(O/=I)*O,P=_*O,C*P*_+R*_*_+E*P+b*_+S*O}),K.noPick.reverse=F,K},e.spline=function(t,r,i,o,l){qe("27.695"),n(t)&&(t=[]),n(r)&&(r=1),n(i)&&(i=!1),n(l)&&(l=i);var f;function d(N,te){if(!Array.isArray(N[0]))for(f=0;f<N.length;f++)N[f]=[N[f].x,N[f].y];if(te){var ae=N[N.length-1],ee=N[N.length-2],pe=N[0],$=N[1];N.unshift(ae),N.unshift(ee),N.push(pe),N.push($)}var X=[];for(f=0;f<N.length;f++)X.push(N[f][0],N[f][1]);return X}t=d(t,i);var p=t.length,w=p-4,k=i?t[2]:t[0],x=i?t[3]:t[1],T="M"+[k,x];o&&o.mt(k,x);var S=i?2:0,b=i?p-4:p-2,E=2;for(f=S;f<b;f+=E){var R=f?t[f-2]:t[0],C=f?t[f-1]:t[1],O=t[f+0],I=t[f+1],_=t[f+2],P=t[f+3],F=f!==w?t[f+4]:_,K=f!==w?t[f+5]:P,V=O+(_-R)/6*r,D=I+(P-C)/6*r,U=_-(F-O)/6*r,Q=P-(K-I)/6*r;T+="C"+[V,D,U,Q,_,P],o&&o.bt(V,D,U,Q,_,P)}if(l){var J=T.split("C");J.pop(),T=J.join("C")}return T},e.pointAlongCurve=function(t,r,i,o){if(qe("27.7"),!(!t||!t[0]||!t[1]||!t[2]||!t[3])){n(o)&&(o=!1);var l=new e.Bezier(t[0],t[1],t[2],t[3]),f,d,p,w,k,x;if(o?(f=l.mx(r),d=l.my(r)):(f=l.x(r),d=l.y(r)),i){var T=r-.05,S=r+.05;T<0&&(T=0),S>1&&(S=1),o?(p=l.mx(T),w=l.my(T),k=l.mx(S),x=l.my(S)):(p=l.x(T),w=l.y(T),k=l.x(S),x=l.y(S));var b=e.angle(p,w,k,x);return{x:f,y:d,angle:b}}return{x:f,y:d}}},e.distanceAlongCurve=function(t){qe("27.8");var r=e.dist(t[0],t[3]),i=e.dist(t[0],t[1])+e.dist(t[1],t[2])+e.dist(t[2],t[3]);return(r+i)/2},e.closestPointAlongCurve=function(t,r,i,o,l){qe("27.9");var f=1e7,d,p=0,w=0;return n(i)&&(i=10),e.loop(r,function(k,x){var T=new e.Bezier(k[0],k[1],k[2],k[3]);e.loop(i,function(S,b){var E={x:T.x(S/b),y:T.y(S/b)},R=e.dist(t,E);R<f&&(f=R,d=E,p=x,w=S)})}),l?(p*i+w)/(r.length*i)*100:o?d:p},e.transformPoints=function(t,r,i,o,l){if(qe("27.95"),!(n(t)||!Array.isArray(t))){n(o)&&(o=0),n(l)&&(l=0),t=e.copy(t);var f=o,d=l;r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",-f)),l!=0&&(t=e.transformPoints(t,"y",-d)));for(var p,w=0;w<t.length;w++)if(p=t[w],!!Array.isArray(p)){if(r=="x")p[0]+=i;else if(r=="y")p[1]+=i;else if(r=="scaleX")p[0]=(p[0]-o)*i+o,p[4]=p[4]*i,p[6]=p[6]*i;else if(r=="scaleY")p[1]=(p[1]-l)*i+l,p[5]=p[5]*i,p[7]=p[7]*i;else if(r=="scale")p[0]=(p[0]-o)*i+o,p[4]=p[4]*i,p[6]=p[6]*i,p[1]=(p[1]-l)*i+l,p[5]=p[5]*i,p[7]=p[7]*i;else if(r=="rotation"){var k=i*Math.PI/180,x=p[0],T=p[1];p[0]=x*Math.cos(k)-T*Math.sin(k),p[1]=T*Math.cos(k)+x*Math.sin(k),x=p[4],T=p[5],p[4]=x*Math.cos(k)-T*Math.sin(k),p[5]=T*Math.cos(k)+x*Math.sin(k),x=p[6],T=p[7],p[6]=x*Math.cos(k)-T*Math.sin(k),p[7]=T*Math.cos(k)+x*Math.sin(k)}}return r=="rotation"&&(o!=0&&(t=e.transformPoints(t,"x",f)),l!=0&&(t=e.transformPoints(t,"y",d))),t}},e.trimPointEnds=function(t){qe("27.97"),t[0][4]=0,t[0][5]=0,t[0][8]="free",t[t.length-1][6]=0,t[t.length-1][7]=0,t[t.length-1][8]="free"},e.reversePoints=function(t){return qe("27.975"),t.reverse(),e.loop(t,function(r){var i=r[6];r[6]=r[4],r[4]=i;var o=r[7];r[7]=r[5],r[5]=o}),t},e.appendPoints=function(t,r,i){return qe("27.98"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(t[t.length-1][6]=r[0][6],t[t.length-1][7]=r[0][7],i&&(t[t.length-1][8]=i),r.shift(),t=t.concat(r)),t)},e.prependPoints=function(t,r,i){return qe("27.985"),n(t)&&n(r)?[]:n(t)?r:(n(r)||(r[r.length-1][6]=t[0][6],r[r.length-1][7]=t[0][7],i&&(t[t.length-1][8]=i),t.shift(),t=r.concat(t)),t)},e.splitPoints=function(t,r,i){if(qe("27.99"),!n(t)&&(n(r)&&(r=Math.floor(t.length/2)),!(r<0||r>t.length-1))){n(i)&&(i=!0);var o=e.copy(t.slice(0,r+1)),l=e.copy(t.slice(r));return i&&(e.trimPointEnds(o),e.trimPointEnds(l)),[o,l]}},e.makeID=function(t,r,i){qe("13.5"),n(t)&&(t="mixed"),n(r)&&(r=5),n(i)&&(i="uppercase");var o,l=[2,3,4,5,6,7,8,9],f="abcdefghjkmnpqrstuvwxyz".split("");t.constructor===Array?o=t:t=="numbers"?o=l:t=="letters"?o=f:o=l.concat(f);for(var d="",p,w,k=0;k<r;k++)p=o[Math.floor(Math.random()*o.length)],w=Math.random(),i=="uppercase"||i=="mixed"&&w>.5?p.toUpperCase&&(p=p.toUpperCase()):p.toLowerCase&&(p=p.toLowerCase()),d+=String(p);return d},e.makeSyllable=function(t,r){qe("13.55");var i="bcdfghjklmnprstvwxz",o="aeiouaeiouaeiouy";n(t)&&(t=3),n(r)&&(r=e.rand()<.3);function l(p){var w=e.rand(p.length-1),k=p.substring(w,w+1);return k}var f="",d=r?o:i;return e.loop(t,function(){f+=l(d),d=d==o?i:o}),f},e.makePrimitive=function(t){qe("13.56");function r(i){return Array.isArray(i)?(e.loop(i,function(o){o=r(o)}),i):i.constructor==={}.constructor?(e.loop(i,function(o,l){i[o]=r(l)}),i):i instanceof String?String(i):i instanceof Number?Number(i):i instanceof Boolean?!!i:i}return r(t)},e.makeMath=function(){qe("13.565");for(var t=Object.getOwnPropertyNames(Math),r=0;r<t.length;r++)le[t[r]]=Math[t[r]]},e.swapProperties=function(t,r,i){if(qe("17.1"),n(r)||n(i)||n(r[t])||n(i[t]))return!1;var o=i[t];return i[t]=r[t],r[t]=o,!0},e.mobile=function(t){return qe("28"),!n(le.MOBILE)&&le.MOBILE!="default"?le.MOBILE:!n(e.MOBILE)&&e.MOBILE!="default"?e.MOBILE:(n(t)&&(t=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":t&&le.orientation!==void 0?/safari/i.test(navigator.userAgent)?"ios":!0:!1)},e.vee=function(t){return qe("28.5"),!n(t)&&(t.type=="Pick"||Array.isArray(t)||t.constructor=={}.constructor&&(!n(t.max)||!n(t.noPick))||typeof t=="function")},e.extend=function(t,r,i,o,l){var f="subclass, superclass, override, prefix, prototype",d;if(d=yt(e.extend,arguments,f))return d;if(n(t)||n(r)){At&&t!=e.StageGL&&ut("zim.extend() - please supply a class and its superclass");return}n(o)&&(o="super"),n(i)&&(i=[]),Array.isArray(i)||(i=[i]),n(l)&&(l=!0);var p={};for(var w in t.prototype)Object.defineProperty(p,w,Object.getOwnPropertyDescriptor(t.prototype,w));function k(){this.constructor=t}k.prototype=r.prototype,t.prototype=new k;for(w in p)Object.defineProperty(t.prototype,w,Object.getOwnPropertyDescriptor(p,w));var x=t.prototype,T=Object.getPrototypeOf&&Object.getPrototypeOf(x)||x.__proto__;if(T){x[(o+="_")+"constructor"]=T.constructor;for(var S,b=0;b<i.length;b++)S=i[b],typeof T[S]=="function"&&(x[o+S]=T[S]);if(l)for(S in T)Object.prototype.hasOwnProperty.call(x,S)&&typeof T[S]=="function"&&(x[o+S]=T[S])}return t},e.copy=function(t,r,i){if(e.copyCheck||(qe("10"),e.copyCheck=!0),n(r)&&(r=!1),n(i)&&(i=!0),t==null||!(t instanceof Array||t.constructor=={}.constructor))return r&&t!=null&&t.clone&&t.type&&(t.type!="Container"&&t.type!="Stage"&&t.type!="StageGL"||i)?t.clone():t;if(t instanceof Array){for(var o=[],l=0;l<t.length;l++)o[l]=e.copy(t[l],r,i);return o}if(t.constructor=={}.constructor){var f={};for(var d in t){var p=e.copy(t[d],r,i);Object.prototype.hasOwnProperty.call(t,d)&&(f[d]=p)}return f}},e.merge=function(){e.mergeCheck||(qe("12"),e.mergeCheck=!0);var t={},r,i;for(r=0;r<arguments.length;r++)for(i in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],i)&&(t[i]=arguments[r][i]);return t},e.sortObject=function(t,r,i){qe("12.1");var o=function(p){return p[r]},l=Object.entries(t).sort(function(p,w){return i?o(p[1])<o(w[1])?1:o(p[1])>o(w[1])?-1:0:o(p[1])>o(w[1])?1:o(p[1])<o(w[1])?-1:0}),f=new Map(l),d={};return f.forEach((p,w)=>{d[w]=p}),d},e.arraysEqual=function(t,r,i){if(qe("11"),n(t)||n(r)||(n(i)&&(i=!0),t.length!=r.length))return!1;for(var o=0;o<t.length;o++)if(t[o]instanceof Array&&r[o]instanceof Array){if(!e.arraysEqual(t[o],r[o],i))return!1}else{if(i&&t[o]!=r[o])return!1;if(!i)return e.arraysEqual(t.sort(),r.sort(),!0)}return!0},e.arrayMinMax=function(t){if(qe("11.2"),!Array.isArray(t))return{min:null,max:null};for(var r=t[0],i=t[0],o=t.length;o--;)r=t[o]<r?t[o]:r,i=t[o]>i?t[o]:i;return r=isNaN(r)?null:r,i=isNaN(i)?null:i,{min:r,max:i}},e.isEmpty=function(t){if(e.zimEmptyCheck||(qe("11.5"),e.zimEmptyCheck=!0),!n(t)){var r=0;for(var i in t){r++;break}return r==0}},e.isJSON=function(t){if(qe("11.6"),typeof t!="string")return!1;try{return JSON.parse(t),!0}catch(r){return!1}},e.isPick=function(t){if(e.zimPickCheck||(qe("11.7"),e.zimPickCheck=!0),!n(t))return Array.isArray(t)||t.constructor=={}.constructor&&(t.min!=null&&t.max!=null||t.noPick)||t.constructor===Function&&(t.array!=null||t()!=null)},e.zut=function(t){if(n(t)||typeof t=="object")return!0},e.decimals=function(t,r,i,o,l,f,d){if(e.zimDecimalCheck||(qe("13"),e.zimDecimalCheck=!0),n(t))return 0;n(r)&&(r=1),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=!0),n(f)&&(f=!1);var p=Math.round(t*Math.pow(10,r))/Math.pow(10,r);if(f){var w=p-Math.floor(p);p=e.decimals(Math.floor(p)+w*60/100,2)}var k=e.sign(p),x,T,S;if(i>0)for(x=String(p).indexOf("."),T=String(p).length,x<0&&(x=T++,p+="."),S=0;S<i-(T-x-1);S++)p+="0";if(o>1){k==-1&&(p=p.substr(1,p.length-1)),x=String(p).indexOf("."),T=String(p).length;var b=x<0?T:x;for(S=0;S<o-b;S++)p="0"+p;k==-1&&(p="-"+p)}return o==0&&(p=p.toString().replace(/^0\./,".")),i+o>0&&!l&&Number(p)==0&&(p=0),f&&(p=String(p).replace(".",":")),e.zut(d)?p:null},e.countDecimals=function(t){return e.zimCountDecimalsCheck||(qe("13.05"),e.zimCountDecimalsCheck=!0),t%1?t.toString().split(".")[1].length:0},e.sign=function(t){return e.zimSignCheck||(qe("13.1"),e.zimSignCheck=!0),t?t<0?-1:1:0},e.constrain=function(t,r,i,o){if(qe("13.2"),!n(t)){if(n(r)&&(r=0),n(i)&&(i=Number.MAX_VALUE),i<r){var l=r;i=r,r=l}return n(o)&&(o=!1),o&&t<0?Math.max(-i,Math.min(t,-r)):Math.max(r,Math.min(t,i))}},e.dist=function(t,r,i,o){if(e.zimDistCheck||(qe("13.3"),e.zimDistCheck=!0),!(n(t)||n(r)))return!n(t.x)&&!n(r.x)?(o=r.y,i=r.x,r=t.y,t=t.x):(n(i)&&(i=0),n(o)&&(o=0)),Math.sqrt(Math.pow(i-t,2)+Math.pow(o-r,2))},e.rectIntersect=function(t,r,i){return e.zimRectIntersectCheck||(qe("13.32"),e.zimRectIntersectCheck=!0),n(i)&&(i=0),!(t.x>=r.x+r.width+i||t.x+t.width+i<=r.x||t.y>=r.y+r.height+i||t.y+t.height+i<=r.y)},e.boundsAroundPoints=function(t){e.zimBoundsAroundPointsCheck||(qe("13.34"),e.zimBoundsAroundPointsCheck=!0);for(var r=1e4,i=1e4,o=-1e4,l=-1e4,f=0;f<t.length;f++){var d=t[f];d.x<r&&(r=d.x),d.x>o&&(o=d.x),d.y<i&&(i=d.y),d.y>l&&(l=d.y)}return{x:r,y:i,width:o-r,height:l-i}},e.angle=function(t,r,i,o){if(e.angleCheck||(qe("13.4"),e.angleCheck=!0),!(n(t)||n(r)))return n(i)&&(i=t,t=0),n(o)&&(o=r,r=0),(Math.atan2(o-r,i-t)*180/Math.PI+360)%360},e.TAU=Math.PI*2,e.DEG=180/Math.PI,e.RAD=Math.PI/180,e.PHI=Math.pow(5,.5)*.5+.5,e.smoothStep=function(t,r,i){qe("13.7");var o=e.constrain((t-r)/(i-r),0,1);return o*o*o*(o*(o*6-15)+10)},e.unicodeToUTF=function(t){if(qe("13.75"),!!t){t!=" "&&(t=t.replace(/^\s+/g,""));var r,i="",o="";return r=t.charCodeAt(0),i=r,o=t.charCodeAt(1),o>=56320&&o<=57343&&(r=(i-55296)*1024+(o-56320)+65536),i=i.toString(16),o=o.toString(16),r=r.toString(16),"\\u"+i+"\\u"+o}},e.capitalizeFirst=function(t){return qe("13.78"),t.charAt(0).toUpperCase()+t.slice(1)},e.Ajax=function(t,r,i,o){qe("13.8");var l=new XMLHttpRequest;this.master=t,this.couple=r,this.lock=i,this.unique=o;var f=this;this.get=function(d,p){var w=n(f.master)?"":"&master="+encodeURI(t),k=n(f.lock)?"":"&lock="+encodeURI(i),x=f.unique?"&unique=true":"";l.open("GET",d+w+k+x,!0),l.onload=function(){l.status==200?p(e.isJSON(l.responseText)?JSON.parse(l.responseText):l.responseText):p(null,"Error: "+l.status)},l.send()},this.post=function(d,p,w,k,x){var T="url, data, command, extra, callback",S;if(S=yt(f.post,arguments,T))return S;if(!n(d)){l.open("POST",d,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onload=function(){var O=l.responseText;e.isJSON(O)&&(f.couple&&(O=e.decouple(O)),O=JSON.parse(O)),x(O)},e.isJSON(p)||(p=JSON.stringify(p)),f.couple&&(p=e.couple(p));var b=n(f.master)?"":"&master="+encodeURIComponent(f.master),E=n(f.lock)?"":"&lock="+encodeURIComponent(f.lock),R=n(w)?"":"&command="+encodeURIComponent(w),C=n(k)?"":"&extra="+encodeURIComponent(k);l.send("data="+encodeURIComponent(p)+b+E+R+C)}},this.put=function(d,p,w){l.open("PUT",d,!0),l.setRequestHeader("Content-type","application/json"),l.onload=function(){w(e.isJSON(l.responseText)?JSON.parse(l.responseText):f.http.responseText)},l.send(JSON.stringify(p))}},e.Noise=function(t){"use strict";qe("13.9"),n(t)&&(t=Math.random()*1e6);var r=t;this.seed=t;var i=this,o={};o.NORM_2D=1/47,o.NORM_3D=1/103,o.NORM_4D=1/30,o.SQUISH_2D=(Math.sqrt(2+1)-1)/2,o.SQUISH_3D=(Math.sqrt(3+1)-1)/3,o.SQUISH_4D=(Math.sqrt(4+1)-1)/4,o.STRETCH_2D=(1/Math.sqrt(2+1)-1)/2,o.STRETCH_3D=(1/Math.sqrt(3+1)-1)/3,o.STRETCH_4D=(1/Math.sqrt(4+1)-1)/4,o.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],o.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],o.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],o.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],o.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],o.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],o.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],o.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],o.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],o.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],o.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],o.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];function l(I){var _=new Uint32Array(1);return _[0]=I[0]*1664525+1013904223,_}function f(I,_,P){this.dx=-_-I*o.SQUISH_2D,this.dy=-P-I*o.SQUISH_2D,this.xsb=_,this.ysb=P}function d(I,_,P,F){this.dx=-_-I*o.SQUISH_3D,this.dy=-P-I*o.SQUISH_3D,this.dz=-F-I*o.SQUISH_3D,this.xsb=_,this.ysb=P,this.zsb=F}function p(I,_,P,F,K){this.dx=-_-I*o.SQUISH_4D,this.dy=-P-I*o.SQUISH_4D,this.dz=-F-I*o.SQUISH_4D,this.dw=-K-I*o.SQUISH_4D,this.xsb=_,this.ysb=P,this.zsb=F,this.wsb=K}var w=[],k,x,T,S,b,E;for(k=0;k<o.p2D.length;k+=4){for(S=o.base2D[o.p2D[k]],b=null,E=null,x=0;x<S.length;x+=3)E=new f(S[x],S[x+1],S[x+2]),b===null?w[k/4]=E:b.next=E,b=E;E.next=new f(o.p2D[k+1],o.p2D[k+2],o.p2D[k+3])}for(this.lookup2D=[],k=0;k<o.lookupPairs2D.length;k+=2)this.lookup2D[o.lookupPairs2D[k]]=w[o.lookupPairs2D[k+1]];var R=[];for(k=0;k<o.p3D.length;k+=9){for(S=o.base3D[o.p3D[k]],b=null,E=null,x=0;x<S.length;x+=4)E=new d(S[x],S[x+1],S[x+2],S[x+3]),b===null?R[k/9]=E:b.next=E,b=E;E.next=new d(o.p3D[k+1],o.p3D[k+2],o.p3D[k+3],o.p3D[k+4]),E.next.next=new d(o.p3D[k+5],o.p3D[k+6],o.p3D[k+7],o.p3D[k+8])}for(this.lookup3D=[],k=0;k<o.lookupPairs3D.length;k+=2)this.lookup3D[o.lookupPairs3D[k]]=R[o.lookupPairs3D[k+1]];var C=[];for(k=0;k<o.p4D.length;k+=16){for(S=o.base4D[o.p4D[k]],b=null,E=null,x=0;x<S.length;x+=5)E=new p(S[x],S[x+1],S[x+2],S[x+3],S[x+4]),b===null?C[k/16]=E:b.next=E,b=E;E.next=new p(o.p4D[k+1],o.p4D[k+2],o.p4D[k+3],o.p4D[k+4],o.p4D[k+5]),E.next.next=new p(o.p4D[k+6],o.p4D[k+7],o.p4D[k+8],o.p4D[k+9],o.p4D[k+10]),E.next.next.next=new p(o.p4D[k+11],o.p4D[k+12],o.p4D[k+13],o.p4D[k+14],o.p4D[k+15])}for(this.lookup4D=[],k=0;k<o.lookupPairs4D.length;k+=2)this.lookup4D[o.lookupPairs4D[k]]=C[o.lookupPairs4D[k+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var O=new Uint8Array(256);for(k=0;k<256;k++)O[k]=k;for(t=new Uint32Array(1),t[0]=r,t=l(l(l(t))),k=255;k>=0;k--)t=l(t),T=new Uint32Array(1),T[0]=(t[0]+31)%(k+1),T[0]<0&&(T[0]+=k+1),this.perm[k]=O[T[0]],this.perm2D[k]=this.perm[k]&14,this.perm3D[k]=this.perm[k]%24*3,this.perm4D[k]=this.perm[k]&252,O[T[0]]=O[k];this.simplex1D=function(I){return i.simplex2D(I,1)},this.simplex2D=function(I,_){var P=(I+_)*o.STRETCH_2D,F=[I+P,_+P],K=F[0],V=F[1],D=[Math.floor(K),Math.floor(V)],U=D[0],Q=D[1],J=(U+Q)*o.SQUISH_2D,N=[I-(U+J),_-(Q+J)],te=N[0],ae=N[1],ee=[K-U,V-Q],pe=ee[0],$=ee[1],X=pe+$,y=new Uint32Array(4);y[0]=pe-$+1,y[1]=X,y[2]=X+$,y[3]=X+pe;for(var g=y[0]|y[1]<<1|y[2]<<2|y[3]<<4,h=i.lookup2D[g],L=0;typeof h<"u";){var q=[te+h.dx,ae+h.dy],A=q[0],Y=q[1],xe=2-A*A-Y*Y;if(xe>0){var G=[U+h.xsb,Q+h.ysb],Z=G[0],ge=G[1],he=i.perm2D[i.perm[Z&255]+ge&255],ne=o.gradients2D[he]*A+o.gradients2D[he+1]*Y;xe*=xe,L+=xe*xe*ne}h=h.next}return L*o.NORM_2D},this.simplex3D=function(I,_,P){var F=(I+_+P)*o.STRETCH_3D,K=[I+F,_+F,P+F],V=K[0],D=K[1],U=K[2],Q=[Math.floor(V),Math.floor(D),Math.floor(U)],J=Q[0],N=Q[1],te=Q[2],ae=(J+N+te)*o.SQUISH_3D,ee=[I-(J+ae),_-(N+ae),P-(te+ae)],pe=ee[0],$=ee[1],X=ee[2],y=[V-J,D-N,U-te],g=y[0],h=y[1],L=y[2],q=g+h+L,A=new Uint32Array(7);A[0]=h-L+1,A[1]=g-h+1,A[2]=g-L+1,A[3]=q,A[4]=q+L,A[5]=q+h,A[6]=q+g;for(var Y=A[0]|A[1]<<1|A[2]<<2|A[3]<<3|A[4]<<5|A[5]<<7|A[6]<<9,xe=i.lookup3D[Y],G=0;typeof xe<"u";){var Z=[pe+xe.dx,$+xe.dy,X+xe.dz],ge=Z[0],he=Z[1],ne=Z[2],ue=2-ge*ge-he*he-ne*ne;if(ue>0){var Te=[J+xe.xsb,N+xe.ysb,te+xe.zsb],Fe=Te[0],ie=Te[1],Se=Te[2],se=i.perm3D[i.perm[i.perm[Fe&255]+ie&255]+Se&255],me=o.gradients3D[se]*ge+o.gradients3D[se+1]*he+o.gradients3D[se+2]*ne;ue*=ue,G+=ue*ue*me}xe=xe.next}return G*o.NORM_3D},this.simplex4D=function(I,_,P,F){var K=(I+_+P+F)*o.STRETCH_4D,V=[I+K,_+K,P+K,F+K],D=V[0],U=V[1],Q=V[2],J=V[3],N=[Math.floor(D),Math.floor(U),Math.floor(Q),Math.floor(J)],te=N[0],ae=N[1],ee=N[2],pe=N[3],$=(te+ae+ee+pe)*o.SQUISH_4D,X=I-(te+$),y=_-(ae+$),g=P-(ee+$),h=F-(pe+$),L=[D-te,U-ae,Q-ee,J-pe],q=L[0],A=L[1],Y=L[2],xe=L[3],G=q+A+Y+xe,Z=new Uint32Array(11);Z[0]=Y-xe+1,Z[1]=A-Y+1,Z[2]=A-xe+1,Z[3]=q-A+1,Z[4]=q-Y+1,Z[5]=q-xe+1,Z[6]=G<<6,Z[7]=G+xe,Z[8]=G+Y,Z[9]=G+A,Z[10]=G+q;for(var ge=Z[0]|Z[1]<<1|Z[2]<<2|Z[3]<<3|Z[4]<<4|Z[5]<<5|Z[6]<<6|Z[7]<<8|Z[8]<<11|Z[9]<<14|Z[10]<<17,he=i.lookup4D[ge],ne=0;typeof he<"u";){var ue=[X+he.dx,y+he.dy,g+he.dz,h+he.dw],Te=ue[0],Fe=ue[1],ie=ue[2],Se=ue[3],se=2-Te*Te-Fe*Fe-ie*ie-Se*Se;if(se>0){var me=[te+he.xsb,ae+he.ysb,ee+he.zsb,pe+he.wsb],j=me[0],_e=me[1],Re=me[2],de=me[3],Pe=i.perm4D[i.perm[i.perm[i.perm[j&255]+_e&255]+Re&255]+de&255],Me=o.gradients4D[Pe]*Te+o.gradients4D[Pe+1]*Fe+o.gradients4D[Pe+2]*ie+o.gradients4D[Pe+3]*Se;se*=se,ne+=se*se*Me}he=he.next}return ne*o.NORM_4D}},typeof je<"u"&&(e.Point=function(t,r,i,o,l,f,d,p,w,k){qe("13.45"),n(t)&&(t=0),n(r)&&(r=0),n(i)&&(i=0),n(o)&&(o=0),n(l)&&(l=0),n(f)&&(f=0),n(d)&&(d=0),n(p)&&(p=0),n(w)&&(w=0),n(k)&&(k=0),this.createjsPoint_constructor(t,r),this.type="Point",this.x=t,this.y=r,this.z=i,this.q=o,this.r=l,this.s=f,this.t=d,this.u=p,this.v=w,this.w=k,this.angle=function(x){return this.createjsPoint_angle(x)*180/Math.PI},this.project=function(x,T){return this.createjsPoint_project(x*Math.PI/180,T)}},e.extend(e.Point,je.Point,["angle","project"],"createjsPoint")),e.Bezier=function(r,i,o,l){qe("13.47"),this.a=r,this.b=i,this.c=o,this.d=l,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var f=this.x(0),d=this.y(0),p=0,w=1;w<=this.len;w+=1){var k=this.x(w*.01),x=this.y(w*.01),T=f-k,S=d-x;p+=Math.sqrt(T*T+S*S),this.arcLengths[w]=p,f=k,d=x}this.length=p},e.Bezier.prototype={map:function(t){for(var r=t*this.arcLengths[this.len],i=0,o=this.len,l=0;i<o;)l=i+((o-i)/2|0),this.arcLengths[l]<r?i=l+1:o=l;this.arcLengths[l]>r&&l--;var f=this.arcLengths[l];return f===r?l/this.len:(l+(r-f)/(this.arcLengths[l+1]-f))/this.len},mx:function(t){return this.x(this.map(t))},my:function(t){return this.y(this.map(t))},x:function(t){return(1-t)*(1-t)*(1-t)*this.a.x+3*((1-t)*(1-t))*t*this.b.x+3*(1-t)*(t*t)*this.c.x+t*t*t*this.d.x},y:function(t){return(1-t)*(1-t)*(1-t)*this.a.y+3*((1-t)*(1-t))*t*this.b.y+3*(1-t)*(t*t)*this.c.y+t*t*t*this.d.y}},e.Boundary=function(t,r,i,o){qe("13.46"),t.x&&(o=t.height,i=t.width,r=t.y,t=t.x),!(n(t)||n(r)||n(i)||n(o))&&(this.x=t,this.y=r,this.width=i,this.height=o,this.contract=function(l,f,d,p){return n(l)?this:(n(f)&&(f=l),n(d)?d=l*2:d=d+l,n(p)?p=f*2:p=p+f,this.x+=l,this.y+=f,this.width-=d,this.height-=p,this)})},e.GradientColor=function(t,r,i,o,l,f){if(qe("13.465"),this.type="GradientColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=n(r)?0:r,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var d=0;d<this.colors.length;d++)this.ratios.push(d/(this.colors.length-1))}!n(i)&&(n(o)||n(l)||n(f))?(this.angle=i,i=null):n(this.angle)&&n(i)&&n(o)&&n(l)&&n(f)?this.angle=0:(this.x0=n(i)?0:i,this.y0=n(o)?0:o,this.x1=n(l)?0:l,this.y1=n(f)?100:f)},e.RadialColor=function(t,r,i,o,l,f,d,p){if(qe("13.466"),this.type="RadialColor",this.colors=n(t)?["black","white"]:t,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),this.colors.length==1&&this.colors.push(this.colors[0]),this.ratios=r,!Array.isArray(this.ratios)){this.ratios=[];for(var w=0;w<this.colors.length;w++)this.ratios.push(w/(this.colors.length-1))}this.x0=i,this.y0=o,this.r0=l,this.x1=f,this.y1=d,this.r1=p},e.BitmapColor=function(t,r,i){qe("13.467"),this.type="BitmapColor",typeof t=="string"&&le.asset&&(t=le.asset(t)),t.type!="Bitmap"&&t.bitmap&&(t=t.bitmap),this.image=t.type=="Bitmap"?t.image:t,this.repetition=r,this.matrix=i},e.Damp=function(t,r){qe("14");var i="startValue, damp",o;if(o=yt(e.Damp,arguments,i,this))return o;this.lastValue=n(t)?0:t,this.damp=n(r)?.1:r},e.Damp.prototype.convert=function(t){return this.lastValue=this.lastValue+(t-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(t){return this.lastValue=t,this},e.Proportion=function(t,r,i,o,l,f,d){var p="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",w;if(w=yt(e.Proportion,arguments,p,this))return w;qe("15"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=1),n(f)&&(f=!1),n(d)&&(d=!0);var k,x;this.convert=function(T){if(n(T)&&(T=t),!(isNaN(T)||r-t==0))return d&&(T=Math.max(T,t),T=Math.min(T,r)),k=(T-t)/(r-t),l>0?x=i+(o-i)*k:x=o-(o-i)*k,f&&(x=Math.round(x)),x}},e.ProportionDamp=function(t,r,i,o,l,f,d,p){var w="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",k;if(k=yt(e.ProportionDamp,arguments,w,this))return k;qe("16"),n(i)&&(i=0),n(o)&&(o=1),n(l)&&(l=.1),n(f)&&(f=1),n(d)&&(d=!1),n(p)&&(p=!0),this.damp=l;var x=this,T,S,b,E,R,C=0,O=0;T=t,O=i;var I=setInterval(_,20);function _(){isNaN(T)||r-t==0||(p&&(T=Math.max(T,t),T=Math.min(T,r)),S=(T-t)/(r-t),b=o-i,f>0?E=i+b*S:E=o-b*S,C=E,R=C-O,O+=R*x.damp)}this.immediate=function(P){return x.convert(P),_(),O=E,d&&(O=Math.round(O)),x},this.immediateValue=function(P){return C=O=P,x},this.convert=function(P){return T=P,d?Math.round(O):O},this.dispose=function(){return clearInterval(I),!0}},e.Dictionary=function(t){qe("17"),this.length=0,this.unique=t;var r=this.objects=[],i=this.values=[];this.type="Dictionary",this.add=function(o,l){n(o)||(n(l)&&(l=!0),this.unique&&this.remove(o),r.push(o),i.push(l),this.length++)},this.at=function(o){if(!n(o)){var l=r.indexOf(o);return l>-1?i[l]:null}},this.remove=function(o){if(n(o))return!1;var l=r.indexOf(o);return l>-1?(r.splice(l,1),i.splice(l,1),this.length--,!0):!1},this.clear=function(){return r=this.objects=[],i=this.values=[],this.length=null,this},this.dispose=function(){return r=null,i=null,this.length=null,!0}},e.Hierarchy=function(t,r){qe("17.5");var i=this;if(n(t))return;n(r)&&(r=!1);var o;i.processSimple=function(p){var w=0,k={};function x(T,S,b,E){if(n(T)||(p=T),p.constructor=={}.constructor){var R;p.list&&(R=p,p=p.list),E&&R&&e.loop(R,function(C,O){C!="list"&&(E[C]=O)}),e.loop(p,function(C,O){var I={},_=S["id"+w]={obj:C,level:b,open:r,opened:!1,list:I};w++,x(O,I,b+1,_)})}else Array.isArray(p)&&e.loop(p,function(C){S["id"+w]={obj:C},w++})}return x(t,k,0),o=w,k},i.processComplex=function(p){var w=0;function k(x,T){e.loop(x,function(S,b){b.level=T,n(b.open)&&(b.open=r),n(b.opened)&&(b.opened=!1),b.list&&k(b.list,T+1),w++})}return k(p,0),o=w,p},n(t.id0)?i.data=i.processSimple(t):i.data=i.processComplex(t),i.getLinearList=function(p){return n(p)&&(p=i.data),l(p)[0]},i.getLinearIDs=function(p){return n(p)&&(p=i.data),l(p)[1]};function l(p){var w=[],k=[];function x(T,S){e.loop(T,function(b,E){w.push(E.obj),k.push(b),E.open&&x(E.list,S+1)})}return x(p,0),[w,k]}i.getData=function(p){var w;function k(x){e.loop(x,function(T,S){if(T==p)return w=S,w;k(S.list)})}return k(i.data),w},i.getNextSibling=function(p){var w,k;function x(T){e.loop(T,function(S,b){if(!k&&w)return k=S,k;S==p?w=b:x(b.list)})}return x(i.data),k},i.getPrevSibling=function(p){var w=[],k;function x(T,S){e.loop(T,function(b,E){if(b==p)return k=w[S]||w[S-1],k;w[S]=b,x(E.list,S+1)})}return x(i.data,0),k},i.insertBefore=function(p,w,k){return f("insertBefore",p,w,k)},i.insertAfter=function(p,w,k){return f("insertAfter",p,w,k)},i.removeItem=function(p){return f("removeItem",null,p)},i.replaceItem=function(p,w){var k=i.getData(w);return k.obj=p,f("replaceItem")};function f(p,w,k,x){var T=0,S={},b=i.data;function E(R,C,O,I){e.loop(R,function(_,P){if(!(p=="removeItem"&&_==k)){var F,K,V;p=="insertBefore"&&_==k&&(T=d(C,T,O,w,x)),F={},K=P.list,P.list=F,P.opened=!1,P.open=!1,V=C["id"+T]=P,V.obj.type&&V.obj.type=="TabsButton"&&(V.obj=V.obj.text),T++,E(K,F,O+1),p=="insertAfter"&&_==k&&(T=d(C,T,O,w,x))}})}return E(b,S,0),o=T,S}function d(p,w,k,x,T){if(T){var S={};Array.isArray(x)&&(x=x[0]),p["id"+w]={obj:x,level:k,open:!1,opened:!1,list:S},w++,Array.isArray(T)||(T=[T]),e.loop(T,function(b){S["id"+w]={obj:b,level:k+1,open:!1,opened:!1,list:{}},w++})}else Array.isArray(x)||(x=[x]),e.loop(x,function(b){p["id"+w]={obj:b,level:k,open:!1,opened:!1,list:{}},w++});return w}i.getParent=function(p){var w=i.data;function k(x,T){var S=e.loop(x,function(b,E){if(b==p)return o-=1,T;if(E.list&&!e.isEmpty(E.list))return k(E.list,b)});if(S!==!0)return S}return k(w)},Object.defineProperty(i,"length",{get:function(){return o},set:function(){At&&ut("Hierarchy() - length is read only")}})},e.Pick=function(t){e.pickCheck||(qe("17.6"),e.pickCheck=!0),this.choices=t,this.num=function(i){for(var o=[],l=0;l<i;l++)o.push(e.Pick.choose(this));return this.choices=e.Pick.series(o),this};var r=this;this.loop=function(i,o){for(var l,f=0;f<i;f++)if(l=o(e.Pick.choose(r),f,i),typeof l<"u")return l}},e.Pick.prototype.type="Pick",e.Pick.series=function(){return e.pickCheck||(qe("17.6"),e.pickCheck=!0),e.series.apply(null,arguments)},e.Pick.rand=function(t,r,i,o){return e.pickCheck||(qe("17.6"),e.pickCheck=!0),e.rand(t,r,i,o)},e.Pick.choose=function(t,r,i){if(e.pickCheck||(qe("17.6"),e.pickCheck=!0),r==null&&(r=!0),t==null)return t;if(t.type=="Pick"||r){var o=t.choices||t,l;return Array.isArray(o)?(l=o[Math.floor(Math.random()*o.length)],e.Pick.choose(l)):o.constructor==={}.constructor?n(o.noPick)?n(o.max)?o:(n(o.integer)&&(o.integer=!1),l=e.Pick.rand(o.min,o.max,o.integer,o.negative),l):o.noPick:o instanceof Function?(o.count==null?o.count=0:o.count++,e.Pick.choose(o(i,!0))):t}else return t},e.Pick.getMinMax=function(t){return!n(t.min)&&!n(t.max)?t:Array.isArray(t)?e.arrayMinMax(t):t.type=="series"?e.arrayMinMax(t.array):{min:null,max:null}},e.scrollX=function(t,r){return qe("18"),e.abstractScroll("X","Left",t,r)},e.scrollY=function(t,r){return qe("19"),e.abstractScroll("Y","Top",t,r)},e.abstractScroll=function(t,r,i,o){qe("20");var l=v(o),f=t=="X"?"Y":"X";if(n(i))return document.documentElement&&document.documentElement["scroll"+r]||document.body["scroll"+r];if(n(o))le.scrollTo(e["scroll"+f](),i);else{var d=50,p=o*(l=="s"?1e3:1);p<d&&(p=d);var w=p/d,k=e["scroll"+t](),x=i-k,T=x/w,S=0,b=setInterval(function(){S++,k+=T,le.scrollTo(e["scroll"+f](),k),S>=w&&(le.scrollTo(e["scroll"+f](),i),clearInterval(b))},d)}return i},e.windowWidth=function(){qe("21");var t=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,r=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;if(e.mobile()&&!n(le.orientation)&&!le.parent&&(t>r&&Math.abs(le.orientation)!=90||r>t&&Math.abs(le.orientation)==90)){var i=t;t=r,r=i}return le.zdf&&le.zdf.swapRotation?r:t},e.windowHeight=function(){qe("22");var t=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,r=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;if(e.mobile()&&!n(le.orientation)&&!le.parent&&(t>r&&Math.abs(le.orientation)!=90||r>t&&Math.abs(le.orientation)==90)){var i=t;t=r,r=i}return le.zdf&&le.zdf.swapRotation?t:r},e.browserZoom=function(){if(e.zimBZ)return n(e.zimBZA)?e.decimals((le.devicePixelRatio||1)/e.zimBZ1,2):e.zimBZA;if(qe("22.2"),e.zimBZ=!0,typeof t>"u")if(le.zdf)var t=le.zdf;else return e.zimBZA=1,1;if(t.retina)e.zimBZ1=le.devicePixelRatio||1;else return e.zimBZA=1,1},e.getQueryString=function(t){if(qe("22.5"),n(t)&&(t=location.search.replace("?","")),t=="")return{};for(var r=t.split("&"),i={},o=0;o<r.length;o++){var l=r[o].split("=");typeof i[l[0]]>"u"?i[l[0]]=decodeURIComponent((l[1]+"").replace(/\+/g,"%20")):typeof i[l[0]]=="string"?i[l[0]]=[i[l[0]],decodeURIComponent((l[1]+"").replace(/\+/g,"%20"))]:i[l[0]].push(decodeURIComponent((l[1]+"").replace(/\+/g,"%20")))}return i},e.swapHTML=function(t,r){return qe("17.2"),e.swapProperties("innerHTML",wn(t),wn(r))},e.urlEncode=function(t){return qe("23"),t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(t){return qe("24"),decodeURIComponent((t+"").replace(/\+/g,"%20"))},e.setCookie=function(t,r,i){if(qe("25"),!(n(t)||n(r))){var o;if(i){var l=new Date;l.setTime(l.getTime()+i*24*60*60*1e3),o="; expires="+l.toGMTString()}else o="";return document.cookie=t+"="+escape(r)+o+"; path=/",!0}},e.getCookie=function(t){qe("26");for(var r=document.cookie.split(/;\s*/),i=new Array,o,l=0;l<r.length;l++)o=r[l].split("="),i[o[0]]=o[1];if(!(typeof i[t]>"u"))return unescape(i[t])},e.deleteCookie=function(t){return qe("27"),n(e.getCookie(t))?!1:(e.setCookie(t,"",-1),!0)},je==null)return At&&li("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.localToGlobal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var f=l.call(o,r,i),d=o.stage;if(!le.zdf){if(!d)return f;le.zdf={stage:d,canvas:d.canvas}}return f.x/=e.scaX,f.y/=e.scaY,f}},e.globalToLocal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null)){var f=o.stage;if(!le.zdf){if(!f)return l.call(o,r,i);le.zdf={stage:f,canvas:f.canvas}}r*=e.scaX,i*=e.scaY;var d=l.call(o,r,i);return d}},e.localToLocal=function(r,i,o,l){if(e.coordinatesCheck||(qe("50.43"),e.coordinatesCheck=!0),!(r==null||i==null||o==null)){var f=l.localToGlobal(r,i),d=l.stage;if(!le.zdf){if(!d)return o.globalToLocal(f.x,f.y);le.zdf={stage:d,canvas:d.canvas}}if(d||(d=le.zdf.stage),o==d)return f;if(f)return o.globalToLocal(f.x,f.y)}},e.displayBase=function(t){e.zimDBCheck||(qe("50.432"),e.zimDBCheck=!0);var r=t;if(Object.defineProperty(t,"width",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.width*this.scaleX)},set:function(p){if(t.scaleDimensions!==!1){var w=this.getBounds();if(n(w)||w.width==0){At&&ut("DisplayObject() - width needs bounds set with setBounds()");return}var k=p/w.width;this.scaleX=this.scaleY=k}else{var x=t.width!=0?t.height/t.width:0;t.setWidth(p),t.setHeight(p*x),t.drawShape()}}}),Object.defineProperty(t,"height",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.height*this.scaleY)},set:function(p){if(t.scaleDimensions!==!1){var w=this.getBounds();if(n(w)||w.height==0){At&&ut("DisplayObject() - height needs bounds set with setBounds()");return}var k=p/w.height;this.scaleX=this.scaleY=k}else{var x=t.height!=0?t.width/t.height:0;t.setHeight(p),t.setWidth(p*x),t.drawShape()}}}),Object.defineProperty(t,"widthOnly",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.width*this.scaleX)},set:function(p){if(t.scaleDimensions!==!1){var w=this.getBounds();if((n(w)||w.width==0)&&At){ut("DisplayObject() - widthOnly needs bounds set with setBounds()");return}var k=p/w.width;this.scaleX=k}else t.setWidth(p),t.drawShape()}}),Object.defineProperty(t,"heightOnly",{enumerable:!0,get:function(){var p=this.getBounds();return n(p)?null:Math.abs(p.height*this.scaleY)},set:function(p){if(t.scaleDimensions!==!1){var w=this.getBounds();if((n(w)||w.height==0)&&At){ut("DisplayObject() - heightOnly needs bounds set with setBounds()");return}var k=p/w.height;this.scaleY=k}else t.setHeight(p),t.drawShape()}}),Object.defineProperty(t,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(p){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(p,this.parent.numChildren-1)))}}),Object.defineProperty(t,"depth",{enumerable:!0,get:function(){return this._depth},set:function(p){if(this._depth=p,!n(this.vrChannel)){var w=this.vrParallaxDistance?p*this.vrParallax*this.vrParallaxDistance:0;this.vrChannel=="left"?this.x=this.vrStartX+p+w:this.vrChannel=="right"&&(this.x=this.vrStartX-p+w)}}}),Object.defineProperty(t,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(p){this.compositeOperation=p}}),!r.name){var i;Object.defineProperty(r,"name",{get:function(){return i},set:function(p){i=p,e.zimObjectIDs[p]=r}})}r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(p){p!=this._draggable&&(this._draggable=p,this._draggable?this.drag():this.noDrag())}});var o,l;r.on("mousedown",function(p){p.target.stage&&(o=p.target.stage.frame,o.allowDefault&&(l=!0,o.allowDefault=!1))}),r.on("pressup",function(){o&&l&&(o.allowDefault=!0)});for(var f=["hue","saturation","brightness","contrast"],d=0;d<f.length;d++)-function(){for(var p=f[d],w=0;w<2;w++)-function(){var k=w==0?"":"Batch";Object.defineProperty(r,p+k,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[p]:0},set:function(x){!r.effects||!r.effects.multi?r.effect(new e.MultiEffect(p=="hue"?x:0,p=="saturation"?x:0,p=="brightness"?x:0,p=="contrast"?x:0)):r.effects.multi[p]=x,k==""&&r.updateEffects()}})}()}()},e.gD=function(t){if(e.zimGDCheck||(qe("50.435"),e.zimGDCheck=!0),!!t){if(t.z_bc){var r=t.z_bc;r.width=r.height=1,r.getContext&&r.getContext("2d").clearRect(0,0,1,1),delete t.z_bc}e.KEYFOCUS==t&&(e.KEYFOCUS=null),le.KEYFOCUS==t&&(le.KEYFOCUS=null),t.veeObj&&(t.veeObj=null),t.draggable&&t.noDrag(),t.zimTweens&&t.stopAnimate(),t.zimWire&&t.noWire(),t.zimWired&&t.noWired(),t.zimClickHoldDownEvent&&t.noHold(),t.transformControls&&t.transformControls.dispose(),t.zimClickDownEvent&&(t.zimClickDownEvent=null),t.zimClickUpEvent&&(t.zimClickUpEvent=null),t.physics&&t.removePhysics(),t.name&&e.zimObjectIDs[t.name]==t&&delete e.zimObjectIDs[t.name]}},e.Stage=function(t,r,i){if(qe("50.44"),!n(t)){var o=t.tagName=="CANVAS"?t:wn(t);n(o)||(this.cjsStage_constructor(t),this.setBounds(0,0,o.width,o.height),this.type="Stage",le.zdf||(le.zimDefaultFrame=le.zdf={stage:this}),i?je.Touch.enable(this,!0):r&&je.Touch.enable(this,!1),this.cache=function(l,f,d,p,w,k){if(n(d))if(n(l)){var x=this.getBounds();if(!n(x)){var T=this.borderWidth>0?this.borderWidth/2:0;l=x.x-T,f=x.y-T,d=x.width+T*2,p=x.height+T*2}}else d=l,p=f,l=0,f=0;return this.cjsStage_cache(l,f,d,p,w,k),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(l){var f=l.clone();f.type="pressdown",l.target.dispatchEvent(f)},void 0,!1,void 0,!0),this.loop=function(l,f,d,p,w,k){return e.loop(this,l,f,d,p,w,k)},this.hitTestGrid=function(l,f,d,p,w,k,x,T,S,b,E,R){return e.hitTestGrid(this,l,f,d,p,w,k,x,T,S,b,E,R)},this.disposeAllChildren=function(){for(var l=this.numChildren-1;l>=0;l--){var f=this.getChildAt(l);f.dispose&&f.dispose()}return this},this.frame=le.zdf,je&&!je.stageTransformable&&(le.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(l){this.cjsStage_scaleX=l,this.cjsStage_scaleY=l,e.scaX=je.stageTransformable?1:l,e.scaY=je.stageTransformable?1:l}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(l){this.cjsStage_scaleX=l,e.scaX=je.stageTransformable?1:l}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(l){this.cjsStage_scaleY=l,e.scaY=je.stageTransformable?1:l}}),this.localToGlobal=function(l,f){return e.localToGlobal(l,f,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(l,f){return e.globalToLocal(l,f,this,this.cjsStage_globalToLocal)},this.localToLocal=function(l,f,d){return e.localToLocal(l,f,d,this)}))}},e.extend(e.Stage,je.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),e.StageGL=function(t,r,i,o){if(qe("50.45"),!n(t)){var l=t.tagName=="CANVAS"?t:wn(t);n(l)||(this.cjsStageGL_constructor(t,r),this.setBounds(0,0,l.width,l.height),this.type="StageGL",le.zdf||(le.zdf={stage:this}),o?je.Touch.enable(this,!0):i&&je.Touch.enable(this,!1),this.cache=function(f,d,p,w,k,x){if(n(p))if(n(f)){var T=this.getBounds();if(!n(T)){var S=this.borderWidth>0?this.borderWidth/2:0;f=T.x-S,d=T.y-S,p=T.width+S*2,w=T.height+S*2}}else p=f,w=d,f=0,d=0;return this.cjsStageGL_cache(f,d,p,w,k,x),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(f){var d=f.clone();d.type="pressdown",f.target.dispatchEvent(d)},void 0,!1,void 0,!0),this.loop=function(f,d,p,w,k,x){return e.loop(this,f,d,p,w,k,x)},this.hitTestGrid=function(f,d,p,w,k,x,T,S,b,E,R,C){return e.hitTestGrid(this,f,d,p,w,k,x,T,S,b,E,R,C)},this.disposeAllChildren=function(){for(var f=this.numChildren-1;f>=0;f--){var d=this.getChildAt(f);d.dispose&&d.dispose()}return this},this.frame=le.zdf,je&&!je.stageTransformable&&(le.zdf.retina||typeof exportRoot<"u")&&(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(f){this.cjsStage_scaleX=f,this.cjsStage_scaleY=f,e.scaX=je.stageTransformable?1:f,e.scaY=je.stageTransformable?1:f}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(f){this.cjsStage_scaleX=f,e.scaX=je.stageTransformable?1:f}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(f){this.cjsStage_scaleY=f,e.scaY=je.stageTransformable?1:f}}),this.localToGlobal=function(f,d){return e.localToGlobal(f,d,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(f,d){return e.globalToLocal(f,d,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(f,d,p){return e.localToLocal(f,d,p,this)}))}},e.extend(e.StageGL,je.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),e.Container=function(t,r,i,o,l,f,d){var p="a, b, c, d, style, group, inherit",w;if(w=yt(e.Container,arguments,p,this))return w;e.containerCheck||(qe("50.5"),qe("50.435"),e.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=f;var k=this,x=l===!1?{}:e.getStyle(this.type,this.group,d);n(t)&&(t=x.a!=null?x.a:null),n(r)&&(r=x.b!=null?x.b:null),n(i)&&(i=x.c!=null?x.c:null),n(o)&&(o=x.d!=null?x.d:null);var T=S(t,r,i,o);function S(E,R,C,O){var I=[];return n(E)?I=[E,R,C,O]:n(R)?E.x?I=[E.x,E.y,E.width,E.height]:(I[0]=0,I[1]=0,I[2]=E,I[3]=E):n(C)?(I[0]=0,I[1]=0,I[2]=E,I[3]=R):(I[0]=E,I[1]=R,I[2]=C,I[3]=O),n(I[3])&&(I[3]=I[2]),I}n(t)||this.setBounds(T[0],T[1],T[2],T[3]),this.cache=function(E,R,C,O,I,_,P,F,K){if(k.type=="AC"&&le.zdf)return le.zdf.ac("cache",arguments,k),k;var V="a,b,c,d,scale,options,margin,rtl,willReadFrequently",D;if(D=yt(k.cache,arguments,V))return D;var U=k.getBounds();if(n(C))if(n(E)){if(!n(U)){var Q=k.borderWidth>0?k.borderWidth/2:0;E=U.x-Q,R=U.y-Q,C=U.width+Q*2,O=U.height+Q*2}}else C=E,O=R,E=0,R=0;return k.type=="Triangle"&&(E-=k.borderWidth?k.borderWidth:0,C+=k.borderWidth?k.borderWidth*2:0,R-=k.borderWidth?k.borderWidth:0,O+=k.borderWidth?k.borderWidth*2:0),n(P)&&(P=0),k.cjsContainer_cache(E-P,R-P,C+P*2,O+P*2,I,_,F,K),U&&k.setBounds(U.x,U.y,U.width,U.height),k.z_bc=k.canvas=k.cacheCanvas,k},this.uncache=function(){return k.cjsContainer_uncache(),k},this.childrenToBitmap=function(){var E=this.cacheCanvas,R=new e.Bitmap(this.cache().cacheCanvas);return E||this.uncache(),this.removeAllChildren(),R.addTo(this),this};var b=le.zdf||1;je&&!je.stageTransformable&&b.retina&&(this.localToGlobal=function(E,R){return e.localToGlobal(E,R,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(E,R){return e.globalToLocal(E,R,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(E,R,C){return e.localToLocal(E,R,C,this)}),this.setBounds=function(E,R,C,O){var I=S(E,R,C,O);return k.cjsContainer_setBounds(I[0],I[1],I[2],I[3]),k},this.getBounds=function(E){return E?k.boundsToGlobal(null,null,null,E):k.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var E=this.numChildren-1;E>=0;E--){var R=this.getChildAt(E);R.dispose&&R.dispose()}return this},e.displayBase(k),l!==!1&&e.styleTransforms(this,x),this.clone=function(E){if(this.type=="AC"&&le.zdf)return At&&ut("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),le.zdf.ac("clone",arguments,this),this;var R=this.getBounds();return n(R)&&(R={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new e.Container(R.x,R.y,R.width,R.height,l,this.group,d)),E)},this.hasProp=function(E){return!n(this[E])||Object.prototype.hasOwnProperty.call(this,E)}},e.Container.prototype.dispose=function(t){return u(this,t),!0},e.Container.prototype.specialColor=function(t,r,i){if(r.type=="GradientColor"){if(!n(r.angle))if(i.width){var o=i.getBounds();if(r.angle+=360*1e5,r.angle%=360,i.type=="Circle"){var l=o.width/2*Math.cos(r.angle*RAD),f=o.width/2*Math.sin(r.angle*RAD);r.x0=-l,r.y0=-f,r.x1=l,r.y1=f}else{var d=r.angle%90,p=o.width*Math.sin(d*RAD),w=p*Math.sin(d*RAD),k=-p*Math.cos(d*RAD),x=o.height*Math.sin(d*RAD),T=o.width+x*Math.cos(d*RAD),S=x*Math.sin(d*RAD),b=o.height*Math.sin(d*RAD),E=-b*Math.cos(d*RAD),R=o.height-b*Math.sin(d*RAD);r.angle>=0&&r.angle<90?(r.x0=o.x+w,r.y0=o.y+k,r.x1=o.x+T,r.y1=o.y+S):r.angle>=90&&r.angle<180?(r.x0=o.x+w,r.y0=o.y+k,r.x1=o.x+E,r.y1=o.y+R):r.angle>=180&&r.angle<270?(r.x0=o.x+T,r.y0=o.y+S,r.x1=o.x+w,r.y1=o.y+k):(r.x0=o.x+E,r.y0=o.y+R,r.x1=o.x+w,r.y1=o.y+k)}}else{t.style=r.colors[0];return}t.linearGradient(r.colors,r.ratios,r.x0,r.y0,r.x1,r.y1)}else if(r.type=="RadialColor"){if(n(r.x0))if(i.width){var o=i.getBounds();r.r0=0,i.type=="Circle"?(r.x0=0,r.y0=0,r.r1=o.width/2):(r.x0=o.x+o.width/2,r.y0=o.y+o.height/2,r.r1=Math.sqrt(Math.pow(o.width/2,2)+Math.pow(o.height/2,2))),r.x1=r.x0,r.y1=r.y0}else{t.style=r.colors[0];return}t.radialGradient(r.colors,r.ratios,r.x0,r.y0,r.r0,r.x1,r.y1,r.r1)}else r.type=="BitmapColor"&&t.bitmap(r.image,r.repetition,r.matrix)};function u(t,r){if(t&&e.gD(t),!r&&t&&t.dispose&&t.dispose!==e.Container.prototype.dispose&&t.dispose(null,null,!0),t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var i=t.numChildren-1;i>=0;i--)u(t.getChildAt(i));t&&t.parent&&t.parent.removeChild(t)}e.extend(e.Container,je.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),Wn(e.Container.prototype),e.Shape=function(t,r,i,o,l,f,d,p,w){var k="a, b, c, d, graphics, optimize, style, group, inherit",x;if(x=yt(e.Shape,arguments,k,this))return x;qe("50.6"),this.cjsShape_constructor(l),this.type="Shape",this.group=p;var T=d===!1?{}:e.getStyle(this.type,this.group,w),S=this;n(t)&&(t=T.a!=null?T.a:null),n(r)&&(r=T.b!=null?T.b:null),n(i)&&(i=T.c!=null?T.c:null),n(o)&&(o=T.d!=null?T.d:null),n(l)&&(l=T.graphics!=null?T.graphics:null),n(f)&&(f=T.optimize!=null?T.optimize:!1);var b=E(t,r,i,o);function E(I,_,P,F){var K=[];return n(I)?K=[I,_,P,F]:n(_)?I.x?K=[I.x,I.y,I.width,I.height]:(K[0]=0,K[1]=0,K[2]=I,K[3]=I):n(P)?(K[0]=0,K[1]=0,K[2]=I,K[3]=_):(K[0]=I,K[1]=_,K[2]=P,K[3]=F),n(K[3])&&(K[3]=K[2]),K}if(n(t)||this.setBounds(b[0],b[1],b[2],b[3]),!f)for(var R=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],C=0;C<R.length;C++)~function(){var I=C;S[R[I]]=function(){return R[I]=="ct"?S.graphics.curveTo.apply(S.graphics,arguments):S.graphics[R[I]].apply(S.graphics,arguments),S}}();Object.defineProperty(S,"command",{get:function(){return S.graphics.command},set:function(){}}),this.cache=function(I,_,P,F,K,V,D,U,Q){var J="a,b,c,d,scale,options,margin,rtl,willReadFrequently",N;if(N=yt(S.cache,arguments,J))return N;var te=S.getBounds();if(n(P))if(n(I)){if(!n(te)){var ae=S.borderWidth>0?S.borderWidth/2:0;I=te.x-ae,_=te.y-ae,P=te.width+ae*2,F=te.height+ae*2}}else P=I,F=_,I=0,_=0;return n(D)&&(D=0),S.cjsShape_cache(I-D,_-D,P+D*2,F+D*2,K,V,U,Q),S.z_bc=S.canvas=S.cacheCanvas,S},this.setBounds=function(I,_,P,F){var K=E(I,_,P,F);return this.cjsShape_setBounds(K[0],K[1],K[2],K[3]),this},this.getBounds=function(I){return I?S.boundsToGlobal(null,null,null,I):S.cjsShape_getBounds()},d!==!1&&e.styleTransforms(this,T),this.clone=function(I){n(I)&&(I=!0);var _=this.getBounds();n(_)&&(_={x:null,y:null,width:null,height:null});var P=S.cloneProps(new e.Shape(_.x,_.y,_.width,_.height,l,d,p,w));return I?P.graphics=S.graphics.clone():P.graphics=S.graphics,P};var O=le.zdf||1;je&&!je.stageTransformable&&O.retina&&(this.localToGlobal=function(I,_){return e.localToGlobal(I,_,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(I,_){return e.globalToLocal(I,_,this,this.cjsShape_globalToLocal)},this.localToLocal=function(I,_,P){return e.localToLocal(I,_,P,this)}),this.hasProp=function(I){return!n(this[I])||Object.prototype.hasOwnProperty.call(this,I)},e.displayBase(S),this.dispose=function(){e.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Shape,je.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),Wn(e.Shape.prototype),e.Bitmap=function(t,r,i,o,l,f,d,p,w){var k="image, width, height, left, top, scale, style, group, inherit",x;if(x=yt(e.Bitmap,arguments,k,this))return x;qe("50.7"),this.group=p;var T=d===!1?{}:e.getStyle("Bitmap",this.group,w);n(f)&&(f=T.scale!=null?T.scale:1),n(r)&&(r=T.width!=null?T.width:t?t.width:100),n(i)&&(i=T.height!=null?T.height:t?t.height:100),n(o)&&(o=T.left!=null?T.left:0),n(l)&&(l=T.top!=null?T.top:0);var S=!1,b=t;if(!n(t)&&t.uncache){S=!0;var E=t.cacheCanvas,R=t;t.cache(o,l,r,i,f),this.z_bc=t=t.cacheCanvas}this.cjsBitmap_constructor(t),R&&!E&&R.uncache();var C=this;this.type="Bitmap",!n(r)&&!n(i)&&this.setBounds(0,0,r,i),this.drawImageData=function(P,F,K,V,D,U){if(n(P)&&(P=0),n(F)&&(F=0),n(K)&&(K=0),n(V)&&(V=0),n(D)&&(D=r),n(U)&&(U=i),!C.proxyCanvas){var Q=C.proxyCanvas=document.createElement("canvas");Q.setAttribute("width",r),Q.setAttribute("height",i),C.proxyContext=Q.getContext("2d"),t=b=C.image=Q}C.proxyContext&&C.proxyContext.putImageData(C.imageData,P,F,K,V,D,U)},le.zdf&&(le.zdf.canvas.getContext("2d")?this.imageData=le.zdf.canvas.getContext("2d").createImageData(r,i):this.imageData=document.createElement("canvas").getContext("2d").createImageData(r,i),n(t)&&C.drawImageData(),t&&t.match&&t.match(/data:image/i)&&setTimeout(function(){C.stage&&C.stage.update(),setTimeout(function(){C.stage&&C.stage.update()},50)},50)),t&&t.nodeName&&t.nodeName.toLowerCase()!="video"&&(S?C.sourceRect={x:0,y:0,width:r*f,height:i*f}:C.sourceRect={x:o,y:l,width:r,height:i});function O(P,F,K,V){var D=[];return n(P)?D=[P,F,K,V]:n(F)?P.x?D=[P.x,P.y,P.width,P.height]:(D[0]=0,D[1]=0,D[2]=P,D[3]=P):n(K)?(D[0]=0,D[1]=0,D[2]=P,D[3]=F):(D[0]=P,D[1]=F,D[2]=K,D[3]=V),n(D[3])&&(D[3]=D[2]),D}this.setBounds=function(P,F,K,V){var D=O(P,F,K,V);return C.cjsBitmap_setBounds(D[0],D[1],D[2],D[3]),C},this.getBounds=function(P){return P?C.boundsToGlobal(null,null,null,P):C.cjsBitmap_getBounds()},this.cache=function(P,F,K,V,D,U,Q,J){var N="a,b,c,d,scale,options,rtl,willReadFrequently",te;if(te=yt(C.cache,arguments,N))return te;var ae;if(n(K))if(n(P)){if(ae=this.getBounds(),!n(ae)){var ee=this.borderWidth>0?this.borderWidth/2:0;P=ae.x-ee,F=ae.y-ee,K=ae.width+ee*2,V=ae.height+ee*2}}else K=P,V=F,P=0,F=0;return ae=C.getBounds(),C.cjsBitmap_cache(P,F,K,V,D,U,Q,J),C.setBounds(ae.x,ae.y,ae.width,ae.height),C.z_bc=C.canvas=C.cacheCanvas,C},this.clone=function(){var P=this.cloneProps(new e.Bitmap(b,r,i,o,l,f,d,this.group,w));return P.cloned=!0,P.src=C.src,P.file=C.file,P.image=C.image,P.svg=C.svg,P.item=C.item,P};var I=le.zdf||1;je&&!je.stageTransformable&&I.retina&&(this.localToGlobal=function(P,F){return e.localToGlobal(P,F,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(P,F){return e.globalToLocal(P,F,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(P,F,K){return e.localToLocal(P,F,K,this)}),this.hasProp=function(P){return!n(this[P])||Object.prototype.hasOwnProperty.call(this,P)};var _;this.getColorAt=function(P,F,K){_||(C.cache(null,null,null,null,null,null,null,!0),_=C.cacheCanvas.getContext("2d"),C.uncache());var V=_.getImageData(P,F,1,1).data;return V[3]/=255,K?V:"rgba("+V[0]+","+V[1]+","+V[2]+","+V[3]+")"},this.keyOut=function(P,F,K){n(P)&&(P="#389b26"),n(F)&&(F=.1),Array.isArray(P)||(P=[P]),Array.isArray(F)||(F=[F]),!n(K)&&!Array.isArray(K)&&(K=[K]);var V,D,U=[],Q=[],J=[];for(V=0;V<P.length;V++)U[V]=e.convertColor(P[V],"array"),F[V]!=null?Q[V]=F[V]*255:Q[V]=F[0]*255,K&&(K[V]!=null?(J[V]=e.convertColor(K[V],"array"),J[V][3]*=255):(J[V]=e.convertColor(K[0],"array"),J[V][3]*=255));C.cacheCanvas&&C.updateCache(),_||(C.cache(null,null,null,null,null,null,null,!0),_=C.cacheCanvas.getContext("2d"));var N=_.getImageData(o,l,r,i),te=N.data,ae=te.length/4;if(K)for(V=0;V<ae;V++){var ee=te[V*4+0],pe=te[V*4+1],$=te[V*4+2];for(D=0;D<P.length;D++)ee>U[D][0]-Q[D]&&ee<U[D][0]+Q[D]&&pe>U[D][1]-Q[D]&&pe<U[D][1]+Q[D]&&$>U[D][2]-Q[D]&&$<U[D][2]+Q[D]&&(te[V*4+0]=J[D][0],te[V*4+1]=J[D][1],te[V*4+2]=J[D][2],te[V*4+3]=J[D][3])}else for(V=0;V<ae;V++){var ee=te[V*4+0],pe=te[V*4+1],$=te[V*4+2];for(D=0;D<P.length;D++)ee>U[D][0]-Q[D]&&ee<U[D][0]+Q[D]&&pe>U[D][1]-Q[D]&&pe<U[D][1]+Q[D]&&$>U[D][2]-Q[D]&&$<U[D][2]+Q[D]&&(te[V*4+3]=0)}return _.putImageData(N,l,o),this},e.displayBase(C),d!==!1&&e.styleTransforms(this,T),this.doDispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&(this.stage&&this.stage.frame?I=this.stage.frame:I=le.zdf,I&&I.assets&&I.assets[this.id]&&delete I.assets[this.id],e.assets[this.id]&&delete e.assets[this.id]),this.parent&&this.parent.removeChild(this)}},e.Bitmap.fromData=function(t,r){var i=100,o=100,l=new Image;l.onload=function(){i=l.naturalWidth,o=l.naturalHeight,n(i)&&(i=l.width),n(o)&&(o=l.height);var f=new e.Bitmap(t,i,o);setTimeout(function(){r(f)},50)},l.src=t},e.extend(e.Bitmap,je.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),e.Bitmap.prototype.dispose=function(){return this.doDispose()},Wn(e.Bitmap.prototype),e.Sprite=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_){var P="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",F;if(F=yt(e.Sprite,arguments,P,this))return F;qe("50.8"),this.type="Sprite",this.group=I;var K=O===!1?{}:e.getStyle(this.type,this.group,_),V=this,D;if(n(C)&&(C=K.frame!=null?K.frame:le.zdf),t&&typeof t=="string"&&(t=C.asset(t)),n(T)&&!n(t)){n(r)&&(r=K.cols!=null?K.cols:1),n(i)&&(i=K.rows!=null?K.rows:1),n(o)&&(o=K.count!=null?K.count:r*i),n(l)&&(l=K.offsetX!=null?K.offsetX:0),n(f)&&(f=K.offsetY!=null?K.offsetY:0),n(d)&&(d=K.spacingX!=null?K.spacingX:0),n(p)&&(p=K.spacingY!=null?K.spacingY:0),n(w)&&(w=K.width!=null?K.width:t.width),n(k)&&(k=K.height!=null?K.height:t.height),t.bitmap&&(t=t.bitmap);var U=(w-l+d)/r-d,Q=(k-f+p)/i-p,J=[],N=0;e:for(var te=0;te<i;te++)for(var ae=0;ae<r;ae++){if(++N>o)break e;J.push([l+ae*(U+d),f+te*(Q+p),U,Q])}g(t,J,x)}else if(E)D=E,x=D.animations;else if(T){var C=V.stage?V.stage.frame:le.zdf;typeof T=="string"&&(T=C.asset(T));var ee,pe,$;if(T.frames&&!Array.isArray(T.frames)){ee=[];for(pe in T.frames)$=T.frames[pe].frame,ee.push([$.x,$.y,$.w,$.h]);T.frames=ee}if(T.frames&&!Array.isArray(T.frames[0])){for(ee=[],pe=0;pe<T.frames.length;pe++){var $=T.frames[pe].frame;ee.push([$.x,$.y,$.w,$.h])}T.frames=ee}if(!T.images&&T.meta&&T.meta.image&&(T.images=[T.meta.image]),J=T.frames,x=T.animations,!n(t))g(t,J,x);else{var X=T.images?T.images[0]:null;if(!X||!X.split)D=new je.SpriteSheet(T);else{var y=[];e.loop(T.images,function(Y){var xe=Y.split("/").pop();C.asset(xe)&&C.asset(xe).type!="EmptyAsset"?y.push(C.asset(xe)):C.asset(Y)&&C.asset(Y).type!="EmptyAsset"||C.asset(Y).type!="EmptyAsset"?y.push(C.asset(Y)):At&&ut("Sprite() - please preload Sprite in Frame or with loadAssets")}),g(y,J,x)}}}else return;function g(A,Y,xe){Array.isArray(A)||(A=[A]),e.loop(A,function(Z,ge){A[ge]=Z.image});var G={images:A,frames:Y,animations:xe||[]};D=new je.SpriteSheet(G)}this.animations=x,this.cjsSprite_constructor(D,R),n(R)||this.stop(),n(S)&&(S=e.makeID()),this.id=S,n(b)&&(b=!0),V.globalControl=b;var h=0,L;this.parseFrames=function(A,Y,xe,G){var Z=[],ge=Number.MAX_VALUE,he=0;if(n(A))n(Y)&&(Y=0),n(xe)&&(xe=V.totalFrames-1),ie(Y,xe);else{if(n(V.animations)||n(V.animations[A]))return[];var ne=V.animations[A];ue(ne)}function ue(Re){Array.isArray(Re)?Te(Re):Re.constructor=={}.constructor?Fe(Re):isNaN(Re)||Z.push({f:Math.floor(Re),s:1})}function Te(Re){ie(Re[0],Re[1],Re[3]),Re[2]&&!n(V.animations[Re[2]])&&ue(V.animations[Re[2]])}function Fe(Re){if(!n(Re.frames)){n(Re.speed)&&(Re.speed=1);for(var de=0;de<Re.frames.length;de++)Re.speed<ge&&(ge=Re.speed),Re.speed>he&&(he=Re.speed),Z.push({f:Re.frames[de],s:Re.speed});Re.next&&!n(V.animations[Re.next])&&ue(V.animations[Re.next])}}function ie(Re,de,Pe){n(Pe)&&(Pe=1);var Me;if(de>Re)for(Me=Re;Me<=de;Me++)fe(Me);else for(Me=de;Me<=Re;Me++)fe(Re-(Me-de));function fe(ve){Pe<ge&&(ge=Pe),Pe>he&&(he=Pe),Z.push({f:ve,s:Pe})}}if(G)return Z;ge=e.constrain(e.decimals(ge),.1),he=e.constrain(e.decimals(he),.1);for(var Se=[],se=ge!=he,me,j=0;j<Z.length;j++)if(me=Z[j],se)for(var _e=0;_e<e.constrain(Math.round(ge<1?me.s/ge:me.s),.1);_e++)Se.push(me.f);else Se.push(me.f);return Se},this.run=function(A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re,de,Pe,Me,fe,ve,Ie,we,Xe,ye,Ge,He){var Oe="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur",ce;if(ce=yt(V.run,arguments,Oe))return ce;var Ue=v(),Qe;n(Xe)&&(Xe=1),n(ye)||(V.id=ye),n(Ge)||(V.globalControl=Ge);var Je;if(Array.isArray(Y)){var nt,gt;Qe=[],Je=0;for(var We,st=0;st<Y.length;st++){nt=Y[st],nt.lookup=V.parseFrames(nt.label,nt.startFrame,nt.endFrame),st==0&&(We=nt.lookup[0]),delete nt.startFrame,delete nt.endFrame,nt.obj=e.merge(nt.obj,{normalizedFrame:nt.lookup.length-1}),nt.set=e.merge(nt.set,{normalizedFrames:{noPick:nt.lookup},normalizedFrame:0}),n(nt.wait)&&(nt.wait=Je*Xe),gt=nt.label,delete nt.label,Qe.push(nt),Je=0;var at=n(nt.time)?A:nt.time;we-Ie>0&&(Je=at/(we-Ie)/2)}if(Qe.length==0)return this;Qe.length==1?(A=Qe[0].time,Y=gt,Ae()):V.gotoAndStop(We)}else Ae();function Ae(){L=V.parseFrames(Y,Ie,we),h=0,V.gotoAndStop(L[h]),Ie=we=null,Qe={normalizedFrame:L.length-1}}n(A)&&(A=Ue=="s"?1:1e3),V.running&&V.stopAnimate(V.id),V.running=!0,Array.isArray(Qe)||(Je=0,we-Ie>0&&(Je=A/Math.abs(we-Ie)/2),L&&L.length>0&&(Je=A/L.length/2),!n(ne)&&n(Te)&&(Te=Je*Xe),!n(j)&&n(_e)&&(_e=Je*Xe));var Le=function(){V.running=!1,V.stop(),xe&&typeof xe=="function"&&xe(G||V)};return e.animate({target:V,obj:Qe,time:A,ease:"linear",call:Le,params:G,wait:Z,waitedCall:ge,waitedParams:he,loop:ne,loopCount:ue,loopWait:Te,loopCall:Fe,loopParams:ie,loopWaitCall:Se,loopWaitParams:se,rewind:j,rewindWait:_e,rewindCall:Re,rewindParams:de,rewindWaitCall:Pe,rewindWaitParams:Me,rewindTime:fe,rewindEase:ve,override:!1,pauseOnBlur:He,id:V.id}),V.runPaused=!1,V},this.runPaused=!0,this.pauseRun=function(A){return n(A)&&(A=!0),V.runPaused=A,V.globalControl?e.pauseAnimate(A,V.id):V.pauseAnimate(A,V.id),V},this.stopRun=function(){return V.runPaused=!0,V.running=!1,V.globalControl?e.stopAnimate(V.id):V.stopAnimate(V.id),V},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(A){A=Math.round(A),this.paused?this.gotoAndStop(A):this.gotoAndPlay(A)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return h},set:function(A){h=Math.round(A),this.gotoAndStop(L[h])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return L},set:function(A){L=A}}),Object.defineProperty(this,"totalFrames",{get:function(){return D.getNumFrames()},set:function(){ut("zim.Sprite - totalFrames is read only")}}),O!==!1&&e.styleTransforms(this,K),this.clone=function(){var A=this.cloneProps(new e.Sprite(t,r,i,o,l,f,d,p,w,k,x,T,null,b,E,R,C,O,this.group,_));return V.frame>=0&&A.run({startFrame:V.frame,endFrame:V.frame}),A},je&&!je.stageTransformable&&C.retina&&(this.localToGlobal=function(A,Y){return e.localToGlobal(A,Y,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(A,Y){return e.globalToLocal(A,Y,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(A,Y,xe){return e.localToLocal(A,Y,xe,this)}),this.hasProp=function(A){return!n(this[A])||Object.prototype.hasOwnProperty.call(this,A)},e.displayBase(V);function q(A,Y,xe,G){var Z=[];return n(A)?Z=[A,Y,xe,G]:n(Y)?A.x?Z=[A.x,A.y,A.width,A.height]:(Z[0]=0,Z[1]=0,Z[2]=A,Z[3]=A):n(xe)?(Z[0]=0,Z[1]=0,Z[2]=A,Z[3]=Y):(Z[0]=A,Z[1]=Y,Z[2]=xe,Z[3]=G),n(Z[3])&&(Z[3]=Z[2]),Z}this.setBounds=function(A,Y,xe,G){var Z=q(A,Y,xe,G);return V.cjsSprite_setBounds(Z[0],Z[1],Z[2],Z[3]),V},this.getBounds=function(A){return A?V.boundsToGlobal(null,null,null,A):V.cjsSprite_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Sprite,je.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),Wn(e.Sprite.prototype),e.MovieClip=function(t,r,i,o,l,f,d){var p="mode, startPosition, loop, labels, style, group, inherit",w;if(w=yt(e.MovieClip,arguments,p,this))return w;qe("50.9"),this.type="MovieClip",this.group=f;var k=l===!1?{}:e.getStyle(this.type,this.group,d);n(t)&&(t=k.mode!=null?k.mode:null),n(r)&&(r=k.startPosition!=null?k.startPosition:null),n(i)&&(i=k.loop!=null?k.loop:null),n(o)&&(o=k.labels!=null?k.labels:null),this.cjsMovieClip_constructor(t,r,i,o),l!==!1&&e.styleTransforms(this,k),this.clone=function(){return this.cloneProps(new e.MovieClip(t,r,i,o,l,this.group,d))},this.hasProp=function(S){return!n(this[S])||Object.prototype.hasOwnProperty.call(this,S)};var x=le.zdf||1;je&&!je.stageTransformable&&x.retina&&(this.localToGlobal=function(S,b){return e.localToGlobal(S,b,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(S,b){return e.globalToLocal(S,b,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(S,b,E){return e.localToLocal(S,b,E,this)}),e.displayBase(this);function T(S,b,E,R){var C=[];return n(S)?C=[S,b,E,R]:n(b)?S.x?C=[S.x,S.y,S.width,S.height]:(C[0]=0,C[1]=0,C[2]=S,C[3]=S):n(E)?(C[0]=0,C[1]=0,C[2]=S,C[3]=b):(C[0]=S,C[1]=b,C[2]=E,C[3]=R),n(C[3])&&(C[3]=C[2]),C}this.setBounds=function(S,b,E,R){var C=T(S,b,E,R);return that.cjsMovieClip_setBounds(C[0],C[1],C[2],C[3]),that},this.getBounds=function(S){return S?that.boundsToGlobal(null,null,null,S):that.cjsMovieClip_getBounds()},this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.MovieClip,je.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),Wn(e.MovieClip.prototype),e.SVGContainer=function(t,r,i,o,l,f,d,p){var w="svg, splitTypes, geometric, showControls, interactive, style, group, inherit",k;if(k=yt(e.SVGContainer,arguments,w,this))return k;qe("50.95"),this.group=d;var x=f===!1?{}:e.getStyle("SVGContainer",this.group,p);t&&t.type=="Bitmap"&&(t=t.svg);var T=this,S=new e.Point(0,0),b;function E(){function q(Fe,ie){return Z(Fe)||G(Fe,ie)||Y(Fe,ie)||A()}function A(){throw new TypeError("Invalid")}function Y(Fe,ie){if(Fe){if(typeof Fe=="string")return xe(Fe,ie);var Se=Object.prototype.toString.call(Fe).slice(8,-1);if(Se==="Object"&&Fe.constructor&&(Se=Fe.constructor.name),Se==="Map"||Se==="Set")return Array.from(Fe);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return xe(Fe,ie)}}function xe(Fe,ie){(ie==null||ie>Fe.length)&&(ie=Fe.length);for(var Se=0,se=new Array(ie);Se<ie;Se++)se[Se]=Fe[Se];return se}function G(Fe,ie){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Fe)))){var Se=[],se=!0,me=!1,j=void 0;try{for(var _e=Fe[Symbol.iterator](),Re;!(se=(Re=_e.next()).done)&&(Se.push(Re.value),!(ie&&Se.length===ie));se=!0);}catch(de){me=!0,j=de}finally{try{!se&&_e.return!=null&&_e.return()}finally{if(me)throw j}}return Se}}function Z(Fe){if(Array.isArray(Fe))return Fe}var ge=Math.PI*2,he=function(ie,Se,se,me,j,_e,Re){var de=ie.x,Pe=ie.y;de*=Se,Pe*=se;var Me=me*de-j*Pe,fe=j*de+me*Pe;return{x:Me+_e,y:fe+Re}},ne=function(ie,Se){var se=Se===1.5707963267948966?.551915024494:Se===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Se/4),me=Math.cos(ie),j=Math.sin(ie),_e=Math.cos(ie+Se),Re=Math.sin(ie+Se);return[{x:me-j*se,y:j+me*se},{x:_e+Re*se,y:Re-_e*se},{x:_e,y:Re}]},ue=function(ie,Se,se,me){var j=ie*me-Se*se<0?-1:1,_e=ie*se+Se*me;return _e>1&&(_e=1),_e<-1&&(_e=-1),j*Math.acos(_e)},Te=function(ie,Se,se,me,j,_e,Re,de,Pe,Me,fe,ve){var Ie=Math.pow(j,2),we=Math.pow(_e,2),Xe=Math.pow(fe,2),ye=Math.pow(ve,2),Ge=Ie*we-Ie*ye-we*Xe;Ge<0&&(Ge=0),Ge/=Ie*ye+we*Xe,Ge=Math.sqrt(Ge)*(Re===de?-1:1);var He=Ge*j/_e*ve,Oe=Ge*-_e/j*fe,ce=Me*He-Pe*Oe+(ie+se)/2,Ue=Pe*He+Me*Oe+(Se+me)/2,Qe=(fe-He)/j,Je=(ve-Oe)/_e,nt=(-fe-He)/j,gt=(-ve-Oe)/_e,We=ue(1,0,Qe,Je),st=ue(Qe,Je,nt,gt);return de===0&&st>0&&(st-=ge),de===1&&st<0&&(st+=ge),[ce,Ue,We,st]};return function(ie){var Se=ie.px,se=ie.py,me=ie.cx,j=ie.cy,_e=ie.rx,Re=ie.ry,de=ie.xAxisRotation,Pe=de===void 0?0:de,Me=ie.largeArcFlag,fe=Me===void 0?0:Me,ve=ie.sweepFlag,Ie=ve===void 0?0:ve,we=[];if(_e===0||Re===0)return[];var Xe=Math.sin(Pe*ge/360),ye=Math.cos(Pe*ge/360),Ge=ye*(Se-me)/2+Xe*(se-j)/2,He=-Xe*(Se-me)/2+ye*(se-j)/2;if(Ge===0&&He===0)return[];_e=Math.abs(_e),Re=Math.abs(Re);var Oe=Math.pow(Ge,2)/Math.pow(_e,2)+Math.pow(He,2)/Math.pow(Re,2);Oe>1&&(_e*=Math.sqrt(Oe),Re*=Math.sqrt(Oe));var ce=Te(Se,se,me,j,_e,Re,fe,Ie,Xe,ye,Ge,He),Ue=q(ce,4),Qe=Ue[0],Je=Ue[1],nt=Ue[2],gt=Ue[3],We=Math.abs(gt)/(ge/4);Math.abs(1-We)<1e-7&&(We=1);var st=Math.max(Math.ceil(We),1);gt/=st;for(var at=0;at<st;at++)we.push(ne(nt,gt)),nt+=gt;return we.map(function(Ae){var Le=he(Ae[0],_e,Re,ye,Xe,Qe,Je),De=Le.x,ft=Le.y,mt=he(Ae[1],_e,Re,ye,Xe,Qe,Je),Ze=mt.x,dt=mt.y,Ee=he(Ae[2],_e,Re,ye,Xe,Qe,Je),ot=Ee.x,Ve=Ee.y;return{x1:De,y1:ft,x2:Ze,y2:dt,x:ot,y:Ve}})}}n(r)&&(r=!1),n(i)&&(i=!0);var R,C;function O(q){e.loop(q,function(A){var Y=A.tagName.toLowerCase();if(Y=="path"&&L(A),Y=="circle"&&_("circle",A),Y=="rect"&&_("rect",A),Y=="ellipse"&&_("ellipse",A),Y=="line"&&_("line",A),Y=="polygon"&&_("polygon",A),Y=="polyline"&&_("polyline",A),Y=="g"){var xe=A.getAttribute("style"),G,Z,ge,he,ne;if(xe){var ue=I(xe);G=ue[0],Z=ue[1],ge=ue[2],he=ue[3],ne=ue[4]}y=A.getAttribute("transform"),Q=A.getAttribute("fill")?A.getAttribute("fill"):n(G)?U:G,N=A.getAttribute("stroke")?A.getAttribute("stroke"):n(Z)?J:Z,ae=A.getAttribute("stroke-width")?A.getAttribute("stroke-width"):n(ge)?te:ge,pe=A.getAttribute("fill-opacity")?A.getAttribute("fill-opacity"):n(he)?ee:he,X=A.getAttribute("stroke-opacity")?A.getAttribute("stroke-opacity"):n(ne)?$:ne}O(A.children),A.tagName.toLowerCase()=="g"&&(Q=U,N=J,ae=te,pe=ee,X=$,y=null)})}function I(q){var A=q.split(";"),Y,xe,G,Z,ge;return e.loop(A,function(he){he=he.replace(/,/g,"");var ne=he.split(":"),ue=ne[0].trim().toLowerCase(),Te=ne[1].trim().toLowerCase().replace("px","");ue=="fill"&&(Y=Te),ue=="stroke"&&(xe=Te),ue=="stroke-width"&&(G=Te),ue=="opacity"&&(Z=Te,ge=Te),ue=="fill-opacity"&&(Z=Te),ue=="stroke-opacity"&&(ge=Te)}),[Y,xe,G,Z,ge]}function _(q,A){var Y,xe=h(A),G=xe[0],Z=xe[1],ge=xe[2],he=xe[5],ne=xe[6];if(q=="circle"){var ue=Number(A.getAttribute("r").trim()),Te=ue*.5523;i?Y=new e.Circle(Number(A.getAttribute("r")),G,Z,ge):Y=new e.Blob(G,Z,ge,4,ue,Te,"mirror",null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(q=="rect")if(i)Y=new e.Rectangle(Number(A.getAttribute("width")),Number(A.getAttribute("height")),G,Z,ge,Number(A.getAttribute("rx")));else{var Fe=Number(A.getAttribute("width")),ie=Number(A.getAttribute("height")),Se=Number(A.getAttribute("rx")),se=Number(A.getAttribute("ry"));if(Se&&se){var me=Se*.5523,j=se*.5523;Y=new e.Blob(G,Z,ge,[[Se,0,0,0,-me,0,0,0,"free"],[Fe-Se,0,0,0,0,0,me,0,"free"],[Fe,se,0,0,0,-j,0,0,"free"],[Fe,ie-se,0,0,0,0,0,j,"free"],[Fe-Se,ie,0,0,me,0,0,0,"free"],[Se,ie,0,0,0,0,-me,0,"free"],[0,ie-se,0,0,0,j,0,0,"free"],[0,se,0,0,0,0,0,-j,"free"]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else Y=new e.Blob(G,Z,ge,[[0,0],[Fe,0],[Fe,ie],[0,ie]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else if(q=="line")Y=new e.Squiggle(Z,ge,[[Number(A.getAttribute("x1")),Number(A.getAttribute("y1"))],[Number(A.getAttribute("x2")),Number(A.getAttribute("y2"))]],null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l);else if(q=="polygon"||q=="polyline"){var _e=A.getAttribute("points");_e=_e.replace(/-/g," -"),_e=_e.replace(/\s+/g," ");var Re=[];if(_e.indexOf(",")!=-1)e.loop(_e.split(" "),function(Me){var fe=Me.split(",");Re.push([Number(fe[0].trim()),Number(fe[1].trim())])});else{var de;e.loop(_e.split(" "),function(Me,fe){(fe+1)%2==0&&Re.push([de,Me.trim()]),de=Me.trim()})}q=="polygon"?Y=new ci(G,Z,ge,Re):Y=new e.Squiggle(Z,ge,Re,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l)}else q=="ellipse"&&(Y=new e.Blob(G,Z,ge,F(0,0,Number(A.getAttribute("rx")),Number(A.getAttribute("ry"))),null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l));Y.loc(he,ne,T);var Pe=A.getAttribute("transform");(Pe||y)&&P(Y,Pe||y),l&&(Y.type=="Rectangle"||Y.type=="Circle")&&Y.transform({showReg:!1,visible:o})}function P(q,A){var Y=A.split(")");e.loop(Y,function(xe){if(xe!=""){var G=xe.trim().split("("),Z=G[0].trim().toLowerCase(),ge=G[1].trim().toLowerCase().replace("px","").replace("deg","");if(Z=="translate"){var he=ge.split(",");q.mov(Number(he[0].trim()),he[1]?Number(he[1].trim()):0)}if(Z=="scale"){var ne=ge.split(",");q.type=="Blob"||q.type=="Squiggle"?ne.length==1?q.transformPoints("scale",Number(ne[0].trim())):ne.length==2&&(q.transformPoints("scaleX",Number(ne[0].trim())),q.transformPoints("scaleY",Number(ne[1].trim()))):ne.length==1?q.sca(Number(ne[0].trim())):ne.length==2&&q.sca(Number(ne[0].trim()),Number(ne[1].trim()))}if(Z=="rotate"){var ue=ge.split(",");ue.length==1?ue.push(0,0):ue.length==2&&ue.push(0),q.rot(Number(ue[0].trim()),Number(ue[1].trim()),Number(ue[2].trim()))}Z=="skewX"&&(q.skewX=ge),Z=="skewY"&&(q.skewY=ge)}})}function F(q,A,Y,xe){var G=.5522848,Z=Y*G,ge=xe*G,he=q+Y,ne=A+xe,ue=[[q-Y,A,0,0,q,ne+ge-xe,q,A-ge,"mirror"],[q,A-xe,0,0,q-Z,A,he+Z-Y,A,"mirror"],[he,A,0,0,q,A-ge,q+Z-Z,ne+ge-xe,"mirror"],[q,ne,0,0,he-Y+Z,A,q-Z,A,"mirror"]];return ue}if(!n(t)){if(t.replace&&(t=t.replace(/style\s?=[^"]*"[^"]*"/ig,"")),n(t.draggable))t.getAttribute||(R=new DOMParser,t=R.parseFromString(t,"image/svg+xml").documentElement),C=this.svg=t;else{R=new DOMParser,t=t.innerHTML?R.parseFromString(t.innerHTML,"text/xml"):t;var K=t.getElementsByTagName("svg");C=this.svg=K?t.getElementsByTagName("svg")[0]:null}var V,D;if(n(C)||(V=C.getAttribute("width"),D=C.getAttribute("height")),V&&(V=Number(V.trim())),D&&(D=Number(D.trim())),this.zimContainer_constructor(V,D),this.type="SVGContainer",n(C))return;var U=e.black,Q=e.black,J=e.black,N=e.black,te=2,ae=2,ee=1,pe=1,$=1,X=1,y,g=t.getElementsByTagName("svg");g.length==0&&(g=[t]),O(g)}function h(q){var A,Y,xe,G,Z,ge=q.getAttribute("style");if(ge){var he=I(ge);A=he[0],Y=he[1],xe=he[2],G=he[3],Z=he[4]}A=q.getAttribute("fill")?q.getAttribute("fill"):n(A)?Q:A,Y=q.getAttribute("stroke")?q.getAttribute("stroke"):n(Y)?N:Y,xe=q.getAttribute("stroke-width")?q.getAttribute("stroke-width"):n(xe)?ae:xe,G=q.getAttribute("fill-opacity")?q.getAttribute("fill-opacity"):n(G)?pe:G,Z=q.getAttribute("stroke-opacity")?q.getAttribute("stroke-opacity"):n(Z)?X:Z;var ne=q.getAttribute("x")?q.getAttribute("x"):0;ne=q.getAttribute("cx")?q.getAttribute("cx"):ne;var ue=q.getAttribute("y")?q.getAttribute("y"):0;return ue=q.getAttribute("cy")?q.getAttribute("cy"):ue,!n(G)&&!n(A)&&(A=e.convertColor(A,"rgba",Number(G))),!n(Z)&&!n(Y)&&(Y=e.convertColor(Y,"rgba",Number(Z))),[A,Y,Number(xe),Number(G),Number(Z),Number(ne),Number(ue)]}function L(q,A){n(A)&&(A=!0);var Y=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],xe=["m","l","h","v","c","s","q","t","a","z"],G=new e.Point(0,0),Z;if(n(q.getAttribute)?Z=q:Z=q.getAttribute("d"),Z=Z.replace(/,/g," "),Z=Z.replace(/([a-zA-Z])/g," $1 "),Z=Z.replace(/-/g," -"),Z=Z.replace(/\s+/g," "),Z=Z.replace(/\.(\d*)\./g,".$1 ."),A)var ge=h(q),he=ge[0],ne=ge[1],ue=ge[2];var Te,Fe,ie=[],Se=[0,0],se=new e.Point(0,0),me=new e.Point(0,0,0,0),j=new e.Point(0,0,0,0,0,0),_e=new e.Point(0,0,0,0,0,0,0),Re=Z.split(" "),de=Re.slice(1,Re.length),Pe=[],Me=!1,fe,ve,Ie=!1,we,Xe="squiggle",ye=null;e.loop(de,function(He,Oe){if(Oe==0&&(S.x=0,S.y=0,Se=[0,0],fe="",ve=""),Y.indexOf(He)==-1){we=="lxo"&&(we="lx",Pe.push("l"),Me=!0),we=="lyo"&&(we="ly",Me=!0),we=="Lxo"&&(we="Lx",Pe.push("L"),Me=!0),we=="Lyo"&&(we="Ly",Me=!0),Fe=Number(He),Fe=Math.round(Fe*100)/100,we=="X"?(S.x=Fe,we="Y"):we=="Y"?(S.y=Fe,we="Lxo",ie.push([S.x,S.y])):we=="x"?(S.x=S.x+Fe,we="y"):we=="y"&&(S.y=S.y+Fe,we="lxo",ie.push([S.x,S.y])),we=="H"||we=="h"?(G.x=ie[ie.length-1][0],G.y=ie[ie.length-1][1],G.x=G.x+(we=="h"?Fe:Fe-S.x),ie.push([G.x,G.y]),we="Lx"):(we=="V"||we=="v")&&(G.x=ie[ie.length-1][0],G.y=ie[ie.length-1][1],G.y=G.y+(we=="v"?Fe:Fe-S.y),ie.push([G.x,G.y]),we="lx"),we=="Lx"?(se.x=Fe,we="Ly"):we=="Ly"?(se.y=Fe,G.x=se.x,G.y=se.y,ie.push([G.x,G.y]),we="Lx"):we=="lx"?(Pe.length>0&&(G.x!=0&&G.y!=0?(S.x=G.x,S.y=G.y):(S.x=G.x+S.x,S.y=G.y+S.y)),se.x=S.x+Fe,Me?we="lyo":we="ly"):we=="ly"&&(se.y=S.y+Fe,G.x=se.x,G.y=se.y,ie.push([G.x,G.y]),we="lx");var ce;if(we=="qx"||we=="Qx"?(ie.length>0?(S.x=ie[ie.length-1][0],S.y=ie[ie.length-1][1]):(S.x=0,S.y=0),me.x=we=="qx"?S.x+Fe:Fe,we=we=="qx"?"qy":"Qy"):we=="qy"||we=="Qy"?(me.y=we=="qy"?S.y+Fe:Fe,we=we=="qy"?"qz":"Qz",Ie&&(Ie=!1,ce=ie[ie.length-1],ce[6]=-ce[4],ce[7]=-ce[5],ce[8]="mirror",G.x=me.x,G.y=me.y,ie[ie.length]=[G.x,G.y,0,0,-ce[6],ce[7],0,0,"free"],we=we=="qy"?"qx":"Qx")):we=="qz"||we=="Qz"?(me.z=we=="qz"?S.x+Fe:Fe,we=we=="qz"?"qq":"Qq"):(we=="qq"||we=="Qq")&&(me.w=we=="qq"?S.y+Fe:Fe,ce=ie[ie.length-1],G.x=ce[0],G.y=ce[1],ie.length==1?(ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=0,ce[6]=2/3*(me.x-G.x),ce[7]=2/3*(me.y-G.y),ce[8]="free"):ie[ie.length]=[G.x,G.y,0,0,0,0,2/3*(me.x-G.x),2/3*(me.y-G.y),"free"],G.x=me.z,G.y=me.w,ie[ie.length]=[G.x,G.y,0,0,2/3*(me.x-G.x),2/3*(me.y-G.y),0,0,"free"],we=we=="qq"?"qx":"Qx"),we=="cx"||we=="Cx")ie.length>0?(S.x=ie[ie.length-1][0],S.y=ie[ie.length-1][1]):(S.x=0,S.y=0),j.x=we=="cx"?S.x+Fe:Fe,we=we=="cx"?"cy":"Cy";else if(we=="cy"||we=="Cy")j.y=we=="cy"?S.y+Fe:Fe,we=we=="cy"?"cz":"Cz";else if(we=="cz"||we=="Cz")j.z=we=="cz"?S.x+Fe:Fe,we=we=="cz"?"cq":"Cq";else if(we=="cq"||we=="Cq")j.q=we=="cq"?S.y+Fe:Fe,we=we=="cq"?"cr":"Cr",Ie&&(fe=="s"?ve="s":ve="S",ce=ie[ie.length-1],ce[2]=0,ce[3]=0,n(ce[4])&&(ce[4]=0),n(ce[5])&&(ce[5]=0),ce[6]=-ce[4],ce[7]=-ce[5],ce[8]="mirror",G.x=j.z,G.y=j.q,ie[ie.length]=[G.x,G.y,0,0,j.x-G.x,j.y-G.y,0,0,"free"],we=we=="cr"?"cx":"Cx");else if(we=="cr"||we=="Cr")j.r=we=="cr"?S.x+Fe:Fe,we=we=="cr"?"cs":"Cs";else if(we=="cs"||we=="Cs")j.s=we=="cs"?S.y+Fe:Fe,ce=ie[ie.length-1],ie.length==1&&(ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=0),ce[6]=j.x-ce[0],ce[7]=j.y-ce[1],ce[8]="free",G.x=j.r,G.y=j.s,ie[ie.length]=[G.x,G.y,0,0,j.z-G.x,j.q-G.y,0,0,"free"],we=we=="cs"?"cx":"Cx";else if(we=="ax"||we=="Ax")ie.length>0?(S.x=ie[ie.length-1][0],S.y=ie[ie.length-1][1]):(S.x=0,S.y=0),_e.x=Fe,we=we=="ax"?"ay":"Ay";else if(we=="ay"||we=="Ay")_e.y=Fe,we=we=="ay"?"az":"Az";else if(we=="az"||we=="Az")_e.z=Fe,we=we=="az"?"aq":"Aq";else if(we=="aq"||we=="Aq")_e.q=Fe,we=we=="aq"?"ar":"Ar";else if(we=="ar"||we=="Ar")_e.r=Fe,we=we=="ar"?"as":"As";else if(we=="as"||we=="As")_e.s=we=="as"?S.x+Fe:Fe,we=we=="as"?"at":"At";else if(we=="at"||we=="At"){_e.t=we=="at"?S.y+Fe:Fe,b||(b=E());var Ue=b({px:S.x,py:S.y,cx:_e.s,cy:_e.t,rx:_e.x,ry:_e.y,xAxisRotation:_e.z,largeArcFlag:_e.q,sweepFlag:_e.r});e.loop(Ue,function(Qe,Je){ce=ie[ie.length-1],ie.length==1&&(ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=0),Je==0&&ie.length==1?(ce[6]=Qe.x1-G.x-S.x,ce[7]=Qe.y1-G.y-S.y):(ce[6]=Qe.x1-G.x,ce[7]=Qe.y1-G.y),ce[8]="free",G.x=Qe.x,G.y=Qe.y,ie[ie.length]=[G.x,G.y,0,0,Qe.x2-G.x,Qe.y2-G.y,0,0,"free"]}),we=we=="at"?"ax":"Ax"}}else Pe.push(He),He!="s"&&(Ie=!1),Pe.length>1&&(He=="M"||He=="m")&&(Ge(Pe),He=="M"?(S.x=0,S.y=0):(S.x=ie[ie.length-1][0],S.y=ie[ie.length-1][1]),ie=[],Pe=[],Pe.push(He)),He=="M"?we="X":He=="m"?we="x":He=="L"?(we="Lx",r&&ye&&ye!="l"&&Ge(Pe),ye="l"):He=="l"?(we="lx",r&&ye&&ye!="l"&&Ge(Pe),ye="l"):He=="H"?(we="H",r&&ye&&ye!="l"&&Ge(Pe),ye="l"):He=="h"?(we="h",r&&ye&&ye!="l"&&Ge(Pe),ye="l"):He=="V"?(we="V",r&&ye&&ye!="l"&&Ge(Pe),ye="l"):He=="v"?(we="v",r&&ye&&ye!="l"&&Ge(Pe),ye="l"):He=="C"?(we="Cx",r&&ye&&ye!="c"&&Ge(Pe),ye="c"):He=="c"?(we="cx",r&&ye&&ye!="c"&&Ge(Pe),ye="c"):He=="S"?(Ie=!0,we="Cx",r&&ye&&ye!="c"&&Ge(Pe),ye="c"):He=="s"?(Ie=!0,we="cx",r&&ye&&ye!="c"&&Ge(Pe),ye="c"):He=="Q"?(we="Qx",r&&ye&&ye!="q"&&Ge(Pe),ye="q"):He=="q"?(we="qx",r&&ye&&ye!="q"&&Ge(Pe),ye="q"):He=="T"?(Ie=!0,we="Qx",r&&ye&&ye!="q"&&Ge(Pe),ye="q"):He=="t"?(Ie=!0,we="qx",r&&ye&&ye!="q"&&Ge(Pe),ye="q"):He=="A"?(we="Ax",r&&ye&&ye!="a"&&Ge(),ye="a"):He=="a"?(we="ax",r&&ye&&ye!="a"&&Ge(),ye="a"):(He=="z"||He=="Z")&&(Xe="blob")});function Ge(){fe=Pe[Pe.length-1],ie.length>=2&&(fe=="z"||fe=="Z")&&(Xe="blob"),Xe=="squiggle"?Te=new e.Squiggle(ne,ue,ie,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l):Te=new e.Blob(he,ne,ue,ie,null,null,null,null,o,null,null,null,null,null,null,null,null,null,null,null,null,null,l),Te.loc(0,0,T),fe=Pe[Pe.length-1],ve=Pe[Pe.length-2],xe.indexOf(fe)>=0?(Se[0]=ie[ie.length-1][0],Se[1]=ie[ie.length-1][1],S.x=ie[ie.length-1][0],S.y=ie[ie.length-1][1],ie=[],ie.push([Se[0],Se[1]])):(Se=[0,0],ie=[[0,0]]),Pe=[],fe!="z"&&fe!="Z"&&Pe.push(fe),G.x=0,G.y=0;var He=q.getAttribute("transform");(He||y)&&P(Te,He||y)}return A&&Ge(),ie}T.processPath=function(q){return L(q,!1)},f!==!1&&e.styleTransforms(this,x),this.clone=function(){return T.cloneProps(new e.SVGContainer(t,r,i,o,l,f,this.group,p))}},e.extend(e.SVGContainer,e.Container,"clone","zimContainer",!1),e.CustomShape=function(t,r,i,o){e.zimCustomShapeCheck||(qe("50.97"),e.zimCustomShapeCheck=!0),this.zimContainer_constructor(t,r,i,o,!1);var l=this;this.mouseChildren=!1,l._dashedOffset=5,Object.defineProperty(l,"color",{get:function(){return l._color},set:function(f){n(f)&&(f="black"),l._color=f,f&&f.type?l.specialColor(l.colorCommand,f,l):l.colorCommand.style=f}}),this.setColorRange=function(f,d){return n(d)?(l.startColor=l.color,l.endColor=f):n(f)?(l.startColor=l.color,l.endColor=d):(l.startColor=f,l.endColor=d),l},l._colorRange=0,Object.defineProperty(l,"colorRange",{get:function(){return l._colorRange},set:function(f){l._colorRange=f,!n(l.startColor)&&!n(l.endColor)&&(l.color=e.colorRange(l.startColor,l.endColor,f))}}),Object.defineProperty(l,"borderColor",{get:function(){return l._borderColor},set:function(f){l._borderColor=f,f&&!l.borderWidth&&(l.borderWidth=1),l.borderColorCommand?f&&f.type?l.specialColor(l.borderColorCommand,f,l):l.borderColorCommand.style=f:l.drawShape()}}),Object.defineProperty(l,"borderWidth",{get:function(){return l._borderWidth},set:function(f){f>0||(f=0),l._borderWidth=f,!l.borderWidthCommand||l._borderWidth==0?(l.borderWidthCommand=null,l.drawShape()):(l.borderWidthCommand.width=l._borderWidth,l._dashed&&(l.borderDashedCommand.segments=l._dashed,l.borderDashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"thickness",{get:function(){return l._thickness},set:function(f){f>0||(f=0),l._thickness=f,!l.thicknessCommand||l._thickness==0?l.drawShape():(l.thicknessCommand.width=l._thickness,l._dashed&&(l.dashedCommand.segments=l._dashed,l.dashedCommand.offset=l._dashedOffset))}}),Object.defineProperty(l,"dashed",{get:function(){return l._dashed},set:function(f){l._dashed=f,f&&!Array.isArray(l._dashed)&&(l.dashed=[10,10]);var d;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;d=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;d=l.borderDashedCommand}d?l._dashed?(d.segments=l._dashed,d.offset=l._dashedOffset):(d.segments=null,d.offset=null):l.drawShape()}}),Object.defineProperty(l,"dashedOffset",{get:function(){return l._dashedOffset},set:function(f){isNaN(f)&&(f=5),l._dashedOffset=f;var d;if(l.type=="Squiggle"||l.type=="Line"){if(!l.thicknessCommand||l._thickness==0)return;d=l.dashedCommand}else{if(!l.borderWidthCommand||l._borderWidth==0)return;d=l.borderDashedCommand}d?l._dashed?(d.segments=l._dashed,d.offset=l._dashedOffset):(d.segments=null,d.offset=null):l.drawShape()}}),Object.defineProperty(l,"corner",{get:function(){return l._corner},set:function(f){l._corner=f,l.drawShape()}}),this.linearGradient=function(f,d,p,w,k,x){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(f,d,p,w,k,x),this},this.radialGradient=function(f,d,p,w,k,x,T,S){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(f,d,p,w,k,x,T,S),this},this.cloneAll=function(f,d,p,w){var k=this.getBounds();n(k)&&(k={x:null,y:null,width:null,height:null});var x=this.cloneChildren(this.cloneProps(new e.Container(k.x,k.y,k.width,k.height,d,p,w)),f);return x.mouseChildren=!1,x.type=this.type,x}},e.extend(e.CustomShape,e.Container,null,"zimContainer",!1),e.Circle=function(t,r,i,o,l,f,d,p,w,k,x){var T="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",S;if(S=yt(e.Circle,arguments,T,this))return S;qe("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=k;var b=w===!1?{}:e.getStyle(this.type,this.group,x);n(t)&&(t=b.radius!=null?b.radius:50),n(l)&&(l=b.dashed!=null?b.dashed:!1),n(i)&&(i=b.borderColor!=null?b.borderColor:null),n(o)&&(o=b.borderWidth!=null?b.borderWidth:null),i<0||o<0?i=o=null:i!=null&&o==null&&(o=1),n(r)&&(r=b.color!=null?b.color:o>0?"rgba(0,0,0,0)":e.black),n(f)&&(f=b.percent!=null?b.percent:100),n(d)&&(d=b.percentClose!=null?b.percentClose:!0),n(p)&&(p=b.strokeObj!=null?b.strokeObj:{});var E=R(t,r,i,o,f);this.veeObj={radius:E[0],color:E[1],borderColor:E[2],borderWidth:E[3],percent:E[4]};function R(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),f=e.Pick.choose(f);var C=this;C._radius=t,C._color=r,C._borderColor=i,C._borderWidth=o,C._dashed=l,C._dashed&&!Array.isArray(C._dashed)&&(C._dashed=[10,10]);var O=this.shape=new je.Shape;this.addChild(O);var I=O.graphics;C.drawShape=function(){I.c(),C.colorCommand=I.f(C._color).command,C._color&&C._color.type&&C.specialColor(C.colorCommand,C._color,C),(n(C._borderWidth)||C._borderWidth>0)&&(!n(C._borderColor)||!n(C._borderWidth))&&(n(C._borderColor)&&(C._borderColor=e.black),C.borderColorCommand=I.s(C._borderColor).command,C._borderColor&&C._borderColor.type&&C.specialColor(C.borderColorCommand,C._borderColor,C),C.borderWidthCommand=I.ss(C._borderWidth,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,C._dashed&&(C.borderDashedCommand=I.sd(Array.isArray(C._dashed)?C._dashed:[10,10],C._dashedOffset).command));var _=C._radius*2;if(typeof f=="number"&&f>=0&&f<100){var P=360*f/100/2;I.arc(0,0,C._radius,(-P-90)*Math.PI/180,(P-90)*Math.PI/180,!1),d&&I.cp(),_=C._radius-Math.cos(P*Math.PI/180)*C._radius}else I.dc(0,0,C._radius);C.setBounds(-C._radius,-C._radius,C._radius*2,_)},C.drawShape(),r.type&&(C.color=r),Object.defineProperty(C,"radius",{get:function(){return C._radius},set:function(_){C._radius=_,C.drawShape()}}),Object.defineProperty(C,"percentage",{get:function(){return f},set:function(_){f=_,C.drawShape()}}),Object.defineProperty(C,"percentClose",{get:function(){return d},set:function(_){d=_,C.drawShape()}}),w!==!1&&e.styleTransforms(this,b),this.clone=function(_){var P=C.cloneProps(new e.Circle(_||!e.isPick(E[0])?C.radius:E[0],_||!e.isPick(E[1])?C.color:E[1],_||!e.isPick(E[2])?C.borderColor:E[2],_||!e.isPick(E[3])?C.borderWidth:E[3],C.dashed,_||!e.isPick(E[4])?f:E[4],d,p,w,this.group,x));return C.linearGradientParams&&P.linearGradient.apply(P,C.linearGradientParams),C.radialGradientParams&&P.radialGradient.apply(P,C.radialGradientParams),P}},e.extend(e.Circle,e.CustomShape,"clone","zimCustomShape",!1),e.Rectangle=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",b;if(b=yt(e.Rectangle,arguments,S,this))return b;qe("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=x;var E=k===!1?{}:e.getStyle(this.type,this.group,T);n(t)&&(t=E.width!=null?E.width:null),n(r)&&(r=E.height!=null?E.height:n(t)?100:t),n(t)&&(t=r),n(f)&&(f=E.corner!=null?E.corner:0),n(d)&&(d=E.dashed!=null?E.dashed:!1),n(o)&&(o=E.borderColor!=null?E.borderColor:null),n(l)&&(l=E.borderWidth!=null?E.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=E.color!=null?E.color:l>0?"rgba(0,0,0,0)":e.black),n(p)&&(p=E.strokeObj!=null?E.strokeObj:{}),n(w)&&(w=E.scaleDimensions!=null?E.scaleDimensions:!0);var R=C(t,r,i,o,l);this.veeObj={width:R[0],height:R[1],color:R[2],borderColor:R[3],borderWidth:R[4]};function C(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l);var O=this;O._color=i,O._borderColor=o,O._borderWidth=l,O._dashed=d,O._dashed&&!Array.isArray(O._dashed)&&(O._dashed=[10,10]),O._corner=f,O.scaleDimensions=w,O.setWidth=function(P){t=P},O.setHeight=function(P){r=P};var I=this.shape=new je.Shape;this.addChild(I);var _=I.graphics;O.drawShape=function(){if(_.c(),O.colorCommand=_.f(O._color).command,i&&i.type&&O.specialColor(O.colorCommand,i,O),(n(O._borderWidth)||O._borderWidth>0)&&(!n(O._borderColor)||!n(O._borderWidth))&&(n(O._borderColor)&&(O._borderColor=e.black),O.borderColorCommand=_.s(O._borderColor).command,O._borderColor&&O._borderColor.type&&O.specialColor(O.borderColorCommand,O._borderColor,O),O.borderWidthCommand=_.ss(O._borderWidth,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,O._dashed&&(O.borderDashedCommand=_.sd(Array.isArray(O._dashed)?O._dashed:[10,10],O._dashedOffset).command)),Array.isArray(O._corner)){var P=O._corner;Array.isArray(P)&&P.length==2&&(P=[P,P,P,P]);for(var F=[],K=!1,V=0;V<P.length;V++)Array.isArray(P[V])?(K=!0,F.push(P[V])):F.push([P[V],P[V]]);P=F,K?_.mt(0,P[0][1]).curveTo(0,0,P[0][0],0).lt(t-P[1][0],0).curveTo(t,0,t,P[1][1]).lt(t,r-P[2][1]).curveTo(t,r,t-P[2][0],r).lt(P[3][0],r).curveTo(0,r,0,r-P[3][1]).cp():_.rc(0,0,t,r,O._corner[0],O._corner[1],O._corner[2],O._corner[3])}else O._corner>0?_.rr(0,0,t,r,O._corner):_.r(0,0,t,r);O.setBounds(0,0,t,r),i.type&&(O.color=i)},O.drawShape(),k!==!1&&e.styleTransforms(this,E),this.clone=function(P){var F=O.cloneProps(new e.Rectangle(P||!e.isPick(R[0])?t:R[0],P||!e.isPick(R[1])?r:R[1],P||!e.isPick(R[2])?O.color:R[2],P||!e.isPick(R[3])?O.borderColor:R[3],P||!e.isPick(R[4])?O.borderWidth:R[4],f,O._dashed,p,O.scaleDimensions,k,this.group,T));return F}},e.extend(e.Rectangle,e.CustomShape,"clone","zimCustomShape",!1),e.Triangle=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b){var E="a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",R;if(R=yt(e.Triangle,arguments,E,this))return R;qe("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=S;var C=T===!1?{}:e.getStyle(this.type,this.group,b);n(t)&&(t=C.a!=null?C.a:100),n(r)&&(r=C.b!=null?C.b:t),n(i)&&(i=C.c!=null?C.c:t),r==-1&&(r=Math.sqrt(Math.pow(t,2)+Math.pow(i,2))),i==-1&&(i=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))),n(d)&&(d=C.corner!=null?C.corner:0),n(p)&&(p=C.center!=null?C.center:!0),n(w)&&(w=C.adjust!=null?C.adjust:0),n(l)&&(l=C.borderColor!=null?C.borderColor:null),n(f)&&(f=C.borderWidth!=null?C.borderWidth:null),l<0||f<0?l=f=null:l!=null&&f==null&&(f=1),n(o)&&(o=C.color!=null?C.color:f>0?"rgba(0,0,0,0)":e.black),n(w)&&(w=C.adjust!=null?C.adjust:0),n(x)&&(x=C.strokeObj!=null?C.strokeObj:{});var O=I(t,r,i,o,l,f);this.veeObj={a:O[0],b:O[1],c:O[2],color:O[3],borderColor:O[4],borderWidth:O[5]};function I(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),this.a=t,this.b=r,this.c=i,o=e.Pick.choose(o),l=e.Pick.choose(l),f=e.Pick.choose(f);var _=this;_._color=o,_._borderColor=l,_._borderWidth=f,_._dashed=k,_._dashed&&!Array.isArray(_._dashed)&&(_._dashed=[10,10]),_._corner=d;var P=[t,r,i];P.sort(function(J,N){return N-J});var F=P[0],K=P[1],V=P[2],D=[P.indexOf(t),P.indexOf(r),P.indexOf(i)];if(F>K+V){ut("zim display - Triangle(): invalid triangle lengths");return}var U=this.shape=new je.Shape;this.adjusted=w,this.addChild(U);var Q=U.graphics;_.drawShape=function(){var J=[];Array.isArray(_._corner)?J=_._corner:J.push(_._corner,_._corner,_._corner);for(var N=0;N<3;N++)(J[N]<0||typeof J[N]!="number")&&(J[N]=0);Q.c(),_.colorCommand=Q.f(_._color).command,_._color&&_._color.type&&_.specialColor(_.colorCommand,_._color,_),(n(_._borderWidth)||_._borderWidth>0)&&(!n(_._borderColor)||!n(_._borderWidth))&&(n(_._borderColor)&&(_._borderColor=e.black),_.borderColorCommand=Q.s(_._borderColor).command,_._borderColor&&_._borderColor.type&&_.specialColor(_.borderColorCommand,_._borderColor,_),_.borderWidthCommand=Q.ss(_._borderWidth,x.caps,x.joints,x.miterLimit,x.ignoreScale).command,_._dashed&&(_.borderDashedCommand=Q.sd(Array.isArray(_._dashed)?_._dashed:[10,10],_._dashedOffset).command)),_.one={x:0,y:0},_.two={x:t,y:0};var te=Math.acos((Math.pow(K,2)+Math.pow(V,2)-Math.pow(F,2))/(2*K*V))*180/Math.PI,ae=Math.asin(K*Math.sin(te*Math.PI/180)/F)*180/Math.PI,ee=180-te-ae,pe=[te,ae,ee];_.angles=[pe[D[1]],pe[D[2]],pe[D[0]]];var $=_.angles[1],X=Math.cos($*Math.PI/180)*r,y=Math.sin($*Math.PI/180)*r,g=Math.max(t,t-X),h=y;_.setBounds(0,w,g,h),U.y=h,_.three={x:t-X,y:0-y};var L=t*J[0]/(J[0]+J[1]||1);Q.mt(L,0).at(t,0,t-X,0-y,J[1]).at(t-X,0-y,0,0,J[2]).at(0,0,t,0,J[0]).lt(L,0),Q.cp(),p&&(_.regX=g/2,_.regY=h/2),w&&(_.shape.y+=w)},_.drawShape(),o.type&&(_.color=o),T!==!1&&e.styleTransforms(this,C),this.clone=function(J){var N=_.cloneProps(new e.Triangle(J||!e.isPick(O[0])?t:O[0],J||!e.isPick(O[1])?r:O[1],J||!e.isPick(O[2])?i:O[2],J||!e.isPick(O[3])?_.color:O[3],J||!e.isPick(O[4])?_.borderColor:O[4],J||!e.isPick(O[5])?_.borderWidth:O[5],d,p,w,k,x,T,this.group,b));return _.linearGradientParams&&N.linearGradient.apply(N,_.linearGradientParams),_.radialGradientParams&&N.radialGradient.apply(N,_.radialGradientParams),N}},e.extend(e.Triangle,e.CustomShape,"clone","zimCustomShape"),e.Poly=function(t,r,i,o,l,f,d,p,w,k,x){var T="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",S;if(S=yt(e.Poly,arguments,T,this))return S;qe("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=k;var b=w===!1?{}:e.getStyle(this.type,this.group,x);n(t)&&(t=b.radius!=null?b.radius:50),n(r)&&(r=b.sides!=null?b.sides:5),n(i)&&(i=b.pointSize!=null?b.pointSize:0),n(d)&&(d=b.dashed!=null?b.dashed:!1),n(l)&&(l=b.borderColor!=null?b.borderColor:null),n(f)&&(f=b.borderWidth!=null?b.borderWidth:null),l<0||f<0?l=f=null:l!=null&&f==null&&(f=1),n(o)&&(o=b.color!=null?b.color:f>0?"rgba(0,0,0,0)":e.black),n(p)&&(p=b.strokeObj!=null?b.strokeObj:{});var E=R(t,r,i,o,l,f);this.veeObj={radius:E[0],sides:E[1],pointSize:E[2],color:E[3],borderColor:E[4],borderWidth:E[5]};function R(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),l=e.Pick.choose(l),f=e.Pick.choose(f);var C=this;C._radius=t,C._color=o,C._sides=r,C._pointSize=i,C._borderColor=l,C._borderWidth=f,C._dashed=d,C._dashed&&!Array.isArray(C._dashed)&&(C._dashed=[10,10]);var O=this.shape=new je.Shape;this.addChild(O),O.rotation=-90;var I=O.graphics;C.drawShape=function(){I.c(),C.colorCommand=I.f(C._color).command,C._color&&C._color.type&&C.specialColor(C.colorCommand,C._color,C),(n(C._borderWidth)||C._borderWidth>0)&&(!n(C._borderColor)||!n(C._borderWidth))&&(n(C._borderColor)&&(C._borderColor=e.black),C.borderColorCommand=I.s(C._borderColor).command,C._borderColor&&C._borderColor.type&&C.specialColor(C.borderColorCommand,C._borderColor,C),C.borderWidthCommand=I.ss(C._borderWidth,p.caps,p.joints,p.miterLimit,p.ignoreScale).command,C._dashed&&(C.borderDashedCommand=I.sd(Array.isArray(C._dashed)?C._dashed:[10,10],C._dashedOffset).command)),I.dp(0,0,C._radius,C._sides,C._pointSize),C.setBounds(-C._radius,-C._radius,C._radius*2,C._radius*2)},C.drawShape(),o.type&&(C.color=o),Object.defineProperty(C,"radius",{get:function(){return C._radius},set:function(_){C._radius=_,C.drawShape()}}),Object.defineProperty(C,"sides",{get:function(){return C._sides},set:function(_){C._sides=_,C.drawShape()}}),Object.defineProperty(C,"pointSize",{get:function(){return C._pointSize},set:function(_){C._pointSize=_,C.drawShape()}}),w!==!1&&e.styleTransforms(this,b),this.clone=function(_){var P=C.cloneProps(new e.Poly(_||!e.isPick(E[0])?C.radius:E[0],_||!e.isPick(E[1])?C.sides:E[1],_||!e.isPick(E[2])?C.pointSize:E[2],_||!e.isPick(E[3])?C.color:E[3],_||!e.isPick(E[4])?C.borderColor:E[4],_||!e.isPick(E[5])?C.borderWidth:E[5],C.dashed,p,w,this.group,x));return C.linearGradientParams&&P.linearGradient.apply(P,C.linearGradientParams),C.radialGradientParams&&P.radialGradient.apply(P,C.radialGradientParams),P}},e.extend(e.Poly,e.CustomShape,"clone","zimCustomShape",!1),e.Line=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E){var R="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",C;if(C=yt(e.Line,arguments,R,this))return C;qe("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=b;var O=S===!1?{}:e.getStyle(this.type,this.group,E);n(t)&&(t=O.length!=null?O.length:100),n(f)&&(f=O.dashed!=null?O.dashed:!1),n(r)&&(r=O.thickness!=null?O.thickness:3),n(i)&&(i=O.color!=null?O.color:e.black),n(o)&&(o=O.startHead!=null?O.startHead:null),n(l)&&(l=O.endHead!=null?O.endHead:null),n(d)&&(d=O.strokeObj!=null?O.strokeObj:{}),n(p)&&(p=O.lineType!=null?O.lineType:"straight"),p!=="corner"&&p!="curve"&&(p="straight"),n(w)&&(w=O.lineOrientation!=null?O.lineOrientation:"auto"),w!=="vertical"&&w!="horizontal"&&(w="auto"),n(k)&&(k=O.curveH!=null?O.curveH:20),n(x)&&(x=O.curveV!=null?O.curveV:20),n(d)&&(d=O.strokeObj!=null?O.strokeObj:{});var I=_(t,i,r,o,l);this.veeObj={length:I[0],color:I[1],thickness:I[2],startHead:I[3],endHead:I[4]};function _(){return arguments}t=e.Pick.choose(t),i=e.Pick.choose(i),r=e.Pick.choose(r),o=e.Pick.choose(o),l=e.Pick.choose(l),o&&o.clone&&(o=o.clone()),l&&l.clone&&(l=l.clone());var P=this;P._length=t,P._color=i,P._thickness=r,P._dashed=f,P._dashed&&!Array.isArray(P._dashed)&&(P._dashed=[10,10]),P._startX=0,P._startY=0,P._endX=t,P._endY=0,P._startHead=o,P._endHead=l,P._points=T,P._lineOrientation=w,P.angle=0,P.lineType=p,P._startHead&&F("start",P._startHead),P._endHead&&F("end",P._endHead);function F(D,U){if(U=="triangle"||U=="arrow"){var Q=P["_"+D+"Head"]=new e.Triangle(r*4,r*4,r*4,i);Q.rotation=90}else U=="circle"&&(P["_"+D+"Head"]=new e.Circle(r*2.2,i));n(P["_"+D+"Head"].startAngle)&&(P["_"+D+"Head"].startAngle=P["_"+D+"Head"].rotation)}o=P._startHead,l=P._endHead,o&&o.type=="Triangle"&&(o.startRegY=o.regY),l&&l.type=="Triangle"&&(l.startRegY=l.regY);var K=this.shape=new je.Shape;this.addChild(K);var V=K.graphics;P.drawShape=function(D,U){V.c(),P.colorCommand=V.s(P._color).command,i&&i.type&&P.specialColor(P.colorCommand,i,P),P.thicknessCommand=V.ss(P._thickness,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,P._dashed&&(P.dashedCommand=V.sd(Array.isArray(P._dashed)?P._dashed:[10,10],P._dashedOffset).command);var Q,J;if(P._points){var N=P._points[0];P._startX=N[0],P._startY=N[1];var te=P._points[P._points.length-1],ae=[te[te.length-2],te[te.length-1]];P._endX=ae[0],P._endY=ae[1],V.mt(N[0],N[1]);for(var ee=1;ee<P._points.length;ee++){var pe=P._points[ee];ee==1&&(Q=[P._startX,P._startY,pe[0],pe[1]]),pe.length==2?V.lt(pe[0],pe[1]):pe.length==4?V.qt(pe[0],pe[1],pe[2],pe[3]):pe.length==6&&V.bt(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5])}if(pe.length>=4)J=[pe[pe.length-4],pe[pe.length-3],P._endX,P._endY];else{var $=P._points[P._points.length-2];J=[$[$.lenth-2],$[$.lenth-1],P._endX,P._endY]}}else{var X=P._startX,y=P._startY,g=P._endX,h=P._endY,L;if(P.lineType=="straight"?(o&&o.type=="Triangle"&&(o.regY=0,L=e.dist(X,y,g,h),L!=0&&(X=X+P._startHead.height/2*(g-X)/L),L!=0&&(y=y+P._startHead.height/2*(h-y)/L)),l&&l.type=="Triangle"&&(l.regY=0,L=e.dist(X,y,g,h),L!=0&&(g=g-P._endHead.height/2*(g-X)/L),L!=0&&(h=h-P._endHead.height/2*(h-y)/L))):(D?P._lineOrientation=="horizontal"||P.autoOrientation=="horizontal"?o&&o.type=="Triangle"&&(o.regY=0,g>X?X=Math.min(g,X+P._startHead.height/2):X=Math.max(g,X-P._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=0,h>y?y=Math.min(h,y+P._startHead.height/2):y=Math.max(h,y-P._startHead.height/2)):o&&o.type=="Triangle"&&(o.regY=o.startRegY),U?P._lineOrientation=="horizontal"||P.autoOrientation=="horizontal"?l&&l.type=="Triangle"&&(l.regY=0,g>X?g-=P._endHead.height/2:g+=P._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=0,h>y?h-=P._endHead.height/2:h+=P._endHead.height/2):l&&l.type=="Triangle"&&(l.regY=l.startRegY)),P.lineType=="straight")V.mt(X,y).lt(g,h),Q=J=[X,y,g,h];else if(P.lineType=="corner"){var q=X+(g-X)*.4,A=y+(h-y)*.4;P._lineOrientation=="auto"&&(P.autoOrientation=Math.abs(X-g)>Math.abs(y-h)?"horizontal":"vertical"),P._lineOrientation=="horizontal"||P.autoOrientation=="horizontal"?(Q=J=[X,y,q,y],V.mt(X,y).lt(q,y).lt(q,h).lt(g,h)):(Q=J=[X,y,X,A],V.mt(X,y).lt(X,A).lt(g,A).lt(g,h))}else{var Y=X>g?-1:1,xe=y>h?-1:1,G=X,Z=y,ge=Math.abs(X-g),he=Math.abs(y-h),ne=Math.min(k,ge*.5),ue=Math.min(x,he*.5);P._lineOrientation=="auto"&&(P.autoOrientation=Math.abs(X-g)>Math.abs(y-h)?"horizontal":"vertical");var Te,Fe,ie,Se;P._lineOrientation=="horizontal"||P.autoOrientation=="horizontal"?(Te=he-ue*2,Fe=(ge-ne*2)/2,V.mt(G,Z),Fe>0&&(G=G+Fe*Y,V.lt(G,Z)),Se=Z,Z=Z+ue*xe,G=G+ne*Y,V.qt(G,Se,G,Z),Q=J=[X,y,G,y],Te>0&&(Z=Z+Te*xe,V.lt(G,Z)),Z=Z+ue*xe,ie=G,G=G+ne*Y,V.qt(ie,Z,G,Z),Fe>0&&(G=G+Fe*Y,V.lt(G,Z))):(Te=ge-ne*2,Fe=(he-ue*2)/2,V.mt(G,Z),Fe>0&&(Z=Z+Fe*xe,V.lt(G,Z)),ie=G,G=G+ne*Y,Z=Z+ue*xe,V.qt(ie,Z,G,Z),Q=J=[X,y,X,Z],Te>0&&(G=G+Te*Y,V.lt(G,Z)),G=G+ne*Y,Se=Z,Z=Z+ue*xe,V.qt(G,Se,G,Z),Fe>0&&(Z=Z+Fe*xe,V.lt(G,Z)))}}if(P.setBounds(Math.min(P._startX,P._endX),Math.min(P._startY,P._endY),Math.abs(P._startX-P._endX),Math.abs(P._startY-P._endY)),P._length=Math.sqrt(Math.pow(P._startX-P._endX,2)+Math.pow(P._startY-P._endY,2)),P.angle=Math.atan2(P._endY-P._startY,P._endX-P._startX)*180/Math.PI,P._startHead&&P._startHead.loc){P._startHead.loc(P._startX,P._startY,P);var se=Math.atan2(Q[3]-Q[1],Q[2]-Q[0])*180/Math.PI;P._startHead.rotation=se-180+P._startHead.startAngle}if(P._endHead&&P._endHead.loc){P._endHead.loc(P._endX,P._endY,P);var me=Math.atan2(J[3]-J[1],J[2]-J[0])*180/Math.PI;P._endHead.rotation=me+P._endHead.startAngle}},P.drawShape(),i.type&&(P.color=i),this.setPoints=function(D,U,Q,J,N,te){return Array.isArray(D)&&n(U)?(P.points=D,P):(D&&!n(D.x)?(P._startX=n(D.x)?P._startX:D.x,P._startY=n(D.y)?P._startY:D.y,U&&(P._endX=n(U.x)?P._endX:U.x,P._endY=n(U.y)?P._endY:U.y)):(P._startX=n(D)?P._startX:D,P._startY=n(U)?P._startY:U,P._endX=n(Q)?P._endX:Q,P._endY=n(J)?P._endY:J),P.drawShape(N,te),P)},this.from=function(D,U,Q){n(Q)&&(Q=!0);var J,N;if(D&&D.parent&&P.parent&&Q){var te=D.parent.localToLocal(D.x,D.y,P.parent);J=te.x,N=te.y}return D&&!n(D.x)?(P._startX=n(J)?n(D.x)?P._startX:D.x:J,P._startY=n(N)?n(D.y)?P._startY:D.y:N):(P._startX=n(D)?P._startX:D,P._startY=n(U)?P._startY:U),P.drawShape(),P},this.to=function(D,U,Q){n(Q)&&(Q=!0);var J,N;if(D&&D.parent&&P.parent&&Q){var te=D.parent.localToLocal(D.x,D.y,P.parent);J=te.x,N=te.y}return D&&!n(D.x)?(P._endX=n(J)?n(D.x)?P._endX:D.x:J,P._endY=n(N)?n(D.y)?P._endY:D.y:N):(P._endX=n(D)?P._endX:D,P._endY=n(U)?P._endY:U),P.drawShape(),P},Object.defineProperty(P,"length",{get:function(){return P._length},set:function(D){var U=P.length!=0?D/P.length:0;if(!isNaN(U)){var Q=P.scaleX,J=P.scaleY;P.scaleX*=U,P.scaleY*=U;var N=P.localToGlobal(P._startX,P._startY),te=P.localToGlobal(P._endX,P._endY);P.scaleX=Q,P.scaleY=J;var ae=P.globalToLocal(N.x,N.y),ee=P.globalToLocal(te.x,te.y);P.setPoints(ae,ee)}}}),Object.defineProperty(P,"startPoint",{get:function(){return new e.Point(P._startX,P._startY)},set:function(D){P._startX=n(D.x)?P._startX:D.x,P._startY=n(D.y)?P._startY:D.y,P.drawShape()}}),Object.defineProperty(P,"endPoint",{get:function(){return new e.Point(P._endX,P._endY)},set:function(D){P._endX=n(D.x)?P._endX:D.x,P._endY=n(D.y)?P._endY:D.y,P.drawShape()}}),Object.defineProperty(P,"startHead",{get:function(){return P._startHead},set:function(D){P._startHead=D,P.drawShape()}}),Object.defineProperty(P,"endHead",{get:function(){return P._endHead},set:function(D){P._endHead=D,P.drawShape()}}),Object.defineProperty(P,"startX",{get:function(){return P._startX},set:function(D){P._startX=D||0,P.drawShape()}}),Object.defineProperty(P,"startY",{get:function(){return P._startY},set:function(D){P._startY=D||0,P.drawShape()}}),Object.defineProperty(P,"endX",{get:function(){return P._endX},set:function(D){P._endX=D||0,P.drawShape()}}),Object.defineProperty(P,"endY",{get:function(){return P._endY},set:function(D){P._endY=D||0,P.drawShape()}}),Object.defineProperty(P,"points",{get:function(){return P._points},set:function(D){D&&(P._points=D,P.drawShape())}}),Object.defineProperty(P,"lineOrientation",{get:function(){return P._lineOrientation},set:function(D){D&&(P._lineOrientation=D,P.drawShape())}}),S!==!1&&e.styleTransforms(this,O),this.clone=function(D){var U=D||!e.isPick(I[3])?P._startHead:I[3];U&&U.clone&&(U=U.clone(),U.rotation=P._startHead.startAngle);var Q=D||!e.isPick(I[4])?P._endHead:I[4];Q&&Q.clone&&(Q=Q.clone(),Q.rotation=P._endHead.startAngle);var J=P.cloneProps(new e.Line(D||!e.isPick(I[0])?P.length:I[0],D||!e.isPick(I[2])?P.thickness:I[2],D||!e.isPick(I[1])?P.color:I[1],U,Q,P.dashed,d,p,P._lineOrientation,k,x,e.copy(T),S,this.group,E));return P.points?J.setPoints(P.points):J.setPoints(P._startX,P._startY,P._endX,P._endY),P.linearGradientParams&&J.linearGradient.apply(J,P.linearGradientParams),P.radialGradientParams&&J.radialGradient.apply(J,P.radialGradientParams),J}},e.extend(e.Line,e.CustomShape,"clone","zimCustomShape",!1),e.Squiggle=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U){var Q="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",J;if(J=yt(e.Squiggle,arguments,Q,this))return J;qe("53.2"),this.group=D;var N=V===!1?{}:e.getStyle("Squiggle",this.group,U);if(n(r)&&(r=N.thickness!=null?N.thickness:6),n(o)&&(o=N.length!=null?N.length:300),n(i)&&(i=N.points!=null?N.points:5),typeof i=="string"){var te=new e.SVGContainer;i=te.processPath(i)}var ae=typeof i!="number",ee=typeof i=="number"?i:i.length;if(ee==0)return;n(l)&&(l=N.controlLength!=null?N.controlLength:o/ee),this.zimCustomShape_constructor(o,l,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,n(S)&&(S=N.dashed!=null?N.dashed:!1),n(t)&&(t=N.color!=null?N.color:e.blue),t.style&&(this.colorCommand=t,t=e.black),n(f)&&(f=N.controlType!=null?N.controlType:null);var pe=f;n(f)&&(f="mirror"),n(d)&&(d=N.lockControlType!=null?N.lockControlType:!1),n(F)&&(F=N.interactive!=null?N.interactive:!0),n(p)&&(p=N.showControls!=null?N.showControls:F);var $=p;n(w)&&(w=N.lockControls!=null?N.lockControls:!F),n(k)&&(k=N.handleSize!=null?N.handleSize:e.mobile()?20:10),n(x)&&(x=N.allowToggle!=null?N.allowToggle:F),n(T)&&(T=N.move!=null?N.move:F),n(E)&&(E=N.circleColor!=null?N.circleColor:e.light),n(R)&&(R=N.circleBorderColor!=null?N.circleBorderColor:e.dark),n(C)&&(C=N.stickColor!=null?N.stickColor:e.darker),n(O)&&(O=N.stickThickness!=null?N.stickThickness:1),n(I)&&(I=N.selectColor!=null?N.selectColor:e.white),n(_)&&(_=N.selectPoints!=null?N.selectPoints:F),this.circleColor=E,this.circleBorderColor=R,this.stickColor=C,this.stickThickness=O,n(b)&&(b=N.onTop!=null?N.onTop:!0),n(P)&&(P=N.editPoints!=null?N.editPoints:F),n(K)&&(K=N.strokeObj!=null?N.strokeObj:{});var X=y(t);this.veeObj={color:X[0]};function y(){return arguments}t=e.Pick.choose(t);var g=this,h;this.types=["mirror","straight","free","none"],this.interactive=F,this.num=ee,this.onTop=b,this.move=T,this.editPoints=P,this.allowToggle=x,this.lockControlType=d,this.selectPoints=_,this.lockControls=w;var L,q,A;g._color=t,g._thickness=r,g._dashed=S,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);var Y,xe,G,Z,ge=g.move,he=2,ne,ue;pe&&typeof i!="number"&&e.loop(i,function(de){de[8]=pe,pe=="none"&&(de[4]=de[5]=de[6]=de[7]=0)}),Te();function Te(){ue&&ue.removeAllEventListeners(),g.num=ee=typeof i=="number"?i:i.length,ee=Math.max(2,ee),l=o/ee,Y=g.shape=new e.Shape({style:!1}).addTo(g);var de=g.sticks=new e.Shape({style:!1}).addTo(g);k<=0&&de.removeFrom();var Pe=Y.graphics;Pe.c();var Me=de.graphics;Me.c();var fe=k/10*8,ve=k;g.selectPoints?(g.selectedBalls=new e.SelectionSet,g.selectedRect1s=new e.SelectionSet,g.selectedRect2s=new e.SelectionSet,g.selectionManager=new e.SelectionManager([g.selectedBalls,g.selectedRect1s,g.selectedRect2s],"ctrl",!1)):g.selectionManager=new e.SelectionManager(null,"ctrl");var Ie=e.mobile();ue=g.controls=new e.Container({style:!1}).addTo(g),g.interactive&&ue.drag({onTop:!Ie}),L=[],A=[],q=[];var we,Xe,ye,Ge,He,Oe,ce,Ue,Qe;for(we=0;we<ee;we++){if(Ge=new e.Container({style:!1}).addTo(ue),Ge.num=we,typeof i=="number"){var Je=e.Pick.choose(l);ye=new e.Container(Je,r,null,null,!1).addTo(g).loc({x:we*o/(ee-1)-Je/2,y:we%2*Je}),ce=new e.Circle(fe,g.selectPoints&&g.selectedBalls.isSelected(we)?I:g.circleColor,g.circleBorderColor,2,null,null,null,null,!1).centerReg(ye).loc({x:Je/2,y:0}),He=new e.Rectangle(ve,ve,g.selectPoints&&g.selectedRect1s.isSelected(we)?I:Le(f),k==0?null:e.dark,k==0?null:2,null,null,null,null,!1).centerReg(ye).loc({x:0,y:0}),Oe=new e.Rectangle(ve,ve,g.selectPoints&&g.selectedRect2s.isSelected(we)?I:Le(f),k==0?null:e.dark,k==0?null:2,null,null,null,null,!1).centerReg(ye).loc({x:Je,y:0});var nt=ye.localToLocal(ce.x,ce.y,ue);ce.x=nt.x,ce.y=nt.y,ce.addTo(Ge,null,!1);var gt=ye.localToLocal(He.x,He.y,ue);He.x=f=="none"?0:gt.x-ce.x,He.y=f=="none"?0:gt.y-ce.y,He.addTo(Ge,null,!1);var We=ye.localToLocal(Oe.x,Oe.y,ue);Oe.x=f=="none"?0:We.x-ce.x,Oe.y=f=="none"?0:We.y-ce.y,Oe.addTo(Ge,null,!1),Ge.x=ce.x,Ge.y=ce.y,ce.x=0,ce.y=0,f=="none"&&ce.addTo(Ge,null,!1)}else Qe=i[we],Ue=Qe[8]?Qe[8]:f,Ge.loc({x:Qe[0],y:Qe[1]}),ce=new e.Circle(fe,g.circleColor,g.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ge).loc({x:Qe[2],y:Qe[3]}),He=new e.Rectangle(ve,ve,Le(Ue),k==0?null:e.dark,k==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ge,0).loc({x:Qe[4],y:Qe[5]}),Oe=new e.Rectangle(ve,ve,Le(Ue),k==0?null:e.dark,k==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(Ge,0).loc({x:Qe[6],y:Qe[7]});ce.mySet=Ge,ce.rect1=He,ce.rect2=Oe,ce.index=we,Ie?ce.on("mousedown",at):ce.on("dblclick",Ae),He.ball=ce,He.other=Oe,Oe.ball=ce,Oe.other=He,k==0&&(ce.expand(10),He.expand(10),Oe.expand(10)),Ie&&(ce.expand(),He.expand(),Oe.expand()),Xe=[Ge,ce,He,Oe,Qe?Qe[8]:f],L.push(Xe),q.push(ce),A.push(Ge)}var st=!1;function at(Ee){st?(Ee.preventDefault(),Ae(Ee)):(st=!0,setTimeout(function(){st=!1},300))}function Ae(Ee){if(!g.lockControlType){var ot=Ee.target,Ve=L[ot.index][4]?L[ot.index][4]:f;Math.abs(ot.rect1.x)<=2&&Math.abs(ot.rect1.y)<=2&&Math.abs(ot.rect2.x)<=2&&Math.abs(ot.rect2.y)<=2&&(Ve="none"),Ve=="none"&&ot.parent.addChildAt(ot,0),Ve=g.types[(g.types.indexOf(Ve)+(g.shiftKey?-1:1)+g.types.length)%g.types.length],Ve=="none"&&(ot.rect1.x=ot.rect1.y=ot.rect2.x=ot.rect2.y=0,ot.parent.addChild(ot),Ee.stopImmediatePropagation()),L[ot.index][4]=Ve,ot.rect1.color=Le(Ve),ot.rect2.color=Le(Ve),g.drawShape(),t.type&&(g.color=t);var Ye=new je.Event("change");Ye.controlType="bezierSwitch",g.dispatchEvent(Ye),ot.stage.update()}}function Le(Ee){var ot={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return ot[Ee]?ot[Ee]:"#993399"}var De=e.mobile();g.drawShape=function(){Pe.c();var Ee=De?10:6,ot,Ve,Ye,Ke,ze,tt,ht,Be,it,vt,et,wt,xt,_t,lt;if(r<Ee)for(Pe.s("rgba(0,0,0,.01)").ss(Ee),Ke=L[0][0],it=Ke.localToLocal(L[0][1].x,L[0][1].y,Y),Pe.mt(it.x,it.y),ot=0;ot<L.length;ot++)Ve=ot,Ye=(ot+1)%L.length,Ke=L[Ve][0],ze=L[Ve][1],tt=L[Ve][2],ht=L[Ve][3],Be=L[Ye][0],vt=L[Ye][1],et=L[Ye][2],xt=Ke.localToLocal(ht.x,ht.y,Y),_t=Be.localToLocal(et.x,et.y,Y),lt=Be.localToLocal(vt.x,vt.y,Y),ot!=L.length-1&&Pe.bt(xt.x,xt.y,_t.x,_t.y,lt.x,lt.y);for(g.colorCommand||(g.colorCommand=Pe.s(g._color).command,t&&t.type&&g.specialColor(g.colorCommand,t,g)),g.thicknessCommand||(g.thicknessCommand=Pe.ss(g._thickness,K.caps,K.joints,K.miterLimit,K.ignoreScale).command),g._dashed&&(g.dashedCommand||(g.dashedCommand=Pe.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command)),Ke=L[0][0],it=Ke.localToLocal(L[0][1].x,L[0][1].y,Y),Pe.mt(it.x,it.y),Me.c().s(g.stickColor).ss(g.stickThickness),ot=0;ot<L.length;ot++)Ve=ot,Ye=(ot+1)%L.length,Ke=L[Ve][0],ze=L[Ve][1],tt=L[Ve][2],ht=L[Ve][3],Be=L[Ye][0],vt=L[Ye][1],et=L[Ye][2],xt=Ke.localToLocal(ht.x,ht.y,Y),_t=Be.localToLocal(et.x,et.y,Y),lt=Be.localToLocal(vt.x,vt.y,Y),ot!=L.length-1&&Pe.bt(xt.x,xt.y,_t.x,_t.y,lt.x,lt.y),it=Ke.localToLocal(ze.x,ze.y,Y),wt=Ke.localToLocal(tt.x,tt.y,Y),ot==0&&(tt.visible=0),ot!=0&&Me.mt(it.x,it.y).lt(wt.x,wt.y),ot!=L.length-1&&Me.mt(it.x,it.y).lt(xt.x,xt.y),ot==L.length-1&&(ht.visible=0);g._dashed&&Pe.append(g.dashedCommand),Pe.append(g.thicknessCommand),Pe.append(g.colorCommand)},g.drawShape(),t.type&&(g.color=t);var ft;ue.on("mousedown",function(Ee){if(h=Ee.target.stage,!g.lockControls){if(g.selectPoints&&(g.keyFocus=!0),ft={x:Ee.target.x,y:Ee.target.y},Ee.target.rect1)ce=Ee.target,ce.startX=ce.x,ce.startY=ce.y,ce.rect1.startX=ce.rect1.x,ce.rect1.startY=ce.rect1.y,ce.rect2.startX=ce.rect2.x,ce.rect2.startY=ce.rect2.y;else{var ot=Ee.target;ot.startX=ot.x,ot.startY=ot.y,ce=ot.ball;var Ve=ce.index,Ye=f;if(n(L[Ve][4])||(Ye=L[Ve][4]),Ye=="straight"){var Ke=ot.other,ze=Ke.x-ce.x,tt=Ke.y-ce.y;Ke.stickLength=Math.sqrt(Math.pow(ze,2)+Math.pow(tt,2))}}if(g.selectPoints){var ht=g.selectionManager.currentSet;if(ht&&ht.selections&&ht.selections.length>0)for(we=0;we<ht.selections.length;we++){var Be=g.pointObjects[ht.selections[we]];Be[1].startX=Be[1].x,Be[1].startY=Be[1].y,Be[2].startX=Be[2].x,Be[2].startY=Be[2].y,Be[3].startX=Be[3].x,Be[3].startY=Be[3].y}}}}),g.selectPoints&&ue.tap(function(Ee){if(Ee.target.rect1){var ot=Ee.target;g.selectedBalls.toggle(ot.parent.num)}else{var Ve=Ee.target;Ve.color="white",ot=Ve.ball,ot.rect1==Ve?g.selectedRect1s.toggle(ot.parent.num):g.selectedRect2s.toggle(ot.parent.num)}for(we=0;we<g.pointObjects.length;we++){var Ye=g.pointObjects[we];Ye[1].color=g.selectedBalls.isSelected(we)?I:g.circleColor,Ye[2].color=g.selectedRect1s.isSelected(we)?I:Le(Ye[4]),Ye[3].color=g.selectedRect2s.isSelected(we)?I:Le(Ye[4])}h.update()}),ue.on("pressmove",function(Ee){if(!g.lockControls)if(g.selectPoints){var ot=Fe();if(ot.indexOf(Ee.target)==-1)ne(Ee.target),g.drawShape();else if(ot.length>0){for(var Ve=Ee.target.x-Ee.target.startX,Ye=Ee.target.y-Ee.target.startY,Ke=0;Ke<ot.length;Ke++){var ze=ot[Ke];ze.x=ze.startX+Ve,ze.y=ze.startY+Ye,ne(ze)}g.drawShape()}}else ne(Ee.target),g.drawShape()}),ue.on("pressup",function(Ee){if(!g.lockControls){var ot=Ee.target.x!=ft.x||Ee.target.y!=ft.y,Ve=new je.Event("change");Ee.target.rect1?(Ve.controlType="bezierPoint",mt(Ee.target)):Ve.controlType="bezierHandle",ot&&g.dispatchEvent(Ve)}});function mt(Ee){if(g.selectPoints){var ot=Fe();if(ot&&ot.indexOf(Ee)==-1)ie(Ee);else if(ot&&ot.length>0)for(var Ve=0;Ve<ot.length;Ve++)ie(ot[Ve]);else ie(Ee)}else ie(Ee)}g.changeControl=function(Ee,ot,Ve,Ye,Ke,ze,tt,ht,Be){var it="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",vt;if(vt=yt(g.changeControl,arguments,it))return vt;if(n(Ee)){for(we=0;we<L.length;we++)g.changeControl(we,ot,Ve,Ye,Ke,ze,tt,ht);return}var et=L[Ee];et[4]=ot,ot=="none"?(n(tt)||(et[2].x=tt),n(ht)||(et[2].y=ht),et[2].x=et[1].x,et[2].y=et[1].y,et[3].x=et[1].x,et[3].y=et[1].y,et[1].parent.addChild(et[1])):(n(Ve)||(et[2].x=Ve),n(Ye)||(et[2].y=Ye),n(Ke)||(et[3].x=Ke),n(ze)||(et[3].y=ze),n(tt)||(et[1].x=tt),n(ht)||(et[1].y=ht),et[1].parent.addChildAt(et[1],0)),Be&&(g.update(),h&&h.update())},g.transformPoints=function(Ee,ot,Ve,Ye,Ke){return n(Ke)&&(Ke=!0),g.points=e.transformPoints(g.points,Ee,ot,Ve,Ye),Ke&&g.approximateBounds(),g},g.traverse=function(Ee,ot,Ve,Ye){var Ke=e.copy(g.segmentRatios);Ke.unshift(0),n(Ve)&&(Ve=ot+1);var ze=ot<Ve,tt,ht;return ze?(tt=Ke[ot]*100,ht=Ke[Ve]*100):(tt=50+(100-Ke[ot]*100)/2,ht=50+(100-Ke[Ve]*100)/2),Ee.percentComplete=Ee.zimStartPercent=tt+.1,Ee.animate({ease:"linear",props:{path:g},rewind:!ze,time:Ye,events:!0}),Ee.on("animation",function(Be){if(Ee.percentComplete>ht||Ee.percentComplete==0){Ee.stopAnimate(),Be.remove();var it=new je.Event("traversed");it.obj=Ee,g.dispatchEvent(it)}}),g},g.reversePoints=function(){return i=e.copy(g.points),g.points=e.reversePoints(e.copy(g.points)),g.update(),g},g.appendPoints=function(Ee,ot){var Ve=e.copy(g.points);return g.points=e.appendPoints(Ve,Ee,ot),g.update(),g},g.prependPoints=function(Ee,ot){var Ve=e.copy(g.points);return g.points=e.rependPoints(Ve,i,ot),g.update(),g},g.splitPoints=function(Ee){var ot=e.copy(g.points);if(!(Ee<1||Ee>ot.length-1)){var Ve=e.splitPoints(ot,Ee),Ye=Ve[0],Ke=Ve[1],ze=g.clone();return g.points=Ye,g.update(),ze.points=Ke,g.parent&&ze.addTo(g.parent),ze}},g.makeBlob=function(Ee,ot){n(Ee)&&(Ee="mirror"),n(ot)&&(ot=5);var Ve=e.copy(g.points);e.loop(Ve,function(Ke,ze,tt){Ke[8]||(Ke[8]="mirror"),ze==0&&(Ee=="free"&&(Ke[4]=Ke[5]=0),Ke[8]=Ee),ze==tt-1&&(Ee=="free"&&(Ke[6]=Ke[7]=0),Ke[8]=Ee)}),Math.abs(Ve[0][0]-Ve[Ve.length-1][0])<ot&&Math.abs(Ve[0][1]-Ve[Ve.length-1][1])<ot&&(Ve[0][4]=Ve[Ve.length-1][4],Ve[0][5]=Ve[Ve.length-1][5],Ve.pop());var Ye=new e.Blob({points:Ve,borderColor:g.color,borderWidth:g.thickness,showControls:g.controlsVisible,interactive:g.interactive,onTop:g.onTop,dashed:g.dashed,stickColor:g.stickColor,stickThickness:g.stickThickness});return Ye},g.update=function(Ee){return Ee?g.points=g.pointsAdjusted:g.drawShape(),g.zimAnimateChanged=!0,g},g.interactive&&(T&&Y.drag({onTop:!1}),xe=Y.on("mousedown",function(Ee){h=Ee.target.stage,ft={x:Y.x,y:Y.y},g.selectPoints&&(g.keyFocus=!0),Ze()}),G=Y.on("pressmove",function(){ue.x=Y.x,ue.y=Y.y,de.x=Y.x,de.y=Y.y}),Z=Y.on("pressup",function(){var Ee=Y.x!=ft.x||Y.y!=ft.y,ot=Y.localToLocal(g.regX,g.regY,g.parent);if(g.x=ot.x,g.y=ot.y,ue.x=ue.y=de.x=de.y=Y.x=Y.y=0,Ee){var Ve=new je.Event("change");Ve.controlType="move",g.dispatchEvent(Ve)}h&&h.update()}),g.move||se(!0));function Ze(){if(g.onTop){var Ee=g.parent.numChildren-1;g.parent.getChildAt(Ee).type=="Keyboard"&&Ee--,g.parent.setChildIndex(g,Ee)}}g.toggleEvent=g.on("mousedown",function(){g.allowToggle&&($||(g.showControls(),g.dispatchEvent("controlsshow")))}),g.added(function(){h=g.stage,g.toggleStageEvent&&h.off("stagemousedown",g.toggleStageEvent),g.toggleStageEvent=h.on("stagemousedown",function(Ee){!g.allowToggle||!g.stage||$&&!g.hitTestPoint(Ee.stageX/e.scaX,Ee.stageY/e.scaY,!1)&&(g.hideControls(),g.dispatchEvent("controlshide"))})}),g.clickEvent=g.on("click",function(){g.ctrlKey&&setTimeout(function(){g.clone(!0).addTo(g.stage).mov(0,100),g.allowToggle&&(g.hideControls(),g.dispatchEvent("controlshide"));var Ee=new je.Event("change");Ee.controlType="move",g.dispatchEvent(Ee),g.stage.update()},50)}),g.hideControls=function(){return g.toggled=!1,ue.visible=!1,de.visible=!1,$=!1,g.stage&&g.stage.update(),!g.allowToggle&&g.move&&se(),g},p||g.hideControls(),g.showControls=function(){return g.toggled=!0,ue.visible=!0,de.visible=!0,$=!0,ue.x=Y.x,ue.y=Y.y,de.x=Y.x,de.y=Y.y,g.addChildAt(Y,0),g.move&&!g.allowToggle&&Se(),g.stage&&g.stage.update(),g},g.toggle=function(Ee){return Ee===!0?g.showControls():Ee===!1||$?g.hideControls():g.showControls(),g},g.recordData=function(Ee){n(Ee)&&(Ee=!1);var ot={type:"Squiggle",index:g.parent?g.parent.getChildIndex(g):-1,x:g.x,y:g.y,points:g.getPoints(),color:g.color,thickness:g.thickness,move:g.move,allowToggle:g.allowToggle,controlsVisible:$};return Ee?JSON.stringify(ot):ot},g.setData=function(Ee,ot){if(!n(Ee)){if(ot)try{Ee=JSON.parse(Ee)}catch(ze){return}var Ve=Ee.index;n(Ve)&&(Ve=-1),delete Ee.index;var Ye=Ee.points;n(Ye)||g.setPoints(Ye),delete Ee.points,g.num=Ye.length;for(var Ke in Ee)g[Ke]=Ee[Ke];return g.parent&&g.parent.setChildIndex(g,Ve),g.update(),g}},g.getPoints=function(Ee){n(Ee)&&(Ee=!1);var ot=g.points;if(Ee){if(!g.pane){var Ve=g.pane=new e.Pane({container:g.stage,width:Math.min(500,g.stage.width-20),height:Math.min(500,g.stage.height-20),draggable:!0}),Ye=g.textArea=new e.TextArea(Math.min(400,g.stage.width-70),Math.min(400,g.stage.height-70));Ye.centerReg(Ve)}g.textArea.text=JSON.stringify(ot),g.pane.show()}return ot},g.recordPoints=g.getPoints,g.setPoints=function(Ee){for(var ot,Ve,Ye=0;Ye<Ee.length;Ye++)ot=L[Ye],Ve=Ee[Ye],!n(ot)&&(ot[0].x=Ve[0],ot[0].y=Ve[1],ot[1].x=Ve[2],ot[1].y=Ve[3],ot[2].x=Ve[4],ot[2].y=Ve[5],ot[3].x=Ve[6],ot[3].y=Ve[7],ot[4]=Ve[8]);return g.update(),g},V!==!1&&e.styleTransforms(g,N),g.clone=function(Ee,ot){var Ve=[],Ye=!1;e.loop(g.pointControls,function(ze){ze.scaleX+ze.scaleY+ze.regX+ze.regY+ze.rotation!=2&&(Ye=!0),Ve.push([ze.scaleX,ze.scaleY,ze.regX,ze.regY,ze.rotation])});var Ke=g.cloneProps(new e.Squiggle(ot?g.colorCommand:Ee||!e.isPick(X[0])?g.color:X[0],g.thickness,g.getPoints(),o,l,f,d,ue.visible,w,k,g.allowToggle,g.move,S,b,g.circleColor,g.circleBorderColor,g.stickColor,g.stickThickness,I,_,g.editPoints,F,K,V,g.group,U));return Ye&&(e.loop(Ke.pointControls,function(ze,tt){ze.scaleX=Ve[tt][0],ze.scaleY=Ve[tt][1],ze.regX=Ve[tt][2],ze.regY=Ve[tt][3],ze.rotation=Ve[tt][4]}),Ke.update()),g.linearGradientParams&&Ke.linearGradient.apply(Ke,g.linearGradientParams),g.radialGradientParams&&Ke.radialGradient.apply(Ke,g.radialGradientParams),Ke},g.shape.on("mousedown",function(Ee){h=Ee.target.stage,g.editPoints&&(g.controlsVisible?(g.pressX=Ee.stageX/e.scaX,g.pressY=Ee.stageY/e.scaX):(g.pressX=null,g.pressY=null))}),g.addPointFactor=10,g.addMinDistance=15,g.shape.on("pressup",function(Ee){if(g.editPoints&&g.pressX&&Math.abs(g.pressX-Ee.stageX/e.scaX)<he&&Math.abs(g.pressY-Ee.stageY/e.scaY)<he){g.selectPoints&&(g.lastPoints=e.copy(g.points));var ot=g.points,Ve=g.globalToLocal(Ee.stageX/e.scaX,Ee.stageY/e.scaY),Ye=e.closestPointAlongCurve(Ve,g.segmentPoints);if(g.editPoints=="anywhere")ot.splice(Ye+1,0,[Ve.x,Ve.y,0,0,0,0,0,0]),g.points=ot,g.changeControl({index:Ye+1,type:"mirror",update:!0});else{var Ke=g.pointsAdjusted,ze=g.getSegmentPoint(Ke[Ye],Ke[(Ye+1)%Ke.length]),tt=e.distanceAlongCurve(ze),ht=Math.round(tt/g.addPointFactor),Be=g.interpolate(ht,Ye,!1,ot),it=1e4,vt;if(e.loop(Be,function(_t,lt){var Dt=e.dist(_t,Ve);Dt<it&&(it=Dt,vt=lt)}),it<g.addMinDistance){var et=g.segmentRatios,wt=et[Ye],xt=Ye>0?et[Ye-1]:0;g.addPoint(100*(xt+(wt-xt)*(vt/(ht+1))))}}g.lastSelectedIndex=Ye+1,g.lastSelected=g.controls.getChildAt(g.lastSelectedIndex),g.stage.update()}}),g.controls.on("click",function(Ee){g.lastSelected=Ee.target.parent,g.lastSelectedIndex=g.controls.getChildIndex(Ee.target.parent),g.editPoints&&g.selectionManager.shiftKey&&dt(Ee)});function dt(Ee){if(Ee.target.type=="Circle"){var ot=g.lastSelectedIndex=g.controls.getChildIndex(Ee.target.parent);if(g.controls.numChildren<=2)return;var Ve=g.points;g.selectPoints&&(g.lastPoints=e.copy(Ve)),Ve.splice(ot,1),g.points=Ve,g.stage.update(),g.lastSelected=g.lastSelectedIndex=null}}g.controls.hold(dt),$||g.hideControls(),g.dispatchEvent("update")}function Fe(){var de=[],Pe=g.selectionManager.currentSet;if(Pe&&Pe.selections&&Pe.selections.length>0)for(var Me=0;Me<Pe.selections.length;Me++){var fe=g.pointObjects[Pe.selections[Me]];if(Pe==g.selectedBalls)de.push(fe[1]);else if(Pe==g.selectedRect1s)de.push(fe[2]);else if(Pe==g.selectedRect2s)de.push(fe[3]);else continue}return de}function ie(de){if(de.type=="Circle"){var Pe=de,Me=Pe.mySet,fe=Pe.rect1,ve=Pe.rect2;fe.x-=Pe.x,fe.y-=Pe.y,ve.x-=Pe.x,ve.y-=Pe.y,Me.x+=Pe.x,Me.y+=Pe.y,Pe.x=0,Pe.y=0}}g.selectionManager.on("keydown",function(de){if(g.selectPoints&&g.keyFocus&&de.keyCode>=37&&de.keyCode<=40){var Pe=Fe();if(Pe.length>0){for(var Me=0;Me<Pe.length;Me++){var fe=Pe[Me];de.keyCode==37?fe.x-=g.selectionManager.shiftKey?10:1:de.keyCode==39?fe.x+=g.selectionManager.shiftKey?10:1:de.keyCode==38?fe.y-=g.selectionManager.shiftKey?10:1:de.keyCode==40&&(fe.y+=g.selectionManager.shiftKey?10:1),ne(fe)}g.drawShape(),g.dispatchEvent("update"),g.stage&&g.stage.update()}}}),g.selectionManager.on("keyup",function(de){if(g.selectPoints&&g.keyFocus&&de.keyCode>=37&&de.keyCode<=40){var Pe=Fe();if(Pe.length>0)for(var Me=0;Me<Pe.length;Me++)ie(Pe[Me])}}),g.selectionManager.on("undo",function(){if(g.selectPoints&&g.keyFocus&&g.lastPoints){var de=e.copy(g.lastPoints);g.lastPoints=e.copy(g.points),g.points=de,g.stage&&g.stage.update()}}),ne=function(de){if(!g.lockControls){var Pe;if(de.rect1){Pe=de;var Me=Pe.x-Pe.startX,fe=Pe.y-Pe.startY;Pe.rect1.x=Pe.rect1.startX+Me,Pe.rect1.y=Pe.rect1.startY+fe,Pe.rect2.x=Pe.rect2.startX+Me,Pe.rect2.y=Pe.rect2.startY+fe}else{var ve=de,Ie=ve.other;Pe=ve.ball;var we=Pe.index,Xe=f;if(n(L[we][4])||(Xe=L[we][4]),Xe=="straight"||Xe=="mirror"){var ye=ve.x-Pe.x,Ge=ve.y-Pe.y;if(Xe=="mirror")Ie.x=Pe.x-ye,Ie.y=Pe.y-Ge;else{var He=Math.atan2(Ge,ye),Oe=-Ie.stickLength*Math.cos(He+Math.PI),ce=-Ie.stickLength*Math.sin(He+Math.PI);Ie.x=Pe.x-Oe,Ie.y=Pe.y-ce}}}}},Object.defineProperty(g,"move",{get:function(){return T},set:function(de){T!=de&&(T=de,de?Se():se())}}),Object.defineProperty(g,"interactive",{get:function(){return F},set:function(de){F=de,$=F,g.allowToggle=F,g.editPoints=F,g.lockControls=!F,g.selectPoints=F,g.move=F;var Pe=g.points;g.points=Pe}}),Object.defineProperty(g,"allowToggle",{get:function(){return x},set:function(de){x!=de&&(x=de,x?g.move&&Se():!$&&g.move&&se())}});function Se(){g.move!="always"&&(ge||(ge=!0,Y.drag({onTop:!1}),xe=Y.on("mousedown",xe),G=Y.on("pressmove",G),Z=Y.on("pressup",Z)))}function se(de){g.move!="always"&&(!de&&!ge||(ge=!1,Y.noDrag(),Y.off("mousedown",xe),Y.off("pressmove",G),Y.off("pressup",Z)))}var me=w;Object.defineProperty(g,"lockControls",{get:function(){return me},set:function(de){me=de,de?(g.controls.mouseChildren=!1,g.controls.mouseEnabled=!1):(g.controls.mouseChildren=!0,g.controls.mouseEnabled=!0)}}),g.lockControls=me,Object.defineProperty(g,"controlsVisible",{get:function(){return $},set:function(de){$=de,de?g.showControls():g.hideControls()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==g},set:function(){e.KEYFOCUS=g}}),e.KEYFOCUS||j();function j(){if(g.selectPoints){g.keyFocus=!0;var de=document.activeElement;de&&de.blur()}}Object.defineProperty(g,"points",{get:function(){for(var de=[],Pe,Me,fe=0;fe<L.length;fe++)Me=L[fe],Pe=[e.decimals(Me[0].x),e.decimals(Me[0].y),e.decimals(Me[1].x),e.decimals(Me[1].y),e.decimals(Me[2].x),e.decimals(Me[2].y),e.decimals(Me[3].x),e.decimals(Me[3].y)],Me[4]&&Me[4]!=="mirror"&&Pe.push(Me[4]),de.push(Pe);return de},set:function(de){var Pe=g.x,Me=g.y,fe=g.visible,ve=[],Ie=!1;e.loop(g.pointControls,function(we){we.scaleX+we.scaleY+we.regX+we.regY+we.rotation!=2&&(Ie=!0),ve.push([we.scaleX,we.scaleY,we.regX,we.regY,we.rotation])}),g.dispose(!0),i=de,Te(),g.lockControls=me,g.x=Pe,g.y=Me,g.visible=fe,Ie&&(e.loop(g.pointControls,function(we,Xe){we.scaleX=ve[Xe][0],we.scaleY=ve[Xe][1],we.regX=ve[Xe][2],we.regY=ve[Xe][3],we.rotation=ve[Xe][4]}),g.update())}}),Object.defineProperty(g,"pointsAdjusted",{get:function(){var de=[],Pe,Me,fe,ve=g.pointObjects;return e.loop(ve.length,function(Ie){if(fe=ve[Ie],Me=L[Ie],fe[0].rotation==0&&fe[0].scaleX==0&&fe[0].scaleY==0)Pe=[e.decimals(Me[0].x),e.decimals(Me[0].y),e.decimals(Me[1].x),e.decimals(Me[1].y),e.decimals(Me[2].x),e.decimals(Me[2].y),e.decimals(Me[3].x),e.decimals(Me[3].y)];else{var we=fe[0].localToLocal(fe[2].x,fe[2].y,fe[0].parent),Xe=fe[0].localToLocal(fe[3].x,fe[3].y,fe[0].parent);Pe=[e.decimals(Me[0].x),e.decimals(Me[0].y),e.decimals(Me[1].x),e.decimals(Me[1].y),e.decimals(we.x-Me[0].x),e.decimals(we.y-Me[0].y),e.decimals(Xe.x-Me[0].x),e.decimals(Xe.y-Me[0].y)]}Me[4]&&Me[4]!=="mirror"&&Pe.push(Me[4]),de.push(Pe)}),de},set:function(){At&&ut("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(g,"pointObjects",{get:function(){return L},set:function(){At&&ut("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(g,"pointControls",{get:function(){return A},set:function(){At&&ut("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(g,"pointCircles",{get:function(){return q},set:function(){At&&ut("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(g,"segmentPoints",{get:function(){var de=[],Pe=g.pointsAdjusted;return e.loop(Pe.length-1,function(Me){var fe=g.getSegmentPoint(Pe[Me],Pe[Me+1]);de.push(fe)}),de},set:function(){At&&ut("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(g,"segmentRatios",{get:function(){var de=[],Pe=0;e.loop(g.segmentPoints,function(ve){var Ie=e.distanceAlongCurve(ve);de.push(Ie),Pe+=Ie});var Me=[],fe=0;return e.loop(de,function(ve){var Ie=ve/Pe;fe+=Ie,Me.push(fe)}),Me},set:function(){At&&ut("Squiggle() - segmentRatios is read only")}}),g.approximateBounds=function(de,Pe,Me){n(de)&&(de=80),n(Me)&&(Me=0),de/=g.num;var fe=g.interpolate(de,null,!0,null,!0),ve=e.boundsAroundPoints(fe);if(g.setBounds(ve.x-Me,ve.y-Me,ve.width+Me*2,ve.height+Me*2),Pe){if(!g.parent)return At&&ut("approximateBounds() - add to stage to first to see points"),g;g.hitPathPoints?g.hitPathPoints.removeAllChildren():g.hitPathPoints=new e.Container().addTo(),g.hitPathPoints.top();for(var Ie=0;Ie<fe.length;Ie++){var we=fe[Ie];we=g.localToGlobal(we.x,we.y),new e.Circle(3).loc(we.x,we.y,g.hitPathPoints)}}return g},g.getPointAngle=function(de){var Pe=g.pointObjects[de][0],Me=g.pointObjects[de][2],fe=g.pointObjects[de][3],ve,Ie;return Pe==g.stage?(ve=new e.Point(Me.x,Me.y),Ie=new e.Point(fe.x,fe.y)):(ve=Pe.localToGlobal(Me.x,Me.y),Ie=Pe.localToGlobal(fe.x,fe.y)),e.angle(ve.x,ve.y,Ie.x,Ie.y)},g.getSegmentPoint=function(de,Pe){if(!(n(de)||n(Pe))){(de[2]!=0||de[3]!=0)&&(de[4]-=de[2],de[5]-=de[3],de[6]-=de[2],de[7]-=de[3],de[0]+=de[2],de[1]+=de[3],de[2]=0,de[3]=0),(Pe[2]!=0||Pe[3]!=0)&&(Pe[4]-=Pe[2],Pe[5]-=Pe[3],Pe[6]-=Pe[2],Pe[7]-=Pe[3],Pe[0]+=Pe[2],Pe[1]+=Pe[3],Pe[2]=0,Pe[3]=0);var Me={x:de[0],y:de[1]},fe={x:de[0]+de[6],y:de[1]+de[7]},ve={x:Pe[0]+Pe[4],y:Pe[1]+Pe[5]},Ie={x:Pe[0],y:Pe[1]};return(ue.x!=0||ue.y!=0)&&(Me.x+=ue.x,fe.x+=ue.x,ve.x+=ue.x,Ie.x+=ue.x,Me.y+=ue.y,fe.y+=ue.y,ve.y+=ue.y,Ie.y+=ue.y),[Me,fe,ve,Ie]}},g.getAdjacentSegmentData=function(de){n(de)&&(de=0);var Pe=g.pointsAdjusted;return g.num==2?[[g.getSegmentPoint(Pe[0],Pe[1])],[0]]:de==0?[[g.getSegmentPoint(Pe[0],Pe[1]),g.getSegmentPoint(Pe[1],Pe[2])],[0,1]]:de>=g.num-2?[[g.getSegmentPoint(Pe[g.num-3],Pe[g.num-2]),g.getSegmentPoint(Pe[g.num-2],Pe[g.num-1])],[g.num-3,g.num-2]]:[[g.getSegmentPoint(Pe[de-1],Pe[de]),g.getSegmentPoint(Pe[de],Pe[de+1]),g.getSegmentPoint(Pe[de+1],Pe[de+2])],[de-1,de,de+1]]},g.getCurvePoint=function(de,Pe,Me,fe,ve){(n(de)||isNaN(de))&&(de=0),n(Pe)&&(Pe=g.segmentRatios),n(Me)&&(Me=g.segmentPoints),n(fe)&&(fe=!1),n(ve)&&(ve=!1);var Ie=Pe,we=Me,Xe=e.loop(Ie,function(Ue,Qe){if(Ue>=de)return Qe}),ye=Xe>0?Ie[Xe-1]:0,Ge=Xe>0?Ie[Xe]-Ie[Xe-1]:Ie[Xe];if(Ge){var He=(de-ye)/Ge,Oe=e.pointAlongCurve(we[Xe],He,fe,!0),ce=g.localToGlobal(Oe.x,Oe.y);return ce.angle=Oe.angle,ce.z=Xe,n(ce)?void 0:ce}};function _e(de,Pe,Me){return{x:de.x+(Pe.x-de.x)*Me,y:de.y+(Pe.y-de.y)*Me}}function Re(de,Pe,Me,fe,ve,Ie,we,Xe){var ye=de.length-1,Ge=0,He=0;fe==100&&g.type=="Squiggle"&&(fe=99.99),fe=(fe+1e5)%100,e.loop(Me,function(Le,De){if(fe/100<Le)return ye=De,He=Le,!0;Ge=Le});var Oe=g.segmentPoints[ye],ce=He>0?(fe/100-Ge)/(He-Ge):0,Ue=e.pointAlongCurve(Oe,ce,null,Xe),Qe=[Ue.x,Ue.y,0,0];if(!Ie){if(we){g.interpolatedPoints.push({x:Ue.x,y:Ue.y,r:fe/100});return}if(ve!="none"){var Je=_e(Oe[0],Oe[1],ce),nt=_e(Oe[1],Oe[2],ce),gt=_e(Oe[2],Oe[3],ce),We=_e(Je,nt,ce),st=_e(nt,gt,ce);Qe[4]=We.x-Ue.x,Qe[5]=We.y-Ue.y,Qe[6]=st.x-Ue.x,Qe[7]=st.y-Ue.y;var at=g.localToLocal(Je.x,Je.y,Pe[ye]);de[ye][6]=at.x,de[ye][7]=at.y;var Ae=g.localToLocal(gt.x,gt.y,Pe[(ye+1)%de.length]);de[(ye+1)%de.length][4]=Ae.x,de[(ye+1)%de.length][5]=Ae.y}ve&&(Qe[8]=ve),de.splice(ye+1,0,Qe)}}this.addPoint=function(de,Pe){n(de)&&(de=100);var Me=g.points,fe=g.segmentRatios,ve=g.pointControls;return Pe=Pe||pe,Re(Me,ve,fe,de,Pe),g.points=Me,g.num=Me.length,g},this.removePoint=function(de){if(!(n(de)||de<0)){var Pe=e.copy(g.points);return Pe.splice(de,1),g.points=Pe,g.stage&&g.stage.update(),g}},this.addPoints=function(de,Pe,Me,fe,ve,Ie,we){n(Ie)&&(Ie=e.copy(g.points));var Xe=e.copy(g.segmentRatios),ye=0;if(ve&&(g.interpolatedPoints=[]),fe)var Ge=Xe.length*de;return e.loop(Xe,function(He,Oe){ve&&Re(Ie,g.pointControls,g.segmentRatios,ye*100,Pe,!n(Me)&&Oe!=Me,ve,we);var ce=fe?Math.round(Ge*(He-ye)):de,Ue=1/(ce+1);e.loop(ce,function(Qe){var Je=ye+(He-ye)*Ue*(Qe+1);Re(Ie,g.pointControls,g.segmentRatios,Je*100,Pe,!n(Me)&&Oe!=Me,ve,we),!ve&&de>0&&(g.points=Ie)}),ye=He}),ve&&g.type=="Squiggle"&&Re(Ie,g.pointControls,g.segmentRatios,100,Pe,!1,ve,we),g.stage&&g.stage.update(),g.num=Ie.length,g},this.interpolate=function(de,Pe,Me,fe,ve){return n(de)&&(de=1),g.addPoints(de,"none",Pe,Me,!0,fe,ve),g.interpolatedPoints},ae&&g.approximateBounds(),this.dispose=function(de,Pe,Me){if(g.shape){if(e.gD(g),h&&g.toggleStageEvent&&h.off("stagemousedown",g.toggleStageEvent),g.controls.noDrag(),g.controls.removeAllEventListeners(),g.selectPoints&&g.selectionManager&&g.selectionManager.dispose(),g.selectedBalls=null,g.selectedRect1s=null,g.selectedRect2s=null,g.selectionManager=null,g.off("mousedown",g.toggleEvent),g.off("click",g.clickEvent),de){g.shape.dispose(),g.shape=null;for(var fe=0;fe<g.points.length;fe++)g.pointObjects[fe][0].removeAllEventListeners(),g.pointObjects[fe][1].removeAllEventListeners(),g.pointObjects[fe][2].removeAllEventListeners(),g.pointObjects[fe][3].removeAllEventListeners();g.controls.removeFrom(g),g.sticks.dispose(),L=null,q=null}else g.removeAllEventListeners(),L=null,q=null,Me||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Squiggle,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Blob=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q){var J="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",N;if(N=yt(e.Blob,arguments,J,this))return N;qe("53.5"),this.group=U;var te=D===!1?{}:e.getStyle("Blob",this.group,Q);n(l)&&(l=te.radius!=null?te.radius:100),this.zimCustomShape_constructor(-l,-l,l*2,l*2,!1),this.type="Blob",this.mouseChildren=!0,n(b)&&(b=te.dashed!=null?te.dashed:!1),n(r)&&(r=te.borderColor!=null?te.borderColor:null),n(i)&&(i=te.borderWidth!=null?te.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=te.color!=null?te.color:i>0?"rgba(0,0,0,0)":e.green),t.style&&(this.colorCommand=t,t=e.black),r&&r.style&&(this.borderColorCommand=r,r=e.black),n(o)&&(o=te.points!=null?te.points:4);var ae=typeof o!="number",ee=typeof o=="number"?o:o.length,pe=f;n(f)&&(f=te.controlLength!=null?te.controlLength:l*4/ee),n(d)&&(d=te.controlType!=null?te.controlType:null);var $=d;n(d)&&(d="straight"),n(p)&&(p=te.lockControlType!=null?te.lockControlType:!1),n(K)&&(K=te.interactive!=null?te.interactive:!0),n(w)&&(w=te.showControls!=null?te.showControls:K);var X=w;n(k)&&(k=te.lockControls!=null?te.lockControls:!K),n(x)&&(x=te.handleSize!=null?te.handleSize:e.mobile()?20:10),n(T)&&(T=te.allowToggle!=null?te.allowToggle:K),n(S)&&(S=te.move!=null?te.move:K),n(R)&&(R=te.circleColor!=null?te.circleColor:e.light),n(C)&&(C=te.circleBorderColor!=null?te.circleBorderColor:e.dark),n(O)&&(O=te.stickColor!=null?te.stickColor:e.darker),n(I)&&(I=te.stickThickness!=null?te.stickThickness:1),n(_)&&(_=te.selectColor!=null?te.selectColor:e.white),n(P)&&(P=te.selectPoints!=null?te.selectPoints:K),this.circleColor=R,this.circleBorderColor=C,this.stickColor=O,this.stickThickness=I,n(E)&&(E=te.onTop!=null?te.onTop:!0),n(F)&&(F=te.editPoints!=null?te.editPoints:K),n(V)&&(V=te.strokeObj!=null?te.strokeObj:{});var y=g(t,r);this.veeObj={color:y[0],borderColor:y[1]};function g(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r);var h=this;this.interactive=K,this.num=ee,this.editPoints=F,this.selectPoints=P,this.lockControls=k,this.onTop=E,this.move=S,this.allowToggle=T,this.lockControlType=p,this.types=["mirror","straight","free","none"];var L,q,A;h._color=t,h._borderColor=r,h._borderWidth=i,h._dashed=b,h._dashed&&!Array.isArray(h._dashed)&&(h._dashed=[10,10]);var Y,xe,G,Z,ge,he=h.move,ne=2,ue,Te;o=Fe(o);function Fe(fe){(fe=="circle"||fe=="rectangle"||fe=="triangle")&&(fe=="circle"&&(fe=new e.Circle(l)),fe=="rectangle"&&(fe=new e.Rectangle(l*2,l*2).centerReg({add:!1})),fe=="triangle"&&(fe=new e.Triangle(l*2,l*2,l*2)));var ve;if(fe.type=="Circle"||fe.type=="Rectangle"||fe.type=="Triangle"||fe.type=="Flare"){var Ie=fe.getBounds();if(fe.type=="Circle")ve=4,pe=f=l*2*.5523;else if(fe.type=="Rectangle")fe.centerReg({add:!1}),ve=[[Ie.x-Ie.width/2,Ie.y-Ie.height/2],[Ie.x+Ie.width/2,Ie.y-Ie.height/2],[Ie.x+Ie.width/2,Ie.y+Ie.height/2],[Ie.x-Ie.width/2,Ie.y+Ie.height/2]],h.setBounds(Ie.x-Ie.width/2,Ie.y-Ie.height/2,Ie.width,Ie.height),h.regX=fe.regX-Ie.width/2,h.regY=fe.regY-Ie.height/2;else if(fe.type=="Triangle")ve=[[fe.three.x-fe.width/2,fe.three.y+fe.height/2+fe.adjusted],[fe.two.x-fe.width/2,fe.two.y+fe.height/2+fe.adjusted],[fe.one.x-fe.width/2,fe.one.y+fe.height/2+fe.adjusted]],h.setBounds(Ie.x-Ie.width/2,Ie.y-Ie.height/2,Ie.width,Ie.height);else if(fe.type=="Flare"){var we=Ie.width/2+Ie.x,Xe=Ie.height/2+Ie.y;ve=[];var ye=e.copy(fe.points),Ge={x:null,y:null};e.loop(ye,(He,Oe)=>{var ce=Math.round(He.x),Ue=Math.round(He.y);ce==Ge.x&&Ue==Ge.y||(Ge={x:ce,y:Ue},ve.push([ce-we,He.y-Xe]))}),h.setBounds(-fe.width/2,-fe.height/2,fe.width,fe.height)}return ve}else return fe}if(typeof o=="string"){var ie=new e.SVGContainer;o=ie.processPath(o),o[0][0]==o[o.length-1][0]&&o[0][1]==o[o.length-1][1]&&(o[0][4]=o[o.length-1][4],o[0][5]=o[o.length-1][5],o.pop())}$&&typeof o!="number"&&e.loop(o,function(fe){fe[8]=$,$=="none"&&(fe[4]=fe[5]=fe[6]=fe[7]=0)}),Se();function Se(){if(Te&&Te.removeAllEventListeners(),h.selectPoints?(h.selectedBalls=new e.SelectionSet,h.selectedRect1s=new e.SelectionSet,h.selectedRect2s=new e.SelectionSet,h.selectionManager=new e.SelectionManager([h.selectedBalls,h.selectedRect1s,h.selectedRect2s],"ctrl",!1)):h.selectionManager=new e.SelectionManager(null,"ctrl"),ee=typeof o=="number"?o:o.length,ee<=0)return;n(pe)&&(f=l*4/ee),Y=h.shape=new e.Shape({style:!1}).addTo(h);var fe=h.sticks=new e.Shape({style:!1}).addTo(h);x<=0&&fe.removeFrom();var ve=Y.graphics;ve.c();var Ie=fe.graphics;Ie.c();var we=x/10*8,Xe=x,ye=e.mobile();Te=h.controls=new e.Container({style:!1}).addTo(h),h.interactive&&Te.drag({onTop:!ye}),L=[],A=[],q=[];var Ge,He,Oe,ce,Ue,Qe,Je,nt,gt;for(Ge=0;Ge<ee;Ge++){if(ce=new e.Container({style:!1}).addTo(Te),ce.num=Ge,typeof o=="number"){var We=e.Pick.choose(f);Oe=new e.Container(We,l,null,null,!1).reg(We/2,l).addTo(h),Oe.rotation=Ge/ee*360,Je=new e.Circle(we,h.selectPoints&&h.selectedBalls.isSelected(Ge)?_:h.circleColor,h.circleBorderColor,2,null,null,null,null,!1).centerReg(Oe).loc({x:We/2,y:0}),Ue=new e.Rectangle(Xe,Xe,h.selectPoints&&h.selectedRect1s.isSelected(Ge)?_:mt(d),x==0?null:e.dark,x==0?null:2,null,null,null,null,!1).centerReg(Oe).loc({x:0,y:0}),Qe=new e.Rectangle(Xe,Xe,h.selectPoints&&h.selectedRect2s.isSelected(Ge)?_:mt(d),x==0?null:e.dark,x==0?null:2,null,null,null,null,!1).centerReg(Oe).loc({x:We,y:0});var st=Oe.localToLocal(Je.x,Je.y,Te);Je.x=st.x,Je.y=st.y,Je.addTo(ce,null,!1);var at=Oe.localToLocal(Ue.x,Ue.y,Te);Ue.x=d=="none"?0:at.x-Je.x,Ue.y=d=="none"?0:at.y-Je.y,Ue.addTo(ce,null,!1);var Ae=Oe.localToLocal(Qe.x,Qe.y,Te);Qe.x=d=="none"?0:Ae.x-Je.x,Qe.y=d=="none"?0:Ae.y-Je.y,Qe.addTo(ce,null,!1),ce.x=Je.x,ce.y=Je.y,Je.x=0,Je.y=0,d=="none"&&Je.addTo(ce,null,!1)}else gt=o[Ge],nt=gt[8]?gt[8]:d,ce.loc({x:gt[0],y:gt[1]}),Je=new e.Circle(we,h.circleColor,h.circleBorderColor,2,null,null,null,null,!1).centerReg({add:!1}).addTo(ce).loc({x:gt[2],y:gt[3]}),Ue=new e.Rectangle(Xe,Xe,mt(nt),x==0?null:e.dark,x==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(ce,0).loc({x:gt[4],y:gt[5]}),Qe=new e.Rectangle(Xe,Xe,mt(nt),x==0?null:e.dark,x==0?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(ce,0).loc({x:gt[6],y:gt[7]});Je.mySet=ce,Je.rect1=Ue,Je.rect2=Qe,Je.index=Ge,x==0&&(Je.expand(10),Ue.expand(10),Qe.expand(10)),ye?Je.on("mousedown",De):Je.on("dblclick",ft),Ue.ball=Je,Ue.other=Qe,Qe.ball=Je,Qe.other=Ue,ye&&(Je.expand(),Ue.expand(),Qe.expand()),He=[ce,Je,Ue,Qe,gt?gt[8]:d],L.push(He),q.push(Je),A.push(ce)}var Le=!1;function De(Ve){Le?(Ve.preventDefault(),ft(Ve)):(Le=!0,setTimeout(function(){Le=!1},300))}function ft(Ve){if(!h.lockControlType){var Ye=Ve.target,Ke=L[Ye.index][4]?L[Ye.index][4]:d;Math.abs(Ye.rect1.x)<=2&&Math.abs(Ye.rect1.y)<=2&&Math.abs(Ye.rect2.x)<=2&&Math.abs(Ye.rect2.y)<=2&&(Ke="none"),Ke=="none"&&Ye.parent.addChildAt(Ye,0),Ke=h.types[(h.types.indexOf(Ke)+(h.shiftKey?-1:1)+h.types.length)%h.types.length],Ke=="none"&&(Ye.rect1.x=Ye.rect1.y=Ye.rect2.x=Ye.rect2.y=0,Ye.parent.addChild(Ye),Ve.stopImmediatePropagation()),L[Ye.index][4]=Ke,Ye.rect1.color=mt(Ke),Ye.rect2.color=mt(Ke),h.drawShape();var ze=new je.Event("change");ze.controlType="bezierSwitch",h.dispatchEvent(ze),Ye.stage.update()}}function mt(Ve){var Ye={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return Ye[Ve]?Ye[Ve]:"#e472c4"}h.drawShape=function(){var Ve,Ye,Ke,ze,tt,ht,Be,it,vt,et,wt,xt,_t;ve.c(),h.colorCommand||(h.colorCommand=ve.f(h._color).command,t&&t.type&&h.specialColor(h.colorCommand,t,h)),(n(h._borderWidth)||h._borderWidth>0)&&(!n(h._borderColor)||!n(h._borderWidth))&&(n(h._borderColor)&&(h._borderColor=e.black),h.borderColorCommand||(h.borderColorCommand=ve.s(h._borderColor).command,h._borderColor&&h._borderColor.type&&h.specialColor(h.borderColorCommand,h._borderColor,h)),h.borderWidthCommand||(h.borderWidthCommand=ve.ss(h._borderWidth,V.caps,V.joints,V.miterLimit,V.ignoreScale).command),h._dashed&&(h.borderDashedCommand||(h.borderDashedCommand=ve.sd(Array.isArray(h._dashed)?h._dashed:[10,10],h._dashedOffset).command))),Ke=L[0][0],Be=Ke.localToLocal(L[0][1].x,L[0][1].y,Y),ve.mt(Be.x,Be.y),Ie.c().s(h.stickColor).ss(h.stickThickness);for(var lt=0;lt<L.length;lt++)Ve=lt,Ye=(lt+1)%L.length,Ke=L[Ve][0],Je=L[Ve][1],ze=L[Ve][2],tt=L[Ve][3],ht=L[Ye][0],it=L[Ye][1],vt=L[Ye][2],wt=Ke.localToLocal(tt.x,tt.y,Y),xt=ht.localToLocal(vt.x,vt.y,Y),_t=ht.localToLocal(it.x,it.y,Y),ve.bt(wt.x,wt.y,xt.x,xt.y,_t.x,_t.y),Be=Ke.localToLocal(Je.x,Je.y,Y),et=Ke.localToLocal(ze.x,ze.y,Y),Ie.mt(Be.x,Be.y).lt(et.x,et.y),Ie.mt(Be.x,Be.y).lt(wt.x,wt.y);ve.cp(),ve.append(h.colorCommand),h._dashed&&ve.append(h.borderDashedCommand),h.borderWidthCommand&&ve.append(h.borderWidthCommand),h.borderColorCommand&&ve.append(h.borderColorCommand)},h.drawShape(),t.type&&(h.color=t);var Ze;Te.on("mousedown",function(Ve){if(!h.lockControls){h.selectPoints&&(h.keyFocus=!0),Ze={x:Ve.target.x,y:Ve.target.y};var Ye;if(Ve.target.rect1)Ye=Ve.target,Ye.startX=Ye.x,Ye.startY=Ye.y,Ye.rect1.startX=Ye.rect1.x,Ye.rect1.startY=Ye.rect1.y,Ye.rect2.startX=Ye.rect2.x,Ye.rect2.startY=Ye.rect2.y;else{var Ke=Ve.target;Ke.startX=Ke.x,Ke.startY=Ke.y,Ye=Ke.ball;var ze=Ye.index,tt=d;if(n(L[ze][4])||(tt=L[ze][4]),tt=="straight"){var ht=Ke.other,Be=ht.x-Ye.x,it=ht.y-Ye.y;ht.stickLength=Math.sqrt(Math.pow(Be,2)+Math.pow(it,2))}}if(h.selectPoints){var vt=h.selectionManager.currentSet;if(vt&&vt.selections&&vt.selections.length>0)for(var et=0;et<vt.selections.length;et++){var wt=h.pointObjects[vt.selections[et]];wt[1].startX=wt[1].x,wt[1].startY=wt[1].y,wt[2].startX=wt[2].x,wt[2].startY=wt[2].y,wt[3].startX=wt[3].x,wt[3].startY=wt[3].y}}}}),h.selectPoints&&Te.tap(function(Ve){var Ye;if(Ve.target.rect1)Ye=Ve.target,h.selectedBalls.toggle(Ye.parent.num);else{var Ke=Ve.target;Ke.color="white",Ye=Ke.ball,Ye.rect1==Ke?h.selectedRect1s.toggle(Ye.parent.num):h.selectedRect2s.toggle(Ye.parent.num)}for(var ze=0;ze<h.pointObjects.length;ze++){var tt=h.pointObjects[ze];tt[1].color=h.selectedBalls.isSelected(ze)?_:h.circleColor,tt[2].color=h.selectedRect1s.isSelected(ze)?_:mt(tt[4]),tt[3].color=h.selectedRect2s.isSelected(ze)?_:mt(tt[4])}Ve.target.stage.update()}),Te.on("pressmove",function(Ve){if(!h.lockControls)if(h.selectPoints){var Ye=se();if(Ye.indexOf(Ve.target)==-1)ue(Ve.target),h.drawShape();else if(Ye.length>0){for(var Ke=Ve.target.x-Ve.target.startX,ze=Ve.target.y-Ve.target.startY,tt=0;tt<Ye.length;tt++){var ht=Ye[tt];ht.x=ht.startX+Ke,ht.y=ht.startY+ze,ue(ht)}h.drawShape()}}else ue(Ve.target),h.drawShape()}),Te.on("pressup",function(Ve){if(!h.lockControls){var Ye=Ve.target.x!=Ze.x||Ve.target.y!=Ze.y,Ke=new je.Event("change");Ve.target.rect1?(Ke.controlType="bezierPoint",dt(Ve.target)):Ke.controlType="bezierHandle",Ye&&h.dispatchEvent(Ke)}});function dt(Ve){if(h.selectPoints){var Ye=se();if(Ye&&Ye.indexOf(Ve)==-1)me(Ve);else if(Ye&&Ye.length>0)for(var Ke=0;Ke<Ye.length;Ke++)me(Ye[Ke]);else me(Ve)}else me(Ve)}h.changeControl=function(Ve,Ye,Ke,ze,tt,ht,Be,it,vt){var et="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update",wt;if(wt=yt(h.changeControl,arguments,et))return wt;if(n(Ve)){for(var xt=0;xt<L.length;xt++)h.changeControl(xt,Ye,Ke,ze,tt,ht,Be,it);return h}var _t=L[Ve];return _t[4]=Ye,Ye=="none"?(n(Be)||(_t[1].x=Be),n(it)||(_t[1].y=it),_t[2].x=_t[1].x,_t[2].y=_t[1].y,_t[3].x=_t[1].x,_t[3].y=_t[1].y,_t[1].parent.addChild(_t[1])):(n(Be)||(_t[1].x=Be),n(it)||(_t[1].y=it),n(Ke)||(_t[2].x=Ke),n(ze)||(_t[2].y=ze),n(tt)||(_t[3].x=tt),n(ht)||(_t[3].y=ht),_t[1].parent.addChildAt(_t[1],0)),_t[2].color=mt(Ye),_t[3].color=mt(Ye),vt&&(h.update(),h.stage&&h.stage.update()),h},h.transformPoints=function(Ve,Ye,Ke,ze,tt){return n(tt)&&(tt=!0),h.points=e.transformPoints(h.points,Ve,Ye,Ke,ze),tt&&h.approximateBounds(),h},h.traverse=function(Ve,Ye,Ke,ze){var tt=e.copy(h.segmentRatios);tt.unshift(0),n(Ke)&&(Ke=Ye+1);var ht=Ye<Ke,Be,it;return ht?(Be=tt[Ye]*100,it=tt[Ke]*100):(Be=50+(100-tt[Ye]*100)/2,it=50+(100-tt[Ke]*100)/2),Ve.percentComplete=Be,Ve.animate({ease:"linear",props:{path:h},rewind:!ht,time:ze,events:!0}),Ve.on("animation",function(vt){if(Ve.percentComplete>it||Ve.percentComplete==0){Ve.stopAnimate(),vt.remove();var et=new je.Event("traversed");et.obj=Ve,h.dispatchEvent(et)}}),h},h.reversePoints=function(Ve){return n(Ve)&&(Ve=!0),o=e.copy(h.points),o.reverse(),Ve&&o.unshift(o.pop()),e.loop(o,function(Ye){var Ke=Ye[6];Ye[6]=Ye[4],Ye[4]=Ke;var ze=Ye[7];Ye[7]=Ye[5],Ye[5]=ze}),h.points=o,h.update(),h},h.splitPoints=function(Ve){var Ye=e.copy(h.points);if(!(Ve<1||Ve>Ye.length-1)){var Ke=e.copy(Ye.slice(0,Ve+1)),ze=e.copy(Ye.slice(Ve));e.trimPointEnds(Ke),e.trimPointEnds(ze);var tt=h.clone();return h.points=Ke,h.update(),tt.points=ze,h.parent&&tt.addTo(h.parent),tt}},h.makeSquiggle=function(Ve){var Ye=e.copy(h.points);n(Ve)&&(Ve=0),Ve=(Ve+Ye.length*1e3)%Ye.length;var Ke=e.copy(Ye.slice(Ve)),ze=e.copy(Ye.slice(0,Ve+1));Ye=Ke.concat(ze),e.trimPointEnds(Ye);var tt=new e.Squiggle({points:Ye,color:h.borderColor,thickness:h.borderWidth,showControls:h.controlsVisible,interactive:h.interactive,onTop:h.onTop,dashed:h.dashed,stickColor:h.stickColor,stickThickness:h.stickThickness});return tt},h.update=function(Ve){return Ve?h.points=h.pointsAdjusted:h.drawShape(),h.zimAnimateChanged=!0,h},h.move&&h.interactive&&Y.drag({onTop:!1}),xe=Y.on("mousedown",function(Ve){ge=Ve.target.stage,Ze={x:Y.x,y:Y.y},h.selectPoints&&(h.keyFocus=!0),Ee()}),G=Y.on("pressmove",function(){Te.x=Y.x,Te.y=Y.y,fe.x=Y.x,fe.y=Y.y}),Z=Y.on("pressup",function(){var Ve=Y.x!=Ze.x||Y.y!=Ze.y,Ye=Y.localToLocal(h.regX,h.regY,h.parent);if(h.x=Ye.x,h.y=Ye.y,Te.x=Te.y=fe.x=fe.y=Y.x=Y.y=0,Ve){var Ke=new je.Event("change");Ke.controlType="move",h.dispatchEvent(Ke)}ge.update()}),S||_e(!0);function Ee(){if(h.onTop){var Ve=h.parent.numChildren-1;h.parent.getChildAt(Ve).type=="Keyboard"&&Ve--,h.parent.setChildIndex(h,Ve)}}h.toggleEvent=h.on("mousedown",function(){h.allowToggle&&(X||(h.showControls(),h.dispatchEvent("controlsshow")))}),h.added(function(){ge=h.stage,h.toggleStageEvent&&h.stage.off("stagemousedown",h.toggleStageEvent),h.toggleStageEvent=h.stage.on("stagemousedown",function(Ve){!h.allowToggle||!h.stage||X&&!h.hitTestPoint(Ve.stageX/e.scaX,Ve.stageY/e.scaY,!1)&&(h.hideControls(),h.dispatchEvent("controlshide"))})}),h.clickEvent=h.on("click",function(){h.ctrlKey&&setTimeout(function(){h.clone(!0).addTo(h.stage).mov(100),h.allowToggle&&(h.hideControls(),h.dispatchEvent("controlshide"));var Ve=new je.Event("change");Ve.controlType="move",h.dispatchEvent(Ve),h.stage.update()},50)}),h.hideControls=function(){return h.toggled=!1,Te.visible=!1,fe.visible=!1,X=!1,h.stage&&h.stage.update(),!h.allowToggle&&h.move&&_e(),h},X||h.hideControls(),h.showControls=function(){return h.toggled=!0,Te.visible=!0,fe.visible=!0,X=!0,Te.x=Y.x,Te.y=Y.y,fe.x=Y.x,fe.y=Y.y,h.addChildAt(Y,0),h.move&&!h.allowToggle&&j(),h.stage&&h.stage.update(),h},h.toggle=function(Ve){return Ve===!0?h.showControls():Ve===!1||X?h.hideControls():h.showControls(),h},h.recordData=function(Ve){n(Ve)&&(Ve=!1);var Ye={type:"Blob",index:h.parent?h.parent.getChildIndex(h):-1,x:h.x,y:h.y,points:h.getPoints(),color:h.color,borderColor:h.borderColor,borderWidth:h.borderWidth,move:h.move,allowToggle:h.allowToggle,controlsVisible:X};return Ve?JSON.stringify(Ye):Ye},h.setData=function(Ve,Ye){if(!n(Ve)){if(Ye)try{Ve=JSON.parse(Ve)}catch(ht){return}var Ke=Ve.index;n(Ke)&&(Ke=-1),delete Ve.index;var ze=Ve.points;n(ze)||h.setPoints(ze),delete Ve.points,this.num=ze.length;for(var tt in Ve)h[tt]=Ve[tt];return h.parent&&h.parent.setChildIndex(h,Ke),h}},h.getPoints=function(Ve){n(Ve)&&(Ve=!1);var Ye=h.points;if(Ve){if(!Ke){var Ke=h.pane=new e.Pane({displayClose:!1,container:h.stage,width:Math.min(500,h.stage.width-20),height:Math.min(500,h.stage.height-20),draggable:!0}),ze=h.textArea=new e.TextArea(Math.min(400,h.stage.width-70),Math.min(400,h.stage.height-70));ze.centerReg(Ke)}Ke.show(),ze.text=JSON.stringify(Ye)}return Ye},h.recordPoints=h.getPoints,h.setPoints=function(Ve){for(var Ye,Ke,ze=0;ze<Ve.length;ze++)Ye=L[ze],Ke=Ve[ze],!n(Ye)&&(Ye[0].x=Ke[0],Ye[0].y=Ke[1],Ye[1].x=Ke[2],Ye[1].y=Ke[3],Ye[2].x=Ke[4],Ye[2].y=Ke[5],Ye[3].x=Ke[6],Ye[3].y=Ke[7],Ye[4]=Ke[8],Ye[2].color=mt(Ye[4]),Ye[3].color=mt(Ye[4]));return h.update(),h},D!==!1&&e.styleTransforms(h,te),h.clone=function(Ve,Ye){var Ke=[],ze=!1;e.loop(h.pointControls,function(ht){ht.scaleX+ht.scaleY+ht.regX+ht.regY+ht.rotation!=2&&(ze=!0),Ke.push([ht.scaleX,ht.scaleY,ht.regX,ht.regY,ht.rotation])});var tt=h.cloneProps(new e.Blob(Ye?h.colorCommand:Ve||!e.isPick(y[0])?h.color:y[0],Ye?h.borderColorCommand:Ve||!e.isPick(y[1])?h.borderColor:y[1],h.borderWidth,h.getPoints(),l,f,d,p,Te.visible,k,x,h.allowToggle,h.move,b,E,h.circleColor,h.circleBorderColor,h.stickColor,h.stickThickness,_,P,h.editPoints,K,V,D,h.group,Q));return ze&&(e.loop(tt.pointControls,function(ht,Be){ht.scaleX=Ke[Be][0],ht.scaleY=Ke[Be][1],ht.regX=Ke[Be][2],ht.regY=Ke[Be][3],ht.rotation=Ke[Be][4]}),tt.update()),h.linearGradientParams&&tt.linearGradient.apply(tt,h.linearGradientParams),h.radialGradientParams&&tt.radialGradient.apply(tt,h.radialGradientParams),tt},h.shapeMousedownEvent=h.shape.on("mousedown",function(Ve){ge=Ve.target.stage,h.editPoints&&(h.controlsVisible?(h.pressX=Ve.stageX/e.scaX,h.pressY=Ve.stageY/e.scaY):(h.pressX=null,h.pressY=null))}),h.addPointFactor=10,h.addMinDistance=15,h.shapePressupEvent=h.shape.on("pressup",function(Ve){if(h.editPoints&&h.pressX&&Math.abs(h.pressX-Ve.stageX/e.scaX)<ne&&Math.abs(h.pressY-Ve.stageY/e.scaY)<ne){h.selectPoints&&(h.lastPoints=e.copy(h.points));var Ye=h.points,Ke=h.globalToLocal(Ve.stageX/e.scaX,Ve.stageY/e.scaY),ze=e.closestPointAlongCurve(Ke,h.segmentPoints);if(h.editPoints=="anywhere")Ye.splice(ze+1,0,[Ke.x,Ke.y,0,0,0,0,0,0]),h.points=Ye,h.changeControl({index:ze+1,type:"mirror",update:!0});else{var tt=h.pointsAdjusted,ht=h.getSegmentPoint(tt[ze],tt[(ze+1)%tt.length]),Be=e.distanceAlongCurve(ht),it=Math.round(Be/h.addPointFactor),vt=h.interpolate(it,ze,!1,Ye),et=1e4,wt;if(e.loop(vt,function(Dt,Pt){if(Pt!=0){var It=e.dist(Dt,Ke);It<et&&(et=It,wt=Pt)}}),et<h.addMinDistance){var xt=h.segmentRatios,_t=xt[ze],lt=ze>0?xt[ze-1]:0;h.addPoint(100*(lt+(_t-lt)*(wt/(it+1))))}}h.lastSelectedIndex=ze+1,h.lastSelected=h.controls.getChildAt(h.lastSelectedIndex),h.stage.update()}}),h.controlsClickEvent=h.controls.on("click",function(Ve){h.lastSelected=Ve.target.parent,h.lastSelectedIndex=h.controls.getChildIndex(Ve.target.parent),h.editPoints&&h.selectionManager.shiftKey&&ot(Ve)});function ot(Ve){if(Ve.target.type=="Circle"){var Ye=h.lastSelectedIndex=h.controls.getChildIndex(Ve.target.parent);if(h.controls.numChildren<=2)return;var Ke=h.points;h.selectPoints&&(h.lastPoints=e.copy(Ke)),Ke.splice(Ye,1),h.points=Ke,h.stage.update(),h.lastSelected=h.lastSelectedIndex=null}}h.controls.hold(ot),X||h.hideControls(),h.dispatchEvent("update")}function se(){var fe=[],ve=h.selectionManager.currentSet;if(ve&&ve.selections&&ve.selections.length>0)for(var Ie=0;Ie<ve.selections.length;Ie++){var we=h.pointObjects[ve.selections[Ie]];if(ve==h.selectedBalls)fe.push(we[1]);else if(ve==h.selectedRect1s)fe.push(we[2]);else if(ve==h.selectedRect2s)fe.push(we[3]);else continue}return fe}function me(fe){if(h.selectPoints&&fe.type=="Circle"){var ve=fe,Ie=ve.mySet,we=ve.rect1,Xe=ve.rect2;we.x-=ve.x,we.y-=ve.y,Xe.x-=ve.x,Xe.y-=ve.y,Ie.x+=ve.x,Ie.y+=ve.y,ve.x=0,ve.y=0}}h.selectionManager.on("keydown",function(fe){if(h.selectPoints&&h.keyFocus&&fe.keyCode>=37&&fe.keyCode<=40){var ve=se();if(ve.length>0){for(var Ie=0;Ie<ve.length;Ie++){var we=ve[Ie];fe.keyCode==37?we.x-=h.selectionManager.shiftKey?10:1:fe.keyCode==39?we.x+=h.selectionManager.shiftKey?10:1:fe.keyCode==38?we.y-=h.selectionManager.shiftKey?10:1:fe.keyCode==40&&(we.y+=h.selectionManager.shiftKey?10:1),ue(we)}h.drawShape(),h.dispatchEvent("update"),h.stage&&h.stage.update()}}}),h.selectionManager.on("keyup",function(fe){if(h.selectPoints&&h.keyFocus&&fe.keyCode>=37&&fe.keyCode<=40){var ve=se();if(ve.length>0)for(var Ie=0;Ie<ve.length;Ie++)me(ve[Ie])}}),h.selectionManager.on("undo",function(){if(h.selectPoints&&h.keyFocus&&h.lastPoints){var fe=e.copy(h.lastPoints);h.lastPoints=e.copy(h.points),h.points=fe,h.stage&&h.stage.update()}}),ue=function(fe){if(!h.lockControls){var ve;if(fe.rect1){ve=fe;var Ie=ve.x-ve.startX,we=ve.y-ve.startY;ve.rect1.x=ve.rect1.startX+Ie,ve.rect1.y=ve.rect1.startY+we,ve.rect2.x=ve.rect2.startX+Ie,ve.rect2.y=ve.rect2.startY+we}else{var Xe=fe,ye=Xe.other;ve=Xe.ball;var Ge=ve.index,He=d;if(n(L[Ge][4])||(He=L[Ge][4]),He=="straight"||He=="mirror"){var Oe=Xe.x-ve.x,ce=Xe.y-ve.y;if(He=="mirror")ye.x=ve.x-Oe,ye.y=ve.y-ce;else{var Ue=Math.atan2(ce,Oe),Qe=-ye.stickLength*Math.cos(Ue+Math.PI),Je=-ye.stickLength*Math.sin(Ue+Math.PI);ye.x=ve.x-Qe,ye.y=ve.y-Je}}}}},Object.defineProperty(h,"move",{get:function(){return S},set:function(fe){S!=fe&&(S=fe,fe?j():_e())}}),Object.defineProperty(h,"interactive",{get:function(){return K},set:function(fe){K=fe,X=K,h.allowToggle=K,h.editPoints=K,h.lockControls=!K,h.selectPoints=K,h.move=K;var ve=h.points;h.points=ve}}),Object.defineProperty(h,"allowToggle",{get:function(){return T},set:function(fe){T!=fe&&(T=fe,T?h.move&&j():!X&&h.move&&_e())}});function j(){h.move!="always"&&(he||(he=!0,Y.drag({onTop:!1}),xe=Y.on("mousedown",xe),G=Y.on("pressmove",G),Z=Y.on("pressup",Z)))}function _e(fe){h.move!="always"&&(!fe&&!he||(he=!1,Y.noDrag(),Y.off("mousedown",xe),Y.off("pressmove",G),Y.off("pressup",Z)))}Object.defineProperty(h,"controlsVisible",{get:function(){return X},set:function(fe){X=fe,fe?h.showControls():h.hideControls()}});var Re=k;Object.defineProperty(h,"lockControls",{get:function(){return Re},set:function(fe){Re=fe,fe?(h.controls.mouseChildren=!1,h.controls.mouseEnabled=!1):(h.controls.mouseChildren=!0,h.controls.mouseEnabled=!0)}}),h.lockControls=Re,le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==h},set:function(){e.KEYFOCUS=h}}),h.selectPoints&&!e.KEYFOCUS&&de();function de(){h.keyFocus=!0;var fe=document.activeElement;fe&&fe.blur()}Object.defineProperty(h,"points",{get:function(){for(var fe=[],ve,Ie,we=0;we<L.length;we++)Ie=L[we],ve=[e.decimals(Ie[0].x),e.decimals(Ie[0].y),e.decimals(Ie[1].x),e.decimals(Ie[1].y),e.decimals(Ie[2].x),e.decimals(Ie[2].y),e.decimals(Ie[3].x),e.decimals(Ie[3].y)],Ie[4]&&Ie[4]!=="straight"&&ve.push(Ie[4]),fe.push(ve);return fe},set:function(fe){var ve=h.x,Ie=h.y,we=h.visible,Xe=[],ye=!1;e.loop(h.pointControls,function(Ge){Ge.scaleX+Ge.scaleY+Ge.regX+Ge.regY+Ge.rotation!=2&&(ye=!0),Xe.push([Ge.scaleX,Ge.scaleY,Ge.regX,Ge.regY,Ge.rotation])}),h.dispose(!0),o=Fe(fe),h.shape&&(h.shape.graphics.clear(),h.sticks.graphics.clear(),h.controls.noDrag(),h.removeAllChildren(),delete h.shape,delete h.sticks,delete h.controls),h.visible=!1,Se(),h.lockControls=Re,h.x=ve,h.y=Ie,h.visible=we,ye&&(e.loop(h.pointControls,function(Ge,He){Ge.scaleX=Xe[He][0],Ge.scaleY=Xe[He][1],Ge.regX=Xe[He][2],Ge.regY=Xe[He][3],Ge.rotation=Xe[He][4]}),h.update())}}),Object.defineProperty(h,"pointsAdjusted",{get:function(){var fe=[],ve,Ie,we,Xe=h.pointObjects;return e.loop(Xe.length,function(ye){if(we=Xe[ye],Ie=L[ye],we[0].rotation==0&&we[0].scaleX==0&&we[0].scaleY==0)ve=[e.decimals(Ie[0].x),e.decimals(Ie[0].y),e.decimals(Ie[1].x),e.decimals(Ie[1].y),e.decimals(Ie[2].x),e.decimals(Ie[2].y),e.decimals(Ie[3].x),e.decimals(Ie[3].y)];else{var Ge=we[0].localToLocal(we[2].x,we[2].y,we[0].parent),He=we[0].localToLocal(we[3].x,we[3].y,we[0].parent);ve=[e.decimals(Ie[0].x),e.decimals(Ie[0].y),e.decimals(Ie[1].x),e.decimals(Ie[1].y),e.decimals(Ge.x-Ie[0].x),e.decimals(Ge.y-Ie[0].y),e.decimals(He.x-Ie[0].x),e.decimals(He.y-Ie[0].y)]}Ie[4]&&Ie[4]!=="mirror"&&ve.push(Ie[4]),fe.push(ve)}),fe},set:function(){At&&ut("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(h,"pointObjects",{get:function(){return L},set:function(){At&&ut("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"pointControls",{get:function(){return A},set:function(){At&&ut("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"pointCircles",{get:function(){return q},set:function(){At&&ut("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(h,"segmentPoints",{get:function(){var fe=h.pointsAdjusted,ve=[];return e.loop(fe.length,function(Ie,we){var Xe=h.getSegmentPoint(fe[Ie],fe[Ie<we-1?Ie+1:0]);ve.push(Xe)}),ve},set:function(){At&&ut("Blob() - segmentPoints is read only")}}),Object.defineProperty(h,"segmentRatios",{get:function(){var fe=[],ve=0;e.loop(h.segmentPoints,function(Xe){var ye=e.distanceAlongCurve(Xe);fe.push(ye),ve+=ye});var Ie=[],we=0;return e.loop(fe,function(Xe){var ye=Xe/ve;we+=ye,Ie.push(we)}),Ie},set:function(){At&&ut("Blob() - segmentRatios is read only")}}),h.approximateBounds=function(fe,ve){n(fe)&&(fe=80),fe/=h.num;var Ie=h.interpolate(fe,null,!0,null,!0),we=e.boundsAroundPoints(Ie);if(h.setBounds(we.x,we.y,we.width,we.height),ve){if(!h.parent)return At&&ut("approximateBounds() - add to stage to first to see points"),h;h.hitPathPoints?h.hitPathPoints.removeAllChildren():h.hitPathPoints=new e.Container().addTo(),h.hitPathPoints.top();for(var Xe=0;Xe<Ie.length;Xe++){var ye=Ie[Xe];ye=h.localToGlobal(ye.x,ye.y),new e.Circle(3).loc(ye.x,ye.y,h.hitPathPoints)}}return h},h.getPointAngle=function(fe){var ve=h.pointObjects[fe][0],Ie=h.pointObjects[fe][2],we=h.pointObjects[fe][3],Xe,ye;return ve==h.stage?(Xe=new e.Point(Ie.x,Ie.y),ye=new e.Point(we.x,we.y)):(Xe=ve.localToGlobal(Ie.x,Ie.y),ye=ve.localToGlobal(we.x,we.y)),e.angle(Xe.x,Xe.y,ye.x,ye.y)},h.getSegmentPoint=function(fe,ve){if(!(n(fe)||n(ve))){(fe[2]!=0||fe[3]!=0)&&(fe[4]-=fe[2],fe[5]-=fe[3],fe[6]-=fe[2],fe[7]-=fe[3],fe[0]+=fe[2],fe[1]+=fe[3],fe[2]=0,fe[3]=0),(ve[2]!=0||ve[3]!=0)&&(ve[4]-=ve[2],ve[5]-=ve[3],ve[6]-=ve[2],ve[7]-=ve[3],ve[0]+=ve[2],ve[1]+=ve[3],ve[2]=0,ve[3]=0);var Ie={x:fe[0],y:fe[1]},we={x:fe[0]+fe[6],y:fe[1]+fe[7]},Xe={x:ve[0]+ve[4],y:ve[1]+ve[5]},ye={x:ve[0],y:ve[1]};return(Te.x!=0||Te.y!=0)&&(Ie.x+=Te.x,we.x+=Te.x,Xe.x+=Te.x,ye.x+=Te.x,Ie.y+=Te.y,we.y+=Te.y,Xe.y+=Te.y,ye.y+=Te.y),[Ie,we,Xe,ye]}},h.getAdjacentSegmentData=function(fe){n(fe)&&(fe=0);var ve=h.pointsAdjusted;if(h.num==2)return[[h.getSegmentPoint(ve[0],ve[1]),h.getSegmentPoint(ve[1],ve[0])],[0,1]];if(fe==0)return[[h.getSegmentPoint(ve[h.num-1],ve[0]),h.getSegmentPoint(ve[0],ve[1]),h.getSegmentPoint(ve[1],ve[2])],[h.num-1,0,1]];if(fe>=h.num-1)return[[h.getSegmentPoint(ve[h.num-2],ve[h.num-1]),h.getSegmentPoint(ve[h.num-1],ve[0]),h.getSegmentPoint(ve[0],ve[1])],[h.num-2,h.num-1,0]];var Ie=fe+2>=h.num?0:fe+2;return[[h.getSegmentPoint(ve[fe-1],ve[fe]),h.getSegmentPoint(ve[fe],ve[fe+1]),h.getSegmentPoint(ve[fe+1],ve[Ie])],[fe-1,fe,fe+1]]},h.getCurvePoint=function(fe,ve,Ie,we){n(ve)&&(ve=h.segmentRatios),n(Ie)&&(Ie=h.segmentPoints),n(we)&&(we=!1);var Xe=ve,ye=Ie,Ge=e.loop(Xe,function(Je,nt){if(Je>=fe)return nt}),He=Ge>0?Xe[Ge-1]:0,Oe=Ge>0?Xe[Ge]-Xe[Ge-1]:Xe[Ge],ce=(fe-He)/Oe,Ue=e.pointAlongCurve(ye[Ge],ce,we,!0);if(!n(Ue)){var Qe=h.localToGlobal(Ue.x,Ue.y);return Qe.angle=Ue.angle,Qe.z=Ge,n(Qe)?void 0:Qe}};function Pe(fe,ve,Ie){return{x:fe.x+(ve.x-fe.x)*Ie,y:fe.y+(ve.y-fe.y)*Ie}}function Me(fe,ve,Ie,we,Xe,ye,Ge,He){var Oe=fe.length-1,ce=0,Ue=0;we==100&&h.type=="Squiggle"&&(we=99.99),we=(we+1e5)%100,e.loop(Ie,function(mt,Ze){if(we/100<mt)return Oe=Ze,Ue=mt,!0;ce=mt});var Qe=h.segmentPoints[Oe],Je=Ue>0?(we/100-ce)/(Ue-ce):0,nt=e.pointAlongCurve(Qe,Je,null,He),gt=[nt.x,nt.y,0,0];if(!ye){if(Ge){h.interpolatedPoints.push({x:nt.x,y:nt.y,r:we/100});return}if(Xe!="none"){var We=Pe(Qe[0],Qe[1],Je),st=Pe(Qe[1],Qe[2],Je),at=Pe(Qe[2],Qe[3],Je),Ae=Pe(We,st,Je),Le=Pe(st,at,Je);gt[4]=Ae.x-nt.x,gt[5]=Ae.y-nt.y,gt[6]=Le.x-nt.x,gt[7]=Le.y-nt.y;var De=h.localToLocal(We.x,We.y,ve[Oe]);fe[Oe][6]=De.x,fe[Oe][7]=De.y;var ft=h.localToLocal(at.x,at.y,ve[(Oe+1)%fe.length]);fe[(Oe+1)%fe.length][4]=ft.x,fe[(Oe+1)%fe.length][5]=ft.y}Xe&&(gt[8]=Xe),fe.splice(Oe+1,0,gt)}}this.addPoint=function(fe,ve){n(fe)&&(fe=100);var Ie=h.points,we=h.segmentRatios,Xe=h.pointControls;return ve=ve||$,Me(Ie,Xe,we,fe,ve),h.points=Ie,h.num=Ie.length,h},this.removePoint=function(fe){if(!(n(fe)||fe<0)){var ve=e.copy(h.points);return ve.splice(fe,1),h.points=ve,h.stage&&h.stage.update(),h}},this.addPoints=function(fe,ve,Ie,we,Xe,ye,Ge){n(ye)&&(ye=e.copy(h.points));var He=e.copy(h.segmentRatios),Oe=0;if(Xe&&(h.interpolatedPoints=[]),we)var ce=He.length*fe;return e.loop(He,function(Ue,Qe){Xe&&Me(ye,h.pointControls,h.segmentRatios,Oe*100,ve,!n(Ie)&&Qe!=Ie,Xe,Ge);var Je=we?Math.round(ce*(Ue-Oe)):fe,nt=1/(Je+1);e.loop(Je,function(gt){var We=Oe+(Ue-Oe)*nt*(gt+1);Me(ye,h.pointControls,h.segmentRatios,We*100,ve,!n(Ie)&&Qe!=Ie,Xe,Ge),!Xe&&fe>0&&(h.points=ye)}),Oe=Ue}),Xe&&h.type=="Squiggle"&&Me(ye,h.pointControls,h.segmentRatios,100,ve,null,Xe,Ge),h.stage&&h.stage.update(),h.num=ye.length,h},this.interpolate=function(fe,ve,Ie,we,Xe){return n(fe)&&(fe=1),h.addPoints(fe,"none",ve,Ie,!0,we,Xe),h.interpolatedPoints},ae&&h.approximateBounds(),this.dispose=function(fe,ve,Ie){if(h.shape){if(e.gD(h),ge&&h.toggleStageEvent&&ge.off("stagemousedown",h.toggleStageEvent),h.controls.noDrag(),h.controls.removeAllEventListeners(),h.selectPoints&&h.selectionManager&&h.selectionManager.dispose(),h.selectedBalls=null,h.selectedRect1s=null,h.selectedRect2s=null,h.selectionManager=null,h.off("mousedown",h.toggleEvent),h.off("click",h.clickEvent),fe){h.shape.dispose(),h.shape=null;for(var we=0;we<h.points.length;we++)h.pointObjects[we][0].removeAllEventListeners(),h.pointObjects[we][1].removeAllEventListeners(),h.pointObjects[we][2].removeAllEventListeners(),h.pointObjects[we][3].removeAllEventListeners();h.controls.removeFrom(h),h.sticks.dispose(),L=null,q=null}else h.removeAllEventListeners(),L=null,q=null,Ie||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Blob,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Flare=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe){var $="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",X;if(X=yt(e.Flare,arguments,$,this))return X;qe("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=ee;var y=ae===!1?{}:e.getStyle(this.type,this.group,pe),g=this;n(r)&&(r=y.borderColor!=null?y.borderColor:null),n(i)&&(i=y.borderWidth!=null?y.borderWidth:null),r<0||i<0?r=i=null:r!=null&&i==null&&(i=1),n(t)&&(t=y.color!=null?y.color:i>0?"rgba(0,0,0,0)":e.black),(n(i)||i>0)&&(!n(r)||!n(i))&&n(r)&&(r=e.black),n(o)&&(o=y.crossAngle!=null?y.crossAngle:0);var h=o;o-=90,n(l)&&(l=y.thickness!=null?y.thickness:null),n(f)&&(f=y.thicknessA!=null?y.thicknessA:null),n(d)&&(d=y.thicknessB!=null?y.thicknessB:null),n(l)?n(d)&&!n(f)?d=f:n(f)&&!n(d)?f=d:d=f=10:n(d)&&!n(f)?d=l-f:n(f)&&!n(d)?f=l-d:d=f=l/2,g.thickness=f+d,n(R)&&(R=y.cross!=null?y.cross:!0),n(C)&&(C=y.crossColors!=null?y.crossColors:null),!n(C)&&!Array.isArray(C)&&(C=[C]),n(O)&&(O=y.close!=null?y.close:!1),n(w)&&(w=y.startX!=null?y.startX:0),n(k)&&(k=y.startY!=null?y.startY:0),n(x)&&(x=y.lengths!=null?y.lengths:[200]),Array.isArray(x)||(x=[x]),n(T)&&(T=y.angles!=null?y.angles:[0]),Array.isArray(T)||(T=[T]),n(S)&&(S=y.anglesA!=null?y.anglesA:[10]),Array.isArray(S)||(S=[S]),n(b)&&(b=y.anglesB!=null?y.anglesB:e.copy(S)),Array.isArray(b)||(b=[b]),n(E)&&(E=y.anglesEnd!=null?y.anglesEnd:[0]),Array.isArray(E)||(E=[E]),n(_)&&(_=y.strokeObj!=null?y.strokeObj:{miterLimit:2}),n(K)&&(K=y.spineBorderColor!=null?y.spineBorderColor:null),n(F)&&(F=y.spineBorderWidth!=null?y.spineBorderWidth:null),K<0||F<0?K=F=null:K!=null&&F==null&&(F=1),n(P)&&(P=y.spineColor!=null?y.spineColor:F>0?"rgba(0,0,0,0)":e.black),n(V)&&(V=y.spineDashed!=null?y.spineDashed:null),n(D)&&(D=y.spineStrokeObj!=null?y.spineStrokeObj:{miterLimit:2}),(n(F)||F>0)&&(!n(K)||!n(F))&&n(K)&&(K=r||e.black),n(J)&&(J=y.closeBorderColor!=null?y.closeBorderColor:null),n(Q)&&(Q=y.closeBorderWidth!=null?y.closeBorderWidth:null),J<0||Q<0?J=Q=null:J!=null&&Q==null&&(Q=1),n(U)&&(U=y.closeColor!=null?y.closeColor:Q>0?"rgba(0,0,0,0)":null),n(N)&&(N=y.closeDashed!=null?y.closeDashed:null),n(te)&&(te=y.closeStrokeObj!=null?y.closeStrokeObj:{miterLimit:2}),(n(Q)||Q>0)&&(!n(J)||!n(Q))&&n(J)&&(J=r||e.black),this.thicknessA=f,this.thicknessB=d,this.cross=R,this.close=O,this.lengths=x,this.angles=T,this.anglesA=S,this.anglesB=b,this.anglesEnd=E,this.crossColors=C,L(x,T,S,b,E,R,C,O),t.type&&(g.color=t);function L(G,Z,ge,he,ne,ue,Te,Fe){g.removeAllChildren();var ie=g.shape=new e.Shape().addTo(g);if(g.colorCommand=ie.c().f(t).command,t&&t.type&&g.specialColor(g.colorCommand,t,g),(n(i)||i>0)&&(!n(r)||!n(i))&&(n(r)&&(r=e.black),g.borderColorCommand=ie.s(r).command,r&&r.type&&g.specialColor(g.borderColorCommand,r,g),g.borderWidthCommand=ie.ss(i,_.caps,_.joints,_.miterLimit,_.ignoreScale).command,I&&(g.borderDashedCommand=ie.sd([10,10],5).command)),ie.mt(0,0),F>0){var Se=g.spineShape=new e.Shape().addTo(g);g.spineColorCommand=Se.c().f(P).command,P&&P.type&&g.specialColor(g.spineColorCommand,P,g),(n(F)||F>0)&&(!n(K)||!n(F))&&(n(K)&&(K=e.black),g.spineBorderColorCommand=Se.s(K).command,K&&K.type&&g.specialColor(g.spineBorderColorCommand,K,g),g.spineBorderWidthCommand=Se.ss(F,D.caps,D.joints,D.miterLimit,D.ignoreScale).command,V&&(g.spineBorderDashedCommand=Se.sd([10,10],5).command))}if(!n(U)){var se=g.closeShape=new e.Shape().addTo(g);g.closeColorCommand=se.c().f(U).command,U&&U.type&&g.specialColor(g.closeColorCommand,U,g),(n(Q)||Q>0)&&(!n(J)||!n(Q))&&(n(J)&&(J=e.black),g.closeBorderColorCommand=se.s(J).command,J&&J.type&&g.specialColor(g.closeBorderColorCommand,J,g),g.closeBorderWidthCommand=se.ss(Q,te.caps,te.joints,te.miterLimit,te.ignoreScale).command,N&&(g.closeBorderDashedCommand=se.sd([10,10],5).command)),ie.mt(0,0)}var me=w,j=k,_e=o,Re=_e-180,de=f,Pe=d,Me=Math.max(G.length,Z.length,ge.length,he.length,ne.length),fe,ve,Ie=Re,we=[],Xe=[],ye=[];g.points=[];var Ge=g.pinPoints=[];e.loop(Me,function(ce){var Ue=He(ce),Qe=Math.cos(Ue.a*e.RAD),Je=Math.sin(Ue.a*e.RAD),nt=new e.Point(me+Ue.A.x*Qe-Ue.A.y*Je,j+Ue.A.x*Je+Ue.A.y*Qe),gt=new e.Point(me+Ue.B.x*Qe-Ue.B.y*Je,j+Ue.B.x*Je+Ue.B.y*Qe),We=new e.Point(me+Ue.C.x*Qe-Ue.C.y*Je,j+Ue.C.x*Je+Ue.C.y*Qe),st=new e.Point(me+Ue.D.x*Qe-Ue.D.y*Je,j+Ue.D.x*Je+Ue.D.y*Qe);we.push(nt,gt),Xe.unshift(We,st),ye.push([nt,gt,We,st]);var at=new e.Point(me+Ue.F.x*Qe-Ue.F.y*Je,j+Ue.F.x*Je+Ue.F.y*Qe),Ae=new e.Point(me+Ue.E.x*Qe-Ue.E.y*Je,j+Ue.E.x*Je+Ue.E.y*Qe);ce==0&&g.pinPoints.push(at),g.pinPoints.push(Ae),me=Ae.x,j=Ae.y,de=Ue.tA,Pe=Ue.tB}),g.points=we.concat(Xe),ue?(g.crossCommands=[],e.loop(ye,function(ce,Ue){ie.mt(ce[0].x,ce[0].y),!n(Te)&&!n(Te[Ue])&&(ie.f(Te[Ue]),g.crossCommands[Ue]=ie.f(Te[Ue]).command,Te[Ue]&&Te[Ue].type&&g.specialColor(g.crossCommands[Ue],Te[Ue],g),ie.mt(ce[0].x,ce[0].y)),ie.lt(ce[1].x,ce[1].y).lt(ce[2].x,ce[2].y).lt(ce[3].x,ce[3].y).cp()}),Fe&&ie.mt(ye[ye.length-1][1].x,ye[ye.length-1][1].y).lt(ye[ye.length-1][2].x,ye[ye.length-1][2].y).lt(ye[0][3].x,ye[0][3].y).lt(ye[0][0].x,ye[0][0].y).cp()):(e.loop(we,function(ce,Ue){Ue==0?ie.mt(ce.x,ce.y):ie.lt(ce.x,ce.y)}),Fe&&(ie.lt(we[0].x,we[0].y),ie.cp()),e.loop(Xe,function(ce,Ue){Ue==0&&Fe?ie.mt(ce.x,ce.y):ie.lt(ce.x,ce.y)}),Fe&&ie.lt(Xe[0].x,Xe[0].y),ie.cp()),Se&&(e.loop(Ge,function(ce,Ue){Ue==0?Se.mt(ce.x,ce.y):Se.lt(ce.x,ce.y)}),Fe&&Se.lt(Ge[0].x,Ge[0].y).cp()),n(U)||(e.loop(Xe,function(ce,Ue){Ue==0?se.mt(ce.x,ce.y):se.lt(ce.x,ce.y)}),Fe&&se.lt(Xe[0].x,Xe[0].y).cp());function He(ce){var Ue=Z[ce],Qe=G[ce],Je=ge[ce],nt=he[ce],gt=ne[ce];if(Te)var We=Te[ce];n(Ue)&&(Ue=Ie,g.angles[ce]=Ue),n(Qe)&&(Qe=200,g.lengths[ce]=Qe),n(Je)&&(Je=0,g.anglesA[ce]=Je),n(nt)&&(nt=0,g.anglesB[ce]=nt),n(gt)&&(gt=0,g.anglesEnd[ce]=gt),Te&&n(We)&&(We=t,g.crossColors[ce]=We),gt=gt+90;var st=180-gt,at=Math.cos((Ie-Ue)*e.RAD),Ae=Math.sin((Ie-Ue)*e.RAD),Le=new e.Point(0,0),De=new e.Point(Qe,0);if(n(fe))var ft=new e.Point(Math.cos(_e*e.RAD)*de,Math.sin(_e*e.RAD)*de);else ft=new e.Point(fe.x*at-fe.y*Ae,fe.x*Ae+fe.y*at);var mt=Oe(Qe,ft.x,ft.y,Je,st),Ze=new e.Point(Qe-mt.x,-mt.y),dt;n(ve)?dt=new e.Point(Math.cos(Re*e.RAD)*de,Math.sin(Re*e.RAD)*Pe):dt=new e.Point(ve.x*at-ve.y*Ae,ve.x*Ae+ve.y*at);var Ee=Oe(Qe,dt.x,dt.y,nt,gt),ot=new e.Point(Qe-Ee.x,Ee.y);return fe=new e.Point(Ze.x-Qe,Ze.y),ve=new e.Point(ot.x-Qe,ot.y),Ie=Ue,{a:Ue,A:ft,B:Ze,C:ot,D:dt,E:De,F:Le,tA:mt.t,tB:Ee.t}}function Oe(ce,Ue,Qe,Je,nt){var gt=nt-90,We=90-gt,st=180-Je-We,at=Math.tan(gt*e.RAD)*Qe,Ae=ce-Ue-at,Le=Ae/Math.sin(st*e.RAD)*Math.sin(Je*e.RAD),De=Math.sqrt(Math.pow(Qe,2)+Math.pow(at,2)),ft=Le+De,mt=ft*Math.sin(gt*e.RAD),Ze=ft*Math.cos(gt*e.RAD);return{x:mt,y:Ze,t:ft}}}this.add=function(G,Z,ge,he,ne,ue,Te,Fe){var ie="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close",Se;return(Se=yt(g.add,arguments,ie))?Se:(n(ue)||(g.cross=ue),n(Fe)||(g.close=Fe),n(G)||(Array.isArray(G)||(G=[G]),n(g.lengths)?g.lengths=G:g.lengths=g.lengths.concat(G)),n(Z)||(Array.isArray(Z)||(Z=[Z]),n(g.angles)?g.angles=Z:g.angles=g.angles.concat(Z)),n(ge)||(Array.isArray(ge)||(ge=[ge]),n(g.anglesA)?g.anglesA=ge:g.anglesA=g.anglesA.concat(ge)),n(he)||(Array.isArray(he)||(he=[he]),n(g.anglesB)?g.anglesB=he:g.anglesB=g.anglesB.concat(he)),n(ne)||(Array.isArray(ne)||(ne=[ne]),n(g.anglesEnd)?g.anglesEnd=ne:g.anglesEnd=g.anglesEnd.concat(ne)),n(Te)||(n(g.crossColors)?At&&ut("Flare() - must set crossColor for original object parameters"):(Array.isArray(Te)||(Te=[Te]),n(g.crossColors)?g.crossColors=Te:g.crossColors=g.crossColors.concat(Te))),g.remake(),g)},this.remake=function(){return f=this.thicknessA,d=this.thicknessB,L(g.lengths,g.angles,g.anglesA,g.anglesB,g.anglesEnd,g.cross,g.crossColors,g.close),g},Object.defineProperty(g,"color",{get:function(){return t},set:function(G){n(G)&&(G=e.black),t=G,G&&G.type?g.specialColor(g.colorCommand,G,g):g.colorCommand.style=G}});var q,A;this.setColorRange=function(G,Z){return n(Z)?(q=g.color,A=G):n(G)?(q=g.color,A=Z):(q=G,A=Z),g};var Y=0;Object.defineProperty(g,"colorRange",{get:function(){return Y},set:function(G){Y=G,!n(q)&&!n(A)&&(g.color=e.colorRange(q,A,G))}}),Object.defineProperty(g,"borderColor",{get:function(){return r},set:function(G){r=G,g.borderColorCommand?G&&G.type?g.specialColor(g.borderColorCommand,G,g):g.borderColorCommand.style=G:L()}}),Object.defineProperty(g,"borderWidth",{get:function(){return i},set:function(G){G>0||(G=0),i=G,!g.borderWidthCommand||i==0?L():(g.borderWidthCommand.width=i,I&&(g.borderDashedCommand.segments=[20,10],g.borderDashedCommand.offset=5))}}),Object.defineProperty(g,"spineColor",{get:function(){return P},set:function(G){n(G)&&(G=e.black),P=G,g.spineColorCommand?G&&G.type?g.specialColor(g.spineColorCommand,G,g):g.spineColorCommand.style=G:L()}}),Object.defineProperty(g,"spineBorderColor",{get:function(){return K},set:function(G){K=G,g.spineBorderColorCommand?G&&G.type?g.specialColor(g.spineBorderColorCommand,G,g):g.spineBorderColorCommand.style=G:L()}}),Object.defineProperty(g,"spineBorderWidth",{get:function(){return F},set:function(G){G>0||(G=0),F=G,!g.spineBorderWidthCommand||F==0?L():(g.spineBorderWidthCommand.width=F,V&&(g.spineBorderDashedCommand.segments=[20,10],g.spineBorderDashedCommand.offset=5))}}),Object.defineProperty(g,"closeColor",{get:function(){return U},set:function(G){n(G)&&(G=e.black),U=G,g.closeColorCommand?G&&G.type?g.specialColor(g.closeColorCommand,G,g):g.closeColorCommand.style=G:L()}}),Object.defineProperty(g,"closeBorderColor",{get:function(){return J},set:function(G){J=G,g.closeBorderColorCommand?G&&G.type?g.specialColor(g.closeBorderColorCommand,G,g):g.closeBorderColorCommand.style=G:L()}}),Object.defineProperty(g,"closeBorderWidth",{get:function(){return Q},set:function(G){G>0||(G=0),Q=G,!g.closeBorderWidthCommand||Q==0?L():(g.closeBorderWidthCommand.width=Q,N&&(g.closeBorderDashedCommand.segments=[20,10],g.closeBorderDashedCommand.offset=5))}}),Object.defineProperty(g,"pin",{get:function(){return p},set:function(G){G>0||(G=0),G>g.pinPoints.length-1&&(p=0),p=G;var Z=g.pinPoints[p];Z&&(g.regX=Z.x,g.regY=Z.y)}});var xe=e.boundsAroundPoints(g.points);this.setBounds(xe.x,xe.y,xe.width,xe.height),n(p)||(g.pin=p),this.mouseChildren=!1,ae!==!1&&e.styleTransforms(this,y),this.clone=function(){return g.cloneProps(new e.Flare(t,r,i,h,e.copy(l),e.copy(f),e.copy(d),p,w,k,e.copy(x),e.copy(T),e.copy(S),e.copy(b),e.copy(E),R,e.copy(C),O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,this.group,pe))}},e.extend(e.Flare,e.Container,["clone"],"zimContainer",!1),e.MultiFlare=function(t,r,i,o,l,f,d){var p="flares, pins, angles, endToEnd, style, group, inherit",w;if(w=yt(e.MultiFlare,arguments,p,this))return w;qe("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=f;var k=l===!1?{}:e.getStyle(this.type,this.group,d),x=this;n(t)&&(t=k.flares!=null?k.flares:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=k.pins!=null?k.pins:null),n(i)&&(i=k.angles!=null?k.angles:null),n(o)&&(o=k.endToEnd!=null?k.endToEnd:!1),x.flares=t,x.pins=r,x.angles=i,x.endToEnd=o,x.mouseChildren=!1,x.add=function(T,S){return n(T)||(n(S)&&(S=!0),Array.isArray(T)||(T=[T]),e.loop(T,function(b){S?x.flares.push(b.clone()):x.flares.push(b)}),x.remake(),x.stage&&x.stage.update()),x},x.remove=function(T){return n(T)||(Array.isArray(T)||(T=[T]),e.loop(T,function(S){var b=x.flares.indexOf(S);b>=0&&x.flares.splice(b,1)}),x.remake(),x.stage&&x.stage.update()),x},x.remake=function(){x.removeAllChildren(),e.loop(x.flares,function(T,S){if(r&&!n(r[S])&&(T.pin=r[S]),i&&!n(i[S])&&(T.rotation=i[S]),T.addTo(x),x.flares.push(T),o&&S>0){var b=t[S-1],E=b.pinPoints[b.pinPoints.length-1],R=b.localToLocal(E.x,E.y,x),C=T.pinPoints[0],O=T.localToLocal(C.x,C.y,x);T.mov(R.x-O.x,R.y-O.y)}})},x.remake(),l!==!1&&e.styleTransforms(this,k),this.clone=function(){return x.cloneProps(new e.MultiFlare(e.copy(t,!0),e.copy(r),e.copy(i),o,l,this.group,d))}},e.extend(e.MultiFlare,e.Container,["clone"],"zimContainer",!1),e.FlareBox=function(t,r,i,o,l,f,d,p,w,k,x){var T="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",S;if(S=yt(e.FlareBox,arguments,T,this))return S;qe("53.8"),this.group=k;var b=w===!1?{}:e.getStyle("FlareBox",this.group,x);n(t)&&(t=b.width!=null?b.width:220),n(r)&&(r=b.height!=null?b.height:80),this.zimContainer_constructor(t,r),this.type="FlareBox";var E=this;if(this.mouseChildren=!1,n(o)&&(o=b.borderColor!=null?b.borderColor:null),n(l)&&(l=b.borderWidth!=null?b.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(i)&&(i=b.color!=null?b.color:l>0?"rgba(0,0,0,0)":e.black),(n(l)||l>0)&&(!n(o)||!n(l))&&n(o)&&(o=e.black),n(f)&&(f=b.flares!=null?b.flares:null),n(d)&&(d=b.corners!=null?b.corners:null),n(p)&&(p=b.pins!=null?b.pins:null),E.backing=new e.Rectangle(t,r,i,o,l).addTo(this),!n(f)){if(f.type!="MultiFlare"){if(!Array.isArray(f)){if(f.type!="Flare")return;f=[f]}f=new e.MultiFlare(f,p)}f.addTo(E),E.multiFlare=f,E.flares=E.multiFlare.flares,f.loop(function(R,C){p&&!n(p[C])?R.pin=p[C]:n(R.pin)&&(R.pin=0),d&&!n(d[C])?R.corner=d[C]:n(R.corner)&&(R.corner=0),R.corner==1?R.loc(t,0):R.corner==2?R.loc(t,r):R.corner==3?R.loc(0,r):R.loc(0,0),R.rot((R.corner-R.pin)*90)}),w!==!1&&e.styleTransforms(this,b),this.clone=function(){return E.cloneProps(new e.FlareBox(t,r,i,o,l,e.copy(f,!0),e.copy(d),e.copy(p),w,this.group,x))}}},e.extend(e.FlareBox,e.Container,["clone"],"zimContainer",!1),e.Label=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X){var y="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",g;if(g=yt(e.Label,arguments,y,this))return g;qe("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=$;var h=pe===!1?{}:e.getStyle(this.type,this.group,X);n(t)&&(t=h.text!=null?h.text:"LABEL"),n(r)&&(r=h.size!=null?h.size:36),n(i)&&(i=h.font!=null?h.font:"arial"),n(o)&&(o=h.color!=null?h.color:e.black),n(k)&&(k=h.bold!=null?h.bold:!1),n(x)&&(x=h.italic!=null?h.italic:!1);var L=q(t,r,i,o,k,x);this.veeObj={text:L[0],size:L[1],font:L[2],color:L[3],bold:L[4],italic:L[5]};function q(){return arguments}t=e.Pick.choose(t);var A=!1;t===""&&(t=" ",A=!0),r=e.Pick.choose(r),i=e.Pick.choose(i),i=i.replace("+"," ");var Y=["ttf","otf","woff2","woff","fnt"],xe=i.split(".");xe.length>0&&Y.indexOf(xe[1])!=-1&&(i=xe[0]),o=e.Pick.choose(o),k=e.Pick.choose(k),x=e.Pick.choose(x),n(l)&&(l=h.rollColor!=null?h.rollColor:null),(n(f)||f=="ignore")&&(f=h.shadowColor!=null&&f!="ignore"?h.shadowColor:-1),(n(d)||d=="ignore")&&(d=h.shadowBlur!=null&&d!="ignore"?h.shadowBlur:14),n(p)&&(p=h.align!=null?h.align:"left"),n(w)&&(w=h.valign!=null?h.valign:"top"),(!n(R)||!n(h.outlineColor))&&n(C)&&(C=h.outlineWidth!=null?h.outlineWidth:Math.round(r*.2)),(!n(C)||!n(h.outlineWidth))&&n(R)&&(R=h.outlineColor!=null?h.outlineColor:e.black),n(C)&&(C=h.outlineWidth!=null?h.outlineWidth:0),(n(O)||O=="ignore")&&(O=h.backgroundColor!=null&&O!="ignore"?h.backgroundColor:null),n(I)&&(I=h.backgroundBorderColor!=null&&I!="ignore"?h.backgroundBorderColor:null),n(_)&&(_=h.backgroundBorderWidth!=null&&_!="ignore"?h.backgroundBorderWidth:null),(n(K)||K=="ignore")&&(K=h.padding!=null&&K!="ignore"?h.padding:10),n(V)&&(V=h.paddingH!=null?h.paddingH:K),n(D)&&(D=h.paddingV!=null?h.paddingV:K),n(U)&&(U=h.shiftH!=null?h.shiftH:0),n(Q)&&(Q=h.shiftV!=null?h.shiftV:0),n(T)&&(T=h.variant!=null?h.variant:!1),n(S)&&(S=h.lineWidth!=null?h.lineWidth:null),n(b)&&(b=h.lineHeight!=null?h.lineHeight:null),(n(E)||E=="ignore")&&(E=h.backing!=null&&E!="ignore"?h.backing.clone():null),n(J)&&(J=h.rollPersist!=null?h.rollPersist:!1),h.labelWidth!=null&&(S=h.labelWidth),n(N)||(S=N),p=="middle"&&(p="center"),n(te)&&(te=h.labelHeight!=null?h.labelHeight:null),n(ae)&&(ae=h.maxSize!=null?h.maxSize:null),r=ae?Math.min(r,ae):r,n(ee)&&(ee=h.splitWords!=null?h.splitWords:!1);var G=le.zdf&&le.zdf.retina,Z=this;this.mouseChildren=!1,this.paddingV=D,this.paddingH=V,le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?p=="start"?p="right":p=="end"&&(p="left"):p=="start"?p="left":p=="end"&&(p="right");var ge=[];ge[0]=x?"italic":"normal",ge[1]=T?"small-caps":"normal",ge[2]=k?"bold":"normal",ge[3]=r+"px",ge[4]=i;var he=ge.join(" ");t=String(t);var ne,ue=!1,Te=S,Fe=te;if(n(E)&&n(O)){var ie=new je.Shape;Z.hitArea=ie}else Te&&(Te=Te-V*2),Fe&&(Fe=Fe-D*2);function Se(ce){var Ue=new je.Text(ce,he,o);return Ue.lineWidth=Te,Ue.lineHeight=b,Ue}ne=Se(t);function se(ce,Ue,Qe){var Je=Math.ceil(Te/Ue*Qe.length),nt=Qe.substr(0,Je),gt=Se(nt),We=gt.getMeasuredWidth();if(We>Te)for(;We>Te;)Je--,nt=Qe.substr(0,Je),gt=Se(nt),We=gt.getMeasuredWidth();else if(We<Te){for(;We<Te;)Je++,nt=Qe.substr(0,Je),gt=Se(nt),We=gt.getMeasuredWidth();Je--,nt=Qe.substr(0,Je)}var st=Qe.substr(Je,Qe.length);return{endIndex:Je,start:nt,end:st}}if(ee&&Te>r*1.2)for(var me=ne.getMetrics(),j=0;me.width>Te&&j<1e3;)j++,e.loop(me.lines,function(ce,Ue){ce=ce.replace(/^[\s\t]+/,"");var Qe=Se(ce),Je=Qe.getMeasuredWidth();if(Je>Te){var nt=se(Qe,Je,ce);return me.lines[Ue]=nt.start,me.lines.length>Ue+1?(nt.end.trim(),me.lines[Ue+1]=nt.end+" "+me.lines[Ue+1]):me.lines.push(nt.end),ne=Se(me.lines.join(" ")),me=ne.getMetrics(),!1}});if(this.label=ne,ne.textAlign=p,ne.textBaseline="alphabetic",C>0){var _e=this.outlineLabel=ne.clone();_e.color=R,_e.outline=C}f!=-1&&d>0&&(ne.shadow=new je.Shadow(f,3,3,d)),this.addChild(ne);function Re(){Z.removeChild(Z.background),Z.background=new e.Rectangle(Z.getBounds().width+V*2,Z.getBounds().height+D*2,O,I,_,P,F,null,null,!1),e.center(Z.background,Z,0),Z.setBounds(Z.background.x,Z.background.y,Z.background.width,Z.background.height)}function de(){var ce=ne.getBounds(),Ue=ce.y,Qe=ce.height;if(Te&&!Fe){var Je=ce.x,nt=Te;p=="right"?Je=ce.x-Te+ce.width:p=="center"&&(Je=-Te/2),ne.setBounds(Je,Ue,nt,Qe),ce=ne.getBounds()}var gt;w=="baseline"?gt=ce.y:w=="top"?(ne.y=r-r/6,gt=0):w=="center"||w=="middle"?(gt=-ce.height/2,ne.y=r*.3):gt=-ce.height,Z.setBounds(ce.x,gt,h.width?h.width-K*2:ce.width,h.height?h.height-K*2:ce.height),Z.hitArea&&Z.hitArea.graphics.c().f("black").r(Z.getBounds().x,Z.getBounds().y,Z.getBounds().width,Z.getBounds().height),(w=="center"||w=="middle")&&(e.pos(ne,null,0),e.mov(ne,0,1)),te||(E?ue&&fe():n(O)||Re()),w!="baseline"&&!G&&(ne.y+=r/32),ve()}if(de(),!n(E)){if(E.type=="Pattern"){if(Z.backing=new e.Container(Z.width+V*2,Z.height+D*2,null,null,!1).centerReg(null,null,!1),f!=-1&&d>0){var Pe=new e.Rectangle(Z.width+V*2-2,Z.height+D-2,"#666",null,null,P,null,null,null,!1).center(Z.backing);Pe.shadow=new je.Shadow(f,3,3,d)}var Me=new e.Rectangle(Z.width+V*2,Z.height+D*2,O,null,null,P,null,null,null,!1).addTo(Z.backing);E.centerReg(Me),E.setMask(Me),Z.backing.pattern=E}else Z.backing=E;Z.backing.center(Z,0),E=Z.backing,fe(),ue=!0}function fe(){var ce=E.boundsToGlobal(),Ue=Z.boundsToGlobal(ce,!0);Z.setBounds(Ue.x,Ue.y,Ue.width,Ue.height)}function ve(){e.pos(ne,p=="left"||p=="right"?E||Z.background?V:0:null,w=="top"||w=="baseline"||w=="bottom"?E||Z.background?D:0:null,p=="right",w=="bottom"),ne.x+=U,ne.y+=Q}ve();function Ie(){_e&&(_e.x=ne.x,_e.y=ne.y,Z.addChildAt(_e,Z.background||Z.backing?1:0))}Ie(),Object.defineProperty(Z,"text",{get:function(){var ce=ne.text==" "&&A?"":ne.text;return ce},set:function(ce){A=!1,ce===""&&(ce=" ",A=!0),ne.text=String(ce),ne.setBounds(null),Z.setBounds(null),de(),_e&&(_e.text=String(ce)),!n(S)&&!n(te)&&(Oe(),_e&&Ie())}}),Object.defineProperty(Z,"size",{get:function(){return r},set:function(ce){r=ae?Math.min(ce,ae):ce,ge[3]=r+"px",this.label.font=ge.join(" "),_e&&(_e.font=ge.join(" ")),ne.setBounds(null),Z.setBounds(null),de(),Ie()}}),Object.defineProperty(Z,"bold",{get:function(){return!!this.label.font.match("bold")},set:function(ce){k=ce,ge[2]=ce?"bold":"normal",this.label.font=ge.join(" "),_e&&(_e.font=ge.join(" "))}}),Object.defineProperty(Z,"italic",{get:function(){return!!this.label.font.match("italic")},set:function(ce){x=ce,ge[0]=ce?"italic":"normal",this.label.font=ge.join(" "),_e&&(_e.font=ge.join(" "))}}),Object.defineProperty(Z,"variant",{get:function(){return!!this.label.font.match("small-caps")},set:function(ce){T=ce,ge[1]=ce?"small-caps":"normal",this.label.font=ge.join(" "),_e&&(_e.font=ge.join(" "))}}),Object.defineProperty(Z,"font",{get:function(){return ge[4]},set:function(ce){n(ce)||(i=ce,ge[4]=ce,this.label.font=ge.join(" "),_e&&(_e.font=ge.join(" ")))}}),Object.defineProperty(Z,"align",{get:function(){return p},set:function(ce){n(ce)||(p=ce,this.label.textAlign=p,_e&&(_e.textAlign=p),de(),Ie())}}),Object.defineProperty(Z,"valign",{get:function(){return w},set:function(ce){n(ce)||(w=ce,de(),Ie())}}),Object.defineProperty(Z,"color",{get:function(){return o},set:function(ce){l==o&&(l=ce),o=ce,ne.color=o,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),Object.defineProperty(Z,"colorOnly",{get:function(){return o},set:function(ce){o=ce,ne.color=o,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}});var we,Xe;this.setColorRange=function(ce,Ue){return n(Ue)?(we=Z.color,Xe=ce):n(ce)?(we=Z.color,Xe=Ue):(we=ce,Xe=Ue),Z};var ye=0;Object.defineProperty(Z,"colorRange",{get:function(){return ye},set:function(ce){ye=ce,!n(we)&&!n(Xe)&&(Z.color=e.colorRange(we,Xe,ce))}}),Object.defineProperty(Z,"backgroundColor",{get:function(){return O},set:function(ce){O=ce,Z.background?Z.background.color=ce:Z.backing?Z.backing.color=ce:Re(),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),Object.defineProperty(Z,"outlineColor",{get:function(){return R},set:function(ce){R=ce,_e&&(_e.color=R),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),Object.defineProperty(Z,"rollColor",{get:function(){return l},set:function(ce){!Z.mouseoverEvent&&ce&&Ge(),ce==null&&Z.mouseoverEvent&&He(),l=ce}}),this._enabled=!0,Object.defineProperty(Z,"enabled",{get:function(){return Z._enabled},set:function(ce){c(Z,ce),ne.color=o,Z.mouseChildren=!1,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update()}}),this.showRollColor=function(ce){return n(ce)&&(ce=!0),ce?ne.color=l:ne.color=o,Z.stage&&Z.stage.update(),Z};function Ge(){Z.mouseoverEvent=Z.on("mouseover",function(){Z.showRollColor&&Z.showRollColor()}),Z.mouseoutEvent=Z.on("mouseout",function(){Z.rollPersist||Z.showRollColor(!1)}),Z.pressupEvent=Z.on("pressup",function(){Z.rollPersist&&Z.showRollColor(!1)})}function He(){Z.off("mouseover",Z.mouseoverEvent),Z.off("mouseout",Z.mouseoutEvent),Z.off("pressup",Z.pressupEvent)}l&&Ge(),Object.defineProperty(Z,"labelWidth",{get:function(){return S},set:function(ce){ce>0&&(S=ce,Te=S,(!n(E)||!n(O))&&Te&&(Te=Te-V*2),Z.label.lineWidth=Te,_e&&(_e.lineWidth=Te),ne.setBounds(null),Z.setBounds(null),de(),te&&Oe(),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update())}}),Object.defineProperty(Z,"labelHeight",{get:function(){return te},set:function(ce){ce>0&&(te=ce,Fe=te,(!n(E)||!n(O))&&Fe&&(Fe=Fe-D*2),S&&Oe(),Z.setBounds(null),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Z.stage&&Z.stage.update())}}),!n(S)&&!n(te)&&Oe();function Oe(){Z.size=ae||200;for(var ce=0;b<Fe/2&&(Z.height>Fe||Z.width>Te)&&(ce++,Z.size=Z.size/2,!(ce>50)););for(ce=0;Z.height<=Fe&&Z.width<=Te&&(ce++,Z.size=Math.ceil(Z.size+1),!(ce>50)););Z.size=Z.size-1,Ie(),ne.setBounds(null);var Ue=ne.getBounds(),Qe=Ue.y,Je=Ue.height;Fe&&(w=="bottom"?Qe=Qe-Fe+Je:(w=="center"||w=="middle")&&(Qe=(Qe+Qe-Fe+Je)/2),Je=Fe),ne.setBounds(Ue.x,Qe,Ue.width,Je),Z.setBounds(null),Ue=Z.getBounds(),Z.setBounds(Ue.x,Ue.y,Ue.width,Ue.height),E?ue&&fe():n(O)||Re()}e.styleTransforms(this,h),this.clone=function(ce){return Z.cloneProps(new e.Label(ce||!e.isPick(L[0])?Z.text:L[0],ce||!e.isPick(L[1])?r:L[1],ce||!e.isPick(L[2])?i:L[2],ce||!e.isPick(L[3])?o:L[3],l,f,d,p,w,ce||!e.isPick(L[4])?k:L[4],ce||!e.isPick(L[5])?x:L[5],T,S,b,n(E)?null:E.clone(ce),R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,this.group,X))}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.LabelOnPath=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",b;if(b=yt(e.LabelOnPath,arguments,S,this))return b;qe("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=x;var E=k===!1?{}:e.getStyle(this.type,this.group,T);n(t)&&(t=E.label!=null?E.label:new e.Label("Label on Path")),n(r)&&(r=E.path!=null?E.path:new e.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),n(i)&&(i=E.percentAngle!=null?E.percentAngle:100),n(o)&&(o=E.percents!=null?E.percents:null),n(l)&&(l=E.showPath!=null?E.showPath:!0),n(f)&&(f=E.allowToggle!=null?E.allowToggle:!0),n(d)&&(d=E.interactive!=null?E.interactive:!0),n(p)&&(p=E.onTop!=null?E.onTop:!1),n(w)&&(w=E.rtl!=null?E.rtl:le.DIR=="rtl"||e.DIR=="rtl"),w&&r.reversePoints();var R=t.color;r.addTo(this);var C=this;this.path=r,this.allowToggle=f,r.interactive=d,typeof t=="string"&&(t=new e.Label(t));var O=r.alpha;l||r.alp(0),r.onTop=p;var I=this.letters=new e.Container().addTo(this);if(!o){o=[];for(var _=0;_<t.text.length;_++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*_))}this.percents=o;function P(){var K;for(K=I.numChildren-1;K>=0;K--)I.getChildAt(K).dispose();for(C.numLetters=t.text.length,K=0;K<C.numLetters;K++){var V=t.clone();V.text=t.text[K],V.centerReg(I).reg(null,V.height),V.text!=""&&V.text!=" "&&V.expand(0),C.allowToggle&&V.cur("pointer"),V.on("mousedown",function(){C.allowToggle&&C.toggle()})}C.resize()}this.resize=function(){for(var K=r.segmentRatios,V=r.segmentPoints,D=0;D<this.numLetters;D++){var U=r.getCurvePoint(o[D]/100,K,V,!0);if(U){var Q=this.globalToLocal(U.x,U.y);Q&&(I.getChildAt(D).loc(Q).rot((U.angle>180?U.angle-360:U.angle)*i/100),w&&(I.getChildAt(D).rotation+=180))}}return this},P(),this.showPath=function(K){return this.toggle(!0),r.toggle(K),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(C,"text",{get:function(){return t.text},set:function(K){t.text=K,o=[];for(var V=0;V<t.text.length;V++)o.push(e.decimals(1/(t.text.length-(r.type=="Blob"?0:1))*100*V));P()}}),Object.defineProperty(this,"color",{get:function(){return R},set:function(K){R=K;for(var V=0;V<C.letters.numChildren;V++)C.letters.getChildAt(V).color=R;C.stage&&C.stage.update()}}),Object.defineProperty(C,"interactive",{get:function(){return d},set:function(K){d=K,r.interactive=K,this.ticker&&e.Ticker.remove(this.ticker),d&&(this.ticker=e.Ticker.add(function(){C.resize()}))}}),this.interactive&&(this.ticker=e.Ticker.add(function(){C.resize()}));var F=C.toggled=l;this.toggle=function(K){if(this.allowToggle)return n(K)?F=!F:K?F=!0:F=!1,F?(r.alp(O),this.interactive&&(r.showControls(),I.mouseEnabled=!1,I.mouseChildren=!1,I.cur("default"),this.controlHideEvent&&r.off("controlshide",this.controlHideEvent),this.controlHideEvent=r.on("controlshide",function(){I.mouseEnabled=!0,I.mouseChildren=!0,I.cur("pointer"),O=r.alpha,r.alp(0),F=!1,C.toggled=F,C.stage&&C.stage.update()},null,!0))):(O=r.alpha,r.alp(0),I.mouseEnabled=!0,I.mouseChildren=!0,I.cur("pointer")),C.toggled=F,C.stage&&C.stage.update(),C},C.toggle(!0),e.styleTransforms(this,E),this.clone=function(){return C.cloneProps(new e.LabelOnPath(C.label.clone(),C.path.clone(),i,e.copy(o),l,f,d,p,w,k,this.group,T))},this.dispose=function(K,V,D){return this.ticker&&e.Ticker.remove(this.ticker),D||this.zimContainer_dispose(!0),!0}},e.extend(e.LabelOnPath,e.Container,["clone","dispose"],"zimContainer",!1),e.LabelOnArc=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O){var I="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",_;if(_=yt(e.LabelOnArc,arguments,I,this))return _;qe("54.55"),this.group=C;var P=R===!1?{}:e.getStyle("LabelOnArc",this.group,O);n(r)&&(r=P.size!=null?P.size:30),n(t)&&(t=P.label!=null?P.label:new e.Label("Label on Arc",r)),n(i)&&(i=P.font!=null?P.font:"verdana"),n(o)&&(o=P.color!=null?P.color:e.white),n(l)&&(l=P.radius!=null?P.radius:100),n(f)&&(f=P.flip!=null?P.flip:!1),n(d)&&(d=P.spacing!=null?P.spacing:0),n(p)&&(p=P.letterSpacing!=null?P.letterSpacing:5),n(w)&&(w=P.angles!=null?P.angles:null);var F=!n(w),K=e.copy(w);n(k)&&(k=P.showCircle!=null?P.showCircle:!1),n(x)&&(x=P.arcColor!=null?P.arcColor:null),n(T)&&(T=P.arcBorderColor!=null?P.arcBorderColor:null),n(S)&&(S=P.arcBorderWidth!=null?P.arcBorderWidth:null),n(b)&&(b=P.radiusSpread!=null?P.radiusSpread:!1),n(E)&&(E=P.rtl!=null?P.rtl:le.DIR=="rtl"||e.DIR=="rtl");var V=this.outerRadius=l+d+t.height;this.innerRadius=l+d,this.zimContainer_constructor(-V,-V,V*2,V*2,!1),this.type="LabelOnArc";var D=this;t.type!="Label"&&(t=new e.Label(t,r,i,o)),t.text;var U,Q,J,N,te,ae;function ee(){if(D.disposeAllChildren(),f){var X=t.text.split("").reverse().join("");t.text=X}U=D.letters=new e.Container(D.width,D.height).centerReg(D),D.numLetters=t.text.length,D.letterHeight=t.height,Q=D.labels=[];var y;for(y=0;y<D.numLetters;y++){var g=t.clone();Q.push(g),g.text=t.text[y],g.letterHolder=new e.Container(g.width,g.height),g.centerReg(g.letterHolder).rot(f?180:0)}if(E&&Q.reverse(),N=D.circle=new e.Circle(l),k&&N.addTo(D),J=D.arc=new e.Shape().addTo(D),pe(),w){for(te=0,y=0;y<w.length;y++)te+=w[y];te+=w[w.length-1]/2}$()}ee();function pe(){te=0,ae=[0];for(var X=0;X<D.numLetters;X++){var y=Q[X],g=Math.atan((y.width+p)/2/(l+d))*180/Math.PI*2;ae.push(g),te+=g,y.letterHolder.centerReg(U).reg(null,l+d+y.height+(f?y.height*.13:0))}D.circle.radius=l,(x||T||S)&&(S>0&&n(T)?T=e.black:n(S)&&!n(T)&&(S=2),J.graphics.c().f(null).s(T).ss(S).arc(0,0,l,(D.startAngle-90)*Math.PI/180,(D.startAngle-90+te)*Math.PI/180))}function $(){var X;if(!F)for(w=[],X=0;X<ae.length-1;X++)w[X]=Math.round((ae[X]+ae[X+1])/2*100)/100;D.angles=w,D.startAngle=-te/2;var y=D.startAngle;for(X=0;X<U.numChildren;X++){var g=U.getChildAt(X);y=g.rotation=y+w[X]}}Object.defineProperty(this,"radius",{get:function(){return l},set:function(X){l=X,pe(),!F&&!b&&$()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(X){o=X;for(var y=0;y<D.labels.length;y++)D.labels[y].color=o;D.stage&&D.stage.update()}}),Object.defineProperty(D,"text",{get:function(){return t.text},set:function(X){t.text=X,K?w=e.copy(K):w=null,ee()}}),e.styleTransforms(this,P),this.clone=function(){return D.cloneProps(new e.LabelOnArc(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,this.group,O))}},e.extend(e.LabelOnArc,e.Container,"clone","zimContainer",!1),e.LabelLetters=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E){var R="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",C;if(C=yt(e.LabelLetters,arguments,R,this))return C;qe("54.57"),this.group=b;var O=S===!1?{}:e.getStyle("LabelLetters",this.group,E);n(t)&&(t=O.label!=null?O.label:new e.Label("Label Letters")),n(r)&&(r=O.align!=null?O.align:"center"),n(i)&&(i=O.valign!=null?O.valign:"center"),n(o)&&(o=O.letterSpacing!=null?O.letterSpacing:5),n(l)&&(l=O.letterSpacings!=null?O.letterSpacings:null),n(p)&&(p=O.lineHeight!=null?O.lineHeight:null),n(f)&&(f=O.lineSpacing!=null?O.lineSpacing:5),n(d)&&(d=O.lineSpacings!=null?O.lineSpacings:null),n(T)&&(T=O.rtl!=null?O.rtl:!1),n(w)&&(w=O.lineAlign!=null?O.lineAlign:T?"right":"left"),n(k)&&(k=O.lineValign!=null?O.lineValign:"bottom"),n(x)&&(x=O.cache!=null?O.cache:!1),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var I=this,_=I.letterData=[],P,F;t.type!="Label"?(F=K(t),_=F.data,t=new e.Label(F.text)):(F=K(t.text),_=F.data,t.text=F.text),I.text=F.original,I._color=t.color,le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?w=="start"?w="right":w=="end"&&(w="left"):w=="start"?w="left":w=="end"&&(w="right");function K(_e){var Re=[];function de(Xe){return Xe.split("").reverse().join("")}if(T){Fe=-1,_e=_e.replace(/[\u0591-\u07FF]+/ig,de),_e=_e.replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/ig,"$1-!!-$2"),_e=_e.replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/ig,"$1-!!-$2"),_e=_e.replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/ig,"$1-!!- -!!-$2"),_e=_e.replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/ig,"$1-!!- -!!-$2");var Pe=_e.split(/-!!-/g);e.loop(Pe,function(Xe,ye){Xe.match(/[\u0591-\u07FF]/i)&&(Pe[ye]=Xe.split(" ").reverse().join(" "))}),_e=Pe.join("")}_e=_e.replace(/\n|\r/g,"<br>"),_e=_e.replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>"),_e=_e.replace(/<\/strong>/gi,"</b>"),_e=_e.replace(/<em>|<em \/>|<em\/>/gi,"<i>"),_e=_e.replace(/<\/em>/gi,"</i>"),_e=_e.replace(/\\n|\\r/g,"<br>"),_e=_e.replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>"),_e=_e.replace(/<b/gi,"<b"),_e=_e.replace(/<i/gi,"<i"),_e=_e.replace(/<u/gi,"<u"),_e=_e.replace(/<br/gi,"<br"),_e=_e.replace(/<a/gi,"<a"),_e=_e.replace(/<font/gi,"<font");var Me=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],fe=["b","a","i","u","font"],ve;e.loop(fe,function(Xe,ye){ve=_e.replace(Me[ye*2],"");var Ge;Xe=="font"?Ge=ve.split("<font "):Xe=="a"?Ge=ve.split("<a "):Ge=ve.split("<"+Xe+">"),we(Ge,Xe,0),ve=_e.replace(Me[ye*2+1],""),Ge=ve.split("</"+Xe+">"),we(Ge,Xe,1)}),ve=_e.replace(/<br>/gi,"@^#"),ve=ve.replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"");var Ie=ve.split("@^#");P=Ie.join("\n"),ve=Ie.join(""),we(Ie,"br",0);function we(Xe,ye,Ge){if(Xe.length>1)if((ye=="font"||ye=="a")&&Ge==0){var He=Xe[0].length;e.loop(Xe,function(ce,Ue){if(Ue!=0){var Qe=Re[He];Qe||(Re[He]=[]),Qe=Re[He];var Je=ce.split(">");Qe[Ge]?Qe[Ge].push(ye+" "+Je[0]):Qe[Ge]=[ye+" "+Je[0]],He+=Je[1].length}})}else{Xe.pop();var Oe=0;e.loop(Xe,function(ce){Oe+=ce.length;var Ue=Re[Oe];Ue||(Re[Oe]=[]),Ue=Re[Oe],Ue[Ge]?Ue[Ge].push(ye):Ue[Ge]=[ye]})}}return{text:ve,data:Re,original:P}}I.numLetters=t.text.length;var V=!n(l);l&&!Array.isArray(l)&&(l=null);var D;if(l)for(D=0;D<I.numLetters;D++)n(l[D])&&(l[D]=o);else for(l=[],D=0;D<I.numLetters;D++)l.push(o);if(I.letterSpacings=l,d&&!Array.isArray(d)&&(d=null),d)for(D=0;D<I.numLetters-1;D++)n(d[D])&&(d[D]=f);else for(d=[],D=0;D<I.numLetters-1;D++)d.push(f);I.lineSpacings=d,I.labels=[],I.lines=[[]];var U=[],Q=[],J=[0],N=0,te=0,ae=0,ee=0,pe=0,$=_,X=!1,y=!1,g=!1,h=!1,L=!1,q=!1,A=!1,Y=!1,xe=!1,G=!1,Z=!1,ge=!1;for(I.rolls=[[]],D=0;D<I.numLetters;D++){h=!1,$[D]&&($[D][1]&&($[D][1].indexOf("b")>=0&&(X=!1),$[D][1].indexOf("i")>=0&&(y=!1),$[D][1].indexOf("u")>=0&&(g=!1),e.loop($[D][1],function(_e){if(_e.match(/^font/i)){L=!1,Z=!1,ge&&I.rolls.push([]),ge=!1,q=!1,Y=!1,A=!1;return}if(_e.match(/^a/i)){xe=!1,G=!1;return}})),$[D][0]&&($[D][0].indexOf("b")>=0&&(X=!0),$[D][0].indexOf("i")>=0&&(y=!0),$[D][0].indexOf("u")>=0&&(g=!0),h=0,e.loop($[D][0],function(_e){_e=="br"&&h++}),e.loop($[D][0],function(_e){var Re,de;if(_e.match(/^font/i)){Re=_e.match(/ color\s?=\s?(\S*)/i),Re&&(L=Re[1],de=e.colors.indexOf(L),de>=0&&(L=e.colorsHex[de]),L=L.replace(/'/g,"")),Re=_e.match(/size\s?=\s?(\S*)/i),Re&&(q=Re[1]),Re=_e.match(/backgroundColor\s?=\s?(\S*)/i),Re&&(Z=Re[1],de=e.colors.indexOf(Z),de>=0&&(Z=e.colorsHex[de]),Z=Z.replace(/'/g,"")),Re=_e.match(/rollBackgroundColor\s?=\s?(\S*)/i),Re&&(ge=Re[1],de=e.colors.indexOf(ge),de>=0&&(ge=e.colorsHex[de]),ge=ge.replace(/'/g,"")),Re=_e.match(/group\s?=\s?(\S*)/i),Re&&(A=Re[1]),Re=_e.match(/family\s?=\s?(.*)/i),Re&&(Y=Re[1],Y=Y.split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]);return}if(_e.match(/^a/i)){Re=_e.match(/href\s?=\s?(\S*)/i),Re&&(xe=Re[1]),Re=_e.match(/target\s?=\s?(\S*)/i),Re&&(G=Re[1]);return}})));var he;A?he=new e.Label({text:t.text[D],group:A}):(he=t.clone(),he.text=t.text[D]),I.labels.push(he),X&&(he.bold=!0),y&&(he.italic=!0),L&&(he.color=L),Z&&(he.backgroundColor=Z);var ne=V||n(he.backgroundColor)?l[D]:-.5;ge&&(he.rollIndex=I.rolls.length-1,he.zrbc=ge,he.zobc=he.backgroundColor,I.rolls[he.rollIndex].push(he),he.expand(0),he.on("mouseover",ue),he.on("mouseout",Te)),xe&&(he.expand(ne,0),he.zurl=xe,he.ztar=G,he.cur(),he.on("click",function(_e){var Re=_e.currentTarget;Te(_e),Re.ztar||(Re.ztar="_self"),sr(Re.zurl,Re.ztar)})),q&&(he.size=q),Y&&(he.font=Y),h&&(N+=(n(p)?ae:p)+d[ee],J.push(N),Q.push(n(p)?ae:p),U.push(te),pe=Math.max(pe,te)),h&&(h>1&&e.loop(h-1,function(){I.lines.push([]),N+=(n(p)?ae:p)+d[ee],J.push(N),Q.push(n(p)?ae:p),U.push(0),ee++}),ae=0,te=0,I.lines.push([]),ee++),te+=he.width+ne,ae=Math.max(ae,he.height),D==I.numLetters-1&&(U.push(te),Q.push(ae),pe=Math.max(pe,te)),I.lines[ee].push(he),g&&(he.underline=new e.Line(he.width+ne+1,1,he.color).center(he,this).mov(0,he.height/2))}function ue(_e){var Re=_e.currentTarget,de=I.rolls[Re.rollIndex];e.loop(de,function(Pe){Pe.backgroundColor=Re.zrbc}),Re.stage&&Re.stage.update()}function Te(_e){var Re=_e.currentTarget,de=I.rolls[Re.rollIndex];e.loop(de,function(Pe){Pe.backgroundColor=Re.zobc}),Re.stage&&Re.stage.update()}for(var Fe=0,ie=0;ie<I.lines.length;ie++){var Se=I.lines[ie];te=U[ie],ae=Q[ie],N=J[ie];var se,me;for(w=="left"?se=0:w=="right"?se=pe-te:se=(pe-te)/2,me=N,D=0;D<Se.length;D++){Fe++,x&&he.cache(),he=Se[D],he.regX=r=="left"?0:r=="right"?he.width:he.width/2,he.regY=i=="top"?0:i=="bottom"?he.height:he.height/2;var j=me+(i=="top"?0:i=="bottom"?he.height:he.height/2);k=="center"||k=="middle"?j+=(Q[ie]-he.height)/2:k=="bottom"&&(j+=Q[ie]-he.height),ne=V||n(he.backgroundColor)?l[Fe-1]:-.5,r=="left"?(he.loc(se,j,this),se=he.x+he.width+ne):r=="right"?(he.loc(se+he.width,j,this),se=he.x+ne):(he.loc(se+he.width/2,j,this),se=he.x+he.width/2+ne)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(_e){this._color=_e;for(var Re=0;Re<I.numChildren;Re++)I.getChildAt(Re).color=this._color;I.stage&&I.stage.update()}}),this.dispose=function(){e.gD(this),e.loop(I.labels,function(_e){_e.removeFrom(),_e.dispose()}),I.removeFrom()},e.styleTransforms(this,O),this.clone=function(){return I.cloneProps(new e.LabelLetters(t,r,i,o,l,f,d,p,w,k,x,T,S,this.group,E))}},e.extend(e.LabelLetters,e.Container,"clone","zimContainer",!1),e.Emoji=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C){var O="code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",I;if(I=yt(e.Emoji,arguments,O,this))return I;qe("54.58"),this.group=R;var _=E===!1?{}:e.getStyle("Emoji",this.group,C);n(t)&&(t=_.code!=null?_.code:"\u{1F642}"),n(r)&&(r=_.size!=null?_.size:30),n(i)&&(i=_.monochrome!=null?_.monochrome:!1),n(o)&&(o=_.italic!=null?_.italic:!1),(n(l)||l=="ignore")&&(l=_.backgroundColor!=null&&l!="ignore"?_.backgroundColor:null),n(f)&&(f=_.backgroundBorderColor!=null&&f!="ignore"?_.backgroundBorderColor:null),n(d)&&(d=_.backgroundBorderWidth!=null&&d!="ignore"?_.backgroundBorderWidth:null),(n(k)||k=="ignore")&&(k=_.padding!=null&&k!="ignore"?_.padding:10),n(x)&&(x=_.paddingH!=null?_.paddingH:k),n(T)&&(T=_.paddingV!=null?_.paddingV:k),n(S)&&(S=_.shiftH!=null?_.shiftH:0),n(b)&&(b=_.shiftV!=null?_.shiftV:0);var P=F(t,r);this.veeObj={code:P[0],size:P[1]};function F(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),t.substring(0,2)=="U+"&&(t=e.unicodeToUTF(t)),this.zimLabel_constructor(t,r,null,null,null,null,null,null,null,null,o,null,null,null,w,null,null,l,null,null,p,null,k,x,T,S,b),this.type="Emoji",this.code=t,this.size=r;var K=this,V=this.getBounds(),D=5,U=3;this.bounds=this.setBounds(V.x+U,V.y-D+1,V.width-U*2,V.height+D),i&&(this.saturation=-100);var Q=i;Object.defineProperty(K,"monochrome",{get:function(){return Q},set:function(J){J!=Q&&(Q=J,J&&(this.saturation=J?-100:0))}}),this.cache=function(J,N,te,ae){return n(J)?(N=this.getBounds(),this.zimLabel_cache(N.x-20,N.y-20,N.width+40,N.height+40)):this.zimLabel_cache(J,N,te,ae),K.z_bc=K.canvas=K.cacheCanvas,this},e.styleTransforms(this,_),this.clone=function(J){return K.cloneProps(new e.Emoji(J||!e.isPick(P[0])?t:P[0],J||!e.isPick(P[1])?K.size:P[1],i,o,l,f,d,p,w,k,x,T,S,b,E,K.group,C))}},e.extend(e.Emoji,e.Label,["clone","cache"],"zimLabel",!1),e.Button=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re,de,Pe,Me,fe,ve,Ie,we,Xe,ye,Ge){var He="width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",Oe;if(Oe=yt(e.Button,arguments,He,this))return Oe;qe("55"),this.group=ye;var ce=Xe===!1?{}:e.getStyle("Button",ye,Ge);n(t)&&(t=ce.width!=null?ce.width:200),n(r)&&(r=ce.height!=null?ce.height:60),n(le.M)&&(le.M=e.mobile());var Ue=d,Qe=p,Je=w;n(d)&&(d=ce.color!=null?ce.color:e.white),n(p)&&(p=ce.rollColor!=null?ce.rollColor:e.white),n(ee)&&(ee=ce.autoPadding!=null?ce.autoPadding:20),n(pe)&&(pe=ce.autoPaddingH!=null?ce.autoPaddingH:ee),n($)&&($=ce.autoPaddingV!=null?ce.autoPaddingV:ee),n(U)&&(U=ce.align!=null?ce.align:"center"),n(Q)&&(Q=ce.valign!=null?ce.valign:"center"),n(i)&&(n(C)?i=ce.label!=null?ce.label:"PRESS":i=""),typeof i=="string"||typeof i=="number"?i=new e.Label({text:i,size:ce.size!=null?ce.size:36,font:ce.font!=null?ce.font:"arial",color:ce.color!=null&&Ue==null?ce.color:d,rollColor:ce.rollColor&&Qe==null!=null?ce.rollColor:p,align:U,valign:Q,rollPersist:ce.rollPersist!=null?ce.rollPersist:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:ce.shiftV!=null?ce.shiftV:0,shiftH:ce.shiftH!=null?ce.shiftH:0,style:!1,group:this.group}):(n(Ue)||(i.color=Ue),d=i.color,(n(i.rollColor)||!n(Qe))&&(i.rollColor=p),p=i.rollColor),n(w)&&(w=ce.downColor!=null?ce.downColor:p),t=="auto"&&(t=i.width+pe*2),r=="auto"&&(r=i.height+$*2),this.zimContainer_constructor(t,r,null,null,!1),this.type="Button",n(o)&&(o=ce.backgroundColor!=null?ce.backgroundColor:e.purple),n(l)&&(l=ce.rollBackgroundColor!=null?ce.rollBackgroundColor:o.lighten(.2)),n(f)&&(f=ce.downBackgroundColor!=null?ce.downBackgroundColor:l);var nt=gt(o,l,f,d,p,w);this.veeObj={backgroundColor:nt[0],rollBackgroundColor:nt[1],downBackgroundColor:nt[2],color:nt[3],rollColor:nt[4],downColor:nt[5]};function gt(){return arguments}o=ct(o),l=ct(l),f=ct(f),d=ct(d),p=ct(p),w=ct(w);var We=k,st=x;n(k)&&(k=ce.borderColor!=null?ce.borderColor:null),n(x)&&(x=ce.borderWidth!=null?ce.borderWidth:null),k<0||x<0?k=x=null:k!=null&&x==null&&(x=1),n(T)&&(T=ce.rollBorderColor!=null?ce.rollBorderColor:k),n(S)&&(S=ce.downBorderColor!=null?ce.downBorderColor:T),n(_)&&(_=ce.corner!=null?ce.corner:10),n(F)&&(F=ce.shadowColor!=null?ce.shadowColor:"rgba(0,0,0,.3)"),n(K)&&(K=ce.shadowBlur!=null?ce.shadowBlur:14),n(ae)&&(ae=ce.hitPadding!=null?ce.hitPadding:0),n(J)&&(J=ce.indent!=null?ce.indent:10),n(N)&&(N=ce.indentH!=null?ce.indentH:J),n(te)&&(te=ce.indentV!=null?ce.indentV:J),n(V)&&(V=ce.gradient!=null?ce.gradient:0),n(D)&&(D=ce.gloss!=null?ce.gloss:0);var at=(!n(y)||!n(xe)||!n(G)||!n(Z)||!n(ge)||!n(he)||!n(ne))&&n(Te)&&n(Re)&&n(de);at&&n(ue)&&(ue=le.M?"mousedown":"click"),n(X)&&(X=ce.rollPersist!=null?ce.rollPersist:!1),this.rollPersist=X,n(P)&&(P=ce.dashed!=null?ce.dashed:!1),!n(y)&&y.type=="Label"&&At&&ut("Button() - do not pass Label to toggle parameter - just pass a String"),n(g)&&(g=ce.toggleBackgroundColor!=null?ce.toggleBackgroundColor:o),n(h)&&(h=ce.rollToggleBackgroundColor!=null?ce.rollToggleBackgroundColor:l),n(L)&&(L=ce.downToggleBackgroundColor!=null?ce.downToggleBackgroundColor:h),n(q)&&(q=ce.toggleColor!=null?ce.toggleColor:i.color),n(A)&&(A=ce.rollToggleColor!=null?ce.rollToggleColor:i.rollColor),n(Y)&&(Y=ce.downToggleColor!=null?ce.downToggleColor:i.rollToggleColor),n(ie)&&(ie=ce.waitBackgroundColor!=null?ce.waitBackgroundColor:o),n(Se)&&(Se=ce.rollWaitBackgroundColor!=null?ce.rollWaitBackgroundColor:l),n(se)&&(se=ce.downWaitBackgroundColor!=null?ce.downWaitBackgroundColor:l),n(me)&&(me=ce.waitColor!=null?ce.waitColor:i.color),n(j)&&(j=ce.rollWaitColor!=null?ce.rollWaitColor:i.rollColor),n(_e)&&(_e=ce.downWaitColor!=null?ce.downWaitColor:j);var Ae=this;this.mouseChildren=!1,this.cur("pointer"),Ae.focus=!1,Ae.rolled=!1;var Le=v(Fe);n(b)&&(b=ce.backing!=null?ce.backing.clone():null),n(b)?Ae.backing=new e.Rectangle(t,r,o,null,null,_,P,null,null,!1).centerReg(null,null,!1):Ae.backing=b,Ae.rollBacking=n(E)?ce.rollBacking!=null?ce.rollBacking.clone():null:E,Ae.downBacking=n(R)?ce.downBacking!=null?ce.downBacking.clone():null:R,Ae.waitBacking=n(Re)?ce.waitBacking!=null?ce.waitBacking.clone():null:Re,Ae.rollWaitBacking=n(de)?ce.rollWaitBacking!=null?ce.rollWaitBacking.clone():null:de,Ae.downWaitBacking=n(Pe)?ce.downWaitBacking!=null?ce.downWaitBacking.clone():null:Pe,Ae.toggleBacking=n(xe)?ce.toggleBacking!=null?ce.toggleBacking.clone():null:xe,Ae.rollToggleBacking=n(G)?ce.rollToggleBacking!=null?ce.rollToggleBacking.clone():null:G,Ae.downToggleBacking=n(Z)?ce.downToggleBacking!=null?ce.downToggleBacking.clone():null:Z;var De=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],ft,mt,Ze;for(Ze=0;Ze<De.length;Ze++)ft=De[Ze],mt=Ae[ft],mt&&(mt.type=="Pattern"?mt=dt(ft,mt):F!=-1&&K>0&&(mt.shadow=new je.Shadow(F,3,3,K)),mt.x=t/2,mt.y=r/2);Ae.addChild(Ae.backing),x&&(Ae.border=new e.Rectangle(t,r,"rgba(0,0,0,0)",k,x,_,P,null,null,!1),Ae.addChild(Ae.border));function dt(kt,Bt){if(Ae[kt]=new e.Container(t,r,null,null,!1).centerReg(null,null,!1),F!=-1&&K>0){var Wt=new e.Rectangle(t-2,r-2,"#666",null,null,_,null,null,null,!1).center(Ae[kt]);Wt.shadow=new je.Shadow(F,3,3,K)}var Zt=Ae[kt].mask=new e.Rectangle(t,r,kt.indexOf("roll")>=0?l:o,null,null,_,null,null,null,!1).addTo(Ae[kt]);return Bt.centerReg(Zt),Bt.setMask(Zt.shape),Ae[kt].pattern=Bt,Ae[kt]}Ae.icon=n(C)?ce.icon!=null?ce.icon.clone():null:C,Ae.rollIcon=n(O)?ce.rollIcon!=null?ce.rollIcon.clone():null:O,Ae.downIcon=n(I)?ce.downIcon!=null?ce.downIcon.clone():null:I,Ae.waitIcon=n(Me)?ce.waitIcon!=null?ce.waitIcon.clone():null:Me,Ae.rollWaitIcon=n(fe)?ce.rollWaitIcon!=null?ce.rollWaitIcon.clone():null:fe,Ae.downWaitIcon=n(ve)?ce.downWaitIcon!=null?ce.downWaitIcon.clone():null:ve,Ae.toggleIcon=n(ge)?ce.toggleIcon!=null?ce.toggleIcon.clone():null:ge,Ae.rollToggleIcon=n(he)?ce.rollToggleIcon!=null?ce.rollToggleIcon.clone():null:he,Ae.downToggleIcon=n(ne)?ce.downToggleIcon!=null?ce.downToggleIcon.clone():null:ne;var Ee=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(Ze=0;Ze<Ee.length;Ze++){var ot=Ee[Ze],Ve=Ae[ot];Ve&&(Ve.x=t/2,Ve.y=r/2)}if(Ae.icon&&Ae.addChild(Ae.icon),Array.isArray(_)||(_=[_,_,_,_]),V>0){var Ye=new je.Shape;Ye.graphics.lf(["rgba(255,255,255,"+V+")","rgba(0,0,0,"+V+")"],[0,1],0,0,0,r-x),Ye.graphics.rc(x/2,x/2,t-x,r-x,_[0],_[1],_[2],_[3]),this.addChild(Ye)}if(D>0){var Ke=new je.Shape;Ke.graphics.f("rgba(255,255,255,"+D+")"),Ke.graphics.rc(x/2,x/2,t-x,(r-x)/2,_[0],_[1],0,0),Ke.graphics.f("rgba(0,0,0,"+D+")"),Ke.graphics.rc(x/2,r/2,t-x,(r-x)/2,0,0,_[2],_[3]),this.addChild(Ke)}var ze,tt;ae>0&&ht();function ht(){tt=new je.Shape,tt.graphics.f("#000").r(-ae,-ae,t+ae*2,r+ae*2),Ae.hitArea=ze=tt}this.addChild(i),i.center(this),i.y+=1,this.label=i,e.pos(i,U=="left"||U=="right"?N:null,Q=="top"||Q=="bottom"?te:null,U=="right",Q=="bottom");var Be=i.color;if(this.toggled=!1,at){var it=i.text,vt=i.color,et=i.rollColor;this.on(ue,function(){Ae.toggled=!Ae.toggled,wt()})}function wt(){Ae.toggled?(n(y)||(Ae.label.text=y===!0?it:y),n(q)||(Ae.label.colorOnly=Be=q),n(A)||(Ae.label.rollColor=A),Ae.rolled?(Ae.rollToggleBacking?Lt("rollToggleBacking"):Ae.toggleBacking&&Lt("toggleBacking"),Ae.rollToggleIcon?Lt("rollToggleIcon"):Ae.toggleIcon&&Lt("toggleIcon"),n(b)&&n(Ae.rollToggleBacking)&&(Ae.backing.color=h)):(Ae.toggleBacking&&Lt("toggleBacking"),Ae.toggleIcon&&Lt("toggleIcon"),n(b)&&(Ae.backing.color=g))):(Ae.label.colorOnly=Be=vt,Ae.label.rollColor=et,Ae.rolled&&Ae.label.showRollColor(!0),Ae.label.text=it,xt()),Ae.stage&&Ae.stage.update()}function xt(){Ae.pressed?(n(b)&&Ae.backing&&!Ae.downBacking&&(Ae.backing.color=f),Ae.downBacking?Lt("downBacking"):Ae.rollBacking?Lt("rollBacking"):Ae.backing&&Lt("backing"),Ae.downIcon?Lt("downIcon"):Ae.rollIcon?Lt("rollIcon"):Ae.icon?Lt("icon"):Lt("icon",null)):Ae.rolled?(n(b)&&Ae.backing&&!Ae.rollBacking&&(Ae.backing.color=l),Ae.rollBacking?Lt("rollBacking"):Ae.backing&&Lt("backing"),Ae.rollIcon?Lt("rollIcon"):Ae.icon?Lt("icon"):Lt("icon",null)):(n(b)&&Ae.backing&&(Ae.backing.color=o),Ae.backing&&Lt("backing"),Ae.icon,Lt("icon"))}this.toggle=function(kt){return at?(n(kt)?Ae.toggled=!Ae.toggled:Ae.toggled=kt,wt(),Ae):(At&&ut("Button() - can't toggle with wait parameters provided"),Ae)};var _t=!1;Ae.waiting=!1;var lt=!1,Dt,Pt,It=Ae.label.color,Vt=Ae.label.rollColor,Gt,jt,sn=this.on("mousedown",function(){_t=!0,Kt()});function Kt(){(!n(Te)||!n(Re)||!n(de))&&!Ae.waiting&&(lt=!0,n(we)&&(we=!0),Ie&&(jt=Ae.stage.on("stagemousedown",function(kt){Ae.hitTestPoint(kt.stageX/e.scaX,kt.stageY/e.scaY)||Ae.clearWait()},null,!0)),setTimeout(function(){Ae.waiting=!0},50),Pt=i.text,n(me)||(Ae.label.colorOnly=Be=me),n(j)||(Ae.label.rollColor=j),Gt=Ae.enabled,!we&&Ae.enabled&&(Ae.enabled=!1),n(Te)||(Ae.label.text=Te),Ae.rolled?(n(b)&&!Ae.rollWaitBacking&&(Ae.backing.color=Se),Ae.rollWaitBacking?Lt("rollWaitBacking"):Ae.waitBacking&&Lt("waitBacking"),Ae.rollWaitIcon?Lt("rollWaitIcon"):Ae.waitIcon&&Lt("waitIcon")):(n(b)&&!Ae.waitBacking&&(Ae.backing.color=ie),Ae.waitBacking&&Lt("waitBacking"),Ae.waitIcon&&Lt("waitIcon")),n(Fe)&&(Fe=Le=="s"?5:5e3),Dt&&Dt.clear(),Dt=e.timeout(Fe,function(){Ae.enabled||(Ae.enabled=Gt),Ae.clearWait(),Ae.dispatchEvent("waited")}),Ae.stage&&Ae.stage.update())}this.wait=Kt,this.clearWait=function(){return Dt&&(jt&&Ae.stage.off("stagemousedown",jt),Dt.clear(),Ae.label.text=Pt,xt(),Ae.label.colorOnly=Be=It,Ae.label.rollColor=Vt,setTimeout(function(){Ae.waiting=!1},55),lt=!1,Ae.stage&&Ae.stage.update()),Ae},this.removeWait=function(){return Ae.clearWait(),Te=null,Ae.waitBacking=null,Ae.rollWaitBacking=null,Ae.off("mousedown",sn),Ae};function Lt(kt,Bt){var Wt;if(kt.indexOf("con")>=0){for(Wt=0;Wt<Ee.length;Wt++){var Zt=Ee[Wt],en=Ae[Zt];Ae.removeChild(en)}Ae[kt]&&Ae.addChildAt(Ae[kt],1)}else{if(!Ae[kt]&&!Bt)return;for(Wt=0;Wt<De.length;Wt++){var Ht=De[Wt],vn=Ae[Ht];Ae.removeChild(vn)}Ae[kt]&&Ae.addChildAt(Ae[kt],0)}}var Qt=!1;this.on("mouseover",function(kt){Ae.stage&&Ae.stage.frame.leftMouseDown&&!bt||rt()});function rt(){Ae.rolled=!0,Qt=!0,lt?(Ae.pressed&&Ae.downWaitBacking?Lt("downWaitBacking"):Ae.pressed&&Ae.downBacking?Lt("downBacking"):Ae.rollWaitBacking?Lt("rollWaitBacking"):Ae.waitBacking?Lt("waitBacking"):Ae.rollBacking?Lt("rollBacking"):Lt("backing"),Ae.pressed&&Ae.downWaitIcon?Lt("downWaitIcon"):Ae.rollWaitIcon?Lt("rollWaitIcon"):Ae.waitIcon?Lt("waitIcon"):Ae.rollIcon?Lt("rollIcon"):Lt("icon",!0)):at&&Ae.toggled?(Ae.pressed&&Ae.downToggleBacking?Lt("downToggleBacking"):Ae.pressed&&Ae.downBacking?Lt("downBacking"):Ae.rollToggleBacking?Lt("rollToggleBacking"):Ae.toggleBacking?Lt("toggleBacking"):Ae.rollBacking?Lt("rollBacking"):Lt("backing"),Ae.pressed&&Ae.downToggleIcon?Lt("downToggleIcon"):Ae.rollToggleIcon?Lt("rollToggleIcon"):Ae.toggleIcon?Lt("toggleIcon"):Ae.rollIcon?Lt("rollIcon"):Lt("icon",!0)):(Ae.pressed&&Ae.downBacking?Lt("downBacking"):Ae.rollBacking?Lt("rollBacking"):Lt("backing"),Ae.pressed&&Ae.downIcon?Lt("downIcon"):Ae.rollIcon?Lt("rollIcon"):Lt("icon",!0)),Ae.pressed?n(b)&&Ae.backing?Ae.backing.color=f:b&&!n(b.mask)&&Ae.backing&&(Ae.backing.mask.color=f):n(b)&&Ae.backing?Ae.backing.color=l:b&&!n(b.mask)&&Ae.backing&&(Ae.backing.mask.color=l),Ae.border&&(Ae.border.borderColor=Ae.pressed?S:T),Ae.pressed?Ae.label.colorOnly=w:Ae.label.showRollColor?Ae.label.showRollColor():Ae.label.colorOnly=Be,Ae.stage&&Ae.stage.update()}var bt=!1;this.on("mousedown",function(){Ae.pressed=bt=!0,rt(),Ae.rolled}),this.on("pressup",function(){Ae.pressed=bt=_t=!1,Qt?rt():Ae.rollPersist&&Mt(),le.M&&Rt()}),this.on("pressmove",function(){var kt=Ae.stage?Ae.stage.frame:le.zdf,Bt=Ae.hitTestPoint(kt.mouseX,kt.mouseY);bt&&!Bt?(Rt(),bt=!1):!bt&&Bt&&(rt(),bt=!0)}),this.on("mouseout",Rt);function Rt(){Qt=!1,Ae.rollPersist&&_t||Mt()}function Mt(){Ae.rolled=!1,lt||Ae.waiting?(n(b)&&Ae.backing&&n(Ae.waitBacking)&&(Ae.backing.color=n(ie)?o:ie),Ae.waitBacking?Lt("waitBacking"):Ae.backing&&Lt("backing"),Ae.waitIcon?Lt("waitIcon"):Ae.icon?Lt("icon"):Lt("icon",null)):Ae.toggled&&at?(n(b)&&Ae.backing&&n(Ae.toggleBacking)&&(Ae.backing.color=g),Ae.toggleBacking?Lt("toggleBacking"):Ae.backing&&Lt("backing"),Ae.toggleIcon?Lt("toggleIcon"):Ae.icon?Lt("icon"):Lt("icon",null)):(n(b)&&Ae.backing?Ae.backing.color=o:b&&!n(b.mask)&&Ae.backing&&(Ae.backing.mask.color=o),Ae.backing&&Lt("backing"),Ae.icon?Lt("icon"):Lt("icon",null)),Ae.border&&(Ae.border.borderColor=k),Ae.label.colorOnly=Be,Ae.label.showRollColor&&Ae.label.showRollColor(!1),Ae.stage&&Ae.stage.update()}Ae.removeRoll=Mt,Ae.rollBacking&&Ae.rollBacking.removeFrom(),Object.defineProperty(Ae,"text",{get:function(){var kt=i.text==" "?"":i.text;return kt},set:function(kt){i.text=kt,it&&(it=kt),i.center(this),i.y+=1,e.pos(i,U=="left"||U=="right"?N:null,Q=="top"||Q=="bottom"?te:null,U=="right",Q=="bottom")}}),Object.defineProperty(Ae,"color",{get:function(){return d},set:function(kt){d=kt,vt&&(vt=d),Ae.label&&!n(Ae.label.color)&&(Ae.label.color=Be=d),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Ae.stage&&Ae.stage.update()}}),Object.defineProperty(Ae,"rollColor",{get:function(){return p},set:function(kt){p=kt,et&&(et=p),Ae.label&&(Ae.label.rollColor=p)}}),Object.defineProperty(Ae,"downColor",{get:function(){return w},set:function(kt){w=kt,originalDownColor&&(originalDownColor=w),Ae.label&&(Ae.label.downColor=w)}}),Object.defineProperty(Ae,"backgroundColor",{get:function(){return o},set:function(kt){o=kt,Ae.backing.color?Ae.backing.color=o:Ae.backing.mask&&(Ae.backing.mask.color=o),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Ae.stage&&Ae.stage.update()}}),Object.defineProperty(Ae,"rollBackgroundColor",{get:function(){return l},set:function(kt){l=kt,Ae.rollBacking&&Ae.rollBacking.color?Ae.rollBacking.color=l:Ae.rollBacking&&Ae.rollBacking.mask&&(Ae.rollBacking.mask.color=l)}}),Object.defineProperty(Ae,"toggleBackgroundColor",{get:function(){return g},set:function(kt){g=kt,Ae.toggleBacking&&Ae.toggleBacking.color?Ae.toggleBacking.color=g:Ae.toggleBacking&&Ae.toggleBacking.mask&&(Ae.toggleBacking.mask.color=g)}}),Object.defineProperty(Ae,"rollToggleBackgroundColor",{get:function(){return h},set:function(kt){h=kt,Ae.rollToggleBacking&&Ae.rollToggleBacking.color?Ae.rollToggleBacking.color=h:Ae.rollToggleBacking&&Ae.rollToggleBacking.mask&&(Ae.rollToggleBacking.mask.color=h)}}),Object.defineProperty(Ae,"downBackgroundColor",{get:function(){return f},set:function(kt){f=kt,Ae.downBacking&&Ae.downBacking.color?Ae.downBacking.color=f:Ae.downBacking&&Ae.downBacking.mask&&(Ae.downBacking.mask.color=f)}}),Object.defineProperty(Ae,"borderColor",{get:function(){return k},set:function(kt){k=kt,Ae.rolled||(Ae.backing&&Ae.backing.borderColor&&(Ae.backing.borderColor=kt),Ae.border&&(Ae.border.borderColor=kt))}}),Object.defineProperty(Ae,"rollBorderColor",{get:function(){return T},set:function(kt){T=kt,Ae.rolled&&(Ae.backing&&Ae.backing.borderColor&&(Ae.backing.borderColor=kt),Ae.border&&(Ae.border.borderColor=kt))}}),Object.defineProperty(Ae,"hitPadding",{get:function(){return ae},set:function(kt){ae=kt,ae==0?ze&&(this.hitArea=null):ht()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(Ae,"enabled",{get:function(){return Ae._enabled},set:function(kt){Ae._enabled&&(Ae.startMouseChildren=Ae.mouseChildren),kt?(c(Ae,kt),Ae.mouseChildren=Ae.startMouseChildren):(Mt(),c(Ae,kt));var Bt=i.color;i.color=Be=Bt,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Ae.stage&&Ae.stage.update()}}),this.setBacking=function(kt,Bt){Nt(kt,Bt)},this.setIcon=function(kt,Bt){Nt(kt,Bt)};function Nt(kt,Bt){return n(kt)||(Ae.contains(Ae[kt])&&(Ae.removeChild(Ae[kt]),Bt&&Ae.addChildAt(Bt,kt.indexOf("con")>=0?Ae.numChildren-1:0),Ae.stage&&Ae.stage.update()),Bt?(n(b)&&kt=="backing"&&(b=Bt),Bt.type=="Pattern"&&(Bt=dt(kt,Bt)),Ae[kt]=Bt,Ae[kt].x=t/2,Ae[kt].y=r/2):Ae[kt]=null,xt()),Ae}Xe!==!1&&e.styleTransforms(this,ce),this.clone=function(kt){var Bt=new e.Button(t,r,i.clone(),kt||!e.isPick(nt[0])?o:nt[0],kt||!e.isPick(nt[1])?l:nt[1],kt||!e.isPick(nt[2])?f:nt[2],kt||!e.isPick(nt[3])?d:nt[3],kt||!e.isPick(nt[4])?p:nt[4],kt||!e.isPick(nt[5])?w:nt[5],We,st,T,S,n(b)?null:Ae.backing.clone(),n(E)?null:Ae.rollBacking.clone(),n(R)?null:Ae.downBacking.clone(),n(C)?null:C.clone(),n(O)?null:O.clone(),n(I)?null:I.clone(),_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,n(xe)?null:xe.clone(),n(G)?null:G.clone(),n(Z)?null:Z.clone(),n(ge)?null:ge.clone(),n(he)?null:he.clone(),n(ne)?null:ne.clone(),ue,Te,Fe,ie,Se,se,me,j,_e,n(Re)?null:Re.clone(),n(de)?null:de.clone(),n(Pe)?null:Pe.clone(),n(Me)?null:Me.clone(),n(fe)?null:fe.clone(),n(ve)?null:ve.clone(),Ie,we,Xe,this.group,Ge);return Ae.cloneProps(Bt)},this.doDispose=function(kt,Bt,Wt){return Ae.icon&&Ae.icon.dispose(),Ae.rollIcon&&Ae.rollIcon.dispose(),Ae.downIcon&&Ae.downIcon.dispose(),Ae.waitIcon&&Ae.waitIcon.dispose(),Ae.rollWaitIcon&&Ae.rollWaitIcon.dispose(),Ae.downWaitIcon&&Ae.downWaitIcon.dispose(),Ae.toggleIcon&&Ae.toggleIcon.dispose(),Ae.rollToggleIcon&&Ae.rollToggleIcon.dispose(),Ae.downToggleIcon&&Ae.downToggleIcon.dispose(),Ae.icon=Ae.rollIcon=Ae.downIcon=Ae.waitIcon=Ae.rollWaitIcon=Ae.downWaitIcon=Ae.toggleIcon=Ae.rollToggleIcon=Ae.downToggleIcon=null,Wt||this.zimContainer_dispose(!0),!0}},e.extend(e.Button,e.Container,["clone","dispose"],"zimContainer",!1),e.Button.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.CheckBox=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R){var C="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",O;if(O=yt(e.CheckBox,arguments,C,this))return O;qe("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=E;var I=b===!1?{}:e.getStyle(this.type,this.group,R);n(t)&&(t=I.size!=null?I.size:60),n(r)&&(r=I.label!=null?I.label:null),n(i)&&(i=I.startChecked!=null?I.startChecked:!1),n(o)&&(o=I.color!=null?I.color:e.darker),n(l)&&(l=I.backgroundColor!=null?I.backgroundColor:e.white.toAlpha(.8)),n(f)&&(f=I.borderColor!=null?I.borderColor:e.darker),n(d)&&(d=I.borderWidth!=null?I.borderWidth:t/10),f<0||d<0?f=d=null:f!=null&&d==null&&(d=t/10),n(p)&&(p=I.corner!=null?I.corner:0),n(w)&&(w=I.margin!=null?I.margin:t/5),k!="box"&&k!="square"&&k!="x"&&(k=I.indicatorType!=null?I.indicatorType:"check"),n(x)&&(x=I.indicatorColor!=null?I.indicatorColor:d>0?f:e.black),this.setBounds(-w,-w,t+w*2,t+w*2),n(T)&&(T=I.tap!=null?I.tap:!1),n(S)&&(S=I.rtl!=null?I.rtl:le.DIR=="rtl");var _=this;this.cur("pointer");var P=F(r,i);this.veeObj={label:P[0],startChecked:P[1]};function F(){return arguments}r=e.Pick.choose(r),i=e.Pick.choose(i);var K=i;(typeof r=="string"||typeof r=="number")&&(r=new e.Label({text:r,size:t*5/6,color:o,valign:"center",align:S?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:b,group:this.group}));var V=this.box=new e.Rectangle(t,t,l,null,null,p),D=this.box2=new e.Rectangle(t*5/7,t*5/7,"rgba(0,0,0,0)",f,d,p);D.x=t/7,D.y=t/7,this.addChild(V,D);var U=t;r&&(r.center(_),this.label=r,S?(r.x=-w,this.setBounds(-r.width-w*2,-w,t+w*3+r.getBounds().width,Math.max(t+w*2,r.getBounds().height)),U=t+r.width+w,this.regX=t):(r.x=_.getBounds().width,this.setBounds(-w,-w,t+w*4+r.getBounds().width,Math.max(t+w*2,r.getBounds().height)),U=r.x+r.width));var Q=new e.Shape({style:!1}),J=Q.graphics;J.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,U+w*2,this.getBounds().height),this.hitArea=Q;var N=new e.Shape({style:!1}),te=N.graphics;k=="check"?te.f(x).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):k=="box"||k=="square"?te.f(x).dr(-35,-35,70,70):te.f(x).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var ae=95;N.setBounds(-ae/2,-ae/2,ae,ae);var ee=t/(ae+66);N.scaleX=N.scaleY=ee,N.alpha=.9,N.x=t/2,N.y=t/2,K&&this.addChild(N),T?this.tap(pe):this.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",pe),Object.defineProperty(_,"checked",{get:function(){return K},set:function($){_.setChecked($)}}),this.toggle=function($){n($)&&($=!K),_.setChecked($)},Object.defineProperty(_,"toggled",{get:function(){return K},set:function($){_.setChecked($)}}),Object.defineProperty(_,"text",{get:function(){return r?r.text:null},set:function($){r&&(r.text=$,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&_.stage&&_.stage.update())}}),Object.defineProperty(N,"indicatorColor",{get:function(){return x},set:function($){K&&_.removeChild(N),N=new je.Shape,te=N.graphics,x=$,te.f(x).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),N.scaleX=N.scaleY=ee,N.alpha=.9,N.x=t/2,N.y=t/2,K&&_.addChild(N),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&_.stage&&_.stage.update()}}),Object.defineProperty(_,"indicator",{get:function(){return N},set:function(){ut("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(_,"enabled",{get:function(){return _._enabled},set:function($){c(_,$)}});function pe(){K=!K,_.setChecked(K),_.dispatchEvent("change")}this.setChecked=function($){return n($)&&($=!0),K=$,K?_.addChild(N):_.removeChild(N),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&_.stage&&_.stage.update(),_},b!==!1&&e.styleTransforms(this,I),this.clone=function($){return _.cloneProps(new e.CheckBox(t,$||!e.isPick(P[0])?r?r.clone():null:P[0],$||!e.isPick(P[1])?i:P[1],o,l,f,d,p,w,k,x,T,S,b,this.group,R))}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R){var C="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, rtl, style, group, inherit",O;if(O=yt(e.RadioButtons,arguments,C,this))return O;qe("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=E;var I=b===!1?{}:e.getStyle(this.type,this.group,R);n(t)&&(t=I.size!=null?I.size:60),t=Math.max(5,t),n(r)&&(r=I.buttons!=null?I.buttons:["A","B","C"]),n(i)&&(i=I.vertical!=null?I.vertical:!0),n(o)&&(o=I.color!=null?I.color:e.darker),n(l)&&(l=I.backgroundColor!=null?I.backgroundColor:"rgba(255,255,255,.8)"),n(f)&&(f=I.borderColor!=null?I.borderColor:e.darker),n(d)&&(d=I.borderWidth!=null?I.borderWidth:t/9),f<0||d<0?f=d=null:f!=null&&d==null&&(d=t/10),n(p)&&(p=i?I.spacing!=null?I.spacing:t*.2:I.spacing!=null?I.spacing:t),n(w)&&(w=I.margin!=null?I.margin:t/5),n(k)&&(k=I.always!=null?I.always:!1),n(x)&&(x=I.indicatorColor!=null?I.indicatorColor:d>0?f:e.black),n(S)&&(S=I.rtl!=null?I.rtl:le.DIR=="rtl");var _=this;this.cur("pointer"),this.labels=[],this.indicators=[];var P=0,F;if(typeof r=="string"){var K=r;r=[];for(var V=0;V<K.length;V++)r.push({label:K[V]})}var D=new e.Container({style:!1});this.addChild(D);function U(ae){var ee=D.getChildIndex(ae.target);k&&_.selectedIndex==ee||(_.setSelected(ee),_.dispatchEvent("change"))}N();for(var Q,J=0;J<D.numChildren;J++)Q=D.getChildAt(J),Q.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",U);function N(){var ae,ee=!1,pe;for(pe=r.length-1;pe>=0;pe--)ae=r[pe],ae.selected&&ae.selected===!0&&(ee?ae.selected="false":(ee=!0,_.id=ae.id));D.removeAllChildren(),_.buttons=[];var $,X=0;for(pe=0;pe<r.length;pe++){if(ae=r[pe],typeof ae=="string"||typeof ae=="number"){var y={selected:!1,label:new e.Label({text:ae,size:t*5/6,color:I.color!=null?I.color:o,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:b,group:_.group})};ae=y}(ae.label&&typeof ae.label=="string"||typeof ae.label=="number")&&(ae.label=new e.Label({text:ae.label,size:I.size!=null?I.size:t*5/6,color:I.color!=null?I.color:o,valign:"center",style:b})),_.labels.push(ae.label),ae.index=pe,r[pe]=ae,$=te(ae.selected,ae.label),$.type="RadioButton",$.obj=ae,ae.selected&&(F=$.obj),D.addChild($),i?($.y=X,X+=$.getBounds().height+p):($.x=X,X+=$.getBounds().width+p)}}function te(ae,ee){var pe=new e.Container({style:!1});_.buttons.push(pe),pe.mouseChildren=!1,pe.setBounds(-w,-w,t+w*2,t+w*2);var $=new e.Shape({style:!1}),X=$.graphics;X.f(l).dc(t/2,t/2,t/1.85),X.s(f).ss(d).dc(t/2,t/2,t/2-t/2/5),pe.addChild($);var y=pe.check=new e.Circle(t/5.2,x,null,null,null,null,null,null,!1);_.indicators.push(y),y.mouseEnabled=!1,y.alpha=.95,y.regX=y.regY=-t/2;var g=t;ee&&(P==0&&(P=ee.width),pe.addChild(ee),ee.y=t/2,pe.text=ee.text,S?(ee.x=-ee.width-w,pe.setBounds(-ee.width-w,-w,t+w*2+ee.getBounds().width,Math.max(t+w*2,ee.getBounds().height)),g=ee.width+w+t):(ee.x=pe.getBounds().width,pe.setBounds(-w,-w,t+w*2+ee.getBounds().width,Math.max(t+w*2,ee.getBounds().height)),g=ee.x+ee.width)),ae&&(pe.addChild(y),_.label=ee,_.label&&(_.text=ee.text));var h=new e.Shape({style:!1});return X=h.graphics,X.f("rgba(0,0,0,.01)").r(pe.getBounds().x,pe.getBounds().y,g+w*2,pe.getBounds().height),pe.hitArea=h,pe}this.getBounds()||this.setBounds(0,0,t,t),S?(this.setBounds(-w*2-P,-w,this.getBounds().width+w*2,this.getBounds().height),this.regX=i?t+w:this.getBounds().width-P-w*3):this.setBounds(-w,-w,this.getBounds().width+w*2,this.getBounds().height),this.setSelected=function(ae){if(n(ae)&&(ae=-1),!(ae!=-1&&!D.getChildAt(ae))){for(var ee,pe=0;pe<D.numChildren;pe++)ee=D.getChildAt(pe),ee.removeChild(ee.check);if(ae>=0){ee=D.getChildAt(ae);var $=-2;F&&($=F.index),F=ee.obj}return ae==-1||$==F.index?(F=null,_.id=null,_.label=null,_.text=""):(ee.addChild(ee.check),_.id=F.id,_.label=F.label,_.label&&(_.text=_.label.text)),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&_.stage&&_.stage.update(),_}},Object.defineProperty(_,"selected",{get:function(){return F},set:function(){ut("ZIM RadioButton - selected is read only")}}),Object.defineProperty(_,"selectedIndex",{get:function(){return F?F.index:-1},set:function(ae){var ee=ae;_.selectedIndex!=ae&&_.setSelected(ee)}}),this._enabled=!0,Object.defineProperty(_,"enabled",{get:function(){return _._enabled},set:function(ae){c(_,ae)}}),n(T)&&(T=I.selectedIndex!=null?I.selectedIndex:0),_.selectedIndex=T,e.styleTransforms(this,I),this.clone=function(){for(var ae=e.copy(r),ee=0;ee<ae.length;ee++)ae[ee].label=ae[ee].label.clone();return _.cloneProps(new e.RadioButtons(t,ae,i,o,l,f,d,p,w,k,x,T,S,b,this.group,R))}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Toggle=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F){var K="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",V;if(V=yt(e.Toggle,arguments,K,this))return V;qe("57.5"),this.group=P;var D=_===!1?{}:e.getStyle("Toggle",this.group,F);n(t)&&(t=D.width!=null?D.width:80),n(r)&&(r=D.height!=null?D.height:50),this.zimContainer_constructor(t,r,null,null,!1),this.type="Toggle",n(l)&&(l=D.backgroundColor!=null?D.backgroundColor:e.purple),n(f)&&(f=D.margin!=null?D.margin:10),n(d)&&(d=D.indicatorType!=null?D.indicatorType:"circle"),n(p)&&(p=D.indicatorColor!=null?D.indicatorColor:e.white),n(k)&&(k=D.toggleBackgroundColor!=null?D.toggleBackgroundColor:l.lighten(.3)),n(x)&&(x=D.color!=null?D.color:e.darker),n(T)&&(T=D.borderColor!=null?D.borderColor:null),n(S)&&(S=D.borderWidth!=null?D.borderWidth:null),T<0||S<0?T=S=null:T!=null&&S==null&&(S=1),n(b)&&(b=D.corner!=null?D.corner:d!="circle"?0:25),n(E)&&(E=D.indicatorCorner!=null?D.indicatorCorner:0),n(R)&&(R=D.shadowColor!=null?D.shadowColor:"rgba(0,0,0,.3)"),n(C)&&(C=D.shadowBlur!=null?D.shadowBlur:14),n(o)&&(o=D.startToggled!=null?D.startToggled:!1);var U=v(O);n(O)&&(O=D.time!=null?D.time:U=="s"?.1:100),n(i)&&(i=D.label!=null?D.label:null),n(I)&&(I=D.labelLeft!=null?D.labelLeft:null);var Q=this;Q.cur("pointer"),(typeof i=="string"||typeof i=="number")&&(i=this.label=new e.Label({text:i,size:D.size||r*5/6,color:x,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(typeof I=="string"||typeof I=="number")&&(I=this.labelLeft=new e.Label({text:I,size:D.size||r*5/6,color:x,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new e.Rectangle(t,r,l,T,S,b).addTo(this),d=="rectangle"||d=="square"?this.indicator=new e.Rectangle(r*.65,r*.65,p,null,null,E).center(this.background).pos(r*.2,null,o):this.indicator=new e.Circle(r*.35,p).center(this.background).pos(r*.175,null,o);var J=o;Q.background.color=J?k:l,R!=-1&&C>0&&(this.background.shadow=new je.Shadow(R,3,3,C)),i&&(this.addChild(i),i.x=t+2+f+S,i.y=r/2,this.label=i,this.setBounds(-f,-f,t+f*3+S+i.getBounds().width,Math.max(r+f*2,i.getBounds().height))),I&&(this.addChild(I),I.x=0,Q.background.x+=I.width+3+f+S,Q.label.x+=I.width+3+f+S,I.y=r/2,this.labelLeft=I,this.setBounds(-f,-f,Q.getBounds().width+I.width+3+f+S,Q.getBounds().height)),this.expand(e.mobile()?20:10),this.tap(function(ae){if(I){var ee=Q.localToGlobal(I.width+3+f+S+t/2,0);if(ae.stageX/e.scaX<ee.x-t/2&&!J||ae.stageX/e.scaX>=ee.x+t/2&&J)return}J=!J,te(),Q.dispatchEvent("change")},e.mobile()?20:10);var N=new e.Swipe(this,20,U=="s"?.2:200);N.on("swipe",function(ae){if(ae.swipeX!=0){{if(ae.swipeX==1&&J)return;if(ae.swipeX==-1&&!J)return}J=!J,te(),Q.dispatchEvent("change")}});function te(ae){var ee=Q.indicator.x,pe=O;if(ae===!0&&(pe=0),d=="rectangle"||d=="square"?(Q.indicator.pos(r*.2,null,J),O>0&&Q.indicator.animate({props:{x:ee},from:!0,time:pe})):(Q.indicator.pos(r*.175,null,J),O>0&&Q.indicator.animate({props:{x:ee},from:!0,time:pe})),Q.background.color=J?k:l,Q.text=J?Q.label?Q.label.text:"on":Q.labelLeft?Q.labelLeft.text:"off",Q.zimAccessibility){var $="Toggle set to "+(J?Q.label?Q.label.text+".":"on.":Q.labelLeft?Q.labelLeft.text+".":"off.");setTimeout(function(){Q.zimAccessibility.talk($)},50)}}Object.defineProperty(Q,"textLeft",{get:function(){return I?I.text:null},set:function(ae){I&&(I.text=ae,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Q.stage&&Q.stage.update())}}),Q.toggle=function(ae,ee){var pe=J;return n(ae)&&(ae=!0),J=ae,pe!=J&&te(ee),Q},Q.text=J?Q.label?Q.label.text:"on":Q.labelLeft?Q.labelLeft.text:"off",Object.defineProperty(Q,"toggled",{get:function(){return J},set:function(ae){Q.toggle(ae)}}),this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(ae){c(Q,ae)}}),_!==!1&&e.styleTransforms(this,D),this.clone=function(){return Q.cloneProps(new e.Toggle(t,r,i?i.clone():"",o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I?I.clone():"",_,this.group,F))}},e.extend(e.Toggle,e.Container,"clone","zimContainer",!1),e.Tip=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z){var ge="text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",he;if(he=yt(e.Tip,arguments,ge,this))return he;qe("57.6"),this.group=G;var ne=xe===!1?{}:e.getStyle("Tip",this.group,Z);n(t)&&(t=ne.text!=null?ne.text:"Here's a tip!"),n(o)&&(o=ne.margin!=null?ne.margin:40),n(l)&&(l=ne.marginH!=null?ne.marginH:o),n(f)&&(f=ne.marginV!=null?ne.marginV:o),n(r)&&(r=ne.tipAlign!=null?ne.tipAlign:"right"),n(i)&&(i=ne.tipValign!=null?ne.tipValign:"bottom"),n(d)&&(d=ne.outside!=null?ne.outside:!1),n(D)&&(D=ne.backgroundColor!=null?ne.backgroundColor:e.blue),n(b)&&(b=ne.color!=null?ne.color:e.white),n(J)&&(J=ne.corner!=null?ne.corner:25),n(N)&&(N=ne.backgroundDashed!=null?ne.backgroundDashed:null),n(te)&&(te=ne.padding!=null?ne.padding:10),n(ae)&&(ae=ne.paddingH!=null?ne.paddingH:te),n(ee)&&(ee=ne.paddingV!=null?ne.paddingV:te),(n(R)||R=="ignore")&&(R=ne.shadowColor!=null&&R!="ignore"?ne.shadowColor:"rgba(0,0,0,.3)"),(n(C)||C=="ignore")&&(C=ne.shadowBlur!=null&&C!="ignore"?ne.shadowBlur:1),n(w)&&(w=ne.delay!=null?ne.delay:0);var ue=v(k);n(k)&&(k=ne.time!=null?ne.time:ue=="s"?2:2e3),n(x)&&(x=ne.mouseClose!=null?ne.mouseClose:!0),this.zimLabel_constructor(t,T,S,b,E,null,null,O,I,L,q,A,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,Y,xe,G,e.copy(ne)),this.type="Tip",d&&(l=-l,f=-f);var Te=this;Te.tipAlign=r,Te.tipValign=i,this.background.sha(R,3,5,C),this.show=function(Fe,ie){var Se=v(ie);if(n(Fe)&&(Fe=w),n(ie)&&(ie=k),n(p))if(le.zdf)p=le.zdf.stage;else return Te;else if(p.getBounds){if(n(p.stage))return ut("zim display - Waiter(): The container must have a stage property"),Te}else return ut("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),Te;Fe>0?Te.showID=e.timeout(Fe,se):se();function se(){var me;p.boundsToGlobal?me=p.boundsToGlobal():me=p.getBounds();var j=new e.Container(me.x,me.y,me.width,me.height);j.zimTemp=!0,j.loc(0,0,p.stage),Te.pos(l,f,Te.tipAlign,Te.tipValign,j),d&&(Te.tipAlign=="right"?Te.x+=Te.width:Te.tipAlign=="left"&&(Te.x-=Te.width),Te.tipValign=="bottom"?Te.y+=Te.height:Te.tipValign=="top"&&(Te.y-=Te.height)),Te.addTo(j.stage),j.zimTemp&&j.removeFrom&&(j.removeFrom(),j=null),j=Te.stage,Te.timeoutID&&Te.timeoutID.clear(),Te.timeoutID=e.timeout(ie,function(){Te.hide(),j.stage.update()}),x&&(Te.upID&&j.stage.off("stagemouseup",Te.upID),Te.upID=j.stage.on("stagemouseup",function(){Te.hide(),j.stage&&j.stage.update()})),j.stage&&j.stage.update()}return Te},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&p.stage&&p.stage.off("stagemouseup",this.upID),Te},this.clear=function(){Te.showID&&Te.showID.clear(),Te.hide()},this.dispose=function(Fe,ie,Se){Te.upID&&Te.stage&&Te.stage.off("stagemouseup",Te.upID),Se||this.zimLabel_dispose(!0)},xe!==!1&&e.styleTransforms(this,ne),this.clone=function(){return Te.cloneProps(new e.Tip(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,Y,xe,this.group,Z))}},e.extend(e.Tip,e.Label,["dispose","clone"],"zimLabel",!1),e.Pane=function(q,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te){var ae="content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, style, group, inherit";if(q&&!q.header&&!q.message&&!q.display&&!q.buttons){var ee;if(ee=yt(e.Pane,arguments,ae,this))return ee}qe("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var pe="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(n(O))if(le.zdf)O=le.zdf.stage;else{ut(pe);return}else if(O.getBounds){if(n(O.getStage)){ut("zim display - Pane(): The container must have a stage property");return}}else{ut(pe);return}this.group=N;var $=J===!1?{}:e.getStyle(this.type,this.group,te);n(o)&&(o=$.width!=null?$.width:"auto"),n(l)&&(l=$.height!=null?$.height:"auto"),n(q)&&(q=$.content!=null?$.content:" "),(typeof q=="string"||typeof q=="number")&&(q=new e.Label({text:q,size:$.size!=null?$.size:40,align:$.align!=null?$.align:"center",valign:$.valign!=null?$.valign:"center",color:$.color!=null?$.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var X=this.content=q;n(r)&&(r=$.backgroundColor!=null?$.backgroundColor:e.white),n(f)&&(f=$.draggable!=null?$.draggable:!1),n(d)&&(d=$.resets!=null?$.resets:!0),n(p)&&(p=$.modal!=null?$.modal:!0),n(w)&&(w=$.corner!=null?$.corner:20),n(I)&&(I=$.titleBar!=null?$.titleBar:null),n(_)&&(_=$.titleBarColor!=null?$.titleBarColor:null),n(P)&&(P=$.titleBarBackgroundColor!=null?$.titleBarBackgroundColor:null),n(F)&&(F=$.titleBarHeight!=null?$.titleBarHeight:null),n(k)&&(k=$.backdropColor!=null?$.backdropColor:"rgba(0,0,0,.2)"),n(x)&&(x=$.shadowColor!=null?$.shadowColor:"rgba(0,0,0,.3)"),n(T)&&(T=$.shadowBlur!=null?$.shadowBlur:20),n(S)&&(S=$.center!=null?$.center:!0),n(b)&&(b=$.displayClose!=null?$.displayClose:!0),f&&(b=!1),n(E)&&(E=$.backdropClose!=null?$.backdropClose:!0),n(C)&&(C=$.fadeTime!=null?$.fadeTime:0),n(K)&&(K=$.close!=null?$.close:!1),n(V)&&(V=$.closeColor!=null?$.closeColor:e.grey),n(D)&&(D=$.autoPadding!=null?$.autoPadding:70),n(U)&&(U=$.autoPaddingH!=null?$.autoPaddingH:D),n(Q)&&(Q=$.autoPaddingV!=null?$.autoPaddingV:D);var y=this.backdrop=new e.Shape({style:!1}),g=y.graphics;g.f(k),g.drawRect(-5e3,-5e3,1e4,1e4);var h=this;if(this.add=function(se,me,j,_e){var Re="obj, index, center, replace",de;return(de=yt(h.add,arguments,Re,h))?de:(n(j)&&(j=!0),n(_e)&&(_e=!0),typeof se=="string"&&(se=new si(se,null,null,i).noMouse()),_e&&h.contentContainer.removeAllChildren(),j?se.center(h.contentContainer,me):se.addTo(h.contentContainer,me),h)},X){var L=e.makeContent(X,o,e.dark),A=["header","message","text","display","buttons","config"];A.forEach(function(me){L[me]&&(h[me]=L[me])}),h.label=h.message,o=="auto"&&(o=L.width+U*2),l=="auto"&&(l=L.height+Q*2)}var q=h.contentContainer=new e.Container(o,l);L&&h.add(L,null,!0),this.setBounds(-o/2,-l/2,o,l);var A=["header","message","text","display","buttons","config"];q&&A.forEach(function(se){q[se]&&(h[se]=q[se])}),h.label=h.message,h.container=O,y.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",E?xe:function(se){se.stopImmediatePropagation()});var Y=new e.Dictionary(!0);function xe(se){h.dispatchEvent("closing"),setTimeout(function(){Te(),h.dispatchEvent("close")},10),se.stopImmediatePropagation()}y.on("mousedown",function(se){se.stopImmediatePropagation()}),this.addChild(y),p||y.noMouse();var G;if(n(R))G=this.backing=new e.Rectangle({width:o,height:l,color:r,corner:w,style:!1});else{if(R.type=="Pattern"){var Z=R;G=new e.Rectangle(o,l,r,null,null,w,null,null,null,!1),Z.centerReg(G),Z.setMask(G.shape)}else G=R;h.display=h.backing=G}if(b&&(G.cur("pointer"),G.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",xe)),x!=-1&&T>0&&(G.shadow=new je.Shadow(x,8,8,T)),G.on("click",function(se){se.stopImmediatePropagation()}),this.resetX,this.resetY,f){G.cur("pointer");var ge,he;G.on("mousedown",function(se){isNaN(h.resetX)&&(h.resetX=h.x),isNaN(h.resetY)&&(h.resetY=h.y),ge=se.stageX/e.scaX-h.x,he=se.stageY/e.scaY-h.y,G.cur("pointer")}),G.on("pressmove",function(se){var me=Se(se.stageX/e.scaX-ge,se.stageY/e.scaY-he);h.x=me.x,h.y=me.y;for(var j,_e=0;_e<h.numChildren;_e++)j=h.getChildAt(_e),(j.type=="TextArea"||j.type=="Loader"||j.type=="Tag")&&j.resize();h.stage.update()}),this.on("pressup",function(){G.cur("pointer"),h.stage&&h.stage.update()})}if(G.centerReg(this),q&&q.center(this),!n(I)){typeof I=="string"&&(I=new e.Label(I,null,null,_));var ne=h.titleBarLabel=I;n(F)&&(F=ne.height*1.5),n(_)&&(_=e.black),n(P)&&(P="rgba(0,0,0,.2)"),h.titleBar=I=new e.Container(o,F,null,null,!1).centerReg(h).mov(0,-l/2+F/2),I.mouseEnabled=!1,I.mouseChildren=!1,h.titleBar.backing=new e.Rectangle(o,F,P,null,null,[w*.95,w*.95,0,0],null,null,null,!1).addTo(I),ne.center(I).pos({x:Math.max(w/2,10),reg:!0})}K&&(K=h.close=new e.Shape(-40,-40,80,80,null,!1),K.graphics.f(V).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),I?K.addTo(h).scaleTo(I,null,50).mov(o/2-Math.max(w/2,10)-K.width/2,-l/2+F/2).expand(40):K.addTo(h).sca(.3).mov(o/2-K.width-3,-l/2+K.height).expand(40),K.cur("pointer"),K.expand(),K.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",xe)),Object.defineProperty(h,"text",{get:function(){if(h.message){var se=h.message.text==" "?"":h.message.text;return se}else if(h.content.text){var se=h.content.text==" "?"":h.content.text;return se}},set:function(se){h.message?h.message.text=se:h.content.text&&(h.content.text=se)}}),this._enabled=!0,Object.defineProperty(h,"enabled",{get:function(){return h._enabled},set:function(se){c(h,se)}}),this.hide=function(se,me){return n(se)||(h.closeParams=se),Te(),me&&(h.dispatchEvent("close"),h.dispatchEvent("change")),h},this.on("removed",ue);function ue(){h.toggled=!1;var se,me;for(me=0;me<h.numChildren;me++)if(se=h.getChildAt(me),se.type=="TextArea"||se.type=="Loader"||se.type=="Tag"){var j={obj:se,depth:h.getChildIndex(se)};Y.add(se,j)}for(me=h.numChildren-1;me>=0;me--)se=h.getChildAt(me),(se.type=="TextArea"||se.type=="Loader"||se.type=="Tag")&&h.removeChild(se);if(!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&h.container.stage.update(),d&&(isNaN(h.resetX)||(h.x=h.resetX),isNaN(h.resetY)||(h.y=h.resetY)),h.zimAccessibility){var _e=h.zimAccessibility;_e.resize(h),Fe?Fe.focus():h.zimTabTag.nextSibling.focus(),setTimeout(function(){_e.talk("Pane has been closed.")},50)}}function Te(){C>0?h.animate({obj:{alpha:0},time:C,call:function(){se(),h.dispatchEvent("fadedout")}}):se();function se(){h.container.removeChild(h),h.closeCall&&h.closeCall(h.closeParams),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&h.container.stage.update(),d&&(isNaN(h.resetX)||(h.x=h.resetX),isNaN(h.resetY)||(h.y=h.resetY))}}var Fe;this.show=function(se,me){return n(se)||(h.closeCall=se),n(me)||(h.closeParams=me),S&&isNaN(h.resetX)&&(h.x=h.container.getBounds().width/2,h.y=h.container.getBounds().height/2),h.container.addChild(h),C>0?(h.alpha=0,h.animate({props:{alpha:1},time:C,call:function(){h.dispatchEvent("fadedin")}})):setTimeout(function(){h.container.stage&&h.container.stage.update()},10),h},this.on("added",ie);function ie(){for(var se=0;se<Y.length;se++)h.addChildAt(Y.values[se].obj,Y.values[se].depth);if(h.zimAccessibility){var me=h.zimAccessibility;setTimeout(function(){me.activatedObject&&(Fe=me.activatedObject.zimTabTag)},50),me.resize(h),me.tabIndex=h.zimTabIndex}h.toggled=!0}function Se(se,me){return se=Math.max(o/2,Math.min(h.container.getBounds().width-o/2,se)),me=Math.max(l/2,Math.min(h.container.getBounds().height-l/2,me)),{x:se,y:me}}this.toggle=function(se){return se===!0?h.show():se===!1||h.container.contains(h)?h.hide():h.show(),h},J!==!1&&e.styleTransforms(this,$),this.clone=function(){var se=h.contentContainer.x,me=h.contentContainer.y,j=h.cloneProps(new e.Pane(e.copy(q),r,i,o,l,f,d,p,w,k,x,T,S,b,E,n(R)?null:R.clone(),C,h.container,I,_,P,F,K,V,D,U,Q,J,this.group,te));return j.contentContainer.x=se,j.contentContainer.y=me,j}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Panel=function(t,r,h,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q){var J="width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",N;if(N=yt(e.Panel,arguments,J,this))return N;qe("57.7"),this.group=U;var te=D===!1?{}:e.getStyle("Panel",this.group,Q);n(t)&&(t=te.width!=null?te.width:250),n(r)&&(r=te.height!=null?te.height:300),this.zimContainer_constructor(t,r,null,null,!1),this.type="Panel",n(h)&&(h=te.content!=null?te.content:null);var ae=this.content=h;n(o)&&(o=te.titleBar!=null?te.titleBar:"PANEL"),n(l)&&(l=te.titleBarColor!=null?te.titleBarColor:e.white),n(f)&&(f=te.titleBarBackgroundColor!=null?te.titleBarBackgroundColor:e.grey),n(d)&&(d=te.titleBarHeight!=null?te.titleBarHeight:30),n(p)&&(p=te.backgroundColor!=null?te.backgroundColor:e.lighter),n(w)&&(w=te.borderColor!=null?te.borderColor:e.pewter),n(k)&&(k=te.borderWidth!=null?te.borderWidth:null),w<0||k<0?w=k=null:w!=null&&k==null&&(k=1),n(x)&&(x=te.corner!=null?te.corner:5),n(_)&&(_=te.align!=null?te.align:"left"),n(P)&&(P=te.shadowColor!=null?te.shadowColor:"rgba(0,0,0,.3)"),n(F)&&(F=te.shadowBlur!=null?te.shadowBlur:14),n(K)&&(K=te.draggable!=null?te.draggable:!1),n(V)&&(V=te.boundary!=null?te.boundary:null),n(T)&&(T=te.close!=null?te.close:!1),n(S)&&(S=te.closeColor!=null?te.closeColor:n(l)?e.grey:l),n(b)&&(b=te.next!=null?te.next:e.vee(o)),n(E)&&(E=te.nextColor!=null?te.nextColor:n(l)?e.grey:l),Array.isArray(x)||(x=[x,x,x,x]),n(C)&&(C=te.collapse!=null?te.collapse:!1),n(O)&&(O=te.collapseColor!=null?te.collapseColor:n(l)?e.grey:l),n(I)&&(I=te.collapsed!=null?te.collapsed:!1);var ee=this,pe=this.background=new e.Rectangle(t,r,p,w,k,x).addTo(this);P!=-1&&F>0&&(this.background.shadow=new je.Shadow(P,3,3,F));var $=o,X=e.Pick.choose($),y=e.Pick.choose(l),g=e.Pick.choose(f),h=ee.contentContainer=new e.Container(t,r-d).addTo(ee).mov(0,d);typeof X=="string"&&(X=new e.Label({text:X,color:y,size:te.size!=null?te.size:20,bold:te.bold!=null?te.bold:!1,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var L=ee.titleBarLabel=X;n(g)&&(g="rgba(0,0,0,.2)"),ee.titleBar=o=new e.Container(t,d,null,null,!1).loc(0,0,ee);var q=ee.titleBar.backing=new e.Rectangle(t+k,d,g,null,null,[x[0]*.95,x[1]*.95,0,0],!0,null,null,!1).center(o);if(o&&G(),ee.label=X,ee.text=X.text,T){var A=ee.closeIcon=new e.Shape(-40,-40,80,80,null,!1);A.graphics.f(S).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),o?(A.centerReg(o).scaleTo(o,null,50),A.pos(Math.max(x[1]/2,15),null,!0)):A.addTo(ee).sca(.3).mov(t/2-A.width-3,-r/2+T.height),A.expand(40),A.cur("pointer"),A.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var ne=ee.stage;ee.removeFrom(),ee.dispatchEvent("close"),ne.update()})}if(this.add=function(ne,ue,Te,Fe){var ie="obj, index, center, replace",Se;return(Se=yt(ee.add,arguments,ie,ee))?Se:(Fe&&ee.contentContainer.removeAllChildren(),Te?ne.center(ee.contentContainer,ue):ne.addTo(ee.contentContainer,ue),ee)},ae){var Y=e.makeContent(ae,t),xe=["header","message","text","display","buttons","config"];xe.forEach(function(ne){Y[ne]&&(ee[ne]=Y[ne])}),ee.label=ee.message,ee.add(Y,null,!0)}this.nextPanel=function(ne,ue){var Te=n(ne)||n($.array)?e.Pick.choose($):$.array[ne],Fe=n(ne)||n(l.array)?e.Pick.choose(l):l.array[ne],ie=n(ne)||n(f.array)?e.Pick.choose(f):f.array[ne],Se=n(ne)||n(p.array)?e.Pick.choose(p):p.array[ne],se=n(ne)||n(w.array)?e.Pick.choose(w):w.array[ne];typeof Te=="string"&&(Te=new e.Label({text:Te,color:Fe,size:te.size!=null?te.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),ee.label=Te,ee.text=Te.text,L.removeFrom(),L=ee.titleBarLabel=Te,G(),q.color=ie,ee.background.color=Se,ee.background.borderColor=se,ue&&ee.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ee.stage&&ee.stage.update()};function G(){_=="right"?L.center(o).pos(Math.max(x[0]/2,10),null,!0):_=="center"||_=="middle"?L.center(o):L.center(o).loc(Math.max(x[0]/2,10)),L.mov(0,2)}if(K&&(o.cur("pointer"),o.on("mousedown",function(){ee.drag({rect:V,currentTarget:!0})}),o.on("pressup",function(){ee.noDrag(!1)})),b>0){var Z=ee.nextIcon=new e.Shape(-20,-20,40,40,null,!1);Z.graphics.f(l).p("AiJieIETCeIkTCfg"),Z.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),Z.pos(Math.max(x[1]/2,15),null,!0),A&&Z.mov(-A.width-8),Z.cur("pointer"),Z.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ee.nextPanel(),ee.dispatchEvent("change")})}if(n(R)||(R=ee.extraButton=new e.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand(),R.pos(Math.max(x[1]/2,15),null,!0),A&&R.mov(-A.width-8),Z&&R.mov(-Z.width-8)),C){he=I,ee.collapse=function(ne){if(n(ne)&&(ne=!0),ne==he)return ee;ne?(ge.rot(180),pe.visible=!1,h.visible=!1,he=!0,ee.dispatchEvent("collapse")):(ge.rot(0),pe.visible=!0,h.visible=!0,he=!1,ee.dispatchEvent("expand")),ee.stage&&ee.stage.update()},ee.collapseEvent=ee.titleBar.on("dblclick",function(){ee.collapsed=!ee.collapsed}),n(O)&&(O=e.grey);var ge=ee.collapseIcon=new e.Triangle(90,90,90,e.faint,O,16);ge.centerReg(ee).scaleTo(o,null,41).pos({x:t-Math.max(x[1]/2,15)-ge.width/2-4,y:d/2,reg:!0}).expand(40),R&&ge.mov(-R.width-8),A&&ge.mov(-A.width-8),Z&&ge.mov(-Z.width-8),ge.cur("pointer"),ge.expand();var he=!1;ge.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){he?ee.collapse(!1):ee.collapse(!0)})}ee.overlay=new e.Rectangle(t,r,null,null,null,x).alp(.3),Object.defineProperty(ee,"panelHeight",{get:function(){return ee.background.height},set:function(ne){pe.removeFrom(),pe=this.background=new e.Rectangle(t,ne,p,w,k,x).addTo(this).bot(),P!=-1&&F>0&&(this.background.shadow=new je.Shadow(P,3,3,F)),ee.setBounds(t,ne),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),Object.defineProperty(ee,"collapsed",{get:function(){return he},set:function(ne){ee.collapse&&ee.collapse(ne)}}),this._enabled=!0,Object.defineProperty(ee,"enabled",{get:function(){return ee._enabled},set:function(ne){c(ee,ne),ne?ee.overlay.removeFrom():ee.overlay.addTo(ee),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ee.stage&&ee.stage.update()}}),I&&(I=!1,ee.collapsed=!0),D!==!1&&e.styleTransforms(this,te),this.clone=function(){return ee.cloneProps(new e.Toggle(t,r,o?o.clone():"",l,f,d,p,w,k,x,T,S,b,E,R,C,O,ee.collapsed,_,P,F,K,V,D,this.group,Q))},this.doDispose=function(ne,ue,Te){return C&&this.titleBar.off("dblclick",this.collapseEvent),Te||this.zimContainer_dispose(!0),!0}},e.extend(e.Panel,e.Container,["clone","dispose"],"zimContainer",!1),e.Panel.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Window=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te){var Fe="width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, continuous, style, group, inherit",ie;if(ie=yt(e.Window,arguments,Fe,this))return ie;qe("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=ue;var Se=ne===!1?{}:e.getStyle(this.type,this.group,Te);n(t)&&(t=Se.width!=null?Se.width:300),n(r)&&(r=Se.height!=null?Se.height:200),n(o)&&(o=Se.backgroundColor!=null?Se.backgroundColor:e.dark);var se=l,me=f;n(l)&&(l=Se.borderColor!=null?Se.borderColor:e.silver),n(f)&&(f=Se.borderWidth!=null?Se.borderWidth:1),n(d)&&(d=Se.padding!=null?Se.padding:0),n(p)&&(p=Se.corner!=null?Se.corner:0),n(w)&&(w=Se.swipe!=null?Se.swipe:!0),n(k)&&(k=Se.scrollBarActive!=null?Se.scrollBarActive:!0),n(x)&&(x=Se.scrollBarDrag!=null?Se.scrollBarDrag:!1),n(T)&&(T=Se.scrollBarColor!=null?Se.scrollBarColor:l),n(S)&&(S=Se.scrollBarAlpha!=null?Se.scrollBarAlpha:.3),n(b)&&(b=Se.scrollBarFade!=null?Se.scrollBarFade:!0),n(E)&&(E=Se.scrollBarH!=null?Se.scrollBarH:!0),n(R)&&(R=Se.scrollBarV!=null?Se.scrollBarV:!0),x&&(b=Se.scrollBarFade!=null?Se.scrollBarFade:!1),n(C)&&(C=Se.slide!=null?Se.slide:!0),n(O)&&(O=Se.slideFactor!=null?Se.slideFactor:.9),n(I)&&(I=Se.slideSnap!=null?Se.slideSnap:"vertical"),n(P)&&(P=Se.interactive!=null?Se.interactive:!0),n(F)&&(F=Se.shadowColor!=null?Se.shadowColor:"rgba(0,0,0,.3)"),n(K)&&(K=Se.shadowBlur!=null?Se.shadowBlur:20),n(D)&&(D=Se.paddingV!=null?Se.paddingV:d),n(V)&&(V=Se.paddingH!=null?Se.paddingH:d),n(U)&&(U=Se.scrollWheel!=null?Se.scrollWheel:!0),n(Q)&&(Q=Se.damp!=null?Se.damp:null),n(J)&&(J=Se.titleBar!=null?Se.titleBar:null),n(N)&&(N=Se.titleBarColor!=null?Se.titleBarColor:null),n(te)&&(te=Se.titleBarBackgroundColor!=null?Se.titleBarBackgroundColor:null),n(ae)&&(ae=Se.titleBarHeight!=null?Se.titleBarHeight:null),n(ee)&&(ee=Se.draggable!=null?Se.draggable:null),n(pe)&&(pe=Se.boundary!=null?Se.boundary:null),n($)&&($=Se.onTop!=null?Se.onTop:null),n(X)&&(X=Se.close!=null?Se.close:null),n(y)&&(y=Se.closeColor!=null?Se.closeColor:null),n(g)&&(g=Se.cancelCurrentDrag!=null?Se.cancelCurrentDrag:!1),n(h)&&(h=Se.fullSize!=null?Se.fullSize:null),n(L)&&(L=Se.fullSizeColor!=null?Se.fullSizeColor:null),n(q)&&(q=Se.resizeHandle!=null?Se.resizeHandle:null),n(A)&&(A=Se.collapse!=null?Se.collapse:!1),n(Y)&&(Y=Se.collapseColor!=null?Se.collapseColor:null),n(xe)&&(xe=Se.collapsed!=null?Se.collapsed:!1),n(G)&&(G=Se.optimize!=null?Se.optimize:!0),n(Z)&&(Z=Se.resizeBoundary!=null?Se.resizeBoundary:null),n(ge)&&(ge=Se.resizeVisible!=null?Se.resizeVisible:!1),n(he)&&(he=Se.continuous!=null?Se.continuous:!1),he!="horizontal"&&he!="vertical"&&(he=!1),this.continuous=he,J===!1&&(J=null),n(J)||(n(ae)&&(ae=30),r=r-ae);var j=this;j.optimize=G,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var _e=this.backing=new e.Shape({style:!1});this.addChild(_e);var Re=new je.Shape;Re.type="WindowBacking";var de=Re.graphics;if(this.addChild(Re),i)var Pe=j.content=i;i=this.contentContainer=new e.Container({style:!1}),this.addChild(i),i.mask=Re;var Me;if(!P)var fe=new je.Shape;if(f>0){var ve=new je.Shape;this.addChild(ve)}var Ie=J?0:p,we=0;function Xe(){j.setBounds(0,0,t,r),_e.graphics.c().f(o).rc(0,0,t,r,Ie,Ie,p,p),F!=-1&&K>0&&(_e.shadow=new je.Shadow(F,4,4,K)),f>0&&(p?ve.graphics.c().s(l).ss(f,"square","miter").rc(0,0,t,r,Ie,Ie,p,p):ve.graphics.c().s(l).ss(f,"square","miter").dr(0,0,t,r)),n(mt)||(mt.widthOnly=j.width+f,ft.widthOnly=j.width+f-1,j.setBounds(0,-ae,j.width,r+ae)),Ze&&(J?(Ze.pos({x:t-Math.max(p/2,10)-Ze.width/2,y:ae/2,reg:!0}),ft.widthOnly=Ze.x-15,we=j.width-ft.width):Ze.pos(Math.max(p/2,10)/2,Ze.height/2,!0,!1,j)),ze&&(ze.pos({x:t-Math.max(p/2,10)-ze.width/2,y:ae/2,reg:!0}),Ze&&ze.mov(-Ze.width-10),J&&(ft.widthOnly=ze.x-15),we=j.width-ft.width),Be&&(Be.pos({x:t-Math.max(p/2,10)-Be.width/2,y:ae/2,reg:!0}),Ze&&Be.mov(-Ze.width-10),ze&&Be.mov(-ze.width-10),J&&(ft.widthOnly=Be.x-15),we=j.width-ft.width)}Xe();var ye=this.scrollBar={};if(ye.color=T,ye.size=6,ye.minSize=ye.size*2,ye.spacing=3.5+f/2,ye.margin=0,ye.corner=ye.size/2,ye.showTime=.5,ye.fadeTime=3,k){var Ge=ye.horizontal=new e.Shape({style:!1}),He=Ge.graphics;Ge.alpha=S,this.addChild(Ge),x&&Ge.drag({localBoundary:!0});var Oe=ye.vertical=new e.Shape({style:!1}),ce=Oe.graphics;Oe.alpha=S,this.addChild(Oe),x&&Oe.drag({localBoundary:!0})}var Ue,Qe,Je,nt,gt,We,st,at,Ae,Le=!1;if(this.update=function(){k&&(He.clear(),ce.clear()),gt=k?ye.size+ye.spacing*2:0,We=i.getBounds()?i.getBounds().width:0,st=i.getBounds()?i.getBounds().height:0,Je=E&&We>t-V&&(k||w===!0||w=="auto"||w=="horizontal"),nt=R&&st>r-D&&(k||w===!0||w=="auto"||w=="vertical"),j.scrollXMax=We+V*2-t+(nt?gt+ye.margin:0),j.scrollYMax=st+D*2-r+(Je?gt+ye.margin:0),de.clear();var $e=f/2,Tt=f/2,Xt=t-(nt&&k?ye.size+ye.spacing*2:0)-(nt?0:f),$t=r-(Je&&k?ye.size+ye.spacing*2:0)-(Je?0:f);de.f("rgba(0,0,0,0)").rc($e,Tt,Xt,$t,Ie,Ie,nt&&k?0:Math.max(0,p-f/2),Je&&k?0:Math.max(0,p-f/2)),Re.setBounds(j.getBounds().x,j.getBounds().y,j.getBounds().width,j.getBounds().height),e.expand(Re,0),P||(fe.graphics.c().f("red").dr($e,Tt,Xt,$t),i.hitArea=fe);var cn=Math.max(p,Math.min(ye.corner,ye.spacing)),an=cn+f/2,zt=cn+(nt?gt:0)+f/2,St=cn+f/2,Ft=cn+(Je?gt:0)+f/2,hn,pn;Je&&k&&(hn=Math.max(ye.minSize,(t-an-zt)*(t-an-zt)/(We+V+ye.margin)),He.f(ye.color).rr(0,0,hn,ye.size,ye.corner),Ge.x=an,Ge.y=r-ye.size-ye.spacing,Ue=new e.Proportion(-j.scrollXMax,0,an,t-hn-zt,-1),x&&(Ge.setBounds(0,0,hn,ye.size),pn=new je.Rectangle(an,Ge.y,t-hn-an-zt,0),Ge.dragBoundary(pn),Ge.proportion=new e.Proportion(pn.x,pn.x+pn.width,0,-j.scrollXMax),Ge.off("pressmove",at),at=Ge.on("pressmove",function(){j.dispatchEvent("scrolling"),fe&&(fe.x=-i.x,fe.y=-i.y),i.x=Ge.proportion.convert(Ge.x),It()}))),nt&&k&&(hn=Math.max(ye.minSize,(r-St-Ft)*(r-St-Ft)/(st+D+ye.margin)),ce.f(ye.color).rr(0,0,ye.size,hn,ye.corner),Oe.x=t-ye.size-ye.spacing,Oe.y=St,Qe=new e.Proportion(-j.scrollYMax,0,St,r-hn-Ft,-1),x&&(Oe.setBounds(0,0,ye.size,hn),pn=new je.Rectangle(Oe.x,St,0,r-hn-St-Ft),Oe.dragBoundary(pn),Oe.proportion=new e.Proportion(pn.y,pn.y+pn.height,0,-j.scrollYMax),Oe.off("pressmove",Ae),Ae=Oe.on("pressmove",function(){Q&&(Le=!0),j.dispatchEvent("scrolling"),fe&&(fe.x=-i.x,fe.y=-i.y),Q?Ht=Oe.proportion.convert(Oe.y):i.y=Oe.proportion.convert(Oe.y),It()}))),Vt(),clearTimeout(j.d2Timeout),j.d2Timeout=setTimeout(function(){Ge&&Ge.proportion&&(i.x=Ge.proportion.convert(Ge.x)),Oe&&Oe.proportion&&(i.y=Oe.proportion.convert(Oe.y))},50),clearTimeout(j.dTimeout),j.dTimeout=setTimeout(function(){lt()},300),lt(),It()},this.resize=function($e,Tt){n($e)&&($e=t),n(Tt)&&(Tt=r);var Xt=Math.max(20,p*2);J&&(Xt=Math.max(we,Xt)),$e<Xt&&($e=Xt),Tt<20&&(Tt=20),t=$e,r=Tt,Xe();for(var $t=0;$t<i.numChildren;$t++){var cn=i.getChildAt($t);cn.type=="Wrapper"&&wt(cn)}return q&&et(),j.update(),Ht=i.y,Q&&Jt.immediate(Ht),j.dispatchEvent("resize"),j},!n(J)){n(ee)&&(ee=!0),typeof J=="string"&&(J=new e.Label({text:J,color:N,size:Se.size!=null?Se.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var De=j.titleBarLabel=J;De.noMouse(),n(te)&&(te="rgba(0,0,0,.2)"),j.titleBar=J=new e.Container(t,ae,null,null,!1).centerReg(j).mov(0,-r/2-ae/2);var ft=new e.Rectangle(J.width-1,J.height,red).alp(0).addTo(J);De.setMask(ft,!0);var mt=j.titleBar.backing=new e.Rectangle(t+f,ae,te,null,null,[p*.95,p*.95,0,0],!0,null,!1,!1).center(J);De.center(J).pos({x:Math.max(p/2,Math.max(10,d)),reg:!0}),j.regX=0,j.regY=-ae,j.setBounds(0,-ae,t,r+ae),ee?(J.cur("pointer"),J.on("mousedown",function(){j.drag({rect:pe,currentTarget:!0,onTop:$})}),J.on("pressup",function(){j.noDrag(!1)})):J.on("mousedown",function(){})}if(X){n(y)&&(y=e.grey);var Ze=j.closeIcon=new e.Shape(-40,-40,80,80,null,!1);Ze.graphics.f(y).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),J?Ze.centerReg(j).scaleTo(J,null,50).pos({x:t-Math.max(p/2,10)-Ze.width/2,y:ae/2,reg:!0}).expand(40):Ze.sca(.3).pos(Math.max(p/2,10)/2,Ze.height/2,!0,!1,j).expand(40),Ze.cur("pointer"),Ze.expand(),Ze.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){var $e=j.stage;j.removeFrom(),j.dispatchEvent("close"),$e&&$e.update()})}var dt,Ee,ot,Ve,Ye,Ke;if(!n(J)){if(h){j.fullSize=function($e){if(n($e)&&($e=!0),$e==Ee||!j.parent)return j;$e?(ot=j.width,Ve=j.height,Ye=j.x,Ke=j.y,j.resize(j.parent.width,j.parent.height),j.x=0,j.y=0,Ee=!0,tt.alpha=1,ze.getChildAt(0).alpha=.01,j.dispatchEvent("fullsize")):(j.resize(ot,Ve-J.height),j.x=Ye,j.y=Ke,Ee=!1,tt.alpha=0,ze.getChildAt(0).alpha=1,j.dispatchEvent("originalsize")),j.stage&&j.stage.update()},n(L)&&(L=e.grey);var ze=j.fullSizeIcon=new e.Rectangle(80,80,e.faint,L,16),tt=new e.Shape().s(L).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(ze).mov(40,40).alp(0);ze.centerReg(j).scaleTo(J,null,42).pos({x:t-Math.max(p/2,10)-ze.width/2,y:ae/2,reg:!0}).expand(40),Ze&&ze.mov(-Ze.width-10),ze.cur("pointer"),ze.expand(),Ee=!1,ot=t,Ve=r,Ye=j.x,Ke=j.y,ze.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){Ee?j.fullSize(!1):j.fullSize(!0)})}var ht=e.copy(j.getBounds(),!0);if(A){dt=xe,j.collapse=function($e){if(n($e)&&($e=!0),$e==dt)return j;$e?(Be.rot(180),j.backing.visible=!1,j.contentContainer.visible=!1,Re.visible=!1,Ge&&(Ge.visible=!1),Ge&&(Oe.visible=!1),ve&&(ve.visible=!1),dt=!0,mt.sha(F,5,5,K),q&&(j.resizeHandle.visible=!1),j.setBounds(ht.x,ht.y,ht.width,J.height),j.dispatchEvent("collapse")):(Be.rot(0),j.backing.visible=!0,j.contentContainer.visible=!0,Re.visible=!0,Ge&&(Ge.visible=!0),Ge&&(Oe.visible=!0),ve&&(ve.visible=!0),dt=!1,mt.sha(null),q&&(j.resizeHandle.visible=!0),j.setBounds(ht.x,ht.y,ht.width,ht.height),j.dispatchEvent("expand")),j.stage&&j.stage.update()},n(Y)&&(Y=e.grey);var Be=j.collapseIcon=new e.Triangle(90,90,90,e.faint,Y,16);Be.centerReg(j).scaleTo(J,null,42).pos({x:t-Math.max(p/2,10)-Be.width/2,y:ae/2,reg:!0}).expand(40),Ze&&Be.mov(-Ze.width-10),ze&&Be.mov(-ze.width-10),Be.cur("pointer"),Be.expand(),dt=!1,ot=t,Ve=r,Ye=j.x,Ke=j.y,Be.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){dt?j.collapse(!1):j.collapse(!0)})}}if(q){var it=new ii().loc(0,0,j).mov(j.width,j.height-(j.titleBar?j.titleBar.height:0)),vt=j.resizeHandle=new e.Rectangle(25,25,e.grey,e.white).alp(ge?.5:.01).centerReg().rot(45).loc(0,0,it).drag({boundary:Z,localBoundary:!0});vt.on("mouseover",function(){vt.alp(.5),vt.stage&&vt.stage.update()}),vt.on("mousedown",function(){vt.pressing=!0}),vt.on("mouseout",function(){vt.pressing||(ge||vt.alp(.01),vt.stage&&vt.stage.update())}),vt.on("pressmove",function(){j.resize(Math.max(50,it.x+vt.x),Math.max(50,it.y+vt.y))}),vt.on("pressup",function(){vt.pressing=!1,ge||vt.alp(.01),et(),vt.stage&&vt.stage.update()}),j.titleBar&&j.titleBar.on("pressup",et)}function et($e){j.resizeHandle.loc(0,0,it).top().mov(-it.x+j.width,-it.y+j.height-(j.titleBar?j.titleBar.height:0))}function wt($e){$e.align=="right"?($e.x=V,$e.resize(j.width-(nt?ye.size+ye.spacing*2:V)-V*2)):($e.align=="center"||$e.align=="middle",$e.resize(j.width-(nt?ye.size+ye.spacing*2:0)-V*2)),$e.alpha=$e.wrapperLastAlpha}if(Xe(),this.add=function($e,Tt,Xt,$t){var cn="obj, index, center, replace",an;if(an=yt(j.add,arguments,cn,j))return an;var zt=$e;if(!zt.getBounds()){ut("Window.add() - please add content with bounds set");return}return Sn(zt),n(Tt)&&(Tt=i.numChildren),$t&&(Tt=0,j.removeAll()),Xt?(zt.center(j).addTo(i,Tt).mov(0,ae?ae/2:0),i.height>j.height-(ae||0)&&zt.loc(null,0),i.width>j.width&&zt.loc(0)):zt.addTo(i,Tt),zt.type=="Wrapper"&&(Oe.alpha=0,E=!1,zt.wrapperLastAlpha=zt.alpha,zt.alpha=0,this.added(function(){wt(zt),j.resize(),Ge.alpha=1,Oe.alpha=1})),zt.x==0&&(zt.x=V),zt.y==0&&(zt.y=D),j.update(),j},Pe){var xt=e.makeContent(Pe,t),_t=["header","message","text","display","buttons","config"];_t.forEach(function($e){xt[$e]&&(j[$e]=xt[$e])}),j.label=j.message,j.add(xt,0,!0)}this.remove=function($e){return i.removeChild($e),j.update(),j},this.removeAll=function(){return i.removeAllChildren(),j.update(),j};function lt($e){he||(n(Me)&&(Me=j.stage||le.zdf.stage),n($e)&&($e=!0),$e?e.dragBoundary(i,new je.Rectangle(0,0,Je?-j.scrollXMax:0,nt?-j.scrollYMax:0)):e.dragBoundary(i,new je.Rectangle(-1e3,-1e3,Me.width+2e3,Me.height+2e3)))}var Dt=!1;w&&i.on("mousedown",function(){Dt||e.Ticker.add(Pt,i.stage),Dt=!0,Je&&k&&b&&e.animate(Ge,{alpha:S},ye.showTime),nt&&k&&b&&e.animate(Oe,{alpha:S},ye.showTime)});function Pt(){Ht=i.y,Q&&Jt.immediate(Ht),k?Vt():j.dispatchEvent("scrolling")}function It(){j.optimize&&(Me=j.stage,i.loop(function($e){!$e.hitTestBounds||!$e.stage||($e.hitTestBounds(Me)?($e.visible=!0,$e.loop&&$e.loop(function(Tt){Tt.hitTestBounds&&(Tt.hitTestBounds(Me)?Tt.visible=!0:Tt.visible=!1)})):$e.visible=!1)}))}function Vt(){It(),j.dispatchEvent("scrolling"),fe&&(fe.x=-i.x,fe.y=-i.y),Je&&k&&(Ge.x=Ue.convert(i.x)),nt&&k&&(Oe.y=Qe.convert(i.y))}this.on("added",function(){Gt(50)},null,!0);function Gt($e){n($e)&&($e=100),Sn(j),w&&setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,axis:he,localBoundary:!0,slide:C,slideFactor:O,slideSnap:E&&(w===!0||w=="auto"||w=="horizontal")||R&&(w===!0||w=="auto"||w=="vertical")?I:!1}),i.removeAllEventListeners("slidestart"),i.on("slidestart",function(){j.dispatchEvent("slidestart")}),i.removeAllEventListeners("slidestop"),!k&&G&&(j.zDE&&i.off(j.zDE),j.zDE=i.on("mousedown",()=>{j.zTI&&e.Ticker.remove(It)}),j.zME&&i.off(j.zME),j.zME=i.on("pressmove",It),j.zSTA&&i.off(j.zSTA),j.zSTA=i.on("slidestart",function(){j.zTI=e.Ticker.add(It)}),j.zSTO&&i.off(j.zSTO),j.zSTO=i.on("slidestop",function(Tt){j.zTI&&e.Ticker.remove(j.zTI)})),i.on("slidestop",function(Tt){C&&sn(Tt),j.dispatchEvent("slidestop")}),i.getBounds()&&i.getBounds().width>0&&lt())},$e)}this.cancelCurrentDrag=function(){j.contentContainer&&j.contentContainer.noDrag(!1),setTimeout(function(){i&&(e.drag({obj:i,currentTarget:!0,localBoundary:!0,slide:C,slideFactor:O,slideSnap:E&&(w===!0||w=="auto"||w=="horizontal")||R&&(w===!0||w=="auto"||w=="vertical")?I:!1}),i.getBounds()&&i.getBounds().width>0&&lt())},300)};var jt;this.added(function($e){Me=$e,jt=Me.on("stagemousemove",function(Tt){j.windowMouseX=Tt.stageX/e.scaX,j.windowMouseY=Tt.stageY/e.scaY})}),C?i.on("slidestop",sn):i.on("mousedown",function(){i.stage.on("stagemouseup",sn,null,!0)}),g&&(j.blurEvent=function(){j.cancelCurrentDrag(),sn()},document.WW.addEventListener("blur",j.blurEvent));function sn(){e.Ticker.remove(Pt),Dt=!1,Je&&b&&k&&e.animate(Ge,{alpha:0},ye.fadeTime),nt&&b&&k&&e.animate(Oe,{alpha:0},ye.fadeTime)}var Kt=!1,Lt,Qt=0,rt=0,bt=0,Rt=0,Mt=300,Nt=2;function kt(){Lt=Date.now(),e.Ticker.add(Wt,i.stage)}function Bt(){Kt||(j.dispatchEvent("hoverout"),Kt=!0),e.Ticker.remove(Wt)}function Wt(){if(!i.stage){Kt||(j.dispatchEvent("hoverout"),Kt=!0),e.Ticker.remove(Wt);return}Math.abs(Qt-j.windowMouseX)>Nt||Math.abs(rt-j.windowMouseY)>Nt?(Kt||(j.dispatchEvent("hoverout"),Kt=!0),Lt=Date.now(),Qt=j.windowMouseX,rt=j.windowMouseY):Date.now()-Lt>Mt&&((Math.abs(bt-j.windowMouseX)>Nt||Math.abs(Rt-j.windowMouseY)>Nt)&&(j.contentMouse=i.globalToLocal(j.windowMouseX,j.windowMouseY),j.dispatchEvent("hoverover"),bt=j.windowMouseX,Rt=j.windowMouseY,Kt=!1),Lt=Date.now())}if(P){var Zt,en;i.on("mousedown",function($e){Me=$e.target.stage,Zt=$e.stageX/e.scaX,en=Date.now()}),i.on("click",function($e){Date.now()-en<600&&Math.abs($e.stageX/e.scaX-Zt)<5&&(j.contentMouse=i.globalToLocal($e.stageX/e.scaX,$e.stageY/e.scaY),j.dispatchEvent("select"))}),i.on("mouseover",kt),i.on("mouseout",Bt)}var Ht=j.scrollY;j.scrollWindow=function(Tt){if(nt&&j.stage&&j.hitTestPoint(j.windowMouseX,j.windowMouseY)&&j.contains(j.stage.getObjectUnderPoint(j.windowMouseX*e.scaX,j.windowMouseY*e.scaY))){n(Tt)&&(Tt=event);var Xt=Tt.detail?Tt.detail*-19:Tt.wheelDelta;n(Xt)&&(Xt=Tt.deltaY*-19),Ht+=Xt,Ht=Math.max(-j.scrollYMax,Math.min(0,Ht)),Q||(j.scrollY=Ht,i.stage.update()),Le=!1}G&&It()},U&&(le.addEventListener("mousewheel",j.scrollWindow),le.addEventListener("wheel",j.scrollWindow),le.addEventListener("DOMMouseScroll",j.scrollWindow));var vn=!1,Jt;function Sn($e){Q&&!vn&&$e.stage&&(vn=!0,Jt=new e.Damp(j.scrollY,Q),j.dampTicker=e.Ticker.add(function(){if(!Dt){if(j.scrollY!=null&&Ht!=null&&j.scrollY!=Ht&&Math.round(j.scrollY)==Math.round(Ht)){Le=!1;return}n(Ht)||(i.y=Jt.convert(Ht)),Le||Vt()}},$e.stage))}this._enabled=!0,Object.defineProperty(j,"enabled",{get:function(){return j._enabled},set:function($e){$e?Gt():(clearTimeout(j.dTimeout),e.noDrag(i)),c(j,$e)}}),this._scrollEnabled=!0,Object.defineProperty(j,"scrollEnabled",{get:function(){return j._scrollEnabled},set:function($e){$e?(Gt(),x&&(at&&(Ge.mouseEnabled=!0),Ae&&(Oe.mouseEnabled=!0)),le.addEventListener("mousewheel",j.scrollWindow),le.addEventListener("wheel",j.scrollWindow),le.addEventListener("DOMMouseScroll",j.scrollWindow)):(clearTimeout(j.dTimeout),e.noDrag(i),x&&(at&&(Ge.mouseEnabled=!1),Ae&&(Oe.mouseEnabled=!1)),le.removeEventListener("mousewheel",j.scrollWindow),le.removeEventListener("wheel",j.scrollWindow),le.removeEventListener("DOMMouseScroll",j.scrollWindow)),j._scrollEnabled=$e}}),Object.defineProperty(j,"scrollX",{get:function(){return i.x},set:function($e){i.x=$e,clearTimeout(j.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Vt()}}),Object.defineProperty(j,"scrollY",{get:function(){return i.y},set:function($e){i.y=$e,i.y=Ht=$e,Q&&Jt.immediate(Ht),clearTimeout(j.d2Timeout),i.zimDragImmediate&&i.zimDragImmediate(i.x,i.y),Vt()}}),Object.defineProperty(j,"backgroundColor",{get:function(){return o},set:function($e){o=$e,Xe()}}),Object.defineProperty(j,"borderColor",{get:function(){return l},set:function($e){l=$e,Xe()}}),Object.defineProperty(j,"borderWidth",{get:function(){return f},set:function($e){f=$e,Xe()}}),Object.defineProperty(j,"fullSized",{get:function(){return Ee},set:function($e){j.fullSize&&j.fullSize($e)}}),Object.defineProperty(j,"collapsed",{get:function(){return dt},set:function($e){j.collapse&&j.collapse($e)}}),xe&&(dt=!1,j.collapsed=!0),j.titleBar&&(j.collapseEvent=j.titleBar.on("dblclick",function(){j.collapsed=!j.collapsed})),ne!==!1&&e.styleTransforms(this,Se),this.clone=function($e){n($e)&&($e=!0);var Tt=j.cloneProps(new e.Window(t,r,null,o,se,me,d,p,w,k,x,ye.color,S,b,E,R,C,O,I,_,P,F,K,V,D,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te));return $e&&(j.contentContainer.cloneChildren(Tt.contentContainer),Tt.update()),Tt},this.doDispose=function($e,Tt,Xt){return U&&(le.removeEventListener("mousewheel",j.scrollWindow),le.removeEventListener("wheel",j.scrollWindow),le.removeEventListener("DOMMouseScroll",j.scrollWindow)),i&&(j.zDE&&i.off(j.zDE),j.zME&&i.off(j.zME),j.zSTA&&i.off(j.zSTA),j.zSTO&&i.off(j.zSTO),j.zTI&&e.Ticker.remove(j.zTI)),j.titleBar&&j.titleBar.removeAllEventListeners(),jt&&Me&&Me.off("stagemousemove",jt),j.resizeHandle&&j.resizeHandle.removeAllEventListeners(),j.blurEvent&&le.removeEventListener("blur",j.blurEvent),typeof Wt<"u"&&e.Ticker.remove(Wt),n(Pt)||e.Ticker.remove(Pt),Xt||this.zimContainer_dispose(!0),i=j.contentContainer=null,!0}},e.extend(e.Window,e.Container,["clone","dispose"],"zimContainer",!1),e.Window.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Page=function(t,r,i,o,l,f,d,p,w,k,x){var T="width, height, color, color2, angle, pattern, scalePattern, cache, style, group, inherit",S;if(S=yt(e.Page,arguments,T,this))return S;qe("58.3"),this.group=k;var b=w===!1?{}:e.getStyle("Page",this.group,x);n(t)&&(t=b.width!=null?b.width:le.zdf.width),n(r)&&(r=b.height!=null?b.height:le.zdf.height),this.zimContainer_constructor(0,0,t,r,!1),this.type="Page";var E=this;n(l)&&(l=b.angle!=null?b.angle:90),n(i)&&(i=b.color!=null?b.color:e.light),n(o)&&(o=b.color2!=null?b.color2:null),n(f)&&(f=b.pattern!=null?b.pattern:null),n(d)&&(d=b.scalePattern!=null?b.scalePattern:"fill"),n(p)&&(p=b.cache!=null?b.cache:!1),n(o)||(i=new e.GradientColor([i,o],[0,1],l),o=null);var R=this.backing=new e.Rectangle({width:t,height:r,color:i,scaleDimensions:!1,style:!1}).addTo(this);n(p)&&(!n(o)||!n(f))&&(p=!0),p&&R.cache(),n(f)||(this.pattern=f.addTo(this),d&&f.scaleTo(this,100,100,d).center(this),p&&f.cache()),Object.defineProperty(E,"color",{get:function(){return i},set:function(C){n(C)&&(C=e.black),i=C,E.backing.color=C}}),w!==!1&&e.styleTransforms(this,b),this.clone=function(C){n(C)&&(C=!1),i.type&&(o=null);var O=E.cloneProps(new e.Page(t,r,i,o,vertical,f,d,p,w,k,x));return C&&E.cloneChildren(O),O}},e.extend(e.Page,e.Container,["clone"],"zimContainer",!1),e.Layer=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te){var ae="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",ee;if(ee=yt(e.Layer,arguments,ae,this))return ee;qe("58.5"),this.group=N;var pe=J===!1?{}:e.getStyle("Layer",this.group,te);n(t)&&(t=pe.width!=null?pe.width:500),n(r)&&(r=pe.height!=null?pe.height:500),this.zimContainer_constructor(0,0,t,r,!1),this.type="Layer";var $=this;$.distX=40,$.distY=0,n(i)&&(i=pe.titleBar!=null?pe.titleBar:"LAYER");var X=i,y=i,g=!0;n(l)&&(l=pe.backgroundColor!=null?pe.backgroundColor:e.lighter),n(f)&&(f=pe.rollBackgroundColor!=null?pe.rollBackgroundColor:e.white),n(d)&&(d=pe.selectedBackgroundColor!=null?pe.selectedBackgroundColor:e.granite),n(w)&&(w=pe.color!=null?pe.color:e.granite),n(k)&&(k=pe.rollColor!=null?pe.rollColor:e.granite),n(x)&&(x=pe.selectedColor!=null?pe.selectedColor:e.moon),n(S)&&(S=pe.borderWidth!=null?pe.borderWidth:1),n(b)&&(b=pe.borderColor!=null?pe.borderColor:l),(b<0||S<0)&&(b=S=null),n(E)&&(E=pe.dashed!=null?pe.dashed:!0),n(R)&&(R=pe.titleBar!=null?pe.titleBar:null),n(C)&&(C=pe.titleBarWidth!=null?pe.titleBarWidth:100);var h=C;if(n(O)&&(O=pe.titleBarHeight!=null?pe.titleBarHeight:40),n(I)&&(I=pe.titleBarX!=null?pe.titleBarX:null),n(_)&&(_=pe.titleBarY!=null?pe.titleBarY:null),n(P)&&(P=pe.titleBarDraggable!=null?pe.titleBarDraggable:!0),n(F)&&(F=pe.close!=null?pe.close:!0),n(K)&&(K=pe.closeColor!=null?pe.closeColor:d),n(V)&&(V=pe.closeBackgroundColor!=null?pe.closeBackgroundColor:d),n(D)&&(D=pe.closeIndicatorColor!=null?pe.closeIndicatorColor:x),n(U)&&(U=pe.anchor!=null?pe.anchor:!0),n(Q)&&(Q=pe.onTop!=null?pe.onTop:!0),P||(U=!1),$.anchor=U,F&&(C+=30),R=e.merge({borderColor:d},R,{onTop:Q,events:!0,visible:!1,ghostColor:b,ghostWidth:S,ghostDashed:E,ghostHidden:!0}),n(o)&&(o=pe.titleBarContainer!=null?pe.titleBarContainer:null),n(o))if(le.zdf)o=le.zdf.stage;else{ut("zim Layer(): Please pass in a reference to a container with bounds set.");return}$.active=!1,$.turnOff=function(){$.active=!1,F&&($.checkBox.visible=!1),$.transformControls.remove(),$.mouseChildren=!0,$.button.backgroundColor=l,$.button.rollBackgroundColor=f,$.button.color=w,$.button.rollColor=w,$.transformControls.allowToggleOff(),$.resizeChildren&&$.resizeChildren()},$.turnOn=function(){$.active=!0,F&&($.checkBox.visible=!0,$.checkBox.checked=!0),$.button.backgroundColor=d,$.button.rollBackgroundColor=d,$.button.color=x,$.button.rollColor=x,$.mouseChildren=!1,$.transformControls.add(),$.transformControls.allowToggleOn()};var L;$.titleBarPos=function(Y,xe){if($.titleBar)return $.titleBar.pos?($.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),L.update()):($.distX=Y,$.distY=xe),g=!1,$};var q=$.visible;$.visible=!1;var A=v();this.added(function(Y){L=Y,$.transform(R),S>=0&&$.transformControls.hideGhost(),setTimeout(function(){function xe(){return $.localToLocal(0,0,o)}$.visible=q,S>=0&&setTimeout(function(){$.transformControls.showGhost(),$.stage&&$.stage.update()},200),L=Y;var G=$.titleBar=new e.Container(C,O).reg(0,O).loc($,null,o).mov($.distX,$.distY);P&&G.drag({all:!0,boundary:new e.Boundary(0,O,o.width-C,o.height-O),localBoundary:!0}),($.distX!=40||$.distY!=0)&&G.pos($.distX,$.distY),F&&($.checkBox=new e.CheckBox({borderColor:K,backgroundColor:V,indicatorColor:D,size:20,startChecked:!0}).center(G).pos(0,null,!0).change(function(){$.turnOff(),$.dispatchEvent("transformhide")}),$.checkBox.visible=!1),G.mouseChildren=!0,G.layer=$,$.resetTitleBar=function(){$.distX=40,$.distY=0,g=!0,$.move(!0),$.stage&&$.stage.update()},(typeof y=="string"||typeof y=="number")&&(y=new e.Label({text:y,color:w,rollColor:k,size:pe.size!=null?pe.size:18,group:this.group})),$.label=y,$.label.center(G),$.button=new e.Button({shadowBlur:-1,width:h,height:O-1,label:$.label,color:w,rollColor:k,backgroundColor:l,rollBackgroundColor:f,corner:pe.corner!=null?pe.corner:0,inherit:e.copy(pe)}).addTo(G),$.button.on("mousedown",function(){o.loop(function(ie){ie&&ie!=G&&ie.layer&&ie.layer.turnOff&&ie.layer.active&&ie.layer.turnOff()}),$.active||($.turnOn(),$.dispatchEvent("transformshow")),G.top()}),$.button.on("pressmove",function(){Z()}),$.button.on("pressup",function(){Z(!0);var ie=$.localToLocal(0,0,o);$.distX=G.x-ie.x,$.distY=G.y-ie.y,G.top(),!he()&&P&&(ie=$.localToGlobal(0,0),$.button.hitTestPoint(ie.x,ie.y)&&$.resetTitleBar())});function Z(ie){if(g&&P){var Se=o.localToLocal(G.x-$.distX,G.y-$.distY,$.parent),se=$.localToLocal($.regX,$.regY,$.parent),me=$.localToLocal(0,0,$.parent);$.x=Se.x+(se.x-me.x),$.y=Se.y+(se.y-me.y),$.transformControls.resize(ie),ge($),$.stage&&$.stage.update()}}function ge(ie){ie.loop(function(Se){Se.type=="Layer"&&($.titleBarDraggable&&Se.move(),Se.transformControls.ghost&&Se.transformControls.resize(),ge(Se))})}$.button.on("dblclick",function(){P&&$.resetTitleBar()}),$.turnOff(),$.on("transformed",function(ie){(ie.transformType=="move"||ie.transformType=="size"||ie.transformType=="stretch"||ie.transformType=="rotate")&&(P&&$.move(),ge($))});function he(){if(G.x==0||G.y==G.height||G.x==o.width-G.width||G.y==o.height)return!0}$.move=function(ie){!ie&&!g&&$.anchor&&he()||(G.loc(xe()).mov($.distX,$.distY),G.x<0&&(g=!1,G.x=0),G.y<G.height&&(g=!1,G.y=G.height),G.x>o.width-G.width&&(g=!1,G.x=o.width-G.width),G.y>o.height&&(g=!1,G.y=o.height),$.anchor||(g=!0))},$.on("transformhide",function(){$.turnOff(),o.loop(function(ie){ie&&ie!=G&&ie.layer&&ie.layer.turnOff&&ie.layer.active&&ie.layer.turnOff()})}),$.resizeChildren=function(ie){$.transformControls.resize(ie),$.loop(function(Se){Se.transformControls&&(Se.transformControls.visible&&Se.transformControls.hide(),Se.type=="Layer"?Se.resizeChildren():Se.transformControls.resize())})},$.resize=function(ie){return $.move(),$.resizeChildren(ie),$},$.toggled=!1;function ne(){$.toggled?(o.loop(function(ie){ie&&ie!=G&&ie.layer&&ie.layer.turnOff&&ie.layer.active&&ie.layer.turnOff()}),$.turnOn(),$.dispatchEvent("transformshow")):(G.top(),$.turnOff(),o.loop(function(ie){ie&&ie!=G&&ie.layer&&ie.layer.turnOff&&ie.layer.active&&ie.layer.turnOff()}),$.dispatchEvent("transformhide")),$.stage&&$.stage.update()}if($.toggle=function(ie){return n(ie)?$.toggled=!$.toggled:$.toggled=ie,ne(),$},Object.defineProperty($,"titleBarDraggable",{get:function(){return P},set:function(ie){P=ie,P?G.drag({all:!0,boundary:e.Boundary(0,40,o.width-C,o.height-O),localBoundary:!0}):G.noDrag(!1)}}),$.stageUpEvent=L.on("stagemouseup",function(){$.transformControls.visible&&G.top()}),!n(I)||!n(_)){g=!1;var ue=n(I)?G.x:I,Te=n(_)?G.y-O:_;$.titleBarStartX=I,$.titleBarStartY=_,$.titleBarPos(ue,Te);var Fe=$.parent.localToLocal($.x,$.y,o);$.distX=G.x-Fe.x,$.distY=G.y-Fe.y}},50)},A=="s"?.05:50),J!==!1&&e.styleTransforms(this,pe),this.clone=function(){return $.cloneProps(new e.Layer(t,r,X,o,l,f,d,p,w,k,x,T,S,b,E,R,h,O,I,_,P,F,K,V,D,U,Q,J,this.group,te))},this.dispose=function(Y,xe,G){return $.stageUpEvent&&L.off("stagemouseup",$.stageUpEvent),o&&o.loop(function(Z){Z.layer=null}),$.transformControls.dispose(),$.transformControls=null,G||this.zimContainer_dispose(!0),$.titleBar.layer=null,$.titleBar.dispose(),$.checkBox=$.button=null,i=$.titleBar=R=null,!0}},e.extend(e.Layer,e.Container,["clone","dispose"],"zimContainer",!1),e.Waiter=function(t,r,i,o,l,f,d,p,w,k,x){var T="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",S;if(S=yt(e.Waiter,arguments,T,this))return S;qe("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=k;var b=w===!1?{}:e.getStyle(this.type,this.group,x),E=v(r);n(r)&&(r=b.speed!=null?b.speed:E=="s"?.6:600),n(i)&&(i=b.foregroundColor!=null?b.foregroundColor:e.white),n(o)&&(o=b.backgroundColor!=null?b.backgroundColor:"orange"),n(l)&&(l=b.corner!=null?b.corner:16),n(f)&&(f=b.shadowColor!=null?b.shadowColor:"rgba(0,0,0,.3)"),n(d)&&(d=b.shadowBlur!=null?b.shadowBlur:14),n(p)&&(p=b.fadeTime!=null?b.fadeTime:0);var R=40,C=3,O=R*.6/2,I=(R-O*2)/2,_=C*(O*2+I)+I;this.setBounds(-_/2,-R/2,_,R);var P=this,F,K=this.display=new e.Shape({style:!1});this.addChild(K),K.setBounds(0,0,_,R),K.regX=_/2,K.regY=R/2;var V=K.graphics;V.f(o);var D=l;Array.isArray(D)||(D=[l,l,l,l]),V.rc(0,0,_,R,D[0],D[1],D[2],D[3]),f!=-1&&d>0&&(K.shadow=new je.Shadow(f,3,3,d)),K.on("click",function(ae){ae.stopImmediatePropagation()});var U=new e.Container({style:!1});this.addChild(U);for(var Q,J=0;J<C;J++)Q=new je.Shape,Q.graphics.f(i).dc(0,0,O),Q.x=(J-(C-1)/2)*(O*2+I),U.addChild(Q),Q.cache(-O,-O,O*2,O*2),Q.alpha=0;this.hide=function(){p>0?P.animate({obj:{alpha:0},time:p,call:ae}):ae();function ae(){if(P.parent&&P.parent.removeChild(P),F=P.stage,F&&F.update(),P.zimAccessibility){var ee=P.zimAccessibility;ee.resize(P),N?N.focus():P.zimTabTag.nextSibling.focus(),setTimeout(function(){ee.talk("Waiter has finished.")},50)}}return P.toggled=!1,P};var N,te=[];this.show=function(){var ae="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(n(t))if(le.zdf)t=le.zdf.stage;else{ut(ae);return}else if(t.getBounds){if(n(t.stage)){ut("zim display - Waiter(): The container must have a stage property");return}}else{ut(ae);return}for(var ee,pe=0,$=r*(E=="s"?1e3:1),X=0;X<U.numChildren;X++)U&&te.push(setTimeout(function(){ee=U.getChildAt(pe),je.Tween.get(ee,{loop:!0}).to({alpha:1},$/C/2).wait($/C).to({alpha:0},$/C).wait($-$/C-$/C/2),pe++},X*$/C));if(P.ticker=je.Ticker.on("tick",function(){t.stage.update()}),P.x=t.getBounds().width/2,P.y=t.getBounds().height/2,t.addChild(P),p>0&&(P.alpha=0,P.animate({alpha:1},p)),P.zimAccessibility){var y=P.zimAccessibility;setTimeout(function(){y.activatedObject&&(N=y.activatedObject.zimTabTag)},50),y.resize(P),y.talk(P.zimTabTag.getAttribute("aria-label"))}return P.toggled=!0,P},P.toggle=function(ae){return ae===!0?P.show():ae===!1||P.parent?P.hide():P.show(),P},w!==!1&&e.styleTransforms(this,b),this.clone=function(){return P.cloneProps(new e.Waiter(t,r,i,o,l,f,d,p,w,this.group,x))},this.dispose=function(ae,ee,pe){P.ticker&&je.Ticker.off("tick",P.ticker),je.Tween.removeTweens(P),P.removeFrom();for(var $=0;$<U.numChildren;$++){var X=U.getChildAt($);clearInterval(te[$]),je.Tween.removeTweens(X)}return pe||this.zimContainer_dispose(!0),!0}},e.extend(e.Waiter,e.Container,["clone","dispose"],"zimContainer",!1),e.ProgressBar=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F){var K="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",V;if(V=yt(e.ProgressBar,arguments,K,this))return V;qe("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=P;var D=_===!1?{}:e.getStyle(this.type,this.group,F);n(r)&&(r=D.foregroundColor!=null?D.foregroundColor:e.green),n(i)&&(i=D.backgroundColor!=null?D.backgroundColor:e.charcoal),n(o)&&(o=D.borderColor!=null?D.borderColor:i),n(l)&&(l=D.borderWidth!=null?D.borderWidth:null),n(w)&&(w=D.labelPosition!=null?D.labelPosition:"bottom"),n(t)&&(t=D.barType!=null?D.barType:"circle"),n(f)&&(f=D.padding!=null?D.padding:t=="circle"?2:-.5),n(x)&&(x=D.corner!=null?D.corner:15),n(T)&&(T=D.shadowColor!=null?D.shadowColor:"rgba(0,0,0,.3)"),n(S)&&(S=D.shadowBlur!=null?D.shadowBlur:14),n(b)&&(b=D.backing!=null?D.backing.clone():null),n(R)&&(R=D.fastClose!=null?D.fastClose:!0),o<0||l<0?o=l=null:o!=null&&l==null&&(t=="circle"?l=10:l=2);var U=v(E);n(E)&&(E=D.delay!=null?D.delay:U=="s"?.1:100),n(O)&&(O=D.autoHide!=null?D.autoHide:!0),n(d)&&(d=D.label!=null?D.label:null),n(p)&&(p=D.color!=null?D.color:r),n(I)&&(I=D.width!=null?D.width:t=="circle"?40:200),(typeof d=="string"||typeof d=="number")&&(d=new e.Label({text:d,color:p,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!n(k)&&n(d)&&(d=new e.Label("")),this.label=d;var Q=30,J=this,N=0;J.visible=!1,setTimeout(function(){J.visible=!0,J.stage&&J.stage.update()},E);var te;if(t=="circle")I=I/2,b=this.backing=new e.Circle(I,"rgba(0,0,0,0)",i,l,null,null,null,null,!1).addTo(J),te=this.bar=new e.Shape({style:!1}).addTo(J).loc(b.x,b.y).rot(-90);else{if(T!=-1&&S>0){var ae=new e.Rectangle(I-2,Q-2,i,null,null,x,null,null,null,!1).addTo(this);ae.shadow=new je.Shadow(T,3,3,S)}b=X(b);var ee=x;Array.isArray(ee)||(ee=[x,x,x,x]);var pe=(f+l/2)*1.2;te=this.bar=new e.Rectangle(I-(f+l/2)*1.8,Q-(f+l/2)*1.8,r,null,null,[ee[0]-pe,ee[1]-pe,ee[2]-pe,ee[3]-pe],null,null,null,!1).center(this);var $=this.mask=new e.Rectangle(I-(f+l/2)*1.8,Q-(f+l/2)*1.8,null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1);te.setMask($)}function X(L){var q;if(J.backing?(q=J.getChildIndex(J.backing),J.removeChild(J.backing)):q=J.numChildren,J.border&&J.removeChild(J.border),!n(L)&&L.type=="Pattern"){var A=L;L=J.backing=new e.Rectangle(I,Q,i,null,null,x,null,null,null,!1).addTo(J,q),L.pattern=A,A.center(L),A.setMask(L.shape),l&&(J.border=new e.Rectangle(I,Q,"rgba(0,0,0,0)",o,l,x,null,null,null,!1).addTo(J,q+1))}else L=J.backing=n(L)?new e.Rectangle(I,Q,i,o,l,x,null,null,null,!1).addTo(J,q):b.addTo(J,q);return L}J.setBacking=function(L){X(L),J.stage&&J.stage.update()},b.on("click",function(L){L.stopImmediatePropagation()}),n(d)||(d.scaleX=d.scaleY=.8,d.startText=d.text,n(k)||(d.text=d.startText+"  0%"),d.center(J),w=="above"?d.y-=60:d.y+=60,d.alpha=.8),this.hide=function(){var L=J.stage;if(J.parent&&J.parent.removeChild(J),J.backing.type=="Pattern"&&J.backing.pauseInterval&&J.backing.pauseInterval(),L&&L.update(),J.zimAccessibility){var q=J.zimAccessibility;q.resize(J),y?y.focus():J.zimTabTag.nextSibling.focus(),setTimeout(function(){q.talk("Progress Bar has finished.")},50)}return J.toggled=!1,J};var y;this.show=function(){var L="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(n(C))if(le.zdf)C=le.zdf.stage;else{ut(L);return}else if(C.getBounds){if(n(C.stage)){ut("zim display - Waiter(): The container must have a stage property");return}}else{ut(L);return}if(J.timeOut&&clearTimeout(J.timeOut),g(0),J.zimActiveLoader&&J.zimActiveLoader.on("progress",function(A){N=A.progress*100,g(N)}),J.center(C),J.backing.type=="Pattern"&&J.backing.pauseInterval&&J.backing.pauseInterval(!1),J.zimAccessibility){var q=J.zimAccessibility;setTimeout(function(){q.activatedObject&&(y=q.activatedObject.zimTabTag)},50),q.resize(J),q.talk(J.zimTabTag.getAttribute("aria-label"))}return J.toggled=!0,J},J.toggle=function(L){return L===!0?J.show():L===!1||J.parent?J.hide():J.show(),J},J.run=function(L,q){n(q)||(O=q),n(L)&&(L=U=="s"?3:3e3),a(L,U);var A=L*(U=="s"?1e3:1);J.runInterval&&clearInterval(J.runInterval),J.percent=0;var Y=Date.now();return J.runInterval=setInterval(function(){J.percent=(Date.now()-Y)/A*100,J.percent>=100&&(J.percent=100,clearInterval(J.runInterval))},30),J},J.dispatched=!1;function g(L){t=="circle"?te.graphics.c().mt(0,0).s(r).ss(l-f*2+.5).a(0,0,I,0,360*L/100*Math.PI/180):($.sca(L/100,1),te.setMask($)),n(k)||(d.text=d.startText+" "+Math.min(Math.round(L),100)+"%"),O&&R&&Math.round(L)>=100&&(J.timeOut=setTimeout(function(){J.hide()},200)),!J.dispatched&&Math.round(L)>=100&&(J.dispatchEvent("complete"),J.dispatched=!0,setTimeout(function(){J&&(J.dispatched=!1)},100)),J.stage&&J.stage.update()}Object.defineProperty(J,"percent",{get:function(){return N},set:function(L){N=L,g(L)}});var h=J.getBounds();J.setBounds(h.x-5,h.y-5,h.width+10,h.height+10),_!==!1&&e.styleTransforms(this,D),this.clone=function(){return J.cloneProps(new e.ProgressBar(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,this.group,F))},this.dispose=function(L,q,A){return J.backing.type=="Pattern"&&J.backing.clearInterval&&J.backing.clearInterval(),J.runInterval&&clearInterval(J.runInterval),A||this.zimContainer_dispose(!0),!0}},e.extend(e.ProgressBar,e.Container,["clone","dispose"],"zimContainer",!1),e.Indicator=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P){var F="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, backgroundAlpha, style, group, inherit",K;if(K=yt(e.Indicator,arguments,F,this))return K;qe("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=_;var V=I===!1?{}:e.getStyle(this.type,this.group,P);n(t)&&(t=V.width!=null?V.width:300),n(r)&&(r=V.height!=null?V.height:50),n(i)&&(i=V.num!=null?V.num:6),n(k)&&(k=V.indicatorType!=null?V.indicatorType:"dot"),n(o)&&(o=V.foregroundColor!=null?V.foregroundColor:k=="star"?e.yellow:k=="heart"?e.red:e.orange),n(l)&&(l=V.backgroundColor!=null?V.backgroundColor:e.granite),l<0&&(l=V.backgroundColor!=null?V.backgroundColor:"rgba(0,0,0,.01)"),n(f)&&(f=V.borderColor!=null?V.borderColor:null),n(d)&&(d=V.borderWidth!=null?V.borderWidth:null),f<0||d<0?f=d=null:f!=null&&d==null&&(d=1),n(p)&&(p=V.backdropColor!=null?V.backdropColor:-1),n(w)&&(w=V.corner!=null?V.corner:0),n(x)&&(x=V.fill!=null?V.fill:!1),n(T)&&(T=V.scale!=null?V.scale:1),n(S)&&(S=V.lightScale!=null?V.lightScale:1),n(b)&&(b=V.interactive!=null?V.interactive:!1),n(E)&&(E=V.shadowColor!=null?V.shadowColor:"rgba(0,0,0,.3)"),n(R)&&(R=V.shadowBlur!=null?V.shadowBlur:5),n(O)&&(O=V.backgroundAlpha!=null?V.backgroundAlpha:.2);var D=(Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",U=this;this.lights=[];var Q;if(p!=-1){var J=U.backdrop=new e.Rectangle(t,r,p,f,d,w,null,null,null,!1);this.addChild(J)}var N=this.lightsContainer=new e.Container({style:!1});this.addChild(N);var te,ae=r*.5,ee=t/(i+1),pe=new je.Shape,$=!1;k=="square"||k=="box"||k.type=="Emoji"?pe.graphics.f("black").dr(-ee/2/S+ae/2,-r/2+ae/2,ee/S,r):pe.graphics.f("black").dr(-ee/2/S,-r/2,ee/S,r);for(var X=0;X<i;X++)k=="square"||k=="box"?(te=new e.Rectangle(ae,ae,l,f,d,null,null,null,null,!1),te.regX=te.width/2,te.regY=te.height/2):k=="star"?te=new e.Poly(ae*.6,5,.5,l,f,d,null,null,!1):k=="heart"?te=new e.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:l,interactive:!1}).transformPoints("scale",.15):k.type=="Emoji"?($=!0,te=k.clone().reg("center","center"),te.myCache=!1):te=new e.Circle(ae/2,l,f,d,null,null,null,null,!1),this.lights.push(te),te.znum=X,te.scaleX=te.scaleY=S,te.hitArea=pe,te.x=ee+ee*X,te.y=r/2,N.addChild(te);N.setBounds(0,0,t,r),N.regX=N.x=t/2,N.regY=N.y=r/2,this.addChild(N),E!=-1&&R>0&&(N.shadow=new je.Shadow(E,2,2,R)),b&&(N.cur("pointer"),U.lightsEvent=N.on(D,function(g){if(Q==g.target.znum){if(Q>0)return;if(Q==0){Q=-1,y(Q),U.dispatchEvent("change");return}}Q=g.target.znum,y(Q),U.dispatchEvent("change")})),N.scaleX=N.scaleY=T;function y(g){g>=i&&(g=-1);for(var h,L=0;L<i;L++){x&&L<g?h=o:h=l,L==g&&(h=o);var q=N.getChildAt(L);$&&(q.alpha=h==o?1:O),q.color=h}U.zimAccessibility&&U.zimAccessibility.changeTitle(U),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&U.stage&&U.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return Q},set:function(g){Q=Math.floor(g),Q=e.constrain(Q,-1,i-1),y(Q)}}),Object.defineProperty(this,"num",{get:function(){return i},set:function(){At&&ut("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(U,"enabled",{get:function(){return U._enabled},set:function(g){c(U,g)}}),n(C)&&(C=V.selectedIndex!=null?V.selectedIndex:0),U.selectedIndex=C,I!==!1&&e.styleTransforms(this,V),this.dispose=function(g,h,L){L||(U.lightsEvent&&N.off(D,U.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return U.cloneProps(new e.Indicator(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,this.group,P))}},e.extend(e.Indicator,e.Container,["clone","dispose"],"zimContainer",!1),e.TextInput=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A){var Y="width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",xe;if(xe=yt(e.TextInput,arguments,Y,this))return xe;qe("54.2"),this.group=q;var G=L===!1?{}:e.getStyle("TextInput",this.group,A);n(l)&&(l=G.size!=null?G.size:36),(n(P)||P=="ignore")&&(P=G.padding!=null&&P!="ignore"?G.padding:5),n(F)&&(F=G.paddingH!=null?G.paddingH:P),n(K)&&(K=G.paddingV!=null?G.paddingV:P),n(t)&&(t=G.width!=null?G.width:300),n(r)&&(r=G.height!=null?G.height:l+K*2),n(i)&&(i=G.placeholder!=null?G.placeholder:null),n(o)&&(o=G.text!=null?G.text:""),n(f)&&(f=G.font!=null?G.font:"arial"),n(d)&&(d=G.color!=null?G.color:e.dark),n(p)&&(p=G.backgroundColor!=null?G.backgroundColor:e.lighter),n(w)&&(w=G.borderColor!=null?G.borderColor:null),n(k)&&(k=G.borderWidth!=null?G.borderWidth:null);var Z=ge(t,r,i,o,d,p,w);this.veeObj={width:Z[0],height:Z[1],placeholder:Z[2],text:Z[3],color:Z[4],backgroundColor:Z[5],borderColor:Z[6]};function ge(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i),o=e.Pick.choose(o),d=e.Pick.choose(d),p=e.Pick.choose(p),w=e.Pick.choose(w),n(S)&&(S=G.selectionColor!=null?G.selectionColor:d),n(b)&&(b=G.selectionAlpha!=null?G.selectionAlpha:.2),n(E)&&(E=G.cursorColor!=null?G.cursorColor:d),n(R)&&(R=G.cursorSpeed!=null?G.cursorSpeed:.5),n(C)&&(C=G.shadowColor!=null?G.shadowColor:"rgba(0,0,0,.3)"),n(O)&&(O=G.shadowBlur!=null?G.shadowBlur:20),n(I)&&(I=G.align!=null?G.align:"left"),n(_)&&(_=G.corner!=null?G.corner:0),n(V)&&(V=G.shiftH!=null?G.shiftH:0),n(T)&&(T=G.password!=null?G.password:!1),n(D)&&(D=G.shiftV!=null?G.shiftV:T?l*.25:0),n(x)&&(x=G.maxLength!=null?G.maxLength:I=="center"?Math.floor(t/l)*1.8:null),n(U)&&(U=G.scrollBarActive!=null?G.scrollBarActive:!1),n(Q)&&(Q=G.scrollBarDrag!=null?G.scrollBarDrag:!1),n(J)&&(J=G.scrollBarColor!=null?G.scrollBarColor:w),n(N)&&(N=G.scrollBarAlpha!=null?G.scrollBarAlpha:.3),n(te)&&(te=G.scrollBarFade!=null?G.scrollBarFade:!0),n(ae)&&(ae=G.scrollBarH!=null?G.scrollBarH:!0),n(ee)&&(ee=G.scrollBarV!=null?G.scrollBarV:!0),n(pe)&&(pe=G.readOnly!=null?G.readOnly:!1),n($)&&($=G.inputType!=null?G.inputType:"text"),Q&&(te=G.scrollBarFade!=null?G.scrollBarFade:!1),n(X)&&(X=G.rtl!=null?G.rtl:le.DIR=="rtl"||e.DIR=="rtl"?"rtl":null),n(y)&&(y=G.uppercase!=null?G.uppercase:null),n(h)&&(h=G.keyboardShift!=null?G.keyboardShift:null),y&&(o&&(o=o.toUpperCase()),i&&(i=i.toUpperCase())),n(g)&&(g=G.placeholderInstant!=null?G.placeholderInstant:!0);function he(){return le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?I=="start"?I="right":I=="end"&&(I="left"):I=="start"?I="left":I=="end"&&(I="right"),I}I=he(I),this.zimWindow_constructor(t,r,null,p,w,k,P,_,!1,U,Q,J,N,te,ae,ee,!1,null,null,!1,!0,C,O,F,K,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,L,q,e.copy(G)),this.type="TextInput";var ne=this;this.placeholderLabel=new e.Label({text:i||"",size:l,color:d,font:f,shiftH:V,shiftV:D,valign:"top"}).alp(.5),o==""&&this.add(this.placeholderLabel);var ue=new e.Rectangle({width:t-P*2,height:r-P*2,color:e.clear,style:!1}).center(this);this.cur("text");var Te=this.label=new e.TextInput.LabelInput(o,l,x,T,S,b,E,R,f,d,null,null,null,I,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,V,D,null,null,null,null,$,X,y,g,L,q,A);this.add(Te),Te.setMask(ue),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,I=="right"?(Te.x=t-F,this.placeholderLabel.x=t-this.placeholderLabel.width-F):I=="center"&&(Te.x=t/2,this.placeholderLabel.x=(t-this.placeholderLabel.width)/2),Te.ogx=Te.x,ne.placeholderLabel.x=Te.x,ne.placeholderLabel.align=I;var Fe=new e.Rectangle({width:P,height:r,color:e.clear,style:!1}).addTo(this).expand(0);Fe.on("mousedown",function(_e){Te.onMousedown(_e),_e.stopImmediatePropagation()}),Fe.on("pressmove",function(_e){Te.onPressmove(_e),_e.stopImmediatePropagation()}),Fe.on("dblclick",function(_e){Te.onDblclick(_e),_e.stopImmediatePropagation()});var ie=new e.Rectangle({width:P,height:r,color:e.clear,style:!1}).pos(0,0,e.RIGHT,e.TOP,this).expand(0);ie.on("mousedown",function(_e){Te.onMousedown(_e),_e.stopImmediatePropagation()}),ie.on("pressmove",function(_e){Te.onPressmove(_e),_e.stopImmediatePropagation()}),ie.on("dblclick",function(_e){Te.onDblclick(_e),_e.stopImmediatePropagation()});var Se=Te.text;this.on("mousedown",function(_e){Te.onMousedown(_e),Se=Te.text}),this.on("pressmove",function(_e){Te.onPressmove(_e),_e.stopImmediatePropagation()}),this.on("dblclick",function(_e){Te.onDblclick(_e),_e.stopImmediatePropagation()}),this.added(function(_e){_e.on("stagemousedown",function(Re){ne.hitTestPoint(Re.stageX,Re.stageY)||(Te.focus=!1,Te.text!=Se&&ne.dispatchEvent("change"),Se=Te.text)})});var se=ne.stage?stage.y:0;this.label.on("focus",function(){if(le.M&&h){ne.re&&ne.stage.frame.off("resize",ne.re),ne.re=ne.stage.frame.on("resize",function(){ne.stage&&_e>ne.stage.height/4&&(ne.stage.y=ne.stage.scaleY*(ne.stage.height/4-_e),ne.stage.update())});var _e=ne.label.localToGlobal(0,0).y;ne.stage&&_e>ne.stage.height/4&&(ne.stage.y=ne.stage.scaleY*(ne.stage.height/4-_e),ne.stage.update())}g&&ne.placeholderLabel.parent&&(ne.placeholderLabel.removeFrom(),ne.stage&&ne.stage.update()),ne.dispatchEvent("focus")}),this.label.on("blur",function(){le.M&&h&&ne.stage&&(ne.re&&ne.stage.frame.off("resize",ne.re),ne.stage.y=se,ne.stage.update()),g&&Te.text==""&&!ne.placeholderLabel.parent&&(ne.add(ne.placeholderLabel),ne.stage&&ne.stage.update()),ne.dispatchEvent("blur")});function me(){Te.text!=""&&ne.placeholderLabel.parent&&(ne.placeholderLabel.removeFrom(),ne.stage&&ne.stage.update()),Te.text==""&&!ne.placeholderLabel.parent&&(ne.add(ne.placeholderLabel),ne.stage&&ne.stage.update())}this.label.on("input",function(){me(),ne.dispatchEvent("input")}),this.label.on("keydown",function(_e){this.label.deleteKey=_e.detail==46,ne.dispatchEvent("keydown")}),this.label.on("blinker",function(){var _e=ne.localToGlobal(0,0).x,Re=_e+t-F-Te.blinker.width,de=Te.blinker,Pe=de.localToGlobal(0,0).x,Me=Te.localToGlobal(0,0).x-1,fe=Te.x+Te.blinker.x,ve=e.constrain(fe,F,t-F-Te.blinker.width);if(fe!=ve&&(Te.x-=fe-ve),I=="left")Te.width<ne.width?Te.x=Te.ogx:Re<Pe||Te.oldWidth==Te.width?Te.x-=fe-ve:Te.oldWidth>Te.width&&this.label.deleteKey!=!0&&(Te.x+=Math.abs(de.oldX-Pe)+Te.blinker.width+F);else if(I=="right")Te.width<ne.width?Te.x=Te.ogx:Re<Pe||Te.oldWidth==Te.width?Te.x-=fe-ve:Te.oldWidth>Te.width&&this.label.deleteKey==!0&&Pe<Me-ne.width&&(Te.x-=Math.abs(de.oldX-Pe)+Te.blinker.width+F);else if(I=="center"){if(Te.width<ne.width)Te.x=Te.ogx;else if(Re<Pe)Te.x-=fe-ve;else if(Te.oldWidth==Te.width)Te.x-=fe-ve;else if(Te.oldWidth>Te.width&&Re>Pe){var Ie=_e+ne.width*.5;this.label.deleteKey!=!0?Te.x+=Te.blinker.width+F:Te.x-=Te.blinker.width+F}}Te.oldWidth=Te.width,de.oldX=Pe,ne.stage&&ne.stage.update()}),Object.defineProperty(ne,"text",{get:function(){return Te.hiddenInput.value},set:function(_e){Se=_e,Te.setText(_e),me(),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ne},set:function(){e.KEYFOCUS=ne}}),e.KEYFOCUS||j(),this.on("mousedown",function(){j()});function j(){ne.keyFocus=!0}Object.defineProperty(ne,"readOnly",{get:function(){return pe},set:function(_e){pe=_e,ne.htmlTag.setAttribute("readonly",pe)}}),pe&&(ne.readOnly=!0),Object.defineProperty(ne,"focus",{get:function(){return Te.focus},set:function(_e){Te.focus=_e}}),Object.defineProperty(ne,"color",{get:function(){return Te.color},set:function(_e){Te.color=latestColor=_e,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}}),Object.defineProperty(ne,"size",{get:function(){return Te.size},set:function(_e){Te.size=_e,Te.hiddenInput.style.fontSize=_e+"px",!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}}),Object.defineProperty(ne,"align",{get:function(){return Te.align},set:function(_e){Te.align=I=he(_e),I=="right"?Te.x=t-Te.width:I=="center"?Te.x=t/2:Te.x=0,ne.placeholderLabel.x=Te.x,ne.placeholderLabel.align=I,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}}),Object.defineProperty(ne,"font",{get:function(){return Te.font},set:function(_e){Te.font=_e,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}}),Object.defineProperty(ne,"selectionAlpha",{get:function(){return Te.selectionAlpha},set:function(_e){Te.selectionAlpha=_e,Te.selection.alpha!=0&&(Te.selection.alpha=_e),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ne.stage&&ne.stage.update()}}),e.styleTransforms(this,G),this.clone=function(_e){return ne.cloneProps(new e.TextInput(_e||!e.isPick(Z[0])?t:Z[0],_e||!e.isPick(Z[1])?r:Z[1],_e||!e.isPick(Z[2])?i:Z[2],_e||!e.isPick(Z[3])?o:Z[3],l,f,_e||!e.isPick(Z[4])?d:Z[4],_e||!e.isPick(Z[5])?p:Z[5],_e||!e.isPick(Z[6])?w:Z[6],k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,this.group,A))}},e.extend(e.TextInput,e.Window,"clone","zimWindow",!1),e.TextInput.LabelInput=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe){this.zimLabel_constructor(t,r,w,k,null,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,null,X,y,null,g,A,Y,xe),this.type="LabelInput",n(k)&&(k=e.dark),n(l)&&(l=k),n(f)&&(f=.2),this.selectionAlpha=f,n(d)&&(d=k),n(p)&&(p=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.value=t,h=="text"&&o&&(h="password"),this.hiddenInput.type=h,h=="number"&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric"),i>0&&(this.hiddenInput.maxLength=i),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(Z=this.stage.frame),Z.zil&&le.removeEventListener("keydown",Z.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(Z=this.stage.frame),Z.zil&&le.addEventListener("keydown",Z.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=h,this.dispatchEvent("blur")},this.onInput=function(){q&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var ge=this.hiddenInput.value;h=="number"&&(ge=ge.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=ge),this.text=this.hiddenInput.type=="password"?ge.replace(/./g,"*"):ge,this.measureText(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var G=this;this.onKeydown=function(ge){this.deleteKey=ge.code=="Backspace"||ge.code=="Delete",this.blinker.replayTween(),setTimeout(function(){let he=new CustomEvent("keydown",{detail:ge.keyCode});G.positionBlinkerAndSelection.call(G),G.dispatchEvent(he)},10)},this.onMousedown=function(ge){var he=this.text.length,ne=this.eventPositionGlobalToLocal(ge);this.focus||(this.hiddenInput.focus(),(h=="number"||h=="email")&&(this.hiddenInput.type="text"));var ue=this.mapPointToIndex(ne);L?this.hiddenInput.setSelectionRange(he-ue,he-ue):this.hiddenInput.setSelectionRange(ue,ue),this.positionBlinkerAndSelection()},this.onPressmove=function(ge){var he=this.text.length;this.focus||this.hiddenInput.focus();var ne=this.eventPositionGlobalToLocal(ge),ue;L?ue=he-this.mapPointToIndex(ne):ue=this.mapPointToIndex(ne),this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=ue?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,ue,L?"backward":"forward"):this.hiddenInput.setSelectionRange(ue,this.hiddenInput.selectionEnd,L?"forward":"backward"):this.hiddenInput.selectionDirection===(L?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,ue,L?"backward":"forward"):this.hiddenInput.setSelectionRange(ue,this.hiddenInput.selectionEnd,L?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var ge=this.text.length;if(this.focus){var he=this.backing||this.background?this.paddingH:0,ne=this.backing||this.background?this.paddingV:0;if(this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd){var ue,Te;L?(ue=this.textWidthArray[ge-this.hiddenInput.selectionStart],Te=this.textWidthArray[ge-this.hiddenInput.selectionEnd],this.selection.widthOnly=Te-ue,this.selection.pos(Te+he-1+ee,ne+pe)):(ue=this.textWidthArray[this.hiddenInput.selectionStart],Te=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=Te-ue,this.selection.pos(ue+he-1+ee,ne+pe)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)}else this.selection.alp(0);this.blinker.heightOnly=this.textHeight;var Fe=this.hiddenInput.selectionDirection==="backward"?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd;Fe||(Fe=0),L&&(Fe=ge-Fe),this.blinker.pos(this.textWidthArray[Fe]+he-1+(b=="right"&&this.text==""?this.width:b=="center"&&this.text==""?this.width/2:0)+ee,ne+pe),this.dispatchEvent("blinker")}this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(ge){var he=this.globalToLocal(ge.stageX/e.scaX,ge.stageY/e.scaY);return b=="right"?he.x-=this.label.x-this.width:b=="center"?he.x-=(this.label.x-this.width)/2:he.x-=this.label.x,he.y-=this.label.y,he},this.mapPointToIndex=function(ge){for(var he=this.textWidthArray.length-1,ne=0;ne<this.textWidthArray.length-1;ne++){var ue=(this.textWidthArray[ne]+this.textWidthArray[ne+1])/2;if(ge.x<=ue){he=ne;break}}return he},this.measureText=function(){var ge=this.label.clone(),he=this.text;L&&(he=he.split("").reverse().join(""));for(var ne=0;ne<he.length&&ne<this.previousMeasuredText.length&&he[ne]===this.previousMeasuredText[ne];)ne++;for(this.textWidthArray=this.textWidthArray.slice(0,ne+1),ne++;ne<=he.length;ne++)ge.text=he.slice(0,ne),this.textWidthArray.push(ge.getMeasuredWidth());this.previousMeasuredText=he,this.textHeight=ge.getMeasuredLineHeight()},this.setText=function(ge){q&&(ge=ge.toUpperCase()),this.hiddenInput.value=ge,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===G.hiddenInput},set:function(ge){ge===!0?G.hiddenInput.focus():G.hiddenInput.blur()}});var Z;this.added(function(ge){Z=ge.frame,G.hiddenInput.addEventListener("focus",G.onFocus.bind(G)),G.hiddenInput.addEventListener("blur",G.onBlur.bind(G))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new e.Rectangle({width:2,height:1,color:d,style:!1}).animate({obj:{alpha:0},wait:p,time:.1,rewind:!0,rewindWait:p,loop:!0,loopWait:p}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new e.Rectangle({width:1,height:1,color:l,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},e.extend(e.TextInput.LabelInput,e.Label,null,"zimLabel",!1),e.List=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re,de,Pe,Me,fe,ve,Ie,we,Xe,ye,Ge,He,Oe,ce,Ue,Qe,Je,nt,gt,We,st,at){var Ae="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, continuous, style, group, inherit",Le;if(Le=yt(e.List,arguments,Ae,this))return Le;qe("60.5"),this.group=st;var De=We===!1?{}:e.getStyle("List",this.group,at);n(t)&&(t=De.width!=null?De.width:300);var ft=r;n(r)&&(r=De.height!=null?De.height:n(ve)?200:200+ve.height),n(i)&&(i=i=De.list!=null?De.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),i.length==0&&(i=["%-&"]),this.originalList=i,n(o)&&(o=De.viewNum!=null?De.viewNum:5),n(l)&&(l=De.vertical!=null?De.vertical:!0),n(f)&&(f=De.currentSelected!=null?De.currentSelected:!0);var mt=!n(d)||!n(w);n(Ie)&&(Ie=De.checkBox!=null?De.checkBox:!1),n(d)&&(d=De.align!=null?De.align:Ie?"left":"center"),n(p)&&(p=De.valign!=null?De.valign:"center"),n(w)&&(w=De.labelAlign!=null?De.labelAlign:d),n(k)&&(k=De.labelValign!=null?De.labelValign:p),n(b)&&(b=De.indent!=null?De.indent:Ie?0:10),n(x)&&(x=De.labelIndent!=null?De.labelIndent:b),n(T)&&(T=De.labelIndentH!=null?De.labelIndentH:x),n(S)&&(S=De.labelIndentV!=null?De.labelIndentV:x),n(E)&&(E=De.spacing!=null?De.spacing:2),n(P)&&(P=De.backdropColor!=null?De.backdropColor:e.dark),n(R)&&(R=De.backgroundColor!=null?De.backgroundColor:e.tin),n(C)&&(C=De.rollBackgroundColor!=null?De.rollBackgroundColor:e.grey),n(O)&&(O=De.downBackgroundColor!=null?De.downBackgroundColor:C),n(I)&&(I=De.selectedBackgroundColor!=null?De.selectedBackgroundColor:e.charcoal),n(_)&&(_=De.selectedRollBackgroundColor!=null?De.selectedRollBackgroundColor:e.grey),n(F)&&(F=De.color!=null?De.color:e.white),n(K)&&(K=De.rollColor!=null?De.rollColor:F),n(V)&&(V=De.downColor!=null?De.downColor:K),n(D)&&(D=De.selectedColor!=null?De.selectedColor:F),n(U)&&(U=De.selectedRollColor!=null?De.selectedRollColor:K),n(P)&&(P=De.backdropColor!=null?De.backdropColor:P);var Ze=Q,dt=J;n(Q)&&(Q=De.borderColor!=null?De.borderColor:e.silver),n(J)&&(J=De.borderWidth!=null?De.borderWidth:1),n(N)&&(N=De.padding!=null?De.padding:E),n(te)&&(te=De.corner!=null?De.corner:0),n(ae)&&(ae=De.swipe!=null?De.swipe:!0),n(ee)&&(ee=De.scrollBarActive!=null?De.scrollBarActive:!0),n(pe)&&(pe=De.scrollBarDrag!=null?De.scrollBarDrag:!0),n($)&&($=De.scrollBarColor!=null?De.scrollBarColor:Q),n(X)&&(X=De.scrollBarAlpha!=null?De.scrollBarAlpha:.3),n(y)&&(y=De.scrollBarFade!=null?De.scrollBarFade:!0),n(g)&&(g=De.scrollBarH!=null?De.scrollBarH:!l),n(h)&&(h=De.scrollBarV!=null?De.scrollBarV:l),pe&&(y=De.scrollBarFade!=null?De.scrollBarFade:!1),n(L)&&(L=De.scrollBarOverlay!=null?De.scrollBarOverlay:!0),n(q)&&(q=De.slide!=null?De.slide:!0),n(A)&&(A=De.slideFactor!=null?De.slideFactor:.95),n(Y)&&(Y=De.slideSnap!=null?De.slideSnap:l?"vertical":"horizontal"),n(G)&&(G=De.shadowColor!=null?De.shadowColor:"rgba(0,0,0,.3)"),n(Z)&&(Z=De.shadowBlur!=null?De.shadowBlur:20),n(he)&&(he=De.paddingV!=null?De.paddingV:N),n(ge)&&(ge=De.paddingH!=null?De.paddingH:N),n(ne)&&(ne=De.scrollWheel!=null?De.scrollWheel:!0),n(Te)&&(Te=De.titleBar!=null?De.titleBar:null),n(Fe)&&(Fe=De.titleBarColor!=null?De.titleBarColor:null),n(ie)&&(ie=De.titleBarBackgroundColor!=null?De.titleBarBackgroundColor:null),n(Se)&&(Se=De.titleBarHeight!=null?De.titleBarHeight:35),n(se)&&(se=De.draggable!=null?De.draggable:null),n(me)&&(me=De.boundary!=null?De.boundary:null),n(j)&&(j=De.onTop!=null?De.onTop:null),n(_e)&&(_e=De.close!=null?De.close:null),n(Re)&&(Re=De.closeColor!=null?De.closeColor:null),n(de)&&(de=De.collapse!=null?De.collapse:null),n(Pe)&&(Pe=De.collapseColor!=null?De.collapseColor:null),n(fe)&&(fe=De.excludeCustomTap!=null?De.excludeCustomTap:!1),n(Ie)&&(Ie=De.checkBox!=null?De.checkBox:!1),n(we)&&(we=De.pulldown!=null?De.pulldown:!1),n(Oe)&&(Oe=De.pulldownToggle!=null?De.pulldownToggle:!1),n(He)&&(He=De.noScale!=null?De.noScale:!1),n(Xe)&&(Xe=De.clone!=null?De.clone:!1),n(ce)&&(ce=De.optimize!=null?De.optimize:!0),n(Ue)&&(Ue=De.keyEnabled!=null?De.keyEnabled:null),n(Qe)&&(Qe=De.resizeHandle!=null?De.resizeHandle:null),n(Je)&&(Je=De.resizeBoundary!=null?De.resizeBoundary:null),n(nt)&&(nt=De.resizeVisible!=null?De.resizeVisible:!1),n(gt)&&(gt=De.continuous!=null?De.continuous:!1),Te===!1&&(Te=null),this.vertical=l;var Ee=this,ot=r;le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?d=="start"?d="right":d=="end"&&(d="left"):d=="start"?d="left":d=="end"&&(d="right");var Ve;gt?(Ee.continuous=!0,Ve=e.copy(i),e.loop(i.length,function(rt){i[rt].clone?Ve.push(i[rt].clone()):Ve.push(i[rt])})):Ve=i,Ie&&e.loop(Ve,function(rt,bt){Ve[bt]!="%-&"&&(Ve[bt]=e.List.checkItem(rt,null,t,"left",10,10,E,F,K,D,U,R,C,I,_))});var Ye=v(),Ke;if(Ve.constructor=={}.constructor){var ze=n(Ve.shade)?n(De.shade)?.2:De.shade:Ve.shade,tt=n(Ve.dim)?n(De.dim)?.1:De.dim:Ve.dim,ht=n(Ve.shift)?n(De.shift)?15:De.shift:Ve.shift,Be=n(Ve.bloom)?n(De.bloom)?!1:De.bloom:Ve.bloom,it=n(Ve.whither)?n(De.whither)?!1:De.whither:Ve.whither,vt=n(Ve.open)?n(De.open)?!1:De.open:Ve.open,et=n(Ve.expander)?n(De.expander)?"plus":De.expander:Ve.expander;et=et.toLowerCase(),et=="arrows"&&(et="arrow"),et!="none"&&et!="arrow"&&(et="plus"),Be===!0&&(Be=Ye=="s"?.01:10),it===!0&&(it=Ye=="s"?.01:10),a(Be),a(it),ht===!0&&(ht=15),ze===!0&&(ze=.2),tt===!0&&(tt=.1);var wt=n(Ve.subStyles)?n(De.subStyles)?{}:De.subStyles:Ve.subStyles;n(Ve.menu)||(Ve=Ve.menu),Ke=Ee.tree=new e.Hierarchy(Ve),Ve=Ke.getLinearList(),mt||(d=w="left")}we&&(o=n(Ke)?Ve.length:Ke.length,n(ft)&&(r=o*t/620*100+(o+1)*E+(n(Te)?0:Se)),J=0,I=R,P=e.clear,ae=!1);var xt=0,_t=0;e.loop(Ve,function(rt){rt.type=="ListItem"&&(rt.width=t-E*2),He&&(rt.width&&(xt+=rt.width),rt.height&&(_t+=rt.height))}),xt&&(xt+=E*(Ve.length-1)),_t&&(_t+=E*(Ve.length-1)),this.align=d,this.valign=p,this.indent=b,n(ve)||(r=r-ve.height,ve.list=Ee,Ee.organizer=ve,ve.setButtons(),Se+=ve.height),gt&&(ee=!1),this.zimWindow_constructor(t,r,null,P,Q,J,N,te,ae,ee,pe,$,X,y,g,h,q,A,Y,xe,!0,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re,ye,!1,null,Qe,de,Pe,Me,ce,Je,nt,gt?l?"vertical":"horizontal":null,We,st,e.copy(De)),this.type="List",n(Te)||(this.titleBarLabel.pos(null,Se-30,null,!0),n(Se)&&(Se=30),r=r-Se),n(ve)||ve.addTo(Ee).loc(0,-ve.height),xt&&He?(Ee.itemWidth=l?t-(ee?L?0:6:0):xt/Ve.length,Ee.itemHeight=l?_t/Ve.length:r-(ee?L?0:6:0)):(Ee.itemWidth=l?t-(ee?L?0:6:0):t/o,Ee.itemHeight=l?r/o:r-(ee?L?0:6:0));var lt,Dt=e.copy(De);delete Dt.borderWidth,delete Dt.borderColor;function Pt(rt){lt=Ee.tabs=new e.Tabs({width:l?Ee.itemWidth:Ee.itemWidth*Ve.length,height:l?Ee.itemHeight*Ve.length:Ee.itemHeight,tabs:rt,spacing:E,vertical:l,backgroundColor:R,rollBackgroundColor:C,downBackgroundColor:O,selectedBackgroundColor:I,selectedRollBackgroundColor:_,color:F,rollColor:K,downColor:V,selectedColor:D,selectedRollColor:U,backdropColor:P,currentEnabled:!0,currentSelected:f,align:d,valign:p,labelAlign:w,labelValign:k,labelIndent:x,labelIndentH:T,labelIndentV:S,indent:b,useTap:!0,excludeCustomTap:fe,keyWrap:!1,keyEnabled:Ue,style:We,group:st,inherit:Dt}).siz(l?t-ge*2:null,l?null:r-he*2).mov(l?0:ge,l?he:0),Ee.add(lt),e.loop(lt.labels,function(bt){bt&&(bt.backgroundColor=e.clear)})}Pt(e.copy(Ve,Xe)),gt&&Ee.on("scrolling",function(){var rt=Ee.tabs.localToLocal(0,0,Ee);l&&(rt.y>=-Ee.tabs.buttons[0].height&&(Ee.tabs.y-=Ee.tabs.height/2+E/2),rt.y-Ee.tabs.buttons[Ee.tabs.buttons.length-1].height<=r-Ee.tabs.height&&(Ee.tabs.y+=Ee.tabs.height/2+E/2))});function It(rt,bt,Rt){rt.listZID=bt,rt.label&&(ze&&new e.Rectangle(ht*(Rt.level+1),rt.height).alp(ze).pos(0,0,Ee.align=="right",!1,rt),tt&&new e.Rectangle(rt.width,rt.height).alp((Rt.level+1)*tt).addTo(rt).bot().ord(1),ht&&Ee.align!="center"&&(rt.label.x+=(Ee.align=="right"?-1:1)*ht*(Rt.level+1)));var Mt=Ke.getData(bt);Mt.obj=rt,Mt.list&&!e.isEmpty(Mt.list)&&(rt.expander=new e.Label({size:et=="arrow"?22:36,text:Mt.open?et=="arrow"?"\u25B2":"-":et=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(F,"rgba",.6)}).center(rt).alp(et=="none"?0:.7).pos(15,null,Ee.align!="right").mov(0,Mt.open?-3:0))}function Vt(){if(!(!Ee.selected||!Ee.selected.expander)){var rt=Ke.getData(Ee.selected.listZID),bt;if(rt.open){Ee.selected.expander&&(Ee.selected.expander.text=et=="arrow"?"\u25BC":"+",Ee.selected.expander.mov(0,3)),rt.open=!1;var Rt=Ke.getNextSibling(Ee.selected.listZID),Mt;n(Rt)?Mt=Ee.items.length-1:Mt=e.loop(Ee.items,function(Zt,en){if(Zt.listZID==Rt)return en-1}),it?(bt=0,Ee.enabled=!1,e.interval(it,function(Zt){Ee.removeAt(1,Ee.selectedIndex+Mt-Ee.selectedIndex-bt),bt++,Zt.total==Zt.count+1&&(Ee.enabled=!0,Ee.dispatchEvent("collapsed"))},Mt-Ee.selectedIndex,!0)):(Ee.removeAt(Mt-Ee.selectedIndex,Ee.selectedIndex+1),Ee.dispatchEvent("collapsed"))}else{rt.open=!0,Ee.selected.expander&&(Ee.selected.expander.text=et=="arrow"?"\u25B2":"-",Ee.selected.expander.mov(0,-3));var Nt=Ke.getLinearList(rt.list),kt=Ke.getLinearIDs(rt.list),Bt;if(rt.opened)Array.isArray(Nt)&&(Be?(bt=0,Ee.enabled=!1,e.interval(Be,function(Zt){Ee.addAt(Nt[bt],Ee.selectedIndex+1+bt),Bt=new je.Event("bloom"),Bt.item=Nt[bt],Ee.dispatchEvent(Bt),Zt.total==Zt.count+1&&(Ee.enabled=!0,Bt=new je.Event("expanded"),Bt.items=Nt,Ee.dispatchEvent(Bt)),bt++},Nt.length,!0)):(Ee.addAt(Nt,Ee.selectedIndex+1),Bt=new je.Event("expanded"),Bt.items=Nt,Ee.dispatchEvent(Bt)));else{rt.opened=!0;var Wt=wt[rt.level];n(Wt)&&(Wt={}),Array.isArray(Nt)&&(Be?(bt=0,Ee.enabled=!1,e.interval(Be,function(Zt){Ee.addAt(Nt[bt],Ee.selectedIndex+1+bt,{backgroundColor:Wt.backgroundColor,color:Wt.color,rollBackgroundColor:Wt.rollBackgroundColor,rollColor:Wt.rollColor,selectedBackgroundColor:Wt.selectedBackgroundColor,selectedColor:Wt.selectedColor,selectedRollBackgroundColor:Wt.selectedRollBackgroundColor,selectedRollColor:Wt.selectedRollColor});var en=kt[bt],Ht=Ee.items[Ee.selectedIndex+1+bt];Wt.borderColor&&(Ht.borderColor=Wt.borderColor),It(Ht,en,rt),Ht.label&&(Ht.label.backgroundColor=e.clear),Bt=new je.Event("bloom"),Bt.item=Ht,Ee.dispatchEvent(Bt),Zt.total==Zt.count+1&&(Ee.enabled=!0,Bt=new je.Event("expanded"),Bt.items=Nt,Ee.dispatchEvent(Bt)),bt++,Ee.stage&&Ee.stage.update()},Nt.length,!0)):(Ee.addAt(Nt,Ee.selectedIndex+1,{backgroundColor:Wt.backgroundColor,color:Wt.color,rollBackgroundColor:Wt.rollBackgroundColor,rollColor:Wt.rollColor,selectedBackgroundColor:Wt.selectedBackgroundColor,selectedColor:Wt.selectedColor,selectedRollBackgroundColor:Wt.selectedRollBackgroundColor,selectedRollColor:Wt.selectedRollColor}),e.loop(kt,function(Zt,en){var Ht=Ee.items[Ee.selectedIndex+1+en];It(Ht,Zt,rt),Ht.label&&(Ht.label.backgroundColor=e.clear)}),Bt=new je.Event("expanded"),Bt.items=Nt,Ee.dispatchEvent(Bt)))}}}}Ee.expandList=function(rt){return Ee.selectedIndex=rt,Ee.selected&&Vt(),Ee.selected};var Gt;if(Ke){Oe&&Ee.added(function(rt){Gt=rt,Ee.stageToggleEvent=Gt.on("stagemousedown",function(){var bt=Gt.getObjectUnderPoint(Gt.frame.mouseX,Gt.frame.mouseY);if(!(bt&&Ee.contains(bt))&&!(!Ee.enabled||!Ee.selected)){var Rt=Ke.getData(Ee.selected.listZID);Rt.open&&Vt()}})});var jt=Ke.getLinearIDs();e.loop(jt,function(rt,bt){Ee.tabs.buttons[bt].listZID=rt}),e.loop(Ee.tabs.buttons,function(rt){var bt=Ke.getData(rt.listZID);e.isEmpty(bt.list)||(rt.expander=new e.Label({size:et=="arrow"?22:36,text:et=="arrow"?"\u25BC":"+",align:"center",color:e.convertColor(F,"rgba",.6)}).center(rt).alp(et=="none"?0:.7).pos(15,null,Ee.align!="right"))});var sn=vt;Ee.toggle=function(rt){if(n(rt))rt=!sn;else if(rt==sn)return;Ee.selectedIndex=0,sn=rt,Vt()},Object.defineProperty(Ee,"toggled",{get:function(){return sn},set:function(rt){sn!=rt&&Ee.toggle()}}),Ee.tap(Vt)}var Kt;lt.tap(function(rt){rt.target.selectedIndex!=Ee.selectedIndex&&(Ee.selectedIndex=lt.selectedIndex,Ee.dispatchEvent("change"),Oe&&(Ee.selectedIndex=0),rt.preventDefault())}),lt.on("keychange",function(rt){if(rt.target.selectedIndex!=Ee.selectedIndex){Ee.selectedIndex=lt.selectedIndex;var bt;setTimeout(function(){l?(bt=Ee.selected.y+Ee.scrollY,(bt<0||bt>Ee.height-Ee.selected.height)&&Ee.animateTo(Ee.selectedIndex,Ye=="ms"?100:.1)):(bt=Ee.selected.x+Ee.scrollX,(bt<0||bt>Ee.width-Ee.selected.width)&&Ee.animateTo(Ee.selectedIndex,Ye=="ms"?100:.1))},100),Ee.dispatchEvent("change")}}),this.getItemIndex=function(rt){return Ee.items.indexOf(rt)},this.animateTo=function(rt,bt){n(rt)&&(rt=0),n(bt)&&(bt=.05);var Rt=v(bt);Ee.selectedIndex=rt;var Mt=Lt(rt),Nt;return l?(Nt=Math.abs(Ee.scrollY-Mt)/Ee.itemHeight,Ee.animate({scrollY:Mt},Nt*bt/(Rt=="s"?1:1e3))):(Nt=Math.abs(Ee.scrollX-Mt)/Ee.itemWidth,Ee.animate({scrollX:Mt},Nt*bt/(Rt=="s"?1:1e3))),Ee},this.addAt=function(rt,bt,Rt,Mt){if(n(rt))return Ee;if(Ee.tabs.loop(function(kt){kt.visible=!0}),rt.type=="ListItem"?rt.width=t-E*2:Array.isArray(rt)&&e.loop(rt,function(kt){kt.type=="ListItem"&&(kt.width=t-E*2)}),Mt)if(Array.isArray(rt)){var Nt=[];e.loop(rt,function(kt){kt.clone?Nt.push(rt.clone()):Nt.push(e.copy(rt,Mt))}),Ee.tabs.addAt(Nt,bt,Rt)}else rt.clone?Ee.tabs.addAt(rt.clone(),bt,Rt):Ee.tabs.addAt(e.copy(rt,Mt),bt,Rt);else Ie&&(Array.isArray(rt)||(rt=[rt]),e.loop(rt,function(kt,Bt){typeof kt=="string"&&(rt[Bt]=e.List.checkItem(kt,null,t,"left",10,10,E,F,K,D,U,R,C,I,_))})),Ee.tabs.addAt(rt,bt,Rt);return Ee.update(),Ee},this.removeAt=function(rt,bt){gt&&Ee.tabs.removeAt(rt,bt+i.length),Ee.tabs.removeAt(rt,bt),Ee.tabs.loop(function(Mt){Mt.visible=!0}),Kt=Ee.tabs.selectedIndex;var Rt=lt.getBounds();return lt.setBounds(0,0,Rt.width,Rt.height),Rt.height<r&&(Ee.scrollY=0),Ee.update(),Ee},Ve[0]=="%-&"&&Ve.length==1&&Ee.removeAt(1,0),this.clear=function(){return Ee.tabs.removeAt(Ee.length,0),Ee.contentContainer.x=0,Ee.contentContainer.y=0,Ee.update(),Ee},this.setCheck=function(rt,bt){n(rt)&&(rt=0),n(bt)&&(bt=!0),Ee.items[rt].checkBox.checked=bt,Ee.items[rt].content.zimOut()},this.getCheck=function(rt){return n(rt)&&(rt=0),Ee.items[rt].checkBox.checked},this.setChecks=function(rt){return e.loop(Ee.items,function(bt){bt.checkBox.checked=rt,bt.content.zimOut()}),Ee},Object.defineProperty(Ee,"items",{get:function(){return Ee.tabs.buttons},set:function(){At&&ut("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Ee,"list",{get:function(){return Ee.tabs.buttons},set:function(){At&&ut("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Ee,"length",{get:function(){return Ee.tabs.buttons.length},set:function(){At&&ut("List() - length is read only")}}),Object.defineProperty(Ee,"selectedIndex",{get:function(){return gt?(Kt+i.length)%i.length:Kt},set:function(rt){lt.selectedIndex=rt,Ee.label=lt.label,Ee.selected=lt.selected,Kt=rt,!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Ee.stage&&Ee.stage.update()}}),f&&(Ee.selectedIndex=0),Object.defineProperty(Ee,"selectedIndexPlusPosition",{get:function(){return gt?(Kt+i.length)%i.length:Kt},set:function(rt){Ee.selectedIndex=rt,Kt=rt,l?Ee.scrollY=Lt(rt)-2:Ee.scrollX=Lt(rt),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Ee.stage&&Ee.stage.update()}});function Lt(rt){if(l){var bt=-(Ee.itemHeight+E)*rt+r/2-Ee.itemHeight/2;return(Ee.itemHeight+E)*Ee.length<r&&(bt=0),bt>0&&(bt=0),(Ee.itemHeight+E)*Ee.length>r&&bt<-Ee.tabs.height+r-he*2&&(bt=-Ee.tabs.height+r-he*2),bt}else{var Rt=-(Ee.itemWidth+E)*rt+t/2-Ee.itemWidth/2;return(Ee.itemWidth+E)*Ee.length<t&&(Rt=0),Rt>0&&(Rt=0),(Ee.itemWidth+E)*Ee.length>t&&Rt<-Ee.tabs.width+t-ge*2&&(Rt=-Ee.tabs.width+t-ge*2),Rt}}Object.defineProperty(Ee,"text",{get:function(){return Ee.label?Ee.label.text:null},set:function(rt){Ee.label&&(Ee.label.text=rt)}}),Object.defineProperty(Ee,"bloom",{get:function(){return Be},set:function(rt){Be=rt}}),Object.defineProperty(Ee,"currentValue",{get:function(){return Ee.label?Ee.label.text:null},set:function(rt){var bt=e.loop(Ee.list,function(Rt,Mt){var Nt;Rt.label&&(Nt=Rt.label.text),Rt.type=="Label"&&(Nt=Rt.text);var kt=new RegExp(rt,"i");if(Nt&&Nt.match(kt))return Mt});bt!==!0&&(Ee.selectedIndexPlusPosition=bt)}}),Object.defineProperty(Ee,"itemDown",{get:function(){return Ee.tabs.buttonDown},set:function(){}}),Object.defineProperty(Ee,"itemsText",{get:function(){for(var rt=[],bt=0;bt<Ee.tabs.buttons.length;bt++){var Rt=Ee.tabs.buttons[bt].label;Rt&&!n(Rt.text)?rt.push(Rt.text):rt.push(null)}return rt},set:function(){At&&ut("List() - itemsText is read only")}}),f&&(Ee.selectedIndex=0),Object.defineProperty(Ee,"checkBoxes",{get:function(){for(var rt=[],bt=0;bt<Ee.tabs.buttons.length;bt++){var Rt=Ee.tabs.buttons[bt].checkBox;rt.push(Rt)}return rt},set:function(){At&&ut("List() - checkBoxes is read only")}}),Object.defineProperty(Ee,"accordionIndex",{get:function(){var rt=Ee.selected.listZID;return rt?Number(rt.split("id")[1]):null},set:function(){At&&ut("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},this.openAtLevel=function(rt){if(!n(rt)){var bt=[];e.loop(rt,function(Mt){bt.push(Mt)});var Rt=Ee.bloom;Ee.bloom=!1,e.interval(.01,function(Mt){var Nt=Ee.items[Mt.count];Nt?bt.indexOf(Ee.tree.getData(Nt.listZID).level)!=-1&&Ee.expandList(Mt.count):(Mt.clear(),Ee.bloom=Rt)},null,!0,!1,"s")}};var Qt;this.openAtNum=function(rt){if(!n(rt)){if(!Qt){let Zt=function(en,Ht){for(bt in en)Qt[bt]=Ht,Zt(en[bt].list,bt)};var bt;Qt={},Zt(Ee.tree.data);var Rt={};for(var Mt in Qt){Rt[Mt]||(Rt[Mt]=[]);for(var Nt=Qt[Mt];Nt;)Rt[Mt].unshift(Nt),Nt=Qt[Nt];Rt[Mt].push(Mt)}}var kt="id"+rt,Bt=Rt[kt],Wt=Ee.bloom;Ee.bloom=!1,Ri(.01,function(Zt){var en=Ee.items[Zt.count];en?Bt.indexOf(en.listZID)!=-1&&Ee.expandList(Zt.count):(Zt.clear(),Ee.bloom=Wt)},null,!0,!1,"s")}},vt&&Vt&&Ee.openAtLevel(1e4),n(Ge)&&(Ge=De.selectedIndex!=null?De.selectedIndex:0),Ee.selectedIndex=Ge,We!==!1&&e.styleTransforms(this,De),this.clone=function(){return Ee.cloneProps(new e.List(t,ot,e.copy(Ee.originalList,!0),o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Ze,dt,N,e.copy(te),ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re,de,Pe,Me,fe,ve,Ie,we,Xe,ye,Ge,He,Oe,ce,Ue,Qe,Je,nt,gt,We,this.group,at))},this.dispose=function(rt,bt,Rt){return Rt||(Ee.stageToggleEvent&&Gt.off("stagemousedown",Ee.stageToggleEvent),Ee.organizer&&Ee.organizer.dispose(),this.zimWindow_dispose()),!0}},e.extend(e.List,e.Window,["clone","dispose"],"zimWindow",!1),e.List.makeBase=function(t,r,i,o){n(o)&&(o=e.dark),t.backing=new e.Rectangle(t.width,t.height,o).center(t),r.type=="Label"?t.label=r:t.label=new e.Label(r,null,null,e.white),t.text=t.label.text,t.label.center(t).loc(i)},e.List.slider=function(t,r,i,o,l,f,d,p,w,k,x,T,S){var b="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor",E;if(E=yt(e.List.slider,arguments,b))return E;var R=new e.Container(620,100);return R.type="ListItem",R.listItem="Slider",n(w)&&(w=20),n(k)&&(k=30),n(x)&&(x=1),n(T)&&(T=0),e.List.makeBase(R,t,w,S),R.slider=new e.Slider({inside:!0,barWidth:40,barLength:150,barColor:e.blue,min:r,max:i,step:f}).sca(1.5).center(R).mov(20).change(function(){R.stepper.currentValue=T+Math.round(R.slider.currentValue*x*1e3)/1e3,d&&p&&(d[p]=R.slider.currentValue),l&&typeof l=="function"&&l(R.slider.currentValue,R.parent),R.slider.stage&&R.slider.stage.update()}),n(o)||(R.slider.currentValue=o),R.stepper=new e.Stepper({corner:0,arrows:!1,stepperType:"number",min:T+r*x,max:T+i*x,step:f}).center(R).pos(k,null,!0).change(function(){}),n(o)||(R.stepper.currentValue=T+o*x),R},e.List.checkBox=function(t,r,i,o,l,f,d,p){var w="label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor",k;if(k=yt(e.List.checkBox,arguments,w))return k;var x=new e.Container(620,100);return x.type="ListItem",x.listItem="CheckBox",n(f)&&(f=20),n(d)&&(d=30),e.List.makeBase(x,t,f,p),x.checkBox=new e.CheckBox({startChecked:r,label:""}).sca(1.2).center(x).pos(256+d,null,!0).change(function(){o&&l&&(o[l]=x.checkBox.checked),i&&typeof i=="function"&&i(x.checkBox.checked,x.parent),x.checkBox.stage&&x.checkBox.stage.update()}),x},e.List.colorPicker=function(t,r,i,o,l,f,d,p,w){var k="label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor",x;if(x=yt(e.List.colorPicker,arguments,k))return x;var T=new e.Container(620,100);return T.type="ListItem",T.listItem="ColorPicker",n(d)&&(d=20),n(p)&&(p=30),e.List.makeBase(T,t,d,w),n(r)&&(r=e.pink),T.colorPicker=i||new e.ColorPicker({alphaPicker:!1,selectedColor:r}),T.swatch=new e.Rectangle(132,66,r,e.lighter,5).center(T).pos(270,null,!0).cur(),T.swatch.on("mousedown",function(){T.colorPicker.selectedColor=T.swatch.color,T.colorPicker.show()}),T.colorLabel=new e.Label(T.swatch.color.toUpperCase(),40,null,e.light).center(T).pos(p,null,!0),T.colorPicker.on("close",function(){var S=T.colorPicker.stage;T.colorPicker.hide(),S&&S.update()}),T.colorPicker.on("change",function(){var S=T.colorPicker.stage;T.swatch.color=T.colorPicker.selectedColor,T.colorLabel.text=T.swatch.color.toUpperCase(),T.colorPicker.hide(),l&&f&&(l[f]=T.colorPicker.selectedColor),o&&typeof o=="function"&&o(T.colorPicker.selectedColor,T.parent),S&&S.update()}),T},e.List.checkItem=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C){var O="label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit",I;if(I=yt(e.List.checkItem,arguments,O))return I;var _=e.getStyle("CheckBox",R,C);n(r)&&(r=_.size!=null?_.size:20);var P=e.getStyle("List",R,C);n(i)&&(i=300),n(l)&&(l=10),n(f)&&(f=10),n(o)&&(o=P.align!=null?P.align:"center"),n(d)&&(d=P.spacing!=null?P.spacing:2),n(T)&&(T=P.backgroundColor!=null?P.backgroundColor:e.tin),n(S)&&(S=P.rollBackgroundColor!=null?P.rollBackgroundColor:e.grey),n(b)&&(b=P.selectedBackgroundColor!=null?P.selectedBackgroundColor:e.charcoal),n(E)&&(E=P.selectedRollBackgroundColor!=null?P.selectedRollBackgroundColor:e.grey),n(p)&&(p=P.color!=null?P.color:e.white),n(w)&&(w=P.rollColor!=null?P.rollColor:p),n(k)&&(k=P.selectedColor!=null?P.selectedColor:p),n(x)&&(x=P.selectedRollColor!=null?P.selectedRollColor:w);var F=new e.Container;return F.type="CheckItem",F.checkBox=new e.CheckBox({size:r,label:t,color:p,tap:!0}),F.backing=new e.Rectangle(i-d*2,F.checkBox.height+f*2,T).addTo(F),F.checkBox.center(F),o!="center"&&o!="middle"&&F.checkBox.pos(l,null,o=="right"),F.backing.tap(function(){F.checkBox.toggle(),F.zimOut()}),F.checkBox.change(function(){F.zimOut()}),F.zimOver=function(){F.backing.color=F.checkBox.checked?E:S,F.checkBox.label.color=F.checkBox.checked?x:w,F.stage&&F.stage.update()},F.zimOut=function(){F.backing.color=F.checkBox.checked?b:T,F.checkBox.label.color=F.checkBox.checked?k:p,F.stage&&F.stage.update()},F.backing.on("mouseover",F.zimOver),F.checkBox.on("mouseover",F.zimOver),F.backing.on("mouseout",F.zimOut),F.checkBox.on("mouseout",F.zimOut),F},e.Stepper=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L){var q="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, currentValue, arrowColor, arrowScale, style, group, inherit",A;if(A=yt(e.Stepper,arguments,q,this))return A;qe("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=h;var Y=g===!1?{}:e.getStyle(this.type,this.group,L);n(t)&&(t=Y.list!=null?Y.list:[]),n(r)&&(r=Y.width!=null?Y.width:100),n(i)&&(i=Y.backgroundColor!=null?Y.backgroundColor:e.white),n(o)&&(o=Y.borderColor!=null?Y.borderColor:null),n(l)&&(l=Y.borderWidth!=null?Y.borderWidth:null),o<0||l<0?o=l=null:o!=null&&l==null&&(l=1),n(d)&&(d=Y.color!=null?Y.color:e.grey),n(f)&&(f=Y.label!=null?Y.label:""),(typeof f=="string"||typeof f=="number")&&(f=new e.Label({text:f,size:Y.size!=null?Y.size*2:40,color:d,align:Y.align!=null?Y.align:"center",valign:Y.valign!=null?Y.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),n(p)&&(p=Y.vertical!=null?Y.vertical:!1),n(w)&&(w=Y.arrows!=null?Y.arrows:!0),n(k)&&(k=Y.corner!=null?Y.corner:16),n(x)&&(x=Y.shadowColor!=null?Y.shadowColor:"rgba(0,0,0,.3)"),n(T)&&(T=Y.shadowBlur!=null?Y.shadowBlur:14),n(S)&&(S=Y.continuous!=null?Y.continuous:!1),n(b)&&(b=Y.display!=null?Y.display:!0),n(E)&&(E=Y.press!=null?Y.press:!0),n(R)&&(R=Y.hold!=null?Y.hold:!0);var xe=v(C);n(C)&&(C=Y.holdDelay!=null?Y.holdDelay:xe=="s"?.4:400),n(O)&&(O=Y.holdSpeed!=null?Y.holdSpeed:xe=="s"?.2:200),a(O,xe),n(I)&&(I=Y.draggable!=null?Y.draggable:!0),(n(_)||_<=0)&&(_=Y.dragSensitivity!=null?Y.dragSensitivity:.1),n(P)&&(P=Y.dragRange!=null?Y.dragRange:200),n(F)&&(F=Y.stepperType!=null?Y.stepperType:t.length>0?"list":"number"),n(K)&&(K=Y.min!=null?Y.min:0),n(V)&&(V=Y.max!=null?Y.max:10),n(D)&&(D=Y.step!=null?Y.step:1),n(U)&&(U=Y.step2!=null?Y.step2:D),n(Q)&&U!=D&&F=="number"&&(Q=Y.arrows2!=null?Y.arrows2:!0),n(J)&&(J=Y.arrows2Scale!=null?Y.arrows2Scale:.5),n(N)&&(N=Y.keyEnabled!=null?Y.keyEnabled:!0),n(te)&&(te=Y.keyArrows!=null?Y.keyArrows:!0),n(ae)&&(ae=Y.rightForward!=null?Y.rightForward:!0),n(ee)&&(ee=Y.downForward!=null?Y.downForward:F!="number"),n(X)&&(X=Y.arrowColor!=null?Y.arrowColor:i),n(y)&&(y=Y.arrowScale!=null?Y.arrowScale:1);var G=this,Z,ge=60,he=ge/4;i=ct(i);var ne=D,ue,Te=1,Fe;if(F=="number"){if(K=Number(K),V=Number(V),isNaN(K)&&(K=0),isNaN(V)&&(V=100),V<K){Te=-1;var ie=V;V=K,K=ie,ue=V}else ue=K;this.min=K,this.max=V,0>K&&0<V&&(ue=0),D=Math.abs(D),Fe=Math.max(me(D),me(U))}else if(F=="letter"){t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),typeof K!="string"&&(K="A"),typeof V!="string"&&(V="Z"),K=K.substr(0,1).toUpperCase(),V=V.substr(0,1).toUpperCase();var Se=t.indexOf(K);Se<0&&(K="A",Se=0);var se=t.indexOf(V);se<0&&(V="Z",se=t.length),se<Se&&(t.reverse(),Se=t.length-1-Se,se=t.length-1-se),t=t.splice(Se,se-Se+1)}else F="list";function me(Ze){var dt=String(Ze).split(".")[1];return dt?dt=dt.length:dt=0,dt}var j,_e=0,Re=0;I&&this.on("mousedown",function(Ze){G.zimAccessibility&&G.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,_e=Ze.rawX/e.scaX,Re=Ze.rawY/e.scaY,j=this.stage.on("stagemousemove",function(dt){_e=dt.rawX/e.scaX,Re=dt.rawY/e.scaY}))},null,!0),this.label=f,f.mouseChildren=!1,f.mouseEnabled=!1;var de,Pe,Me,fe,ve,Ie,we,Xe,ye,Ge,He,Oe,ce;if(w&&(Me=this.containerPrev=new e.Container({style:!1}),this.addChild(Me),fe=this.arrowPrev=new e.Triangle(ge,ge*.8,ge*.8,X,null,null,null,null,null,null,null,!1).sca(y),x!=-1&&T>0&&(Me.shadow=new je.Shadow(x,3,3,T)),Me.addChild(fe),Me.expand(),Me.cur("pointer"),Me.on("mousedown",function(Ze){if(!(G.zimAccessibility&&G.zimAccessibility.aria)){ne=D;var dt=p?ee?1:-1:ae?-1:1;gt(dt),Je(dt,null,null,Ze.stageX/e.scaX,Ze.stageY/e.scaY)}}),R&&Me.on("pressup",nt),p?(Me.rotation=180,Me.x=r/2,b?Me.y=Me.height+he+ge+Me.height/2+he:Me.y=Me.height*2):(Me.rotation=-90,Me.x=Me.height/2,Me.y=ge/2)),b){var Ue=this.textBox=new e.Rectangle(r,ge,i,o,l,k,null,null,null,!1);Ue.cur("pointer"),this.addChild(Ue),x!=-1&&T>0&&(Ue.shadow=new je.Shadow(x,3,3,T)),w&&(p?w&&(Ue.y=fe.height+he):w&&(Ue.x=fe.height+he)),this.addChild(f),t.length>0&&(Z=0,f.text=t[Z]),f.center(G);var Qe;Ue.on("mousedown",function(Ze){G.zimAccessibility&&G.zimAccessibility.aria||(Qe=G.currentValue,E&&gt(1),Je(1,!0,null,Ze.stageX/e.scaX,Ze.stageY/e.scaY))}),Ue.on("pressup",function(){G.zimAccessibility&&G.zimAccessibility.aria})}else t.length>0&&(Z=0);w&&(ve=this.containerNext=new e.Container({style:!1}),this.addChild(ve),Ie=this.arrowNext=new e.Triangle(ge,ge*.8,ge*.8,X,null,null,null,null,null,null,null,!1).sca(y),x!=-1&&T>0&&(ve.shadow=new je.Shadow(x,3,3,T)),ve.addChild(Ie),ve.expand(),ve.cur("pointer"),ve.on("mousedown",function(Ze){if(!(G.zimAccessibility&&G.zimAccessibility.aria)){ne=D;var dt=p?ee?-1:1:ae?1:-1;gt(dt),Je(dt,null,null,Ze.stageX/e.scaX,Ze.stageY/e.scaY)}}),R&&ve.on("pressup",nt),p?(ve.rotation=0,ve.x=r/2,ve.y=ve.getBounds().height/2):(ve.rotation=90,b?ve.x=Ue.x+Ue.getBounds().width+ve.getBounds().height/2+he:ve.x=Me.x+Me.getBounds().width,ve.y=ge/2));function Je(Ze,dt,Ee,ot,Ve){if(R){He=ot,Oe=Ve,He==0&&(He=1),Oe==0&&(Oe=1),I||(_=1);var Ye=O*(xe=="s"?1e3:1),Ke=C*(xe=="s"?1e3:1),ze=Ye;ce=new e.Proportion(0,P,Ye,Ye*_),de=setTimeout(function(){function tt(){Pe=setTimeout(function(){var ht=Ze;if(I){var Be=Math.abs(_e-He),it=Math.abs(Re-Oe);p?(!dt&&!Ee&&(Be=0),Ee&&(it=0)):(!dt&&!Ee&&(it=0),Ee&&(Be=0)),(Be>=10||it>=10)&&(Be>it?(ne=p?U:D,ht=_e-He>0?1:-1,ae||ht*-1,ze=ce.convert(Math.abs(He-_e))):(ne=p?D:U,ht=Re-Oe>0?1:-1,(F=="number"||!ee)&&(ht*=-1),ze=ce.convert(Math.abs(Oe-Re))))}gt(ht),tt()},ze)}tt()},Ke)}}R&&b&&Ue.on("pressup",nt);function nt(){G.zimAccessibility&&G.zimAccessibility.aria||(clearTimeout(de),clearTimeout(Pe))}Q&&(we=this.prev2=new e.Container({style:!1}),Xe=this.arrowPrev2=new e.Triangle(ge,ge*.8,ge*.8,"rgba(0,0,0,.2)",X,2,null,null,null,null,null,!1),we.addChild(Xe),we.expand(),we.cur("pointer"),we.sca(J),we.alpha=.5,we.on("mousedown",function(Ze){if(!(G.zimAccessibility&&G.zimAccessibility.aria)){ne=U;var dt=p?ae?-1:1:ee?1:-1;gt(dt),Je(dt,null,!0,Ze.stageX/e.scaX,Ze.stageY/e.scaY)}}),R&&we.on("pressup",nt),ye=this.next2=new e.Container({style:!1}),Ge=this.arrowNext2=new e.Triangle(ge,ge*.8,ge*.8,"rgba(0,0,0,.2)",X,2,null,null,null,null,null,!1),ye.addChild(Ge),ye.expand(),ye.cur("pointer"),ye.sca(J),ye.alpha=.5,ye.on("mousedown",function(Ze){if(!(G.zimAccessibility&&G.zimAccessibility.aria)){ne=U;var dt=p?ae?1:-1:ee?-1:1;gt(dt),Je(dt,null,!0,Ze.stageX/e.scaX,Ze.stageY/e.scaY)}}),R&&ye.on("pressup",nt),p?(we.y=this.height/2,we.x=-we.width/2-he*Math.max(.2,Math.min(1,J)),we.rotation=270,ye.y=this.height/2,ye.x=this.width+ye.width/2+he*Math.max(.2,Math.min(1,J)),ye.rotation=90):(ye.x=this.width/2,ye.y=-ye.height/2-he*Math.max(.2,Math.min(1,J)),ye.rotation=0,we.x=this.width/2,we.y=this.height+we.height/2+he*Math.max(.2,Math.min(1,J)),we.rotation=180),this.addChild(we,ye)),Object.defineProperty(this,"stepperArray",{get:function(){if(F=="number"){t=[];for(var Ze=G.min;Ze<=G.max;Ze+=Math.min(D,U))t.push(Number(e.decimals(Ze,Fe,null,!1)));t.push(V)}return t},set:function(Ze){t=Ze;var dt=G.selectedIndex;G.selectedIndex=dt}}),Object.defineProperty(this,"min",{get:function(){return K},set:function(Ze){if(F=="number"){G.currentValue<Ze&&(G.currentValue=Ze),K=Ze;var dt=G.selectedIndex;G.selectedIndex=dt}else K=Ze}}),Object.defineProperty(this,"max",{get:function(){return V},set:function(Ze){if(F=="number"){G.currentValue>Ze&&(G.currentValue=Ze),V=Ze;var dt=G.selectedIndex;G.selectedIndex=dt}else V=Ze}}),at(F=="number"?ue:t[Z],F=="number"?ue:Z);function gt(Ze){var dt;if(F=="number"){ue=Number(ue);var Ee=ue;ue+=Number(ne*Ze*Te),ue=e.decimals(ue,Fe),S?ue>G.max?ue=G.min:ue<G.min&&(ue=G.max):(ue>G.max?(ue=D==1?G.max:Ee,b&&Ue.cur("default")):b&&Ue.cur("pointer"),ue<G.min&&(ue=D==1?G.min:Ee))}else{if(dt=Z+Ze,S)dt>t.length-1&&(dt=0),dt<0&&(dt=t.length-1);else{if(dt>t.length-1){b&&Ue.cur("default");return}else b&&Ue.cur("pointer");if(dt<0)return}Z=dt}at(F=="number"?ue:t[Z],F=="number"?ue:Z),G.currentValue!=Qe&&G.dispatchEvent("change"),Qe=G.currentValue}Object.defineProperty(this,"selectedIndex",{get:function(){return F=="number"?G.stepperArray.indexOf(G.currentValue):Z},set:function(Ze){n(Ze)||(F=="number"?(Z=Math.min(G.stepperArray.length-1,Math.max(0,Ze)),ue=G.stepperArray[Z],at(ue,ue)):(Ze=Math.min(t.length-1,Math.max(0,Ze)),Z=Ze,at(t[Z],Z)))}}),Object.defineProperty(this,"currentValue",{get:function(){return F=="number"?Number(ue):t[Z]},set:function(Ze){if(!n(Ze))if(F=="number"){if(Ze=Number(Ze),G.max>G.min){if(Ze>G.max||Ze<G.min)return}else if(Ze<G.max||Ze>G.min)return;var dt=G.stepperArray.indexOf(Ze);if(dt<0)return;Z=dt,ue=Number(G.stepperArray[Z]),at(ue,ue)}else{if(t.indexOf(Ze)>-1)Ze=t.indexOf(Ze);else return;if(Ze==G.selectedIndex)return;Z=Ze,at(t[Z],Z)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return G.currentValue},set:function(Ze){String(Ze)!=String(G.currentValue)&&(G.currentValue=Ze,G.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return S},set:function(Ze){S=Ze,F=="number"?at(ue,ue):at(t[G.selectedIndex],G.selectedIndex)}}),this._enabled=!0,Object.defineProperty(G,"enabled",{get:function(){return G._enabled},set:function(Ze){c(G,Ze),Ze?(F=="number"?at(ue,ue):at(t[G.selectedIndex],G.selectedIndex),le.addEventListener("keydown",G.keyDownEvent)):(Ae(),Le(),le.removeEventListener("keydown",G.keyDownEvent),b&&(f.mouseChildren=!1),b&&(f.mouseEnabled=!1)),ve&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ve.stage?ve.stage.update():f&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&f.stage&&f.stage.update()}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==G},set:function(){e.KEYFOCUS=G}}),e.KEYFOCUS||We(),this.on("mousedown",function(){We()});function We(){G.keyFocus=!0;var Ze=document.activeElement;Ze&&Ze.blur()}function st(){Me.alpha=1,fe.color=X,Me.cur("pointer"),ve.alpha=1,Ie.color=X,ve.cur("pointer"),S||(F=="number"?(Z==G.min&&(Te>0?Ae():Le()),Z==G.max&&(Te>0?Le():Ae())):(Z==0&&(p?Le():Ae()),Z==t.length-1&&(p?Ae():Le())))}function at(Ze,dt){Z=dt,b&&(F=="number"&&Ze!=0&&Fe>0&&(Ze=e.decimals(Ze,Fe,!0)),f.text=Ze,f.center(G)),w&&st(),ve&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ve.stage?ve.stage.update():f&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&f.stage&&f.stage.update(),G.zimAccessibility&&G.zimAccessibility.changeTitle(G,null,!0)}function Ae(){w&&(Me.alpha=.8,fe.color=e.fog,Me.cur("default"))}function Le(){w&&(ve.alpha=.8,Ie.color=e.fog,ve.cur("default"))}var De,ft=!0,mt="";this.on("mousedown",function(){ft=!0,mt="",!(G.zimAccessibility&&G.zimAccessibility.aria)&&(G.focus=!0,De=!1)}),this.keyDownEvent=function(Ze){if(G.stage&&(G.zimAccessibility&&G.focus||!G.zimAccessibility&&G.keyFocus)){Ze||(Ze=event);var dt=Ze.keyCode;if(te&&dt>=37&&dt<=40){var Ee=ee?40:38,ot=ae?39:37,Ve=ee?38:40,Ye=ae?37:39;dt==Ee||dt==ot?(p&&dt==Ee||!p&&dt==ot?ne=D:ne=U,gt(1)):(dt==Ve||dt==Ye)&&(p&&dt==Ve||!p&&dt==Ye?ne=D:ne=U,gt(-1))}if(N)if(F=="number"){var Ke=null,ze=null;if(dt==8){var tt=String(mt).split("");tt.pop(),Ke=tt.pop(),mt=tt.join("")}if(!Ze.shiftKey&&dt>=48&&dt<=57?Ke=dt-48:dt>=96&&dt<=105?Ke=dt-96:dt==190?(mt=String(mt)+".",ze=!0):dt==173||dt==189?(G.currentValue=G.currentValue*-1,G.currentValue!=Qe&&G.dispatchEvent("change"),Qe=G.currentValue,De=!De):dt==46&&(ft=!0,mt=""),n(Ke)&&n(ze)){ft=!0,mt="";return}if(n(Ke)||(ft?(ft=!1,mt=Ke):mt=Ke=+(mt+""+Ke),Ke<K||Ke>V))return;G.currentValue=Ke,G.currentValue!=Qe&&G.dispatchEvent("change"),Qe=G.currentValue}else ft=!0,mt="",G.currentValue=String.fromCharCode(Ze.keyCode),G.currentValue!=Qe&&G.dispatchEvent("change"),Qe=G.currentValue}},le.addEventListener("keydown",this.keyDownEvent),this.next=function(){gt(1)},this.prev=function(){gt(-1)},n(pe)&&(pe=Y.selectedIndex!=null?Y.selectedIndex:0),G.selectedIndex=pe,n($)&&($=Y.currentValue!=null?Y.currentValue:null),n($)||(G.currentValue=$),g!==!1&&e.styleTransforms(this,Y),this.clone=function(){return G.cloneProps(new e.Stepper(t,r,i,o,l,f.clone(),d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,this.group,L))},this.dispose=function(Ze,dt,Ee){return le.removeEventListener("keydown",G.keyDownEvent),G.removeAllEventListeners(),G.stage&&G.stage.off(j),Ee||this.zimContainer_dispose(!0),Me=this.containerPrev=fe=this.arrowPrev=null,ve=this.containerNext=Ie=this.arrowNext=null,Ue=this.textBox=f=this.label=null,!0}},e["zut"]=function(t){if(!n(t)&&t["key"])e.async("https://zimjs.com/gamdata.php?id="+t["key"]+"&player="+t["player"]+"&score="+t["score"]+"&reverse="+t["info"]["reverse"]+"&total="+t["info"]["total"]+"&allowZero="+t["info"]["allowZero"],t["info"]["type"]);else return!0},e.extend(e.Stepper,e.Container,["clone","dispose"],"zimContainer",!1),e.Slider=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g){var h="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, labelColor, style, group, inherit",L;if(L=yt(e.Slider,arguments,h,this))return L;qe("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=y;var q=X===!1?{}:e.getStyle(this.type,this.group,g);if(n(t)&&(t=q.min!=null?q.min:0),n(r)&&(r=q.max!=null?q.max:10),r-t==0){ut("ZIM Slider range must not be 0");return}n(_)&&(_=q.sound!=null?q.sound:!1),n(i)&&(i=q.step!=null?q.step:0),n(o)&&(o=q.button!=null?q.button:_?"aztec":null),o&&o.type=="Button"&&(o=o.clone()),n(l)&&(l=q.barLength!=null?q.barLength:300),n(f)&&(f=q.barWidth!=null?q.barWidth:3),n(d)&&(d=q.barColor!=null?q.barColor:_?e.lighter:e.granite),n(p)&&(p=q.vertical!=null?q.vertical:!!_),n(w)&&(w=q.useTicks!=null?q.useTicks:!!_),n(x)&&(x=q.tickStep!=null?q.tickStep:i||(w||_?(r-t)/40:0)),n(T)&&(T=q.semiTicks!=null?q.semiTicks:x?3:0),n(k)&&(k=q.tickColor!=null?q.tickColor:_?e.tin:d),n(S)&&(S=q.tickScale!=null?q.tickScale:_?1.25:1),n(b)&&(b=q.semiTickScale!=null?q.semiTickScale:1),n(E)&&(E=q.accentSize!=null?q.accentSize:_?10:0),n(R)&&(R=q.accentOffset!=null?q.accentOffset:_?-(E+f)/2:0),n(C)&&(C=q.accentColor!=null?q.accentColor:e.pink),n(O)&&(O=q.accentBackgroundColor!=null?q.accentBackgroundColor:_?e.blue:e.clear),n(I)&&(I=q.accentDifference!=null?q.accentDifference:-.5),n(P)&&(P=q.inside!=null?q.inside:!1),n(F)&&(F=q.keyArrows!=null?q.keyArrows:!0),n(V)&&(V=q.keyArrowsH!=null?q.keyArrowsH:!0),n(D)&&(D=q.keyArrowsV!=null?q.keyArrowsV:!0),n(K)&&(K=q.keyArrowsStep!=null?q.keyArrowsStep:(r-t)/100),n(U)&&(U=q.damp!=null?q.damp:!1),n(Q)&&(Q=q.currentValue!=null?q.currentValue:!1),n(J)&&(J=q.expand!=null?q.expand:e.mobile()?10:null),n(N)&&(N=q.expandVertical!=null?q.expandVertical:J),n(te)&&(te=q.expandBar!=null?q.expandBar:null),n(ae)&&(ae=q.expandBarVertical!=null?q.expandBarVertical:J),n(ee)&&(ee=q.useLabels!=null?q.useLabels:!1),n(pe)&&(pe=q.labelMargin!=null?q.labelMargin:20),n($)&&($=q.labelColor!=null?q.labelColor:e.dark);var A,Y=this,xe=G(t,r,i,Q);this.veeObj={min:xe[0],max:xe[1],step:xe[2],currentValue:xe[3]};function G(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var Z=i;Q=e.Pick.choose(Q);var ge;E&&(Y.accentBacking=new e.Rectangle(l-.25,E+I,O).addTo(this).rot(p?90:0).mov(p?-R-f/2+I/2:.25,p?0:R+f/2-I/2),ge=Y.accent=new e.Rectangle(l,E,C).sca(0,1).rot(p?-90:0).mov(p?-R-E-f/2:0,p?l:R+f/2).addTo(this));function he(){ge.sca((Y.currentValue-Y.min)/Math.abs(Y.max-Y.min),1)}var ne=!(!n(q.backing)&&q.backing.type!="Pattern");function ue(ze,tt,ht){var Be=new e.Shape(tt,ht);return Be.f(ze).s(q.borderColor!=null?q.borderColor:e.tin).ss(q.borderWidth!=null?q.borderWidth:3).mt(2,0).lt(tt+2,ht*.2).lt(tt+2,ht*.8).lt(2,ht).cp().centerReg({add:!1}),Be}if(n(o)||typeof o=="string"){var Te=30,Fe=40;p&&(Te=50,Fe=40);var ie;if(o=="pill"||o=="aztec"||o=="circle"||o=="grip"){if(o=="pill")ie={width:p?40:18,height:p?18:40,borderColor:e.tin,borderWidth:3,corner:8};else if(o=="aztec"){Te=q.width!=null?q.width:Math.max(Te,Fe)*.9,Fe=q.height!=null?q.height:Math.min(Te,Fe)*.6;var Se=ue(q.backgroundColor!=null?q.backgroundColor:e.lighter,Te,Fe).rot(p?0:-90),se=ue(q.rollBackgroundColor!=null?q.rollBackgroundColor:e.white,Te,Fe).rot(p?0:-90);ie={width:Te,height:Fe,backing:Se,rollBacking:se},q.borderWidth=0,q.borderColor=0}else o=="circle"&&(Te=q.width!=null?q.width:30,Fe=q.height!=null?q.height:30,ie={width:Te,height:Te,corner:q.corner!=null?q.corner:Te/2});Y.buttonType=o}var me=q.borderColor!=null?q.borderColor:ie?ie.borderColor:ne?e.granite:null;if(o=new e.Button({width:q.width!=null?q.width:ie?ie.width:Te,height:q.height!=null?q.height:ie?ie.height:Fe,label:"",backgroundColor:q.backgroundColor!=null?q.backgroundColor:e.white,rollBackgroundColor:q.rollBackgroundColor!=null?q.rollBackgroundColor:n(q.backgroundColor)||q.backgroundColor==e.white?e.moon:q.backgroundColor.lighten(.2),borderColor:me,rollBorderColor:q.rollBorderColor!=null?q.rollBorderColor:me,borderWidth:q.borderWidth!=null?q.borderWidth:ie?ie.borderWidth:ne?1:null,corner:q.corner!=null?q.corner:ie?ie.corner:0,backing:q.backing!=null?q.backing.clone():ie?ie.backing:null,rollBacking:q.rollBacking!=null?q.rollBacking.clone():ie?ie.rollBacking:null,shadowColor:q.shadowColor!=null?q.shadowColor:null,shadowBlur:q.shadowBlur!=null?q.shadowBlur:null,hitPadding:30,style:!1}),Y.buttonType=="circle")o.scaleY=Fe/Te,p||o.rot(-90);else if(Y.buttonType=="grip"){var j=[1,1,1],_e=.4;e.loop(j,function(ze,tt,ht){p?new e.Line(o.width*.62,ze,o.borderColor?o.borderColor:e.grey).pos(0,o.height*_e/2+(tt+1)*(o.height*(1-_e))/(ht+1),e.CENTER,e.TOP,o):new e.Line(o.height*.62,ze,o.borderColor?o.borderColor:e.grey).rot(90).pos(o.width*_e/2+(tt+1)*(o.width*(1-_e))/(ht+1),0,e.LEFT,e.CENTER,o)})}}o.rollPersist=!0,(!n(J)||!n(N))&&o.expand(J,N);var Re,de;p?(Re=o.width,P?(de=l,this.setBounds(0,0,Re,de)):(de=l+o.height,this.setBounds(-o.width/2,-o.height/2,Re,de))):(de=Math.max(o.height,f),P?(Re=l,this.setBounds(0,0,Re,de)):(Re=l+o.width,this.setBounds(-o.width/2,-o.height/2,Re,de)));var Pe=t,Me=0;this.button=o,this.cur("pointer");var fe,ve,Ie,we,Xe;if(w){we=this.ticks=new e.Shape({style:!1}),this.addChild(we),Xe=we.graphics,Xe.ss(1).s(k);var ye=Math.round((r-t)/(x||i)),Ge=(r-t)/ye;x?(Ge!=x&&At&&ut("Slider() - non-divisible step ("+x+") adjusted to "+Ge),x=Ge):(Ge!=i&&At&&ut("Slider() - non-divisible step ("+i+") adjusted to "+Ge),i=Ge);var He;P?He=(l-(p?o.height:o.width))/Math.abs(ye):He=l/Math.abs(ye)}var Oe,ce,Ue,Qe,Je,nt,gt;if(p){if(Oe=P?o.height/2:0,fe=this.bar=new e.Rectangle(f,l,d,null,null,null,null,null,null,!1),te?fe.expand(te,ae):fe.expand(20,0),fe.centerReg(this),o.centerReg(this),Ie=fe.getBounds(),ve=new je.Rectangle(fe.x,Ie.y+Oe,0,Ie.height-Oe*2),w){for(ee&&(ce=Y.labels=new e.Container().addTo(Y)),Ue=0;Ue<=Math.abs(ye);Ue++)Qe=Ue%(T+1)==0,Je=Qe?25*S:15*b,nt=Oe+He*Ue,Xe.mt(0,nt).lt(Je,nt),ee&&(T&&Qe||!T)&&(gt=Math.max(e.countDecimals(Z),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(r-(r-t)/Math.abs(ye)*Ue,gt+1),size:q.size?q.size:10,color:$,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(Je+pe+2,nt-1,ce));we.x=fe.x+15}}else if(Oe=P?o.width/2:0,fe=this.bar=new e.Rectangle(l,f,d,null,null,null,null,null,null,!1),te?fe.expand(te,ae):fe.expand(0,20),fe.centerReg(this),o.centerReg(this),Ie=fe.getBounds(),ve=new je.Rectangle(Ie.x+Oe,fe.y,Ie.width-Oe*2,0),w){for(ee&&(ce=Y.labels=new e.Container().addTo(Y)),Ue=0;Ue<=Math.abs(ye);Ue++)Qe=Ue%(T+1)==0,Je=Oe+He*Ue,nt=-(Qe?25*S:15*b),Xe.mt(Je,0).lt(Je,nt),ee&&(T&&Qe||!T)&&(gt=Math.max(e.countDecimals(Z),e.countDecimals(t),e.countDecimals(r)),new e.Label({text:e.decimals(t+(r-t)/Math.abs(ye)*Ue,gt+1),size:q.size?q.size:10,color:$,align:"center",valign:"center"}).centerReg({add:!1}).loc(Je,nt-pe,ce));we.y=fe.y-10}o.x=ve.x,o.y=ve.y;function We(ze){return i==0?ze:Math.round(ze/i)*i}var st,at;o.on("mousedown",function(ze){A=ze.target.stage,Y.focus=!0;var tt=Y.globalToLocal(ze.stageX/e.scaX,ze.stageY/e.scaY);st=tt.x-o.x,at=tt.y-o.y,A&&(A.mouseMoveOutside=!0)}),o.on("pressmove",function(ze){Ae(ze)});function Ae(ze){var tt=Y.globalToLocal(ze.stageX/e.scaX,ze.stageY/e.scaY),ht=ft(tt.x-st,tt.y-at,ve);p?(o.x=ht.x,Pe=We((ht.y-ve.y)/ve.height*(t-r)),o.y=ve.y+Pe*ve.height/(t-r),Pe+=r,o.y!=Me&&Y.dispatchEvent("change"),Me=o.y):(Pe=We((ht.x-ve.x)/ve.width*(r-t)),o.x=ve.x+Pe*ve.width/(r-t),Pe+=t,o.y=ht.y,o.x!=Me&&Y.dispatchEvent("change"),Me=o.x),ge&&he(),De(),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Y.stage&&Y.stage.update()}function Le(ze){return ze>0?1:-1}function De(){Y.zimAccessibility&&Y.zimAccessibility.changeTitle(Y,null,!0)}function ft(ze,tt,ht){return ze=Math.max(ht.x,Math.min(ht.x+ht.width,ze)),tt=Math.max(ht.y,Math.min(ht.y+ht.height,tt)),{x:ze,y:tt}}fe.on("mousedown",function(ze){A=ze.target.stage,st=0,at=0,!(Y.zimAccessibility&&Y.zimAccessibility.aria)&&Ae(ze)});var mt,Ze;U&&(mt=t,Ze=new e.Damp(mt,U),Y.ticker=e.Ticker.add(function(){mt=Ze.convert(Pe)})),Object.defineProperty(this,"currentValue",{get:function(){return U?mt:Pe},set:function(ze){n(ze)||(t<r?(ze<t&&(ze=t),ze>r&&(ze=r)):(ze>t&&(ze=t),ze<r&&(ze=r)),Pe=ze=We(ze),Ze&&Ze.immediate(Pe),p?(o.y=(ze-r)/(t-r)*ve.height+Oe,Me=o.y):(o.x=(ze-t)/(r-t)*ve.width+Oe,Me=o.x),ge&&he(),De(),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Y.stage&&Y.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return U?mt:Pe},set:function(ze){ze!=Y.currentValue&&(Y.currentValue=ze,Y.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(){At&&ut("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){At&&ut("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){At&&ut("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return V},set:function(ze){V=ze}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return D},set:function(ze){D=ze}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Y},set:function(){e.KEYFOCUS=Y}}),F&&!e.KEYFOCUS&&dt(),this.on("mousedown",function(){F&&dt()});function dt(){Y.keyFocus=!0;var ze=document.activeElement;ze&&ze.blur()}var Ee=!1,ot=!1,Ve=!1,Ye=!1;this.keyDownEvent=function(ze){Y.stage&&(Y.zimAccessibility&&Y.focus||!Y.zimAccessibility&&Y.keyFocus)&&(ze.keyCode==37&&V?Ee=!0:ze.keyCode==40&&D?ot=!0:ze.keyCode==39&&V?Ve=!0:ze.keyCode==38&&D&&(Ye=!0),Y.keyInterval==null&&(Ee||ot||Ve||Ye)&&(Ke(),Y.keyTimeout=setTimeout(function(){Y.keyInterval==null&&(Ee||ot||Ve||Ye)&&(Y.keyInterval=setInterval(Ke,40))},140)))};function Ke(){(Ee||ot)&&(i>0?Y.currentValueEvent-=i*Le(r-t):Y.currentValueEvent-=K*Le(r-t)),(Ve||Ye)&&(i>0?Y.currentValueEvent+=i*Le(r-t):Y.currentValueEvent+=K*Le(r-t))}le.addEventListener("keydown",this.keyDownEvent),Y.keyUpEvent=function(ze){ze.keyCode==37?Ee=!1:ze.keyCode==40?ot=!1:ze.keyCode==39?Ve=!1:ze.keyCode==38&&(Ye=!1),Y.keyInterval!=null&&!Ee&&!ot&&!Ve&&!Ye&&(clearInterval(Y.keyInterval),Y.keyInterval=null)},le.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(ze){c(Y,ze),ze?(le.addEventListener("keydown",Y.keyDownEvent),le.addEventListener("keyup",Y.keyUpEvent)):(le.removeEventListener("keydown",Y.keyDownEvent),le.removeEventListener("keyup",Y.keyUpEvent))}}),n(Q)||(Y.currentValue=Q),e.setSwipe(this,!1),X!==!1&&e.styleTransforms(this,q),this.clone=function(ze){return Y.cloneProps(new e.Slider(ze||!e.isPick(xe[0])?Y.min:xe[0],ze||!e.isPick(xe[1])?Y.max:xe[1],ze||!e.isPick(xe[2])?Y.step:xe[2],o.clone(),l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,ze||!e.isPick(xe[3])?Y.currentValue:xe[3],J,N,te,ae,ee,pe,$,X,this.group,g))},this.dispose=function(ze,tt,ht){return le.removeEventListener("keydown",Y.keyDownEvent),le.removeEventListener("keyup",Y.keyUpEvent),ht||this.zimContainer_dispose(!0),!0}},e.extend(e.Slider,e.Container,["clone","dispose"],"zimContainer",!1),e.Selector=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_){var P="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, liveIndex, style, group, inherit",F;if(F=yt(e.Selector,arguments,P,this))return F;qe("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=I;var K=O===!1?{}:e.getStyle(this.type,this.group,_),V=v();n(t)&&(t=K.tile!=null?K.tile:new e.Tile(new e.Circle(20,e.red),4,4,10,10)),n(r)&&(r=K.borderColor!=null?K.borderColor:e.white),n(i)&&(i=K.borderWidth!=null?K.borderWidth:2),n(o)&&(o=K.backgroundColor!=null?K.backgroundColor:"rgba(0,0,0,.1)"),n(l)&&(l=K.corner!=null?K.corner:10),n(f)&&(f=K.dashed!=null?K.dashed:!1),n(d)&&(d=K.padding!=null?K.padding:t.spacingH/2),n(p)&&(p=K.paddingV!=null?K.paddingV:t.spacingV/2),n(w)&&(w=K.speed!=null?K.speed:2),n(k)&&(k=K.diagonal!=null?K.diagonal:!1),n(x)&&(x=K.dim!=null?K.dim:!1),n(T)&&(T=K.multi!=null?K.multi:!1),T&&(w=0),n(S)&&(S=K.keyArrows!=null?K.keyArrows:!0),n(b)&&(b=K.behind!=null?K.behind:!1),n(E)&&(E=K.resizeScale!=null?K.resizeScale:!1),n(R)&&(R=K.selectedIndex!=null?K.selectedIndex:null),n(C)&&(C=K.liveIndex!=null?K.liveIndex:!1),this.liveIndex=C;var D=[],U=[];e.loop(t.items.length,function(){D.push(ct(r)),U.push(ct(o))});var Q=this;if(!(n(R)&&T)){var J=R,N=n(R)||R<0?0:R,te=t.getChildAt(N);Q.currentItem=t.getChildAt(N),R=J,n(R)&&(R=K.selectedIndex!=null?K.selectedIndex:0)}var ae,ee,pe;ae=te||t.getChildAt(0),ae&&(ee=ae.width+d*2,pe=ae.height+p*2),Q.tile=t.addTo(Q).cur();var $;if(T){var X=this.selectors=[];e.loop(10,function(){$=new e.Rectangle(ee,pe,e.faint,e.faint,i,l,f,{ignoreScale:!E}).centerReg(Q,b?0:1),$.visible=!1,X.push($),$.mouseEnabled=!1}),this.selector=$}else $=this.selector=new e.Rectangle(ee,pe,e.faint,e.faint,i,l,f,{ignoreScale:!E}).centerReg(Q),$.loc(t.width/2,ae.y+p,Q,b?0:1),$.visible=!1;R<0||n(te)||($.loc(ae.x+d,ae.y+p,Q,b?0:1),$.color=U[R],$.borderColor=D[R],$.visible=!0),t.mov(d,p),this.setBounds(t.width+d*2,t.height+p*2);var y={};this.tileDown=t.on("mousedown",function(L){var q=$;if(!(T&&(q=X.shift(),n(q)))){q.visible=!0;for(var A=L.target,Y=0;A.parent!=t&&Y<10;)A=A.parent,Y++;if(A.parent==t&&g(A,null,q),T){var xe="id"+Math.abs(L.pointerID+1);y[xe]={index:R,item:te,selector:q}}}}),T&&(this.tileMove=t.on("pressmove",function(L){var q="id"+Math.abs(L.pointerID+1),A=y[q];if(!n(A)){var Y=t.itemUnderPoint(L.stageX/e.scaX,L.stageY/e.scaY);if(A.item!=Y){if(Q.upItem=A.item,Q.upIndex=A.index,Q.downItem=A.item=Y,Q.downIndex=A.index=Y?Y.tileNum:null,Q.dispatchEvent("change"),n(Y))A.selector.visible=!1;else{var xe=t.localToLocal(Y.x,Y.y,Q);A.selector.loc(xe.x,xe.y).siz(Y.width+d*2,Y.height+p*2),A.selector.color=U[A.index],A.selector.borderColor=D[A.index],A.selector.visible=!0}Q.stage.update()}}}),this.tileUp=t.on("pressup",function(L){var q="id"+Math.abs(L.pointerID+1),A=y[q];n(A)||(Q.downIndex=Q.downItem=null,Q.upIndex=A.index,Q.upItem=A.item,X.push(A.selector),A.selector.visible=!1,Q.dispatchEvent("change"),Q.stage&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Q.stage.update(),delete y[q])})),Q.noAnimate=!1;function g(L,q,A){n(A)&&(A=$),te=L,R=L.tileNum,A.color=U[R],A.borderColor=D[R],T&&(Q.upItem=Q.upIndex=null,Q.downItem=te,Q.downIndex=R),Q.animating=!0;var Y=t.localToLocal(L.x,L.y,Q),xe=Math.abs(Y.x-$.x),G=Math.abs(Y.y-$.y),Z=Q.noAnimate||q?0:w;if(Q.noAnimate=!1,Z==0)A.loc(Y.x,Y.y).siz(L.width+d*2,L.height+p*2),Q.animating=!1,Q.dispatchEvent("change");else{if(k||(xe+G)*Z<=0?A.animate({x:Y.x,y:Y.y},(G+xe)*Z):(A.stopAnimate(),xe>=G?A.animate([{props:{x:Y.x},time:Math.max(V=="s"?.1:100,xe*Z/(V=="s"?1e3:1))},{props:{y:Y.y},time:Math.max(V=="s"?.1:100,G*Z/(V=="s"?1e3:1))}]):A.animate([{props:{y:Y.y},time:Math.max(V=="s"?.1:100,G*Z/(V=="s"?1e3:1))},{props:{x:Y.x},time:Math.max(V=="s"?.1:100,xe*Z/(V=="s"?1e3:1))}])),A.animate({props:{widthOnly:L.width+d*2,heightOnly:L.height+p*2},time:Math.max(V=="s"?.2:200,(G+xe)*Z/(V=="s"?1e3:1)),events:Q.liveIndex,call:function(){Q.animating=!1,Q.dispatchEvent("change")}}),Q.liveIndex){var ge=null;A.on("animation",function(){var ne=A.parent.localToGlobal(A.x,A.y),ue=t.itemUnderPoint(ne.x,ne.y);ue.tileNum!=ge&&(R=ue.tileNum,Q.dispatchEvent("change"),ge=ue.tileNum)})}if(x){if(x===!0)var he=.7;else he=e.constrain(x,0,1);t.animate({props:{alpha:he},rewind:!0,time:(G+xe)*w*.7/(V=="s"?1e3:1)})}}t.stage&&t.stage.update()}S&&Q.added(function(){Q.keyEvent=Q.stage.frame.on("keydown",function(L){if(Q.stage&&Q.enabled&&!Q.animating&&(Q.zimAccessibility&&Q.focus||!Q.zimAccessibility&&Q.keyFocus)){var q=e.loop(t.items2D,function(G,Z){var ge=e.loop(G,function(he,ne){if(he==te)return[ne,Z]});if(Array.isArray(ge))return ge});q===!0&&(q=[0,0]);var A=t.items2D[q[1]].length,Y=t.items2D.length,xe;L.keyCode=="39"?(xe=(q[0]+1)%A,g(t.items2D[q[1]][xe],xe<q[0])):L.keyCode=="37"?(xe=(q[0]-1+A)%A,g(t.items2D[q[1]][xe],xe>q[0])):L.keyCode=="38"?(xe=(q[1]-1+Y)%Y,g(t.items2D[xe][q[0]],xe>q[1])):L.keyCode=="40"&&(xe=(q[1]+1)%Y,g(t.items2D[xe][q[0]],xe<q[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return R},set:function(L){n(L)&&(Q.currentItem=null),Q.currentItem=t.items[Math.round(L)]}}),Object.defineProperty(this,"text",{get:function(){return te.text},set:function(){At&&ut("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return te},set:function(L){if(n(L)){te=null,R=null,$.visible=!1,Q.selectedCol=null,Q.selectedRow=null;return}$.visible=!0,Q.lastItem=te,Q.lastIndex=R,Q.lastCol=Q.selectedCol,Q.lastRow=Q.selectedRow,Q.selectedCol=L.tileCol,Q.selectedRow=L.tileRow,R=L.tileNum,te=L,g(te)}}),this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(L){L?Q.mouse():Q.noMouse(),Q._enabled=L}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Q},set:function(){e.KEYFOCUS=Q}}),e.KEYFOCUS||h(),this.on("mousedown",function(){h()});function h(){Q.keyFocus=!0;var L=document.activeElement;L&&L.blur()}O!==!1&&e.styleTransforms(this,K),this.clone=function(L){if(L)for(var q=[],A=0;A<Q.tile.items.length;A++)q.push(Q.tile.items[A].clone(!0));return Q.cloneProps(new e.Selector(L?e.series(q):t.clone?t.clone():t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,this.style,this.group))},this.dispose=function(L,q,A){Q.keyEvent&&Q.stage&&Q.stage.frame.off("keydown",Q.keyEvent),t.off(Q.tileDown),t.dispose(),T&&(t.off(Q.tileMove),t.off(Q.tileUp)),A||this.zimContainer_dispose(!0)}},e.extend(e.Selector,e.Container,["clone","dispose"],"zimContainer",!1),e.Dial=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y){var xe="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",G;if(G=yt(e.Dial,arguments,xe,this))return G;qe("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=A;var Z=q===!1?{}:e.getStyle(this.type,this.group,Y);if(n(t)&&(t=Z.min!=null?Z.min:0),n(r)&&(r=Z.max!=null?Z.max:10),r-t==0){ut("ZIM Dial range must not be 0");return}n(D)&&(D=Z.sound!=null?Z.sound:!1),n(i)&&(i=Z.step!=null?Z.step:D?0:1),n(o)&&(o=Z.width!=null?Z.width:100),n(l)&&(l=Z.backgroundColor!=null?Z.backgroundColor:e.granite),n(f)&&(f=Z.indicatorColor!=null?Z.indicatorColor:D?e.white:e.licorice),n(d)&&(d=Z.indicatorScale!=null?Z.indicatorScale:1),n(p)&&(p=Z.indicatorType!=null?Z.indicatorType:D?"aztec":"arrow"),n(w)&&(w=Z.useTicks!=null?Z.useTicks:i!=0),n(k)&&(k=Z.innerTicks!=null?Z.innerTicks:!1),n(T)&&(T=Z.tickStep!=null?Z.tickStep:i||(w?.25:0)),n(S)&&(S=Z.semiTicks!=null?Z.semiTicks:D?3:0),n(x)&&(x=Z.tickColor!=null?Z.tickColor:D?e.tin:l),n(b)&&(b=Z.tickScale!=null?Z.tickScale:D?1.25:1),n(E)&&(E=Z.semiTickScale!=null?Z.semiTickScale:1.25),n(R)&&(R=Z.innerCircle!=null?Z.innerCircle:!0),n(O)&&(O=Z.innerColor!=null?Z.innerColor:D?e.pink:"rgba(0,0,0,.2)"),n(I)&&(I=Z.inner2Color!=null?Z.inner2Color:D?e.light:"rgba(0,0,0,.1)"),n(C)&&(C=Z.innerScale!=null?Z.innerScale:D?.4:.5),n(_)&&(_=Z.accentSize!=null?Z.accentSize:D?o/2*.15:0),n(P)&&(P=Z.accentOffset!=null?Z.accentOffset:o/2*.45),n(V)&&(V=Z.accentDifference!=null?Z.accentDifference:-.25),n(F)&&(F=Z.accentColor!=null?Z.accentColor:e.pink),n(K)&&(K=Z.accentBackgroundColor!=null?Z.accentBackgroundColor:D?e.blue:e.clear),n(Q)&&(Q=Z.gap!=null?Z.gap:D?.25:0),n(U)&&(U=Z.linear!=null?Z.linear:D),Q&&(U=!0,pe=!1),n(J)&&(J=Z.limit!=null?Z.limit:!0),n(N)&&(N=Z.keyArrows!=null?Z.keyArrows:!0),n(te)&&(te=Z.keyArrowsStep!=null?Z.keyArrowsStep:(r-t)/100),n(ae)&&(ae=Z.keyArrowsH!=null?Z.keyArrowsH:!0),n(ee)&&(ee=Z.keyArrowsV!=null?Z.keyArrowsV:!0),n(pe)&&(pe=Z.continuous!=null?Z.continuous:!1),pe&&(J=Z.limit!=null?Z.limit:!1),n(y)&&(y=Z.damp!=null?Z.damp:!1),n(g)&&(g=Z.currentValue!=null?Z.currentValue:!1),n(h)&&(h=Z.useLabels!=null?Z.useLabels:!1),n(L)&&(L=Z.labelMargin!=null?Z.labelMargin:10),J==!1&&(y=null);var ge=this;this.cur("pointer");var he=ne(t,r,i,g);this.veeObj={min:he[0],max:he[1],step:he[2],currentValue:he[3]};function ne(){return arguments}t=e.Pick.choose(t),r=e.Pick.choose(r),i=e.Pick.choose(i);var ue=i;g=e.Pick.choose(g);var Te=o/2,Fe=o,ie=t,Se=0,se;if(_){var me=o/2+P+_/2,j=360*Q/2;ge.accentBacking=new e.Shape(-Te,-Te,Te*2,Te*2).addTo(this).s(K).ss(_+V).a(0,0,me,(j-90)*e.RAD,(360-j-90)*e.RAD),se=ge.accent=new e.Shape(-Te,-Te,Te*2,Te*2).addTo(this)}function _e(){se.c().s(F).ss(_),U?se.a(0,0,me,(j-90)*e.RAD,(He.rotation-j*2)*e.RAD):se.a(0,0,me,(j-90)*e.RAD,(He.rotation-90)*e.RAD)}var Re=this.backing=new e.Circle(Te,l,null,null,null,null,null,null,!1);if(_?Re.center(this):this.addChild(Re),R){var de=this.inner=new e.Circle(Te*C,O,null,null,null,null,null,null,!1);this.addChild(de);var Pe=this.inner2=new e.Circle(Te*(C-.1),I,null,null,null,null,null,null,!1);this.addChild(Pe)}D&&(ge.rotation=180);var Me=Math.abs(r-t)/(T||i)+(Q?1:0),fe=i?Math.abs(r-t)/i:0;if(w){var ve=this.ticks=new e.Container({style:!1});if(this.addChild(ve),h)var Ie=ge.labels=new e.Container(o*2,Fe*2).centerReg(ge);for(var we=0;we<Me;we++){var Xe=we%(S+1)==0,ye=new e.Rectangle(1,Te*(Xe?.2*b:.1*E),x,null,null,null,null,null,null,!1);if(ye.regY=Te+(k?C-.05:ye.height+Te*.1),ye.regX=.5,ye.rotation=(360-360*Q)/(Me-(Q?1:0))*we+360*Q/2,ve.addChild(ye),h&&(S&&Xe||!S)){var Ge=Math.max(e.countDecimals(ue),e.countDecimals(t),e.countDecimals(r));new e.Label({text:e.decimals(t+(r-t)/Math.abs(fe)*we,Ge+1),size:Z.size?Z.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-L-1,ye).addTo(Ie)}}ge.expand(ye.height)}this.setBounds(-Te,-Te,o,o);var He,Oe;if(p=="dot"||p=="circle")He=this.indicator=new e.Container({style:!1}),Oe=this.indicatorShape=new e.Circle(Te*.19,f,null,null,null,null,null,null,!1),He.addChild(Oe),e.sca(He,d),He.regY=Te-He.getBounds().width*d/2-Te*.07;else if(p=="line"||p=="rectangle")He=this.indicator=new e.Container({style:!1}),Oe=this.indicatorShape=new e.Rectangle(Te*.1,Te*.3,f,null,null,null,null,null,null,null,null,!1),He.addChild(Oe),e.sca(He,d),He.regY=Te-He.getBounds().width*d/2-Te*.07,He.regX=Te*.05;else if(p=="aztec"){He=this.indicator=new e.Container({style:!1});var ce=Te*.05,Ue=Te*.1,Qe=Te*.42;Oe=this.indicatorShape=new e.Shape(-Ue,0,Ue*2,Qe).f(f).mt(-ce,0).lt(ce,0).lt(Ue,Qe).lt(-Ue,Qe).cp(),He.addChild(Oe),e.sca(He,d),He.regY=Te-He.getBounds().width*d/2-Te*.04}else He=this.indicator=new e.Container({style:!1}),Oe=this.indicatorShape=new e.Triangle(Te*.4,Te*.4,Te*.4,f,null,null,null,null,null,null,null,!1),He.addChild(Oe),e.sca(He,d),He.regY=Te-He.getBounds().height*d*(k?.85:.75),k&&(Oe.rotation=180);He.regY/=d,this.addChild(He);function Je(et){return i==0?et:Math.round(et/i)*i}var nt,gt,We,st,at=0;if(pe)var Ae=0,Le=0,De=0,ft=!1,mt=!1,Ze=!0;if(U)this.on("mousedown",function(et){if(!(ge.zimAccessibility&&ge.zimAccessibility.aria)){var wt=nt=He.rotation,xt=ge.parent.globalToLocal(et.stageX/e.scaX,et.stageY/e.scaY);We=ge.on("pressmove",function(_t){var lt=ge.parent.globalToLocal(_t.rawX/e.scaX,_t.rawY/e.scaY);He.rotation=wt=nt+(xt.y-lt.y)*100/(this.width||1),J&&(wt>360-360*Q/2||wt<0+360*Q/2)&&(wt=e.constrain(wt,360*Q/2,360-360*Q/2),xt=ge.parent.globalToLocal(_t.rawX/e.scaX,_t.rawY/e.scaY),nt=wt),Ve(wt)}),st=this.on("pressup",function(){ge.off("pressmove",We),ge.off("pressup",st)})}});else{var dt=!0;this.on("mousedown",function(et){if(!(ge.zimAccessibility&&ge.zimAccessibility.aria)){nt=He.rotation;var wt=ge.parent.globalToLocal(et.stageX/e.scaX,et.stageY/e.scaY),xt=wt.x-ge.x,_t=ge.y-wt.y;gt=Math.atan2(xt,_t)*180/Math.PI;var lt=new Date().getTime();We=ge.on("pressmove",function(Dt){if(ft){var Pt=ge.parent.globalToLocal(Dt.rawX/e.scaX,Dt.rawY/e.scaY),It=Pt.x-ge.x,Vt=ge.y-Pt.y;gt=Math.atan2(It,Vt)*180/Math.PI,nt=He.rotation}Pt=ge.parent.globalToLocal(Dt.rawX/e.scaX,Dt.rawY/e.scaY),It=Pt.x-ge.x,Vt=ge.y-Pt.y;var Gt=Math.atan2(It,Vt)*180/Math.PI,jt=nt+Gt-gt;jt=(jt+360*1e4)%360,J&&dt&&(jt-at>180&&ge.currentValue!=r?jt=0:jt-at<-180&&(jt=359)),dt=!0,Ve(jt),at=jt}),st=this.on("pressup",function(Dt){ge.currentValue!=ge.min&&ge.currentValue!=ge.max&&(dt=!1);var Pt=new Date().getTime()-lt;if(Pt<200){wt=ge.parent.globalToLocal(Dt.rawX/e.scaX,Dt.rawY/e.scaY),xt=wt.x-ge.x,_t=ge.y-wt.y;var It=Math.atan2(xt,_t)*180/Math.PI-ge.rotation;Ve(It)}nt=He.rotation,ge.off("pressmove",We),ge.off("pressup",st)})}})}function Ee(et){return et>0?1:-1}function ot(){ge.zimAccessibility&&ge.zimAccessibility.changeTitle(ge,null,!0)}function Ve(et){if(pe){mt&&(Ae=et,mt=!1),et>Ae+180?De-=360:et<Ae-180&&(De+=360),Le=De+et,Ze=!1;var wt=ge.currentValue;return ge.currentValue=Je(Le*(r-t)/360),wt!=ge.currentValue&&ge.dispatchEvent("change"),Ae=et,Ze=!0,se&&_e(),!0}var xt;et<0&&(et+=360),et=et%360,i!=0?(et=Math.min(et,360),xt=Je((et-360*Q/2)/(360-360*Q)*(r-t)),He.rotation=360*Q/2+xt*(360-360*Q)/(r-t)):(He.rotation=et,xt=(et-360*Q/2)/(360-360*Q)*(r-t)),xt!=Se&&(Se=xt,ie=xt+t,se&&_e(),ge.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ge.stage&&ge.stage.update()),ot()}var Ye,Ke;y&&(Ye=t,Ke=new e.Damp(Ye,y),ge.ticker=e.Ticker.add(function(){Ye=Ke.convert(ie)})),Object.defineProperty(this,"currentValue",{get:function(){return y?Ye:ie},set:function(et){n(et)||(pe?(ft=!1,!n($)&&!n(X)?$<X?(et<$&&(et=$,ft=!0),et>X&&(et=X,ft=!0)):(et>$&&(et=$,ft=!0),et<X&&(et=X,ft=!0)):n($)?n(X)||et>X&&(et=X,ft=!0):et<$&&(et=$,ft=!0),Ze&&(mt=!0,De=Math.floor(et/(r-t))*360)):t<r?(et<t&&(et=J?t:r),et>r&&(et=J?r:t)):(et>t&&(et=J?t:r),et<r&&(et=J?r:t)),ie=et,et=Je(et),y&&y.immediate(ie),He.rotation=Q*360/2+(et-t)*(360-Q*360)/(r-t),He.rotation=(He.rotation+360*1e4)%360,Se=et-t,at=He.rotation,se&&_e(),ot(),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&ge.stage&&ge.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return y?Ye:ie},set:function(et){et!=ge.currentValue&&(ge.currentValue=et,ge.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(et){pe?t=et:At&&ut("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(et){pe?r=et:At&&ut("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return pe},set:function(){At&&ut("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return $},set:function(et){$=et,ge.currentValue<$&&(ge.currentValue=$)}}),Object.defineProperty(this,"continuousMax",{get:function(){return X},set:function(et){X=et,ge.currentValue>X&&(ge.currentValue=X)}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(){At&&ut("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return ae},set:function(et){ae=et}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return ee},set:function(et){ee=et}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ge},set:function(){e.KEYFOCUS=ge}}),N&&!e.KEYFOCUS&&ze(),this.on("mousedown",function(){N&&ze()});function ze(){ge.keyFocus=!0;var et=document.activeElement;et&&et.blur()}var tt=!1,ht=!1,Be=!1,it=!1;this.keyDownEvent=function(et){ge.stage&&(ge.zimAccessibility&&ge.focus||!ge.zimAccessibility&&ge.keyFocus)&&(et.keyCode==37&&ae?tt=!0:et.keyCode==40&&ee?ht=!0:et.keyCode==39&&ae?Be=!0:et.keyCode==38&&ee&&(it=!0),ge.keyInterval==null&&(tt||ht||Be||it)&&(vt(),ge.keyTimeout=setTimeout(function(){ge.keyInterval==null&&(tt||ht||Be||it)&&(ge.keyInterval=setInterval(vt,40))},140)))};function vt(){(tt||ht)&&(i>0?ge.currentValueEvent-=i*Ee(r-t):ge.currentValueEvent-=te*Ee(r-t)),(Be||it)&&(i>0?ge.currentValueEvent+=i*Ee(r-t):ge.currentValueEvent+=te*Ee(r-t))}le.addEventListener("keydown",this.keyDownEvent),ge.keyUpEvent=function(et){et.keyCode==37?tt=!1:et.keyCode==40?ht=!1:et.keyCode==39?Be=!1:et.keyCode==38&&(it=!1),ge.keyInterval!=null&&!tt&&!ht&&!Be&&!it&&(clearInterval(ge.keyInterval),ge.keyInterval=null)},le.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(ge,"enabled",{get:function(){return ge._enabled},set:function(et){et?(le.addEventListener("keydown",ge.keyDownEvent),le.addEventListener("keyup",ge.keyUpEvent)):(le.removeEventListener("keydown",ge.keyDownEvent),le.removeEventListener("keyup",ge.keyUpEvent)),ge._enabled=et}}),n(g)&&(g=Z.currentValue!=null?Z.currentValue:t),ge.currentValue=g,q!==!1&&e.styleTransforms(this,Z),this.clone=function(et){return ge.cloneProps(new e.Dial(et||!e.isPick(he[0])?ge.min:he[0],et||!e.isPick(he[1])?ge.max:he[1],et||!e.isPick(he[2])?ge.step:he[2],o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,et||!e.isPick(he[3])?ge.currentValue:he[3],h,L,q,this.group,Y))},this.dispose=function(et,wt,xt){return le.removeEventListener("keydown",ge.keyDownEvent),le.removeEventListener("keyup",ge.keyUpEvent),xt||this.zimContainer_dispose(!0),!0}},e.extend(e.Dial,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue){var Te="width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",Fe;if(Fe=yt(e.Tabs,arguments,Te,this))return Fe;qe("65");var ie=he===!1?{}:e.getStyle("Tabs",ne,ue);n(b)&&(b=ie.vertical!=null?ie.vertical:!1),n(t)&&(t=ie.width!=null?ie.width:null);var Se=!n(t);if(n(t)&&(t=b?60:240),n(r)&&(r=ie.height!=null?ie.height:b?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=ne,(n(i)||i.length<=0)&&(i=ie.tabs!=null?ie.tabs:[1,2,3,4]),n(o)&&(o=ie.backgroundColor!=null?ie.backgroundColor:e.tin),n(l)&&(l=ie.rollBackgroundColor!=null?ie.rollBackgroundColor:e.grey),n(f)&&(f=ie.downBackgroundColor!=null?ie.downBackgroundColor:l),n(d)&&(d=ie.selectedBackgroundColor!=null?ie.selectedBackgroundColor:e.dark),n(p)&&(p=ie.selectedRollBackgroundColor!=null?ie.selectedRollBackgroundColor:l),n(w)&&(w=ie.color!=null?ie.color:e.white),n(k)&&(k=ie.rollColor!=null?ie.rollColor:w),n(x)&&(x=ie.downColor!=null?ie.downColor:k),n(T)&&(T=ie.selectedColor!=null?ie.selectedColor:w),n(S)&&(S=ie.selectedRollColor!=null?ie.selectedRollColor:k),n(K)&&(K=ie.backing!=null?ie.backing.clone():null),n(V)&&(V=ie.rollBacking!=null?ie.rollBacking.clone():null),n($)&&($=ie.align!=null?ie.align:"center"),n(X)&&(X=ie.valign!=null?ie.valign:"center"),n(y)&&(y=ie.labelAlign!=null?ie.labelAlign:$),n(g)&&(g=ie.labelValign!=null?ie.labelValign:X),n(A)&&(A=ie.indent!=null?ie.indent:10),n(h)&&(h=ie.labelIndent!=null?ie.labelIndent:A),n(L)&&(L=ie.labelIndentH!=null?ie.labelIndentH:h),n(q)&&(q=ie.labelIndentV!=null?ie.labelIndentV:h),n(R)&&(R=ie.currentEnabled!=null?ie.currentEnabled:!1),n(C)&&(C=ie.currentSelected!=null?ie.currentSelected:!0),C||(R=!0),n(E)&&(E=ie.spacing!=null?ie.spacing:1),n(O)&&(O=ie.corner!=null?ie.corner:0),n(P)&&(P=ie.gradient!=null?ie.gradient:null),n(F)&&(F=ie.gloss!=null?ie.gloss:null),n(I)&&(I=ie.base!=null?ie.base:O==0&&!Array.isArray(O)?"none":b?"left":"bottom"),n(_)&&(_=ie.keyEnabled!=null?ie.keyEnabled:!0),n(Y)&&(Y=ie.useTap!=null?ie.useTap:!1),n(xe)&&(xe=ie.excludeCustomTap!=null?ie.excludeCustomTap:!1),n(pe)&&(pe=ie.backdropColor!=null?ie.backdropColor:null),n(Z)&&(Z=ie.styleLabels!=null?ie.styleLabels:!1),n(ge)&&(ge=ie.keyWrap!=null?ie.keyWrap:!0),I!="none"&&O!=0&&!Array.isArray(O))switch(I){case"bottom":O=[O,O,0,0];break;case"left":O=[0,O,O,0];break;case"top":O=[0,0,O,O];break;case"right":O=[O,0,0,O];break}else Array.isArray(O)||(O=[O,O,O,O]);var se=this;this.keyEnabled=_;var me=0,j=[],_e=[],Re,de,Pe=i.length,Me=(t-E*(Pe-1))/Pe,fe=(r-E*(Pe-1)-2)/Pe;if(!n(pe)){var ve=this.backdrop=new e.Rectangle(t,r,pe,null,null,null,null,null,null,!1);this.addChild(ve)}var Ie=!1,we;function Xe(Le){for(var De=0;De<Le.length;De++){var ft=Le[De];if(ft.constructor==={}.constructor){we&&we!="TabObject"&&(Ie=!0),we="TabObject",ft.type="TabObject";continue}typeof ft=="string"||typeof ft=="number"||ft.type=="Label"?(Le[De]={type:"TabObject",label:String(ft!=null)||ft.type=="Label"?ft:"1"},we&&we!="TabObject"&&(Ie=!0),we="TabObject"):(we&&we=="TabObject"&&(Ie=!0),we="Other")}}Xe(i);for(var ye=0,Ge,He=0,Oe=0;Oe<i.length;Oe++)de=i[Oe],b?Se&&(de.width=de.width?de.width:t):(n(de.width)&&He++,ye+=n(de.width)?Me:de.width);if(!b){if(ye>t-E*(Pe-1))for(Oe=0;Oe<i.length;Oe++)de=i[Oe],de.width=(t-E*(Pe-1))/ye*(n(de.width)?Me:de.width);else if(Math.round(ye)<Math.round(t-E*(Pe-1))&&He>0)for(Ge=(Pe*Me-(ye-He*Me))/He,Oe=0;Oe<i.length;Oe++)de=i[Oe],de.width=n(de.width)?Ge:de.width}function ce(Le,De){for(Oe=0;Oe<Le.length;Oe++)de=Le[Oe],de!=""&&de.type=="TabObject"&&(n(de.label)&&(de.label=" "),(typeof de.label=="string"||typeof de.label=="number")&&(de.label=new e.Label({text:de.label,size:ie.size!=null?ie.size:b?fe/2:r/2,font:ie.font!=null?ie.font:null,style:Z,valign:g,inherit:De})))}ce(i,Z?ie:null);var Ue=0;for(Oe=0;Oe<i.length;Oe++)de=i[Oe],!de.width&&b&&de.label.width>Ue&&(Ue=de.label.width);var Qe=0;function Je(Le,De){var ft=[],mt=[];for(Oe=0;Oe<Le.length;Oe++){if(de=Le[Oe],de.type=="TabObject"){var Ze={color:n(de.color)?e.Pick.choose(w):de.color,rollColor:n(de.rollColor)?e.Pick.choose(k):de.rollColor,downColor:n(de.downColor)?e.Pick.choose(x):de.downColor,selectedColor:n(de.selectedColor)?e.Pick.choose(T):de.selectedColor,selectedRollColor:n(de.selectedRollColor)?e.Pick.choose(S):de.selectedRollColor,backgroundColor:n(de.backgroundColor)?e.Pick.choose(o):de.backgroundColor,rollBackgroundColor:n(de.rollBackgroundColor)?e.Pick.choose(l):de.rollBackgroundColor,downBackgroundColor:n(de.downBackgroundColor)?e.Pick.choose(f):de.downBackgroundColor,selectedBackgroundColor:n(de.selectedBackgroundColor)?e.Pick.choose(d):de.selectedBackgroundColor,selectedRollBackgroundColor:n(de.selectedRollBackgroundColor)?e.Pick.choose(p):de.selectedRollBackgroundColor,wait:n(de.wait)?e.Pick.choose(D):de.wait};if(De)for(var dt in De)n(De[dt])||(Ze[dt]=De[dt]);Re=new e.Button({width:b?n(de.width)?Se?t:Ue+fe/2+O[0]/2:de.width:n(de.width)?Me:de.width,height:b?fe:r,label:de.label,borderColor:ie.borderColor!=null?ie.borderColor:null,borderWidth:ie.borderWidth!=null?ie.borderWidth:null,backgroundColor:Ze.backgroundColor,rollBackgroundColor:Ze.rollBackgroundColor,downBackgroundColor:Ze.downBackgroundColor,downColor:Ze.downColor,corner:O,shadowColor:-1,gradient:P,gloss:F,backing:K?K.clone():null,rollBacking:V?V.clone():null,wait:Ze.wait,waitTime:n(de.waitTime)?U:de.waitTime,waitBackgroundColor:n(de.waitBackgroundColor)?Q:de.waitBackgroundColor,rollWaitBackgroundColor:n(de.rollWaitBackgroundColor)?J:de.rollWaitBackgroundColor,waitColor:n(de.waitColor)?N:de.waitColor,rollWaitColor:n(de.rollWaitBackgroundColor)?te:de.rollWaitColor,waitModal:n(de.waitModal)?ae:de.waitModal,waitEnabled:n(de.waitEnabled)?ee:de.waitEnabled,align:y,valign:g,indentH:L,indentV:q,inherit:e.copy(ie)}),Re.tabInfo=Ze,Re.color=Re.tabInfo.color,Re.rollColor=Re.tabInfo.rollColor,Re.type="TabsButton",Re.content=de,Re.listIndentReady=!0}else{if(de.listIndentReady)Re=de;else{Re=new e.Container,Re.type=de.type,Re.content=de;for(var Ee=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],ot=0;ot<Ee.length;ot++)de[Ee[ot]]&&(Re[Ee[ot]]=de[Ee[ot]])}de.checkBox&&(Re.checkBox=de.checkBox),n(Re.tabInfo)&&(Re.tabInfo={}),xe&&(Re.excludeTap=!0),Re.tabInfo.color=n(de.color)?w:de.color,Re.tabInfo.backgroundColor=n(de.backgroundColor)?o:de.backgroundColor,de.listIndentReady||(new e.Rectangle(Math.max(de.width,b?Se?t:Ue+fe/2+O[0]/2:de.width),Math.max(de.height,b?fe:r),e.clear).addTo(Re).expand(0).cur(),de.center(Re).cur(),$=="center"||$=="middle"||de.pos(0,null,$=="right"),X=="center"||X=="middle"||de.pos(null,0,null,X=="bottom"),Re.listIndentReady=!0)}Re.width>Qe&&(Qe=Re.width),Y?Re.tap(function(Ve){We(Ve.currentTarget.znum),se.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}):Re.zimTabEvent=Re.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Ve){We(Ve.currentTarget.znum),se.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}),Re.on("mousedown",function(Ve){se.buttonDown=Ve.currentTarget}),Re.on("pressup",function(Ve){se.buttonDown=null;var Ye=Ve.currentTarget.znum;Y||e.ACTIONEVENT=="click"?setTimeout(function(){st(Ye)},50):st(Ye)}),mt.push(de.label),ft.push(Re),Re.index=Oe}return[ft,mt]}var nt=Je(i);_e=nt[0],j=nt[1];function gt(){var Le=0,De=0,ft;for(Oe=0;Oe<_e.length;Oe++)ft=_e[Oe],ft.znum=Oe,ft.selectedIndex=Oe,ft.selectedIndex==me&&C&&(ft.backgroundColor=d,ft.rollBackgroundColor=p,ft.color=T),j[Oe]&&(j[Oe].znum=Oe),se.addChild(ft),(!b||Se)&&(ft.x=(t-ft.width)/2,ft.y=(r-ft.height)/2),b?(ft.y=De,De=ft.y+ft.height+E,$=="left"?ft.x=(ft.type=="TabsButton"||ft.type=="ListItem"?0:A)+(ft.regX-(ft.getBounds()?ft.getBounds().x:0))*ft.scaleX:$=="right"&&(ft.x=(Se?t:Qe)-ft.width-(ft.type=="TabsButton"||ft.type=="ListItem"?0:A))):(ft.x=Le,Le=ft.x+ft.width+E,X=="top"?ft.y=(ft.type=="TabsButton"&&!Ie?0:A)+(ft.regY-(ft.getBounds()?ft.getBounds().y:0))*ft.scaleY:X=="bottom"&&(ft.y=r-ft.height-(ft.type=="TabsButton"&&!Ie?0:A))),Oe==me&&!R?ft.enabled=!1:ft.enabled=!0;n(pe)||se.removeChild(ve),se._bounds=null;var mt=se.getBounds(),Ze=0,dt=0;if(!mt&&je.EaselJS.version[0]!=0?se.setBounds():mt&&(Ze=b&&mt.width!=0&&Se?t:mt.width,dt=b&&mt.height!=0?mt.height:r,se.setBounds(Ze,dt)),n(pe)||(ve.widthOnly=Ze,ve.heightOnly=dt,se.addChildAt(ve,0)),b&&!Se)for(Oe=0;Oe<=_e.length;Oe++)($=="center"||$=="middle")&&(ft.x=(Ze-ft.width)/2)}gt();function We(Le,De){if(Le!=me){var ft=_e[me];if(ft&&C&&(ft.tabInfo&&n(ft.tabInfo.wait)&&(ft.tabInfo.backgroundColor&&(ft.backgroundColor=ft.tabInfo.backgroundColor),ft.tabInfo.rollBackgroundColor&&(ft.rollBackgroundColor=ft.tabInfo.rollBackgroundColor),ft.tabInfo.color&&ft.label&&(ft.color=ft.tabInfo.color),ft.tabInfo.rollColor&&ft.label&&(ft.rollColor=ft.tabInfo.rollColor)),R||(ft.enabled=!0)),me=Le,ft=_e[me],ft){var mt=ft.tabInfo;mt&&n(ft.tabInfo.wait)&&C&&(mt.selectedBackgroundColor&&(ft.backgroundColor=!n(mt.downBackgroundColor)&&!De?mt.downBackgroundColor:mt.selectedBackgroundColor),mt.selectedRollBackgroundColor&&(ft.rollBackgroundColor=mt.selectedRollBackgroundColor),mt.selectedColor&&ft.label&&(ft.color=!n(mt.downColor)&&!De?mt.downColor:mt.selectedColor),mt.selectedRollColor&&ft.label&&(ft.rollColor=mt.selectedRollColor)),De&&!R&&(ft.enabled=!1)}}}function st(Le){var De=_e[Le];if(De&&C){var ft=De.tabInfo;ft&&n(ft.wait)&&(ft.selectedBackgroundColor&&(De.backgroundColor=se.selected==De?ft.selectedBackgroundColor:ft.backgroundColor),ft.selectedColor&&De.label&&(De.color=se.selected==De?ft.selectedColor:ft.color)),R||(De.enabled=!1)}}this.addAt=function(Le,De,ft){n(De)&&(De=_e.length),De=e.constrain(De,0,_e.length),Array.isArray(Le)||(Le=[Le]),Xe(Le),ce(Le,ft);var mt=Je(Le,ft),Ze=mt[0],dt=mt[1];De<=me&&(me+=Ze.length);var Ee=[De,0].concat(Ze);return Array.prototype.splice.apply(_e,Ee),Ee=[De,0].concat(dt),Array.prototype.splice.apply(j,Ee),gt(),se},this.removeAt=function(Le,De){if(_e.length==0)return se;for(n(Le)&&(Le=1),n(De)&&(De=_e.length-Le),De=e.constrain(De,0,_e.length-Le),me>=De&&me<=De+Le&&(me=-1),me>De+Le&&(me-=Le),Oe=De;Oe<De+Le;Oe++)_e[Oe].tabInfo&&(_e[Oe].tabInfo.backgroundColor&&(_e[Oe].backgroundColor=_e[Oe].tabInfo.backgroundColor),_e[Oe].tabInfo.color&&_e[Oe].label&&(_e[Oe].color=_e[Oe].tabInfo.color)),Y?_e[Oe].noTap():_e[Oe].off((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",_e[Oe].zimTabEvent),_e[Oe].removeFrom();return _e.splice(De,Le),j.splice(De,Le),gt(),se},se.keyEvent=function(Le){if(!(!se.keyEnabled||!se.keyFocus||se.zimAccessibility)&&Le.keyCode==9){var De=me;Le.shiftKey?We(--De<0?ge?i.length-1:0:De):We(++De>i.length-1?ge?0:i.length-1:De),se.dispatchEvent("change"),se.dispatchEvent("keychange"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update(),Le.preventDefault()}},le.addEventListener("keydown",se.keyEvent),Object.defineProperty(this,"selected",{get:function(){return _e[me]},set:function(){At&&ut("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return me},set:function(Le){We(Le,!0),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return me},set:function(Le){We(Math.min(Math.max(Le,0),i.length-1)),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.color:w},set:function(Le){if(w=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.color=Le),(De!=me||!C)&&(se.buttons[De].color=w);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.rollColor:k},set:function(Le){if(k=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.rollColor=Le),se.buttons[De].rollColor=k,De!=me&&se.buttons[De].rolled&&(se.buttons[De].color=k);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.selectedColor:T},set:function(Le){if(T=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.selectedColor=Le),De==me&&C&&(se.buttons[De].color=T);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.selectedRollColor:S},set:function(Le){if(S=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.selectedRollColor=Le),De==me&&C&&se.buttons[De].rolled&&(se.buttons[De].color=S);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.backgroundColor:o},set:function(Le){if(o=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.backgroundColor=Le),(De!=me||!C)&&(se.buttons[De].backgroundColor=o);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.rollBackgroundColor:l},set:function(Le){if(l=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.rollBackgroundColor=Le),se.buttons[De].rollBackgroundColor=l,De!=me&&se.buttons[De].rolled&&(se.buttons[De].backgroundColor=l);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.selectedBackgroundColor:d},set:function(Le){if(d=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.selectedBackgroundColor=Le),De==me&&C&&(se.buttons[De].backgroundColor=d);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return se.buttons[0].tabItems?se.buttons[0].tabItems.selectedRollBackgroundColor:p},set:function(Le){if(p=Le,se.buttons[0].tabInfo){for(var De=0;De<se.buttons.length;De++)se.buttons[De].tabInfo&&(se.buttons[De].tabInfo.selectedRollBackgroundColor=Le),De==me&&C&&se.buttons[De].rolled&&(se.buttons[De].backgroundColor=p);!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&se.stage&&se.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return j[me]},set:function(){At&&ut("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return j[me]!=null?j[me].text:void 0},set:function(){At&&ut("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return _e},set:function(){At&&ut("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return j},set:function(){At&&ut("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(se,"enabled",{get:function(){return se._enabled},set:function(Le){c(se,Le)}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==se},set:function(){e.KEYFOCUS=se}}),_&&e.KEYFOCUS&&at(),this.on("mousedown",function(){_&&at()});function at(){se.keyFocus=!0;var Le=document.activeElement;Le&&Le.blur()}var Ae=se.getBounds();n(Ae)||Ae.width==0?se.setBounds(0,0,t,r):se.width=t,n(G)&&(G=ie.selectedIndex!=null?ie.selectedIndex:0),se.selectedIndex=G,he!==!1&&e.styleTransforms(this,ie),this.clone=function(){for(var Le=e.copy(i,!0),De=0;De<Le.length;De++)Le[De].label=Le[De].label.clone();return se.cloneProps(new e.Tabs(t,r,Le,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,this.group,ue))},this.doDispose=function(Le,De,ft){se.keyEvent&&le.removeEventListener("keydown",se.keyEvent),e.loop(se.buttons,function(mt){mt.dispose()}),se.keyEvent=null,ft||this.zimContainer_dispose(!0),C=de=i=j=Re=_e=nt=null}},e.extend(e.Tabs,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs.prototype.dispose=function(t){return this.doDispose(null,null,t)},e.Pad=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X){var y="width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",g;if(g=yt(e.Pad,arguments,y,this))return g;qe("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=$;var h=pe===!1?{}:e.getStyle(this.type,this.group,X);n(t)&&(t=h.width!=null?h.width:150),n(r)&&(r=h.cols!=null?h.cols:3),n(i)&&(i=h.rows!=null?h.rows:r);var L;if(n(o))if(h.keys!=null)o=h.keys;else for(o=[],L=1;L<=i*r;L++)o.push(L);n(R)&&(R=h.currentEnabled!=null?h.currentEnabled:!0),n(E)&&(E=h.spacing!=null?h.spacing:1);var q=this,A;this.cols=r,this.rows=i;var Y=t/r-E,xe=[],G=0,Z;for(this.labels=[],this.buttons=[],L=0;L<i;L++){for(var ge=[],he=0;he<r;he++)ge.push(o[G]!=null?o[G]:""),G++;var ne=h.corner!=null?h.corner:O;ne&&!Array.isArray(ne)&&(ne=[ne,ne,ne,ne]),Z=xe[L]=new e.Tabs({width:t,height:Y,tabs:ge,backgroundColor:h.backgroundColor!=null?h.backgroundColor:l,rollBackgroundColor:h.rollBackgroundColor!=null?h.rollBackgroundColor:f,downBackgroundColor:h.downBackgroundColor!=null?h.downBackgroundColor:d,selectedBackgroundColor:h.selectedBackgroundColor!=null?h.selectedBackgroundColor:p,color:h.color!=null?h.color:k,rollColor:h.rollColor!=null?h.rollColor:x,downColor:h.downColor!=null?h.downColor:T,selectedColor:h.selectedColor!=null?h.selectedColor:S,spacing:h.spacing!=null?h.spacing:E,currentEnabled:h.currentEnabled!=null?h.currentEnabled:R,currentSelected:h.currentSelected!=null?h.currentSelected:C,corner:ne,backing:h.backing!=null?h.backing.clone():F,rollBacking:h.rollBacking!=null?h.rollBacking.clone():K,base:null,keyEnabled:!1,gradient:h.gradient!=null?h.gradient:_,gloss:h.gloss!=null?h.gloss:P,wait:h.wait!=null?h.wait:V,waitTime:h.waitTime!=null?h.waitTime:D,waitBackgroundColor:h.waitBackgroundColor!=null?h.waitBackgroundColor:U,rollWaitBackgroundColor:h.rollWaitBackgroundColor!=null?h.rollWaitBackgroundColor:Q,waitColor:h.waitColor!=null?h.waitColor:J,rollWaitColor:h.rollWaitColor!=null?h.rollWaitColor:N,waitModal:h.waitModal!=null?h.waitModal:te,waitEnabled:h.waitEnabled!=null?h.waitEnabled:ae,group:$,style:!1}),this.labels=this.labels.concat(Z.labels),this.buttons=this.buttons.concat(Z.buttons),this.addChild(Z),Z.selectedIndex=-1,Z.y=(Y+E)*L,Z.znum=L,Z.on("change",ue)}this.tabs=xe;function ue(Te){var Fe=Te.target;q.selected=Fe.selected,q.text=Fe.text,q.label=Fe.label;for(var ie=Fe.selectedIndex,Se=0;Se<xe.length;Se++)Fe!=xe[Se]&&(xe[Se].selectedIndex=-1);A=Fe.znum*r+ie,q.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&q.stage&&q.stage.update()}Object.defineProperty(this,"selectedIndex",{get:function(){return A},set:function(Te){A=Te;for(var Fe=0;Fe<xe.length;Fe++)xe[Fe].selectedIndex=-1;var ie=Math.floor(A/r);ie>=0&&ie<q.tabs.length&&(q.tabs[ie].selectedIndex=A%r)}}),this._enabled=!0,Object.defineProperty(q,"enabled",{get:function(){return q._enabled},set:function(Te){c(q,Te)}}),n(ee)&&(ee=h.selectedIndex!=null?h.selectedIndex:0),q.selectedIndex=ee,pe!==!1&&e.styleTransforms(this,h),this.clone=function(){return q.cloneProps(new e.Pad(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,this.group,X))},this.dispose=function(Te,Fe,ie){e.loop(xe,function(Se){Se.dispose()}),this.labels=this.buttons=this.tabs=null,Z=xe=q.rowTabs=null,ie||this.zimContainer_dispose(!0)}},e.extend(e.Pad,e.Container,["clone","dispose"],"zimContainer",!1),e.NumPad=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K){var V="advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",D;if(D=yt(e.NumPad,arguments,V,this))return D;qe("57.7"),this.group=F;var U=P===!1?{}:e.getStyle("NumPad",this.group,K);n(t)&&(t=U.advanced!=null?U.advanced:!1);var Q=400,J=t?620:530;n(r)&&(r=U.titleBar!=null?U.titleBar:"NUMPAD"),n(i)&&(i=U.titleBarColor!=null?U.titleBarColor:e.white),n(o)&&(o=U.titleBarBackgroundColor!=null?U.titleBarBackgroundColor:e.grey),n(l)&&(l=U.titleBarHeight!=null?U.titleBarHeight:40),n(f)&&(f=U.backgroundColor!=null?U.backgroundColor:e.darker),n(d)&&(d=U.borderColor!=null?U.borderColor:e.pewter),n(p)&&(p=U.borderWidth!=null?U.borderWidth:null),d<0||p<0?d=p=null:d!=null&&p==null&&(p=1),n(w)&&(w=U.corner!=null?U.corner:15),n(k)&&(k=U.numberCorner!=null?U.numberCorner:30),n(R)&&(R=U.align!=null?U.align:"left"),n(C)&&(C=U.shadowColor!=null?U.shadowColor:"rgba(0,0,0,.3)"),n(O)&&(O=U.shadowBlur!=null?U.shadowBlur:14),n(I)&&(I=U.draggable!=null?U.draggable:!0),n(_)&&(_=U.boundary!=null?U.boundary:null),n(x)&&(x=U.close!=null?U.close:!0),n(T)&&(T=U.closeColor!=null?U.closeColor:n(i)?e.grey:i),Array.isArray(w)||(w=[w,w,w,w]),n(S)&&(S=U.collapse!=null?U.collapse:!0),n(b)&&(b=U.collapseColor!=null?U.collapseColor:n(i)?e.grey:i),n(E)&&(E=U.collapsed!=null?U.collapsed:!1),this.zimPanel_constructor(Q,J,null,r,i,o,l,f,d,p,w,x,T,null,null,null,S,b,E,R,C,O,I,_,P,F,K),this.type="NumPad";var N=this;function te(ee,pe){return n(pe)&&(pe=mist),{label:ee,backgroundColor:pe,rollBackgroundColor:white,color:darker,rollColor:darker}}var ae=[te("C",e.red.darken(.1)),te(new e.Label({text:"\u2423",size:90,shiftV:-24}),e.yellow.darken(.1)),te(new e.Label({text:"/",size:48,bold:!0,shiftV:3})),te(new e.Label({text:"*",size:65,shiftV:18})),1,2,3,te(new e.Label({text:"-",size:60,shiftV:-3})),4,5,6,te(new e.Label({text:"+",size:55,shiftV:3})),7,8,9,te(new e.Label({text:"\u232B",size:M=="ios"?60:35}),e.red.darken(.1)),te(new e.Label({text:",",size:70,shiftV:-3})),te(new si({text:".",size:70,shiftV:-3})),0,te(new e.Label({text:"\u23CE",size:M=="ios"?40:50,shiftV:5}),e.green.darken(.1))];t&&(ae.splice(2,0,te("%",yellow.darken(.1))),ae.splice(4,0,te(new e.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),ae.splice(4,0,te(")",yellow.darken(.1))),ae.splice(4,0,te("(",yellow.darken(.1)))),N.pad=new e.Pad({width:380,cols:4,rows:t?6:5,keys:ae,spacing:6,currentSelected:!1,backgroundColor:e.grey,rollBackgroundColor:e.tin,selectedBackgroundColor:e.grey,downBackgroundColor:e.green,corner:k}),N.pad.on("mousedown",function(){N.pad.text=="C"?N.key="clear":N.pad.text=="\u2423"?N.key="space":N.pad.text=="\u232B"?N.key="backspace":N.pad.text=="\u23CE"?N.key="enter":N.key=N.pad.text,N.dispatchEvent("pressed")}),N.add(N.pad,null,!0),P!==!1&&e.styleTransforms(this,U),this.clone=function(){return N.cloneProps(new e.NumPad(t,r?r.clone():"",i,o,l,f,d,p,w,k,x,T,S,b,N.collapsed,R,C,O,I,_,P,this.group,K))}},e.extend(e.NumPad,e.Panel,["clone"],"zimPanel",!1),e.DPad=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C){var O="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",I;if(I=yt(e.DPad,arguments,O,this))return I;qe("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=R;var _=E===!1?{}:e.getStyle(this.type,this.group,C);n(t)&&(t=_.axis!=null?_.axis:"all"),n(r)&&(r=_.width!=null?_.width:100),n(i)&&(i=_.backgroundColor!=null?_.backgroundColor:e.granite),n(l)&&(l=_.borderColor!=null?_.borderColor:null),n(o)&&(o=_.borderWidth!=null?_.borderWidth:null),l<0||o<0?l=o=null:l!=null&&o==null&&(o=1),n(f)&&(f=_.indicatorColor!=null?_.indicatorColor:e.moon),n(d)&&(d=_.indicatorPressColor!=null?_.indicatorPressColor:e.lighter),n(p)&&(p=_.indicatorScale!=null?_.indicatorScale:1),n(w)&&(w=_.indicatorRadius!=null?_.indicatorRadius:null),n(k)&&(k=_.innerCircle!=null?_.innerCircle:!0),n(x)&&(x=_.innerScale!=null?_.innerScale:.5),n(T)&&(T=_.activeRadius!=null?_.activeRadius:r),n(S)&&(S=_.clamp!=null?_.clamp:!0),n(b)&&(b=_.logo!=null?_.logo:!1);var P=this;this.axis=t,this.outer=new e.Circle(r/2,i,l,o).addTo(this);var F=this.inner=new e.Circle(r*x/2,"rgba(0,0,0,.2)").center(this);b&&(this.logo=new e.Label({text:"D",bold:!0}).center(F).mov(1,2).alp(.3));var K=new e.Container().addTo(this),V=(r-o)*.2*p,D=8;t=="vertical"?D=2:t=="horizontal"?(D=2,K.rotation=90):t=="both"&&(D=4),e.loop(D,function(ee,pe){new e.Triangle(V,V,V,f).addTo(K).reg(null,n(w)?(r-o)*.475:w).rot(ee*360/pe)});var U=0,Q=0,J;P.dirX=0,P.dirY=0;var N,te=!0;this.on("mousedown",function(ee){N=ee,K.loop(function(pe){pe.color=d}),te?P.ticker=e.Ticker.add(function(){ae()}):e.Ticker.add(P.ticker)}),this.on("pressmove",function(ee){N=ee}),this.on("pressup",function(){e.Ticker.remove(P.ticker),P.dirX=P.dirY=0,K.loop(function(ee){ee.color=f}),P.stage&&P.stage.update()});function ae(){var ee=N;U=ee.stageX/e.scaX,Q=ee.stageY/e.scaY,J=P.globalToLocal(U,Q),ee=new je.Event("change"),ee.dirX=((J.x+T)/(T*2)-.5)*2,ee.dirY=((J.y+T)/(T*2)-.5)*2,S&&(ee.dirX=e.constrain(ee.dirX,-1,1),ee.dirY=e.constrain(ee.dirY,-1,1)),P.dirX=ee.dirX,P.dirY=ee.dirY,P.dispatchEvent(ee)}this._enabled=!0,Object.defineProperty(P,"enabled",{get:function(){return P._enabled},set:function(ee){c(P,ee)}}),e.styleTransforms(this,_),this.clone=function(){return P.cloneProps(new e.DPad(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,this.group,C))},this.dispose=function(ee,pe,$){return this.ticker&&e.Ticker.remove(this.ticker),$||this.zimContainer_dispose(!0),!0}},e.extend(e.DPad,e.Container,["clone","dispose"],"zimContainer",!1),e.Radial=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h){var L="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",q;if(q=yt(e.Radial,arguments,L,this))return q;qe("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=g;var A=y===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=A.labels!=null?A.labels:["A","B","C","D","E"]),n(r)&&(r=A.size!=null?A.size:30),n(i)&&(i=A.font!=null?A.font:"verdana"),n(d)&&(d=A.startAngle!=null?A.startAngle:null),n(p)&&(p=A.totalAngle!=null?A.totalAngle:360),n(w)&&(w=A.angles!=null?A.angles:null),n(k)&&(k=A.flip!=null?A.flip:!0),n(x)&&(x=A.shiftRadial!=null?A.shiftRadial:0),n(T)&&(T=A.icons!=null?A.icons:null),n(S)&&(S=A.rollIcons!=null?A.rollIcons:null),n(b)&&(b=A.rotateIcons!=null?A.rotateIcons:!1),n(E)&&(E=A.iconsShiftRadial!=null?A.iconsShiftRadial:0),n(o)&&(o=A.height!=null?A.height:60),n(l)&&(l=A.coreRadius!=null?A.coreRadius:100),n(f)&&(f=A.coreColor!=null?A.coreColor:e.dark),n(_)&&(_=A.backdropColor!=null?A.backdropColor:e.clear),n(R)&&(R=A.backgroundColor!=null?A.backgroundColor:e.granite),n(C)&&(C=A.rollBackgroundColor!=null?A.rollBackgroundColor:e.tin),n(O)&&(O=A.selectedBackgroundColor!=null?A.selectedBackgroundColor:e.charcoal),n(I)&&(I=A.selectedRollBackgroundColor!=null?A.selectedRollBackgroundColor:O),n(P)&&(P=A.color!=null?A.color:e.white),n(F)&&(F=A.rollColor!=null?A.rollColor:P),n(K)&&(K=A.selectedColor!=null?A.selectedColor:P),n(V)&&(V=A.selectedRollColor!=null?A.selectedRollColor:F),n(D)&&(D=A.borderColor!=null?A.borderColor:e.dark),n(U)&&(U=A.borderWidth!=null?A.borderWidth:2),n(N)&&(N=A.gapAsAngle!=null?A.gapAsAngle:!1),n(J)&&(J=A.gap!=null?A.gap:N?3:6),n(Q)&&(Q=A.gradient!=null?A.gradient:null),Q===!0&&(Q=.1),n(te)&&(te=A.spacing!=null?A.spacing:6),n(ae)&&(ae=A.spacingInner!=null?A.spacingInner:te),n(ee)&&(ee=A.spacingOuter!=null?A.spacingOuter:te),n(pe)&&(pe=A.currentEnabled!=null?A.currentEnabled:!1),n($)&&($=A.currentSelected!=null?A.currentSelected:!0);var Y=this,xe=this.innerRadius=l+ae,G=this.outerRadius=xe+o;this.setBounds(-G,-G,G*2,G*2);var Z=this.backdrop=new e.Circle(G+ee,_).center(this);if(l>0&&(this.core=new e.Circle(l,f).center(this)),w&&w.length<t.length-1)return At&&ut("Radial() - not enough angles provided"),this;if(t&&t.length>0||T&&T.length>0){var ge;if(t&&t.length>0&&(ge=t.length),T&&T.length>0&&(ge>0?ge=Math.min(T.length,ge):ge=T.length),S&&S.length<ge)for(var he=0;he<ge-S.length;he++)S.push(new e.Circle(1,e.clear));var ne=Z.width,ue=this.buttons=new e.Container(-ne/2,-ne/2,ne,ne).centerReg(this),Te=J;N||(J=J/G*180/Math.PI,Te=Te/xe*180/Math.PI);for(var Fe=(p-J*ge+(p==360?0:J))/ge,ie=d||0,Se=0;Se<ge;Se++){w&&(Fe=w[Se]);var se=new e.Shape(-ne/2,-ne/2,ne,ne).centerReg(ue);se.num=Se,se.zimSelected=!1,se.angle=Fe;var me=se.graphics;se.backgroundColor=e.Pick.choose(R),se.rollBackgroundColor=e.Pick.choose(C),se.selectedBackgroundColor=e.Pick.choose(O),se.selectedRollBackgroundColor=e.Pick.choose(I),se.color=e.Pick.choose(P),se.rollColor=e.Pick.choose(F),se.selectedColor=e.Pick.choose(K),se.selectedRollColor=e.Pick.choose(V),se.colorCommand=me.f(se.backgroundColor).command,(n(U)||U>0)&&(!n(D)||!n(U))&&(n(D)&&(D=e.black),se.borderColorCommand=me.s(D).command,se.borderWidthCommand=me.ss(U).command);var j=(ie-90-Fe/2)*Math.PI/180,_e=(ie-90+Fe/2)*Math.PI/180,Re=(ie-90+(Fe+J-Te)/2)*Math.PI/180,de=(ie-90-(Fe+J-Te)/2)*Math.PI/180;if(me.arc(0,0,G,j,_e,!1),me.arc(0,0,xe,Re,de,!0).cp(),Q&&(me.s().ss().rf(["rgba(0,0,0,"+Q+")","rgba(255,255,255,"+Q+")"],[0,1],0,0,xe,0,0,G),me.arc(0,0,G,j,_e,!1),me.arc(0,0,xe,Re,de,!0).cp()),se.cur("pointer"),se.zimOverEvent=se.on("mouseover",function(Xe){var ye=Xe.target;ye.colorCommand.style=ye==Y.selected&&$?ye.selectedRollBackgroundColor:ye.rollBackgroundColor,ye.label&&(ye.label.color=ye==Y.selected&&$?ye.selectedRollColor:ye.rollColor),S&&(ye.holder.removeAllChildren(),S[ye.num].loc(1,0,ye.holder)),Y.stage&&Y.stage.update()}),se.zimOutEvent=se.on("mouseout",function(Xe){var ye=Xe.target;ye.colorCommand.style=ye==Y.selected&&$?ye.selectedBackgroundColor:ye.backgroundColor,ye.label&&(ye.label.color=ye==Y.selected&&$?ye.selectedColor:ye.color),S&&(ye.holder.removeAllChildren(),T&&T[ye.num].loc(1,0,ye.holder)),Y.stage&&Y.stage.update()}),se.zimDownEvent=se.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(Xe){var ye=Xe.target,Ge=ye!==Y.selected;Y.lastSelected=Y.selected,we=ye.num,$?Ge?(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),Y.selected=ye,Y.label=ye.label,Y.label&&(Y.text=Y.label.text),Y.icon=ye.icon,ye.colorCommand.style=ye.selectedRollBackgroundColor,ye.label&&(ye.label.color=ye.selectedRollColor)):pe||(we=-1,Y.selected=null,Y.label=null,Y.text=null,Y.icon=null,ye.colorCommand.style=ye.rollBackgroundColor,ye.label&&(ye.label.color=ye.rollColor)):(Y.selected=ye,Y.label=ye.label,Y.label&&(Y.text=Y.label.text),Y.icon=ye.icon),Y.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Y.stage&&Y.stage.update()}),T&&T.length>0){var Pe=xe+o/2+E,Me=se.holder=new e.Container(3,Pe).addTo(this).reg(1,Pe).rot(ie);Me.mouseChildren=!1,Me.mouseEnabled=!1,se.icon=T[Se],T[Se].loc(1,0,Me),b||(T[Se].rotation=-ie)}if(t&&t.length>0){var fe;if(t[Se].type!="LabelOnArc"){var ve=t[Se].type=="Label"?t[Se]:new e.Label({text:t[Se],size:r,font:i,color:P,style:y,inherit:h});fe=new e.LabelOnArc({label:ve,color:P,size:r,spacing:-5,flip:k&&ie>90&&ie<270,radius:xe+(o-ve.height)/2+2+x,style:y,inherit:h})}else fe=t[Se];t[Se]=fe,se.label=fe,fe.center(this).rot(ie),fe.mouseChildren=!1,fe.mouseEnabled=!1}if(Se!=t.length-1){var Ie=w?w[Se+1]:Fe;ie+=(Fe+Ie)/2+J}}n(d)||(Y.rotation+=Y.buttons.getChildAt(0).angle/2)}var we=null;Object.defineProperty(this,"selectedIndex",{get:function(){return we},set:function(Xe){var ye;Y.buttons&&(ye=Y.buttons.getChildAt(Xe)),ye!==Y.selected&&(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),Y.selected=ye,ye&&($&&(ye.colorCommand.style=ye.selectedRollBackgroundColor),ye.label&&($&&(ye.label.color=ye.selectedColor),Y.text=ye.label.text))),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&Y.stage&&Y.stage.update()}}),n(X)&&(X=A.selectedIndex!=null?A.selectedIndex:0),Y.selectedIndex=X,e.styleTransforms(this,A),this.clone=function(){return Y.cloneProps(new e.Radial(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,this.group,h))}},e.extend(e.Radial,e.Container,"clone","zimContainer",!1),e.RadialMenu=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h){var L="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",q=L.split(", "),A=!1;if(t&&t.constructor==={}.constructor){for(var Y in t)if(q.indexOf(Y)>=0){A=!0;break}}if(t&&A){var xe;if(xe=yt(e.RadialMenu,arguments,L,this))return xe}qe("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=g;var G=y===!1?{}:e.getStyle(this.type,this.group,h);n(t)&&(t=G.menu!=null?G.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),n(r)&&(r=G.size!=null?G.size:30),n(i)&&(i=G.font!=null?G.font:"verdana"),n(w)&&(w=G.startAngle!=null?G.startAngle:null),n(k)&&(k=G.totalAngle!=null?G.totalAngle:360),n(x)&&(x=G.flip!=null?G.flip:!0),n(S)&&(S=G.rotateIcons!=null?G.rotateIcons:!1),n(T)&&(T=G.shiftRadial!=null?G.shiftRadial:0),n(b)&&(b=G.iconsShiftRadial!=null?G.iconsShiftRadial:0),n(o)&&(o=G.height!=null?G.height:60),n(l)&&(l=G.coreRadius!=null?G.coreRadius:100),n(f)&&(f=G.coreColor!=null?G.coreColor:e.dark),n(d)&&(d=G.title!=null?G.title:"MENU"),n(p)&&(p=G.titleIcon!=null?G.titleIcon:null),n(I)&&(I=G.backdropColor!=null?G.backdropColor:e.clear),n(E)&&(E=G.backgroundColor!=null?G.backgroundColor:e.granite),n(R)&&(R=G.rollBackgroundColor!=null?G.rollBackgroundColor:e.tin),n(C)&&(C=G.selectedBackgroundColor!=null?G.selectedBackgroundColor:e.charcoal),n(O)&&(O=G.selectedRollBackgroundColor!=null?G.selectedRollBackgroundColor:C),n(_)&&(_=G.color!=null?G.color:e.white),n(P)&&(P=G.rollColor!=null?G.rollColor:_),n(F)&&(F=G.selectedColor!=null?G.selectedColor:_),n(K)&&(K=G.selectedRollColor!=null?G.selectedRollColor:P),n(V)&&(V=G.borderColor!=null?G.borderColor:e.dark),n(D)&&(D=G.borderWidth!=null?G.borderWidth:2),n(J)&&(J=G.gapAsAngle!=null?G.gapAsAngle:!1),n(Q)&&(Q=G.gap!=null?G.gap:J?3:6),n(N)&&(N=G.spacing!=null?G.spacing:6),n(U)&&(U=G.gradient!=null?G.gradient:null),U===!0&&(U=.1),n(te)&&(te=G.spacingInner!=null?G.spacingInner:N),n(ae)&&(ae=G.spacingOuter!=null?G.spacingOuter:N),n(ee)&&(ee=G.currentEnabled!=null?G.currentEnabled:!1),n(pe)&&(pe=G.currentSelected!=null?G.currentSelected:!0),n($)&&($=G.open!=null?G.open:!1),n(X)&&(X=G.under!=null?G.under:!0);var Z=this,ge=(Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",he=null,ne=this.core=new e.Circle({radius:l,color:f,style:y,inherit:h}).addTo(this);p&&(this.titleIcon=p.center(ne)),d&&(this.title=new e.Label({text:d,size:r,font:i,color:_,style:y,inherit:h}).center(ne)),ne.cur("pointer"),ne.on(ge,function(){Z.leafNode=!1,ie.length==0?Se():(e.loop(ie,function(me){me.selectedIndex=-1,me.removeFrom(),ie=[]}),Z.outerLevel=0,Z.selected=Z.outerMenu=Z.selectedMenu=Z.text=null),(ee||Z.selected!=he)&&Z.dispatchEvent("change"),he=Z.selected,Z.stage&&Z.stage.update()}),this.closeRings=function(me){n(me)&&(me=Z.outerLevel);var j=Z.outerLevel-me;e.loop(ie,function(_e,Re){Re>j-1&&(_e.removeFrom(),_e.selectedIndex=-1,ie.pop())},!0),Z.outerLevel=j,Z.outerMenu=ie[ie.length-1],Z.outerMenu&&(Z.outerMenu.selectedIndex=-1),Z.selected=Z.selectedMenu=Z.text=null,ie[ie.length-2]?(Z.selectedMenu=ie[ie.length-2],Z.selectedIndex=Z.selectedMenu.selectedIndex):Z.selectedIndex=-1,Z.selected!=he&&Z.dispatchEvent("change"),he=Z.selected,Z.stage&&Z.stage.update()};var ue={},Te,Fe;Z.outerLevel=0,t.constructor=={}.constructor&&(t={core:t},Te=Z.tree=new e.Hierarchy(t),Fe=Te.getLinearIDs()),Z.lastRadial=null;var ie=this.radials=[];$&&Se();function Se(me){var j,_e;me?j=me.ringLevel:(j=0,_e=l),e.loop(ie,function(Pe,Me){Me>j-1&&(Pe.removeFrom(),Pe.selectedIndex=-1,ie.pop())},!0);var Re;if(me&&(Re=me.selected),Re){var de=Re.id;_e=me.outerRadius,se(de,j+1,_e)}else me||se("id0",j+1,_e);Z.selected=Re,Z.selected?(Z.selectedMenu=ie[Z.selected.menu.ringLevel-1],Z.selectedIndex=Z.selected.num,Z.selected.label?Z.text=Z.selected.label.text:Z.text=null):ee&&me?(Z.selectedIndex=me.selectedIndex,Z.label=me.label,Z.text=me.text,Z.icon=me.icon,Z.selectedMenu=me):(Z.text=null,Z.selectedIndex=-1,Z.selectedMenu=null),Z.stage&&Z.stage.update()}function se(me,j,_e){j&&(Z.outerLevel=j);var Re;if(!ue[me]){var de=Te.getData(me),Pe=de.list;if(Pe&&!e.isEmpty(Pe)){var Me={labels:Te.getLinearList(Pe),coreRadius:_e,size:r,font:i,startAngle:w,totalAngle:k,flip:x,rotateIcons:S,shiftRadial:T,iconsShiftRadial:b,height:o,coreColor:e.clear,backdropColor:I,backgroundColor:E,rollBackgroundColor:R,selectedBackgroundColor:C,selectedRollBackgroundColor:O,color:_,rollColor:P,selectedColor:F,selectedRollColor:K,borderColor:V,borderWidth:D,gapAsAngle:J,gap:Q,gradient:U,spacingInner:te,spacingOuter:ae,currentSelected:pe,currentEnabled:ee,style:y,inherit:h};de.styles&&(Me=e.merge(Me,de.styles)),Re=ue[me]=new e.Radial(Me),Fe=Te.getLinearIDs(Pe),Re.buttons.loop(function(fe,ve){fe.menu=Re,fe.id=Fe[ve]}),Re.ringLevel=Z.outerLevel,Re.selectedIndex=-1,Re.on("change",function(fe){Z.leafNode=!1,Se(fe.target),(ee||Z.selected!=he)&&Z.dispatchEvent("change"),he=Z.selected})}}ue[me]?(ie.push(ue[me]),ue[me].center(Z),X&&ue[me].bot()):(Z.leafNode=!0,Z.outerLevel-=1),Z.outerMenu=Re}e.styleTransforms(this,G),this.clone=function(){return Z.cloneProps(new e.RadialMenu(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,this.group,h))}},e.extend(e.RadialMenu,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N){var te="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, style, group, inherit",ae;if(ae=yt(e.ColorPicker,arguments,te,this))return ae;qe("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=J;var ee=Q===!1?{}:e.getStyle(this.type,this.group,N),pe;n(t)&&(t=ee.width!=null?ee.width:500),n(r)&&(r=ee.colors!=null?ee.colors:"spectrum"),r=="legacy"&&(pe=!0),n(i)&&(i=ee.cols!=null?ee.cols:10),n(o)&&(o=ee.spacing!=null?ee.spacing:2);var $=!pe&&r.length>0&&r.length<=i;r=="spectrum"&&(i=10,o=2,$=!1),n(f)&&(f=ee.alphaPicker!=null?ee.alphaPicker:!$),n(D)&&(D=ee.tolerancePicker!=null?ee.tolerancePicker:!1),D&&(f=!1),n(l)&&(l=ee.greyPicker!=null?ee.greyPicker:!$),n(w)&&(w=ee.shadowColor!=null?ee.shadowColor:"rgba(0,0,0,.3)"),n(k)&&(k=ee.shadowBlur!=null?ee.shadowBlur:14),n(x)&&(x=ee.buttonBar!=null?ee.buttonBar:!$),n(p)&&(x||r=="spectrum"?p=ee.draggable!=null?ee.draggable:!0:p=ee.draggable!=null?ee.draggable:!1),n(T)&&(T=ee.circles!=null?ee.circles:!1),n(S)&&(S=ee.indicator!=null?ee.indicator:!1,x||(S=ee.indicator!=null?ee.indicator:!0)),n(b)&&(b=ee.backgroundColor!=null?ee.backgroundColor:e.black),n(d)&&(d=ee.startBackgroundColor!=null?ee.startBackgroundColor:null),n(E)&&(E=ee.keyArrows!=null?ee.keyArrows:!0),n(I)&&(I=ee.dropperTarget!=null?ee.dropperTarget:!1),n(_)&&(_=ee.spectrumCollapse!=null?ee.spectrumCollapse:!0),n(P)&&(P=ee.spectrumMode!=null?ee.spectrumMode:!0),n(F)&&(F=ee.spectrumClose!=null?ee.spectrumClose:!0),n(K)&&(K=ee.spectrumOk!=null?ee.spectrumOk:!0),n(V)&&(V=ee.spectrumTitle!=null?ee.spectrumTitle:null),n(U)&&(U=ee.collapsed!=null?ee.collapsed:!1);var X=this;if(n(R))if(le.zdf)R=le.zdf.stage;else return;else if(R.getBounds){if(n(R.getStage))return}else return;X.container=R;var y="#e472c4",g="#50c4b7",h=1,L=1,q=new e.Shape;this.addChild(q),q.x+=o,q.y+=o,pe=!1;var A,Y,xe=[],G,Z,ge,he,ne,ue=r=="spectrum";if(n(r)||r=="legacy"||r=="spectrum"){pe=!0;var Te=6,Fe=Te*Te*Te;Te=Math.ceil(Math.pow(Fe,1/2)),Y=(t-o)/18-o,ne=Math.floor(Math.pow(Te*Te,1/3)),A=[];for(var ie=0;ie<6;ie++)for(var Se=0;Se<6;Se++)for(var se=0;se<6;se++)A.push("#"+Pe(ie*3)+Pe(Se*3)+Pe(se*3));for(r=[],ie=0;ie<A.length;ie++)G=Math.floor(ie/6),Z=ie%6,G>=6*3?ne=1:ne=0,ge=G-ne*6*3,he=Z+ne*6,r[he*18+ge]=A[ie];i=18,xe=[g,y]}else Y=(t-o)/i-o;var me=Math.ceil(r.length/i),j=1,_e=String(r[r.length-1]);if(!n(d)){var Re=d.match(/rgba\((.*)\)/);Re&&(G=Re[1].split(","),j=G.pop(),d="rgb("+G.join(",")+")"),_e=String(d)}var de;pe&&(de=g);function Pe(St){return St=Math.floor(St).toString(16),St+""+St}ne=0;var Me=q.graphics,fe,ve,Ie=ee.borderColor!=null?ee.borderColor:null,we=ee.borderWidth!=null?ee.borderWidth:null;!n(Ie)&&n(we)&&(we=1),we&&n(Ie)&&(Ie=e.dark),we&&Me.s(Ie).ss(we);var Xe=r.length;for(ue&&(Xe=56),ie=0;ie<Xe;ie++)G=ie%i,Z=Math.floor(ie/i),fe=G*(Y+o),ve=Z*(Y+o),T?Me.f(r[ie]).dc(fe+Y/2,ve+Y/2,Y/2):Me.f(r[ie]).r(fe,ve,Y,Y);var ye=ve+Y+o;X.colors=r;var Ge=ye;if(l){for(ie=0;ie<16;ie++)xe.push("#"+Pe(ie)+Pe(ie)+Pe(ie));for(ie=0;ie<xe.length;ie++)G=Math.floor(ie/i),Z=ie%i,fe=Z*(Y+o),ve=G*(Y+o)+ye,T?Me.f(xe[ie]).dc(fe+Y/2,ve+Y/2,Y/2):Me.f(xe[ie]).r(fe,ve,Y,Y);ye=ve+Y+o;var He=i,Oe=Math.ceil(xe.length/i)}X.greys=xe,S&&!ue&&(S=this.indicator=T?new e.Circle(Y/2*.5,null,null,null,null,null,null,null,!1):new e.Rectangle(Y*.5,Y*.5,null,null,null,null,null,null,null,!1),S.alpha=.5,S.centerReg(),this.addChild(S),S.mouseEnabled=!1,ce(r.indexOf(_e)));function ce(St){if(n(St)||St<0){S.visible=!1;return}else S.visible=!0;_e=="#000"||_e=="#000000"||_e=="black"?(S.color="#222",S.alpha=1):(S.color="black",S.alpha=.5),S.x=q.x+St%i*(Y+o)+Y/2,S.y=q.x+Math.floor(St/i)*(Y+o)+Y/2}var Ue=10,Qe=ye;if(f||D){var Je=new e.Container({style:!1});Je.setBounds(0,0,600,70),this.addChild(Je),Je.x=0,Je.y=ye;var nt=this.alphaBacking=new e.Rectangle(600-Ue*2,50,e.licorice,null,null,0,null,null,null,!1);Je.addChild(nt),e.centerReg(nt,Je);var gt=this.alphaBut=new e.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),We=this.alphaSlider=new e.Slider({min:0,max:1,step:D?0:.05,button:gt,barLength:D?500*.55:600*.55,barWidth:2,barColor:e.silver,vertical:!1,useTicks:!1,inside:!1,style:!1});We.currentValue=n(j)?1:j,D&&(We.currentValue=.1),Je.addChild(We),We.x=40,We.y=Je.height/2;var st=this.alphaText=new e.Label({text:D?"Tolerance: 0.1":"Alpha: "+e.decimals(j),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});Je.addChild(st),st.x=We.x+We.bar.width+40,st.y=Je.height/2-st.height/2,Je.scaleX=Je.scaleY=t/600,We.on("change",function(){st.text=D?"Tolerance: "+zt(We.currentValue):"Alpha: "+zt(We.currentValue),f&&Ze&&(Ze.alpha=L=We.currentValue),X.dispatchEvent("change"),X.stage&&X.stage.update()}),ye+=Je.height-Ue,D&&(X.toleranceBacking=X.alphaBacking,X.toleranceBut=X.alphaBut,X.toleranceSlider=X.alphaSlider,X.alphaBacking=X.alphaBut=X.alphaSlider=null)}if(x){var at=new e.Container({style:!1});at.setBounds(0,0,600,100),this.addChild(at),at.x=0,at.y=ye+Ue;var Ae=this.swatchText=new e.TextInput({align:"left",selectionAlpha:.5,text:_e.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(Ae.on("input",function(){(Ae.text.length==4||Ae.text.length==7)&&(Ze.color=Ae.text,_e=Ze.color,X.dispatchEvent("change"))}),at.addChild(Ae),e.centerReg(Ae),Ae.x=200/2-10,Ae.y=50-2,p){var Le=this.grip=new e.Shape({style:!1});Le.cur("pointer"),at.addChild(Le),Le.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),Le.x=70,Le.y=65,Ae.y=50-10,Le.mouseEnabled=!1}var De=this.closeBut=new e.Button({width:90,height:90,label:"X",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});at.addChild(De),De.x=600-De.width-Ue,De.y=0,De.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){X.hide(),X.dispatchEvent("close")});var ft=this.okBut=new e.Button({width:150,height:90,label:"OK",backgroundColor:e.licorice,rollBackgroundColor:e.charcoal,corner:0,style:!1});at.addChild(ft),ft.x=De.x-ft.width-Ue,ft.y=0,ft.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){bt(),X.dispatchEvent("ok")});var mt=this.swatchBacking=new e.Shape({style:!1});at.addChild(mt),Me=mt.graphics,Me.f(e.black).r(.5,.5,50,89).f(e.granite).r(50,.5,50,89).f(e.white).r(100,.5,49.5,89),mt.x=ft.x-150-Ue,mt.y=0;var Ze=this.swatch=new e.Rectangle(150,90,_e,null,null,null,null,null,null,!1);at.addChild(Ze),Ze.x=mt.x,Ze.y=0,Ze.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){X.dispatchEvent("swatch")}),Ze.cur("pointer"),Ze.alpha=L=j,at.scaleX=at.scaleY=t/600,ye+=at.height}else q.cur("pointer");!f&&!x&&(ye-=Ue-o);var dt=ye+Ue;this.setBounds(0,0,t,dt);var Ee=this.background=new e.Rectangle(t,dt,b,null,null,null,null,null,null,!1);this.addChildAt(Ee,0),w!=-1&&k>0&&(Ee.shadow=new je.Shadow(w,8,8,k));var Tt=le.zdf,ot,Ve=!1;if(this.dropperTarget=I,ue){r="spectrum";var Ye=30,Ke=20,ze=Qe-Ye+1,tt=ze-Ke+1,ht=X.bar=new e.Rectangle(X.width,Ye+1,e.black).addTo(X);V&&(X.title=new e.Label(V,18,null,e.light).pos(12,1,LEFT,CENTER,X.bar).noMouse()),p&&ht.cur();var Be=new e.Container(X.width,ze).loc(0,Ye,X),it=new e.Rectangle(X.width,tt,new e.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,3/6,4/6,5/6,6/6],0,0,500,0)).addTo(Be).mov(0,Ke-1);new e.Rectangle(X.width,tt/2,new e.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,tt/2)).loc(it,null,Be),new e.Rectangle(X.width,tt/2+.5,new e.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,tt/2+.5)).loc(it,null,Be).mov(0,tt/2),new e.Rectangle(X.width,20,new e.GradientColor(["black","white"],[.1,.9],0,0,X.width,0)).addTo(Be);var vt=X.gradient=new e.Bitmap(Be).loc(Be,null,X).cur("none"),et=X.pixels=new e.Pixel(Be,.5).loc(Be,null,X).vis(!1).cur("none");Be.dispose();var wt;!x&&F&&(wt=X.closeIcon=new e.Shape(-40,-40,80,80,null,!1),wt.graphics.f(e.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),wt.sca(.25).expand(10,10,10,1).pos(7,0,e.RIGHT,e.CENTER,ht).cur().addTo(X),wt.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){X.hide(),X.dispatchEvent("close")}));var xt=X.collapseIcon=new e.Triangle(20,20,20,e.faint,e.light,2).expand(10,10,10,1).pos(40+(wt?30:0),0,e.RIGHT,e.CENTER,ht).cur().addTo(X);xt.on("mousedown",function(){X.collapse(xt.rotation==0)});var _t=new e.Rectangle(20,20,e.white).reg("center");new e.Tile(new e.Rectangle(10,10,e.series(e.silver,e.white,e.white,e.silver)),2,2,0,0).addTo(_t),_t.mouseChildren=!1;var lt=X.modeIcon=new e.Button({width:20,height:20,shadowColor:-1,label:"",backing:_t,toggleEvent:"mousedown",toggleBacking:new e.Rectangle(20,20,new e.GradientColor([e.white,e.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(wt?30:0),5,e.RIGHT,e.TOP,X).expand(10,10,10,1);lt.on("mousedown",function(){et.vis(lt.toggled),X.spectrumToggled=!lt.toggled,Tt.stage.update()}),P||(lt.removeFrom(),xt.mov(28)),_||xt.removeFrom(),K||X.okBut&&X.okBut.removeFrom(),!F&&De&&De.removeFrom();var Dt=new e.Rectangle(X.width,X.height-ze-Ye,e.faint).pos(0,0,e.LEFT,e.BOTTOM,X).noMouse(),Pt=this.dropper=new e.Circle(10,e.clear,e.white,8);new e.Circle(5,e.clear,e.black,2).center(Pt),new e.Circle(7,e.clear,e.white,2).center(Pt),Pt.noMouse()}this.updateDropperTarget=function(){Pt.vis(!1),Lt(),Pt.vis(!0).top()},this.spectrumToggled=ue,this.toggleSpectrum=function(St){St!=X.spectrumToggled&&(n(St)&&(St=!X.spectrumToggled),X.spectrumToggled=St,lt.toggle(!St),et.vis(!St),X.updateDropperTarget())};var It=!1;function Vt(){Tt.stage.mouseInBounds?Pt.alp(1):Pt.alp(0),Pt.loc(Tt.mouseX,Tt.mouseY,Tt.stage),It=X.spectrumToggled?vt.hitTestReg(Pt):et.hitTestReg(Pt);var St;X.dropperTarget?St=Pt.x>=ot.x&&Pt.x<=ot.x+ot.width&&Pt.y>=ot.y&&Pt.y<=ot.y+ot.height:St=!1;var Ft;if(X.dropperTarget?Ft=(It||St)&&!Dt.hitTestReg(Pt)&&!ht.hitTestReg(Pt):Ft=It,!Ve&&Ft)Gt(St);else if(Ve&&!Ft){jt(),Tt.stage.update();return}if(Ft){var hn;if(It)hn=X.spectrumToggled?vt:et;else if(X.dropperTarget)hn=ot;else return;var pn=hn.globalToLocal(Tt.mouseX,Tt.mouseY),mn=hn.getColorAt(pn.x,pn.y,!0),bn="rgba("+mn[0]+","+mn[1]+","+mn[2]+","+mn[3]+")";mn[3]<.05&&(bn=Tt.color),Pt.borderColor=bn,Tt.stage.update()}}function Gt(St){Ve=!0,St&&Lt(),Pt.vis(!0).top()}function jt(){Ve=!1,ot.dispose(),Pt.vis(!1)}this.collapsed=!1,this.collapse=function(St){n(St)&&(St=!0),St!=X.collapsed&&(X.collapsed=St,St?(lt.enabled=!1,xt.rot(180),X.background.vis(!1),vt.vis(!1),Dt.vis(!1),q.visible=!1,et&&et.vis(!1),Je&&Je.vis(!1),x&&at.vis(!1),Ve=!1,Kt(),Qt(),X.dispatchEvent("collapsed")):(lt.enabled=!0,xt.rot(0),X.background.vis(!0),vt.vis(!0),Dt.vis(!0),q.visible=!0,X.spectrumToggled||et.vis(!0),Je&&Je.vis(!0),x&&at.vis(!0),Ve=!0,sn(),Lt(),ht.hitTestReg(Pt)&&Qt(),X.dispatchEvent("expanded")),Tt.stage.update())},ue&&_&&(X.collapseEvent=ht.on("dblclick",function(){X.collapsed?X.collapse(!1):X.collapse(!0)})),ue&&U&&_&&(X.vis(!1),setTimeout(function(){X.collapse(!0),X.vis(!0),X.stage&&X.stage.update()},50));function sn(){Kt(),X.dropperDown=Tt.stage.on("stagemousedown",Vt),X.dropperMove=Tt.stage.on("stagemousemove",Vt),X.dropperUp=Tt.stage.on("stagemouseup",function(){Vt(),Ze&&ue&&It&&Ze.color!=Pt.borderColor&&rt()})}function Kt(){X.dropperDown&&Tt.stage.off("stagemousedown",X.dropperDown),X.dropperMove&&Tt.stage.off("stagemousemove",X.dropperMove),X.dropperUp&&Tt.stage.off("stagemouseup",X.dropperUp)}function Lt(){ot&&ot.dispose&&ot.dispose();var St=new e.Rectangle(Tt.width,Tt.height,Tt.color).addTo(Tt.stage,0),Ft;X.dropperTarget&&X.dropperTarget.getBounds&&X.dropperTarget.type&&!X.dropperTarget.type.includes("Stage")?Ft=X.dropperTarget.boundsToGlobal():Ft=Tt.stage.getBounds(),ot=new e.Bitmap(Tt.stage,Ft.width,Ft.height,Ft.x,Ft.y).loc(Ft).cur("none"),St.dispose(),ot.on("mousedown",rt)}function Qt(){ot&&ot.dispose&&ot.dispose(),Pt.vis(!1)}function rt(){Pt.vis(!1),X.currentValue=e.convertColor(Pt.borderColor,"hex"),X.dispatchEvent("change"),Ve&&(I?(Lt(),Pt.vis(!0).top(),setTimeout(function(){X.updateDropperTarget(),Tt.stage.update()},50)):(Pt.vis(!0).top(),Tt.stage.update()))}function bt(){if(pe&&l){g=y,y=de;var St=[g,y];for(ie=0;ie<2;ie++){var Ft=q.graphics;G=Math.floor(ie/i),Z=ie%i,fe=Z*(Y+o),ve=G*(Y+o)+Ge,xe[ie]=St[ie],Ft.f(Ee.color).r(fe-1,ve-1,Y+2,Y+2).f(St[ie]).r(fe,ve,Y,Y)}}de=_e,h=L,X.dispatchEvent("change"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&X.stage&&X.stage.update()}if(p){var Rt,Mt;Ee.on("mousedown",Nt),Ee.on("pressmove",kt),Ee.on("pressup",Bt),ue&&(ht.on("mousedown",Nt),ht.on("pressmove",kt),ht.on("pressup",Bt))}function Nt(St){Rt=St.stageX/e.scaX-X.x,Mt=St.stageY/e.scaY-X.y}function kt(St){X.x=St.stageX/e.scaX-Rt,X.y=St.stageY/e.scaY-Mt,X.stage&&X.stage.update()}function Bt(){X.stage&&X.stage.update()}var Wt=i*(Y+o),Zt=me*(Y+o);if(l)var en=He*(Y+o),Ht=Oe*(Y+o);q.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(St){var Ft=e.hitTestGrid(q,Wt,Zt,i,me,St.stageX,St.stageY,0,0,o,o);n(Ft)||(_e=r[Ft],x&&(Ze.color=_e,Ae.text=String(r[Ft]).toUpperCase()),bt()),l&&(Ft=null,Ft=e.hitTestGrid(q,en,Ht,He,Oe,St.stageX,St.stageY,0,Zt,o,o),n(Ft)||(_e=xe[Ft],x&&(Ze.color=_e,Ae.text=xe[Ft].toUpperCase()),bt())),S&&ce(r.indexOf(_e)),x?X.stage&&X.stage.update():S&&X.stage&&X.stage.update(),Jt()}),Object.defineProperty(this,"selectedColor",{get:function(){return _e},set:function(St){St=St.toLowerCase(),de=_e=St,x&&(Ze.color=_e,Ae.text=_e,X.stage&&X.stage.update()),S&&!ue&&ce(r.indexOf(_e)),Jt()}}),Object.defineProperty(this,"currentValue",{get:function(){return _e},set:function(St){X.selectedColor=St}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return _e},set:function(St){St!=X.selectedColor&&(X.selectedColor=St,X.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ue?null:r.indexOf(_e)},set:function(St){ue||(de=_e=r[St],x&&(Ze.color=_e,Ae.text=_e,X.stage&&X.stage.update()),S&&ce(r.indexOf(_e)),Jt())}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return f?zt(We.currentValue):1},set:function(St){f&&(h=We.currentValue=St,Ze&&(Ze.alpha=h),st&&(st.text="Alpha: "+zt(We.currentValue)),X.stage&&X.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return D?zt(We.currentValue):1},set:function(St){D&&(We.currentValue=St,X.stage&&X.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return ue?"spectrum":l?r.concat(xe):r},set:function(){At&&ut("ColorPicker() colors is read only - make a new ColorPicker to change")}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==X},set:function(){Ot?e.KEYFOCUS=X:le.KEYFOCUS=X}}),E&&e.KEYFOCUS&&vn(),this.on("mousedown",function(){E&&vn()});function vn(){X.keyFocus=!0;var St=document.activeElement;St&&St.blur()}function Jt(){X.zimAccessibility&&X.zimAccessibility.changeTitle(X,null,!0)}this.keyDownEvent=function(St){if(X.stage&&!ue&&(X.zimAccessibility&&X.focus||!X.zimAccessibility&&X.keyFocus)){var Ft=X.selectedIndex;St.keyCode==37||St.keyCode==40?(Ft--,Sn(Ft)):(St.keyCode==38||St.keyCode==39)&&(Ft++,Sn(Ft))}};function Sn(St){St<0&&(St=X.colors.length-1),St>X.colors.length-1&&(St=0),X.selectedIndex=St,X.dispatchEvent("change"),X.stage&&X.stage.update()}le.addEventListener("keydown",this.keyDownEvent);var $e,Tt;this.hide=function(){return $e=X.stage,X.removeFrom(),$e&&$e.update(),X},this.on("removed",Xt);function Xt(){if(ue&&(Ve=!1,Kt(),Qt()),X.toggled=!1,X.zimAccessibility){var St=X.zimAccessibility;St.resize(X),$t?$t.focus():X.zimTabTag.nextSibling.focus(),setTimeout(function(){St.talk("ColorPicker has been closed.")},50)}$e&&$e.update()}var $t,cn=!1;this.show=function(){return X.center(X.container),X};function an(){if(X.stage&&($e=X.stage,Tt=$e.frame),X.zimAccessibility){var St=X.zimAccessibility;setTimeout(function(){St.activatedObject&&($t=St.activatedObject.zimTabTag)},50),St.resize(X),St.tabIndex=X.zimTabIndex}X.toggled=!0,setTimeout(function(){ue&&(Ve=!0,Lt(),sn(),Gt(),Vt()),X.stage&&X.stage.update()},20)}this.on("added",an),this.toggle=function(St){return St===!0?X.show():St===!1||X.container.contains(X)?X.hide():X.show(),X};function zt(St){return Math.round(St*Math.pow(10,2))/Math.pow(10,2)}n(C)&&(C=ee.selectedIndex!=null?ee.selectedIndex:0),X.selectedIndex=C,n(O)&&(O=ee.selectedColor!=null?ee.selectedColor:null),O!=null?X.selectedColor=O:ue&&(X.selectedColor="#888888"),Q!==!1&&e.styleTransforms(this,ee),this.clone=function(){return X.cloneProps(new e.ColorPicker(t,pe?null:r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,this.group,N))},this.dispose=function(St,Ft,hn){return le.removeEventListener("keydown",X.keyDownEvent),ue&&(Kt(),X.gradient.cur("default"),X.pixels.cur("default"),I&&I.cur("default"),ot.cur("default"),Ve=!1,Qt()),We&&We.dispose(),Pt&&Pt.dispose(),X.dropperDown&&Tt.stage.off("stagemousedown",X.dropperDown),X.dropperMove&&Tt.stage.off("stagemousemove",X.dropperMove),X.dropperUp&&Tt.stage.off("stagemouseup",X.dropperUp),hn||this.zimContainer_dispose(!0),!0}},e.extend(e.ColorPicker,e.Container,["clone","dispose"],"zimContainer",!1),e.EmojiPicker=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I){var _="width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",P;if(P=yt(e.EmojiPicker,arguments,_,this))return P;qe("67.05"),this.group=O;var F=C===!1?{}:e.getStyle("EmojiPicker",this.group,I);n(t)&&(t=F.width!=null?F.width:400),n(r)&&(r=F.height!=null?F.height:600),n(o)&&(o=F.monochrome!=null?F.monochrome:!1),n(l)&&(l=F.backgroundColor!=null?F.backgroundColor:e.lighter),n(f)&&(f=F.titleBar!=null?F.titleBar:"Emojis"),n(d)&&(d=F.titleBarColor!=null?F.titleBarColor:null),n(p)&&(p=F.titleBarBackgroundColor!=null?F.titleBarBackgroundColor:e.silver.toAlpha(.8)),n(w)&&(w=F.titleBarHeight!=null?F.titleBarHeight:40),n(k)&&(k=F.cache!=null?F.cache:!!e.mobile()),n(x)&&(x=F.size!=null?F.size:30),n(E)&&(E=F.colSize!=null?F.colSize:x+15),n(R)&&(R=F.rowSize!=null?F.rowSize:x+14),n(T)&&(T=F.collapse!=null?F.collapse:!1),n(S)&&(S=F.collapseColor!=null?F.collapseColor:n(d)?e.grey:d),n(b)&&(b=F.collapsed!=null?F.collapsed:!1),this.zimWindow_constructor(t,r,null,l,null,F.borderWidth!=null?F.borderWidth:2,F.padding!=null?F.padding:10,F.corner!=null?F.corner:10,null,F.scrollBarActive!=null?F.scrollBarActive:!0,F.scrollBarDrag!=null?F.scrollBarDrag:!0,null,null,null,!1,null,null,null,null,null,!0,null,null,null,null,null,null,f,d,p,w,F.draggable!=null?F.draggable:!0,null,null,F.close!=null?F.close:!0,null,null,F.fullSize!=null?F.fullSize:!1,null,F.resizeHandle!=null?F.resizeHandle:!1,T,S,b,null,null,C,O,e.copy(F)),this.type="EmojiPicker";var K=this;this.emojiData=n(i)?["\u{1F4A5}","\u{1F335}","\u{1F382}","\u{1F370}","\u{1F429}","\u{1F525}","\u{1F32B}","\u{1F30A}","\u{1F34F}","\u{1F34E}","\u{1F34B}","\u{1F34C}","\u{1F347}","\u{1F351}","\u{1F345}","\u{1F346}","\u{1F9C0}","\u{1F355}","\u{1F36C}","\u{1F36D}","\u{1F369}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F37E}","\u2615\uFE0F","\u{1F4A9}","\u{1F47B}","\u{1F916}","\u{1F4A4}","\u{1F440}","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F454}","\u{1F457}","\u{1F459}","\u{1F458}","\u{1F460}","\u{1F452}","\u{1F3A9}","\u{1F431}","\u{1F43B}","\u{1F436}","\u{1F43C}","\u{1F42F}","\u{1F981}","\u{1F42E}","\u{1F437}","\u{1F419}","\u{1F435}","\u{1F412}","\u{1F414}","\u{1F426}","\u{1F434}","\u{1F984}","\u{1F41D}","\u{1F422}","\u{1F420}","\u{1F410}","\u{1F54A}","\u{1F415}","\u{1F408}","\u{1F409}","\u{1F432}","\u{1F384}","\u{1F340}","\u{1F33B}","\u{1F339}","\u{1F490}","\u{1F344}","\u2600\uFE0F","\u{1F327}","\u26BD\uFE0F","\u{1F3C0}","\u{1F3C8}","\u26BE\uFE0F","\u{1F3BE}","\u{1F3D2}","\u26F7","\u{1F3C4}","\u{1F3CA}","\u{1F6B4}","\u{1F3AD}","\u{1F3A8}","\u{1F3B7}","\u{1F3BA}","\u{1F3B8}","\u{1F3BB}","\u{1F3B0}","\u{1F3B3}","\u{1F697}","\u{1F695}","\u{1F68C}","\u{1F68E}","\u{1F691}","\u{1F692}","\u{1F69C}","\u{1F682}","\u2708\uFE0F","\u26F5\uFE0F","\u{1F6F0}","\u{1F301}","\u{1F30B}","\u{1F3DE}","\u{1F305}","\u{1F386}","\u{1F308}","\u{1F3E0}","\u{1F3E5}","\u{1F3EB}","\u231A\uFE0F","\u{1F4F1}","\u{1F5A5}","\u{1F4BE}","\u{1F4FC}","\u{1F3A5}","\u260E\uFE0F","\u{1F4FA}","\u{1F4FB}","\u{1F4E1}","\u{1F56F}","\u{1F4B0}","\u{1F48E}","\u{1F6AC}","\u26B0","\u{1F52E}","\u{1F488}","\u{1F6BD}","\u{1F511}","\u{1F6CF}","\u{1F389}","\u{1F38A}","\u2764\uFE0F","\u{1F921}","\u{1F600}","\u{1F62C}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u263A\uFE0F","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F913}","\u{1F60E}","\u{1F917}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F914}","\u{1F633}","\u{1F61F}","\u{1F620}","\u{1F614}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F623}","\u{1F62B}","\u{1F629}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F622}","\u{1F62A}","\u{1F613}","\u{1F62D}","\u{1F635}","\u{1F632}","\u{1F910}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F634}","\u{1F480}","\u2620\uFE0F","\u{1F47D}","\u{1F63A}","\u{1F638}","\u{1F639}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F640}","\u{1F63F}","\u{1F63E}","\u{1F444}","\u{1F48B}","\u{1F445}","\u{1F5E3}","\u{1F464}","\u{1F465}","\u{1F456}","\u{1F463}","\u{1F461}","\u{1F462}","\u{1F45E}","\u{1F45F}","\u{1F393}","\u{1F451}","\u{1F45C}","\u{1F45B}","\u{1F4BC}","\u{1F453}","\u{1F576}","\u{1F48D}","\u{1F302}","\u2744\uFE0F","\u{1F32A}","\u26A1\uFE0F","\u{1F951}","\u{1F98B}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F427}","\u{1F577}","\u{1F982}","\u{1F980}","\u{1F40D}","\u{1F41B}","\u{1F40C}","\u{1F41E}","\u{1F41C}","\u{1F41F}","\u{1F421}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F40A}","\u{1F406}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F331}","\u{1F33F}","\u{1F343}","\u{1F342}","\u{1F341}","\u{1F33A}","\u{1F33C}","\u{1F338}","\u{1F330}","\u{1F383}","\u{1F41A}","\u{1F578}","\u{1F30E}","\u{1F30D}","\u{1F30F}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F31A}","\u{1F31D}","\u{1F31B}","\u{1F31C}","\u{1F31E}","\u{1F319}","\u2B50\uFE0F","\u{1F31F}","\u{1F4AB}","\u2728","\u2604\uFE0F","\u{1F354}","\u{1F373}","\u{1F35F}","\u{1F32D}","\u{1F35D}","\u{1F32E}","\u{1F32F}","\u{1F363}","\u{1F368}","\u{1F366}","\u{1F377}","\u{1F379}","\u{1F3C6}","\u{1F3AA}","\u{1F3B9}","\u{1F680}","\u26F2\uFE0F","\u{1F3A2}","\u26F0","\u{1F3D4}","\u{1F5FB}","\u{1F4AF}","\u{1F3B5}","\u{1F3B6}","\u{1F4AC}","\u{1F4AD}","\u{1F5EF}","\u{1F0CF}","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F953}","\u{1F943}","\u{1F3A4}","\u{1F6A8}","\u{1F3CD}","\u{1F3D5}","\u26FA\uFE0F","\u{1F3DC}","\u{1F3D6}","\u{1F3DD}","\u{1F307}","\u{1F306}","\u{1F3D9}","\u{1F303}","\u{1F3D8}","\u{1F3E1}","\u{1F3E2}","\u{1F528}","\u2699","\u{1F52B}","\u{1F4A3}","\u{1F52A}","\u{1F48A}","\u{1F573}","\u{1F489}","\u{1F6C1}","\u26F1","\u{1F381}","\u{1F388}","\u{1F380}","\u{1F4C5}","\u{1F5F3}","\u{1F4DA}","\u270F\uFE0F","\u26AA\uFE0F","\u26AB\uFE0F","\u2B1B\uFE0F","\u2B1C\uFE0F","\u{1F5BC}","\u{1F3DA}","\u{1F3ED}","\u{1F532}","\u{1F533}","\u{1F3B1}","\u{1F53A}","\u{1F53B}","\u{1F4A6}","\u26F3\uFE0F","\u{1F3DF}","\u{1F4A1}","\u{1F52D}","\u{1F52C}","\u{1F570}","\u{1F42A}","\u{1F42B}","\u{1F418}","\u{1F438}","\u{1F430}","\u{1F42D}","\u{1F6AA}","\u{1F6CD}","\u{1F441}","\u{1F353}","\u{1F352}","\u{1F336}","\u{1F33D}","\u{1F360}","\u{1F36F}","\u{1F35E}","\u{1F36B}","\u{1F37F}","\u{1F36A}","\u{1F34A}","\u{1F3F9}","\u{1F46F}","\u{1F46F}\u200D\u2642\uFE0F","\u{1F5D1}"]:i;var V=[];e.loop(this.emojiData,function(D){var U=new e.Emoji(D,x,o);V.push(U)}),this.wrapper=new e.Wrapper({items:V,width:t,alignInner:e.CENTER,valignInner:e.CENTER,wrapperType:"column",colSize:E,rowSize:R}).cur(),this.backdrop=new e.Rectangle(this.wrapper.width,this.wrapper.height,e.faint),e.timeout(.2,function(){K.scrollBar&&K.scrollBar.vertical&&K.scrollBar.vertical.getBounds()&&K.scrollBar.vertical.expand(),K.backdrop.heightOnly=K.wrapper.height,k&&K.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(D){K.currentEmoji=D.target,K.dispatchEvent("change")}),C!==!1&&e.styleTransforms(this,F),this.clone=function(){return K.cloneProps(new e.EmojiPicker(t,r,C,this.group,I))},this.dispose=function(){return!0}},e.extend(e.EmojiPicker,e.Window,["clone","dispose"],"zimWindow",!1),e.TextEditor=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X){var y="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",g;if(g=yt(e.TextEditor,arguments,y,this))return g;qe("67.1"),this.group=$;var h=pe===!1?{}:e.getStyle("TextEditor",this.group,X);if(n(t)&&(t=h.width!=null?h.width:400),n(i)&&(i=h.backgroundColor!=null?h.backgroundColor:e.lighter),n(S)&&(S=h.titleBar!=null?h.titleBar:"Text Editor"),n(J)&&(J=h.draggable!=null?h.draggable:!0),n(R)&&(R=h.titleBarHeight!=null?h.titleBarHeight:30),n(o)&&(o=h.fieldColor!=null?h.fieldColor:i.darken(.05)),n(x)&&(x=h.live!=null?h.live:!0),n(C)&&(C=h.wrap!=null?h.wrap:!0),n(I)&&(I=h.scroll!=null?h.scroll:!0),n(V)&&(V=h.margin!=null?h.margin:10),n(O)&&(O=h.limit!=null?h.limit:null),n(S)&&(S=h.titleBar!=null?h.titleBar:null),n(d)&&(d=h.sizeList!=null?h.sizeList:null),n(w)&&(w=h.colorList!=null?h.colorList:null),n(p)&&(p=h.optionList!=null?h.optionList:null),n(k)&&(k=h.fontList!=null?h.fontList:null),n(o)&&(o=h.fieldColor!=null?h.fieldColor:null),n(l)&&(l=h.fieldHeight!=null?h.fieldHeight:null),n(f)&&(f=h.textSize!=null?h.textSize:null),n(ae)&&(ae=h.fontListHeight!=null?h.fontListHeight:100),n(ee)&&(ee=h.fontListViewNum!=null?h.fontListViewNum:3),typeof te>"u")if(le.zdf)var te=le.zdf;else{At&&ut("zim.TextEditor - please provide a reference to zim Frame");return}this.zimPanel_constructor(t,300,null,S,b,E,R,i,F,K,D,!0,null,null,null,null,null,null,null,null,U,Q,J,N,pe,$,X);var L=this;n(T)&&(T=new e.Button({width:50,height:50,label:"",icon:new e.Shape().sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:e.white,corner:10,backgroundColor:e.green.darken(.2),borderColor:e.white,borderWidth:2,rollBackgroundColor:e.green,shadowBlur:3}).pos(V,R+V*2,e.RIGHT,e.TOP,L)),L.button=T,T.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",q),n(l)&&(l=h.fieldHeight!=null?h.fieldHeight:T.height+V*2);function q(){x||(Y.text=A.text),L.hide(),L.dispatchEvent("set")}var A=L.textArea=new e.TextArea({color:r,backgroundColor:o,width:t-T.width-V*3,height:n(l)?T.height+V*2:l,expand:10,password:P,placeholder:_,frame:te}).loc(V,R+V+(l&&l<T.height+V*2?(T.height-l)/2+V:0),null,null,!1);C||(A.tag.style.whiteSpace="nowrap"),O&&A.tag.setAttribute("maxLength",O),I&&(A.tag.style.overflowY="auto");var Y=new e.Label;L.on("pressmove",function(){A.resize()}),L.on("close",function(){L.inputEvent&&A.off("input",L.inputEvent),A.removeFrom()}),L.panelHeight=R+V+Math.max(l,T.height+V*2)+V;var xe=e.mobile(),G=xe?35:30;if(d||p||w){new e.Rectangle(t,G+V,"rgba(0,0,0,.05)").loc(0,L.panelHeight,L);var Z=[];if(w){var ge=Array.isArray(w),he=L.colorPicker=new e.ColorPicker({colors:ge?w:null,cols:ge?Math.min(w.length,12):null,alphaPicker:!1,greyPicker:!ge,container:te.stage});he.on("close",Se),he.on("change",function(){Y.color=r.color=he.selectedColor,L.dispatchEvent("update"),Se()}),L.closeColorPicker=function(){Se()},r=L.swatch=new e.Rectangle(G,G,Y.color,e.dark,1).cur(),r.on("mousedown",function(){L.dispatchEvent("color"),A.tag.style.display="none",he.selectedColor=r.color,he.show(),L.stage&&L.stage.update()}),Z.push(r)}if(p){p===!0&&(p=["bold","italic","align"]),n(le.STYLE)&&(le.STYLE={}),n(le.STYLE.group)&&(le.STYLE.group={}),le.STYLE.group.zimEditor={width:G,height:G,corner:0,borderColor:e.tin,shadowBlur:-1,backgroundColor:e.light,rollBackgroundColor:e.light,toggleBackgroundColor:e.green,toggleColor:e.grey};var ne,ue,Te;e.loop(p,function(Re){if(Re.toLowerCase()=="bold")ne=L.bold=new e.Button({label:new e.Label({text:"B",color:e.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"}),ne.on("click",function(){Y.bold=ne.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),Z.push(ne),Y.bold&&ne.toggle();else if(Re.toLowerCase()=="italic")ue=L.italic=new e.Button({label:new e.Label({text:"I",color:e.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"}),ue.on("click",function(){Y.italic=ue.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),Z.push(ue),Y.italic&&ue.toggle();else if(Re.toLowerCase()=="align"){var de=new e.Tile(new e.Rectangle(G-10,G-10,e.grey).centerReg(),3,1,10,10),Pe=xe?["\u21DA","\u21D4","\u21DB"]:["\u21D0","\u21D4","\u21D2"];e.loop(3,function(fe){var ve=de.getChildAt(fe);new e.Label(Pe[fe],G*2/3,null,e.white).center(ve).expand(10)});var Me=0;Y.align=="right"?Me=2:(Y.align=="center"||Y.align=="middle")&&(Me=1),Te=L.align=new e.Selector({tile:de,corner:0,borderWidth:1,borderColor:e.grey,backgroundColor:e.clear,selectedIndex:Me}),Te.on("change",function(){Te.selectedIndex==0?Y.align="left":Te.selectedIndex==1&&(Y.align="center"),Te.selectedIndex==2&&(Y.align="right"),L.dispatchEvent("update"),L.stage&&L.stage.update()}),Z.push(Te)}}),delete le.STYLE.group.zimEditor}if(d){var Fe=L.sizePicker=new e.Stepper({list:d===!0?null:d,stepperType:d===!0?null:"list",min:d===!0?5:null,max:d===!0?500:null,width:150,shadowBlur:-1,borderColor:e.dark,borderWidth:2,corner:0,backgroundColor:e.green,downForward:!1}).siz(null,G);Fe.arrowPrev.expand(0),Fe.textBox.color=e.lighter,Fe.on("change",function(){Y.size=Fe.currentValue,L.dispatchEvent("update"),L.stage&&L.stage.update()}),Fe.currentValue=Y.size,Z.push(Fe)}var ie=new e.Tile(Z,Z.length,1,10,10,!0).loc(V,L.panelHeight+V/2,L);L.panelHeight=L.panelHeight+V+ie.height+V}function Se(){A.tag.style.display="block",he.hide(),L.stage&&L.stage.update()}var se;if(k){Array.isArray(k)?se=k:(se=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],xe||(se=se.concat(["Comic Sans MS","Impact"])),se.sort());var me=L.fonts=new e.List({width:t-V*2,height:ae,viewNum:ee,backgroundColor:e.moon,color:e.grey,rollColor:e.dark,rollBackgroundColor:e.green.lighten(.5),selectedBackgroundColor:e.mist,selectedRollBackgroundColor:e.green.lighten(.6),selectedColor:e.dark,backdropColor:e.light,scrollBarColor:e.dark,shadowBlur:-1,list:se}).center(L).loc(null,L.panelHeight);me.on("change",function(){Y.font=me.currentValue,L.dispatchEvent("update"),L.stage&&L.stage.update()}),L.panelHeight=L.panelHeight+V+me.height+V}L.show=function(Re,de,Pe,Me){if(L.parent)return Re==L.label||(L.label=Re),L;Y=Re,A.addTo(L);var fe;if(Y&&Y.stage)fe=Y.stage;else if(Me)fe=Me.stage;else if(le.zdf)fe=le.zdf.stage;else return L;return!n(de)||!n(Pe)?L.loc(de,Pe):Y&&Y.y>fe.height/2?L.loc(fe.width/2-t/2,Y.y-L.panelHeight-fe.height*.05,fe):Y&&Y.y<=fe.height/2?L.loc(fe.width/2-t/2,Y.y+Y.height+fe.height*.05,fe):L.center(fe),L.y<20&&(L.y=20),L.y+L.height>L.stage.height&&(L.y=L.stage.height-L.height-20),j(),L.stage.update(),L};function j(){Y&&(A.text=Y.text),r&&(r.color=Y.color),ne&&ne.toggle(Y.bold==!0),ue&&ue.toggle(Y.italic==!0),Te&&(Te.noAnimate=!0,Y.align=="center"?Te.selectedIndex=1:Y.align=="right"?Te.selectedIndex=2:Te.selectedIndex=0),Fe&&(Fe.currentValue=Y.size),me&&(me.currentValue=Y.font),L.inputEvent&&A.off("input",L.inputEvent),L.inputEvent=A.on("input",function(){x&&Y&&(Y.text=A.text),L.dispatchEvent("input"),L.dispatchEvent("update"),L.stage&&L.stage.update()})}L.hide=function(){if(w&&he.hide(),A&&A.removeFrom(),!n(L.stage)){var Re=L.stage;return L.removeFrom(),Re.update(),L}},le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==L},set:function(){e.KEYFOCUS=L}}),e.KEYFOCUS||_e(),this.on("mousedown",function(){_e()});function _e(){L.keyFocus=!0}Object.defineProperty(L,"label",{get:function(){return Y},set:function(Re){Y=Re,j()}}),pe!==!1&&e.styleTransforms(this,h),this.clone=function(){return L.cloneProps(new e.TextEditor(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,this.group,X))},this.dispose=function(Re,de,Pe){return L.inputEvent&&A.off("input",L.inputEvent),he&&he.dispose(),r&&r.dispose(),me&&me.dispose(),T&&T.dispose(),A&&A.dispose(),Te&&Te.dispose(),ne&&ne.dispose(),ue&&ue.dispose(),Fe&&Fe.dispose(),Pe||this.zimPanel_dispose(),L.stage&&L.stage.update(),L.textArea=L.color=L.colorPicker=L.font=L.button=L.selector=L.bold=L.italic=L.size=null,!0}},e.extend(e.TextEditor,e.Panel,["clone","dispose"],"zimPanel",!1),e.Keyboard=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe){var $="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, style, group, inherit",X;if(X=yt(e.Keyboard,arguments,$,this))return X;qe("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=ee;var y=ae===!1?{}:e.getStyle(this.type,this.group,pe);n(t)&&(t=y.labels!=null?y.labels:[]),Array.isArray(t)||(t=[t]),n(r)&&(r=y.backgroundColor!=null?y.backgroundColor:e.dark),n(i)&&(i=y.color!=null?y.color:e.white),n(o)&&(o=y.shiftBackgroundColor!=null?y.shiftBackgroundColor:"orange"),n(l)&&(l=y.shiftHoldBackgroundColor!=null?y.shiftHoldBackgroundColor:"red"),n(f)&&(f=y.placeBackgroundColor!=null?y.placeBackgroundColor:e.blue),n(d)&&(d=y.placeColor!=null?y.placeColor:i),n(p)&&(p=y.cursorColor!=null?y.cursorColor:e.blue),n(w)&&(w=y.shadeAlpha!=null?y.shadeAlpha:.2),n(k)&&(k=y.borderColor!=null?y.borderColor:"rgba(0,0,0,.1)"),n(x)&&(x=y.borderWidth!=null?y.borderWidth:null),k<0||x<0?k=x=null:k!=null&&x==null&&(x=1),n(T)&&(T=y.margin!=null?y.margin:5),n(S)&&(S=y.corner!=null?y.corner:30),n(b)&&(b=y.draggable!=null?y.draggable:!1),n(E)&&(E=y.placeClose!=null?y.placeClose:!0),n(R)&&(R=y.shadowColor!=null?y.shadowColor:"rgba(0,0,0,.2)"),n(C)&&(C=y.shadowBlur!=null?y.shadowBlur:14),n(I)&&(I=y.data!=null?y.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]]]),I[3]||(I[3]={e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]});var g=this;n(_)&&(_=y.place!=null?y.place:!0),n(P)&&(P=y.placeShiftH!=null?y.placeShiftH:0),n(F)&&(F=y.placeShiftV!=null?y.placeShiftV:0),n(V)&&(V=y.rtl!=null?y.rtl:!1),n(D)&&(D=y.hardKeyboard!=null?y.hardKeyboard:!0),n(Q)&&(Q=y.numPadScale!=null?y.numPadScale:.8),n(N)&&(N=y.numPadOnly!=null?y.numPadOnly:!1),n(J)&&(J=y.numPadDraggable!=null?y.numPadDraggable:!0),n(te)&&(te=y.numPadAdvanced!=null?y.numPadAdvanced:!1),n(U)&&(U=y.layout!=null?y.layout:"qwerty"),U=U.toLowerCase(),U!="qwerty"&&(U=="arabic"?I=[[["\u0636","\u0635","\u062B","\u0642","\u0641","\u063A","\u0639","\u0647","\u062E","\u062D","\u062C"],["\u0634","\u0633","\u064A","\u0628","\u0644","\u0627","\u062A","\u0646","\u0645","\u0643","\u0637"],["\u0630","\u0621","\u0624","\u0631","\u0649","\u0629","\u0648","\u0632","\u0638","\u062F","back"],["?123","\u0640"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{\u0627:["\u0623","\u0625","\u0622","\u0621"],\u0649:["\u0626"],\u0621:["\u0626","\u0624"],\u0648:["\u0624"],\u0640:["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],"*":["\u064D","\u064B","\u064C","\u0652","\u064F","\u0650","\u064E","\u0651"],n:["\xF1","\u0144"]}]:U=="hebrew"?I=[[["\u05E7","\u05E8","\u05D0","\u05D8","\u05D5","\u05DF","\u05DD","\u05E4","backspace"],["\u05E9","\u05D3","\u05D2","\u05DB","\u05E2","\u05D9","\u05D7","\u05DC","\u05DA","\u05E3"],["\u05D6","\u05E1","\u05D1","\u05E0","\u05D4","\u05DE","\u05E6","\u05EA","\u05E5"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:U=="azerty"?I=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","\xB4","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","backspace"],["ABC","@"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]}]:U=="turkish"&&(I=[[["q","w","e","r","t","y","u","\u0131","o","p","\u011F","\xFC"],["a","s","d","f","g","h","j","k","l","\u015F","i"],["shift","z","x","c","v","b","n","m","\xF6","\xE7","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["\u20AC","\xA3","\xA5","$","\uFFE6","~","`","\xA4","\u2661","\u2606","*"],["2/2","_","\\","|","\u300A","\u300B","\xA1","\xBF","*","backspace"],["ABC","*"]],{e:["\u0117","\u0113","\u0119","\xEA","\xE9","\xEB","\xE8"],u:["\u016B","\xFB","\xFA","\xFC","\xF9"],i:["\u012B","\u012F","\xEC","\xED","\xEF","\xEE"],o:["\u014D","\u0153","\xF8","\xF5","\xF4","\xF3","\xF6","\xF2"],a:["\u0101","\xE3","\xE5","\xE2","\xE1","\xE4","\xE0","\xE6"],n:["\xF1","\u0144"]},{\u0131:"I",i:"\u0130"},{I:"\u0131",\u0130:"i"}])),g.data=I;var h="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(n(O))if(le.zdf)O=le.zdf.stage;else{ut(h);return}else if(O.getBounds){if(n(O.stage)){ut("zim display - Keyboard(): The container must have a stage property");return}}else{ut(h);return}R!=-1&&C>0&&(g.shadow=new je.Shadow(R,3,3,C));var L=le.zdf?le.zdf.stage:null;g.labels=t;var q,A=10;e.loop(I[0],function(Ye){Ye.length>A&&(A=Ye.length)});var Y=A,xe=["/","",",",".","numpad","away"];n(K)||xe.splice(1,0,K);var G=e.copy(I[0]);G[3]=G[3].concat(xe);var Z=e.copy(I[1]);Z[3]=Z[3].concat(xe);var ge=e.copy(I[2]);ge[3]=ge[3].concat(xe);var he=[],ne=(1e3-(Y-1)*5)/Y,ue={def:"default",shift:"shift",number1:"number1",number2:"number2"},Te=ue.def,Fe,ie,Se,se=!1,me,j,_e=0,Re,de=[],Pe,Me,fe,ve,Ie,we,Xe,ye;Qe(),ce(Te),b&&Je(),this.on("mousedown",Ge);function Ge(Ye){L=g.stage,ie&&g.removeChild(ie),Re&&de.indexOf(Ye.target)<0&&Ae(),n(Ye.target.na)||(b&&Ye.target===Xe?(g.tickerMouseEvent=L.on("stagemousemove",function(Ke){g.mouseYAmount=Ke.stageY}),e.Ticker.add(gt),g.on("pressup",We),ye=Ye.stageY-g.localToGlobal(0,0).y):!n(K)&&Ye.target.na===K?g.dispatchEvent("special"):Ye.target.na==="shift"?Oe():Ye.target.toggle==="?123"?(g.removeChild(Fe),ce(ue.number1)):Ye.target.toggle==="ABC"?(g.removeChild(Fe),Te=ue.def,ce(),se&&Oe(!0)):Ye.target.toggle==="1/2"?(g.removeChild(Fe),ce(ue.number2)):Ye.target.toggle==="2/2"?(g.removeChild(Fe),ce(ue.number1)):Ye.target.na==="numpad"?nt(Ye.target):Ye.target.na==="away"?(g.hideKeyboard(),g.dispatchEvent("close")):I[3]&&I[3][Ye.target.na]?Ue(Ye.target.na):Ye.target.na==="return"?Le("\n"):Ye.target.na==="backspace"||Ye.target.na==="back"?mt():Ye.target.na===""?Le(" "):Le(Ye.target.na),L.update())}g.addChar=function(Ye){!n(Ye)&&Ye.match(/^.$/)&&Le(Ye)},g.removeChar=function(){mt(!0)},g.clearText=function(){j.text="",mt(!0),ft(),g.selectedIndex=0},g.setText=function(Ye){j.text=Ye,ft(),g.selectedIndex=Ye.length};var He;function Oe(Ye){var Ke=!1,ze,tt;if(Te===ue.def){for(me.color=Ye?l:o,ze=0;ze<he.length-6-(n(K)?0:1);ze++)tt=he[ze],tt.label.text.length>0&&(tt.na.length===1?(I[4]&&I[4][tt.label.text]?tt.label.text=I[4][tt.label.text]:tt.label.text=tt.label.text.toUpperCase(),tt.label.centerReg(tt).mov(0,6)):tt.label.centerReg(tt));Ye||(Ke=!0,setTimeout(ht,500),He=g.on("pressup",Be)),Te=ue.shift}else{for(me.color=r,se=!1,ze=0;ze<he.length-6;ze++)tt=he[ze],tt.label.text.length>0&&(tt.na.length===1?(I[5]&&I[5][tt.label.text]?tt.label.text=I[5][tt.label.text]:tt.label.text=tt.label.text.toLowerCase(),tt.label.centerReg(tt).mov(0,3)):tt.label.centerReg(tt));Te=ue.def}Fe.updateCache(),g.stage&&g.stage.update();function ht(){Ke&&(se=!0,me.color=l,Fe.updateCache(),g.stage&&g.stage.update())}function Be(){g.off("pressup",He),Ke=!1}}function ce(Ye){var Ke,ze,tt,ht=0,Be=0,it,vt,et=!1,wt,xt,_t=!1;n(Ye)&&(Ye=ue.def),Ye===ue.def?Ke=G:Ye===ue.number1?Ke=Z:Ye===ue.number2&&(Ke=ge),g.keys=Fe=new e.Container(1e3,430,null,null,!1).addTo(g).vis(!N);for(var lt=0;lt<Ke.length;lt++){(lt<=1||Ye==ue.def&&lt==2&&Ke[2][0]!="shift")&&(ht=(ne/2+2.5)*(Y-Ke[lt].length));for(var Dt=0;Dt<Ke[lt].length;Dt++){if(et=!1,wt=null,_t=!1,Ke[lt][Dt]=="backspace"?(vt=!0,wt=Me,_t=!0):Ke[lt][Dt]=="back"?(vt=!1,wt=Me,_t=!0):Ke[lt][Dt]=="shift"?(vt=!0,wt=Pe):(lt==3||Ye!=ue.def&&lt==2)&&Dt==0?(vt=!0,_t=!0):Ke[lt][Dt]==""?(vt=!1,et=!0):Ke[lt][Dt]=="numpad"?(wt=ve,vt=!1,_t=!0):Ke[lt][Dt]=="away"?(wt=fe,vt=!0,_t=!0):vt=!1,vt?it=ne*1.5+2.5:et?(it=(ne+5)*((n(K)?3:2)+Y-10+1-I[0][3].length)-5,I[0][3].indexOf("backspace")!=-1&&(it-=ne/2)):it=ne,tt=new e.Rectangle(it,ne,r,k,x,S,null,null,null,!1).cur().addTo(Fe),_t&&tt.addChild(new e.Rectangle(it,ne,"black",null,null,S,null,null,null,!1).alp(w)),wt?tt.label=ze=new e.Label({text:"",backgroundColor:"ignore",font:y.font!=null?y.font:null,style:!1}):tt.label=ze=new e.Label({lineWidth:10,lineHeight:25,font:y.font!=null?y.font:null,text:Ke[lt][Dt],color:i,align:"center",style:!1}),wt){var Pt=wt.clone(),It;Ke[lt][Dt]=="numpad"?(It=60,we=tt):It=70,Pt.scaleTo(tt,It,It),Pt.centerReg(tt)}xt?(xt=!1,ht+=67.33):(ze.centerReg(tt).mov(0,isNaN(ze.text)?3:7),tt.x=ht,tt.y=Be,tt.na=Ke[lt][Dt],lt==2&&Dt==0&&Ye==ue.number1&&(tt.toggle="1/2"),lt==2&&Dt==0&&Ye==ue.number2&&(tt.toggle="2/2"),lt==3&&Dt==0&&Ye==ue.def&&(tt.toggle="?123"),lt==3&&Dt==0&&Ye!=ue.def&&(tt.toggle="ABC"),tt.toggle&&ze.mov(0,3),he.push(tt),tt.na=="shift"&&(me=tt),ht=tt.x+tt.width+5)}Be+=ne+5,ht=0}Fe.cache(x?-x:0,x?-x:0,x?Fe.width+x*2:Fe.width,x?Fe.height+x*2:Fe.height)}function Ue(Ye){var Ke=I[3][Ye],ze=!1,tt=!1,ht;ht=e.timeout(500,vt,null,"ms");var Be=g.on("pressup",it);function it(){ze=!0,g.off("pressup",Be),tt||Le(Ye)}function vt(){var et,wt,xt,_t=0,lt;if(ht.clear(),!ze){tt=!0,ie=new e.Container(1e3,ne,null,null,!1).addTo(g,0),ie.y=-ne-5;for(var Dt=0;Dt<Ke.length;Dt++)Te===ue.shift?lt=Ke[Dt].toUpperCase():lt=Ke[Dt],et=new e.Label({lineWidth:10,lineHeight:25,text:lt,font:y.font!=null?y.font:null,color:i,align:"center",style:!1}),wt=new e.Rectangle(ne,ne,r,k,x,S,null,null,null,!1).addTo(ie),xt=new e.Rectangle(ne,ne,"white",null,null,S,null,null,null,!1).alp(.2),wt.addChild(xt),et.center(wt),wt.na=Ke[Dt],wt.x=_t,_t+=ne+5;g.stage&&g.stage.update()}}}function Qe(){Pe=new e.Shape({style:!1}),Pe.graphics.f(i).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),Pe.setBounds(-51/2,-72/2,51,72),Me=new e.Container({style:!1});var Ye=new e.Shape({style:!1});Ye.graphics.f(i).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),Ye.setTransform(82.6,32),Ye.addTo(Me);var Ke=new e.Shape({style:!1});Ke.graphics.f(i).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),Ke.setTransform(62.2,32),Ke.addTo(Me),Me.setBounds(0,0,125,64),fe=new e.Container({style:!1}),fe.setBounds(0,0,147,86);for(var ze=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],tt,ht=0;ht<ze.length;ht++)tt=new e.Shape({style:!1}),tt.graphics.f(i).s().p(ze[ht].p),tt.setTransform(ze[ht].transform[0],ze[ht].transform[1]),tt.addTo(fe);ve=new e.Container({style:!1}),ve.setBounds(0,0,62,86),Ie=new e.Container({style:!1}),Ie.setBounds(0,0,62,86);for(var Be=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],ht=0;ht<Be.length;ht++){var it=new e.Shape({style:!1});it.graphics.f(i).s().p(Be[ht].p),it.setTransform(Be[ht].transform[0],Be[ht].transform[1],Be[ht].transform[2],Be[ht].transform[3],Be[ht].transform[4]),it.addTo(ve);var vt=new e.Shape({style:!1});vt.graphics.f(i).s().p(Be[ht].p),vt.setTransform(Be[ht].transform[0],Be[ht].transform[1]),vt.addTo(Ie)}it.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),vt.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}function Je(){Xe=new e.Rectangle(ne*1.5+2.5+2.5,ne,r,k,x,S,null,null,null,!1).addTo(g,0).cur();for(var Ye,Ke=0;Ke<4;Ke++)Ye=new e.Rectangle(Xe.width*.4,4,i,null,null,null,null,null,null,!1).centerReg(Xe).alp(.2),Ye.y-=-22+Ke*15;Xe.x=8.5*ne+40,Xe.y=-ne-5,Xe.na="drag"}function nt(Ye){g.numPad||(g.numPad=new e.NumPad({advanced:te,draggable:J}).sca(Q),J||N?g.numPad.center({add:!1}):g.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1}),g.numPad.on("pressed",function(){g.numPad.key=="enter"?g.dispatchEvent("enter"):g.numPad.key=="backspace"?g.removeChar():g.numPad.key=="clear"?g.clearText():g.numPad.key=="space"?Le(" "):Le(g.numPad.key)}),g.numPad.on("close",function(){we.removeChildAt(2),ve.clone().scaleTo(we,60,60).centerReg(we,2),Fe.updateCache(),(!g.keys.parent||!g.keys.visible)&&Se&&(Se.visible=!1,g.toggled=!1,Ae())})),we.removeChildAt(2),g.numPad.parent||Ye===!1?(g.numPad.removeFrom(),ve.clone().scaleTo(we,60,60).centerReg(we,2)):(!g.numPad.parent||Ye===!0)&&(g.numPad.addTo(),Ie.clone().scaleTo(we,60,60).centerReg(we,2)),Fe.updateCache(),g.stage&&g.stage.update()}function gt(){g.mouseYAmount&&(g.y=g.parent.globalToLocal(0,g.mouseYAmount-ye).y)}function We(){L.off("pressmousemove",g.tickerMouseEvent),e.Ticker.remove(gt)}g.setBounds(1e3,400-(Y-10)*26);function st(){if(!(!j||!Se)){for(var Ye=j.label.x+j.label.getBounds().x,Ke=0;Ke<_e;Ke++)Ye+=j.widthArray[Ke]?j.widthArray[Ke]:0;Se.heightOnly=j.getBounds().height*(j.backing&&n(j.padding)?.9:1)-(j.paddingV&&j.background?j.paddingV*2:0),Se.center(j),Se.x=Ye}}function at(){if(Re||!j)return g;var Ye=E?["<",">","x"]:["<",">"],Ke,ze,tt;de=[],tt=j.localToLocal(0,0,g),Re=g.place=new e.Container({style:!1}).addTo(g).cur();for(var ht=0;ht<Ye.length;ht++)Ke=new e.Rectangle(ne,ne,f,k,x,S,null,null,null,!1),Ye[ht]=="x"&&new e.Rectangle(ne,ne,"black",null,null,S,null,null,null,!1).alp(w).addTo(Ke),ze=new e.Label({lineWidth:10,text:Ye[ht],backing:Ke,font:y.font!=null?y.font:null,color:d,align:"center",valign:"center",style:!1}),ze.pos(0,0,e.LEFT,e.TOP,Re).cache(),ze.x=ze.x+ht*(ne+5),de.push(ze);tt=j.localToLocal(0,0,g),Re.x=tt.x+P,Re.y=tt.y+j.height+15+F,Re.on("click",Be);function Be(it){de.indexOf(it.target)==0?_e>0&&_e--:de.indexOf(it.target)==1?_e<j.text.length&&_e++:Ae(),st()}g.stage&&g.stage.update()}function Ae(){if(!Re)return g;Re.dispose(),Re=null}function Le(Ye){if(j){var Ke,ze;if(Ye==="del")j&&(j.text=[j.text.slice(0,_e-1),j.text.slice(_e)].join("")),_e--,ft();else{Te===ue.shift&&(Ye=Ye.toUpperCase());var tt=j.text;Ke=j.clone().removeFrom(),Ke.text=Ye,ze=Ke.label.getMeasuredWidth(),j.widthArray?j.widthArray.splice(_e,0,ze):j.widthArray=[j.breedte],_e<j.text.length?j.text=[j.text.slice(0,_e),Ye,j.text.slice(_e)].join(""):j.text+=Ye,j&&j.label.getBounds().width<q?(_e++,st()):j.text=tt}Te===ue.shift&&!se&&(g.removeChild(Fe),ce(),Te=ue.def),st();var ht=new je.Event("keydown");ht.letter=Ye,g.dispatchEvent(ht),g.stage&&g.stage.update()}}function De(Ye){if(g.stage){var Ke,ze=0,tt=!1;j=Ye.target,j.widthArrayCheck||ft(),q=j.label.lineWidth?j.label.lineWidth:1e4,Ke=j.globalToLocal(Ye.stageX/e.scaX,Ye.stageY/e.scaY),Ke.x-=j.label.x,Ke.y-=j.label.y;for(var ht=0;ht<j.widthArray.length;ht++)if(ze+=j.widthArray[ht],Ke.x<ze-j.widthArray[ht]/2+j.label.getBounds().x){_e=ht,tt=!0;break}tt||(_e=j.text.length),st(),_&&!Re&&j.text.length>0&&at(),Re&&j&&(j.text.length>0?(Ke=j.localToLocal(0,0,g),Re.x=Ke.x+P,Re.y=Ke.y+j.height+15+F):Ae())}}function ft(){if(j){var Ye=new e.Label("");j.widthArray=[];for(var Ke=0;Ke<j.text.length;Ke++)Ye=j.clone().removeFrom(),Ye.text=j.text[Ke],j.widthArray.push(Ye.label.getMeasuredWidth());Ye.text=j.text,j.widthArrayCheck=!0,st()}}function mt(Ye){var Ke=!0,ze;function tt(){(!j||j.text.length<1||g.currentIndex==0)&&(Ke=!1),Ke&&(ht(),ze&&(ze=e.timeout(200,tt,null,"ms"))),j&&j.text.length<1&&Be()}function ht(){j&&j.text.length>0?(g.selectedIndex>0&&Le("del"),Ye?Be():g.on("pressup",Be)):Le("del")}function Be(){Ke=!1,ze&&ze.clear(),g.off("pressup",Be)}ht(),ze=e.timeout(300,tt,null,"ms"),g.stage&&g.stage.update()}function Ze(){for(var Ye=0;Ye<t.length;Ye++)t[Ye].clickEvent=t[Ye].on("click",De)}Ze();function dt(){if(t.length>1)for(var Ye=0;Ye<t.length;Ye++)t[Ye].off("click",t[Ye].clickEvent)}function Ee(){if(!Se&&(j=t[0],q=j&&j.label.lineWidth?j.label.lineWidth:1e4,j)){Se=new e.Rectangle(3,j.height-(j.paddingV&&j.background?j.paddingV*2:0),p,null,null,null,null,null,null,!1).center(j),Se.x=0,Se.visible=!1,Se.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var Ye=0;Ye<t.length;Ye++)t[Ye].widthArray=[0];ft()}}Ee();function ot(){e.stopAnimate("knipperTekst"),j&&j.removeChild(Se),Se=null,j=null}Object.defineProperty(this,"selectedLabel",{get:function(){return j},set:function(Ye){var Ke={target:Ye};De(Ke),g.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return _e},set:function(Ye){_e=Ye,st()}}),this.show=function(Ye,Ke){if(g.addTo(O),!n(Ye)){var ze={target:t[Ye]};De(ze)}return Se&&(Se.visible=!0),g.toggled=!0,N?nt():(!N||Ke)&&(g.keys.vis(!0),Ve.vis(!0)),g.numPad&&g.numPad.parent&&g.numPad.top(),g},this.hide=function(){return g.removeFrom(O),nt(!1),Se&&(Se.visible=!1),L.update(),g.toggled=!1,g},this.showNumPad=function(){nt(!0),g.toggled=!0,Se&&(Se.visible=!0)},this.hideNumPad=function(){nt(!1),(!g.keys.parent||!g.keys.visible)&&Se&&(Se.visible=!1,g.toggled=!1,Ae())},this.showKeyboard=function(){g.show(null,!0)},this.hideKeyboard=function(){!g.numPad||!g.numPad.parent?g.hide():(g.keys.vis(!1),Ve.vis(!1))},this.toggle=function(Ye){return Ye===!0?g.show():Ye===!1||g.parent?g.hide():g.show(),g},this.showPlace=function(){return at(),g},this.hidePlace=function(){return Ae(),g},this.addLabels=function(Ye){Array.isArray(Ye)||(Ye=[Ye]);for(var Ke=Ye.length-1;Ke>=0;Ke--){var ze=t.indexOf(Ye[Ke]);ze>=0||Ye[Ke].type!="Label"?Ye.splice(Ke,1):Ye[Ke].widthArray=[0]}return dt(),t=t.concat(Ye),Ze(),Ee(),Se&&(Se.visible=!0),g},this.removeLabels=function(Ye){Array.isArray(Ye)||(Ye=[Ye]),dt();for(var Ke=0;Ke<Ye.length;Ke++){var ze=t.indexOf(Ye[Ke]);ze>=0&&t.splice(ze,1)}return Ze(),t.length==0?j&&ot():j&&t.indexOf(j)==-1&&(ot(),Ee()),g};var Ve=new e.Rectangle(this.width,this.height,e.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();Ve.on("mousedown",function(){}),Ve.on("click",function(){}),N&&Ve.vis(!1),this.resize=function(){if(g.scaleTo(L,100-T*2/L.width*100,50-T*2/L.height*100),g.y=L.height-g.height-T,g.x=L.width/2-g.width/2,j&&Re){var Ye=j.localToLocal(0,0,g);Re.x=Ye.x,Re.y=Ye.y+j.height+15}return g.stage&&g.stage.update(),g},this.resize(),g.selectedLabel&&(g.selectedIndex=g.selectedLabel.text.length),D&&(this.keydownEvent=function(Ye){if(g.stage){var Ke=g;n(Ke)||(Ye.keyCode==35&&(Ke.selectedIndex=Ke.selectedLabel.text.length),Ye.keyCode==36&&(Ke.selectedIndex=0),Ye.keyCode==37&&(Ke.selectedIndex=Ke.selectedIndex-1),Ye.keyCode==39&&(Ke.selectedIndex=Ke.selectedIndex+1),Ye.keyCode==46&&Ke.selectedIndex<Ke.selectedLabel.text.length&&(Ke.selectedIndex=Ke.selectedIndex+1,Ke.removeChar()),Ye.keyCode==8&&(Ye.preventDefault(),Ke.removeChar()),Ke.addChar(Ye.key),g.stage&&g.stage.update())}},le.addEventListener("keydown",this.keydownEvent)),ae!==!1&&e.styleTransforms(this,y),this.clone=function(){var Ye=new e.Keyboard(t,r,i,o,l,f,p,w,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,this.group,pe);return g.cloneProps(Ye)},this.dispose=function(Ye,Ke,ze){Ve.removeAllEventListeners(),Ve=null,g.keydownEvent&&le.removeEventListener("keydown",g.keydownEvent);for(var tt=0;tt<g.labels.length;tt++)g.labels[tt].removeAllEventListeners();return g.numPad&&g.numPad.dispose(),Se&&Se.dispose(),g.labels=j=null,L&&L.off("pressmousemove",g.tickerMouseEvent),ze||g.zimContainer_dispose(!0),!0}},e.extend(e.Keyboard,e.Container,["clone","dispose"],"zimContainer",!1),e.Organizer=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q){var J="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",N;if(N=yt(e.Organizer,arguments,J,this))return N;qe("67.3"),this.group=U;var te=D===!1?{}:e.getStyle("Organizer",this.group,Q);if(n(t)&&(t=te.width!=null?te.width:r&&r.vertical?r.width:300),n(i)&&(i=te.useAdd!=null?te.useAdd:!0),n(o)&&(o=te.useRemove!=null?te.useRemove:!0),n(l)&&(l=te.usePosition!=null?te.usePosition:!0),n(f)&&(f=te.autoAdd!=null?te.autoAdd:i),n(d)&&(d=te.autoRemove!=null?te.autoRemove:o),n(p)&&(p=te.autoPosition!=null?te.autoPosition:l),n(w)&&(w=te.addForward!=null?te.addForward:!0),n(k)&&(k=te.removeForward!=null?te.removeForward:!0),n(x)&&(x=te.backgroundColor!=null?te.backgroundColor:e.tin),n(T)&&(T=te.rollBackgroundColor!=null?te.rollBackgroundColor:e.grey),n(S)&&(S=te.selectedBackgroundColor!=null?te.selectedBackgroundColor:e.dark),n(E)&&(E=te.color!=null?te.color:e.white),n(R)&&(R=te.rollColor!=null?te.rollColor:E),n(C)&&(C=te.selectedColor!=null?te.selectedColor:E),n(O)&&(O=te.selectedRollColor!=null?te.selectedRollColor:E),n(I)&&(I=te.spacing!=null?te.spacing:1),n(_)&&(_=te.corner!=null?te.corner:0),n(F)&&(F=te.gradient!=null?te.gradient:.2),n(K)&&(K=te.gloss!=null?te.gloss:null),n(V)&&(V=te.backdropColor!=null?te.backdropColor:null),Array.isArray(_)||(_=[_,_,_,_]),!(!i&&!l&&!o)){var ae=(i?1:0)+(l?4:0)+(o?1:0),ee=(t+I)/ae,pe={width:ee,height:ee,label:"",shadowColor:-1,gradient:F,corner:_,backgroundColor:x,rollBackgroundColor:T},$=[],X=new e.Shape;if(X.graphics.f(E).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),i&&$.push(new e.Button({icon:X.sca(.55).rot(-45).reg(1),inherit:pe})),l){var y=new e.Shape;y.graphics.f(E).p("AiJieIETCeIkTCfg"),$.push(new e.Button({icon:y.sca(.6).rot(r&&!r.vertical?180:-90).reg(-2),inherit:pe})),$.push(new e.Button({icon:y.clone().sca(.6).rot(r&&!r.vertical?0:90).reg(-2),inherit:pe}));var g=new e.Shape;g.graphics.f(E).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),$.push(new e.Button({icon:g.sca(.62).rot(r&&!r.vertical?0:90).reg(0),inherit:pe})),$.push(new e.Button({icon:g.clone().sca(.62).rot(r&&!r.vertical?180:-90).reg(0),inherit:pe}))}o&&$.push(new e.Button({icon:X.clone().rot(0).sca(.55),inherit:pe})),$.length==0&&($=[""]),this.zimTabs_constructor(t,ee,$,x,T,null,S,b,E,R,null,C,O,!1,I,!0,!1,_,null,!0,F,K,null,null,null,null,null,null,null,null,null,null,V);var h=this;h.list=r,h.type="Organizer",h.setButtons=function(){if(l){var A=i?1:0;$[A+0]&&($[A+0].icon.rotation=h.list&&!h.list.vertical?180:-90),$[A+1]&&($[A+1].icon.rotation=h.list&&!h.list.vertical?0:90),$[A+2]&&($[A+2].icon.rotation=h.list&&!h.list.vertical?0:90),$[A+3]&&($[A+3].icon.rotation=h.list&&!h.list.vertical?180:-90)}};var L=!1,q=r;h.change(function(A){(!L&&h.list||h.list&&h.list!=q)&&(h.list!=q&&q&&q.noChange(),h.list.change(function(){h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex}),L=!0,q=h.list);var Y=A.target.selectedIndex;i||Y++,!l&&(!i||Y>0)&&(Y=5);var xe=n(h.list.selectedIndex)||h.list.selectedIndex<0;xe&&(h.currentValue=null),h.lastIndex=h.list.selectedIndex;var G;switch(Y){case 0:f&&(G=Math.max(0,h.list.selectedIndex),h.add(G)),h.orgType="add";break;case 1:if(xe)break;p&&(G=h.list.selectedIndex,h.up(G)),h.orgType="up";break;case 2:if(xe)break;p&&(G=h.list.selectedIndex,h.down(G)),h.orgType="down";break;case 3:if(xe)break;p&&(G=h.list.selectedIndex,h.toTop(G)),h.orgType="top";break;case 4:if(xe)break;p&&(G=h.list.selectedIndex,h.toBottom(G)),h.orgType="bottom";break;case 5:if(xe)break;d&&(G=h.list.selectedIndex,h.remove(G)),h.orgType="remove";break}}),this.add=function(A,Y,xe){return n(A)&&(A=h.lastIndex),n(Y)&&(Y=""),w?A=Math.min(h.list.length,Math.max(0,h.list.selectedIndex)+1):A=Math.max(0,h.list.selectedIndex),h.list.addAt(Y,A,xe),h.list.selectedIndexPlusPosition=A,h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},this.up=function(A){n(A)&&(A=h.lastIndex);var Y=h.list.items[A];return n(Y)||(h.list.removeAt(1,A),h.list.addAt(Y,A-1),h.list.selectedIndexPlusPosition=Math.max(0,A-1),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.down=function(A){n(A)&&(A=h.lastIndex);var Y=h.list.items[A];return n(Y)||(h.list.removeAt(1,A),h.list.addAt(Y,A+1),h.list.selectedIndexPlusPosition=Math.min(h.list.length-1,A+1),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.toTop=function(A){n(A)&&(A=h.lastIndex);var Y=h.list.items[A];return n(Y)||(h.list.removeAt(1,A),h.list.addAt(Y,0),h.list.first(),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex),h},this.toBottom=function(A){n(A)&&(A=h.lastIndex);var Y=h.list.items[A];if(!n(Y))return h.list.removeAt(1,A),h.list.addAt(Y,h.list.length),h.list.last(),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},this.remove=function(A){if(n(A))if(h.list.selectedIndex>=0)A=h.list.selectedIndex;else return h;var Y=A==h.list.selectedIndex;return h.removedItem=h.list.items[A],h.list.removeAt(1,A),Y?k||(A=Math.max(0,A-1)):A=h.list.selectedIndex,h.list.selectedIndexPlusPosition=Math.min(h.list.length-1,A),h.orgItem=h.list.selected,h.orgIndex=h.list.selectedIndex,h},D!==!1&&e.styleTransforms(this,te),this.clone=function(){return h.cloneProps(new e.Organizer(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,h.group,Q))},this.dispose=function(A,Y,xe){return $=null,xe||h.zimTabs_dispose(!0),!0}}},e.extend(e.Organizer,e.Tabs,["clone","dispose"],"zimTabs",!1),e.Connectors=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g){var h="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",L;if(L=yt(e.Connectors,arguments,h,this))return L;qe("67.39"),this.group=y;var q=X===!1?{}:e.getStyle("Connectors",this.group,g);n(t)&&(t=q.width!=null?q.width:null),n(r)&&(r=q.height!=null?q.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",n(i)&&(i=q.points!=null?q.points:[[0,0],[100,0],[100,100],[0,100]]),n(o)&&(o=q.node!=null?q.node:new e.Circle(10,e.grey,e.grey)),o.removeFrom(),o.color==e.clear&&!o.hitArea&&o.expand(0),n(l)&&(l=q.line!=null?q.line:new e.Line({length:10,thickness:3,color:e.tin,strokeObj:{caps:"round"}})),n(w)&&(w=q.num!=null?q.num:10),n(f)&&(f=q.linear!=null?q.linear:!1),n(d)&&(d=q.linearWrap!=null?q.linearWrap:!0),n(V)&&(V=q.nodeRollColor!=null?q.nodeRollColor:o.color.match("rgb")?o.color:o.color.lighten(.2)),n(D)&&(D=q.nodeRollBorderColor!=null?q.nodeRollBorderColor:o.borderColor),n(U)&&(U=q.nodeSelectedColor!=null?q.nodeSelectedColor:e.white),n(Q)&&(Q=q.nodeSelectedBorderColor!=null?q.nodeSelectedBorderColor:o.borderColor),n(J)&&(J=q.baseColor!=null?q.baseColor:o.color),n(N)&&(N=q.baseBorderColor!=null?q.baseBorderColor:o.borderColor),n(te)&&(te=q.baseRollover!=null?q.baseRollover:!1),n(_)&&(_=q.min!=null?q.min:o.radius?o.radius*2:Math.min(o.width,o.height)),n(P)&&(P=q.max!=null?q.max:null),n(K)&&(K=q.expand!=null?q.expand:e.mobile()?10:0),n(T)&&(T=q.dropType!=null?q.dropType:"any"),n(S)&&(S=q.dropArray!=null?q.dropArray:null),n(b)&&(b=q.continuous!=null?q.continuous:!1),n(E)&&(E=q.startIndex!=null?q.startIndex:null),n(R)&&(R=q.duplicateLine!=null?q.duplicateLine:!0),n(C)&&(C=q.deleteNode!=null?q.deleteNode:!0),n(O)&&(O=q.dblclick!=null?q.dblclick:!0),n(I)&&(I=q.fullMove!=null?q.fullMove:!0),n(pe)&&(pe=q.dblclickTime!=null?q.dblclickTime:.5);var A=v(pe);if(pe*=A=="s"?1e3:1,n(k)&&(k=q.snapH!=null?q.snapH:null),n(x)&&(x=q.snapV!=null?q.snapV:null),n(ae)&&(ae=q.rootLock!=null?q.rootLock:!1),n(ee)&&(ee=q.grandChildren!=null?q.grandChildren:!0),n($)&&($=q.steps!=null?q.steps:null),f&&i.length<=1){At&&ut("Connector() - linear needs more than one point");return}var Y=this,xe=0;Y.node=o,Y.line=l;var G=[],Z=o.color,ge=o.borderColor,he=Y.lines=new e.Container(t,r).addTo(Y),ne=Y.nodes=new e.Container(t,r).addTo(Y);if(i.type=="Blob"||i.type=="Squiggle"){var ue=[];e.loop(i.points,function(We){ue.push([We[0],We[1]])}),i=ue}Y.points=i,this.addNode=function(We,st,at){if(!f)return Te(We,st,at)};function Te(We,st,at,Ae){if(We.addChild){T="on",ae=!0,ee=!1,at=We,at.connectorMoveEvent||(Y.bases||(Y.bases=[]),Y.bases.push(at),at.connectorMoveEvent=at.on("pressmove",function(){at.positionConnectors(at,!0,!0)}),at.connectorUpEvent=at.on("pressup",function(){at.positionConnectors(at,!0,!0)}),te&&(at.connectorOverEvent=at.on("mouseover",function(){Xe(at)}),at.connectorOutEvent=at.on("mouseout",function(){ye(at)})),at.positionConnectors=function(mt,Ze,dt){e.loop(mt.connectors,function(Ee){var ot=mt.parent.localToLocal(mt.x-mt.baseStart.x+Ee.nodeStart.x,mt.y-mt.baseStart.y+Ee.nodeStart.y,Ee.parent);Ee.x=ot.x,Ee.y=ot.y,Je(Ee,Ze,dt)}),mt.stage&&mt.stage.update()},at.setConnectorColors=function(mt,Ze,dt,Ee){return n(mt)||(at.connectorColor=mt),n(Ze)||(at.connectorBorderColor=Ze),n(dt)||(at.connectorRollColor=dt),n(Ee)||(at.connectorRollBorderColor=Ee),e.loop(at.connectors,function(ot){n(mt)||(ot.color=mt),n(Ze)||(ot.borderColor=Ze)}),at},at.setConnectorColors(J,N,V,D));var Le=at.getBounds();l.endHead,Array.isArray(st)||(st=[st,st]);var De=[];return st.length==2&&(st=[st[0],st[1],st[0],st[1]]),(l.lineOrientation==e.HORIZONTAL||l.lineOrientation=="auto")&&e.loop([st[0],st[1]],function(mt,Ze){if(mt==-1||mt==-2){var dt=at.localToLocal(Ze==0?Le.x:Le.x+Le.width,Le.y,Y);De.push([dt.x,dt.y,e.HORIZONTAL])}if(mt==-1||mt==-3){var Ee=at.localToLocal(Ze==0?Le.x:Le.x+Le.width,Le.y+Le.height,Y);De.push([Ee.x,Ee.y,e.HORIZONTAL])}mt>0&&e.loop(mt,function(ot,Ve){var Ye=at.localToLocal(Ze==0?Le.x:Le.x+Le.width,Le.y+Le.height*(ot+1)/(Ve+1),Y);De.push([Ye.x,Ye.y,e.HORIZONTAL])})}),(l.lineOrientation==e.VERTICAL||l.lineOrientation=="auto")&&e.loop([st[2],st[3]],function(mt,Ze){if(mt==-1||mt==-2){var dt=at.localToLocal(Le.x,Ze==0?Le.y:Le.y+Le.height,Y);De.push([dt.x,dt.y,e.VERTICAL])}if(mt==-1||mt==-3){var Ee=at.localToLocal(Le.x+Le.width,Ze==0?Le.y:Le.y+Le.height,Y);De.push([Ee.x,Ee.y,e.VERTICAL])}mt>0&&e.loop(mt,function(ot,Ve){var Ye=at.localToLocal(Le.x+Le.width*(ot+1)/(Ve+1),Ze==0?Le.y:Le.y+Le.height,Y);De.push([Ye.x,Ye.y,e.VERTICAL])})}),at.connectors=[],at.baseStart=new e.Point(at.x,at.y),e.loop(De,function(mt){var Ze=Te(mt[0],mt[1],at,mt[2]);Ge(at,Ze)}),setTimeout(function(){at.positionConnectors(at,!0,!0)},50),Y}var ft=o.clone().loc(We,st,ne).drag({boundary:F}).expand(K);return ft.orientation=Ae,ft.nodeColor=ft.color,ft.on("mouseover",Se),ft.on("mouseout",se),ft.on("mousedown",Pe),ft.on("pressmove",Me),ft.on("pressup",fe),C&&ft.hold(ie),ft.nodeNum=xe++,ft.creations=[],ft}function Fe(){e.loop(i,function(We,st){var at=Te(We[0],We[1]);at.dropIndex=st,S&&(at.dropArray=S[st])}),f&&ne.loop(function(We,st,at){st==0?(d?We.before=ne.getChildAt(at-1):We.before=null,We.after=ne.getChildAt(st+1)):st==at-1?(d?We.after=ne.getChildAt(0):We.after=null,We.before=ne.getChildAt(st-1)):(We.before=ne.getChildAt(st-1),We.after=ne.getChildAt(st+1)),p&&st>0&&We.noMouse()})}Fe(),Y.setAvailableIndexes=function(We){return Array.isArray(We)||(We=[We]),Y.nodes.loop(function(st,at){We.indexOf(at)==-1?st.noMouse():st.mouse()}),Y},n(E)||Y.setAvailableIndexes(E),Y.keyEvent=function(We){C&&We.keyCode==46&&(e.loop(me,function(st){st&&st.parent&&nt(st)}),Y.stage&&Y.stage.update())},le.addEventListener("keydown",Y.keyEvent);function ie(We){var st=We.target.stage,at=We.target;Y.bases||ae&&!at.creator.creator||(at.adding?nt(at.creator):nt(at),Y.stage&&Y.stage.update())}function Se(We){var st=We.target;st.selected||(st.color=st.base?st.base.connectorRollColor:V,st.borderColor=st.base?st.base.connectorRollBorderColor:D,Y.stage&&Y.stage.update())}function se(We){var st=We.target;st.selected||(st.color=st.base?st.base.connectorColor:st.nodeColor,st.borderColor=st.base?st.base.connectorBorderColor:ge,Y.stage&&Y.stage.update())}var me=[],j,_e=0,Re,de;function Pe(We,st,at,Ae){var Le=We.target;if(!n(Le)&&(at&&(Le.selected=!0,me=[],Y.selectNode(Le,!Ae)),de=Le.nodeNum,!f&&(!ae||Le.creator)&&O&&!st&&(_e==0&&(Re=setTimeout(function(){if(_e=0,me){var Ze=Y.stage?Y.stage.frame:le.zdf,dt=ne.loop(function(Ee){if(Ee.hitTestPoint(Ze.mouseX,Ze.mouseY)&&Ee.selected)return!1});dt&&Qe()}},pe)),_e++),Le.startX=Le.x,Le.startY=Le.y,!f&&me.length>0&&e.loop(me,function(Ze){Ze.startX=Ze.x,Ze.startY=Ze.y}),!(Le.creations.length>=w||Le.selected||Le.creator&&!ee))){Le.adding=!0;var De=Te(Le.x,Le.y).bot();De.creations=Le.creations,De.creatorLine=Le.creatorLine,De.creator=Le.creator,De.orientation=Le.orientation,De.startX=Le.startX,De.startY=Le.startY,De.dropIndex=Le.dropIndex,De.dropArray=Le.dropArray,De.lineArray=Le.lineArray,De.color=De.nodeColor=Le.nodeColor;var ft=De.nodeNum;if(De.nodeNum=Le.nodeNum,Le.nodeNum=ft,Le.base&&(De.base=Le.base,De.baseStart=Le.baseStart,De.nodeStart=Le.nodeStart,De.connectors=Le.connectors,Le.base=Le.baseStart=Le.nodeStart=Le.connectors=null,De.base.connectors&&De.base.connectors.splice(De.base.connectors.indexOf(Le),1,De),De.color=De.base.connectorColor,De.borderColor=De.base.connectorBorderColor),De.before=Le.before,De.after=Le.after,De.before&&(De.before.after=De),De.after&&(De.after.before=De),De.creator){var mt=De.creator.creations.indexOf(Le);mt!=-1&&De.creator.creations.splice(mt,1,De)}e.loop(De.creations,function(Ze){Ze.creator=De}),Le.creator=De,Le.creatorLine=l.clone().setPoints(Le.x,Le.y,Le.x,Le.y).addTo(he).alp(0),Le.creatorLine.lineOrientation=Le.orientation,Le.creatorLine.node=Le,Le.creatorLine.creatorNode=De,Le.creations=[],Le.veeObj&&!n(Le.veeObj.color)?Le.color=e.Pick.choose(Le.veeObj.color):Le.color=De.color,Le.nodeColor=Le.color,De.creations.push(Le),Y.latestNode=Le}}function Me(We,st,at,Ae){var Le=We.target;Le.creatorLine&&Le.creatorLine.alp(1),!f&&me.length>0&&me.indexOf(Le)==-1&&Qe(),Je(Le,!1,!0),Y.bases&&e.loop(Y.bases,function(De){Le.creator&&Le.creator.base==De||(!De.connectorsOn&&Le.hitTestBounds(De)&&Xe(De),De.connectorsOn&&!Le.hitTestBounds(De)&&ye(De))}),Y.stage&&Y.stage.update()}function fe(We,st,at,Ae){var Le=We.target;Y.bases&&e.loop(Y.bases,function(tt){tt!=Le.base&&tt.connectorsOn&&ye(tt)});var De=!1;if(!f&&_e>1&&!st){clearTimeout(Re);var ft=Le.adding?Le.creator:Le;if(Le.adding&&nt(ft.creations[ft.creations.length-1],!0),!ft.selected){var mt=Y.stage?Y.stage.frame:le.zdf;ce(ft,!mt.ctrlKey)}_e=0,De=!0}if(!f&&!Y.base&&(k&&(Le.x=Math.round(Le.x/k)*k),x&&(Le.y=Math.round(Le.y/x)*x)),_&&e.dist(Le.x,Le.y,Le.startX,Le.startY)<_||P&&e.dist(Le.x,Le.y,Le.startX,Le.startY)>P){Le.adding?nt(Le,!0):(Le.loc(Le.startX,Le.startY),De||Je(Le)),Y.stage&&Y.stage.update(),Y.lastNode=null,Y.targetNode=null,Y.dispatchEvent("noconnection");return}var Ze=!1,dt=!1;if(f){var Ee=Le.creator;if(Y.connectionStart=Ee,Y.connectionEnd=Le,Ee.before&&Le.hitTestCircle(Ee.before)&&!p)Le.loc(Ee.before).removeFrom(),Ee.before.after=null,Ee.before.before||Ee.before.noMouse(),Ee.before=null,Ee.after||Ee.noMouse(),dt=!0,Ze=Ue();else if(Ee.after&&Le.hitTestCircle(Ee.after))Le.loc(Ee.after).removeFrom(),Ee.after.before=null,Ee.after.after||Ee.after.noMouse(),p&&Ee.after.mouse(),Ee.after=null,Ee.before||Ee.noMouse(),p&&Ee.noMouse(),dt=!0,Ze=Ue();else if(!Ee||Le.creations.length>0)Le.loc(Le.startX,Le.startY).bot();else{nt(Le,!0),Y.stage&&Y.stage.update(),Y.lastNode=null,Y.targetNode=null,Y.dispatchEvent("noconnection");return}}else if(T=="off"){var ot=ne.loop(function(tt){if(Le!=tt&&Le.hitTestCircles(tt)){Le.adding?nt(Le,!0):(Le.loc(Le.startX,Le.startY),Je(Le)),ae&&Oe(Le),!I&&Le.creator&&w>0&&Le.creator.creations.length>=w&&Le.creator.noMouse(),Y.targetNode=tt,b&&Y.nodes.loop(function(ht){ht!=Y.latestNode&&ht.noMouse()}),b&&Y.nodes.loop(function(ht){ht!=Y.latestNode&&ht.noMouse()}),ve(),Y.dispatchEvent("connection"),Y.stage&&Y.stage.update();return}});if(!ot){we(Le);return}}else if(T=="on"||T=="single"){var Ve=0,Ye,Ke=ne.loop(function(tt){if(Le!=tt&&Le.hitTestCircles(tt)){if(Ye=tt,Y.bases&&(Le.orientation!=tt.orientation||Le.creator&&Le.creator.base&&Le.creator.base==tt.base)||Le.dropArray&&Le.dropArray.indexOf(tt.dropIndex)==-1||!R&&Le.lineArray&&Le.lineArray.indexOf(tt.dropIndex)!=-1)return;if(T=="on")return!1;Ve++,Ve+=tt.creations.length}});if(Ke&&!(T=="single"&&Ve==1)){we(Le);return}else{if(Le.loc(Ye),Le.creator&&Le.orientation==e.VERTICAL&&Math.round(Le.y)==Math.round(Le.creator.startY)||Le.creator&&Le.orientation==e.HORIZONTAL&&Math.round(Le.x)==Math.round(Le.creator.startX))return;Y.targetNode=Ye;var ze=Le.dropIndex;Le.dropIndex=Ye.dropIndex,Le.dropArray=e.copy(Ye.dropArray),Ye.lineArray?Ye.lineArray.push(ze):Ye.lineArray=[ze],Le.lineArray=e.copy(Ye.lineArray),Le.creator&&(Le.creator.lineArray||(Le.creator.lineArray=[]),Le.creator.lineArray.push(Le.dropIndex)),Ye.base&&Ye.base.connectors&&Ge(Ye.base,Le),dt=!0}}else Le.selected||(dt=!0);!I&&Le.creator&&w>0&&Le.creator.creations.length>=w&&Le.creator.noMouse(),Le.adding=!1,Je(Le,!0,!0),e.loop(me,function(tt){if(me.indexOf(tt.creator)==-1){var ht=e.loop(tt.creations,function(Be){if(me.indexOf(Be)>=0)return!1});ve(tt.nodeNum,null,e.decimals(tt.x,2),e.decimals(tt.y,2),ht||ht===void 0?1:0)}tt.startX=tt.x,tt.startY=tt.y}),Le.startX=Le.x,Le.startY=Le.y,ae&&Oe(Le),dt?(b&&Y.nodes.loop(function(tt){tt!=Y.latestNode&&tt.noMouse()}),ve(),Y.dispatchEvent("connection"),e.arraysEqual(Le.dropArray,Le.lineArray,!1)&&Y.dispatchEvent("blocked")):Y.dispatchEvent("noconnection"),Ze&&Y.dispatchEvent("complete"),Y.stage&&Y.stage.update()}function ve(We,st,at,Ae,Le){st?G.push([We,null,null,1]):n(at)?G.push([de,e.decimals(Y.latestNode.x,2),e.decimals(Y.latestNode.y,2)]):G.push([We,null,null,null,at,Ae,Le])}Y.makeConnection=function(We,st,at,Ae,Le){var De=Y.stage?Y.stage.frame:le.zdf;return Ae?(De.ctrlKey=Le==1,Pe({target:We},!0,!0,Le),We.loc(st,at),Me({target:We},!0,!0,Le),fe({target:We},!0,!0,Le)):(Pe({target:We},!0,!1,null),Y.latestNode.loc(st,at),Me({target:Y.latestNode},!0,!1,null),fe({target:Y.latestNode},!0,!1,null)),De.ctrlKey=!1,Y.latestNode};function Ie(We){var st=Y.nodes.loop(function(at){if(at.nodeNum==We)return at});if(st.type)return st}Y.setSteps=function(We){return e.loop(We,function(st){var at=Ie(st[0]);at&&(st[3]?at&&nt(at):n(st[4])?Y.makeConnection(at,st[1],st[2]):(Y.makeConnection(at,st[4],st[5],!0,st[6]),Qe()))}),Y},Y.applySteps=Y.setSteps,Y.getSteps=function(We){return We&&(Y.stage||(Y.stage=zdf.stage),Y.pane||(Y.pane=new e.Pane({displayClose:!1,container:Y.stage,width:Math.min(500,Y.stage.width-20),height:Math.min(500,Y.stage.height-20),draggable:!0}),Y.textArea=new e.TextArea(Math.min(400,Y.stage.width-70),Math.min(400,Y.stage.height-70)).centerReg(Y.pane)),Y.pane.show(),Y.textArea.text=JSON.stringify(G)),G},Object.defineProperty(this,"steps",{get:function(){return G},set:function(We){Y.setSteps(We)}});function we(We){We.adding||!ee?nt(We,!0):(We.loc(We.startX,We.startY),Je(We)),ae&&Oe(We),We.base&&We.base.connectors&&He(We.base,We),Y.lastNode=null,Y.targetNode=null,Y.dispatchEvent("noconnection"),Y.stage&&Y.stage.update()}function Xe(We){e.loop(We.connectors,function(st){st.color=We.connectorRollColor,st.borderColor=We.connectorRollBorderColor}),We.connectorsOn=!0,We.stage&&We.stage.update()}function ye(We){e.loop(We.connectors,function(st){st.color=We.connectorColor,st.borderColor=We.connectorBorderColor}),We.connectorsOn=!1,We.stage&&We.stage.update()}function Ge(We,st){We.connectors.push(st),st.nodeStart=st.parent.localToLocal(st.x,st.y,We.parent),st.nodeStart.x-=We.x-We.baseStart.x,st.nodeStart.y-=We.y-We.baseStart.y,st.base=We}function He(We,st){We.connectors.splice(We.connectors.indexOf(st),1),st.nodeStart=null,st.base=null}function Oe(We){if(We.creator){if(We.creator.creator){Oe(We.creator);return}We.creator&&We.creator.creations.length>=w?We.creator.noMouse():We.creator.mouse()}}function ce(We,st){st&&e.loop(We.creations,function(at){ce(at,st)}),We.selected=!0,We.color=We.base?We.base.connectorColor:U,We.borderColor=We.base?We.base.connectorBorderColor:Q,me.push(We),We.top(),j||(j=Y.stage.on("stagemousedown",function(){var at=Y.stage?Y.stage.frame:le.zdf,Ae=ne.loop(function(Le){if(Le.hitTestPoint(at.mouseX,at.mouseY))return!1});Ae&&Qe()}))}this.selectNode=function(We,st){ce(We,st)};function Ue(){var We=ne.loop(function(st){if(st.before||st.after)return!1});if(We)return ne.loop(function(st){st.noMouse()}),!0}function Qe(){e.loop(me,function(We){We.selected=!1,We.color=We.base?We.base.connectorColor:We.nodeColor,We.borderColor=We.base?We.base.connectorBorderColor:ge}),me=[],Y.stage.off("stagemousedown",j),j=null,Y.stage&&Y.stage.update()}function Je(We,st,at){var Ae=me.length>0?me:[We];e.loop(Ae,function(Le){Le!=We&&Le.loc(Le.startX+We.x-We.startX,Le.startY+We.y-We.startY),Le.creator&&Le.creatorLine.setPoints(Le.x,Le.y,Le.creator.x,Le.creator.y,st,at),e.loop(Le.creations,function(De){De.creatorLine.setPoints(De.x,De.y,De.creator.x,De.creator.y,st,at)})})}function nt(We,st){if(e.loop(We.creations,function(Ae){nt(Ae)},!0),We.creatorLine){We.creatorLine.removeFrom();var at=We.creator.creations.indexOf(We);at!=-1&&We.creator.creations.splice(at,1),!We.creator.mouseEnabled&&!(ae&&!We.creator.creator)&&We.creator.mouse()}return We.removeFrom(),We.removeAllEventListeners(),st?xe--:ve(We.nodeNum,1),We=null,Y}this.removeNode=function(We){nt(We)},this.removeConnectors=function(){e.loop(ne,function(We){nt(We)},!0),Fe(),Y.stage&&Y.stage.update()},this.removeBase=function(We){e.loop(We.connectors,function(st){nt(st)}),gt(We)},this.addBase=function(We,st){Te(We,st)};function gt(We){We.off("pressmove",We.connectorMoveEvent),We.off("pressup",We.connectorUpEvent),We.connectorOverEvent&&We.off("mouseover",We.connectorOverEvent),We.connectorOutEvent&&We.off("mouseout",We.connectorOutEvent),We.connectors=null,We.baseStart=null,We.positionConnectors=We.setConnectorColors=null,We.connectorColor=We.connectorBorderColor=We.connectorRollColor=We.connectorRollBorderColor=null,Y.bases.splice(Y.bases.indexOf(We),1),Y.stage&&Y.stage.update()}$&&Y.added(function(){Y.setSteps($),Y.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return me},set:function(){At&&ut("Selectors() - selectedList is read only")}}),this.dispose=function(We,st,at){return Y.nodes.loop(function(Ae){Ae.removeFrom(),Ae.removeAllEventListeners(),Ae=null},!0),Y.lines.loop(function(Ae){Ae.removeFrom(),Ae=null},!0),le.removeEventListener("keydown",Y.keyEvent),Y.keyEvent=null,Y.bases&&e.loop(Y.bases,function(Ae){gt(Ae)}),at||(Y.zimContainer_dispose(!0),Y.stage&&Y.stage.update()),!0},X!==!1&&e.styleTransforms(this,q),this.clone=function(){return Y.cloneProps(new e.Connectors(t,r,i,o,l,f,d,p,w,k,x,T,e.copy(S),b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,Y.group,g))}},e.extend(e.Connectors,e.Container,["clone","dispose"],"zimContainer",!1),e.Marquee=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C){var O="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",I;if(I=yt(e.Marquee,arguments,O,this))return I;qe("67.4"),this.group=R;var _=E===!1?{}:e.getStyle("Marquee",this.group,C),P=this;n(t)&&(t=_.width!=null?_.width:300),n(r)&&(r=_.height!=null?_.height:100);var F=v(o);n(o)&&(o=_.time!=null?_.time:F=="s"?5:5e3),n(l)&&(l=_.transition!=null?_.transition:"slide"),n(x)&&(x=_.borderColor!=null?_.borderColor:e.dark),n(T)&&(T=_.borderWidth!=null?_.borderWidth:1),x<0||T<0?x=T=null:x!=null&&T==null&&(T=1),n(p)&&(p=_.marginLeft!=null?_.marginLeft:25),n(w)&&(w=_.marginRight!=null?_.marginRight:25),n(f)&&(f=_.speed!=null?_.speed:F=="s"?.5:500),a(f,F),n(d)&&(d=_.direction!=null?_.direction:"right"),n(S)&&(S=_.refresh!=null?_.refresh:F=="s"?30*60:30*60*1e3),n(b)&&(b=_.mix!=null?_.mix:!0),this.zimContainer_constructor(t+p+w,r,null,null,!1),this.type="Marquee",this.speed=f;var K=new e.Rectangle(t-1,r-1,e.clear).addTo(P).mov(p+.5,.5),V=this.content=new e.Container(t,r).loc(p,0,P).setMask(K),D=this.pages=new e.Pages(null,l,f,null,V).addTo(V),U=!1;this.add=function(A,Y,xe,G,Z){n(Z)&&(Z=!0),A.scaleTo(V,100,100),Y&&A.cur().on("click",function(){sr(Y,xe)}),D.addPage(A),Z&&D.center(),A.marqueeViews=0,A.marquee=P,U||Q(),G||X(),q&&q.top()},this.remove=function(A){if(P.selected==A){if(P.pages.pages.length==1)return;var Y=P.selectedIndex+1;Y==P.pages.pages.length&&(Y=0),P.pages.go(Y,null,null,0),setTimeout(function(){P.pages.removePage(A),A.dispose&&A.dispose(),X()},20)}else P.pages.removePage(A),A.dispose&&A.dispose(),X()};function Q(){U=!0,P.selectedIndex=0,P.selected=D.pages[P.selectedIndex].page,P.lastSelected=null,P.selected.marqueeOn&&P.selected.marqueeOn(),P.interval=e.interval(o,function(){P.go()})}if(!n(i)&&!Array.isArray(i)&&(i=[i]),i&&i.length>0&&(b&&e.shuffle(i),e.loop(i,function(A){P.add(A,null,null,!0)})),S>0)var J=e.timeout(S*(F=="s"?1e3:1),function(){location.reload()},null,"ms");P.go=function(A){if(P.selected.marqueeViews+=1,P.selected.marqueeOff&&P.selected.marqueeOff(),A)P.selected=A,e.loop(D.pages,function(xe,G){if(xe.page==A){P.selectedIndex=G;return}}),P.interval.interval=P.selected.marqueeTime?P.selected.marqueeTime:o,P.interval.pause(pe.toggled,null,!0);else{var Y=P.selectedIndex+1;P.selectedIndex=Y%D.pages.length,P.selected=D.pages[P.selectedIndex].page,P.interval.time=P.selected.marqueeTime?P.selected.marqueeTime:o}P.dispatchEvent("page"),P.selected.marqueeOn&&P.selected.marqueeOn(),D.go(P.selected,d,l,f)},D.on("pagetransitioned",function(){P.dispatchEvent("pagetransitioned"),P.indicator&&(P.indicator.selectedIndex=P.selectedIndex)});var N=!1,te=P.left=new e.Container(p-4,r-4),ae=new e.Shape().sca(.6);ae.graphics.f(e.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var ee=new e.Shape().sca(.6).reg(-2,0);ee.graphics.f(e.light).mt(0,0).p("AiJieIETCeIkTCfg");var pe=P.button=new e.Button({label:"",icon:ae,toggleIcon:ee,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(te,100).pos(0,0,!1,!0,te);pe.on("click",function(){P.interval&&P.interval.pause(pe.toggled),N=pe.toggled,P.stage.update()});var $;function X(){if(!(n(p)||p==0)){var A=4*p/25;te.pos(p-te.width-A,A/2,!1,!0,P),P.indicator&&(P.indicator.dispose(),P.indicator.removeFrom()),$||($=new e.Proportion(8,16,te.width+A,te.width/2+A,-1)),P.indicator=new e.Indicator({width:(D.pages.length<=2?D.pages.length:D.pages.length-1)*(te.width-3),height:$.convert(D.pages.length),num:D.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:k}),P.indicator.fit(0,0,r-pe.height,pe.width),P.indicator.rot(d=="down"?-90:90).center(te).pos(null,te.width-A/2,null,!0),P.indicator.selectedIndex=P.selectedIndex,P.indicator.on("change",function(){P.go(D.pages[P.indicator.selectedIndex].page)})}}if(X(),!n(w)&&w>0&&le.zdf&&le.zdf){var y=4*w/25,g=P.right=new e.Container(45,270),h=P.icon=le.zdf.makeIcon(e.grey,e.lighter,e.silver).sca(.5).pos(0,0,!0,!0,g).mov(0,0).cur();h.on("mouseover",function(){L.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),h.stage.update()}),h.on("mouseout",function(){L.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),h.stage.update()}),h.on("mousedown",function(){sr("https://zimjs.com/marquee","_blank")});var L=P.label=new e.Label({text:"MARQUEE",color:e.dark,backgroundColor:e.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,g).reg(-10).sca(0,1).mov(0);g.fit(0,0,w-y,r-y),g.pos(w-g.width-y,y/2,!0,!0,P)}if(P.stage&&P.stage.update(),this.pause=function(A,Y){n(A)&&(A=!0),A!=N&&(N=A,P.interval.pause(A,Y),P.button.toggle(A))},Object.defineProperty(this,"paused",{get:function(){return N},set:function(){At&&ut("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return o},set:function(A){o=A,P.interval.time=o}}),this.load=function(A,Y){var xe=[];b&&e.shuffle(A),e.loop(A,function(Z){Array.isArray(Z)?xe.push(Z[0]):xe.push(Z)});var G=P.stage?P.stage.frame:le.zdf;return P.marqueeLoader=G.loadAssets(xe,Y),P.loadEvent=P.marqueeLoader.on("assetload",function(Z){var ge=A[Z.asset.id],he,ne;Array.isArray(ge)?(he=ge[0],ne=ge[1]):(he=ge,ne="_self"),P.add(Z.asset,he,ne),X()}),P},!n(x)){var q=new e.Rectangle(t-1,r-1,e.clear,x,T).loc(K,null,P);q.mouseEnabled=!1}E!==!1&&e.styleTransforms(this,_),this.clone=function(){return P.cloneProps(new e.Marquee(t,r,i,o,l,f,d,k,x,T,S,b,E,this.group,C))},this.dispose=function(A,Y,xe){return J&&J.clear(),P.interval&&P.interval.clear(),P.loadEvent&&P.marqueeLoader.off("assetload",P.loadEvent),D.dispose(),D=null,xe||this.zimContainer_dispose(!0),!0}},e.extend(e.Marquee,e.Container,["clone","dispose"],"zimContainer"),e.Carousel=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P){var F="items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, selectedIndex, continuous, style, group, inherit",K;if(K=yt(e.Carousel,arguments,F,this))return K;qe("67.45"),this.group=_;var V=I===!1?{}:e.getStyle("Carousel",this.group,P),D=this;this.zimContainer_constructor(),n(t)&&(t=V.items!=null?V.items:[new On({color:red}),new On({color:orange}),new On({color:yellow}),new On({color:green}),new On({color:blue}),new On({color:purple}),new On({color:pink})]),n(l)&&(l=V.backgroundColor!=null?V.backgroundColor:e.clear),n(f)&&(f=V.backing!=null?V.backing:null),n(S)&&(S=V.valign!=null?V.valign:"center"),n(r)&&(r=V.viewNum!=null?V.viewNum:3),n(o)&&(o=V.spacing!=null?V.spacing:20),n(d)&&(d=V.padding!=null?V.padding:0),n(p)&&(p=V.paddingH!=null?V.paddingH:d),n(w)&&(w=V.paddingV!=null?V.paddingV:d),n(k)&&(k=V.arrowLeft!=null?V.arrowLeft:new e.Arrow().rot(180)),n(x)&&(x=V.arrowRight!=null?V.arrowRight:new e.Arrow),n(T)&&(T=V.arrowGap!=null?V.arrowGap:20);var U=v(i);n(i)&&(i=V.time!=null?V.time:U=="s"?.2:200),n(b)&&(b=V.ease!=null?V.ease:"quadInOut"),n(E)&&(E=V.swipe!=null?V.swipe:!0),n(R)&&(R=V.remember!=null?V.remember:"zimCarousel"),n(C)&&(C=V.selectedIndex!=null?V.selectedIndex:0),n(O)&&(O=V.continuous!=null?V.continuous:!0),R&&localStorage&&!n(localStorage[R])&&(localStorage[R]=="NaN"&&(localStorage[R]=0),C=Number(localStorage[R])),D.items=t,D.viewNum=r,D.spacing=o,D.arrowLeft=k,D.arrowRight=x,D.arrowLeft.oW=k.width,D.arrowRight.oW=x.width,f&&(D.backing=f);var Q={};e.loop(t,function(h,L){typeof h=="string"&&(h=t[L]=new e.Pic(h)),h.reg(CENTER,CENTER);var q=Q["width"+h.width];q?Q["width"+h.width]+=1:Q["width"+h.width]=1});var J=0,N=0;e.loop(Q,function(h,L){L>J&&(J=L,N=Number(h.substring(5)))});var te=0;e.loop(t,function(h){h.width=N,h.height>te&&(te=h.height)});var ae;O?(D.continuous=!0,ae=e.copy(t),e.loop(t.length,function(h){ae.push(t[h].clone())})):ae=t,D.itemWidth=N,D.itemHeight=te;var ee=k.width+T+p,pe;function $(){var h=r*(N+o)-o,L=te;pe=h+p*2+T*2+k.width+x.width,D.setBounds(0,0,pe,L+w*2),D.tile=new e.Tile({obj:ae,cols:ae.length,spacingH:o,rows:1,unique:!0,align:"center",valign:S}).center(D).loc(ee),D.background=new On(h+p*2,L+w*2,l).center(D,0),D.tile.setMask(D.background)}function X(){k.pos(0,0,"left","center",D),x.pos(0,0,"right","center",D),k.on("mousedown",function(){D.cycleInterval&&(D.cycleClear(),D.dispatchEvent("cyclecleared")),D.goLeft()}),x.on("mousedown",function(){D.cycleInterval&&(D.cycleClear(),D.dispatchEvent("cyclecleared")),D.goRight()}),g()}function y(){if(D.swipe){var h=D.swipeObj=new e.Swipe(D.tile);h.on("swipe",function(L){L.swipeX!=0&&D.cycleInterval&&(D.cycleClear(),D.dispatchEvent("cyclecleared")),L.swipeX==1?D.goLeft():L.swipeX==-1&&D.goRight()})}}function g(){localStorage&&R&&(localStorage[R]=D.selectedIndex),k.activate(!0),x.activate(!0),!O&&(D.tile.x+D.tile.width<=pe-x.oW-p-T&&x.activate(!1),D.tile.x>=ee&&k.activate(!1))}D.goLeft=function(h){return n(h)&&(h=i),O&&D.tile.x>=-N&&(D.tile.x-=D.tile.width/2+o/2),D.tile.x<ee&&(D.disableArrows(),C--,D.tile.animate({props:{x:D.tile.x+N+o},time:h,ease:b,call:function(){g(),D.enableArrows(),D.dispatchEvent("transitioned")}})),D},D.goRight=function(h){return n(h)&&(h=i),O&&D.tile.x-N<=pe-D.tile.width&&(D.tile.x+=D.tile.width/2+o/2),D.tile.x+D.tile.width>pe-x.oW-p-T&&(D.disableArrows(),C++,D.tile.animate({props:{x:D.tile.x-N-o},time:h,ease:b,call:function(){g(),D.enableArrows(),D.dispatchEvent("transitioned")}})),D},D.cycleClear=function(){return D.cycleInterval.clear(),D.cycleInterval=null,D},D.cycle=function(h,L,q,A,Y,xe){var G="cycleTime, transitionTime, repeat, repeatNum, recycle, rtl",Z;if(Z=yt(D.cycle,arguments,G))return Z;n(h)&&(h=V.cycleTime!=null?V.cycleTime:U=="s"?5:5e3),n(L)&&(L=V.transitionTime!=null?V.transitionTime:U=="s"?1:1e3),n(q)&&(q=!0),n(A)&&(A=0),n(Y)&&(Y=h*2),n(xe)&&(xe=le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl");let ge=xe?-1:1;return D.cycleInterval&&D.cycleInterval.clear(),Y&&Y!=-1&&(D.recycleEvent&&D.off("cyclecleared",D.recycleEvent),D.recycleWait&&D.recycleWait.clear(),D.recycleEvent=D.on("cyclecleared",function(){D.recycleWait&&D.recycleWait.clear(),D.recycleWait=ri(Y,function(){D.cycle(h,L,q,A,Y,xe)})})),O?(D.repeatTotal=0,D.cycleInterval=e.interval(h*2,function(he){if(D.selectedIndex==0)if(!q&&xe)D.cycleInterval.clear();else{if(xe&&he.count!=1&&(D.repeatTotal+=1),xe&&A!=0&&D.repeatTotal>=A){D.cycleInterval.clear(),D.dispatchEvent("repeatdone");return}ge==1?D.goRight(L):D.goLeft(L)}else if(D.selectedIndex==t.length-r){if(!xe&&he.count!=1&&(D.repeatTotal+=1),!xe&&A!=0&&D.repeatTotal>=A){D.cycleInterval.clear(),D.dispatchEvent("repeatdone");return}D.repeatTotal>=1&&D.dispatchEvent("repeated"),!xe&&!q?D.cycleInterval.clear():ge==1?D.goRight(L):D.goLeft(L)}else ge==1?D.goRight(L):D.goLeft(L)})):(D.repeatTotal=.5,D.cycleInterval=e.interval(h*2,function(he){if(D.selectedIndex==0){if(he.count!=1&&(D.repeatTotal+=.5),A!=0&&D.repeatTotal>A){D.cycleInterval.clear(),D.dispatchEvent("bouncedone");return}D.repeatTotal>=1&&D.dispatchEvent("bounced"),ge=1,D.goRight(L)}else if(D.selectedIndex==t.length-r){if(he.count!=1&&(D.repeatTotal+=.5),A!=0&&D.repeatTotal>A){D.cycleInterval.clear(),D.dispatchEvent("bouncedone");return}D.repeatTotal>=1&&D.dispatchEvent("bounced"),ge=-1,D.goLeft(L)}else Xr(),ge==1?D.goRight(L):D.goLeft(L)})),D},D.enableArrows=function(){return D.swipeObj&&(D.swipeObj.active=!0),k.mouse(),x.mouse(),D},D.disableArrows=function(){return D.swipeObj&&(D.swipeObj.active=!1),k.noMouse(),x.noMouse(),D},Object.defineProperty(D,"selectedIndex",{get:function(){return(C+t.length)%t.length},set:function(h){C=e.constrain(h,0,t.length-r),D.tile.x=ee-C*(N+o),g()}}),Object.defineProperty(D,"swipe",{get:function(){return E},set:function(h){E=h,E&&!D.swipeObj&&y(),D.swipeObj.active=E}}),$(),X(),y(),f&&f.center(D,1),C&&(D.selectedIndex=C),this.dispose=function(h,L,q){return D.swipeObj&&D.swipeObj.dispose(),D.recycleEvent&&D.off("cyclecleared",D.recycleEvent),D.cycleWait&&D.cycleWait.clear(),D.cycleInterval&&D.cycleInterval.clear(),D.swipeObj=D.recycleEvent=D.cycleWait=null,q||this.zimContainer_dispose(),!0},I!==!1&&e.styleTransforms(this,V),this.clone=function(){return D.cloneProps(new e.Carousel(e.copy(t),r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,this.group))}},e.extend(e.Carousel,e.Container,["clone","dispose"],"zimContainer",!1),e.Loader=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X){var y="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",g;if(g=yt(e.Loader,arguments,y,this))return g;qe("67.5"),this.group=$;var h=pe===!1?{}:e.getStyle("Loader",this.group,X);if(n(t)&&(t=h.width!=null?h.width:250),n(r)&&(r=h.height!=null?h.height:70),n(o)&&(o=h.type!=null?h.type:"image"),o=o.toLowerCase(),n(l)&&(l=h.backgroundColor!=null?h.backgroundColor:"rgba(0,0,0,.05)"),n(f)&&(f=h.rollBackgroundColor!=null?h.rollBackgroundColor:"rgba(0,0,0,.1)"),n(d)&&(d=h.color!=null?h.color:"rgba(0,0,0,.5)"),n(p)&&(p=h.rollColor!=null?h.rollColor:d),n(w)&&(w=h.borderColor!=null?h.borderColor:"rgba(0,0,0,.3)"),n(x)&&(x=h.borderWidth!=null?h.borderWidth:1),n(O)&&(O=h.dashed!=null?h.dashed:!0),n(T)&&(T=h.corner!=null?h.corner:0),n(ae)&&(ae=h.multiple!=null?h.multiple:!0),n(i)&&(i=h.label!=null?h.label:new e.Label({text:"UPLOAD PIC",color:d,rollColor:p,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),typeof te>"u")if(le.zdf)var te=le.zdf;else{At&&ut("zim.Loader - please provide a reference to zim Frame");return}this.zimButton_constructor(t,r,i,l,f,null,d,p,null,w,x,k,null,I,_,null,F,K,null,T,O,S,b,R,C,null,null,null,null,null,E,null,null,null,P,V,null,null,null,null,null,null,D,U,null,Q,J,null,N,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var L=this,q=te.stage;i=L.label;var A=L.tag=document.createElement("input");te.tag?te.tag.appendChild(A):document.body.appendChild(A),A.setAttribute("type","file"),A.setAttribute("aria-hidden",!0),ae&&A.setAttribute("multiple","multiple"),ee&&A.setAttribute("accept",ee),A.hidden=!0,A.zimDisplay=A.style.display||"inline-block",A.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){A.click()}),A.addEventListener("change",Z);var Y=new je.DOMElement(A);q.addChild(Y),Y.alpha=0;var xe=te.retina&&le.devicePixelRatio||1;this.resize=function(ne,ue){if(!L.stage){A.setAttribute("aria-hidden",!0),A.hidden=!0,A.style.display="none";return}A.setAttribute("aria-hidden",!1),A.hidden=!1,A.style.display=A.zimDisplay,n(ne)&&(ne=!0),L.time1&&clearTimeout(L.time1),ue||(L.time1=setTimeout(function(){L.resize(null,!0)},40));var Te=L.getConcatenatedMatrix().decompose(),Fe=L.localToGlobal(0,0);if(te.retina){var ie=e.browserZoom();te.tag?(Y.x=Fe.x/xe/ie,Y.y=Fe.y/xe/ie):(Y.x=te.x/q.scaleX+Fe.x/xe/ie,Y.y=te.y/q.scaleY+Fe.y/xe/ie),e.sca(Y,Te.scaleX/xe/q.scaleX/ie,Te.scaleY/xe/q.scaleY/ie)}else Y.x=te.x+Fe.x*te.scale,Y.y=te.y+Fe.y*te.scale,e.sca(Y,te.scale*Te.scaleX,te.scale*Te.scaleY);return q.update(),L},this.resize(),L.on("added",function(){A.style.display="block",A.hidden=!1,A.style.display="block",L.resize()}),L.added(G);function G(){L.resize(),L.time2=setTimeout(function(){A.style.display="block",A.hidden=!1,A.style.display="block"},50),L.on("added",G,null,!0)}L.on("removed",function(){L.time1&&clearTimeout(L.time1),L.time2&&clearTimeout(L.time2),A&&(A.style.display="none",A.hidden=!0,A.style.display="none")});function Z(ne){var ue;if(ne.dataTransfer&&ne.dataTransfer.files&&ne.dataTransfer.files.length>0?ue=ne.dataTransfer.files:ue=ne.target.files,o=="text"||o=="json"){var Te=[],Fe;if(o.toLowerCase()=="json")var ie=[],Se}else if(o=="other")var se=[],me;else var j=[],_e;for(var Re=0;Re<ue.length;Re++)(function(de){var Pe=new FileReader;Pe.onload=function(Me){if(o=="text"||o=="json"){var fe=Me.target.result;if(Te.push(fe),o=="json"){var ve=JSON.parse(fe);ie.push(ve)}if(Te.length==1&&(Fe=fe,o=="json"&&(Se=ve)),Te.length==ue.length){var Ie=new je.Event("loaded");Ie.texts=Te,Ie.text=Fe,Ie.lastText=fe,Ie.total=Te.length,o=="json"&&(Ie.jsons=ie,Ie.json=Se,Ie.lastJSON=ve),L.dispatchEvent(Ie),A.value=""}}else if(o=="other"){var we=Me.target.result;if(se.push(we),se.length==1&&(me=we),se.length==ue.length){var Ie=new je.Event("loaded");Ie.others=se,Ie.other=me,Ie.lastOther=we,Ie.total=se.length,L.dispatchEvent(Ie),A.value=""}}else{var Xe=new Image;Xe.onload=function(){var ye=new e.Bitmap(Xe);if(j.push(ye),j.length==1&&(_e=ye),j.length==ue.length){var Ge=new je.Event("loaded");Ge.bitmaps=j,Ge.bitmap=_e,Ge.lastBitmap=ye,Ge.total=j.length,L.dispatchEvent(Ge),A.value=""}},Xe.src=Me.target.result}},o=="text"||o=="json"?Pe.readAsText(de):Pe.readAsDataURL(de)})(ue[Re])}var ge=new XMLHttpRequest;if(ge.upload){var he=function(ne){A.removeEventListener("change",Z),Z(ne),setInterval(function(){A.addEventListener("change",Z)},100)};A.addEventListener("drop",he)}this.save=function(ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re){var de="content, filename, x, y, width, height, cached, cachedBounds, type, data, quality",Pe;if(Pe=yt(L.save,arguments,de))return Pe;if(n(ne)&&(ne=te.stage),n(j)&&(j="png"),n(ue))ue="saved_"+String(e.makeID("numbers",5))+"."+j;else{var Me=ue.split(".");if(Me.length==1)ue+="."+j;else{var fe=["png","jpg","jpeg"],ve=fe.indexOf(Me[Me.length-1].toLowerCase());ve==-1?ue+="."+j:j=fe[ve]}}if(n(Te)&&(Te=0),n(Fe)&&(Fe=0),n(ie)&&(ie=ne.getBounds&&ne.getBounds()?ne.getBounds().width:te.width),n(Se)&&(Se=ne.getBounds&&ne.getBounds()?ne.getBounds().height:te.height),ne.cache(Te,Fe,ie,Se),_e){var Ie=ne.cacheCanvas.toDataURL("image/"+j,Re);return se?me&&ne.cache(me.x,me.y,me.width,me.height):ne.uncache(),Ie}var we=/Edge\/(\d)+/.test(navigator.userAgent);if(we){var Xe=le.open();Xe.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+ne.cacheCanvas.toDataURL("image/"+j)+"></body></html>"),Xe.document.close()}else{j=="jpg"&&(j="jpeg");var ye=document.createElement("a");ye.setAttribute("download",ue),ye.setAttribute("href",ne.cacheCanvas.toDataURL("image/"+j,Re)),document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}return se?me&&ne.cache(me.x,me.y,me.width,me.height):ne.uncache(),L},pe!==!1&&e.styleTransforms(this,h),this.clone=function(){var ne=new e.Loader(t,r,n(i)?null:i.clone(),l,f,d,p,w,x,T,S,b,E,R,C,n(I)?null:I.clone(),n(_)?null:_.clone(),P,n(F)?null:F.clone(),n(K)?null:K.clone(),V,n(D)?null:D.clone(),n(U)?null:U.clone(),n(Q)?null:Q.clone(),n(J)?null:J.clone(),N,te,pe,this.group);return L.cloneProps(ne)},Object.defineProperty(this,"frame",{get:function(){return te},set:function(ne){ne!=te&&(te.off("update",L.updateEvent),te.off("resize",L.resizeEvent),te=ne,L.resizeEvent=te.on("resize",L.resize),L.updateEvent=te.on("update",L.resize),L.resize())}}),this.resizeEvent=te.on("resize",L.resize),this.updateEvent=te.on("update",L.resize),this.dispose=function(ne,ue,Te){var Fe;return L.stage&&(Fe=L.stage),te.off("update",L.updateEvent),te.off("resize",L.resizeEvent),Z&&A.removeEventListener("change",Z),he&&A.removeEventListener("drop",he),A&&A.parentNode&&A.parentNode.removeChild(A),A=null,Te||(this.zimButton_dispose(),Fe&&Fe.update()),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q){var J="width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",N;if(N=yt(e.TextArea,arguments,J,this))return N;qe("67.6"),this.group=U;var te=D===!1?{}:e.getStyle("TextArea",this.group,Q);if(n(t)&&(t=te.width!=null?te.width:250),n(r)&&(r=te.height!=null?te.height:70),n(i)&&(i=te.placeholder!=null?te.placeholder:null),n(o)&&(o=te.text!=null?te.text:null),n(l)&&(l=te.size!=null?te.size:20),n(f)&&(f=te.padding!=null?te.padding:5),n(d)&&(d=te.color!=null?te.color:e.granite),n(p)&&(p=te.backgroundColor!=null?te.backgroundColor:"rgba(256,256,256,.1)"),n(w)&&(w=te.borderColor!=null?te.borderColor:"rgba(0,0,0,.1)"),n(k)&&(k=te.borderWidth!=null?te.borderWidth:null),w<0||k<0?w=k=null:w!=null&&k==null&&(k=1),n(x)&&(x=te.corner!=null?te.corner:0),!n(S)&&n(T)&&(T=te.shadowColor!=null?te.shadowColor:"rgba(0,0,0,.3)"),!n(T)&&n(S)&&(S=te.shadowBlur!=null?te.shadowBlur:10),n(O)&&(O=te.password!=null?te.password:!1),n(I)&&(I=te.inputType!=null?te.inputType:!1),n(_)&&(_=te.wrap!=null?te.wrap:!0),n(P)&&(P=te.maxLength!=null?te.maxLength:null),n(C)&&(C=te.spellCheck!=null?te.spellCheck:!0),n(R)&&(R=te.readOnly!=null?te.readOnly:!1),n(V)&&(V=te.keyboardShift!=null?te.keyboardShift:!1),this.maxLength=P,n(K)&&(K=te.expand!=null?te.expand:20),K===!0&&(K=20),typeof F>"u")if(le.zdf)var F=le.zdf;else{At&&ut("zim.TextArea - please provide a reference to zim Frame");return}this.zimContainer_constructor(t,r,null,null,!1),this.type="TextArea";var ae=this,ee=F.stage,pe=this.background=new e.Rectangle(t,r,p,w,k,x,b,null,null,!1).expand(K);T!=-1&&S>0&&(pe.shadow=new je.Shadow(T,3,3,S)),ae.addChild(pe);var $=ae.tag=I||O?document.createElement("input"):document.createElement("textarea");F.tag?F.tag.appendChild($):document.body.appendChild($),n(E)||($.setAttribute("id",E),$.setAttribute("name",E)),O?$.setAttribute("type","password"):I&&$.setAttribute("type",I),$.readOnly=R,$.spellcheck=C,i&&$.setAttribute("placeholder",i),o&&($.value=o),$.zimDisplay=$.style.display||"inline-block",$.style.cssText="background-color:rgba(0,0,0,.01); color:"+d+"; resize:none; z-index:3; width:"+(t-f*2)+"px; height:"+(r-f*2)+"px; overflow:hidden; outline:none;font-size:"+l+"px; font-family:"+(te.font!=null?te.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",ae.taInput=function(){!n(ae.maxLength)&&ae.text.length>ae.maxLength&&(ae.text=ae.text.substring(0,ae.maxLength)),ae.dispatchEvent("input")};var X=ae.y;ae.taFocus=function(){if(le.M&&V){ae.re&&ae.stage.frame.off("resize",ae.re),ae.re=ae.stage.frame.on("resize",function(){ae.stage&&L>ae.stage.height/4&&(ae.stage.y=ae.stage.scaleY*(ae.stage.height/4-L),ae.stage.update())});var L=ae.localToGlobal(0,0).y;ae.stage&&L>ae.stage.height/4&&(ae.stage.y=ae.stage.scaleY*(ae.stage.height/4-L),ae.stage.update())}ae.stage&&(F=ae.stage.frame),F.zil&&le.removeEventListener("keydown",F.zil[0]),ae.dispatchEvent("focus")},ae.taBlur=function(){le.M&&V&&ae.stage&&(ae.re&&ae.stage.frame.off("resize",ae.re),ae.stage.y=X,ae.stage.update()),ae.stage&&(F=ae.stage.frame),F.zil&&le.addEventListener("keydown",F.zil[0]),ae.dispatchEvent("blur")},$.addEventListener("change",ae.taChange),$.addEventListener("input",ae.taInput),$.addEventListener("focus",ae.taFocus),$.addEventListener("blur",ae.taBlur);var y=new je.DOMElement($);y.alpha=0,this.on("mousedown",function(){setTimeout(function(){$.focus()},100)}),this.setFocus=function(L){return n(L)&&(L=!0),L?$.focus():$.blur(),ae};var g=F.retina&&le.devicePixelRatio||1;this.resize=function(L,q){n(L)&&(L=!0),ae.time1&&clearTimeout(ae.time1),q||(ae.time1=setTimeout(function(){ae.resize(null,!0)},40));var A=ae.getConcatenatedMatrix().decompose(),Y=ae.localToGlobal(f,f);if(F.retina){var xe=e.browserZoom();F.tag?(y.x=Y.x/g/xe,y.y=Y.y/g/xe):(y.x=F.x/ee.scaleX+Y.x/g/xe,y.y=F.y/ee.scaleY+Y.y/g/xe),e.sca(y,A.scaleX/g/ee.scaleX/xe,A.scaleY/g/ee.scaleY/xe)}else F.tag?(y.x=Y.x*F.scale,y.y=Y.y*F.scale):(y.x=F.x+Y.x*F.scale,y.y=F.y+Y.y*F.scale),e.sca(y,F.scale*A.scaleX,F.scale*A.scaleY);return y.alpha=ae.alpha,ae.parent&&(y.alpha*=ae.parent.alpha),L&&ae.stage&&ee.update(),ae},this.resize(),ae.added(h);function h(){ee.addChild(y),ae.time2=setTimeout(function(){$.style.display=$.zimDisplay},50),ae.resize(),ae.on("added",h,null,!0),ae.FOEvent=ee.on("stagemousedown",function(){ae.focus=!1})}ae.on("removed",function(){ae.time1&&clearTimeout(ae.time1),ae.time2&&clearTimeout(ae.time2),ee.removeChild(y),ae.FOEvent&&ee.off("stagemousedown",ae.FOEvent),$&&($.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return $.value},set:function(L){$.value=L}}),Object.defineProperty(this,"text",{get:function(){return $.value},set:function(L){$.value=L}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==$},set:function(L){ae.setFocus(L)}}),Object.defineProperty(this,"readOnly",{get:function(){return $.readOnly},set:function(L){$.readOnly=L}}),le.KEYFOCUS!=null&&(e.KEYFOCUS=le.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ae},set:function(){e.KEYFOCUS=ae}}),e.KEYFOCUS||(ae.keyFocus=!0),ae.taMousedown=function(){ae.keyFocus=!0},$.addEventListener("mousedown",ae.taMousedown),_||($.style.whiteSpace="pre"),D!==!1&&e.styleTransforms(this,te),this.clone=function(){var L=new e.TextArea(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,this.group,Q);return ae.cloneProps(L)},Object.defineProperty(this,"frame",{get:function(){return F},set:function(L){L!=F&&(F.off("update",ae.updateEvent),F.off("resize",ae.resizeEvent),F=L,ae.resizeEvent=F.on("resize",ae.resize),ae.updateEvent=F.on("update",ae.resize),g=F.retina&&le.devicePixelRatio||1,ee=F.stage,ae.resize())}}),this.resizeEvent=F.on("resize",ae.resize),this.updateEvent=F.on("update",ae.resize),this.dispose=function(L,q,A){var Y;return ae.stage&&(Y=ae.stage),F.off("update",ae.updateEvent),F.off("resize",ae.resizeEvent),Y&&ae.FOEvent&&Y.off("stagemousedown",ae.FOEvent),$&&$.parentNode&&$.parentNode.removeChild($),$.removeEventListener("change",ae.taChange),$.removeEventListener("input",ae.taInput),$.removeEventListener("focus",ae.taFocus),$.removeEventListener("blur",ae.taBlur),$.removeEventListener("mousedown",ae.taMousedown),$=null,A||(this.zimContainer_dispose(!0),Y&&Y.update()),ae.background=null,!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.Tag=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",b;if(b=yt(e.Tag,arguments,S,this))return b;qe("67.7"),this.group=x;var E=k===!1?{}:e.getStyle("Tag",this.group,T);if(n(t)&&(t=E.width!=null?E.width:250),n(r)&&(r=E.height!=null?E.height:70),n(i)&&(i=E.id!=null?E.id:"zimTag_"+e.rand(1e4)),typeof o>"u")if(le.zdf)var o=le.zdf;else{At&&ut("zim.Tag - please provide a reference to zim Frame");return}n(l)&&(l=E.backgroundColor!=null?E.backgroundColor:"rgba(0,0,0,0)"),n(f)&&(f=E.padding!=null?E.padding:10),n(d)&&(d=E.paddingH!=null?E.paddingH:f),n(p)&&(p=E.paddingV!=null?E.paddingV:f),n(w)&&(w=E.expand!=null?E.expand:20),w===!0&&(w=20),this.zimContainer_constructor(t,r,null,null,!1),this.type="Tag",this.tagID=i,this.id=i;var R=this,C=o.stage;R.background=new e.Rectangle(t+d,r+p,l).center(this).expand(w||0);var O=R.tag=document.createElement("div");o.tag?o.tag.appendChild(O):document.body.appendChild(O),O.setAttribute("id",i),O.setAttribute("name",i),O.zimDisplay=O.style.display||"inline-block",O.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+r+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var I=new je.DOMElement(O);I.alpha=0;var _=o.retina&&le.devicePixelRatio||1;this.resize=function(F,K){n(F)&&(F=!0),R.time1&&clearTimeout(R.time1),K||(R.time1=setTimeout(function(){R.resize(null,!0)},40));var V=R.getConcatenatedMatrix().decompose(),D=R.localToGlobal(0,0);if(o.retina){var U=e.browserZoom();o.tag?(I.x=D.x/_/U,I.y=D.y/_/U):(I.x=o.x/C.scaleX+D.x/_/U,I.y=o.y/C.scaleY+D.y/_/U),e.sca(I,V.scaleX/_/C.scaleX/U,V.scaleY/_/C.scaleY/U)}else I.x=o.x+D.x*o.scale,I.y=o.y+D.y*o.scale,e.sca(I,o.scale*V.scaleX,o.scale*V.scaleY);return I.alpha=R.alpha,R.parent&&(I.alpha*=R.parent.alpha),F&&R.stage&&C.update(),R},this.resize(),R.added(P);function P(){C.addChild(I),R.time2=setTimeout(function(){O.style.display=O.zimDisplay},50),R.resize(),R.on("added",P,null,!0)}R.on("removed",function(){R.time1&&clearTimeout(R.time1),R.time2&&clearTimeout(R.time2),C.removeChild(I),O&&(O.style.display="none")}),this.add=function(F){return O.innerHTML+=F,R},Object.defineProperty(this,"innerHTML",{get:function(){return O.innerHTML},set:function(F){O.innerHTML=F}}),Object.defineProperty(this,"style",{get:function(){return O.style},set:function(F){O.style=F}}),k!==!1&&e.styleTransforms(this,E),this.clone=function(){var F=new e.Tag(t,r,i,o,l,f,d,p,w,k,this.group,T);return R.cloneProps(F)},Object.defineProperty(this,"frame",{get:function(){return o},set:function(F){F!=o&&(o.off("update",R.updateEvent),o.off("resize",R.resizeEvent),o=F,R.resizeEvent=o.on("resize",R.resize),R.updateEvent=o.on("update",R.resize),R.resize())}}),this.resizeEvent=o.on("resize",R.resize),this.updateEvent=o.on("update",R.resize),this.dispose=function(F,K,V){var D;return R.stage&&(D=R.stage),o.off("update",R.updateEvent),o.off("resize",R.resizeEvent),O&&O.parentNode&&O.parentNode.removeChild(O),O=null,V||(this.zimContainer_dispose(!0),D&&D.update()),!0}},e.extend(e.Tag,e.Container,["clone","dispose"],"zimContainer",!1);function c(t,r){r?(t.mouseChildren=!0,t.mouseEnabled=!0,t._enabled=!0):(t.mouseChildren=!1,t.mouseEnabled=!1,t._enabled=!1)}if(e.addTo=function(t,r,i,o){var l="obj, container, index, localToLocal",f;if(f=yt(e.addTo,arguments,l))return f;if(qe("47.5"),n(t)){ut("zim methods - addTo(): please provide object");return}if(n(r))if(le.zdf)r=le.zdf.stage;else{ut("zim methods - addTo(): please provide container");return}if(n(o)&&(o=!0),t.parent||(o=!1),o)var d=t.parent.localToLocal(t.x,t.y,r);return n(i)||isNaN(i)?r.addChild(t):r.addChildAt(t,i),o&&(t.x=d.x,t.y=d.y),t},e.removeFrom=function(t,r){if(qe("47.6"),n(t)){ut("zim methods - removeFrom(): please provide object");return}return t.removePhysics&&t.removePhysics(),n(r)?t.parent&&t.parent.removeChild(t):r.removeChild(t),t},e.added=function(t,r,i,o){if(qe("47.7"),!(n(t)||n(r)||typeof r!="function")){var l=v(i);if(n(i)&&(i=l=="s"?.1:100),t.stage){r(t.stage,t);return}var f=i*(l=="s"?1e3:1),d;o&&(a(o),d=o*(l=="s"?1e3:1));var p=Date.now(),w=0,k=setInterval(function(){if(w>5){clearInterval(k);return}w++,t.stage&&(r(t.stage,t),clearInterval(k),clearInterval(x))},10),x=setInterval(function(){d>0&&p-Date.now()>d&&clearInterval(x),t.stage&&(r(t.stage,t),clearInterval(x))},f);return x}},e.centerReg=function(t,r,i,o){var l="obj, container, index, add",f;if(f=yt(e.centerReg,arguments,l))return f;if(t.type=="AC"&&le.zdf)return le.zdf.ac("centerReg",arguments),t.addTo(r,i);if(qe("48"),n(t)||!t.getBounds||!t.getBounds())return ut("zim methods - centerReg(): please provide object with bounds set"),t;n(o)&&(o=!0),n(r)&&t.parent&&o&&(r=t.parent,n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t)),!n(r)&&r==t.parent&&(n(i)&&(i=t.parent.getChildIndex(t)),t.parent.removeChild(t));var d=t.getBounds();return t.regX=d.x+d.width/2,t.regY=d.y+d.height/2,o?e.center(t,r,i):t},e.center=function(t,r,i,o){var l="obj, container, index, add",f;if(f=yt(e.center,arguments,l))return f;if(t.type=="AC"&&le.zdf)return le.zdf.ac("center",arguments),t.addTo(r,i);if(e.centerCheck||(qe("48.1"),e.centerCheck=!0),n(t)||!t.getBounds)return ut("zim.center(): please provide object with bounds"),t;if(n(r)&&(t.parent?r=t.parent:le.zdf&&(r=le.zdf.stage)),n(r)||!r.getBounds)return ut("zim.center(): please provide container with bounds"),t;var d=t.getBounds(),p=r.getBounds();n(o)&&(o=!0);var w=!1;if(n(p)&&(r.setBounds(0,0),p=r.getBounds(),w=!0),o&&r.addChild&&(n(i)||typeof i=="number"&&isNaN(i)?(!t.parent||t.parent!=r)&&r.addChild(t):r.addChildAt(t,i)),n(d))return t.x=p.x+p.width/2,t.y=p.y+p.height/2,t;var k=!1,x=!1;r.scaleX==0&&(k=!0,r.scaleX=1e-5),r.scaleY==0&&(x=!0,r.scaleY=1e-5);var T=t.localToLocal(t.regX,t.regY,r),S=e.boundsToGlobal(t),b=e.boundsToGlobal(r,S,!0);if(k&&(r.scaleX=0),x&&(r.scaleY=0),t.x=p.x+p.width/2-b.width/2+(T.x-b.x),t.y=p.y+p.height/2-b.height/2+(T.y-b.y),!o&&r.getStage&&r.stage&&t.parent){var E=r.localToLocal(t.x,t.y,t.parent);t.x=E.x,t.y=E.y}return w&&r.setBounds(null),t},e.place=function(t,r){if(qe("49"),n(t))return;n(r)&&(r="obj"),e.lastPlace=t;function i(){ut(r+".x = "+Math.round(t.x)+"; "+r+".y = "+Math.round(t.y)+";"),ut(r+".loc("+Math.round(t.x)+", "+Math.round(t.y)+");")}e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),t.on("mousedown",function(){e.lastPlace=t});var o=le.zdf;return o&&o.on("keydown",function(l){if(t==e.lastPlace){var f=l.keyCode;if(f>=37&&f<=40){var d=l.shiftKey?10:1;t.mov(f==37?-1*d:f==39?1*d:0,f==38?-1*d:f==40?1*d:0),i(),t.stage&&t.stage.update()}}}),ut("place "+r+" - to get new position",t),t.on("click",i),t},e.placeReg=function(t,r){if(qe("49.5"),n(t))return;var i=t.stage;if(n(i))return ut("zim.placeReg() - add object to stage before calling placeReg()"),t;n(r)&&(r="obj");function o(){var d=t.globalToLocal(f.x,f.y);ut(r+".regX = "+Math.round(d.x)+"; "+r+".regY = "+Math.round(d.y)+";"),ut(r+".reg("+Math.round(d.x)+", "+Math.round(d.y)+");")}var l=t.parent.localToGlobal(t.x,t.y),f=new e.Shape(-25,-25,50,50,null,!1).addTo(i).pos({x:l.x,y:l.y,reg:!0});return f.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),f.compositeOperation="difference",f.expand(0),e.drag({obj:f}),ut("place cursor to get new registration point location"),i.on("stagemouseup",o),t},e.pos=function(t,r,i,o,l,f,d,p,w,k,x){var T="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY",S;if(S=yt(e.pos,arguments,T))return S;if(t.type=="AC"&&le.zdf)return le.zdf.ac("pos",arguments),t.addTo(f,d);qe("41.5"),le.DIR&&le.DIR=="rtl"||!le.DIR&&e.DIR=="rtl"?o=="start"?o="right":o=="end"&&(o="left"):o=="start"?o="left":o=="end"&&(o="right");var b=!1;o=="right"&&(b=!0);var E=!1;l=="bottom"&&(E=!0);var R=e.POSREG;if(le.POSREG!=null&&(R=le.POSREG),n(w)&&(w=R),n(t))return;n(w)&&n(k)&&(k=!1),n(w)&&n(x)&&(x=!1),!n(w)&&n(k)&&(k=w),!n(w)&&n(x)&&(x=w),n(p)&&(p=!0),!n(f)&&!f.addChild&&(f=null),!t.getBounds&&!t.getBounds()&&(k=x=!1),t.zimPos={x:r,y:i,h:o,v:l,i:d},n(f)&&(t.parent?f=t.parent:le.zdf&&(f=le.zdf.stage)),!t.parent&&n(r)&&(r=0),!t.parent&&n(i)&&(i=0);var C=!1;t.getBounds()||(t.setBounds(0,0),C=!0);var O=!1;f&&!f.getBounds()&&(f.setBounds(0,0),O=!0);function I(){n(d)||typeof d=="number"&&isNaN(d)?f.contains(t)||f.addChild(t):f.addChildAt(t,d)}if(!n(f)&&f.addChild&&p){var _=f.getBounds().clone();I();var P=f.getBounds();(_.width!=P.width||_.height!=P.height||_.x!=P.x||_.y!=P.y)&&(t.removeFrom(),f.setBounds(_.x,_.y,_.width,_.height),O=!0,I())}if(!k&&!x&&(o=="center"||o=="middle")&&(l=="center"||l=="middle"))return t.center({container:f}),t.mov(r,i),C&&t.setBounds(null),O&&f.setBounds(null),t;if(o=="center"||o=="middle"){if(k)t.x=f.width/2;else{var F=t.y;t.center(),t.y=F}t.mov(r),r=null,o=null}else o===!0&&(b=!0);if(l=="center"||l=="middle"){if(x)t.y=f.height/2;else{var K=t.x;t.center(),t.x=K}t.mov(0,i),i=null,l=null}else l===!0&&(E=!0);function V(){var te=t.getBounds(),ae=te.x,ee=te.y,pe=te.width,$=te.height,X=t._props.matrix;X=t.getMatrix(X),(ae||ee)&&X.appendTransform(0,0,1,1,0,0,0,-ae,-ee);var y=pe*X.a,g=pe*X.b,h=$*X.c,L=$*X.d,q=X.tx,A=X.ty,Y=q,xe=q,G=A,Z=A;return(ae=y+q)<Y?Y=ae:ae>xe&&(xe=ae),(ae=y+h+q)<Y?Y=ae:ae>xe&&(xe=ae),(ae=h+q)<Y?Y=ae:ae>xe&&(xe=ae),(ee=g+A)<G?G=ee:ee>Z&&(Z=ee),(ee=g+L+A)<G?G=ee:ee>Z&&(Z=ee),(ee=L+A)<G?G=ee:ee>Z&&(Z=ee),{x:Y,y:G,width:xe-Y,height:Z-G}}if(t.parent&&t.parent.getBounds){if(f=t.parent,n(r)&&b==!0&&(r=0),n(i)&&E==!0&&(i=0),n(r)||(t.x=r),n(i)||(t.y=i),n(r)&&n(i)&&!b&&!E)return C&&t.setBounds(null),O&&f.setBounds(null),t;var D=0,U=0;if(t.getBounds()){var Q=V();if(!n(r)){var J;b?J=new e.Point(Q.x+Q.width,Q.y+Q.height):J=new e.Point(Q.x,Q.y),D=J.x-r}n(i)||(E?J=new e.Point(Q.x+Q.width,Q.y+Q.height):J=new e.Point(Q.x,Q.y),U=J.y-i);var N=f.getBounds();n(r)||(b?k?t.x=N.width+N.x-r:t.x=N.width+N.x-r-D:(k?t.x=r:t.x=r-D,t.x+=N.x)),n(i)||(E?x?t.y=N.height+N.y-i:t.y=N.height+N.y-i-U:(x?t.y=i:t.y=i-U,t.y+=N.y))}}return C&&t.setBounds(null),O&&f.setBounds(null),p||t.removeFrom(),t},e.loc=function(t,r,i,o,l,f,d,p){var w="obj, target, y, container, index, add, localToLocal, x",k;if(k=yt(e.loc,arguments,w))return k;if(t.type=="AC"&&le.zdf)return le.zdf.ac("loc",arguments),t.addTo(o,l);if(qe("41.55"),!n(t)){if(typeof r=="number"&&(p=r,r=null),n(r)||(Array.isArray(r)?(p=r[0],i=r[1]):(n(r.x)||(p=r.x),n(r.y)||(i=r.y))),n(p)&&n(r)&&(p=t.x),n(i)&&n(r)&&(i=t.y),n(f)&&(f=!0),n(o)&&(t.parent?o=t.parent:le.zdf&&(o=le.zdf.stage)),f&&o&&(!t.parent||o!=t.parent?n(l)||isNaN(l)?o.addChild(t):o.addChildAt(t,l):n(l)||o.addChildAt(t,l)),n(d)&&(d=!0),r&&r.parent&&t.parent&&d){var x=r.parent.localToLocal(p,i,t.parent);p=x.x,i=x.y}return t.x=p,t.y=i,t}},e.mov=function(t,r,i){var o="obj, x, y",l;if(l=yt(e.mov,arguments,o))return l;if(t.type=="AC"&&le.zdf)return le.zdf.ac("mov",arguments),t;if(qe("41.6"),!n(t))return n(r)||(t.x+=r),n(i)||(t.y+=i),t},e.sca=function(t,r,i){return t.type=="AC"&&le.zdf?(le.zdf.ac("sca",arguments),t):(qe("41.97"),n(t)||n(t.scaleX)||(n(r)&&(r=t.scaleX),n(i)&&(i=r),t.scaleX=r,t.scaleY=i),t)},e.alp=function(t,r){if(qe("41.7"),!n(t))return n(r)||(t.alpha=t.hovOriginal=r,t.tag&&t.tag.style&&(t.type!="Loader"&&(t.tag.style.opacity=r),r==0?t.tag.style.display=t.tag.zimDisplay="none":t.tag.style.display=t.tag.zimDisplay="inline-block")),t},e.vis=function(t,r){if(qe("41.71"),!n(t))return t.visible=r,t.tag&&t.tag.style&&(r?t.tag.style.display=t.tag.zimDisplay="inline-block":t.tag.style.display=t.tag.zimDisplay="none"),t},e.ble=function(t,r){if(qe("41.72"),!n(t))return n(r)&&(r="difference"),t.compositeOperation=r,(t.type=="Blob"||t.type=="Squiggle")&&t.update(),t},e.dye=function(t,r){if(qe("41.73"),!n(t))return t.hasOwnProperty("backgroundColor")?t.backgroundColor=r:t.hasOwnProperty("color")&&(t.color=r),t},e.hov=function(t,r,i){if(qe("41.75"),!n(t))return n(r)&&(r=1),n(i)&&(i=typeof r=="number"?"alpha":"color"),t.hovMouseover&&(t.off("mouseover",t.hovMouseover),t.off("mouseout",t.hovMouseout)),r==-1?(t.cur("default"),n(t.hovOld)||(t[t.hovType]=t.hovOld),t.hovOld=null,t.stage&&t.stage.update(),t):(t.cur(),t.hovOld=t[i],t.hovNew=r,t.hovType=i,t.hovMouseover=t.on("mouseover",function(){t[i]=t.hovNew,t.stage&&t.stage.update()}),t.hovMouseout=t.on("mouseout",function(){t[i]=t.hovOld,t.stage&&t.stage.update()}),t)},e.rot=function(t,r,i,o){if(qe("41.8"),!n(t)){if(t.type=="AC"&&le.zdf)return le.zdf.ac("rot",arguments),t;if(!n(r))if(t.parent&&(!n(i)||!n(o))){n(i)&&(i=t.x),n(o)&&(o=t.y);var l=t.parent.localToLocal(i,o,t),f=new e.Point(t.x,t.y);t.reg(l.x,l.y),t.rotation=r,t.x=i,t.y=o;var d=t.parent.localToLocal(f.x,f.y,t);t.reg(d.x,d.y),t.x=f.x,t.y=f.y}else t.rotation=r;return t}},e.siz=function(t,r,i,o){if(qe("41.85"),!n(t))return t.type=="AC"&&le.zdf?(le.zdf.ac("siz",arguments),t):(n(o)&&(o=!1),!n(r)&&!n(i)?(t.widthOnly=r,t.heightOnly=i):n(r)?n(i)||(o?t.heightOnly=i:t.height=i):o?t.widthOnly=r:t.width=r,t)},e.ske=function(t,r,i){if(qe("41.9"),!n(t))return t.type=="AC"&&le.zdf?(le.zdf.ac("ske",arguments),t):(n(r)||(t.skewX=r),n(i)||(t.skewY=i),t)},e.reg=function(t,r,i,o){if(qe("41.95"),!n(t)){if(t.type=="AC"&&le.zdf)return le.zdf.ac("reg",arguments),t;var l=t.regX,f=t.regY,d=r,p=le.DIR||e.DIR||"ltr",w;if(r=="default"&&(r=null),typeof r=="string"&&(w=t.getBounds(),w?(r=="start"&&(r=p=="ltr"?"left":"right"),r=="end"&&(r=p=="ltr"?"right":"left"),r=="left"?r=w.x:r=="right"?r=w.x+w.width:(r=="center"||r=="middle")&&(r=w.x+w.width/2)):r=null),typeof i=="string"?(w||(w=t.getBounds()),w?i=="top"?i=w.y:i=="bottom"?i=w.y+w.height:(i=="center"||i=="middle")&&(i=w.y+w.height/2):i=null):n(i)&&(d=="center"||d=="middle")&&(w||(w=t.getBounds()),w?i=w.y+w.height/2:i=null),i=="default"&&(i=null),n(r)||(t.regX=r),n(i)||(t.regY=i),o&&t.parent){var k=t.localToLocal(l,f,t.parent);t.x-=k.x-t.x,t.y-=k.y-t.y}return t}},e.top=function(t){return qe("41.62"),n(t)||!t.parent||t.parent.setChildIndex(t,t.parent.numChildren-1),t},e.bot=function(t){return qe("41.63"),n(t)||!t.parent||t.parent.setChildIndex(t,0),t},e.ord=function(t,r){if(qe("41.64"),!(n(t)||!t.parent))return n(r)&&(r=0),t.parent.setChildIndex(t,e.constrain(t.parent.getChildIndex(t)+r,0,t.parent.numChildren-1)),t},e.cur=function(t,r){if(qe("41.1"),n(t))return ut("zim methods - cur(): please provide object"),t;n(r)&&(r="pointer");var i=le.zdf;return t.stage&&(i=t.stage.frame),i.cursors&&i.cursors[r]?(t.cursor="none",t._cursor=r,i.cursorList.add(t,r),t):(i.cursorList&&i.cursorList.add(t,!0),t.cursor=r,t)},e.sha=function(t,r,i,o,l){return qe("41.2"),n(t)?(ut("zim methods - sha(): please provide object"),t):(n(r)&&(r="rgba(0,0,0,.3)"),r.blur?(t.shadow=r,t):(n(i)&&(i=t.width?t.width*.08:5),n(o)&&(o=t.height?t.height*.08:5),n(l)&&(l=t.width?t.width*.16:10),r==-1?t.shadow=null:t.shadow=new je.Shadow(r,i,o,l),t))},e.dep=function(t,r){if(qe("41.65"),!n(t))return n(r)&&(r=0),t.depth=r,t},e.nam=function(t,r){if(qe("41.67"),!(n(t)||n(r)))return t.name=r,e.zimObjectIDs[r]=t,t},e.movement=function(t,r,i){qe("47.75");var o=t.stage||le.zdf.stage;function l(){o=t.stage,t.zimMovementStage=o,t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent),t.zimMovementEvent=o.on("stagemousemove",function(f){r(f)}),t.on("mouseout",function(){t.zimMovementEvent&&o.off("stagemousemove",t.zimMovementEvent)},null,!0)}return e.mobile()?(t.zimMovementEvent&&o.off("pressmove",t.zimMovementEvent),t.zimMovementEvent=t.on("pressmove",function(f){r(f)})):(t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMouseoverEvent=t.on("mouseover",l),i&&l()),t},e.noMovement=function(t){if(qe("47.9"),!n(t))return t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMovementEvent&&t.zimMovementStage&&t.zimMovementStage.off("stagemousemove",t.zimMovementEvent),t},e.tap=function(t,r,i,o,l,f,d,p,w,k){var x="obj, call, distance, time, once, dbl, dblTime, call2, call3, call4",T;if(T=yt(e.tap,arguments,x))return T;if(qe("47.8"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=f?10:5);var S=v(o);n(o)&&(o=S=="s"?8:8e3),n(l)&&(l=!1),n(f)&&(f=!1),n(d)&&(k?d=S=="s"?.5:500:d=S=="s"?1:1e3),t.cur("pointer");var b=!1,E=!1,R;return f?t.zimDblClickDownEvent=t.on("mousedown",function(C){if(R=!1,b){b=!1;return}if(b=!0,C.currentTarget.type=="List"){if(C.target.type=="WindowBacking")return;var O=C.currentTarget.globalToLocal(C.stageX/e.scaX,C.stageY/e.scaY);if(O.y<=0)return}var I=C.stageX/e.scaX,_=C.stageY/e.scaY,P=Date.now(),F,K;E=!0,t.zimDoubleTimeout&&clearTimeout(t.zimDoubleTimeout),t.zimDoubleTimeout=setTimeout(function(){if(E=!1,b=!1,t.zimDblClickUpEvent&&t.off("pressup",t.zimDblClickUpEvent),R&&k)if(Math.abs(I+_-F/e.scaX-K/e.scaY)<i){if(t.excludeTap)return;k(C)}else p&&p(C)},S=="s"?d*1e3:d),t.zimDblClickUpEvent=t.on("pressup",function(V){if(F=V.stageX,K=V.stageY,R=!0,b){w&&w(V);return}else if(!E)return;if(Math.abs(I+_-V.stageX/e.scaX-V.stageY/e.scaY)<i&&Date.now()-P<(S=="s"?o*1e3:o)){if(t.excludeTap)return;clearTimeout(t.zimDoubleTimeout),r(V)}else p&&p(V);V.remove()})},null,l):t.zimClickDownEvent=t.on("mousedown",function(C){if(C.currentTarget.type=="List"){if(C.target.type=="WindowBacking")return;var O=C.currentTarget.globalToLocal(C.stageX/e.scaX,C.stageY/e.scaY);if(O.y<=0)return}var I=C.stageX/e.scaX,_=C.stageY/e.scaY,P=Date.now();t.zimClickUpEvent=t.on("pressup",function(F){if(Math.abs(I+_-F.stageX/e.scaX-F.stageY/e.scaY)<i&&Date.now()-P<(S=="s"?o*1e3:o)){if(t.excludeTap)return;r(F)}else p&&p(F);F.remove()})},null,l),t}},e.noTap=function(t){if(qe("47.9"),!n(t))return t.cursor&&t.cur("default"),t.zimClickDownEvent&&t.off("mousedown",t.zimClickDownEvent),t.zimClickUpEvent&&t.off("pressup",t.zimClickUpEvent),t.zimDoubleTimeout&&clearInterval(t.zimDoubleTimeout),t},e.hold=function(t,r,i,o,l){if(qe("47.87"),!(n(t)||n(r)||typeof r!="function")){n(i)&&(i=5);var f=v(o);n(o)&&(o=f=="s"?1.5:1500),n(l)&&(l=!1),t.cur("pointer");var d;return t.zimClickHoldDownEvent=t.on("mousedown",function(p){if(d||(d=p.target.stage),!!d){if(n(d.frame)&&(d.frame=le.zdf),(n(d.frame)||!d.frame.mousemoveEvent)&&(n(d.frame)&&(d.frame={}),d.frame.mouseX=p.stageX/e.scaX,d.frame.mouseY=p.stageY/e.scaY,d.frame.mouseholdEvent&&d.off("stagemousemove",d.frame.mouseholdEvent),d.frame.mouseholdEvent=d.on("stagemousemove",function(S){d.frame.mouseX=S.stageX/e.scaX,d.frame.mouseY=S.stageY/e.scaY})),p.currentTarget.type=="List"){if(p.target.type=="WindowBacking")return;var w=p.currentTarget.globalToLocal(p.stageX/e.scaX,p.stageY/e.scaY);if(w.y<=0)return}var k=p.stageX/e.scaX,x=p.stageY/e.scaY;clearInterval(t.zimHoldInterval);var T=0;t.zimHoldInterval=setInterval(function(){if(T<10)Math.abs(k+x-d.frame.mouseX-d.frame.mouseY)>i&&clearInterval(t.zimHoldInterval);else{if(Math.abs(k+x-d.frame.mouseX-d.frame.mouseY)<i){if(t.excludeHold)return;r(p)}clearInterval(t.zimHoldInterval)}T++},o/10*(f=="s"?1e3:1)),t.zimClickHoldUpEvent=t.on("pressup",function(){clearInterval(t.zimHoldInterval),d&&d.frame.mouseholdEvent&&d.off("stagemousemove",d.frame.mouseholdEvent)},null,!0)}},null,l),t}},e.noHold=function(t){if(qe("47.88"),!n(t))return t.cursor&&t.cur("default"),t.off("mousedown",t.zimClickHoldDownEvent),t.off("pressup",t.zimClickHoldUpEvent),t.stage&&t.stage.frame.mouseEvent&&t.stage.off("stagemousemove",t.stage.frame.mouseEvent),clearInterval(t.zimHoldTimeout),t},e.change=function(t,r,i){if(qe("47.85"),!(n(t)||n(r)||typeof r!="function"))return n(i)&&(i=!1),t.zimChangeEvent=t.on("change",function(o){r(o)},null,i),t},e.noChange=function(t){if(qe("47.95"),!n(t))return t.off("mousedown",t.zimChangeEvent),t},e.drag=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F){var K="obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch",V;if(V=yt(e.drag,arguments,K))return V;if(qe("31"),n(t)||!t.on)return;var D=e.DRAGALL;if(le.DRAGALL!=null&&(D=le.DRAGALL),n(f)&&n(I)&&(f=D),n(f)&&n(I)?I=!1:n(f)?n(I)&&(I=!1):I=f,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(I=!0),r&&r.getBounds&&(t.type=="Container"||t.type=="Tile")&&t.mouseChildren==!0&&!f){var U=Array.prototype.slice.call(arguments);return U[4]=!0,setTimeout(function(){t.loop(function(Oe){U[0]=Oe,e.drag.apply(null,U)})},P?0:50),t}(n(i)||i=="all"||i!="horizontal"&&i!="vertical")&&(i="both"),t.zimDown&&t.noDrag(),t.cur(n(o)?"pointer":o),n(d)&&(d=!1),n(p)&&(p=!1),n(w)&&(w=!0),n(k)&&(k=!1),n(x)&&(x=!1),n(T)&&(T=.9),n(S)&&(S=!0);var Q=["horizontal","vertical","auto"];if(S!==!0&&Q.indexOf(S)<0&&(S=!1),S=="auto"&&(S=!0),n(b)&&(b=.1),n(E)&&(E=!1),n(R)&&(R=!0),n(C)&&(C=!0),n(r)&&!n(O)&&(r=O),n(F)&&(F=!1),t.dragPaused=!1,x)var J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge=le.M?20:10,he,ne,ue,Te,Fe=!1,ie=!1,Se=50;else t.zimDragTicker=function(){};t._draggable=!0,e.setSwipe(t,d),t.zimBoundary=r,t.zimlocalBoundary=p,t.circleBounds=r&&r.type=="Circle"?r.radius:!1,t.downCheck=!1;var se=!1,me,j,_e,Re,de;t.zimAdded=t.on("added",Pe,null,!0),t.zimRemoved=t.on("removed",Me,null,!0),t.parent&&Pe();function Pe(){if(t.off("added",t.zimAdded),r=t.zimBoundary,r&&r.getBounds&&r.type!="Blob"){if(t.zimlocalBoundary=!1,r.type!="Stage"&&r.type!="StageGL"?r=r.boundsToGlobal():r=new e.Boundary(0,0,r.width,r.height),!k){var Oe=t.boundsToGlobal();de=t.localToGlobal(t.regX,t.regY);var ce=new e.Point(de.x-Oe.x,de.y-Oe.y),Ue=t.borderWidth?t.borderWidth:0;r.x+=ce.x+Ue/2,r.y+=ce.y+Ue/2,r.width-=Oe.width+Ue,r.height-=Oe.height+Ue}t.zimBoundary=r}me=0,j=0,t.zimBoundary&&t.zimBoundary.type!="Blob"&&(p?(_e=e.boundsToGlobal(t.parent,t.zimBoundary),k&&(Re=t.zimBoundary)):(_e=t.zimBoundary,k&&(Re=e.boundsToGlobal(t.parent,t.zimBoundary,!0)))),_e&&C&&(de=t.parent.localToGlobal(t.x,t.y),we(t,de.x,de.y)),x&&setTimeout(function(){x&&S&&(J=new e.Damp(null,b),N=new e.Damp(null,b)),t.zimDragImmediate=function(Qe,Je){h=Qe,L=Je,he=ne=0,ue=Te=0,X=q=y=A=g=Y=0,x&&S&&(n(Qe)||J.immediate(Qe),n(Je)||N.immediate(Je))},te=3,ae=0,ee=[],pe=[],$=[],X=t.x,y=t.y,h=t.x,L=t.y,q=t.x,A=t.y,Y=Date.now(),xe=-1e4,G=-1e4,t.zimDragMoving=!0,He()},50),n(t.zimMaskDynamic)||t.zimMaskApply()}function Me(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}var fe,ve;t.pointers={};var Ie=!1;t.zimDown=t.on("mousedown",function(Oe){if(!(!t.stage||t.dragPaused)&&!(F&&Ie)){Ie=!0,ve=t.stage,t.zmu||(t.zmu=ve.frame.on("mouseupplus",function(nt){t.downCheck&&(x||(t.downCheck=!1),Xe(nt,!0))})),t.dragMouseX=Math.round(Oe.stageX/e.scaX)+ve.x,t.dragMouseY=Math.round(Oe.stageY/e.scaY)+ve.y;var ce="id"+Math.abs(Oe.pointerID+1);if(t.pointers[ce]=!0,fe=I?Oe.currentTarget:Oe.target,t.zimBoundary&&!fe.getBounds()){ut("zim.drag() - drag object needs bounds set");return}if(t.downCheck=!0,t.stage.mouseMoveOutside=!0,e.Ticker.has(t.zimDragTicker)||e.Ticker.add(t.zimDragTicker,t.stage),R&&t.zimTweens)for(var Ue in t.zimTweens){var Qe=t.zimTweens[Ue];Qe.zimObj&&(Qe.zimObj.x!=null||Qe.zimObj.y!=null)&&t.stopAnimate(Ue)}if(fe.parent){if(w){var Je=fe.parent.numChildren-1;fe.parent.getChildAt(Je).type=="Keyboard"&&Je--,fe.parent.setChildIndex(fe,Je),fe.ZIMoutlineShape&&fe.outline()}fe.parent==t.stage?de=new e.Point(Oe.stageX/e.scaX,Oe.stageY/e.scaY):de=fe.parent.globalToLocal(Oe.stageX/e.scaX,Oe.stageY/e.scaY),E&&(fe.x=de.x,fe.y=de.y),me=de.x-fe.x,j=de.y-fe.y,_e=null,t.zimBoundary&&(p?(_e=e.boundsToGlobal(fe.parent,t.zimBoundary),k&&(Re=t.zimBoundary)):(_e=t.zimBoundary,k&&(Re=e.boundsToGlobal(fe.parent,t.zimBoundary,!0)))),t.cur(n(l)?"pointer":l),x&&(t.slideStartX=t.x,t.slideStartY=t.y,Z=t.zimDragMoving,ae=0,ee=[de.x],pe=[de.y],$=[Date.now()],xe=-1e4,G=-1e4,t.zimDragMoving=!0),t.type=="Pen"&&(t.zimDragCheck=!0,se=!1)}}},!0),t.zimMove=t.on("pressmove",function(Oe){if(!(F&&!t.pointers["id"+Math.abs(Oe.pointerID+1)])&&!(!t.downCheck||t.dragPaused)){var ce=(_?Oe.rawX:Oe.stageX)/e.scaX+ve.x,Ue=(_?Oe.rawY:Oe.stageY)/e.scaY+ve.y;t.dragMouseX=Math.round(ce),t.dragMouseY=Math.round(Ue),we(fe,ce,Ue),fe.ZIMoutlineShape&&fe.outline(),t.type=="Pen"&&!se&&t.drawing?se=!0:(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize()}},!0);function we(Oe,ce,Ue){if(n(Oe)&&(Oe=fe||t),!!Oe.parent){if(n(ce)||n(Ue)){var Qe=Oe.parent.localToGlobal(Oe.x,Oe.y);me=j=0,t.zimBoundary&&(p?(_e=e.boundsToGlobal(Oe.parent,t.zimBoundary),k&&(Re=Oe.zimBoundary)):(_e=t.zimBoundary,k&&(Re=e.boundsToGlobal(Oe.parent,t.zimBoundary,!0)))),ce=Qe.x,Ue=Qe.y,x&&(h=Oe.x,L=Oe.y,fe=Oe)}var Je;ve&&ve.type?Je=Oe.parent.globalToLocal(ce,Ue):Je=Oe.parent.globalToLocal(ce*e.scaX,Ue*e.scaY);var nt=i=="both"||i=="horizontal",gt=i=="both"||i=="vertical",We;x&&S?S=="vertical"?(We=ye(Oe,Je.x-me,Je.y-j),nt&&(Oe.x=We.x),gt&&(Oe.y=Je.y-j)):S=="horizontal"?(We=ye(Oe,Je.x-me,Je.y-j),nt&&(Oe.x=Je.x-me),gt&&(Oe.y=We.y)):(nt&&(Oe.x=Je.x-me),gt&&(Oe.y=Je.y-j)):(We=ye(Oe,Je.x-me,Je.y-j),nt&&(Oe.x=We.x),gt&&(Oe.y=We.y)),x&&!Z&&(Oe.slideStartX!=Oe.x||Oe.slideStartY!=Oe.y)&&(Z=!0)}}t.zimPosition=we,t.zimUp=t.on("pressup",function(Oe){Xe(Oe)},!0);function Xe(Oe,ce){if(!(F&&!ce&&!t.pointers["id"+Math.abs(Oe.pointerID+1)])){Ie=!1;var Ue="id"+Math.abs(Oe.pointerID+1);if(delete t.pointers[Ue],!(!t.downCheck||t.dragPaused)){if(t.cur(n(o)?"pointer":o),x){if(fe.dispatchEvent("slidestart"),fe.parent){var Qe=_?Oe.rawX:Oe.stageX,Je=_?Oe.rawY:Oe.stageY;de=fe.parent.globalToLocal(Qe/e.scaX,Je/e.scaY)}else de=new e.Point(0,0);X=de.x,y=de.y,g=Date.now(),ue=X-q,Te=y-A;var nt=g-Y;he=e.constrain(ue*ge/nt,-Se,Se),ne=e.constrain(Te*ge/nt,-Se,Se),Fe=!1,ie=!1,t.downCheck=!1,h=fe.x,L=fe.y,ce&&(q=X=0,A=y=0,Y=g=0)}else{t.downCheck=!1;var gt=0;for(var We in t.pointers)gt++;gt==0&&e.Ticker.remove(t.zimDragTicker),t.type=="Pen"&&(t.zimDragCheck=!1,se&&t.drawing&&t.stopCheck())}t.stage&&t.stage.update()}}}function ye(Oe,ce,Ue){if(!Oe.parent)return{x:ce,y:Ue};if(_e)if(k){var Qe=Oe.getBounds().width,Je=Oe.getBounds().height,nt=Oe.getBounds().x,gt=Oe.getBounds().y;Qe<Re.width?ce=Re.x+(Re.width-Qe)/2+(Oe.regX-nt):(ce-(Oe.regX-nt)>Re.x&&(ce=Re.x+(Oe.regX-nt)),ce-(Oe.regX-nt)+Qe<Re.x+Re.width&&(ce=Re.x+Re.width+(Oe.regX-nt)-Qe)),Oe.height<Re.height?Ue=Re.y+(Re.height-Je)/2+(Oe.regY-gt):(Ue-(Oe.regY-gt)>Re.y&&(Ue=Re.y+(Oe.regY-gt)),Ue-(Oe.regY-gt)+Je<Re.y+Re.height&&(Ue=Re.y+Re.height+(Oe.regY-gt)-Je))}else{if(_e.type=="Blob")return _e.shape.hitTestPoint(ce,Ue)?{x:ce,y:Ue}:{x:t.x,y:t.y};if(de=Oe.parent.localToGlobal(ce,Ue),t.circleBounds){var We=_e.x+_e.width/2,st=_e.y+_e.height/2,at=t.circleBounds;if(e.dist(We,st,de.x,de.y)<=at)ce=de.x,Ue=de.y;else{var Ae=e.angle(We,st,de.x,de.y)*RAD;ce=We+at*Math.cos(Ae),Ue=st+at*Math.sin(Ae)}}else ce=Math.max(_e.x,Math.min(_e.x+_e.width,de.x)),Ue=Math.max(_e.y,Math.min(_e.y+_e.height,de.y));de=Oe.parent.globalToLocal(ce,Ue),ce=de.x,Ue=de.y}return{x:ce,y:Ue}}function Ge(Oe,ce,Ue,Qe,Je){Math.abs(Oe.x-xe)<.1&&Math.abs(Oe.y-G)<.1?(t.zimDragMoving=!1,Oe.x=Qe,Oe.y=Je,Oe.slideStartX=null,Oe.slideStartY=null,Z&&(Oe.dispatchEvent("slidestop"),e.Ticker.remove(t.zimDragTicker)),t.type=="Pen"&&(t.zimDragCheck=!1,se&&t.drawing&&t.stopCheck())):(xe=ce,G=Ue)}function He(){t.zimDragTicker=function(){if(!n(t.slideStartX))if(fe||(fe=t),t.downCheck){var Oe;fe.parent?Oe=fe.parent.globalToLocal(t.dragMouseX,t.dragMouseY):Oe=new e.Point(0,0),ae++,ee.push(Oe.x),pe.push(Oe.y),$.push(Date.now()),ae>=te?(q=ee.shift(),A=pe.shift(),Y=$.shift()):(q=ee[0],A=pe[0],Y=$[0])}else{if(!t.zimDragMoving)return;ue=he,Te=ne;var ce,Ue;i==BOTH?(ce=fe.x+ue,Ue=fe.y+Te):i==HORIZONTAL?(ce=fe.x+ue,Ue=fe.y):i==VERTICAL&&(ce=fe.x,Ue=fe.y+Te),he=ue*T,ne=Te*T;var Qe;_e&&(Qe=ye(fe,ce,Ue),(S===!0||S=="horizontal")&&(Math.round(ce)!=Math.round(Qe.x)&&(Fe||(J.immediate(ce),Fe=!0),he=0,ce=J.convert(Qe.x)),S=="horizontal"&&(Ue=Qe.y)),(S===!0||S=="vertical")&&(Math.round(Ue)!=Math.round(Qe.y)&&(ie||(ie=!0,N.immediate(Ue),ne=0),Ue=N.convert(Qe.y)),S=="vertical"&&(ce=Qe.x)),S||(ce=Qe.x,Ue=Qe.y)),fe.x=ce,fe.y=Ue,Ge(fe,fe.x,fe.y,ce,Ue)}}}return t},e.noDrag=function(t,r){if(qe("32"),n(t)||!t.on)return;if(n(r)&&(r=!0),r&&t.numChildren&&t.numChildren>1)for(var i=0;i<t.numChildren;i++){var o=t.getChildAt(i);l(o)}l(t);function l(f){f.cur&&f.cur("default"),f._draggable=!1,e.setSwipe(f,!0),f.off("added",f.zimAdded),f.off("removed",f.zimRemoved),f.off("mousedown",f.zimDown),f.off("pressmove",f.zimMove),f.off("pressup",f.zimUp),f.zmu&&(f.stage?f.stage.frame.off("mouseupplus",f.zmu):le.zdf.off("mouseupplus",f.zmu)),e.Ticker&&(f.zimDragSlide&&e.Ticker.remove(f.zimDragSlide),f.zimDragTicker&&e.Ticker.remove(f.zimDragTicker)),f.zimDragMoving=f.zimAdded=f.zimRemoved=f.zimDown=f.zimMove=f.zimUp=f.zimBoundary=f.zimDragSlide=null,f.slideStartX=f.slideStartY=f.zimDragImmediate=null,f.dragMouseX=f.zimPosition=f.dragMouseY=f.zimDown=f.zimUp=null,f.zimDragTicker=f.zimDragSlide=null}return t},e.dragBoundary=function(t,r){if(qe("33"),!(n(t)||!t.on))return t.zimBoundary=r,t.zimDragMoving=!0,t.zimPosition&&t.zimPosition(),t},e.dragRect=e.dragBoundary,e.mouse=function(t){return qe("33.1"),t.zimLastMouse&&(t.mouseChildren=t.zimLastMouse),t.mouseEnabled=!0,t.zimLastMouseEnabled=!0,t},e.noMouse=function(t){return qe("33.15"),t.zimLastMouse=t.mouseChildren,t.mouseChildren=!1,t.mouseEnabled=!1,t.zimLastMouseEnabled=!1,t},e.wire=function(t,r,i,o,l,f,d,p){var w="source, target, prop, twoWay, setSource, filter, call, input",k;if(k=yt(e.wire,arguments,w))return k;if(qe("33.2"),n(e.Ticker)&&At)return ut("wire() - requires ZIM Frame"),t;if(n(r)&&At)return ut("wire() - requires a target"),t;var x=e.DEFAULTWIRE;return le.DEFAULTWIRE!=null&&(x=le.DEFAULTWIRE),n(p)&&(x&&x!="currentValue"&&x!="selectedIndex"||x&&Object.prototype.hasOwnProperty.call(t,x)?p=x:Object.prototype.hasOwnProperty.call(t,"currentValue")?p="currentValue":Object.prototype.hasOwnProperty.call(t,"selectedIndex")?p="selectedIndex":p=i),n(i)&&(i=p),t.addChild&&(t.zimWire=!0),r.addChild&&(r.zimWired=!0),e.Ticker.addWire(t,[r,i,o,l,f,d,p]),t},e.noWire=function(t,r,i,o){var l="source, target, prop, input",f;return(f=yt(e.noWire,arguments,l))?f:(qe("33.25"),n(e.Ticker)&&At?(ut("noWire() - requires ZIM Frame"),t):(e.Ticker.removeWire(t,r,i,o),t))},e.wired=function(t,r,i,o,l,f,d,p){var w="target, source, prop, twoWay, setSource, filter, call, input",k;return(k=yt(e.wired,arguments,w))?k:(qe("33.3"),n(e.Ticker)&&At?(ut("wired() - requires ZIM Frame"),t):(e.wire(r,t,i,o,l,f,d,p),t))},e.noWired=function(t,r,i,o){var l="target, source, prop, input",f;return(f=yt(e.noWire,arguments,l))?f:(qe("33.35"),n(e.Ticker)&&At?(ut("noWired() - requires ZIM Frame"),t):(e.Ticker.removeWire(r,t,i,o),t))},typeof m>"u")var m;if(e.bind=function(t,r,i,o,l,f){var d="obj, id, props, extra, filter, bindObj",p;if(p=yt(e.bind,arguments,d))return p;if(qe("33.17"),!m)return At&&ut("bind() - needs a Bind() object created first"),t;if(n(r))return At&&ut("bind() - needs a unique id"),t;var w=f||m;return w.add(r,t,i,o,l),t},e.noBind=function(t,r,i,o,l){var f="obj, props, removeConnectionData, call, bindObj",d;if(d=yt(e.noBind,arguments,f))return d;if(qe("33.18"),!m)return t;var p=l||m;return p.remove(t,r,i,o),t},e.transform=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N){var te="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame",ae;if(ae=yt(e.transform,arguments,te))return ae;if(t.type=="AC"&&le.zdf)return le.zdf.ac("transform",arguments),t;if(qe("33.5"),n(t)||!t.getBounds)return ut("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return ut("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return ut("zim methods - transform(): object should be on stage first"),t;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.width==0&&(i=!1),t.height==0&&(o=!1),n(l)&&(l=!0),n(f)&&(f=!0);var ee=e.mobile();n(d)&&(d=!0),n(p)&&(p=!0),n(w)&&(w=!0),n(k)&&(k=!!ee),n(x)&&(x=!!ee),n(T)&&(T=!0),n(S)&&(S=!0),n(b)&&(b=!0),n(E)&&(E="brown"),n(R)&&(R=1),n(D)&&(D=null),n(U)&&(U=null),D<0||U<0?D=U=null:D!=null&&U==null&&(U=1),n(Q)&&(Q=!0),n(J)&&(J=!1),n(N)&&(N=le.zdf),n(O)&&(O=!ee),n(I)&&(I=ee?20:10),n(_)&&(_=16),n(P)&&(P=10),n(F)&&(F=5),n(K)&&(K=!0),n(V)&&(V=!1),(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&(V=!0),t.mouseChildren=!1;var pe=t.getConcatenatedMatrix().decompose(),$=t.stage?t.stage:N.stage;n(N.eventRemove)&&($.enableMouseOver(),N.ctrlKey=!1,N.shiftKey=!1,le.addEventListener("keydown",function($e){N.altKey=$e.altKey,N.ctrlKey=$e.ctrlKey}),le.addEventListener("keyup",function($e){N.altKey=$e.altKey,N.ctrlKey=$e.ctrlKey}));var X=t.getBounds(),y=new e.Shape({style:!1}),g=new e.Shape({style:!1}),h=new e.Shape({style:!1});g.mouseEnabled=!1,h.controlType="reg";var L=t.parent,q=y.graphics,A=g.graphics,Y=h.graphics,xe,G,Z,ge,he,ne,ue,Te,Fe,ie=new e.Container({style:!1});ie.type="TransformControls";var Se=new e.Container({style:!1}),se=new e.Container({style:!1}),me=new e.Container({style:!1}),j=new e.Container({style:!1}),_e,Re,de,Pe,Me;n(t.zimMaskDynamic)||t.zimMaskApply();function fe($e,Tt){$e==Tt&&new e.Triangle(16,12,12,"white",null,null,0).addTo($e).mov(0,-13.5),new e.Triangle(16,12,12,"white",null,null,0).addTo($e).mov(13.5).rot(90),$e==Tt&&new e.Triangle(16,12,12,"white",null,null,0).addTo($e).mov(0,13.5).rot(180),new e.Triangle(16,12,12,"white",null,null,0).addTo($e).mov(-13.5).rot(-90),$e==Tt&&new e.Triangle(10,7,7,"black",null,null,0).addTo($e).mov(0,-13),new e.Triangle(10,7,7,"black",null,null,0).addTo($e).mov(13).rot(90),$e==Tt&&new e.Triangle(10,7,7,"black",null,null,0).addTo($e).mov(0,13).rot(180),new e.Triangle(10,7,7,"black",null,null,0).addTo($e).mov(-13).rot(-90),K&&$e.cache(-20,-20,40,40)}if(O){var ve=new e.Container({style:!1}),Ie=new e.Container({style:!1});fe(ve,ve),fe(Ie,ve);var we={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function Xe(){var $e=t;for(_e=0,Re=1,de=1,Pe=0,Me=0;$e.parent;)_e+=$e.rotation,Re*=$e.scaleX,de*=$e.scaleY,Pe+=$e.skewX,Me+=$e.skewY,$e=$e.parent}Xe();var ye=_e,Ge=["nw-resize","ne-resize","nw-resize","ne-resize"],He=[2,3,0,1],Oe,ce;for(ce=0;ce<4;ce++)T?(Oe=new e.Rectangle(I,I,e.pink,e.grey,2,null,null,null,null,!1),Oe.centerReg(Se),K&&Oe.cache(-1,-1,I+2,I+2)):(Oe=new e.Rectangle(I,I,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1),Oe.centerReg(Se),Oe.expand(0)),Oe.rotation=_e,ue=O?"none":Ge[ce],Oe.drag({overCursor:ue,dragCursor:ue,onTop:!1}),Oe.controlType="corner",Oe.cu=Ge[ce];for(ce=0;ce<He.length;ce++)Se.getChildAt(ce).op=Se.getChildAt(He[ce]);var Ue=["n-resize","e-resize","n-resize","e-resize"];for(He=[1,1,0,0],ce=0;ce<4;ce++){var Qe=ce%2==0?t.width/2:I,Je=ce%2==0?I:t.height/2;k?(Oe=new e.Rectangle(I,I,e.fog,e.dark,2,null,null,null,null,!1),Oe.centerReg(ce%2==0?me:se),K&&Oe.cache(-1,-1,I+2,I+2)):(Oe=new e.Rectangle(Qe,Je,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),Oe.centerReg(ce%2==0?me:se),Oe.expand(0)),Oe.rotation=_e,ue=O?"none":Ue[ce],Oe.drag({overCursor:ue,dragCursor:ue,onTop:!1}),Oe.controlType="side",Oe.cu=Ue[ce]}for(ce=0;ce<He.length;ce++){var nt=ce%2==0?me:se;nt.getChildAt(Math.floor(ce/2)).op=nt.getChildAt(He[ce])}var gt=["ne-resize","nw-resize","ne-resize","nw-resize"];for(ce=0;ce<4;ce++)x?(Oe=new e.Circle(I,e.pink,null,null,null,null,null,null,!1),Oe.addTo(j),K&&Oe.cache(-I,-I,I*2,I*2)):(Oe=new e.Circle(I,"rgba(0,0,0,0)",null,null,null,null,null,null,!1),Oe.addTo(j),Oe.expand(0)),ue=O?"none":gt[ce],Oe.drag({overCursor:ue,dragCursor:ue,onTop:!1}),Oe.controlType="rotate",Oe.cu=gt[ce];var We=1.8;j.alpha=.5,st();function st(){var $e=I*We*e.sign(Re),Tt=I*We*e.sign(de);j.getChildAt(0).reg($e,Tt),j.getChildAt(1).reg(-$e,Tt),j.getChildAt(2).reg(-$e,-Tt),j.getChildAt(3).reg($e,-Tt),$.update()}function at(){q.c(),A.c(),Y.c(),xe=t.localToGlobal(X.x,X.y),G=t.localToGlobal(X.x+X.width,X.y),Z=t.localToGlobal(X.x+X.width,X.y+X.height),ge=t.localToGlobal(X.x,X.y+X.height);var $e=t.localToGlobal(X.x+X.width/2,X.y),Tt=t.localToGlobal(X.x+X.width,X.y+X.height/2),Xt=t.localToGlobal(X.x+X.width/2,X.y+X.height),$t=t.localToGlobal(X.x,X.y+X.height/2);he=t.localToGlobal(t.regX,t.regY),ne=t.localToGlobal(X.x+X.width/2,X.y+X.height/2),Fe=[xe,G,Z,ge],Te=[$e,Tt,Xt,$t],b&&(q.s(E),C&&q.sd([10,5],0),q.ss(R).mt(xe.x,xe.y).lt(G.x,G.y).lt(Z.x,Z.y).lt(ge.x,ge.y).lt(xe.x,xe.y).cp()),n(D)||(A.s(D),Q&&A.sd([10,5],0),A.ss(U).mt(xe.x,xe.y).lt(G.x,G.y).lt(Z.x,Z.y).lt(ge.x,ge.y).lt(xe.x,xe.y).cp()),y.setBounds(xe.x,xe.y,G.x-xe.x,ge.y-xe.y),S&&(Y.s("#eee").ss(R).f("rgba(0,0,0,.1)").dc(0,0,_),Y.s("#222").ss(R).dc(0,0,_*.3)),Xe();for(var cn=Math.min(50,Math.abs(Pe))*e.sign(Pe),an=Math.min(50,Math.abs(Me))*e.sign(Me),zt=_e*e.sign(Re*de)*e.sign(t.scaleX*t.scaleY),St=0;St<Fe.length;St++){var Ft=Fe[St];Se.getChildAt(St).loc(Ft.x,Ft.y).ske(cn,an).rot(zt),j.getChildAt(St).loc(Ft.x,Ft.y).rot(zt);var hn=Te[St],pn=St%2==0?me:se;pn.getChildAt(Math.floor(St/2)).loc(hn.x,hn.y).ske(cn,an).rot(zt),k||pn.getChildAt(Math.floor(St/2)).sca(St%2==0?Re/2:1,St%2==0?1:de/2)}h.x=he.x,h.y=he.y}at();var Ae=new e.Shape(1e3,1e3,null,null,null,!1);function Le(){Ae.x=0,Ae.y=0,Ae.graphics.c().f("rgba(0,0,0,.01)").mt(xe.x,xe.y).lt(G.x,G.y).lt(Z.x,Z.y).lt(ge.x,ge.y).lt(xe.x,xe.y).cp(),Ae.reg(he.x,he.y),Ae.x=he.x,Ae.y=he.y}Le(),ie.on("dblclick",function($e){N.ctrlKey&&t.transformControls.visible&&(t.scaleX=1,t.scaleY=1,t.rotation=0,at(),Le(),$.update()),Kt($e,!0)});var De=ie.on("mousedown",mt),ft=t.on("mousedown",mt);function mt($e){var Tt=$.getObjectUnderPoint($e.stageX,$e.stageY,1);ee||Tt&&(t.contains&&t.contains(Tt)||!t.contains&&t==Tt)?t.transformControls.visible||(O?(kt=!1,Ae.mouseEnabled=!1):N.canvas.style.cursor="move",t.transformControls.show(),t.dispatchEvent("transformshow")):t.transformControls.visible&&(!Tt||!ie.contains(Tt))&&(t.transformControls.hide(),t.dispatchEvent("transformhide"))}var Ze=$.on("stagemousedown",function($e){var Tt=$.getObjectUnderPoint($e.stageX,$e.stageY,1),Xt=Tt&&Tt.parent&&Tt.parent.layer&&Tt.parent.layer==t;t.transformControls.visible&&(!Tt||!ie.contains(Tt)&&!Xt)&&(t.dispatchEvent("transformhide"),t.transformControls.hide())});d||(ie.off("mousedown",De),t.off("mousedown",ft),$.off("stagemousedown",Ze));var dt,Ee,ot,Ve,Ye,Ke,ze,tt,ht,Be,it,vt,et,wt=!1,xt=!1,_t,lt,Dt=t.cursor,Pt,It=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(O){It.mouseEnabled=!1,It.mouseChildren=!1,It.addChild(Ie),Se.on("mouseover",Qt),Se.on("mouseout",rt),se.on("mouseover",Qt),se.on("mouseout",rt),me.on("mouseover",Qt),me.on("mouseout",rt),j.on("mouseover",Qt),j.on("mouseout",rt);var Vt=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);Vt.cursor="none"}Se.on("mousedown",Gt),Se.on("pressmove",jt),Se.on("pressup",Kt),se.on("mousedown",Gt),se.on("pressmove",jt),se.on("pressup",Kt),me.on("mousedown",Gt),me.on("pressmove",jt),me.on("pressup",Kt),j.on("mousedown",Gt),j.on("pressmove",sn),j.on("pressup",Kt);function Gt($e){if(xt=!0,w&&bt(),_t&&$.off("stagemousemove",_t),dt=$e.target.x,Ee=$e.target.y,Be=t.x,it=t.y,ot=t.scaleX,Ve=t.scaleY,$e.target.controlType=="rotate"){wt=!0,Ye=t.rotation;var Tt=$e.stageX/e.scaX,Xt=$e.stageY/e.scaY,$t=L.localToGlobal(Be,it);vt=$t.x,et=$t.y,Ke=Math.atan2(Xt-et,Tt-vt)*180/Math.PI}N.ctrlKey||$e.target.controlType=="rotate"?(ze=Math.abs(dt-t.x),tt=Math.abs(Ee-t.y)):(ze=Math.abs(dt-$e.target.op.x),tt=Math.abs(Ee-$e.target.op.y)),$e.target.controlType!="rotate"&&(ht=$e.target.op.parent.localToLocal($e.target.op.x,$e.target.op.y,t.parent)),It.stage?$.setChildIndex(It,$.getChildIndex(ie)):It.addTo($,$.getChildIndex(ie)+1),It.x=$e.stageX/e.scaX,It.y=$e.stageY/e.scaY,It.cursor=O?"none":$e.target.cu,O&&(t.getConcatenatedMatrix().decompose(pe),pe.rotation||(pe.rotation=0),Ie.rotation=pe.rotation*e.sign(Re*de)*e.sign(t.scaleX*t.scaleY)+we[$e.target.cu]+ye,$e.target.controlType!="side"&&Re*de<0&&(Ie.rotation+=90),Vt.addTo($,1).pos({x:$e.stageX/e.scaX,y:$e.stageY/e.scaY,reg:!0})),Ae.visible=!1,t.cursor="none"}function jt($e){var Tt=1;if(N.ctrlKey&&$e.target.controlType=="corner"?Tt=ze>tt?($e.target.x-Be)/(dt-Be):($e.target.y-it)/(Ee-it):ze>tt?dt-$e.target.op.x&&(Tt=($e.target.x-$e.target.op.x)/(dt-$e.target.op.x)):Ee-$e.target.op.y&&(Tt=($e.target.y-$e.target.op.y)/(Ee-$e.target.op.y)),$e.target.controlType=="corner"?(t.scaleX=Tt*ot,t.scaleY=Tt*Ve):(t.scaleX=$e.target.cu=="e-resize"?Tt*ot:ot,t.scaleY=$e.target.cu=="n-resize"?Tt*Ve:Ve),at(),It.x=$e.stageX/e.scaX,It.y=$e.stageY/e.scaY,O&&(Vt.x=$e.stageX/e.scaX,Vt.y=$e.stageY/e.scaY),!N.ctrlKey||$e.target.controlType=="side"){var Xt=$e.target.op.parent.localToLocal($e.target.op.x,$e.target.op.y,t.parent);t.x-=(Xt.x-ht.x)*e.sign(Re)*e.sign(t.scaleX),t.y-=(Xt.y-ht.y)*e.sign(de)*e.sign(t.scaleY)}if(at(),t.transformControls.events){var $t=$e.target.controlType;Lt($e,$t)}}function sn($e){var Tt=Math.atan2($e.stageY/e.scaY-et,$e.stageX/e.scaX-vt)*180/Math.PI;if(N.shiftKey?t.rot(Math.round((Ye+(Tt-Ke)*e.sign(Re)*e.sign(t.scaleX))/45)*45):t.rot(Ye+(Tt-Ke)*e.sign(Re)*e.sign(t.scaleX)),at(),It.x=$e.stageX/e.scaX,It.y=$e.stageY/e.scaY,O&&(t.getConcatenatedMatrix().decompose(pe),pe.rotation||(pe.rotation=0),Ie.rotation=pe.rotation*e.sign(Re*de)*e.sign(t.scaleX*t.scaleY)+we[$e.target.cu]+ye,$e.target.controlType!="side"&&Re*de<0&&(Ie.rotation+=90),Vt.x=$e.stageX/e.scaX,Vt.y=$e.stageY/e.scaY),at(),t.transformControls.events){var Xt=$e.target.controlType;Lt($e,Xt,null,!1)}}function Kt($e,Tt){st();var Xt=$e?$e.target.controlType:"move";Tt&&(Xt="reset"),O&&Vt.removeFrom($),Lt($e,Xt,!0),$.update()}function Lt($e,Tt,Xt,$t){$t==null&&($t=!0);var cn=!1;Pt=null,Tt=="move"?((t.x!=Ht.x||t.y!=Ht.y)&&(Pt=new je.Event("transformed"),Pt.transformType="move"),$t&&(cn=Ae.hitTestPoint($e.stageX/e.scaX,$e.stageY/e.scaY))):Tt=="corner"?((t.scaleX!=Ht.scaleX||t.scaleY!=Ht.scaleY)&&(Pt=new je.Event("transformed"),Pt.transformType="size"),$t&&(cn=Se.hitTestPoint($e.stageX/e.scaX,$e.stageY/e.scaY))):Tt=="side"?((t.scaleX!=Ht.scaleX||t.scaleY!=Ht.scaleY)&&(Pt=new je.Event("transformed"),Pt.transformType="stretch"),$t&&(cn=se.hitTestPoint($e.stageX/e.scaX,$e.stageY/e.scaY)||me.hitTestPoint($e.stageX/e.scaX,$e.stageY/e.scaY))):Tt=="rotate"?(t.rotation!=Ht.rotation&&(Pt=new je.Event("transformed"),Pt.transformType="rotate"),$t&&(cn=j.hitTestPoint($e.stageX/e.scaX,$e.stageY/e.scaY))):Tt=="reg"?(t.regX!=Ht.regX||t.regY!=Ht.regY)&&(Pt=new je.Event("transformed"),Pt.transformType="reg"):Tt=="reset"?(Pt=new je.Event("transformed"),Pt.transformType="reset"):(Pt=new je.Event("transformed"),Pt.transformType="unknown"),$t&&!cn&&(It.removeFrom($),N.canvas.style.cursor="default",t.cursor=Dt),Pt&&(Pt.pressup=Xt,(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.dispatchEvent(Pt))}function Qt($e){xt||(It.stage?$.setChildIndex(It,$.getChildIndex(ie)):It.addTo($,$.getChildIndex(ie)+1),Vt.addTo($,1),It.x=$e.stageX/e.scaX,It.y=$e.stageY/e.scaY,Vt.x=$e.stageX/e.scaX,Vt.y=$e.stageY/e.scaY,t.getConcatenatedMatrix().decompose(pe),pe.rotation||(pe.rotation=0),Ie.rotation=pe.rotation*e.sign(Re*de)*e.sign(t.scaleX*t.scaleY)+we[$e.target.cu]+ye,$e.target.controlType!="side"&&Re*de<0&&(Ie.rotation+=90),$.update(),_t&&$.off("stagemousemove",_t),_t=$.on("stagemousemove",function(Tt){It.x=Tt.stageX/e.scaX,It.y=Tt.stageY/e.scaY,$.update()}))}function rt(){$.off("stagemousemove",_t),!xt&&(t.cursor=Dt,It.removeFrom($),Vt.removeFrom($),$.update())}function bt(){if(w){var $e=L.numChildren-1;L.getChildAt($e).type=="Keyboard"&&$e--,L.setChildIndex(t,$e),Rt()}}function Rt(){if(L==$)ie.removeFrom(),$.addChildAt(ie,$.getChildIndex(t)+1);else{for(var $e=L;$e.parent&&$e.parent!=$;)$e=$e.parent;t.stage&&(ie.parent==$&&$.removeChild(ie),$.addChildAt(ie,$.getChildIndex($e)+1))}}var Mt,Nt;h.drag(),h.on("mousedown",bt),h.on("pressup",function($e){if(!N.ctrlKey){for(var Tt=0;Tt<Fe.length;Tt++)if(e.dist(h.x,h.y,Fe[Tt].x,Fe[Tt].y)<P){h.x=Fe[Tt].x,h.y=Fe[Tt].y;break}e.dist(h.x,h.y,ne.x,ne.y)<P&&(h.x=ne.x,h.y=ne.y)}var Xt=t.rotation;Mt=t.globalToLocal(h.x,h.y),L==$?Nt=new e.Point(h.x,h.y):Nt=L.globalToLocal(h.x,h.y),t.reg(Mt.x,Mt.y),t.rotation=0,t.x=t.x+Nt.x-t.x,t.y=t.y+Nt.y-t.y,t.rotation=Xt,at(),Le(),Kt($e),$.update()});var kt=!0;ue=O?"none":"move",Ae.drag({overCursor:ue,dragCursor:ue,onTop:!1}),Ae.controlType="move",O&&(Ae.on("mouseover",Wt),Ae.on("mouseout",Bt));function Bt(){$.off("stagemousemove",lt),!xt&&(ve.removeFrom(ie),$.update())}function Wt($e){xt||!O||!kt||(ve.addTo(ie).pos({x:$e.stageX/e.scaX,y:$e.stageY/e.scaY,reg:!0}),$.update(),lt&&$.off("stagemousemove",lt),lt=$.on("stagemousemove",function(Tt){ve.x=Tt.stageX/e.scaX,ve.y=Tt.stageY/e.scaY,$.update()}))}Ae.on("mousedown",bt),Ae.on("pressmove",function($e){if(t.transformControls.visible){var Tt;if(L==$?Tt=new e.Point(Ae.x,Ae.y):Tt=L.globalToLocal(Ae.x,Ae.y),t.x=Tt.x,t.y=Tt.y,at(),t.transformControls.events){var Xt="move";Lt($e,Xt)}}}),Ae.on("pressup",function($e){t.transformControls.visible&&Kt($e)});var Zt=$.on("stagemouseup",function(){xt=!1,Ae.mouseEnabled=!0,kt||(Pt=new je.Event("transformed"),t.x!=Ht.x||t.y!=Ht.y?Pt.transformType="move":Pt.transformType="select",Pt.pressup=!0,t.dispatchEvent(Pt)),kt=!0,Ae.visible=!0,wt&&!N.ctrlKey&&F>1&&(t.rotation=Math.round(t.rotation/F)*F,at()),Le(),Ae.mouseEnabled=!0,wt=!1,$.update()});function en(){Ht={x:t.x,y:t.y,rotation:t.rotation,regX:t.regX,regY:t.regY,scaleX:t.scaleX,scaleY:t.scaleY}}var Ht;en();var vn=t.on("mousedown",en);ie.on("mousedown",en),ie.addChild(y),r&&ie.addChild(Ae),l&&ie.addChild(Se),i&&ie.addChild(se),o&&ie.addChild(me),f&&ie.addChild(j),ie.addChild(h);var Jt;r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Jt=t.on("pressmove",function($e){if(at(),Le(),st(),t.transformControls.events){var Tt="move";Lt($e,Tt)}}));var Sn=d;return t.transformControls={visible:p,events:V,ghost:!n(D),ghostEnabled:!n(D),show:function(){return w&&bt(),Rt(),t.toggled=!0,t.transformControls.visible=!0,g.parent&&g.removeFrom(),$.update(),t},hide:function(){if(t.transformControls.ghost)var $e=$.getChildIndex(ie);return $.removeChild(ie),t.transformControls.ghost&&t.transformControls.ghostEnabled&&$.addChildAt(g,$e),t.toggled=!1,t.transformControls.visible=!1,O&&(_t&&$.off("stagemousemove",_t),lt&&$.off("stagemousemove",lt),xt=!1,It.removeFrom($),Vt.removeFrom($)),r||t.cur(Dt),$.update(),t},remove:function($e){$e||t.transformControls.hide(),d=!1,r&&(t.noDrag(),t.off("pressmove",Jt))},add:function($e){$e||t.transformControls.show(),d=Sn,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Jt=t.on("pressmove",Jt))},allowToggleOn:function(){d=Sn=!0,De=ie.on("mousedown",De),ft=t.on("mousedown",ft),Ze=$.on("stagemousedown",Ze)},allowToggleOff:function(){d=Sn=!1,ie.off("mousedown",De),t.off("mousedown",ft),$.off("stagemousedown",Ze)},disable:function(){ie.mouseChildren=!1,ie.mouseEnabled=!1,r&&(t.noDrag(),t.off("pressmove",Jt))},enable:function(){ie.mouseChildren=!0,ie.mouseEnabled=!0,r&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Jt=t.on("pressmove",Jt))},recordData:function($e){var Tt={type:t.type,index:L.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return $e?JSON.stringify(Tt):Tt},setData:function($e,Tt){if(!n($e)){Tt&&($e=JSON.parse($e)),delete $e.controls;var Xt=$e.index;n(Xt)&&(Xt=0),delete $e.index;for(var $t in $e)t[$t]=$e[$t];return setTimeout(function(){at(),Le(),st(),L.setChildIndex(t,Xt),t.transformControls.visible&&t.type!="Layer"?t.transformControls.show():t.transformControls.hide(),t.transformControls.ghost&&!t.transformControls.ghostEnabled&&!t.transformControls.visible&&$.addChild(g)},90),t}},hideGhost:function(){t.transformControls.ghost=!1,g.removeFrom()},showGhost:function(){if(t.transformControls.ghost=!0,t.transformControls.ghostEnabled&&!t.transformControls.visible){for(var $e=L;$e.parent&&$e.parent!=$;)$e=$e.parent;g.stage?$.setChildIndex(g,$.getChildIndex($e)+1):$.addChildAt(g,$.getChildIndex($e)+1)}},addGhost:function(){U>0?(t.transformControls.ghostEnabled=!0,t.transformControls.showGhost()):At&&ut("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){t.transformControls.ghostEnabled=!1,t.transformControls.hideGhost()},resize:function($e){if(L=t.parent,at(),Le(),st(),p&&t.transformControls.show(),$e){var Tt=new je.Event("transformed");Tt.pressup=!0,Tt.transformType="resize",t.dispatchEvent(Tt)}return t},dispose:function(){t.transformControls.hide(),d=!1,r&&(t.noDrag(),t.off("pressmove",Jt)),t.transformControls.hideGhost(),Ae.removeAllEventListeners(),j.removeAllEventListeners(),h.removeAllEventListeners(),se.removeAllEventListeners(),me.removeAllEventListeners(),Se.removeAllEventListeners(),ie.removeAllEventListeners(),ft&&t.off("mousedown",ft),De&&t.off("mousedown",De),Ze&&$.off("stagemousedown",Ze),_t&&$.off("stagemousemove",_t),lt&&$.off("stagemousemove",lt),Zt&&$.off("stagemouseup",Zt),vn&&t.off("mousedown",vn),Jt&&t.off("pressmove",Jt),ie=It=Vt=null,t.transformControls=null},controls:ie,scaleControls:Se,stretchXControls:se,stretchYControls:me,rotateControls:j},t.toggle=function($e){return $e===!0?t.transformControls.show():$e===!1||t.transformControls.visible?t.transformControls.hide():t.transformControls.show(),t},t.transformControls.ghost&&(t.transformControls.toggleGhost=function($e){return $e===!0?t.transformControls.showGhost():$e===!1||t.transformControls.visible?t.transformControls.hideGhost():t.transformControls.showGhost(),t}),p?t.transformControls.show():!J&&t.transformControls.ghost&&t.transformControls.showGhost(),t},e.gesture=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R){var C="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect",O;if(O=yt(e.gesture,arguments,C))return O;if(qe("34.5"),n(t)||!t.on)return;n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),n(w)&&(w=!1),n(p)&&(p=1),n(k)&&(k=!1),n(x)&&(x=5),n(T)&&(T=!1),n(S)&&(S=!0),n(b)&&(b=!1),b&&o&&(b=R=null,At&&ut("gesture() - does not support surround when rotate is true")),n(E)&&(E=!1),n(l)&&!n(R)&&(l=R);var I,_,P,F,K=v();if(n(t.zimMaskDynamic)||t.zimMaskApply(),!t.zimTouch){var V=new e.Damp(t.scaleX,.05),D=new e.Damp(t.scaleY,.05),U=t.scaleX/t.scaleY;if(t.zimTouch={move:r,scale:i,rotate:o,pointers:{},checkBounds:function(h,L){if(t.zimTouch.boundary){var q=t.zimTouch.boundary,A=t.parent.localToLocal(h,L,t.parent);b?(h=Math.min(q.x,Math.max(q.x+q.width,A.x)),L=Math.min(q.y,Math.max(q.y+q.height,A.y))):(h=Math.max(q.x,Math.min(q.x+q.width,A.x)),L=Math.max(q.y,Math.min(q.y+q.height,A.y))),A=t.parent.globalToLocal(h,L),h=A.x,L=A.y}return{x:h,y:L}}},l){t.zimTouch.boundary=l,w&&(t.zimTouch.boundary=e.boundsToGlobal(t.parent,l)),t.zimTouch.boundaryStartX=t.zimTouch.boundary.x,t.zimTouch.boundaryStartY=t.zimTouch.boundary.y,t.zimTouch.boundaryStartW=t.zimTouch.boundary.width,t.zimTouch.boundaryStartH=t.zimTouch.boundary.height;var Q=t.zimTouch.checkBounds(t.x,t.y);t.x=Q.x,t.y=Q.y}k&&(P=10,F=5,_=0,I=[],t.zimTouch.slideInterval=e.interval(P/(K=="s"?1e3:1),function(){I[_++%F]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.animate({x:t.x,y:t.y},10/(K=="s"?1e3:1),"quadOut"));var J,N,te,ae,ee,pe,$,X;t.zimTouch.mousedown=t.on("mousedown",function(h){if(n(X)?X=1:X++,S){var L=t.parent.numChildren-1;t.parent.getChildAt(L).type=="Keyboard"&&L--,t.parent.setChildIndex(t,L),t.ZIMoutlineShape&&t.outline()}T||($=null,N=t.scaleX,te=t.scaleY,ae=t.rotation,ee=t.regX,pe=t.regY,t.reg(0,0),J=t.getMatrix(),t.regX=ee,t.regY=pe);var q="id"+Math.abs(h.pointerID+1),A=t.parent.globalToLocal(h.stageX/e.scaX,h.stageY/e.scaY);t.zimTouch.pointers[q]={startX:A.x,startY:A.y,x:A.x,y:A.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(){t.zimTouch.total++})),k&&t.zimTouch.total==1&&t.zimTouch.slideInterval.pause(!1),y()}),t.zimTouch.pressmove=t.on("pressmove",function(h){var L="id"+Math.abs(h.pointerID+1),q=t.parent.globalToLocal(h.stageX/e.scaX,h.stageY/e.scaY);t.zimTouch.pointers[L]&&(t.zimTouch.pointers[L].x=q.x,t.zimTouch.pointers[L].y=q.y);var A=0,Y=0,xe=0,G=0,Z=0,ge=0;if(e.loop(t.zimTouch.pointers,function(ve,Ie){A+=Ie.x-Ie.startX,Y+=Ie.y-Ie.startY,xe+=Ie.x,G+=Ie.y}),t.zimTouch.total!=0){Z=A/t.zimTouch.total,ge=Y/t.zimTouch.total,A=t.zimTouch.startX+Z,Y=t.zimTouch.startY+ge,xe=xe/t.zimTouch.total,G=G/t.zimTouch.total;var he={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation};if(t.zimTouch.move){var ne=t.zimTouch.checkBounds(A,Y);he.x=ne.x,he.y=ne.y}if(t.zimTouch.pair.length==2){var ue=t.zimTouch.pair[0],Te=t.zimTouch.pair[1];if(t.zimTouch.scale){var Fe=Math.sqrt(Math.pow(Te.startX-ue.startX,2)+Math.pow(Te.startY-ue.startY,2)),ie=Math.sqrt(Math.pow(Te.x-ue.x,2)+Math.pow(Te.y-ue.y,2)),Se=t.zimTouch.startSX+(ie/Fe-1),se=t.zimTouch.startSY+(ie/Fe-1);he.scaleX=Se,he.scaleY=se,he.scaleX=V.convert(Se),he.scaleY=D.convert(se);var me=!n(f)&&Math.min(Se,se)<f,j=!n(d)&&Math.max(Se,se)>d;(me||j)&&(me?U>1?(he.scaleY=f,he.scaleX=f*U):(he.scaleX=f,he.scaleY=f/U):j&&(U>1?(he.scaleX=d,he.scaleY=d/U):(he.scaleY=d,he.scaleX=d*U)),V.immediate(he.scaleX),D.immediate(he.scaleY))}if(t.zimTouch.rotate){var _e=Math.atan2(ue.startY-Te.startY,ue.startX-Te.startX)*(180/Math.PI),Re=Math.atan2(ue.y-Te.y,ue.x-Te.x)*(180/Math.PI),de=Re-_e;he.rotation=t.zimTouch.startR+de}if(T)t.scaleX=he.scaleX,t.scaleY=he.scaleY,t.rotation=he.rotation,t.zimTouch.move&&(t.x=he.x,t.y=he.y);else{t.reg(0,0);var Pe=t.parent.localToGlobal(xe,G);xe=Pe.x,G=Pe.y;var Me=n($)?t.globalToLocal(xe,G):t.globalToLocal($.x,$.y),fe=J.clone().translate(Me.x,Me.y).rotate(he.rotation-ae).scale(he.scaleX/N,he.scaleY/te).translate(-Me.x,-Me.y);fe.decompose(t),t.zimTouch.move&&(t.x+=Z,t.y+=ge),$=t.localToGlobal(Me.x,Me.y),t.reg(ee,pe)}t.zimTouch.scale&&t.dispatchEvent("scale"),t.zimTouch.rotate&&t.dispatchEvent("rotate"),t.zimTouch.move&&t.dispatchEvent("move")}else t.x=he.x,t.y=he.y,t.zimTouch.move&&t.dispatchEvent("move");(t.type=="Tag"||t.type=="TextArea"||t.type=="Loader")&&t.resize(),t.ZIMoutlineShape&&t.outline(),t.getStage&&t.stage&&t.stage.update()}}),t.on("mousedown",function(){var h=1;t.stage.on("stagemousedown",function(){h++}),t.stage.on("stagemouseup",function(){h--,h==0&&setTimeout(function(){t.zimTouch&&(t.zimTouch.total=0),t.zimTouch&&(t.zimTouch.pointers={}),X=null},50)})},null,!0),t.zimTouch.pressup=t.on("pressup",function(h){var L="id"+Math.abs(h.pointerID+1);if(delete t.zimTouch.pointers[L],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,o&&!n(p)&&t.zimTouch.total==0&&(p>0?t.rotation=Math.round(t.rotation/p)*p:p==0&&(t.rotation=Math.round(t.rotation))),k&&t.zimTouch.total==0&&X==1){t.zimTouch.slideInterval.pause();var q=I[(_+1)%I.length],A=I[_%I.length],Y=t.x+(q[0]-A[0])*x,xe=t.y+(q[1]-A[1])*x,G=t.zimTouch.checkBounds(Y,xe),Z=F*P*x*Math.min((t.x-G.x)/(t.x-Y)||1,(t.y-G.y)/(t.y-xe)||1);t.animate({x:G.x,y:G.y},Z/(K=="s"?1e3:1),"quadOut",function(){t.dispatchEvent("slidestop")})}t.zimTouch.total==0&&(X=null),t.getStage&&t.stage&&t.stage.update(),y()}),l&&(g(),t.on("move",g))}function y(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(h,L,q){L.startX=L.x,L.startY=L.y,q<=1&&t.zimTouch.pair.push(L)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}function g(){var h=t.localToGlobal(t.regX,t.regY),L;if(E){var q=t.parent.localToGlobal(t.x-t.width/2,t.y-t.height/2),A=t.parent.localToGlobal(t.x+t.width/2,t.y+t.height/2);L={x:q.x,y:q.y,width:A.x-q.x,height:A.y-q.y}}else L=t.boundsToGlobal();var Y={x:t.zimTouch.boundaryStartX+h.x-L.x,y:t.zimTouch.boundaryStartY+h.y-L.y,width:t.zimTouch.boundaryStartW-L.width,height:t.zimTouch.boundaryStartH-L.height};t.gestureBoundary(Y,!1)}return t},e.noGesture=function(t,r,i,o){var l="obj, move, scale, rotate",f;if(f=yt(e.noGesture,arguments,l))return f;if(qe("34.6"),!(n(t)||!t.on||!t.zimTouch))return n(r)&&(r=!0),n(i)&&(i=!0),n(o)&&(o=!0),t.zimTouch.move=!r,t.zimTouch.scale=!i,t.zimTouch.rotate=!o,!t.zimTouch.move&&!t.zimTouch.scale&&!t.zimTouch.rotate&&(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t},e.gestureBoundary=function(t,r,i){if(qe("34.7"),!(n(t)||!t.on)&&!(n(r)||!t.zimTouch)){t.zimTouch.localBoundary&&t.parent?t.zimTouch.boundary=e.boundsToGlobal(t.parent,r):t.zimTouch.boundary=r,n(i)&&(i=!0),i&&(t.zimTouch.boundaryStartX=r.x,t.zimTouch.boundaryStartY=r.y,t.zimTouch.boundaryStartW=r.width,t.zimTouch.boundaryStartH=r.height);var o=t.zimTouch.checkBounds(t.x,t.y);return t.x=o.x,t.y=o.y,t}},e.effect=function(t,r,i,o,l,f){if(qe("33.16"),n(r))return t;n(t.effects)&&(t.effects={}),Array.isArray(r)||(r=[r]);for(var d=0,p=0;p<r.length;p++){var w=r[p];w.type||(w instanceof je.BlurFilter?w.type="BlurEffect":w instanceof je.ColorFilter?w.type="ColorEffect":w instanceof je.AlphaMaskFilter?w.type="AlphaEffect":w instanceof je.ColorMatrixFilter?w.type="MultiEffect":n(w.type)&&(w.type="custom"+d++));var k=w.type.replace(/effect/i,"");t.effects[k.toLowerCase()]=w}t.filters=[];for(var x in t.effects)t.filters.push(t.effects[x]);return t.cache(i,o,l,f),t},e.updateEffects=function(t,r){return qe("33.163"),t.updateCache&&(r?t.cache():t.updateCache()),t},e.noEffect=function(t,r,i){if(qe("33.165"),n(i)&&(i=!1),n(r)){var o;t.effects.multi&&(o=t.effects.multi),t.effects={},o&&(t.effects.multi=o)}else{t.effects||(t.effects={}),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var f=r[l].replace(/effect/i,"");delete t.effects[f.toLowerCase()]}}t.filters=[];for(var d in t.effects)t.filters.push(t.effects[d]);return i||t.filters.length>0?t.updateCache&&t.updateCache():t.uncache&&t.uncache(),t},e.addPhysics=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b){var E="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor",R;if(R=yt(e.addPhysics,arguments,E))return R;if(qe("34.8"),n(T)){if(typeof zimPhysics>"u")return At&&ut("ZIM Physics module must be imported"),t;n(le.zimDefaultPhysics)&&(le.zimDefaultPhysics=new e.Physics),T=le.zimDefaultPhysics}t.physics=T;var C="rectangle";return t.type=="Circle"||t.type=="Dial"?C="circle":t.type=="Triangle"?C="triangle":t.type=="Blob"&&(C="poly"),n(o)&&(o=C),n(w)&&(w=S),be(t,r,i,o,l,f,d,p,w,k,x,b),t},e.removePhysics=function(t){return qe("34.85"),n(t.physics)||(t==t.physics.followObj&&t.physics.follow(null),t.follow=t.noFollow=t.control=t.noControl=t.sleep=t.wake=null,t.impulse=t.force=t.spin=t.torque=null,t.physics.remove(t.body),t.physics=null),t},e.hitTestPoint=function(t,r,i,o){if(e.zimhtp||(qe("35"),e.zimhtp=!0),!t.stage||n(r)||n(i))return!1;if(!(n(t)||!t.globalToLocal)){if(n(o)&&(o=!0),o){var l=t.getBounds();if(l){var f=t.globalToLocal(r,i);if(f.x>l.x+l.width||f.x<l.x||f.y>l.y+l.height||f.y<l.y)return!1}}var d={x:r,y:i};return t.image||t.spriteSheet||t.type=="Shape"?d=t.globalToLocal(d.x,d.y):d=t.globalToLocal(d.x*e.scaX,d.y*e.scaY),t.hitTest(d.x,d.y)}},e.hitTestReg=function(t,r,i){if(e.zimhtr||(qe("36"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(!(n(t)||n(r)||!t.localToLocal||!r.localToLocal)){n(i)&&(i=!0);var o=r.localToGlobal(r.regX,r.regY),l=t.getBounds();if(i&&l){var f=t.globalToLocal(o.x,o.y);if(f.x>l.x+l.width||f.x<l.x||f.y>l.y+l.height||f.y<l.y)return!1}return t.image||t.spriteSheet||t.type=="Shape"?o=t.globalToLocal(o.x,o.y):o=t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y)}},e.hitTestRect=function(t,r,i,o,l){if(e.zimhtr||(qe("37"),e.zimhtr=!0),!t.stage||!r.stage)return!1;if(n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=0),n(o)&&(o=!0);var f=r.getBounds();if(!f){At&&ut("hitTestRect():\n please setBounds() on param b object");return}if(o){var d=t.getBounds();if(d&&!e.hitTestBounds(t,r))return!1}function p(E){if(t.image||t.spriteSheet||t.type=="Shape"?E=t.globalToLocal(E.x,E.y):E=t.globalToLocal(E.x*e.scaX,E.y*e.scaY),t.hitTest(E.x,E.y))return!0}var w=f.x+f.width/2,k=f.y+f.height/2,x=r.localToGlobal(w,k),T,S;if(l){if(!p(x))return!1;for(var b=0;b<=i;b++)if(T=f.width*(b+1)/(i+1),S=f.height*(b+1)/(i+1),x=r.localToGlobal(f.x+T,f.y),!p(x)||(x=r.localToGlobal(f.x+f.width,f.y+S),!p(x))||(x=r.localToGlobal(f.x+f.width-T,f.y+f.height),!p(x))||(x=r.localToGlobal(f.x,f.y+f.height-S),!p(x)))return!1;return!0}else{if(p(x))return!0;for(var b=0;b<=i;b++)if(T=f.width*(b+1)/(i+1),S=f.height*(b+1)/(i+1),x=r.localToGlobal(f.x+T,f.y),p(x)||(x=r.localToGlobal(f.x+f.width,f.y+S),p(x))||(x=r.localToGlobal(f.x+f.width-T,f.y+f.height),p(x))||(x=r.localToGlobal(f.x,f.y+f.height-S),p(x)))return!0}},e.hitTestCircle=function(t,r,i,o,l){if(e.zimhtc||(qe("38"),e.zimhtr=!0),qe("38"),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||!r.getBounds)return;n(i)&&(i=8),n(o)&&(o=!0);var f=r.getBounds();if(!f){At&&ut("hitTestCircle():\n please setBounds() on param b object");return}var d=t.getBounds();if(o&&d&&!e.hitTestBounds(t,r))return!1;function p(C){if(t.image||t.spriteSheet||t.type=="Shape"?C=t.globalToLocal(C.x,C.y):C=t.globalToLocal(C.x*e.scaX,C.y*e.scaY),t.hitTest(C.x,C.y))return!0}var w=f.x+f.width/2,k=f.y+f.height/2,x=r.localToGlobal(w,k),T=(f.width+f.height)/2/2,S,b,E;if(l){if(!p(x))return!1;for(var R=0;R<i;R++)if(S=R/i*2*Math.PI,b=w+T*Math.cos(S),E=k+T*Math.sin(S),x=r.localToGlobal(b,E),!p(x))return!1;return!0}else{if(p(x))return!0;for(var R=0;R<i;R++)if(S=R/i*2*Math.PI,b=w+T*Math.cos(S),E=k+T*Math.sin(S),x=r.localToGlobal(b,E),p(x))return!0}return!1},e.hitTestCircleRect=function(t,r,i){if(e.zimhtcr||(qe("38.2"),e.zimhtcr=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=t.getBounds(),f=r.getBounds();if(!l||!f){At&&ut("hitTestCircleRect():\n please setBounds() on both objects");return}n(i)&&(i=0);var d=(t.radius?t.radius:(l.width+l.height)/2)+i,p=t.getConcatenatedMatrix().decompose().scaleX;d*=p/o.scaleX;var w=r.boundsToGlobal(),k=t.localToGlobal(0,0),x=k.x,T=k.y,S=w.x,b=w.y,E=w.x+w.width,R=w.y+w.height,C=x<S?S:x>E?E:x,O=T<b?b:T>R?R:T,I=C-x,_=O-T;return I*I+_*_<=d*d}}},e.hitTestCircles=function(t,r,i){if(e.zimhtcs||(qe("38.5"),e.zimhtcs=!0),!(!t.stage||!r.stage)){var o=t.stage;if(!(n(t)||n(r)||!t.hitTest||!t.getBounds||!r.getBounds)){var l=t.getBounds(),f=r.getBounds();if(!l||!f){At&&ut("hitTestCircles():\n please setBounds() on both objects");return}n(i)&&(i=0);var d=t.localToGlobal(l.x+l.width/2,l.y+l.height/2),p=r.localToGlobal(f.x+f.width/2,f.y+f.height/2),w=t.getConcatenatedMatrix(),k=r.getConcatenatedMatrix(),x=Math.sqrt(w.a/o.scaleX*w.a/o.scaleX+w.c/o.scaleX*w.c/o.scaleX),T=Math.sqrt(w.b/o.scaleY*w.b/o.scaleY+w.d/o.scaleY*w.d/o.scaleY),S=Math.sqrt(k.a/o.scaleX*k.a/o.scaleX+k.c/o.scaleX*k.c/o.scaleX),b=Math.sqrt(k.b/o.scaleY*k.b/o.scaleY+k.d/o.scaleY*k.d/o.scaleY),E=Math.sqrt(Math.abs(Math.pow(d.x-p.x,2)+Math.pow(d.y-p.y,2)));return l.width*Math.max(x,T)/2+f.width*Math.max(S,b)/2>=E-i}}},e.hitTestBounds=function(t,r,i,o){if(e.zimhtb||(qe("39"),e.zimhtb=!0),!(!t.stage||!r.stage)&&!(n(t)||n(r)||!t.getBounds||!r.getBounds)){var l=!1;o&&o.graphics&&(l=!0);var f=t.getBounds(),d=r.getBounds();if(!f||!d){At&&ut("hitTestBounds():\n please setBounds() on both objects");return}n(i)&&(i=0);var p=e.boundsToGlobal(t),w=e.boundsToGlobal(r);if(l){var k=o.graphics;k.c(),k.ss(1).s("blue"),k.r(p.x,p.y,p.width,p.height),k.s("green"),k.r(w.x,w.y,w.width,w.height),o.stage.update()}return e.rectIntersect(p,w,i)}},e.hitTestPath=function(t,r,i,o,l,f){if(e.zimhtpa||(qe("37.5"),e.zimhtpa=!0),!t.stage||!r.stage||n(t)||n(r)||!t.hitTest||r.type!="Squiggle"&&r.type!="Blob")return;var d=t.getBounds();n(i)&&(i=2),n(o)&&(o=!1),n(l)&&(l=!1),n(f)&&(f=!1);var p=[],w;function k(E){var R;if(t.image||t.spriteSheet||t.type=="Shape"?R=t.globalToLocal(E.x,E.y):R=t.globalToLocal(E.x*e.scaX,E.y*e.scaY),t.hitTest(R.x,R.y))if(l)p.push({x:Math.round(E.x),y:Math.round(E.y)});else if(f)w=T/x.length*100;else return!0}var x=r.interpolate(i,null,!0,null,!0),T,S;if(o)for(r.hitPathPoints?r.hitPathPoints.removeAllChildren():r.hitPathPoints=new e.Container().addTo(),r.hitPathPoints.top(),T=0;T<x.length;T++)S=x[T],S=r.localToGlobal(S.x,S.y),new e.Circle(3).loc(S.x,S.y,r.hitPathPoints);if(d){var b=e.boundsAroundPoints(x);if(!e.rectIntersect(t.boundsToGlobal(d),r.boundsToGlobal(b)))return!1}for(T=0;T<x.length;T++){if(S=x[T],S=r.localToGlobal(S.x,S.y),k(S))return!0;if(w!=null)return w}return p.length>0?p:!1},e.hitTestGrid=function(t,r,i,o,l,f,d,p,w,k,x,T,S){if(e.zimhtg||(qe("41"),e.zimhtg=!0),!t.stage)return!1;if(!n(t)&&!T){var b=t.globalToLocal(f,d);f=b.x,d=b.y}n(p)&&(p=0),n(w)&&(w=0),n(k)&&(k=0),n(x)&&(x=0),r+=k,i+=x;var E=r/o,R=i/l,C=Math.min(o-1,Math.max(0,Math.floor((f-p+k/2)/E))),O=Math.min(l-1,Math.max(0,Math.floor((d-w+x/2)/R)));if(!(S!="open"&&(f-p>E*(C+1)-k||f-p<E*C||d-w>R*(O+1)-x||d-w<R*O))){var I=O*o+C;if(n(S)||S=="index")return I;if(S=="col")return C;if(S=="row")return O;if(S=="array"||S=="open")return[I,C,O]}},e.animate=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j,_e,Re){var de="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startCall, startParams, animateCall, animateParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall";if(t&&(t.props||t.obj)){var Pe;if(Pe=yt(e.animate,arguments,de))return Pe}if(t.type=="AC"&&le.zdf)return le.zdf.ac("animate",arguments),t;if(e.animateCheck||(qe("45"),e.animateCheck=!0),!t)return;var Me=e.ANIMATE;if(le.ANIMATE!=null&&(Me=le.ANIMATE),!Me)return n(Re)&&(Re=!0),l&&Re&&typeof l=="function"&&l(n(f)?t:f),t;n(_e)&&(_e=!0);var fe=v(null,j,null,null,n(_e)?!1:!_e);(x||S||T)&&(k=!0),(V||_||V||D||I)&&(O=!0);var ve,Ie,we,Xe=arguments,ye=Array.prototype.slice.call(arguments);if(n(r)&&!n(ue)&&(r=ue),ue=r,n(ue))return At&&ut("animate() - need props"),t;if(t.type=="BeadsContainer"&&n(te)&&(te=0),t.type=="Tone"&&(Se=!1),Se===!1?e.pauseAnimateOnBlur=!1:(Se||n(Se)&&e.pauseAnimateOnBlur!==!1)&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseAnimateOnBlur=!0),!(!n(te)&&t.addChild)){i=e.Pick.choose(i),o=e.Pick.choose(o),d=e.Pick.choose(d),x=e.Pick.choose(x),T=e.Pick.choose(T),O=e.Pick.choose(O),I=e.Pick.choose(I),n(V)?V=i:V=e.Pick.choose(V),pe=e.Pick.choose(pe),L=e.Pick.choose(L),q=e.Pick.choose(q);var Ge=["loopCount","loopWait","rewind","rewindWait"];for(Ie in X)Ge.indexOf(Ie)>=0&&(X[Ie]=e.Pick.choose(X[Ie]))}var He={override:!n(t)&&!n(t.zimX)&&!n(ue.x)||!n(t)&&!n(t.zimY)&&!n(ue.y)};n(k)||(He.loop=k),n(x)||(He.count=x),n(T)||(He.loopWait=T),n(S)||(He.loopCall=S),n(R)||(He.loopWaitParams=R),n(E)||(He.loopWaitCall=E),n(b)||(He.loopParams=b),n(C)||(He.loopPick=C),n(O)||(He.rewind=O),n(I)||(He.rewindWait=I),n(_)||(He.rewindCall=_),n(P)||(He.rewindParams=P),n(F)||(He.rewindWaitCall=F),n(K)||(He.rewindWaitParams=K),n(U)||(He.startCall=U),n(Q)||(He.startParams=Q),n(J)||(He.animateCall=J),n(N)||(He.animateParams=N),n(r)||(He=e.merge(He,X)),X=He,e.loop(ue,function(Ne,pt){if(typeof Ne=="string"){var Ct=Ne.split(".");if(Ct.length>1&&Ne.substr(0,1)!="."&&(ue["."+Ne]=pt,delete ue[Ne],Ne="."+Ne),Ct.length>1&&typeof pt=="string"){var Et=pt.substr(0,1);Et!="+"&&Et!="-"&&(ue[Ne]="+"+pt)}}});function Oe(Ne,pt){if(pt.substr(0,1)=="."){for(var Ct=pt.split("."),Et=Ne,Yt=1;Yt<Ct.length;Yt++)Et=Et[Ct[Yt]];return Et}else return pt=="transform"&&Ne.style?Ne.style.transform:Ne[pt]}function ce(Ne,pt,Ct){if(pt.substr(0,1)=="."){for(var Et=pt.split("."),Yt=Ne,Ut=1;Ut<Et.length-1;Ut++)Yt=Yt[Et[Ut]];Yt[Et[Et.length-1]]=Ct}else Ne[pt]=Ct}if(t.zimTweenOriginals={},!n(te)&&t.addChild){var Ue=[];for(ve=0;ve<t.numChildren;ve++)Ue.push(t.getChildAt(ve));xe=t,t=Ue}var Qe=["extra","zoom","speed","layer","fade"],Je={zoom:t.type=="Pen"?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(t instanceof Array){for(pe&&t.reverse(),ve=0;ve<t.length;ve++){var nt=t[ve];if(L){var gt;nt.zimObj={};for(Ie in ue){if(Qe.indexOf(Ie)>=0?gt=ue[Ie]:gt=e.Pick.choose(ue[Ie]),nt.zimObj[Ie]=nt[Ie],typeof gt=="string"&&Ie!="transform"){var We;nt.zimLastObj&&!n(nt.zimLastObj[Ie])?We=nt.zimLastObj[Ie]:We=nt[Ie],gt=We+Number(gt.replace(/\s/g,""))}nt.zimLastObj&&(nt.zimLastObj[Ie]=O?nt.zimTweenOriginals[Ie]:ue[Ie]),nt[Ie]=gt}}else{nt.zimObj={};for(Ie in ue)Qe.indexOf(Ie)>=0,nt.zimObj[Ie]=ue[Ie]}var st=ve*te;ve==0&&te!=0&&(st=fe=="s"?.02:20),e.animate(nt,nt.zimObj,i,o,ve==t.length-1?l:null,ve==t.length-1?f:null,d,p,w,null,null,null,null,null,null,null,C,null,null,null,null,null,null,V,D,U,Q,J,N,null,ae,ee,null,$,e.copy(X),y,g,h,null,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,st,ie,Se,se,me,j,_e,Re)}return xe}var at=i,Ae=V;n(at)&&(at=fe=="s"?1:1e3),n(V)&&(V=Ae=at),n(o)&&(o="quadInOut"),n(d)&&(d=0),n(I)&&(I=0),n(X)&&(X={override:!n(t.zimX)&&!n(ue.x)||!n(t.zimY)&&!n(ue.y)}),n(f)&&(f=t),n($)&&($=!0),n(y)&&(y=!1),n(g)&&(g=!1),n(L)&&(L=!1),n(q)&&(q={}),q.scale&&(q.scaleX=q.scaleY=q.scale,delete q.scale),n(h)||(X.override=h),n(Z)&&(Z=!1),n(he)&&(he=!!Z),n(G)&&(G=!1),n(ge)&&(ge=!0),n(ne)&&(ne=!0),n(ie)&&(ie=1),t.futureRate=ie;var Le,De,ft;if(ue instanceof Array){if(we=1,ue.length==0)return this;var mt,Ze;return ot(),Kt(),dt(),t}function dt(){t.zimLastObj&&e.loop(t.zimLastObj,function(En){n(t.zimTweenOriginals[En])||(t[En]=t.zimTweenOriginals[En],t.zimLastObj[En]=t.zimTweenOriginals[En])});for(var Ne,pt=d,Ct=0,Et,Yt,Ut=0;Ut<ue.length;Ut++)if(Ne=ue[Ut],!n(Ne.target)){n(Ne.time)&&(Ne.time=at),pt+=Ne.wait?Ne.wait:0,Et=Ne.time,Yt=n(Ne.rewindTime)?Et:Ne.rewindTime,Ne.rewind&&(Et=Et+Yt+(Ne.rewindWait?Ne.rewindWait:0)),Ne.loop&&(Et*=Ne.loopCount,Et+=(Ne.loopCount-1)*(Ne.loopWait?Ne.loopWait:0)),n(Ne.params)&&(Ne.params=Ne.target),Ze=Ne.target,pt<0&&(Ct+=pt,pt=0);var gn={target:Ne.target,obj:e.copy(Ne.obj),seriesWait:Ct,wait:pt,waitedCall:Ne.waitedCall,waitedParams:Ne.waitedParams,time:Ne.time,ease:Ne.ease,from:Ne.from,rewind:Ne.rewind,call:Ne.call,params:Ne.params,loop:Ne.loop,loopCount:Ne.loopCount,loopWait:Ne.loopWait,loopCall:Ne.loopCall,loopParams:Ne.loopParams,loopWaitCall:Ne.loopWaitCall,loopWaitParams:Ne.loopWaitParams,loopPick:Ne.loopPick,rewindWait:Ne.rewindWait,rewindCall:Ne.rewindCall,rewindParams:Ne.rewindParams,rewindWaitCall:Ne.rewindWaitCall,rewindWaitParams:Ne.rewindWaitParams,rewindTime:Ne.rewindTime,rewindEase:Ne.rewindEase,startCall:Ne.startCall,startParams:Ne.startParams,animateCall:Ne.animateCall,animateParams:Ne.animateParams,set:e.copy(Ne.masterSet),events:Y,rate:t.futureRate,pauseOnBlur:Ne.pauseOnBlur,easeAmount:Ne.easeAmount,easeFrequency:Ne.easeFrequency,override:!1,id:A};Ut==ue.length-1&&Ee(gn),e.animate(gn),Ct+=pt+Et,pt=0}}function Ee(Ne){var pt=Ne.call,Ct=Ne.params;X.loop&&(!X.count||we<X.count)?Ne.call=function(){pt&&typeof pt=="function"&&pt(Ct),X.loopCall&&typeof X.loopCall=="function"&&X.loopCall(X.loopParams),X.loopWait?(n(t.zimTweens)&&(t.zimTweens={}),Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,{override:X.override}).wait(X.loopWait,!0).call(Et),Le.timeScale=t.futureRate):Et();function Et(){for(var Yt=0;Yt<mt.objects.length;Yt++)mt.objects[Yt].set&&mt.objects[Yt].set(mt.values[Yt]);X.loopWaitCall&&typeof X.loopWaitCall=="function"&&X.loopWaitCall(X.loopWaitParams),dt()}}:Ne.call=function(){pt&&typeof pt=="function"&&pt(Ct),n(f)&&(f=Ze),l&&typeof l=="function"&&l(f),t.zimLastObj=null},we++}function ot(){t&&!t.seriesTweens&&(t.seriesTweens=[],t.seriesCalls=[],t.seriesParams=[]);for(var Ne,pt=0;pt<ue.length;pt++)Ne=ue[pt],Ne.target?(Ne.target.seriesTweens||(Ne.target.seriesTweens=[]),Ne.target.seriesCalls||(Ne.target.seriesCalls=[]),Ne.target.seriesParams||(Ne.target.seriesParams=[]),Ne.target.seriesTweens.push(Ne.props),Ne.target.seriesCalls.push(Ne.call),Ne.target.seriesParams.push(Ne.params)):(t.seriesTweens.push(Ne.props),t.seriesCalls.push(Ne.call),t.seriesParams.push(Ne.params));t.seriesCalls.push(l),t.seriesParams.push(f),Ne=ue[0];var Ct;for(t?Ct=t:Ct=Ne.target,Ct.zimSeriesOriginals={},pt=ue.length-1;pt>=0;pt--)Ne=ue[pt],n(Ne.props)&&!n(Ne.obj)&&(Ne.props=Ne.obj),Ne.obj=Ne.props,e.loop(Ne.obj,function(fr){fr=="path"?Ct.zimSeriesOriginals[fr]=ue[fr]:Ct.zimSeriesOriginals[fr]=Oe(Ct,fr)});var Et=new e.Dictionary;for(mt=new e.Dictionary,pt=0;pt<ue.length;pt++)if(Ne=ue[pt],t||(t=Ne.target),n(Ne.target)&&(Ne.target=t),n(Ne.ease)&&(Ne.ease=o),!n(Ne.target)){if(pt==0&&(Ne.target.zimSeriesArgs=Xe),n(Ne.props)&&!n(Ne.obj)&&(Ne.props=Ne.obj),Ne.obj=Ne.props,Ne.loop&&(n(Ne.loopCount)||Ne.loopCount<=0)&&(Ne.loopCount=0,ue.splice(pt+1,ue.length)),n(Ne.obj.scale)||(Ne.obj.scaleX=Ne.obj.scaleY=Ne.obj.scale,delete Ne.obj.scale),Ne.from){var Yt=Et.at(Ne.target);if(Yt){if(Ne.set){var Ut=e.copy(Ne.obj),gn=e.merge(Yt,Ne.set);Ne.obj=Zt(Ne.target,Ne.obj,gn),Ne.set=e.merge(Ne.set,Ut)}else Ne.set=e.copy(Ne.obj),Ne.obj=Zt(Ne.target,Ne.obj,Yt);Ne.from=!1}else Et.add(Ne.target,Zt(Ne.target,Ne.obj,Ne.set))}var En={};for(var Gn in Ne.obj)En[Gn]=Ne.set&&Ne.set[Gn]?Ne.set[Gn]:Ne.target[Gn];n(mt.at(Ne.target))&&mt.add(Ne.target,{});var ir=e.merge(mt.at(Ne.target),En);mt.remove(Ne.target),mt.add(Ne.target,ir),Ne.masterSet=e.copy(Ne.set)}n(t.zimTweens)&&(t.zimTweens={})}if(ue&&(ue.x&&(t.zimX=!0),ue.y&&(t.zimY=!0)),!n(ue.shape)&&ue.shape.type==t.type&&(t.type=="Blob"||t.type=="Squiggle")){var Ve=t.pointObjects,Ye=ue.shape.pointObjects;if(Ve.length!=Ye.length)At&&ut("animate() - shapes must be of same number of points"),delete ue.shape;else{delete ue.shape;var Ke=n(ue.blobShift)?0:ue.blobShift;delete ue.blobShift;var ze=!0;for(ve=0;ve<Ve.length;ve++){var tt=Ve[ve],ht=Ye[(Ve.length*2e4+ve+Ke)%Ve.length];for(Fn=0;Fn<4;Fn++)if(Fn!=1){var Be=tt[Fn],it=e.copy(ye);it[0]=Be,it[1]={x:ht[Fn].x,y:ht[Fn].y,rotation:ht[Fn].rotation},ze&&(it[37]=!0,Be.animateEvent&&Be.off("animation",Be.animateEvent),Be.animateEvent=Be.on("animation",function(){t.update()})),ze=!1,e.animate.apply(e.animate,it)}}if(e.isEmpty(ue))return t}}if(n(t))return;t.tweenStates||(t.tweenStates={all:!0});var vt=!1;if(ue.note){if(Array.isArray(ue.note))e.loop(ue.note,function(Ne,pt){typeof Ne=="string"&&(ue.note[pt]=e.Synth.note(Ne))});else if(ue.note.min)ue.note.min=e.Synth.note(ue.note.min),ue.note.max=e.Synth.note(ue.note.max);else if(ue.note.array)e.loop(ue.note.array,function(Ne,pt){typeof Ne=="string"&&(ue.note.array[pt]=e.Synth.note(Ne))});else if(typeof ue.note=="function"){if(At)return ut("animate() - use frequency in ZIM VEE functions not note"),t}else ue.note=e.Synth.note(ue.note);ue.frequency=ue.note,delete ue.note}function et(Ne,pt){return!!Object.getOwnPropertyDescriptor(Ne,pt).get}(t.type=="Sprite"||!Object.prototype.hasOwnProperty.call(t,"paused"))&&(Object.defineProperty(t,"paused",{get:function(){return t.animatePaused},set:function(Ne){t.animatePaused=Ne}}),t.type!=null&&(t.paused=!0),t.animating=!1),t.endTween=function(Ne,pt){if(t.stopAnimate(pt),Ne!="all"&&Ne!="main"&&Ne!="none"&&(Ne="all"),!t.seriesTweens)e.loop(t.zimLastObj,function(Et){typeof t.zimLastObj[Et]=="string"&&Et!="transform"&&(t.zimLastObj[Et]=t[Et]+Number(t.zimLastObj[Et].replace(/\s/g,""))),ce(t,Et,t.zimLastObj[Et])}),Ne!="none"&&l&&l(f);else{if(e.loop(t.seriesTweens,function(Et,Yt){e.loop(Et,function(Ut){typeof Et[Ut]=="string"&&Ut!="transform"&&(Et[Ut]=t[Ut]+Number(Et[Ut].replace(/\s/g,""))),ce(t,Ut,Et[Ut])}),Ne=="all"&&t.seriesCalls[Yt]&&t.seriesCalls[Yt](t.seriesParams[Yt])}),Ne!="none"){var Ct=t.seriesCalls[t.seriesCalls.length-1];Ct&&Ct(t.seriesParams[t.seriesParams.length-1])}t.seriesTweens=null,t.seriesCalls=null,t.seriesParams=null}return t.stage&&t.stage.update(),t};var wt=!1;if(e.loop(ue,function(Ne,pt){Ne=="path"?t.zimTweenOriginals[Ne]=ue[Ne]:t.zimTweenOriginals[Ne]=Oe(t,Ne),Ne.match("hue")?(ue.hueBatch=pt,delete ue.hue,wt=!0):Ne.match("saturation")?(ue.saturationBatch=pt,delete ue.saturation,wt=!0):Ne.match("brightness")?(ue.brightnessBatch=pt,delete ue.brightness,wt=!0):Ne.match("contrast")?(ue.contrastBatch=pt,delete ue.contrast,wt=!0):Ne.match(/^.effects/)&&(wt=!0)}),t.resetTween=function(Ne){n(Ne)&&(Ne=!0),t.pauseAnimate(),t.percent=null,t.startPercent=null;var pt=t.zimSeriesOriginals?t.zimSeriesOriginals:t.zimTweenOriginals;return e.loop(pt,function(Ct){if(Ct=="path"){t.percentComplete=0,t.zimPath=pt[Ct];var Et;t.zimStartPercent,Et=t.zimPath.getCurvePoint(t.zimStartPercent/100),t.loc(Et.x,Et.y)}else ce(t,Ct,pt[Ct])}),t.zimLastObj=null,t.stage&&t.stage.update(),t.stopAnimate(),t.zimPath&&(ye[1].path=t.zimPath),n(t.zimStartRotation)||(t.rotation=t.zimStartRotation),t.zimStartRotation=null,n(t.zimStartScaleX)||(t.scaleX=t.zimStartScaleX),t.zimStartScaleX=null,n(t.zimStartScaleY)||(t.scaleY=t.zimStartScaleY),t.zimStartScaleY=null,e.animate.apply(null,t.zimSeriesArgs?t.zimSeriesArgs:ye),t.pauseAnimate(Ne),t},t.replayTween=function(){return t.resetTween(!1),t},ue.path||G){var xt;t.requestedPercentComplete?xt=t.requestedPercentComplete:t.percentComplete&&!et(t,"percentComplete")&&(xt=t.percentComplete),t.requestedPercentComplete=null,n(xt)&&(xt=0),t.pathRatio=0,t.zimStartRotation=t.rotation,t.percent=null,t.parent&&t.parent.type=="BeadsContainer"||(t.startPercent=null)}y&&($=!1),n(t.zimTweens)&&(t.zimTweens={});var _t;if(y||(t.stage?_t=t.stage:le.zdf?_t=le.zdf.stage:y=!0),t.setColorRange&&!n(ue.color)){var lt=ue.color;delete ue.color,ue.colorRange=1,t.setColorRange(t.color,lt),t.colorRange=0}else if(ue.color&&(t.material||t.isMaterial)){if(t.isMaterial)return ut("ZIM animate - please animate the color on the mesh not the material"),t;var Dt=t;Dt.cT&&e.Ticker.remove(Dt.cT),t={val:0,zimTweens:{},ticker:Dt.cT};var Pt=Dt.material.color.getHexString(),It=ue.color;if(ue={val:1},Dt.cT=e.Ticker.add(function(){var Ne=e.colorRange("#"+Pt,It,t.val);Dt.material.color.set(Ne)}),l){var Vt=l;l=function(){Dt.cT==t.ticker&&(Vt(callParams||Dt),e.Ticker.remove(Dt.cT),Dt.cT=null,t=null)}}else l=function(){Dt.cT==t.ticker&&(e.Ticker.remove(Dt.cT),Dt.cT=null,t=null)}}var Gt={};for(ve in ue)Qe.indexOf(ve)>=0||(Gt[ve]=e.copy(ue[ve]),ue[ve]=e.Pick.choose(ue[ve]));n(ue.scale)||(ue.scaleX=ue.scaleY=e.Pick.choose(ue.scale),delete ue.scale);for(var jt in ue){if(!t.zimBusy)break;t.zimBusy[jt]&&delete ue[jt]}if(e.isEmpty(ue))return;t.type!="Sprite"&&(t.type!=null&&(t.paused=!1),t.animating=!0);function sn(){t.zimMouseEnabledCheck||(t.zimMouseEnabledCheck=!0,t.zimLastMouseEnabled=t.mouseEnabled),t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var Ne in ue)t.zimBusy[Ne]=!0;t.zimMouseEnabledCheck=null,t.mouseEnabled=t.zimLastMouseEnabled},70)}(g||X.loop||X.rewind)&&sn(),Kt();function Kt(){n(A)?A=e.makeID(null,10):(A=String(A),ft=A),n(t.zimIdSets)&&(t.zimIdSets={}),n(t.zimIdSets[A])?t.zimTweens&&!n(t.zimTweens[A])&&(De=A,A=e.makeID(null,10),t.zimIdSets[De]=[De],t.zimTweens[De].zimIdSet=De,t.zimIdSets[De].push(A)):(De=A,A=e.makeID(null,10),t.zimIdSets[De].push(A))}Qe.shift();for(ve in q)q[ve]=e.Pick.choose(q[ve]);for(ve in X)ve=="waitedCall"||ve=="waitedParams"||ve=="loopCall"||ve=="rewindCall"||ve=="loopWaitCall"||ve=="rewindWaitCall"||ve=="startCall"||ve=="animateCall"||(X[ve]=e.Pick.choose(X[ve]));Lt();function Lt(){rt(),bt(),t.seriesTweens&&(t.seriesTweens[0]=ue),L&&!vt&&(ue=Zt(t,ue,q,!0))}function Qt(){rt(),L&&!vt&&(ue=Zt(t,ue,q,!0))}function rt(){var Ne;t.zimLastObj||(t.zimLastObj={});for(ve in ue){if(typeof ue[ve]=="string"&&ve!="transform"){if(ve.substring&&ve.substring(0,1)=="."){if(ue[ve].substr(0,1)=="+"||ue[ve].substr(0,1)=="-")continue}else if(ue[ve].substr(0,1)=="+")continue;if(ue[ve].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[ve])?Ne=t.zimLastObj[ve]:Ne=t[ve],ue[ve]=Ne+Number(ue[ve].replace(/\s/g,""))}t.zimLastObj[ve]=O?t.zimTweenOriginals[ve]:ue[ve]}}function bt(){var Ne;for(ve in q){if(typeof q[ve]=="string"&&ve!="transform"){if(ve.substring&&ve.substring(0,1)=="."){if(q[ve].substr(0,1)=="+"||q[ve].substr(0,1)=="-")continue}else if(q[ve].substr(0,1)=="+")continue;if(q[ve].substr(0,3)=="rgb")continue;t.zimLastObj&&!n(t.zimLastObj[ve])?Ne=t.zimLastObj[ve]:Ne=t[ve],q[ve]=Ne+Number(q[ve].replace(/\s/g,""))}t.zimLastObj[ve]=O?t.zimTweenOriginals[ve]:ue[ve]}}t.getBounds&&n(t.percentCompleteCheck)&&(t.percentCompleteCheck=!0,t._percentComplete=0,Object.defineProperty(t,"percentComplete",{get:function(){if(t.paused)return t._percentComplete;if(t.tweenStartTime&&t.tweenEndTime){var Ne=Date.now(),pt;return X.loop&&Ne>t.tweenEndTime?pt=(Ne-t.tweenStartTime)%(t.tweenEndTime-t.tweenStartTime):pt=Ne-t.tweenStartTime,Math.max(0,Math.min(100,pt/(t.tweenEndTime-t.tweenStartTime)*100))}else return 0},set:function(Ne){this.zimTween?(rn=!0,Rt(Ne,!0)):this.requestedPercentComplete=Ne,t._percentComplete=Ne}}),Object.defineProperty(t,"percentCompleteNoAngle",{get:function(){if(t.tweenStartTime&&t.tweenEndTime){var Ne=Date.now(),pt;return X.loop&&Ne>t.tweenEndTime?pt=(Ne-t.tweenStartTime)%(t.tweenEndTime-t.tweenStartTime):pt=Ne-t.tweenStartTime,Math.max(0,Math.min(100,pt/(t.tweenEndTime-t.tweenStartTime)*100))}else return 0},set:function(Ne){this.zimTween?Rt(Ne,!1):this.requestedPercentComplete=Ne,t._percentComplete=Ne}})),Object.defineProperty(t,"rate",{get:function(){return t.futureRate},set:function(Ne){t.futureRate=Ne,e.loop(t.zimTweens,function(pt,Ct){Ct.timeScale=Ne})},configurable:!0});function Rt(Ne,pt){t.zimTween.startPaused=!1,G?n(t.zimTween.currentTime)||(t.zimTween.currentTime=t.zimTween.currentTime-t.zimTween.position+Ne*t.zimTween.duration/100):t.zimTweens?e.loop(t.zimTweens,function(Ct,Et,Yt){var Ut=t.tweenStartTime+(t.tweenEndTime-t.tweenStartTime)*Ne/100,gn;Et.zimLoop&&Ut<=Et.startTime?gn=0:Et.zimLoop&&Ut>Et.startTime+Et.duration?gn=(Ut-Et.startTime)%Et.duration:gn=Ut-Et.startTime,Et.percentComplete=Math.max(0,Math.min(100,gn/Et.duration*100))}):t.zimTween.setPosition(Math.round(Ne*t.zimTween.duration/100)),pt&&Mt&&ue.orient!==!1&&Mt.getCurvePoint&&(t.rotation=Mt.getCurvePoint(t.pathRatio,null,null,!0).angle+(An||0)),rn&&typeof Xt<"u"&&(Xt=Ne),t.handlePath&&t.handlePath()}var Mt,Nt,kt,Bt;if(!n(ue.path)&&ue.path.segmentPoints){n(ue.orient)&&(ue.orient=!0),ue.orient&&n(ue.flip)&&(ue.flip=!0),t.type=="Pen"&&(t.infinite=!0),t.zimOnPath=!0,n(t.pathRatio)&&(t.pathRatio=0),ue.orient&&(ue.orient=ue.path,ue.startOrient=ue.rotation),Mt=ue.path,Z?(delete ue.path,delete ue.percent,(At&&t.startPercent&&t.startPercent>0||t.percent&&t.percent!=100)&&ut("ZIM.animate() - startPercent and percent currently not supported with drag on path"),Nt=Mt.getCurvePoint(t.pathRatio,$e,Bt),Nt&&(kt=t.parent.globalToLocal(Nt.x,Nt.y),t.x=kt.x,t.y=kt.y)):(n(t.startPercent)&&(t.startPercent=e.Pick.choose(n(ue.startPercent)?0:ue.startPercent)),n(t.percent)&&(t.percent=e.Pick.choose(n(ue.percent)?100:ue.percent)),delete ue.path,delete ue.percent);var Wt=!Mt.lockControls;delete ue.path,ue.pathRatio=1}function Zt(Ne,pt,Ct,Et){vt=!0,Mt&&(!n(Ne.percentComplete)||Ct&&!n(Ct.percentComplete))&&(Ct||(Ct={}),n(Ct.pathRatio)&&(Ct.pathRatio=n(Ct.percentComplete)?Ne.percentComplete/100:Ct.percentComplete/100));var Yt={};for(ve in pt)Ct&&!n(Ct[ve])?Yt[ve]=Ct[ve]:Yt[ve]=Ne[ve],Et&&(Ne[ve]=pt[ve]);return Yt}var en=!0,Ht=!1,vn=!0,Jt=!0;n(ue.redirect)||(Jt=ue.redirect,delete ue.redirect);function Sn(Ne){var pt=Mt.globalToLocal(Ne.rawX/e.scaX,Ne.rawY/e.scaY),Ct=mn;Mt.type=="Blob"&&(Cn[0]<Cn[4]?an=!0:Cn[0]>Cn[4]&&(an=!1),Ct<10&&!an?(bn=mn=Ct=Ft-5,Jn.immediate(bn/Ft*100),Cn=[Ft-1,Ft-2,Ft,Ft-3,Ft-4]):Ct>Ft-10&&an&&(bn=mn=Ct=5,Jn.immediate(bn/Ft*100),Cn=[0,0,0,0,0]));var Et={x:pt.x,y:pt.y,r:Ct};pn.sort(function(Yt,Ut){var gn={x:Yt.x,y:Yt.y,r:Yt.r*Ft},En={x:Ut.x,y:Ut.y,r:Ut.r*Ft},Gn=Math.sqrt(Math.pow(Et.x-gn.x,2)+Math.pow(Et.y-gn.y,2)+Math.pow(Et.r-gn.r,2)),ir=Math.sqrt(Math.pow(Et.x-En.x,2)+Math.pow(Et.y-En.y,2)+Math.pow(Et.r-En.r,2));return Gn-ir}),bn=pn[0].r*Ft,Xt=bn/Ft*100,Xt=e.constrain(Xt,0,99.95),O&&(Xt/=2,Le.position>Le.duration/2&&(Xt=100-Xt))}if(Mt){var $e;Wt||(Bt=e.copy(Mt.segmentPoints),$e=e.copy(Mt.segmentRatios)),t.currentPercent=t.startPercent+t.percent*t.pathRatio;var Tt=(1e6+t.currentPercent)%100/100;if(Nt=Mt.getCurvePoint(Tt,$e,Bt),t.parent&&Nt&&(kt=t.parent.globalToLocal(Nt.x,Nt.y),t.x=kt.x,t.y=kt.y),Z){o="linear",t.cur("pointer");var Xt=t.percentComplete,$t=!1,cn=!0,an=!0,zt=Xt,St=10;Bt=e.copy(Mt.segmentPoints);var Ft=0;e.loop(Bt,function(Ne){Ft+=e.distanceAlongCurve(Ne)});var hn=Math.round(Ft/Bt.length/St),pn=Mt.interpolate(hn,null,!0,null,!0),mn=(Xt||0)/100*Ft,bn=mn;Mt.zimAnimateChanged=!1,t.zimAnimatePathChange=Mt.on("change",function(){Mt.zimAnimateChanged=!0}),t.zimAnimatePathDown=Mt.on("mousedown",function(){$t=!0,t.paused==!0&&(Ht=!0)}),t.zimAnimatePathUp=Mt.on("pressup",function(){Ht=!1}),t.zimAnimateDragDown=t.on("mousedown",function(Ne){_t=Ne.target.stage,t.amu||(t.amu=_t.frame.on("mouseupplus",function(){Ht=!1})),_t.mouseMoveOutside=!0,en=!1,vn=!0,setTimeout(function(){en=!0},50),Ht=!0,Mt.zimAnimateChanged&&(Bt=e.copy(Mt.segmentPoints),Ft=0,e.loop(Bt,function(Ct){Ft+=e.distanceAlongCurve(Ct)}),hn=Math.round(Ft/Bt.length/St),pn=Mt.interpolate(hn,null,!0,null,!0)),Mt.zimAnimateChanged=!1,Xt=t.percentComplete,Jn.immediate(Xt);var pt=Xt;O&&(Le.position>Le.duration/2?pt=(100-Xt)*2:pt=Xt*2),mn=(pt||0)/100*Ft,bn=mn});var ar=!1;t.zimAnimateDragPress=t.on("pressmove",function(Ne){ar=!0,Sn(Ne)}),t.animateReturn=function(){if(!O){At&&ut("animate() - animateReturn() needs rewind set to true");return}cn=!1,an=!1,t.percentComplete<50&&(t.percentComplete=100-t.percentComplete),t.pauseAnimate(!1)},t.zimAnimateDragUp=t.on("pressup",function(){t.paused==!1&&(Ht=!1),en=!1,setTimeout(function(){en=!0},50),Cn[0]<Cn[4]?an=!0:Cn[0]>Cn[4]&&(an=!1),!t.paused&&O&&Jt&&an!=cn&&(t.percentComplete=100-t.percentComplete,cn=an)});var Jn=new e.Damp(Xt,.15),tr=0,pr=0,Cn=[0,0,0,0,0],rn=!1;t.zimDragAnimateTicker=e.Ticker.add(function(){var Ne;Z&&(++pr%20&&(Cn.push(bn),Cn.shift()),mn=bn,$t&&(Xt=t.percentComplete),Ht||vn&&t.paused==!0?($t||rn||Mt.type=="Blob"&&Math.abs(tr-Xt)>(O?45:90)?($t=!1,Ne=Xt,Jn.immediate(Ne),rn=!1):Ne=Jn.convert(Xt),Math.abs(tr-Ne)>.1?(t.percentCompleteNoAngle=Ne,tr=Ne):(t.percentCompleteNoAngle=Ne,vn=!1,ar=!1)):vn=!1)},_t)}}var tn;if(ue.orient){if(ue.orient===!0){var or=t.parent.localToGlobal(n(ue.x)?t.x:ue.x,n(ue.y)?t.y:ue.y);ue.orient={x:or.x,y:or.y}}tn=ue.orient,delete ue.orient;var An=t.rotation;if(t.rotation=Mt.getPointAngle(0)+An,tn!=Mt){var nn;tn.parent?nn=tn.parent.localToLocal(tn.x,tn.y,t.parent):nn=t.parent.globalToLocal(tn.x,tn.y),t.rotation=e.angle(t.x,t.y,nn.x,nn.y)+An}}var nr=t.scaleX,qn=t.scaleY,Bn=ue.flip!=null?ue.flip:!1,Un=ue.flipVertical!=null?ue.flipVertical:!1,Yn=t.x,Pn=t.y,In=0;X.loop&&(n(X.count)||(In=X.count,delete X.count,we=1));var qt=0;X.loopWait&&(qt=X.loopWait,T=X.loopWait,delete X.loopWait);var ln;X.loopCall&&(ln=X.loopCall,delete X.loopCall);var on=t;X.loopParams&&(on=X.loopParams,delete X.loopParams),le.TIMECHECK&&_e&&(at&&a(at,fe),Ae&&a(Ae,fe),d&&a(d,fe),Vn&&a(Vn,fe),qt&&a(qt,fe),T&&a(T,fe),X.rewindWait&&a(X.rewindWait,fe),Te&&a(Te,fe),Fe&&a(Fe,fe)),fe=="s"&&(at&&(at*=1e3),Ae&&(Ae*=1e3),d&&(d*=1e3),Vn&&(Vn*=1e3),qt&&(qt*=1e3),T&&(T*=1e3),X.rewindWait&&(X.rewindWait*=1e3),Te&&(Te*=1e3),Fe&&(Fe*=1e3));var xn=at;X.rewind&&(xn+=Ae),t.zimTweenArgs={time:xn,wait:d,wait2:Vn,wait3:qt,loopWait:T,rewindWait:X.rewindWait,seriesWait:Te,sequenceWait:Fe};function Ln(){if(qt>0&&(t.waiting=!1),!!X.loop){if(ae&&typeof ae=="function"){var Ne=n(ee)?t:ee;ae(Ne)}if(ln&&typeof ln=="function"&&ln(on||t),C){var pt=e.Pick.choose(t.futureRate);n(t.futureRate)||(Le.timeScale=pt);var Ct;if(n(Gt.scale)||(Ct=e.Pick.choose(Gt.scale)),!L&&Le.step&&Le.step.prev&&Le.step.prev.props){for(var Et in Le.step.prev.props)if(!(Qe.indexOf(Et)>=0)){var Yt=e.Pick.choose(Gt[Et]);if(typeof Yt=="string"&&Et!="transform"&&Yt.substr(0,1)!="+"&&Yt.substr(0,1)!="-"){var Ut;t.zimLastObj&&!n(t.zimLastObj[Et])?Ut=t.zimLastObj[Et]:Ut=t[Et],Yt=Ut+Number(Yt.replace(/\s/g,""))}t.zimLastObj[Et]=O?t.zimTweenOriginals[Et]:Yt,O?(n(Gt[Et])||(Le.step.prev.props[Et]=Yt),Et=="scaleX"&&!n(Ct)&&(Le.step.prev.props.scaleX=Ct),Et=="scaleY"&&!n(Ct)&&(Le.step.prev.props.scaleY=Ct)):(n(Gt[Et])||(Le.step.props[Et]=Yt),Et=="scaleX"&&!n(Ct)&&(Le.step.props.scaleX=Ct),Et=="scaleY"&&!n(Ct)&&(Le.step.props.scaleY=Ct))}}}}}var _n;X.loopWaitCall&&(_n=X.loopWaitCall,delete X.loopWaitCall);var $n=t;X.loopWaitParams&&($n=X.loopWaitParams,delete X.loopWaitParams);function Xn(){_n&&typeof _n=="function"&&_n($n||t)}var Nn;X.startCall&&(Nn=X.startCall,delete X.startCall);var gr;X.startParams&&(gr=X.startParams,delete X.startParams);function vr(Ne){Ne.startCalled||(Ne.startCalled=!0,Nn&&typeof Nn=="function"&&Nn(gr||t))}function Qn(Ne){t.latestTween=Ne,t.waiting?Ne.startTime=Date.now():Ne.startTime=yr,Ne.zimLoop=k,t.animating||t.pauseAnimate(!0),n(Ne.percentComplete)&&Object.defineProperty(Ne,"percentComplete",{get:function(){return this.position/this.duration*100},set:function(pt){this.setPosition(pt*this.duration/100)}})}var lr=Date.now();t.tweenStartTime||(t.tweenStartTime=lr),t.tweenEndTime||(t.tweenEndTime=lr);var yr=lr+(d||0)+(Te||0),mr=yr+(xn||0);mr>t.tweenEndTime&&(t.tweenEndTime=mr);var xr=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];xr.indexOf(o)!=-1&&(o=wr(o));function wr(Ne){var pt=[.4,.75,.9,.95],Ct=[.99,-.69,.53,.014],Et=[1.18,.69,1,.96];return Ne=="ballisticIn"?Ne=ct(e.zimEase(pt)):Ne=="ballisticOut"?Ne=ct(e.zimEase(pt).reverse()):Ne=="ballisticInOut"?Ne=ct(e.zimEase(pt,null,!0)):Ne=="snapIn"?Ne=ct(e.zimEase(Ct)):Ne=="snapOut"?Ne=ct(e.zimEase(Ct).reverse()):Ne=="snapInOut"?Ne=ct(e.zimEase(Ct,null,!0)):Ne=="slowmoIn"?Ne=ct(e.zimEase(Et)):Ne=="slowmoOut"?Ne=ct(e.zimEase(Et).reverse()):Ne=="slowmoInOut"&&(Ne=ct(e.zimEase(Et,null,!0))),Ne}var yn,jn,zn;if(X.rewind&&(o&&(o instanceof Function?yn=ct(o.reverse()):(yn=o,yn.indexOf("InOut")==-1&&(yn.indexOf("Out")!=-1?yn=yn.replace("Out","In"):yn.indexOf("In")!=-1&&(yn=yn.replace("In","Out"))))),D&&(yn=D,xr.indexOf(yn)!=-1&&(yn=wr(yn)))),o instanceof Function)jn=o;else{var Tn="get"+o.charAt(0).toUpperCase()+o.slice(1),Mn=ct(se),kn=ct(me);(!n(Mn)||!n(kn))&&je.Ease[Tn]?(!n(kn)&&n(Mn)&&(Mn=1),!n(Mn)&&n(kn)&&(kn=.3*1.5),jn=je.Ease[Tn](Mn,kn)):jn=je.Ease[o]}yn&&(yn instanceof Function?zn=yn:(Tn="get"+yn.charAt(0).toUpperCase()+yn.slice(1),Mn=ct(se),kn=ct(me),(!n(Mn)||!n(kn))&&je.Ease[Tn]?(!n(kn)&&n(Mn)&&(Mn=1),!n(Mn)&&n(kn)&&(kn=.3*1.5),zn=je.Ease[Tn](Mn,kn)):zn=je.Ease[yn]));function hi(){Vn>0&&(t.waiting=!1),_r&&typeof _r=="function"&&_r(Mr)}function di(){Vn>0&&(t.waiting=!0),Tr&&typeof Tr=="function"&&Tr(Or)}function Gr(Ne){Qt(),d>0?(t.waiting=!0,Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,{override:X.override}).wait(d,!0).call(function(){t.waiting=!1,d=0,Sr(Le),p&&typeof p=="function"&&p(n(w)?t:w)}),Le.timeScale=t.futureRate,Ne&&Cr(Ne,Le),Qn(Le)):Sr(Ne)}function Sr(Ne){var pt=Hr();t.set&&!L&&t.set(q),Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,X).call(vr).to(ue,at,jn).call(di).wait(Vn,!0).call(hi).to(pt,Ae,zn).call(Vr).wait(qt,!0).call(Ln),Le.timeScale=t.futureRate,Ne&&Cr(Ne,Le),Dr(),Qn(Le)}function Ur(Ne){Qt(),d>0?(t.waiting=!0,Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,{override:X.override}).wait(d,!0).call(function(){d=0,t.waiting=!1,Ir(Le),p&&typeof p=="function"&&p(n(w)?t:w)}),Le.timeScale=t.futureRate,Ne&&Cr(Ne,Le),Qn(Le)):Ir(Ne)}function Ir(Ne){t.set&&!L&&t.set(q),Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,X).call(vr).to(ue,at,jn).call(Vr).wait(qt,!0).call(Ln),Le.timeScale=t.futureRate,Ne&&Cr(Ne,Le),Dr(),Qn(Le)}if(X.rewind){var Vn=0;delete X.rewind,O=!0,I=X.rewindWait,X.rewindWait&&(Vn=X.rewindWait,delete X.rewindWait);var _r;if(X.rewindCall){_r=X.rewindCall;var Mr=X.rewindParams;n(Mr)&&(Mr=t),delete X.rewindCall,delete X.rewindParams}var Tr;if(X.rewindWaitCall){Tr=X.rewindWaitCall;var Or=X.rewindWaitParams;n(Or)&&(Or=t),delete X.rewindWaitCall,delete X.rewindWaitParams}Te>0||Fe>0||d>0?Te>0||Fe>0?(t.waiting=!0,Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,{override:X.override}).wait(Te>0?Te:0,!0).wait(Fe>0?Fe:0,!0).call(function(Ne){Ne.waiting=!1,Fe=Te=0,Gr(Le)}),Le.timeScale=t.futureRate,Qn(Le)):Gr():(Qt(),Sr())}else Te>0||Fe>0||d>0?Te>0||Fe>0?(t.waiting=!0,Le=t.zimTweens[A]=t.zimTween=je.Tween.get(t,{override:X.override}).wait(Te>0?Te:0,!0).wait(Fe>0?Fe:0,!0).call(function(){Fe=Te=0,t.waiting=!1,Ur(Le)}),Le.timeScale=t.futureRate,Qn(Le)):Ur():(Qt(),Ir());function Cr(Ne,pt){pt.zimIdSet=Ne.zimIdSet,pt.zimObj=Ne.zimObj,pt.zimTicker=Ne.zimTicker,pt.zimExtraTickers=Ne.zimExtraTickers,pt.requestID=Ne.requestID}Le.startPaused=he,Le.rewinding=!1,n(ie)||(Le.timeScale=e.Pick.choose(ie)),X.animateCall&&(J=X.animateCall,delete X.animateCall),X.animateParams&&(N=X.animateParams,delete X.animateParams);var ur;!y&&$&&(xt&&(t.pathRatio=t.percentComplete&&Math.round(t.percentComplete)!=100?t.percentComplete/100:0,t.percentCompleteNoAngle=Math.round(xt)!=100?xt:0),Y&&!n(xe)&&xe.dispatchEvent?ur=e.Ticker.add(function(){wt&&t.updateEffects(),(Mt||tn||Bn||Un)&&rr(),xe.dispatchEvent("animation")},_t):Y&&t.dispatchEvent?ur=e.Ticker.add(function(){wt&&t.updateEffects(),(Mt||tn||Bn||Un)&&rr(),t.dispatchEvent("animation")},_t):J&&typeof J=="function"?ur=e.Ticker.add(function(){wt&&t.updateEffects(),(Mt||tn||Bn||Un)&&rr(),J(N||t)},_t):ur=e.Ticker.add(function(){wt&&t.updateEffects(),(Mt||tn||Bn||Un)&&rr()},_t));function pi(Ne){if(Array.isArray(Ne)){for(var pt=0,Ct=0,Et=Ne.length;Ct<Et;Ct++)pt+=Ne[Ct];return pt}}var Lr=[1,1,1],rr=function(){if(!(!t.parent||Le.passive||Le.startPaused)){if(Z&&O&&(zt<50&&t.percentComplete>50||zt>50&&t.percentComplete<50)&&(cn=t.percentComplete<50),zt=t.percentComplete,Mt){if(Wt&&(Bt=Mt.segmentPoints,$e=Mt.segmentRatios),Z)var Ne=Mt.getCurvePoint(t.pathRatio,$e,Bt);else{t.currentPercent=t.startPercent+t.percent*t.pathRatio;var pt=(1e6+t.currentPercent)%100/100;t.pathRatio==1&&(pt+=t.percent>0?1:0),Ne=Mt.getCurvePoint(pt,$e,Bt)}if(Ne){var Ct=t.parent.globalToLocal(Ne.x,Ne.y);t.x=Ct.x,t.y=Ct.y}}var Et=Math.abs(Yn-t.x),Yt=Math.abs(Pn-t.y),Ut=An==90||An==270||An==-90;Bn&&en&&(Yn>t.x&&Et>.01&&e.sign(Ut?t.scaleY:t.scaleX)==e.sign(nr)||Yn<t.x&&Et>.01&&e.sign(Ut?t.scaleY:t.scaleX)!=e.sign(nr)||t.percentComplete<99&&t.percentComplete>1&&Et<.01&&Yt>.01&&e.sign(Ut?t.scaleY:t.scaleX)!=e.sign(nr))&&(Ut?t.scaleY*=-1:t.scaleX*=-1),Un&&en&&(Pn>t.y&&Yt>.01&&e.sign(Ut?t.scaleX:t.scaleY)==e.sign(qn)||Pn<t.y&&Yt>.01&&e.sign(Ut?t.scaleX:t.scaleY)!=e.sign(qn)||t.percentComplete<99&&t.percentComplete>1&&Yt<.01&&Et>.01&&e.sign(Ut?t.scaleX:t.scaleY)!=e.sign(qn))&&(Ut?t.scaleX*=-1:t.scaleY*=-1);var gn;if(tn&&Et>.05||tn&&Yt>.05){if(Mt==tn)gn=e.angle(Yn,Pn,t.x,t.y)+An;else{var En;tn.parent?En=tn.parent.localToLocal(tn.x,tn.y,t.parent):En=t.parent.globalToLocal(tn.x,tn.y),gn=e.angle(t.x,t.y,En.x,En.y)+An}if(gn!=0&&(!t.paused||ar)){Bn&&Yn-t.x>.01&&(gn+=180);var Gn=gn;t.rotation=Math.round(Gn==An?t.rotation:Gn),O&&t.percentComplete>50&&!Bn&&(t.rotation+=180)}}if(Z){var ir=t.x-Yn+t.y-Pn;Math.abs(ir)>2&&(Lr.push(e.sign(ir)),Lr.shift(),Le.forward=pi(Lr))}Yn=t.x,Pn=t.y}};(Mt||tn||Bn||Un)&&(t.handlePath=rr),n(t.zimMaskDynamic)||t.zimMaskApply();function Vr(){if(t.seriesTweens&&t.seriesTweens.shift(),t.seriesCalls&&t.seriesCalls.shift(),t.seriesParams&&t.seriesParams.shift(),t.paused&&t.type!="Sprite"){l&&typeof l=="function"&&l(f);return}if(X.loop)if(In>0)if(we<In){qt>0&&(t.waiting=!0),Xn(),we++;return}else O?t.set&&t.set(Hr()):t.set&&t.set(ue);else{qt>0&&(t.waiting=!0),Xn();return}if(ne?Rr(A):t.pauseAnimate(!0,A),!X.loop&&ae&&typeof ae=="function"){var Ne=n(ee)?t:ee;ae(Ne)}l&&typeof l=="function"&&l(f)}function Hr(){var Ne={};for(var pt in ue)if(y&&t.style)!n(q[pt])&&!L?Ne[pt]=q[pt]:pt=="transform"?Ne[pt]=t.style[pt]:Ne[pt]=Zn(t.style[pt]);else if(!n(q[pt])&&!L)Ne[pt]=q[pt];else if(pt.substr(0,1)=="."){for(var Ct=pt.split("."),Et=t,Yt=1;Yt<Ct.length;Yt++)Et=Et[Ct[Yt]];Ne[pt]=Et}else Ne[pt]=t[pt];return Ne}function gi(Ne){if(t.zimBusy){for(var pt in Ne)delete t.zimBusy[pt];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}var vi=!1;Dr();function Dr(){Le.zimObj=ue,Le.zimTicker=ur,Le.zimPaused=vi,De&&(Le.zimIdSet=De),ft&&(n(e.idSets)&&(e.idSets={}),n(e.idSets[ft])?e.idSets[ft]=[t]:e.idSets[ft].indexOf(t)<0&&e.idSets[ft].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function Rr(Ne){if(t.tweenStates&&t.tweenStates[Ne]&&delete t.tweenStates[Ne],!(n(t.zimTweens)||n(t.zimTweens[Ne]))){t.zimX=null,t.zimY=null,gi(t.zimTweens[Ne].zimObj),t.zimTweens[Ne].paused=!0,Wr(Ne);var pt=t.zimTweens[Ne].zimIdSet;if(!n(pt)&&t.zimIdSets){var Ct=t.zimIdSets[pt];Ct&&Ct.splice(Ct.indexOf(Ne),1),Ct&&Ct.length==0&&(delete t.zimIdSets[pt],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),delete t.zimTweens[Ne],t.zimLastObj=null,e.isEmpty(t.zimTweens)&&t.stopAnimate(null,null,null,!1,!0),!(t.zimTweens&&t.zimTweens[Ne]||t.zimIdSets&&t.zimIdSets[pt||Ne])){if(e.idSets&&e.idSets[pt||Ne]){e.idSets[pt||Ne];var Et=e.idSets[pt||Ne].indexOf(t);Et>=0&&e.idSets[pt||Ne].splice(Et,1),e.idSets[pt||Ne].length<=0&&(delete e.idSets[pt||Ne],e.isEmpty(e.idSets)&&delete e.idSets)}}}}function Wr(Ne){-function(){var pt=t.zimTweens[Ne].zimTicker;if(t.zimTweens[Ne].extraTickers)for(var Ct=0;Ct<t.zimTweens[Ne].extraTickers.length;Ct++)e.Ticker.remove(t.zimTweens[Ne].extraTickers[Ct]);t.zimTweens[Ne].requestID&&cancelAnimationFrame(t.zimTweens[Ne].requestID),pt&&setTimeout(function(){pt&&e.Ticker.remove(pt),pt=null},200)}()}function Ar(Ne,pt){var Ct=t.zimTweens[Ne];Ct.paused=pt,pt!=Ct.zimPaused&&(Ct.zimPaused=pt,pt?Ct.zimTicker&&(Ct.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(Ct.zimTicker)},200)):(Ct.startPaused=!1,clearTimeout(Ct.zimAnimateTimeout),Ct.zimTicker&&(Ct.zimTicker=e.Ticker.add(Ct.zimTicker,_t))))}function qr(Ne){for(var pt=[],Ct=0;Ct<Ne.length;Ct++)t.zimIdSets&&!n(t.zimIdSets[Ne[Ct]])?pt=pt.concat(t.zimIdSets[Ne[Ct]]):pt.push(Ne[Ct]);return pt}(!t.stopAnimate||!t.stopAnimate.real)&&(t.stopAnimate=function(Ne,pt,Ct,Et,Yt){var Ut;if(t.dynamicAnimation=null,Yt&&Z){t.pauseAnimate();return}if(n(Ne)&&(t.tweenStates={}),pt)return t.endTween(null,Ne),t;if(n(Et)&&(Et=!0),t.pan==null&&(t.type!=null&&(t.paused=!0),t.animating=!1),t.type=="Pen"&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),n(Ct)&&(Ct=!0),Et&&Z&&(Mt&&Mt.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),t.amu&&_t.frame.off("mouseupplus",t.amu),e.Ticker.remove(t.zimDragAnimateTicker)),n(Ne)){if(!Ct)return t;t.zimBusy=null,je.Tween.removeTweens(t);for(Ut in t.zimTweens)Wr(Ut);t.zimTweens=null,t.zimIdSets=null,t.zimTween=null,e.idSets&&e.idSets[De||Ut]&&(delete e.idSets[De||Ut],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(Ne)||(Ne=[Ne]);var gn=qr(Ne);for(Ut in t.zimTweens)t.zimTweens[Ut].requestID&&cancelAnimationFrame(t.zimTweens[Ut].requestID),Ct&&gn.indexOf(Ut)>=0&&Rr(Ut,Et),!Ct&&gn.indexOf(Ut)<0&&Rr(Ut,Et)}return t},t.stopAnimate.real=!0,t.pauseAnimate=function(Ne,pt,Ct,Et){var Yt;if(pt=="pauseOnBlur"?pt=null:n(pt)&&(t.tweenStates={all:Ne===!1}),t.type=="Pen"&&(Ne===!1?t.zimOnPath&&(t.infinite=!0):t.stop()),Kr&&!Et){if(n(pt))for(Yt in t.zimTweens)Ar(Yt,Ne);else t.pause(Ne,pt);return t}if(n(Ne)&&(Ne=!0),Ht=!1,t.type!=null&&(t.paused=Ne),t.animating=!Ne,n(Ct)&&(Ct=!0),n(pt)&&!Ct)return t;if(n(pt))for(Yt in t.zimTweens)Ar(Yt,Ne);else{Array.isArray(pt)||(pt=[pt]);var Ut=qr(pt);for(Yt in t.zimTweens)Ct&&Ut.indexOf(Yt)>=0&&(Ar(Yt,Ne),t.tweenStates[Yt]=!Ne),!Ct&&Ut.indexOf(Yt)<0&&(Ar(Yt,Ne),t.tweenStates[Yt]=!Ne)}return t.type=="Sprite"&&(t.running||t.stop()),t}),he&&t.pauseAnimate(!0,A,null,!0);var Dn;for(ue.extra&&(Dn=ue.extra,delete ue.extra,Array.isArray(Dn)||(Dn=[Dn])),ve=0;ve<Qe.length;ve++){var Er=Qe[ve];ue[Er]&&(n(Dn)&&(Dn=[]),yi(Er,ue[Er]),delete ue[Er])}function yi(Ne,pt){pt===!0?Dn.push({outputProp:Je[Ne]}):Array.isArray(pt)?Dn.push({outputProp:Je[Ne],outputMin:pt[0],outputMax:pt[1],inputMin:pt[2],inputMax:pt[3]}):Dn.push({outputProp:Je[Ne],outputMax:pt})}if(Dn){t.zimStartScaleX=t.scaleX,t.zimStartScaleY=t.scaleY,Le.extraTickers=[];var Qr;for(ve=0;ve<Dn.length;ve++){var un=Dn[ve];n(un.inputObj)&&(un.inputObj=t),n(un.inputProp)&&(un.inputProp="y"),n(un.inputMin)&&(un.inputMin=0),n(un.inputMax)&&(un.inputMax=un.inputProp=="x"?_t.width:_t.height),n(un.outputObj)&&(un.outputObj=t),n(un.outputProp)&&(un.outputProp="scale"),n(un.outputMin)&&(un.outputMin=0),n(un.outputMax)&&(un.outputMax=un.outputMin+1),n(un.constrain)&&(un.constrain=!0);for(var Fn in un)ue[Fn]=e.Pick.choose(ue[Fn]);un.outputProp=="percentSpeed"&&(G=!0),Qr=new e.Proportion(un.inputMin,un.inputMax,un.outputMin,un.outputMax,un.factor,un.outputRound);var Zr=function(){var Ne=un,pt=Qr;return function(){var Ct,Et=Ne.outputObj,Yt=Ne.inputObj[Ne.inputProp];if((Ne.inputProp=="x"||Ne.inputProp=="y")&&Ne.inputObj.parent){var Ut=Ne.inputObj.parent.localToGlobal(Yt,Yt);Yt=Ut[Ne.inputProp]}if(Ne.constrain?Ct=e.constrain(pt.convert(Yt),Ne.outputMin,Ne.outputMax):Ct=pt.convert(Yt),Number.isNaN(Ct)&&(Ct=Ne.outputMin!=null?Ne.outputMin:0),Ne.outputProp=="scale")Et.scaleX=e.sign(Et.scaleX)*Ct,Et.scaleY=e.sign(Et.scaleY)*Ct;else if(Ne.outputProp=="scaleX")Et.scaleX=e.sign(Et.scaleX)*Ct;else if(Ne.outputProp=="scaleY")Et.scaleY=e.sign(Et.scaleY)*Ct;else if(Ne.outputProp=="layer"){if(!Et.parent)return;var gn=e.constrain(Math.round(Ct),0,Et.parent.numChildren-1);gn!=Et.parent.getChildIndex(Et)&&Et.parent.setChildIndex(Et,gn)}else Ne.outputProp=="percentSpeed"?Et[Ne.outputProp]=Ct*100:Et[Ne.outputProp]=Ct}}();Zr(),Le.extraTickers.push(e.Ticker.add(Zr,_t))}}var Kr;function Jr(){if(Le.requestID=requestAnimationFrame(Jr),!(!G||Le.startPaused&&t.percentSpeed==0)){Le.startPaused=!1,Le!=$r&&($r=Le,Le.currentTime=0,t.pauseAnimate(!0,A,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,Br=!Fe&&!Te&&!d&&!In&&X.loop),Br&&(Le.currentTime+=1e4*Yr,Le.setPosition(Le.currentTime,!0),Br=!1);var Ne=Le.currentTime+mi*t.percentSpeed/100;Nr&&d==0&&(Ne=e.constrain(Ne,0,Nr)),Le.currentTime=Ne,Le.setPosition(Le.currentTime),(Mt||tn||Bn||Un)&&rr(),_t.update()}}if(G&&(t.dynamicAnimation=!0),G||t.zimAnimateDragDown){if(G){Kr=!0,t.pauseAnimate(!0,A,null,!0),t.type!=null&&(t.paused=!1),t.animating=!0,Le.currentTime=0;var $r=Le;n(t.percentSpeed)&&(t.percentSpeed=Le.startPaused?0:100);var mi=1e3/60;Le.currentTime=0;var Br=!Fe&&!Te&&!d&&!In&&X.loop;ge&&X.loop&&!In&&(ge=!1);var Yr=i+(O?V||i:0)+(I||0)+(T||0);Yr*=fe=="s"?1e3:1;var jr=1;X.loop&&In&&(jr=In);var Nr;ge&&(Nr=Yr*jr),Jr()}var br;t.pause=function(Ne,pt){if(n(Ne)&&(Ne=!0),n(pt)&&(pt=0),Ne){if(t.zimAnimateDragDown&&(Z=!1,t.cur("default"),Mt&&Mt.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),!G))return;br=t.percentSpeed,pt>0?e.animate({target:t,props:{percentSpeed:0},override:!1,ticker:!1,time:pt,call:function(){t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,G=!1,t.dispatchEvent("pause")}}):(Le.startPaused=!1,t.percentSpeed=0,t.type!=null&&(t.paused=!0),t.animating=!1,G=!1,setTimeout(function(){t.dispatchEvent("pause")},10))}else{if(t.zimAnimateDragDown&&(Z=!0,t.cur("pointer"),Mt&&(t.zimAnimatePathChange=Mt.on("change",t.zimAnimatePathChange)),t.zimAnimateDragDown=t.on("mousedown",t.zimAnimateDragDown),t.zimAnimateDragPress=t.on("pressmove",t.zimAnimateDragPress),t.zimAnimateDragUp=t.on("pressup",t.zimAnimateDragUp),!G&&he!=!1))return;Ht=!1,Le.currentTime=Le.position,pt>0?e.animate({target:t,props:{percentSpeed:br},override:!1,ticker:!1,time:pt,call:function(){t.percentSpeed=br,t.paused=!1,t.animating=!0,G=!0}}):(t.percentSpeed=br,t.type!=null&&(t.paused=!1),t.animating=!0,G=!0)}return t}}return t},e.stopAnimate=function(t,r){qe("45.12");var i;if(n(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopAnimate(null,r);return}if(Array.isArray(t)||(t=[t]),!!e.idSets)for(var o=0;o<t.length;o++){var l=t[o];if(e.idSets[l]){var f=e.idSets[l].length-1;for(i=f;i>=0;i--)e.idSets[l][i].stopAnimate(l,r)}}},e.stopZimAnimate=function(t){qe("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,r){qe("45.22"),n(t)&&(t=!0);var i;if(n(r)||r=="pauseOnBlur"){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].pauseAnimate(t,r);return}if(Array.isArray(r)||(r=[r]),!!e.idSets)for(var o=0;o<r.length;o++){var l=r[o];if(e.idSets[l])for(i=e.idSets[l].length-1;i>=0;i--)e.idSets[l][i].pauseAnimate(t,l)}},e.pauseZimAnimate=function(t,r){qe("45.2"),e.pauseAnimate(t,r)},e.wiggle=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R){var C="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur",O;if(O=yt(e.wiggle,arguments,C))return O;if(qe("45.25"),n(t)||n(i)||n(o))return t;n(l)&&(l=o);var I=v(f,null,40);n(f)&&(f=I=="s"?1:1e3),n(d)&&(d=f),a(d,I,40),n(k)&&(k="quadInOut"),n(x)&&(x=!1),n(T)&&(T=e.makeID()),n(w)&&(w="both"),n(S)&&(S="both"),n(b)&&(b=!0),n(E)&&(E=0),a(p,I,40),n(p)||(t.wiggleTimeout=setTimeout(function(){t.stopAnimate(T),t.dispatchEvent("wigglestop")},p*(I=="s"?1e3:1)));var _=0,P;function F(){var K=e.rand(e.Pick.choose(f),e.Pick.choose(d),!1),V={},D={},U;D[r]=e.Pick.choose(i),w=="negative"||_==0&&S=="negative"?U=-e.rand(e.Pick.choose(o),e.Pick.choose(l),x):w=="positive"||_==0&&S=="positive"?U=e.rand(e.Pick.choose(o),e.Pick.choose(l),x):_==0?U=e.rand(e.Pick.choose(o),e.Pick.choose(l),x,!0):U=e.rand(e.Pick.choose(o),e.Pick.choose(l),x)*e.sign(P)*-1,V[r]=e.Pick.choose(i)+U,_==0&&(K=K/2),P=U,_++;var Q=t.futureRate;w=="negative"||w=="positive"?e.animate({target:t,obj:V,set:D,ease:k,time:K*2,wait:ct(E),rewind:!0,override:!1,call:F,id:T,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:R}):e.animate({target:t,obj:V,ease:k,time:K,wait:ct(E),override:!1,call:F,id:T,ticker:!!t.stage,timeCheck:!1,pauseOnBlur:R}),Q&&(t.futureRate=Q)}return t.addTo&&!t.stage?t.added(F):F(),t},e.loop=function(t,r,i,o,l,f,d,p){var w="obj, call, reverse, interval, step, start, end, immediate",k;if(k=yt(e.loop,arguments,w))return k;if(e.zimLoopCheck||qe("45.3"),e.zimLoopCheck=!0,n(t)||n(r))return;n(i)&&(i=!1),n(o)&&(o=0),(n(l)||l<=0)&&(l=1),n(p)&&(p=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var x=typeof t=="number"?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":typeof t=="string"?"string":t instanceof HTMLCollection?"htmlcollection":t.type&&t.type=="Dictionary"?"Dictionary":"invalid";if(x=="container"&&!t.addChild)return;var T,S,b,E;if(x=="number"||x=="string"||x=="array"||x=="nodelist"||x=="htmlcollection"||x=="Dictionary"){if(x=="Dictionary"){var R=e.copy(t.values);t=e.copy(t.objects)}if(T=x=="number"?t:t.length,b=O(T-1),b==0)return;if(i)if(o===0){for(S=f;S>=d;S-=l)if(x=="number"?E=r(S,b,f,d,t):x=="array"||x=="string"?E=r(t[S],S,b,f,d,t):x=="Dictionary"?E=r(t[S],R[S],S,b,f,d,t):E=r(t.item(S),S,b,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(S=I.count,p||S--,l&&(S*=l),S=f-S,x=="number"?E=r(S,b,f,d,t):x=="array"||x=="string"?E=r(t[S],S,b,f,d,t):x=="Dictionary"?E=r(t[S],R[S],S,b,f,d,t):E=r(t.item(S),S,b,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},b,p);else if(o===0){for(S=f;S<=d;S+=l)if(x=="number"?E=r(S,b,f,d,t):x=="array"||x=="string"?E=r(t[S],S,b,f,d,t):x=="Dictionary"?E=r(t[S],R[S],S,b,f,d,t):E=r(t.item(S),S,b,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(S=I.count,p||S--,l&&(S*=l),x=="number"?E=r(S,b,f,d,t,I):x=="array"||x=="string"?E=r(t[S],S,b,f,d,t,I):x=="Dictionary"?E=r(t[S],R[S],S,b,f,d,t):E=r(t.item(S),S,b,f,d,t,I),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},b,p);return!0}else if(x=="object"){T=0;var C=[];for(S in t)T++,C.push(S);if(b=O(T-1),b==0)return;if(i)if(o===0){for(S=f;S>=d;S-=l)if(E=r(C[S],t[C[S]],S,b,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(S=I.count,p||S--,l&&(S*=l),S=f-S,E=r(C[S],t[C[S]],S,b,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},b,p);else if(o===0){for(S=f;S<=d;S+=l)if(E=r(C[S],t[C[S]],S,b,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(S=I.count,p||S--,l&&(S*=l),E=r(C[S],t[C[S]],S,b,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},b,p);return!0}else{if(b=O(t.numChildren-1),b==0)return;if(i)if(o===0){for(S=f;S>=d;S-=l)if(E=r(t.getChildAt(S),S,b,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(S=I.count,p||S--,l&&(S*=l),S=f-S,E=r(t.getChildAt(S),S,b,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},b,p);else if(o===0){for(S=f;S<=d;S+=l)if(E=r(t.getChildAt(S),S,b,f,d,t),typeof E<"u"&&E!="next")return E}else e.interval(o,function(I){if(S=I.count,p||S--,l&&(S*=l),E=r(t.getChildAt(S),S,b,f,d,t),E=="next")I.next();else if(typeof E<"u")return I.clear(),E},b,p);return!0}function O(I){return n(f)&&(f=i?I:0),n(d)&&(d=i?0:I),i&&d>f||!i&&f>d||(f<0&&d)<0||f>I&&d>I?0:(f=Math.max(0,Math.min(f,I)),d=Math.max(0,Math.min(d,I)),Math.floor((i?f-d:d-f)/l)+1)}},e.scaleTo=function(t,r,i,o,l,f,d){var p="obj, boundObj, percentX, percentY, type, boundsOnly, simple",w;if(w=yt(e.scaleTo,arguments,p))return w;if(t.type=="AC"&&le.zdf)return le.zdf.ac("scaleTo",arguments),t;if(qe("43"),n(r)&&(r=le.zdf&&le.zdf.stage?le.zdf.stage:null),n(t)||!t.getBounds||!t.getBounds())return Hn("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),t;if(n(r)||!r.getBounds||!r.getBounds())return Hn("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),t;n(i)&&(i=-1),n(o)&&(o=-1),i==-1&&o==-1&&(i=o=100,n(l)&&(l="fill")),n(l)&&(l="fit"),l=="smallest"?l="fit":l=="biggest"||l=="outside"||l=="largest"?l="fill":(l=="both"||l=="stretch")&&(l="full"),n(f)&&(f=!1),n(d)&&(d=!1);var k=r.getBounds().width*i/100*(f?1:r.scaleX),x=r.getBounds().height*o/100*(f?1:r.scaleY);(r.type=="Stage"||r.type=="StageGL")&&(k=r.width*i/100,x=r.height*o/100);var T,S;if(d)T=t.getBounds().height,S=t.getBounds().width;else{var b=e.boundsToGlobal(t);T=b.height/t.scaleX,S=b.width/t.scaleY,(isNaN(T)||isNaN(S)||T>5e3)&&(T=t.getBounds().height,S=t.getBounds().width)}if((i==-1||o==-1)&&l!="full")return i==-1?e.sca(t,x/T):e.sca(t,k/S),t;var E;return l=="full"?(t.scaleX=i!=-1?k/S:t.scaleX,t.scaleY=o!=-1?x/T:t.scaleY,t):(l=="fill"?E=Math.max(k/S,x/T):E=Math.min(k/S,x/T),e.sca(t,E),t)},e.fit=function(t,r,i,o,l,f){var d="obj, left, top, width, height, type",p;if(p=yt(e.fit,arguments,d))return p;if(t.type=="AC"&&le.zdf)return le.zdf.ac("fit",arguments),t;if(qe("46"),!(n(t)||!t.getBounds)){if(!t.getBounds()){ut("zim methods - fit(): please setBounds() on object");return}if(n(r)){if(!t.stage){ut("zim methods - fit(): please add boundary dimensions or add obj to stage first");return}if(!t.stage.getBounds()){ut("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var w=t.stage.getBounds().width,k=t.stage.getBounds().height;r=0,i=0,o=w,l=k}f===!0?f="fit":f===!1&&(f="fill"),n(f)&&(f="fit"),t.scaleX=t.scaleY=1;var x=o,T=l,S=t.getBounds().width,b=t.getBounds().height,E,R,C,O,I;return f=="full"?(t.scaleX=C=x/S,t.scaleY=O=T/b,E=x,R=T):(f=="fit"?x/T>=S/b?I=T/b:I=x/S:f=="fill"&&(x/T>=S/b?I=x/S:I=T/b),C=O=I),t.scaleX=C,t.scaleY=O,E=S*C,R=b*O,t.x=(t.regX-t.getBounds().x)*C+r+(x-E)/2,t.y=(t.regY-t.getBounds().y)*O+i+(T-R)/2,{x:t.x,y:t.y,width:E,height:R,scale:I,scaleX:C,scaleY:O,bX:r,bY:i,bWidth:o,bHeight:l}}},e.boundsCheck=!1,e.boundsToGlobal=function(t,r,i,o,l){if(e.boundsCheck||(qe("40"),e.boundsCheck=!0),!(n(t)||!t.getBounds)){if(n(i)&&(i=!1),l&&!t.getBounds&&!t.getBounds())return t;var f=t.getBounds();if(!f&&n(r)){ut("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)");return}r&&(f=r);var d,p,w,k;l&&l.type&&!(l.type=="Stage"||l.type=="StageGL")?(d=t.localToLocal(f.x,f.y,l),p=t.localToLocal(f.x+f.width,f.y,l),w=t.localToLocal(f.x+f.width,f.y+f.height,l),k=t.localToLocal(f.x,f.y+f.height,l)):i?(d=t.globalToLocal(f.x,f.y),p=t.globalToLocal(f.x+f.width,f.y),w=t.globalToLocal(f.x+f.width,f.y+f.height),k=t.globalToLocal(f.x,f.y+f.height)):(d=t.localToGlobal(f.x,f.y),p=t.localToGlobal(f.x+f.width,f.y),w=t.localToGlobal(f.x+f.width,f.y+f.height),k=t.localToGlobal(f.x,f.y+f.height));var x=Math.min(d.x,p.x,w.x,k.x),T=Math.min(d.y,p.y,w.y,k.y),S=Math.max(d.x,p.x,w.x,k.x),b=Math.max(d.y,p.y,w.y,k.y);return new je.Rectangle(x,T,S-x,b-T)}},e.resetBounds=function(t,r,i,o,l,f){var d="obj, a, b, c, d, margin",p;if(p=yt(e.resetBounds,arguments,d))return p;qe("40.5");var w,k,x,T;return n(o)?(w=0,k=r,x=0,T=i):(w=r,k=o,x=i,T=l),n(T)&&(T=k),n(r)?t.setBounds(null):t.setBounds(w,x,k,T),f&&(i=t.getBounds(),i&&t.setBounds(i.x-f,i.y-f,i.width+f*2,i.height+f*2)),t},e.copyMatrix=function(t,r){return qe("45.5"),t.x=r.x,t.y=r.y,t.scaleX=r.scaleX,t.scaleY=r.scaleY,t.regX=r.regX,t.regY=r.regY,t.rotation=r.rotation,t.skewX=r.skewX,t.skewY=r.skewY,t},e.duplicate=function(t,r){qe("45.6");var i=t.clone(r);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&i[o]==null){if(o=="parent"||o=="zimTouch")continue;i[o]=t[o]}return i},e.expand=function(t,r,i,o,l){var f="obj, padding, paddingV, paddingRight, paddingBottom",d;if(d=yt(e.expand,arguments,f))return d;if(qe("50"),n(t)||!t.getBounds||!t.getBounds())return ut("zim methods - expand(): please provide object with bounds set"),t;n(r)&&(r=20),n(i)&&(i=r);var p,w;!n(o)||!n(l)?(n(o)&&(o=r),n(l)&&(l=i),p=r,w=i):(p=o=r,w=l=i);var k=t.getBounds(),x=new e.Shape({style:!1});return x.graphics.f("rgba(0,0,0,.01)").r(k.x-p,k.y-w,k.width+p+o,k.height+w+l),t.hitArea=x,t},e.setSwipe=function(t,r){if(qe("34"),n(t)||!t.on)return;t.zimNoSwipe=r?null:!0,t instanceof je.Container&&i(t);function i(o){for(var l=o.numChildren,f,d=0;d<l;d++)f=o.getChildAt(d),f.zimNoSwipe=t.zimNoSwipe,f instanceof je.Container&&i(f)}return t},e.setMask=function(t,r,i){if(qe("50.1"),n(t)&&ut("zim methods - setMask(): please provide obj"),n(r))return l(),t;var o=t.stage||(le.zdf?le.zdf.stage:null);function l(){t.zimMask&&t.zimMask.parent&&t.zimMask.parent.removeChild(t.zimMask),t.zimMask=null,t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.mask=null}t.zimMaskOriginal&&t.zimMaskOriginal!=r&&l(),n(i)&&(i=r.type=="Blob"||!n(r.zimDown)||!n(r.transformControls)||!n(r.zimTouch)||!n(r.zimTweens),r.zimMaskDynamic=i),t.zimMaskOriginal=r;var f;function d(){if(i&&(!o||!r.stage))return t;if(f&&f.dispose&&f.dispose(),f=null,t.zimMask=r.zimMask=f=r.shape.clone(),e.copyMatrix(f,r),r.addChildAt(f,0),f.alpha=0,!t.parent){t.mask=f;return}var p=r.getConcatenatedMatrix().decompose(),w=t.parent.getConcatenatedMatrix().decompose();f.scaleX=p.scaleX/w.scaleX,f.scaleY=p.scaleY/w.scaleY,f.rotation=(p.rotation?p.rotation:0)-(w.rotation?w.rotation:0);var k=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,t.parent);f.x=k.x,f.y=k.y,t.mask=f}return r.zimMaskApply=function(){t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.zimMaskTicker=e.Ticker.add(d)},r&&r.shape?(d(),i&&r.zimMaskApply()):(f=r,t.mask=f),t},e.outline=function(t,r,i,o){var l="obj, color, size, boundsOnly",f;if(f=yt(e.outline,arguments,l))return f;if(t.type=="AC"&&le.zdf)return le.zdf.ac("outline",arguments),t;if(qe("47"),t.type&&t.type=="zimOultineShape")return At&&ut("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(n(t)||!t.getBounds)return ut("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return ut("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return ut("zim methods - outline(): object should be on stage first"),t;if(n(r)&&(r="brown"),n(i)&&(i=2),i<=0){t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),t.ZIMoutlineShape=t.ZIMoutlineShapeC=null;return}var d=t.getBounds(),p=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new e.Shape;p.type="zimOutlineShape";var w=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new e.Shape;w.type="zimOutlineShape";var k=t.parent;t.outlineToggled=!0,t.outlineToggle=function(P){return P===!0?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):P===!1?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var x=t.localToLocal(d.x,d.y,k),T=t.localToLocal(d.x+d.width,d.y,k),S=t.localToLocal(d.x+d.width,d.y+d.height,k),b=t.localToLocal(d.x,d.y+d.height,k),E=t.localToLocal(0,0,k),R=p.graphics.c(),C=w.graphics.c();if(R.s(r).ss(i).mt(x.x,x.y).lt(T.x,T.y).lt(S.x,S.y).lt(b.x,b.y).lt(x.x,x.y).cp(),!o){var O=10,I=O+1;C.s("white").ss(i+2),C.mt(-I,0).lt(I,0),C.mt(0,-I).lt(0,I),C.s(r).ss(i),C.mt(-O,0).lt(O,0),C.mt(0,-O).lt(0,O),C.cp(),w.x=E.x,w.y=E.y,w.rotation=t.rotation,R.s("white").ss(i+2).dc(t.x,t.y,O+6),R.s(r).ss(i).dc(t.x,t.y,O+6)}t.parent.removeChild(p),t.parent.removeChild(w);var _=t.parent.getChildIndex(t);return t.parent.addChildAt(w,_+1),t.parent.addChildAt(p,_+1),p.mouseEnabled=!1,w.mouseEnabled=!1,t},e.blendmodes=function(t,r,i){qe("47.05"),n(r)&&(r=1);var o=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];i===!1&&o.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var l=0,f=e.interval(r,function(){var d=o[l%o.length];l++,t.ble(d),Xr(d),t.stage&&t.stage.update()});return t.on("mousedown",function(){f.pause(!f.paused)}),t},e.STYLE=null,e.ignore="ignore",e.getStyle=function(t,r,i){e.STYLECHECK||(qe("50.34"),e.STYLECHECK=!0);var o=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache"],l=le.STYLE||e.STYLE,f=l,d;l&&l.type&&typeof l.type=="string"&&(l.ttype=l.type,delete l.type);for(var p in l)d=l[p],p.match(/^[(A-Z)]/)?(l.type||(l.type={}),l.type[p]?l.type[p]=e.merge(l.type[p],d):l.type[p]=d,delete l[p]):d.constructor==={}.constructor&&p!="group"&&p!="type"&&!e.isPick(d)&&o.indexOf(p)==-1&&(l.group||(l.group={}),l.group[p]?l.group[p]=e.merge(l.group[p],d):l.group[p]=d,delete l[p]);n(f)?f={}:f=e.copy(f);var w;if(n(i))i={};else for(w=0;w<o.length;w++)delete i[o[w]];var k=i,x=f.type;if(x&&delete f.type,!n(r)&&!n(f.group)){var T=r.split(","),S={};for(w=0;w<T.length;w++){var b=T[w].trim();n(f.group[b])||(S=e.merge(S,f.group[b]))}delete f.group}!n(t)&&!n(x)&&!n(x[t])&&(f=e.merge(f,x[t])),!n(r)&&!n(S)&&(f=e.merge(f,S));for(var E in f){if(k[E]){delete f[E];continue}if(d=o.indexOf(E)==-1&&!f.delayPick?e.Pick.choose(f[E]):f[E],d=="ignore"){delete f[E];continue}else d&&d.constructor==={}.constructor&&(d=e.copy(d,!0,!1));var R;for(var C in f)(R=C.match(/^(.+)gColor$/))&&(f[R[1]+"ackgroundColor"]=f[C],delete f[C]);f[E]=d}return f=e.merge(f,k),f.ttype&&!f.type&&(f.type=f.ttype,delete f.ttype),f.style===!1?{}:f},e.styleTransforms=function(t,r){var i=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"],o;if(r){for(r.add&&t.addTo(),r.addTo&&t.addTo(r.addTo===!0?null:r.addTo),o=0;o<i.length;o++)r[i[o]]!=null&&(t[i[o]]=e.Pick.choose(r[i[o]]));if((r.regX!=null||r.regY!=null)&&t.reg(n(r.regX)?DEFAULT:r.regX,n(r.regY)?DEFAULT:r.regY),r.bounds&&r.bounds.constructor==={}.constructor&&t.setBounds(r.bounds.x?r.bounds.x:0,r.bounds.y?r.bounds.y:0,r.bounds.width?r.bounds.width:100,r.bounds.height?r.bounds.height:100),r.center&&t.center(r.center===!0?null:r.center),r.centerReg&&t.centerReg(r.centerReg===!0?null:r.centerReg),r.reg!=null&&(r.reg.constructor==={}.constructor?t.reg(e.Pick.choose(r.reg.x),e.Pick.choose(r.reg.y),r.reg.still):t.reg(r.reg)),r.x!=null&&(r.loc?r.loc.x==null&&(r.loc.x=r.x):r.loc={x:r.x}),r.y!=null&&(r.loc?r.loc.y==null&&(r.loc.y=r.y):r.loc={y:r.y}),r.loc&&(r.loc.constructor==={}.constructor?t.loc(e.Pick.choose(r.loc.x),e.Pick.choose(r.loc.y)):t.loc(e.Pick.choose(r.loc))),r.pos)if(r.pos.constructor==={}.constructor)t.pos(e.Pick.choose(r.pos.x),e.Pick.choose(r.pos.y),e.Pick.choose(r.pos.horizontal),e.Pick.choose(r.pos.vertical),e.Pick.choose(r.pos.container),e.Pick.choose(r.pos.index),r.pos.add,e.Pick.choose(r.pos.reg),e.Pick.choose(r.pos.regX),e.Pick.choose(r.pos.regY));else{var l=e.Pick.choose(r.pos);(l=="left"||l=="top")&&t.pos(),l=="right"&&t.pos({horizontal:"right"}),l=="bottom"&&t.pos({vertical:"bottom"}),(l=="rightbottom"||l=="bottomright")&&t.pos({horizontal:"right",vertical:"bottom"}),l=="center"&&t.center()}if((r.mov||r.move)&&(r.move&&(r.mov=r.move),r.mov.constructor==={}.constructor?t.mov(e.Pick.choose(r.mov.x),e.Pick.choose(r.mov.y)):t.mov(e.Pick.choose(r.mov))),r.outline&&setTimeout(function(){t.outline(r.outline.constructor==={}.constructor?r.outline:null),t.stage&&t.stage.update()},20),r.drag&&t.drag(r.drag.constructor==={}.constructor?r.drag:{currentTarget:!0}),r.gesture&&t.gesture(r.gesture.constructor==={}.constructor?r.gesture:null),r.mouse===!1&&t.noMouse(),r.transform&&setTimeout(function(){t.transform(r.transform.constructor==={}.constructor?r.transform:null)},20),r.animate)for(Array.isArray(r.animate)||(r.animate=[r.animate]),o=0;o<r.animate.length;o++)-function(){var d=r.animate[o];d.constructor==={}.constructor&&setTimeout(function(){t.animate(d)},20)}();if(r.wiggle)for(Array.isArray(r.wiggle)||(r.wiggle=[r.wiggle]),o=0;o<r.wiggle.length;o++)-function(){var d=r.wiggle[o];d.constructor==={}.constructor&&setTimeout(function(){t.wiggle(d)},20)}();r.expand&&t.expand(r.expand===!0?null:r.expand),r.cache&&(r.cache.constructor==={}.constructor?r.cache.x?t.cache(e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y),e.Pick.choose(r.cache.x),e.Pick.choose(r.cache.y)):t.cache(e.Pick.choose(r.cache.width),e.Pick.choose(r.cache.height)):t.cache()),r.tap&&t.tap&&t.tap(r.tap),r.change&&t.change&&t.change(r.change),r.hold&&t.hold&&t.hold(r.hold),r.noChange&&t.noChange&&t.noChange(),r.noTap&&t.noTap&&t.noTap(),r.noHold&&t.noHold&&t.noHold();var f=le.STYLE||e.STYLE;f&&(f.once===!0||f.once==t.type)&&(le.STYLE?le.STYLE={}:e.STYLE={})}},e.Style={remembered:{},clear:function(){return le.STYLE&&(le.STYLE={}),e.STYLE&&(e.STYLE={}),e.Style},clearTypes:function(){var t=le.STYLE||e.STYLE;return delete t.types,e.Style},clearGroups:function(){var t=le.STYLE||e.STYLE;return delete t.groups,e.Style},remember:function(t){n(t)&&(t="default");var r=le.STYLE||e.STYLE;return r||(Ot?r=e.STYLE={}:r=le.STYLE={}),e.Style.remembered[t]=e.copy(r,!0),e.Style},clearRemembered:function(t){return n(t)?e.Style.remembered={}:delete e.Style.remembered[t],e.Style},recall:function(t){return n(t)&&(t="default"),le.STYLE?le.STYLE=e.Style.remembered[t]:e.STYLE=e.Style.remembered[t],e.Style},add:function(t){var r=le.STYLE||e.STYLE;return r||(Ot?r=e.STYLE={}:r=le.STYLE={}),le.STYLE?le.STYLE=e.merge(r,t):e.STYLE=e.merge(r,t),e.Style},addType:function(t,r){var i=le.STYLE||e.STYLE;return i||(Ot?i=e.STYLE={}:i=le.STYLE={}),i.type||(i.type={}),i.type[t]=r,e.Style},addGroup:function(t,r){var i=le.STYLE||e.STYLE;return i||(Ot?i=e.STYLE={}:i=le.STYLE={}),i.group||(i.group={}),i.group[t]=r,e.Style},remove:function(t){var r=le.STYLE||e.STYLE;return r||(Ot?r=e.STYLE={}:r=le.STYLE={}),delete r[t],e.Style},removeType:function(t){var r=le.STYLE||e.STYLE;return r||(Ot?r=e.STYLE={}:r=le.STYLE={}),r.type&&delete r.type[t],e.Style},removeGroup:function(t){var r=le.STYLE||e.STYLE;return r||(Ot?r=e.STYLE={}:r=le.STYLE={}),r.group&&delete r.group[t],e.Style}},e.PATH=null,e.TIME="seconds",e.TIMECHECK=!1,e.DIR="ltr",e.SEEDRAND=null,e.SEEDRANDCOUNT=0,e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.DEFAULTWIRE="currentValue",e.KEYFOCUS=null,e.POSREG=!1,e.DRAGALL=!1,e.MOBILE="default",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,wire:new e.Dictionary,setFPS:function(t,r){n(t)&&n(r)?(t=60,r=60):n(t)?t=60:n(r)&&(r=t),e.Ticker.framerate=je.Ticker.framerate=e.mobile()?t:r},setTimingMode:function(t){je.Ticker.timingMode=je.Ticker.RAF,t=="synched"&&(je.Ticker.timingMode=je.Ticker.RAF_SYNCHED),t=="timeout"&&(je.Ticker.timingMode=je.Ticker.TIMEOUT)},add:function(t,r){qe("30");var i=e.Ticker;if(i.has(t,r))return t;if((n(r)||!r.update)&&(r=le.zdf.stage),n(t)||typeof t!="function"){ut("zim.Ticker.add() - only add functions");return}return i.list.at(r)?i.list.at(r).push(t):i.list.add(r,[t]),i.ticker||(i.ticker=je.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},addWire:function(t,r){if(qe("30"),n(r[0]))return t;var i=e.Ticker;i.wire.add(t,r);var o=r[0][r[1]];return r[4]&&(o=r[4](o,"from")),r[3]&&(t[r[6]]=r[7]=o),i.ticker||(i.ticker=je.Ticker.on("tick",i.call)),i.framerate||i.setFPS(),t},rawID:{},raw:function(t){qe("30");var r=e.makeID("letters",7);return-function i(o){t(o),e.Ticker.rawID[r]=requestAnimationFrame(i)}(),r},removeRaw:function(t){cancelAnimationFrame(e.Ticker.rawID[t]),delete e.Ticker.rawID[t]},call:function(t){var r=e.Ticker,i,o,l,f=[];for(l=0;l<r.list.length;l++){i=r.list.objects[l],o=r.list.values[l];for(var d=0;d<o.length;d++)o[d](t);var p=!1;(r.alwaysList.at(i)||o.length>0&&(n(r.update)&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)||r.update))&&(p=!0),p&&f.indexOf(i)<0&&f.push(i)}for(l=r.wire.length-1;l>=0;l--){var w=r.wire.objects[l],k=r.wire.values[l];if(k){var x=w[k[6]];x!=k[7]&&(k[4]&&(x=k[4](x,"to",k[7])),k[0][k[1]]=k[7]=x,k[5]&&k[5](x),i=k[0].stage,i&&f.indexOf(i)<0&&f.push(i)),k[2]&&k[0]&&(x=k[0][k[1]],k[7]!=x&&(k[4]&&(x=k[4](x,"from",k[7])),w[k[6]]=k[7]=x,k[5]&&k[5](x),i=w.stage,i&&f.indexOf(i)<0&&f.push(i)))}}if(r.list.length==0)for(l=0;l<r.alwaysList.length;l++)i=r.alwaysList.objects[l],f.indexOf(i)<0&&f.push(i);var T=f.length;for(l=0;l<T;l++)f[l].update()},always:function(t){qe("30");var r=e.Ticker;r.framerate||r.setFPS(),(n(t)||!t.update)&&(t=le.zdf.stage),r.alwaysList.add(t,!0),r.ticker||(r.ticker=je.Ticker.on("tick",r.call))},alwaysOff:function(t){var r=e.Ticker;(n(t)||!t.update)&&(t=le.zdf.stage),r.alwaysList.remove(t)},remove:function(t){var r=e.Ticker;if(n(t)||typeof t!="function"){ut("zim.Ticker - only remove functions");return}for(var i=0;i<r.list.length;i++){var o=r.list.values[i].indexOf(t);o>-1&&r.list.values[i].splice(o,1)}r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(je.Ticker.off("tick",r.ticker),r.ticker=null)},removeAll:function(t){for(var r=e.Ticker,i,o=0;o<r.list.length;o++)i=r.list.objects[o],(n(t)||t===i)&&(r.list.values[o]=[]);r.alwaysList.length>0||r.list.length>0||r.wire.length>0||(je.Ticker.off("tick",r.ticker),r.ticker=null)},removeWire:function(t,r,i,o){var l=e.Ticker;if(n(t)&&n(r)&&n(i)&&n(o))l.wire.clear();else for(var f=l.wire.length-1;f>=0;f--){var d=l.wire.objects[f],p=l.wire.values[f];p&&(t&&d!=t||r&&p[0]!=r||i&&p[1]!=i||o&&p[6]!=o||(l.wire.objects.splice(f,1),l.wire.values.splice(f,1)))}l.alwaysList.length>0||l.list.length>0||l.wire.length>0||(je.Ticker.off("tick",l.ticker),l.ticker=null)},isUpdating:function(t){n(t)&&(t=le.zdf.stage);var r=!1,i=e.Ticker;return(i.alwaysList.at(t)||i.list&&i.list.values.at(t)&&i.list.values.at(t).length>0&&(n(i.update)&&!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)||i.update))&&(r=!0),r},has:function(t,r){return(n(r)||!r.update)&&(r=le.zdf.stage),e.Ticker.list&&e.Ticker.list.at(r)&&e.Ticker.list.at(r).indexOf(t)>=0},getFPS:function(){return je.Ticker.getMeasuredFPS()},dispose:function(t){for(var r=e.Ticker,i=0,o,l=r.list.length-1;l>=0;l--)o=r.list.objects[l],n(t)||t===o?(r.list.remove(t),r.alwaysList.remove(t)):i+=r.list.values[l].length;if(!(r.alwaysList.length>0))return i==0&&(je.Ticker.off("tick",r.ticker),r.ticker=null),!0}},e.Ticker.setFPS(),Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var r=e.Ticker;typeof t!="boolean"&&(t=null),r.myUpdate=t,r.myUpdate===!1&&(cancelAnimationFrame(r.ticker),r.alwaysList=new e.Dictionary)}}),e.Pages=function(t,r,i,o,l,f,d,p,w){var k="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",x;if(x=yt(e.Pages,arguments,k,this))return x;qe("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=p;var T=d===!1?{}:e.getStyle(this.type,this.group,w),S=v(i);if(n(t)&&(t=T.pages!=null?T.pages:[]),this.pages=t,n(r)&&(r=T.transition!=null?T.transition:"none"),n(i)&&(i=T.speed!=null?T.speed:S=="s"?.2:200),n(o)&&(o=T.transitionTable!=null?T.transitionTable:[]),this.transitionTable=o,n(f)&&(f=T.arrowDisableColor!=null?T.arrowDisableColor:e.grey),this.arrowDisableColor=f,n(l)&&(l=T.holder!=null?T.holder:null),n(l)&&le.zdf&&(l=le.zdf.stage),!l.getBounds||!l.getBounds()){ut("zim controls - Pages():\nholder object must have bounds set");return}this.speed=i,this.active=!0;var b=this;b.transitioning=!1;var E=l.getBounds().width,R=l.getBounds().height,C,O;(r!="none"||o!=[])&&I();function I(){C=new je.Shape,C.graphics.f("black").r(0,0,E,R+1),O=new je.Shape,O.graphics.f("white").r(0,0,E,R+1)}var _=["left","right","up","down"],P,F,K=!0,V;for(V=0;V<t.length;V++)P=t[V],P.constructor!={}.constructor&&(P=t[V]={page:t[V]}),P.swipe&&(K=!1);for(V=0;V<t.length;V++){if(P=t[V],P.constructor!=={}.constructor&&(P=t[V]={page:t[V]}),K){var D=t[V-1],U=t[V+1];P.swipe=[D?D.page:null,U?U.page:null]}ae(P.page,P.swipe)}var Q=this.page=t[0]?t[0].page:null;n(this.page)||(this.index=0),this.addChild(Q),ee(Q),this.swipe=new e.Swipe(l);var J,N=!1,te=this.swipe.on("swipe",function(X){if(b.active){var y=X.currentTarget.direction;if(y!="none"){var g="";y=="left"?g="right":y=="right"?g="left":y=="up"?g="down":y=="down"&&(g="up"),y=g;var h=_.indexOf(y);F=Q.zimSwipeArray[h],J=[F,y,null,null,!0],b.page=Q,b.nextPage=F,b.direction=y,b.dispatchEvent("swipe"),setTimeout(function(){N||b.go(F,y,null,null,!0)},50)}}});function ae(X,y){n(X)||(X.zimHTMLList=new e.Dictionary,pe(X),X.zimSwipeArray=y||[],X.zimOriginalAlpha=X.alpha,X.parent&&X.parent.removeChild(P.page))}function ee(X){if(!n(X))for(X.removedHTML=!1,V=0;V<X.zimHTMLList.length;V++)X.addChildAt(X.zimHTMLList.values[V].obj,X.zimHTMLList.values[V].depth)}function pe(X){if(!X.removedHTML){X.removedHTML=!0,X.zimHTMLList.clear();var y,g;for(g=0;g<X.numChildren;g++)if(y=X.getChildAt(g),y.type=="TextArea"||y.type=="Loader"||y.type=="Tag"){var h={obj:y,depth:X.getChildIndex(y)};X.zimHTMLList.add(y,h)}for(g=X.numChildren-1;g>=0;g--)y=X.getChildAt(g),(y.type=="TextArea"||y.type=="Loader"||y.type=="Tag")&&X.removeChild(y)}}this.addPage=function(X,y){ae(X,y),b.pages.push({page:X}),Q?X.parent&&X.parent.removeChild(X):(Q=b.page=X,b.addChild(Q))},this.removePage=function(X){pe(X),b.currentPage==X&&(b.removeChild(X),l.stage&&l.stage.update()),e.loop(b.pages,function(y,g){(y.page==X||y==X)&&b.pages.splice(g,1)},!0),X.zimSwipeArray=null},this.setSwipeArray=function(X,y){n(y)&&(y=[]);var g={page:X,swipe:y};g.page.zimSwipeArray=g.swipe?g.swipe:[]},this.pause=function(){N=!0},this.unpause=function(){N&&b.go(J[0],J[1],J[2],J[3],J[4])};var $=!0;this.go=function(X,y,g,h,L){if(typeof X=="number"){var q=b.pages[X];if(n(q))return;X=q.page}setTimeout(function(){N=!1},200);for(var A=[{x:E},{x:-E},{y:R},{y:-R}],Y=[{x:0},{x:0},{y:0},{y:0}],xe=[{x:E/2,alpha:0},{x:-E/2,alpha:0},{y:R/2,alpha:0},{y:-R/2,alpha:0}],G=r,Z=b.speed,ge=0;ge<b.transitionTable.length;ge++)if(b.transitionTable[ge][0]==Q&&b.transitionTable[ge][1]==X){G=b.transitionTable[ge][2],n(b.transitionTable[ge][3])||(Z=b.transitionTable[ge][3]);break}n(g)&&(g=G),n(h)&&(h=Z),b.speed=h;function he(Me){Me[0].uncache(),Me[1].uncache(),b.transitioning=!1,b.dispatchEvent("pagetransitioned"),b.removeChild(b.lastPage),g=="fan"&&(y=="right"||y=="down"?(b.lastPage.rotation=0,b.lastPage.regY=0,b.lastPage.mov(0,-b.lastPage.height)):(b.page.rotation=0,b.page.regY=0,b.page.mov(0,-b.lastPage.height))),b.removeChild(C),b.removeChild(O),ee(Q),$=!0}function ne(Me){b.removeChild(b.lastPage),e.animate(Me.shift(),{alpha:0},b.speed/2,null,he,Me)}if(b.direction=y,X==""||X==null)b.page=Q,b.dispatchEvent("nothing");else if(typeof X=="string")b.page=Q,b.dispatchEvent(X);else{if(X==Q)return;n(y)&&(y="right");var ue=_.indexOf(y);if(!$)return;$=!1,X.x=0,X.y=0,X.alpha=X.zimOriginalAlpha;var Te,Fe=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"];if(Fe.indexOf(g)>=0){var ie=g;Te=!0,g="slide"}var Se=["explodeDark","explodeLight","explodeZIM"];if(Se.indexOf(g)>=0){var se=g;Te=!0,g="fade"}if(g.type=="Emitter"&&(Te=g,g.horizontal||g.vertical?g="slide":g="fade"),b.transitioning=!0,g=="slide"?(X.x=-(A[ue].x|0),X.y=-(A[ue].y|0),X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),b.addChild(X),b.addChild(Q),e.animate(Q,A[ue],b.speed,null,he,[Q,X]),e.animate(X,Y[ue],b.speed)):g=="reveal"?(X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),b.addChild(X),b.addChild(Q),e.animate(Q,xe[ue],b.speed,null,he,[Q,X])):g=="fade"?(X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),X.alpha=1,b.addChild(X),b.addChild(Q),e.animate(Q,{alpha:0},b.speed,null,he,[Q,X])):g=="black"?(X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),X.alpha=1,b.addChild(X),b.addChild(Q),C.alpha=0,b.addChild(C),e.animate(C,{alpha:1},b.speed/2,null,ne,[C,Q,X])):g=="clear"?(X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),X.alpha=0,b.addChild(X),b.addChild(Q),e.animate(Q,{alpha:0},b.speed/2),e.animate(X,{alpha:1},b.speed/2,null,he,[Q,X],b.speed/2)):g=="white"?(X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),X.alpha=1,b.addChild(X),b.addChild(Q),O.alpha=0,b.addChild(O),e.animate(O,{alpha:1},b.speed/2,null,ne,[O,Q,X])):g=="fan"?(X.cache(0,0,(E+1)/X.scaleX,(R+1)/X.scaleY),Q.cache(0,0,(E+1)/Q.scaleX,(R+1)/Q.scaleY),X.alpha=1,y=="right"||y=="down"?(b.addChild(X),b.addChild(Q),Q.regY=Q.height,Q.mov(0,Q.height),e.animate(Q,{rotation:-90},b.speed,null,he,[Q,X])):(b.addChild(Q),b.addChild(X),X.regY=Q.height,X.mov(0,Q.height),X.rotation=-90,e.animate(X,{rotation:0},b.speed,null,he,[Q,X]))):(b.transitioning=!1,b.addChild(X),b.removeChild(Q),$=!0),Te){var me=ue<2,j,_e;if(ie||g=="slide"){ie?(ie=="lineDark"||ie=="lineLight"?j=new e.Rectangle(me?30:E+5,me?R+5:30,ie=="lineDark"?e.dark:e.white).alp(.2):ie=="lineZIM"?j=new e.Rectangle(me?50:E+5,me?R+5:50,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.5):ie=="pixelDark"||ie=="pixelLight"?j=new e.Rectangle(40,40,e.clear,ie=="pixelDark"?e.dark:e.white,2).alp(.7):ie=="pixelZIM"?j=new e.Rectangle(40,40,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7):ie=="bubbleDark"||ie=="bubbleLight"?j=new e.Circle(30,e.clear,ie=="bubbleDark"?e.dark:e.white,2).alp(.7):ie=="bubbleZIM"&&(j=new e.Circle(30,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),j.centerReg({add:!1}),ie=="lineDark"||ie=="lineLight"||ie=="lineZIM"?_e=new e.Emitter({obj:j,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):_e=new e.Emitter({obj:j,num:6,life:.5,decayTime:.5,width:me?0:E,height:me?R:0,vertical:me,horizontal:!me,startPaused:!0})):_e=Te;var Re=[{x:0,y:R/2},{x:E,y:R/2},{x:E/2,y:0},{x:E/2,y:R}],de=[{x:E,y:R/2},{x:0,y:R/2},{x:E/2,y:R},{x:E/2,y:0}];_e.centerReg(l).spurt(null,b.speed),_e.x=Re[ue].x,_e.y=Re[ue].y,e.animate(_e,de[ue],b.speed,null,function(){ie&&_e.dispose()})}else(se||g=="fade")&&(se?(se=="explodeDark"||se=="explodeLight"?j=new e.Circle(150,se=="explodeDark"?e.dark:e.white).alp(.5):se=="explodeZIM"&&(j=new e.Circle(130,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),_e=new e.Emitter({obj:j,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):_e=Te,_e.centerReg(l).spurt(null,b.speed*.35),_e.on("fizzed",function(){se&&_e.dispose()}));l&&l.type!="Stage"&&l.type!="StageGL"&&_e.particles&&l.shape&&_e.particles.setMask(l.shape)}for(l&&l.shape&&_e&&_e.particles&&_e.particles.setMask(l.shape),pe(Q),b.lastPage=Q,b.page=X,b.index=-1,ge=0;ge<b.pages.length;ge++){var Pe=b.pages[ge].page;Pe==b.page&&(b.index=ge)}g=="none"&&ee(X),n(L)&&(L=!1),b.fromSwipe=L,b.dispatchEvent("page"),Q=X,b.setArrows(t.index),l.stage&&l.stage.update()}},l&&l.shape&&(l.mouseChildren=!0,l.mouseEnabled=!0,b.setMask(l.shape)),this.resize=function(){E=l.getBounds().width,R=l.getBounds().height,(r!="none"||o!=[])&&I()},this.puff=function(X){for(var y=0;y<t.length;y++)b.addChild(t[y].page);b.addChild(Q),X>0&&setTimeout(function(){b.settle()},X*(S=="s"?1e3:1))},this.settle=function(){b.removeAllChildren(),b.addChild(Q),b.dispatchEvent("puffed")},this.disable=function(){b.active=!1},this.enable=function(){b.active=!0},this.arrows={},this.setArrows=function(){if(!e.isEmpty(b.arrows)){var X=b.pages[b.index];if(!(!X||!X.swipe)){var y=X.swipe,g=[e.LEFT,e.RIGHT,e.DOWN,e.UP];e.loop(g,function(h,L){y[L]?e.loop(b.arrows[h],function(q){if(q.setDisabled===!0){q.activate(!1,b.arrowDisableColor),q.setDisabled=null;return}q.enabled||q.activate(!0,q.arrowBackgroundColor)}):e.loop(b.arrows[h],function(q){if(q.setDisabled===!1){q.activate(!0,q.arrowBackgroundColor),q.setDisabled=null;return}q.enabled&&q.activate(!1,b.arrowDisableColor)})}),b.stage&&b.stage.update()}}},b.added(function(X){if(X.frame&&X.frame.scaling=="full"){if(!e.globalManager){var y=e.globalManager=new e.Manager;y.frame=X.frame,y.event=X.frame.on("resize",function(){y.resize()})}e.globalManager.add(b)}}),d!==!1&&e.styleTransforms(this,T),this.dispose=function(X,y,g){if(e.globalManager){var h=e.globalManager;h.remove(b),e.globalManager.items.length==0&&(h.frame.off("resize",h.event),h.dispose(),e.globalManager=null)}return b.swipe.off("swipe",te),b.swipe.dispose(),g||this.zimContainer_dispose(!0),!0}},e.extend(e.Pages,e.Container,["clone","dispose"],"zimContainer",!1),e.Arrow=function(t,r,i,o,l,f,d,p,w,k,x){var T="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",S;if(S=yt(e.Arrow,arguments,T,this))return S;qe("71.2"),this.group=k;var b=w===!1?{}:e.getStyle("Arrow",this.group,x);n(o)&&(o=b.direction!=null?b.direction:"right"),n(t)&&(t=b.backgroundColor!=null?b.backgroundColor:e.blue),this.arrowBackgroundColor=t,n(r)&&(r=b.rollBackgroundColor!=null?b.rollBackgroundColor:e.blue.lighten(.2)),this.arrowRollBackgroundColor=r,n(l)&&(l=b.type!=null?b.type:"triangle"),n(f)&&(f=b.newPage!=null?b.newPage:null),n(d)&&(d=b.trans!=null?b.trans:null),n(p)&&(p=b.speed!=null?b.speed:null);var E,R,C,O,I;l=="triangle"?(E=new e.Triangle(45,45,45,t,null,null,null,null,-7).rot(90),R=new e.Triangle(45,45,45,r,null,null,null,null,-7).rot(90)):l=="thick"?(E=new e.Shape,C=E.graphics.f(t).command,I="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",E.p(I).reg(-4),R=new e.Shape,O=R.graphics.f(r).command,R.p(I).reg(-4)):l=="thin"?(E=new e.Shape,C=E.graphics.f(t).command,I="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",E.p(I).reg(-4),R=new e.Shape,O=R.graphics.f(r).command,R.p(I).reg(-4)):l=="angle"&&(E=new e.Shape,C=E.graphics.f(t).command,I="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",E.p(I).reg(-3),R=new e.Shape,O=R.graphics.f(r).command,R.p(I).reg(-3)),this.zimButton_constructor(50,50,"",e.clear,e.clear,null,null,null,null,null,null,null,null,null,null,null,E,R),this.type="Arrow";var _=this;if(this.activate=function(V,D){return n(V)&&(V=!0),n(D)&&(D=e.grey),D===!1||(V?(_.enabled=!0,D!==!1&&(l=="triangle"?(_.icon.color=_.arrowBackgroundColor,_.rollIcon.color=_.arrowRollBackgroundColor):(C.style=_.arrowBackgroundColor,O.style=_.arrowRollBackgroundColor))):(_.enabled=!1,D!==!1&&(l=="triangle"?(_.icon.color=D,_.rollIcon.color=D):(C.style=D,O.style=D)))),_},n(i)||i.type!="Pages")return;var P=(Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click";n(i.arrows)&&(i.arrows={}),n(i.arrows[o])&&(i.arrows[o]=[]),i.arrows[o].push(this);var F=K();F||this.activate(!1,i.arrowDisableColor);function K(){var V=i.pages[i.index];if(!(!V||!V.page||!V.page.zimSwipeArray)){var D=V.page.zimSwipeArray;if(o=="left")return D[0];if(o=="right")return D[1];if(o=="up")return D[2];if(o=="down")return D[3]}}this.expand(),this.on(P,function(){if(!i.transitioning){var V=K();V&&i.go(V,o,d,p)}}),w!==!1&&e.styleTransforms(this,b),this.clone=function(){return _.cloneProps(new e.Arrow(t,r,i,o,l,f,d,p,w,this.group,x))}},e.extend(e.Arrow,e.Button,"clone","zimButton",!1),e.HotSpots=function(t,r,i){var o="spots, local, mouseDowns",l;if(l=yt(e.HotSpots,arguments,o,this))return l;qe("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",n(r)&&(r=!0),n(i)&&(i=!1);var f=(Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",d=this,p,w,k=d.hotSpots=[];n(t)&&(t=[]);for(var x=0;x<t.length;x++)T(t[x]);function T(b){var E=null;if(!Array.isArray(b.rect)){if(E=b.rect,!E){ut("zim controls - HotSpots(): HotSpot "+b.page+" "+b.rect+" button does not exist");return}b.rect=[E.x,E.y,E.width||1,E.height||1]}w=new e.HotSpot(b.page,b.rect[0],b.rect[1],b.rect[2],b.rect[3],b.call,b.callOver,b.callOut,r,b.talk),w.zimHSpage=b.page,w.button=E,k.push(w),w.on(f,S),E&&n(b.callOver)&&n(b.callOut)&&(w.spot.mouseEnabled=!1,w.spot.mouseChildren=!1,E.zimHScall=b.call,E.zimHSEvent=E.on(f,S,!0),i||(E.zimHSMDEvent=E.on("mousedown",function(R){R.stopImmediatePropagation()})),E.cur("pointer"))}function S(b){b.stopImmediatePropagation&&b.stopImmediatePropagation(),le.event&&(le.event.cancelBubble=!0),typeof b.currentTarget.zimHScall=="function"&&b.currentTarget.zimHScall(b)}this.add=this.addHotSpot=function(b,E,R,C,O,I){p={page:b,rect:E,call:R,callOver:C,callOut:O,talk:I},t.push(p),T(p)},this.show=function(){for(var b=0;b<k.length;b++)w=k[b],w.button||(w.spot.alpha=.2)},this.hide=function(){for(var b=0;b<k.length;b++)w=k[b],w.spot.alpha=0},this.remove=this.removeHotSpots=function(b,E){for(var R=t.length-1;R>=0;R--)p=t[R],w=k[R],E&&!Array.isArray(E)&&(E=[E.x,E.y,E.getBounds().width,E.getBounds().height]),(n(b)&&n(E)||n(E)&&b==p.page||n(b)&&e.arraysEqual(E,p.rect)||b==p.page&&e.arraysEqual(E,p.rect))&&(t.splice(R,1),w.button&&(w.button.off(f,w.button.zimHSEvent),w.button.zimHSEvent=null,i||(w.button.off("mousedown",w.button.zimHSMDEvent),w.button.zimHSMDEvent=null)),w.off(f,S),w.dispose(),k.splice(R,1))},this.dispose=function(){for(var b=0;b<k.length;b++)w=k[b],w.button&&(w.button.off(f,w.button.zimHSEvent),w.button.zimHSCall=null,w.button.zimHSEvent=null,i||(w.button.off("mousedown",w.button.zimHSMDEvent),w.button.zimHSMDEvent=null)),w.off(f,S),w.dispose();return!0}},e.extend(e.HotSpots,e.Container,"dispose","zimContainer",!1),e.HotSpot=function(t,r,i,o,l,f,d,p,w,k){var x="obj, x, y, width, height, call, callOver, callOut, local, talk",T;if(T=yt(e.HotSpot,arguments,x,this))return T;if(qe("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",n(t)||!t.addChild){ut("zim controls - HotSpot():\nPlease pass in container object for obj");return}if(!(t instanceof je.Container)){ut("zim controls - HotSpot():\nObjects passed in should be Containers");return}if(n(r)||n(i)||n(o)||n(l)){ut("zim controls - HotSpot():\nPlease pass in x, y, width, height");return}n(w)&&(w=!0);var S=(Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",b=o,E=l,R,C,O;if(w)R=new e.Point(r,i),C=o,O=l;else{R=t.globalToLocal(r,i);var I=t.globalToLocal(r+b,i+E);C=I.x-R.x,O=I.y-R.y}var _=new e.Shape(o,l);if(_.talk=n(k)?"HotSpot":k,_.alpha=0,_.graphics.f("black").dr(0,0,C,O),_.x=R.x,_.y=R.y,_.cur("pointer"),_.expand(0),this.spot=_,typeof f=="function")var P=_.on(S,function(V){f(V)});if(typeof d=="function")var F=_.on("mouseover",function(V){d(V)});if(typeof p=="function")var K=_.on("mouseout",function(V){p(V)});t.addChild(_),this.show=function(){_.alpha=.5,t.stage&&t.stage.update()},this.hide=function(){_.alpha=0,t.stage&&t.stage.update()},this.dispose=function(){return P&&_.off(S,F),F&&_.off("mouseover",F),K&&_.off("mouseout",K),t.removeChild(_),_=null,!0}},e.extend(e.HotSpot,e.Container,"dispose","zimContainer",!1),e.Guide=function(t,r,i,o,l,f,d,p){var w="obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",k;if(k=yt(e.Guide,arguments,w,this))return k;qe("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=d;var x=f===!1?{}:e.getStyle(this.type,this.group,p);if(n(t)&&(le.zdf?t=le.zdf.stage:t="stage"),n(r)&&(r=x.vertical!=null?x.vertical:!0),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){Hn("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=x.pixels!=null?x.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=x.hideKey!=null?x.hideKey:"G"),n(l)&&(l=x.pixelKey!=null?x.pixelKey:"P");var T=this,S,b=80,E=26,R=b/6+b/2,C=E*2,O,I,_;r?(_=P("#00c5af","white","white"),_.shape.regX=b+b/6,_.shape.regY=E/2,_.label.x=-b/2-b/6):(_=P("#d61fa0","white","white"),_.shape.regX=b/2,_.shape.regY=E+E/4,_.label.y=-E*3/4);function P($,X,y){var g=new e.Container({style:!1});return g.shape=new e.Shape,g.shape.graphics.s(X).ss(1).f($).r(0,0,b,E),g.shape.alpha=.9,g.addChild(g.shape),g.label=new je.Text("10","16px arial",y),g.label.textAlign="center",g.label.textBaseline="middle",g.addChild(g.label),g.mouseChildren=!1,g.mouseEnabled=!1,g}var F;t!="stage"&&t.addChild(T);var K=e.added(T,N),V=!1,D,U,Q,J;function N(){if(t=="stage"?(F=T.stage,t=F):F=t.stage,F.frame&&F.frame.scaling=="full"){if(!e.globalManager){var $=e.globalManager=new e.Manager;$.frame=F.frame,$.event=F.frame.on("resize",function(){$.resize()})}e.globalManager.add(T)}t.addChild(T),D=t.getBounds().width,U=t.getBounds().height,r?(_.y=U/2,_.label.text="x:"+(T.pixels?Math.round(D*70/100):"70%")):(_.x=D/2,_.label.text="y:"+(T.pixels?Math.round(U*70/100):"70%")),Q=new e.Shape,T.addChild(Q),r?Q.x=D*.7:Q.y=U*.7,V||(t.addChild(T),ee()),F.off("stagemousemove",S),S=F.on("stagemousemove",ae),F.update()}var te={x:0,y:0};function ae($){var X,y;$?(X=t.globalToLocal($.rawX/e.scaX,$.rawY/e.scaY),te=X):X={x:te.x,y:te.y},i?r?(y=Math.round(Math.abs(X.x-Q.x)),_.label.text="x:"+Math.max(0,Math.min(y,Math.round(D))),_.y=Math.max(C,Math.min(X.y,I))):(y=Math.round(Math.abs(X.y-Q.y)),_.label.text="y:"+Math.max(0,Math.min(y,Math.round(U))),_.x=Math.max(R,Math.min(X.x,O))):r?(y=Math.round(Math.abs(X.x-Q.x)/D*100),_.label.text="x:"+Math.max(0,Math.min(y,100))+"%",_.y=Math.max(C,Math.min(X.y,I))):(y=Math.round(Math.abs(X.y-Q.y)/U*100),_.label.text="y:"+Math.max(0,Math.min(y,100))+"%",_.x=Math.max(R,Math.min(X.x,O))),F&&F.update()}function ee(){V=!0,D=t.getBounds().width,U=t.getBounds().height;var $;r?($="ew-resize",J=new je.Rectangle(0,0,D,0)):($="ns-resize",J=new je.Rectangle(0,0,0,U)),e.noDrag(Q),setTimeout(function(){e.drag(Q,J,null,$,$,null,null,!0)},500),F.mouseMoveOutside=!0,F.enableMouseOver(10),O=D-b*2/3,I=U-E-E,Q.uncache();var X=Q.graphics;r?(X.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,U),X.f().s("white").ss(2).mt(0,0).lt(0,U),X.s("#00c5af").sd([20,20]).mt(0,0).lt(0,U).sd(),Q.cache(-10,0,20,U)):(X.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(D,0),X.f().s("white").ss(2).mt(0,0).lt(D,0),X.s("#d61fa0").sd([20,20]).mt(0,0).lt(D,0).sd(),Q.cache(0,-10,D,20)),r?_.x=D:_.y=U,T.addChild(_)}Object.defineProperty(this,"pixels",{get:function(){return i},set:function($){i=$,T.resize()}}),le.addEventListener("keydown",pe);function pe($){$||($=event),F&&(String.fromCharCode($.keyCode)==o.toUpperCase()&&T.toggle(),String.fromCharCode($.keyCode)==l.toUpperCase()&&(T.pixels=!T.pixels))}this.toggled=!0,this.toggle=function($){return $===!0?T.visible=T.toggled=!0:$===!1?T.visible=T.toggled=!1:(T.visible=!T.visible,T.toggled=T.visible),F&&(F.off("stagemousemove",S),T.visible&&(S=F.on("stagemousemove",ae,T)),F.update()),T},this.resize=function(){return T?(F&&(ee(),ae()),!0):!1},f!==!1&&e.styleTransforms(this,x),this.dispose=function(){if(!T)return!1;if(e.globalManager){var $=e.globalManager;$.remove(T),e.globalManager.items.length==0&&($.frame.off("resize",$.event),$.dispose(),e.globalManager=null)}return e.noDrag(Q),clearInterval(K),T.removeAllChildren(),le.removeEventListener("keydown",pe),T.parent&&T.parent.removeChild(T),T=null,!0}},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.Grid=function(t,r,i,o,l,f,d,p,w,k,x){var T="obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",S;if(S=yt(e.Grid,arguments,T,this))return S;qe("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=k;var b=w===!1?{}:e.getStyle(this.type,this.group,x);if(n(t)&&(le.zdf?t=le.zdf.stage:t="stage"),n(r)&&(r=b.color!=null?b.color:e.black),t!="stage"&&(!t.addChild||!t.getBounds||!t.getBounds())){Hn("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");return}n(i)&&(i=b.pixels!=null?b.pixels:!(zdf&&zdf.scaling=="full")),n(o)&&(o=b.hideKey!=null?b.hideKey:"G"),n(l)&&(l=b.pixelKey!=null?b.pixelKey:"P"),n(f)&&(f=b.allowToggle!=null?b.allowToggle:!0),n(d)&&(d=b.cache!=null?b.cache:!0),n(p)&&(p=b.numbers!=null?b.numbers:!0);var E=this,R=10,C;this.mouseChildren=!1,this.mouseEnabled=!1;var O=80,I=26,_=E.numbersX=F("#dddddd",r,"#333333");_.shape.regX=O/2,_.shape.regY=-I/4,_.label.y=I*3/4;var P=E.numbersY=F("#dddddd",r,"#333333");P.shape.regX=-O/6,P.shape.regY=I/2,P.label.x=O/2+O/6,p||(_.visible=!1,P.visible=!1);function F(h,L,q){var A=new e.Container({style:!1});return A.shape=new je.Shape,A.shape.graphics.s(L).ss(1).f(h).r(0,0,O,I),A.shape.alpha=.9,A.addChild(A.shape),A.label=new je.Text("10","16px arial",q),A.label.textAlign="center",A.label.textBaseline="middle",A.addChild(A.label),A.mouseChildren=!1,A.mouseEnabled=!1,A}var K=O/6+O/2,V=I*2,D,U;_.x=K,P.y=V,_.label.text="x:0",P.label.text="y:0";var Q;t!="stage"&&t.addChild(E);var J=e.added(E,te),N=!1;function te(){if(t=="stage"?(Q=E.stage,t=Q):Q=t.stage,Q.frame&&Q.frame.scaling=="full"){if(!e.globalManager){var h=e.globalManager=new e.Manager;h.frame=Q.frame,h.event=Q.frame.on("resize",function(){h.resize()})}e.globalManager.add(E)}N||(y(),t.addChild(E)),Q.off("stagemousemove",C),C=Q.on("stagemousemove",ee),Q.update()}var ae={x:0,y:0};function ee(h){var L;h?(L=t.globalToLocal(h.rawX/e.scaX,h.rawY/e.scaY),ae=L):L={x:ae.x,y:ae.y},i?(_.label.text="x:"+Math.max(0,Math.min(Math.round(L.x),Math.round(pe))),_.x=Math.max(K,Math.min(L.x,D)),P.label.text="y:"+Math.max(0,Math.min(Math.round(L.y),Math.round($))),P.y=Math.max(V,Math.min(L.y,U))):(_.label.text="x:"+Math.max(0,Math.min(Math.round(L.x/pe*100),100))+"%",_.x=Math.max(K,Math.min(L.x,D)),P.label.text="y:"+Math.max(0,Math.min(Math.round(L.y/$*100),100))+"%",P.y=Math.max(V,Math.min(L.y,U))),Q&&Q.update()}var pe,$,X;function y(){N=!0,t&&t.getBounds&&(pe=t.getBounds().width,$=t.getBounds().height),Q&&(Q.mouseMoveOutside=!0,Q.enableMouseOver(10)),D=pe-O*2/3,U=$-I-I,X=E.grid=new e.Container({style:!1}),E.addChild(X);var h=new je.Shape;X.addChild(h);var L=h.graphics;L.s(r).ss(1);var q=new je.Shape;X.addChild(q);var A;if(i){for(A=0;A<pe/R;A++)L.mt(A*R,0).lt(A*R,$);for(A=0;A<$/R;A++)L.mt(0,A*R).lt(pe,A*R);for(h.alpha=.3,L=q.graphics,L.s(r).ss(1),A=0;A<pe/(R*10);A++)L.mt(A*(R*10),0).lt(A*(R*10),$);for(A=0;A<$/(R*10);A++)L.mt(0,A*(R*10)).lt(pe,A*(R*10))}else{for(A=1;A<20+1;A++)L.mt(A*pe/20,0).lt(A*pe/20,$);for(A=1;A<20;A++)L.mt(0,A*$/20).lt(pe,A*$/20);for(h.alpha=.3,L=q.graphics,L.s(r).ss(1),A=1;A<10;A++)L.mt(A*pe/10,0).lt(A*pe/10,$);for(A=1;A<10;A++)L.mt(0,A*$/10).lt(pe,A*$/10)}var Y=80;L.s("#FFFFFF").ss(8),L.mt(pe/2,$/2-Y/2).lt(pe/2,$/2+Y/2),L.mt(pe/2-Y/2,$/2).lt(pe/2+Y/2,$/2),L.s("#000000").ss(4),L.mt(pe/2,$/2-Y/2).lt(pe/2,$/2+Y/2),L.mt(pe/2-Y/2,$/2).lt(pe/2+Y/2,$/2),L.s(r).ss(d?3:2),L.dr(0,0,pe,$),q.alpha=.5,d&&X.cache(0,0,pe,$),E.addChild(_),E.addChild(P),Q&&Q.update()}Object.defineProperty(this,"pixels",{get:function(){return i},set:function(h){i=h,E.resize()}}),le.addEventListener("keydown",g);function g(h){h||(h=event),!(!Q||!f)&&(String.fromCharCode(h.keyCode)==o.toUpperCase()&&E.toggle(),String.fromCharCode(h.keyCode)==l.toUpperCase()&&(E.removeChild(X),X=null,E.pixels=!E.pixels))}this.toggled=!0,this.toggle=function(h){return h===!0?E.visible=E.toggled=!0:h===!1?E.visible=E.toggled=!1:(E.visible=!E.visible,E.toggled=E.visible),Q.off("stagemousemove",C),E.visible&&(C=Q.on("stagemousemove",ee,E)),Q&&Q.update(),E},this.resize=function(){return E?(E.removeChild(X),X=null,Q&&(y(),ee(),setTimeout(function(){E&&E.removeChild(X),X=null,y()},200)),!0):!1},w!==!1&&e.styleTransforms(this,b),this.dispose=function(){if(e.globalManager){var h=e.globalManager;h.remove(E),e.globalManager.items.length==0&&(h.frame.off("resize",h.event),h.dispose(),e.globalManager=null)}return clearInterval(J),E.removeAllChildren(),le.removeEventListener("keydown",g),E.parent&&E.parent.removeChild(E),E=null,!0}},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.Wrapper=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V){var D="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",U=null;if(U=yt(e.Wrapper,arguments,D,this))return U;qe("78.5"),this.group=K;var Q=F===!1?{}:e.getStyle("Wrapper",this.group,V);n(r)&&(r=Q.width!=null?Q.width:300),n(E)&&(E=Q.height!=null?Q.height:null),n(i)&&(i=Q.spacingH!=null?Q.spacingH:null),n(o)&&(o=Q.spacingV!=null?Q.spacingV:null),n(l)&&(l=Q.wrapperType!=null?Q.wrapperType:"spacing"),n(f)&&(f=Q.align!=null?Q.align:"left"),n(d)&&(d=Q.valign!=null?Q.valign:"top"),n(p)&&(p=Q.alignInner!=null?Q.alignInner:"left"),n(w)&&(w=Q.valignInner!=null?Q.valignInner:"bottom"),n(k)&&(k=Q.flip!=null?Q.flip:!1),n(x)&&(x=Q.reverse!=null?Q.reverse:!1),n(T)&&(T=Q.bottomFull!=null?Q.bottomFull:!1),n(S)&&(S=Q.colSize!=null?Q.colSize:100),n(b)&&(b=Q.rowSize!=null?Q.rowSize:null),n(i)&&(i=0),n(o)&&(o=0),n(R)&&(R=Q.minSpreadNum!=null?Q.minSpreadNum:2),n(C)&&(C=Q.minStretchNum!=null?Q.minStretchNum:3),n(O)&&(O=Q.percentVoidH!=null?Q.percentVoidH:0),n(I)&&(I=Q.offsetVoidH!=null?Q.offsetVoidH:0),n(_)&&(_=Q.percentVoidV!=null?Q.percentVoidV:0),n(P)&&(P=Q.offsetVoidV!=null?Q.offsetVoidV:0);var J=200,N=0,te=0,ae=0,ee=r;this.items=[];var pe,$;l=="spread"?pe=!0:l=="stretch"&&($=!0),this.zimContainer_constructor(r,J),this.type="Wrapper",f=="middle"&&(f="center"),d=="middle"&&(d="center"),p=="middle"&&(p="center"),w=="middle"&&(w="center");var X=this;this.add=function(g){return this.addAt(g,this.numChildren-1),X},this.addAt=function(g,h){return n(g)||((n(h)||h<0)&&(h=0),Array.isArray(g)||(g=[g]),e.loop(g,function(L,q){X.addChildAt(L,h+q)}),X.resize()),X},this.remove=function(g){return Array.isArray(g)||(g=[g]),e.loop(g,function(h){h&&h.removeFrom&&h.removeFrom()},!0),X.resize(),X},this.convert=function(g,h){var L=[];return g.loop(function(q){L.push(q),h&&q.cache()}),X.add(L),g.removeFrom(),X},this.resize=function(g,h){if(!X.preventResize){n(g)||(r=g),n(h)||(E=h),this.items2D=[],this.items=[],N=0,te=0,ae=0,n(O)&&(O=0),n(I)&&(I=0);var L=e.Pick.choose(O),q=e.Pick.choose(I);ee=r*(100-L)/100,this.setBounds(ee,J);var A=0,Y=0,xe=0;X.cols=0,X.rows=0;var G=[],Z=[0],ge=null,he=0,ne=null,ue=e.Pick.choose(S);l!="column"&&(ue=null);var Te=e.Pick.choose(b),Fe=0,ie,Se;e.loop(this,function(Me,fe){T||k?Me.pos(A+(Me.marginRight?Me.marginRight:0),Y+(Me.marginTop?Me.marginTop:0),e.RIGHT,k?e.TOP:e.BOTTOM):Me.pos(A+(Me.marginLeft?Me.marginLeft:0),Y+(Me.marginTop?Me.marginTop:0)),Fe++,ne=Me.boundsToGlobal();var ve=X.globalToLocal(ne.x,ne.y),Ie=X.globalToLocal(ne.x+ne.width,ne.y+ne.height);if(T||k?ie=X.globalToLocal(ne.x,ne.y):ie=X.globalToLocal(ne.x+ne.width,ne.y+ne.height),Me.wrapHeight=Ie.y-ve.y,Me.wrapWidth=Ie.x-ve.x,L){var we=X.globalToLocal(ne.x+Me.wrapWidth/2,ne.y+Me.wrapHeight/2);Me.centerX=we.x,Me.centerY=we.y,we=null}ue?Se=ue*Fe:T||k?Se=ee-ie.x+(Me.marginLeft?Me.marginLeft:0)+i:Se=ie.x+(Me.marginRight?Me.marginRight:0)+i,Math.round(Se)-i>ee&&(y(G,ge,xe,he,ue,L,q,!1),he=0,X.cols==0&&(X.cols=fe),A=0,Y+=xe+(Te?0:e.Pick.choose(o)),xe=0,Te=e.Pick.choose(b),L=e.Pick.choose(O),q=e.Pick.choose(I),Fe=0,X.items2D.push(e.copy(G)),X.rows++,Z.push(Y),G=[],T||k?Me.pos(A+(Me.marginRight?Me.marginRight:0),Y+(Me.marginTop?Me.marginTop:0),e.RIGHT,k?e.TOP:e.BOTTOM):Me.pos(A+(Me.marginLeft?Me.marginLeft:0),Y+(Me.marginTop?Me.marginTop:0)),L&&(ne=Me.boundsToGlobal(),we=X.globalToLocal(ne.x+Me.wrapWidth/2,ne.y+Me.wrapHeight/2),Me.centerX=we.x,Me.centerY=we.y,we=null),Fe++,ue?Se=0:(Se=(Me.marginLeft?Me.marginLeft:0)+Me.wrapWidth+(Me.marginRight?Me.marginRight:0)+e.Pick.choose(i),T||k?ie.x=ee-((Me.marginRight?Me.marginRight:0)+Me.wrapWidth):ie.x=(Me.marginLeft?Me.marginLeft:0)+Me.wrapWidth)),G.push(Me),he+=Me.wrapWidth,A=Se,Te?xe=Te:xe=Math.max(xe,Me.wrapHeight+(Me.marginTop?Me.marginTop:0)+(Me.marginBottom?Me.marginBottom:0)),ge=new e.Point(ie.x,Y+xe)},x&&T?!1:x||T),X.numChildren>0&&(X.cols==0&&(X.cols=X.numChildren),X.items2D.push(e.copy(G)),Z.push(Y),y(G,ge,xe,he,ue,L,q,!0),X.rows+=1);var se=e.Pick.choose(d),me;n(se)&&(se="top"),T&&(me=Y+xe-J,e.loop(this,function(Me){Me.mov(0,me)}),X.items2D.reverse(),e.loop(X.items2D,function(Me){Me.reverse()}));var j=e.Pick.choose(_),_e=e.Pick.choose(P);if(!n(j)){n(_e)&&(_e=0);var Re=Y+xe,de=Re*j/100,Pe=Re/2+_e/100*Re;e.loop(Z,function(Me,fe){if(Me>=Pe)return e.loop(X.items2D,function(ve){e.loop(ve,function(Ie){Ie.mov(0,de)})},null,1,fe),"break"})}return n(E)||(d=="bottom"?(me=E-(Y+xe),e.loop(this,function(Me){Me.mov(0,me)})):(d=="center"||d=="middle")&&(me=(E-(Y+xe))/2,e.loop(this,function(Me){Me.mov(0,me)}))),X.setBounds(null),ne=X.getBounds(),ne&&X.setBounds(0,ne.y,r,ne.height),e.loop(X.items2D,function(Me){e.loop(Me,function(fe){X.items.push(fe)})}),this.stage&&this.stage.update(),X}};function y(g,h,L,q,A,Y,xe,G){var Z=e.Pick.choose(f),ge=e.Pick.choose(pe),he=e.Pick.choose($),ne=e.Pick.choose(k),ue=e.Pick.choose(p),Te=e.Pick.choose(w);n(Z)&&(Z="left"),n(Te)&&(Te="top"),n(ue)&&(ue="left"),ne&&g.reverse();var Fe=((100-Y)/100/2+xe/100)*r,ie=r*Y/100,Se=0,se=!1,me,j;if(A){(T||k)&&g.reverse();var _e=ee%A,Re=ee/2+xe/100*ee,de=0,Pe=0,Me=Math.floor(ee/A);X.rows!=0&&G&&(se=!0),e.loop(g,function(Xe,ye){Se=0,ue=="right"?Pe=A*ye+de+A-Xe.wrapWidth:ue=="center"||ue=="middle"?Pe=A*ye+de+(A-Xe.wrapWidth)/2:Pe=A*ye+de,me=Xe.x,Xe.pos(Pe),j=Xe.x-me,Xe.centerX+=j,Xe.marginLeft&&(Se+=Xe.marginLeft),Xe.marginRight&&(Se-=Xe.marginRight);var Ge;Z=="center"||Z=="middle"?(Ge=Math.floor(ee/A)-g.length,Se+=(_e+(Ge?Ge*A:0))/2):Z=="right"&&(Ge=Math.floor(ee/A)-g.length,Se+=_e+(Ge?Ge*A:0)),Xe.mov(Se),Xe.centerX+=Se}),Z=="center"&&se&&(g.length+Me)%2!=0&&(Se=(Re<=ee/2?-1:1)*A/2,e.loop(g,function(Xe){Xe.mov(Se),Xe.centerX+=Se}))}else if(ge||he){var fe,ve;ge?fe=g.length?(ee-q)/(g.length+1):0:he&&(fe=g.length-1>0?(ee-q)/(g.length-1):0),g.length<C&&X.rows!=0&&G&&(fe=ae,se=!0),ae=fe;var Ie=0;if((T||k)&&g.reverse(),e.loop(g,function(Xe,ye){Se=0,me=Xe.x,Xe.pos(fe*(ye+(ge?1:0))+Ie),j=Xe.x-me,Xe.centerX+=j,se||(Xe.marginLeft&&(Se+=Xe.marginLeft),Xe.marginRight&&(Se-=Xe.marginRight),Xe.mov(Se),Xe.centerX+=Se),Ie+=Xe.wrapWidth}),se){Se=0;var we=ge?fe:0;j=0,e.loop(g,function(Xe){if(Z=="right")me=Xe.x,Xe.pos(we,null,e.RIGHT),j=Xe.x-me,we+=Xe.wrapWidth+fe;else if(Z=="center"){var ye=(ee-(Ie+(g.length-1)*fe))/2-(ge?fe:0);me=Xe.x,Xe.pos(we+ye,null,e.RIGHT),j=Xe.x-me,we+=Xe.wrapWidth+fe}Xe.marginLeft&&(Se+=Xe.marginLeft),Xe.marginRight&&(Se-=Xe.marginRight),Xe.mov(Se),Xe.centerX+=j+Se},!0)}}else Z=="center"?e.loop(g,function(Xe){Se=((T||k?0:r)-h.x)/2,(ge||he)&&(Xe.marginLeft&&(Se+=Xe.marginLeft),Xe.marginRight&&(Se-=Xe.marginRight)),Xe.mov(Se),Xe.centerX+=Se}):(T||k)&&Z=="left"?(ve=g[g.length-1].marginLeft,e.loop(g,function(Xe){Se=-h.x+(ve||0),ge&&(Se+=te),Xe.mov(Se),Xe.centerX+=Se})):!(T||k)&&Z=="right"?(ve=g[g.length-1].marginRight,e.loop(g,function(Xe){Se=r-h.x-(ve||0),ge&&(Se-=te),Xe.mov(Se),Xe.centerX+=Se})):ge&&ge&&e.loop(g,function(Xe){Se=te*(Z=="right"?-1:1),Xe.mov(Se),Xe.centerX+=Se});Y&&(Fe=(1/2+xe/100)*ee,ie=r*Y/100,e.loop(g,function(Xe){A||he||ge?Z=="right"?Xe.centerX>ee-Fe&&Xe.mov(ie):Z=="center"?Math.round(Xe.centerX)==Math.round(ee/2+xe/100*ee)?Xe.mov(ie/2):Math.round(Xe.centerX)>Math.round(ee/2+xe/100*ee)&&Xe.mov(ie):Xe.centerX>Fe&&Xe.mov(ie):!(T||k)&&Z=="right"?Xe.centerX<r-Fe&&Xe.mov(-ie):!(T||k)&&Z=="center"?Xe.centerX>r/2+xe/100*ee?Xe.mov(ie/2):Xe.mov(-ie/2):(T||k)&&Z=="right"?Xe.centerX>ee-Fe&&Xe.mov(ie):(T||k)&&Z=="center"?Xe.centerX>ee/2+xe/100*ee&&Xe.mov(ie):Xe.centerX>Fe&&Xe.mov(ie)})),ge&&(N+=fe,te=N/(X.rows+1)),Te=="center"?e.loop(g,function(Xe){Xe.mov(0,(L-Xe.wrapHeight)/2*(T?-1:1))}):!T&&Te=="bottom"?e.loop(g,function(Xe){Xe.mov(0,L-Xe.wrapHeight-(Xe.marginBottom?Xe.marginBottom:0))}):T&&Te=="top"&&e.loop(g,function(Xe){Xe.mov(0,-(L-Xe.wrapHeight)+(Xe.marginTop?Xe.marginTop:0))})}Object.defineProperty(X,"spacingH",{get:function(){return i},set:function(g){i=g,this.resize()}}),Object.defineProperty(X,"spacingV",{get:function(){return o},set:function(g){o=g,this.resize()}}),Object.defineProperty(X,"wrapperType",{get:function(){return l},set:function(g){g=="spread"?pe=!0:pe=!1,g=="stretch"?$=!0:$=!1,l=g,this.resize()}}),Object.defineProperty(X,"align",{get:function(){return f},set:function(g){f=g,f=="middle"&&(f="center"),this.resize()}}),Object.defineProperty(X,"valign",{get:function(){return d},set:function(g){d=g,d=="middle"&&(d="center"),this.resize()}}),Object.defineProperty(X,"alignInner",{get:function(){return p},set:function(g){p=g,p=="middle"&&(p="center"),this.resize()}}),Object.defineProperty(X,"valignInner",{get:function(){return w},set:function(g){w=g,w=="middle"&&(w="center"),this.resize()}}),Object.defineProperty(X,"colSize",{get:function(){return S},set:function(g){S=g,l=="column"&&this.resize()}}),Object.defineProperty(X,"rowSize",{get:function(){return b},set:function(g){b=g,this.resize()}}),Object.defineProperty(X,"flip",{get:function(){return k},set:function(g){k=g,this.resize()}}),Object.defineProperty(X,"reverse",{get:function(){return x},set:function(g){x=g,this.resize()}}),Object.defineProperty(X,"bottomFull",{get:function(){return T},set:function(g){T=g,this.resize()}}),Object.defineProperty(X,"percentVoidH",{get:function(){return O},set:function(g){O=g,this.resize()}}),Object.defineProperty(X,"offsetVoidH",{get:function(){return I},set:function(g){I=g,this.resize()}}),Object.defineProperty(X,"percentVoidV",{get:function(){return _},set:function(g){_=g,this.resize()}}),Object.defineProperty(X,"offsetVoidV",{get:function(){return P},set:function(g){P=g,this.resize()}}),n(t)||X.add(t),F!==!1&&e.styleTransforms(this,Q),this.clone=function(){var g=X.cloneProps(new e.Wrapper(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,this.style,this.group));return g}},e.extend(e.Wrapper,e.Container,"clone","zimContainer",!1),e.Tile=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V){var D="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, style, group, inherit",U;if(U=yt(e.Tile,arguments,D,this))return U;qe("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=K;var Q=F===!1?{}:e.getStyle(this.type,this.group,V);n(t)&&(t=Q.obj!=null?Q.obj:new e.Circle),n(r)&&(r=Q.cols!=null?Q.cols:1121),n(i)&&(i=Q.rows!=null?Q.rows:1121);var J;r==1121&&i==1121?r=i=J=3:r==1121?r=1:i==1121&&(i=1),n(f)&&(f=Q.unique!=null?Q.unique:!1),n(d)&&(d=Q.width!=null?Q.width:null),n(p)&&(p=Q.height!=null?Q.height:null),n(x)&&(x=Q.colSize!=null?Q.colSize:null),n(T)&&(T=Q.rowSize!=null?Q.rowSize:null),n(d)||(x=null),n(p)||(T=null),n(o)&&(o=Q.spacingH!=null?Q.spacingH:J?3:null),n(l)&&(l=Q.spacingV!=null?Q.spacingV:J?3:null),(n(o)||!n(x))&&(o=0),(n(l)||!n(T))&&(l=0),n(w)&&(w=Q.squeezeH!=null?Q.squeezeH:!1),n(k)&&(k=Q.squeezeV!=null?Q.squeezeV:!1),n(S)&&(S=Q.align!=null?Q.align:"left"),n(b)&&(b=Q.valign!=null?Q.valign:"top"),n(E)&&(E=Q.count!=null?Q.count:f&&Array.isArray(t)?t.length:null),E===0&&(E=null,At&&ut("ZIM Tile() - count parameter of 0 is ignored - see docs")),n(R)&&(R=Q.mirrorH!=null?Q.mirrorH:!1),n(C)&&(C=Q.mirrorV!=null?Q.mirrorV:!1),n(O)&&(O=Q.snapToPixel!=null?Q.snapToPixel:!0),O&&(t&&t.stage?t.stage.snapToPixelEnabled=!0:typeof elem<"u"&&le.zdf&&(le.zdf.stage.snapToPixelEnabled=!0)),n(I)&&(I=Q.clone!=null?Q.clone:f?!1:null),I==null&&(I=!(typeof t=="function"&&t.type!="series")),n(_)&&(_=Q.events!=null?Q.events:!0);var N=this;N.cols=r=Math.round(r),N.rows=i=Math.round(i),N.spacingH=o,N.spacingV=l,N.squeezeH=w,N.squeezeV=k;var te=typeof S=="function",ae=typeof b=="function";N.align=te?"left":S,N.valign=ae?"top":b,N.mirrorH=R,N.mirrorV=C,N.items=[];var ee,pe=0,$=!1;e:for(var X=0;X<i;X++)for(var y=0;y<r;y++){if(pe++,!n(E)&&pe>E)break e;ee=f?t[pe-1]:e.Pick.choose(t),typeof ee=="string"&&(ee=le.asset(ee).centerReg({add:!1}).clone()),n(ee)&&(ee=new e.Container(0,0,0,0)),I&&(X!=0||y!=0)&&(ee=ee.clone(P)),_&&ee.on("change",function(de){var Pe=new je.Event("change");Pe.item=de.currentTarget,N.dispatchEvent(Pe)}),N.items.push(ee),ee.type=="AC"&&($=!0),ee.tileNum=pe-1,ee.tileCol=y,ee.tileRow=X}$&&At&&ut("ZIM Tile - assets must have dimensions for Tile");var g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te;function Fe(){N.removeAllChildren(),g=[],h=[],L=[],q=[],A=[],Y=0,xe=0,G=0,Z=0,ge=[],he=[],ne=[],Te=[],ue=[],(!N.items||!N.items.length)&&(N.items=[]),E=N.items.length;var de=0,Pe,Me,fe=0,ve=0,Ie,we;for(Me=0;Me<E;Me++)fe=Math.floor(Me/N.cols),ve=Me%N.cols,n(g[fe])&&(g[fe]=[]),n(N.items[Me])&&(N.items[Me]=new e.Container(0,0,0,0)),g[fe][ve]=N.items[Me];N.rows=Math.max(1,g.length),N.cols=Math.max(1,n(g[0])?0:g[0].length);e:for(fe=0;fe<N.rows;fe++)for(ge.push([]),he.push([]),Te.push([]),T&&n(p)&&(Ie=e.Pick.choose(T)),Me=0;Me<N.cols;Me++){if(de++,!n(E)&&de>E)break e;Pe=g[fe][Me],Pe.snapToPixel=O,N.addChild(Pe),ge[fe].push(Pe.scaleX),he[fe].push(Pe.scaleY),x&&n(d)&&(we=e.Pick.choose(x)),fe==0&&ue.push(e.Pick.choose(S)),(!x||!n(d))&&(we=Math.abs(Pe.width)),(!T||!n(p))&&(Ie=Math.abs(Pe.height)),Te[fe][Me]=[we,Ie],n(q[Me])&&(q[Me]=0),n(A[fe])&&(A[fe]=0),we>q[Me]&&(q[Me]=we),Ie>A[fe]&&(A[fe]=Ie),n(h[fe])&&(h[fe]=0),n(L[Me])&&(L[Me]=0),h[fe]+=we,L[Me]+=Ie,h[fe]>Y&&(Y=h[fe]),L[Me]>xe&&(xe=L[Me]),n(ne[Me])&&(ne[Me]=0),ne[Me]++}var Xe;if(N.squeezeH===!1)for(Me=0;Me<q.length;Me++)Xe=q[Me],G+=Xe;if(N.squeezeV===!1)for(Me=0;Me<A.length;Me++)Xe=A[Me],Z+=Xe}Fe();var ie,Se,se,me;function j(de,Pe){de<=0&&(de=null),Pe<=0&&(Pe=null),!n(de)&&N.squeezeH=="full"?ie=de:n(de)?G>0?ie=G+(N.cols-1)*N.spacingH:ie=Y+(N.cols-1)*N.spacingH:ie=Math.max(Y+(N.cols-1)*N.spacingH,de),!n(Pe)&&N.squeezeV=="full"?Se=Pe:n(Pe)?Z>0?Se=Z+(N.rows-1)*N.spacingV:Se=xe+(N.rows-1)*N.spacingV:Se=Math.max(xe+(N.rows-1)*N.spacingV,Pe),N.setBounds(0,0,ie,Se);var Me,fe;se=[],me=[];var ve=[];for(X=0;X<g.length;X++)for(Me=g[X],fe=0,y=0;y<Me.length;y++){ee=Me[y];var Ie,we;if(X==0&&(se[y]=0,n(Pe)||(N.squeezeV=="full"?me[y]=ne[y]>1?(Pe-L[y])/(ne[y]-1):0:N.squeezeV?me[y]=ne[y]>1?Math.max(N.spacingV,(Pe-L[y])/(ne[y]-1)):0:me[y]=ne[y]>1?Math.max(N.spacingV,(Se-L[y])/(ne[y]-1)):0),N.squeezeV?N.valign=="center"||N.valign=="middle"?ve[y]=(Se-(L[y]+(ne[y]-1)*(n(Pe)?N.spacingV:me[y])))/2:N.valign=="bottom"?ve[y]=Se-(L[y]+(ne[y]-1)*(n(Pe)?N.spacingV:me[y])):ve[y]=0:ve[y]=0),y==0){n(de)||(N.squeezeH=="full"?we=Me.length>1?(de-h[X])/(Me.length-1):0:N.squeezeH?we=Me.length>1?Math.max(N.spacingH,(de-h[X])/(Me.length-1)):0:we=Me.length>1?Math.max(N.spacingH,(ie-h[X])/(Me.length-1)):0),N.squeezeH?N.align=="center"||N.align=="middle"?Ie=(ie-(h[X]+(Me.length-1)*(n(de)?N.spacingH:we)))/2:N.align=="right"?Ie=ie-(h[X]+(Me.length-1)*(n(de)?N.spacingH:we)):Ie=0:Ie=0;var Xe=e.Pick.choose(b)}S=ue[y];var ye=Te[X][y][0],Ge=Te[X][y][1];N.mirrorH&&y%2==1&&(ee.scaleX=-ge[X][y]),ee.pos(fe,null),!N.squeezeH&&te?n(de)&&(S=="center"||S=="middle")?ee.x+=(q[y]-ee.width)/2:n(de)&&S=="right"&&(ee.x+=q[y]-ee.width):N.squeezeH?n(de)&&(N.align=="center"||N.align=="middle")?ee.x+=(ye-ee.width)/2:n(de)&&N.align=="right"&&(ee.x+=ye-ee.width):n(de)&&(N.align=="center"||N.align=="middle")?ee.x+=(q[y]-ee.width)/2:n(de)&&N.align=="right"&&(ee.x+=q[y]-ee.width),N.mirrorV&&X%2==1&&(ee.scaleY=-he[X][y]),ee.pos(null,se[y]),!N.squeezeV&&ae?n(Pe)&&(Xe=="center"||Xe=="middle")?ee.y+=(A[X]-ee.height)/2:n(Pe)&&Xe=="bottom"&&(ee.y+=A[X]-ee.height):N.squeezeV?n(Pe)&&(N.valign=="center"||N.valign=="middle")?ee.y+=(Ge-ee.height)/2:n(Pe)&&N.valign=="bottom"&&(ee.y+=Ge-ee.height):n(Pe)&&(N.valign=="center"||N.valign=="middle")?ee.y+=(A[X]-ee.height)/2:n(Pe)&&N.valign=="bottom"&&(ee.y+=A[X]-ee.height),N.squeezeH===!0||!n(de)?fe+=ye+(n(de)?N.spacingH:we):fe+=q[y]+(n(de)?N.spacingH:we),ee.x+=Ie,ee.y+=ve[y],N.squeezeV===!0||!n(Pe)?se[y]+=Ge+(n(Pe)?N.spacingV:me[y]):se[y]+=A[X]+(n(Pe)?N.spacingV:me[y])}}j(d,p),this.itemUnderPoint=function(de,Pe,Me){if(n(Me)&&(Me=!0),!(n(de)||n(Pe))){var fe=N.globalToLocal(de,Pe);de=fe.x,Pe=fe.y;var ve=0,Ie=e.loop(q,function(ye,Ge){if(ve+=ye+N.spacingH,(!Me||Me=="vertical")&&de>ve-N.spacingH&&de<ve)return!1;if(de<ve-N.spacingH/2)return Ge});if(Ie!==!1&&(Ie===!0&&(Ie=r-1),!(de<0||de>ie||Pe<0||Pe>Se))){var we=0,Xe=e.loop(A,function(ye,Ge){var He=n(p)?N.spacingV:me[y];if((!Me||Me=="horizontal")&&Pe>we-He&&Pe<we)return!1;if(we+=ye+He,Pe<we-He/2)return Ge});if(Xe!==!1)return Xe===!0&&(Xe=i-1),N.items2D[Xe][Ie]}}},this.remake=function(de){return n(de)||(N.items=de),Fe(),j(d,p),N},this.resize=function(de,Pe){return n(de)&&(de=d),n(Pe)&&(Pe=p),d=de,p=Pe,j(de,Pe),N};function _e(de){for(var Pe=[],Me,fe=0;fe<de.length;fe++)fe%N.cols==0&&(Me=[],Pe.push(Me)),Me.push(de[fe]);return Pe}function Re(de){var Pe=[],Me;for(Me=0;Me<N.cols;Me++)Pe.push([]);for(Me=0;Me<de.length;Me++)Pe[Me%N.cols][Math.floor(Me/N.cols)]=de[Me];return Pe}Object.defineProperty(this,"items2D",{get:function(){return _e(N.items)},set:function(){At&&ut("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return Re(N.items)},set:function(){At&&ut("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var de=[];return e.loop(N.items,function(Pe){var Me=Pe.getBounds(),fe=Pe.x-Pe.regX+Me.x+Me.width/2,ve=Pe.y-Pe.regY+Me.y+Me.height/2,Ie=N.hitTestGrid(N.width,N.height,N.cols,N.rows,fe,ve,null,null,N.spacingH,N.spacingV,!0,"open");Ie!=null&&(de[Ie[0]]=Pe)}),de},set:function(){At&&ut("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return _e(N.current)},set:function(){At&&ut("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return Re(N.current)},set:function(){At&&ut("Tile() - current2DCols is read only")}}),F!==!1&&e.styleTransforms(this,Q),this.clone=function(de){if(de)for(var Pe=[],Me=0;Me<N.items.length;Me++)Pe.push(N.items[Me].clone(!0));return N.cloneProps(new e.Tile(de?e.series(Pe):t.clone?t.clone():t,N.cols,N.rows,N.spacingH,N.spacingV,f,d,p,N.squeezeH,N.squeezeV,x,T,S,b,N.items.length,N.mirrorH,N.mirrorV,O,de?!1:I,_,de,this.style,this.group))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.Pack=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D){var U="width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, style, group, inherit",Q;if(Q=yt(e.Pack,arguments,U,this))return Q;qe("66.52"),this.group=V;var J=K===!1?{}:e.getStyle("Pack",this.group,D);n(t)&&(t=J.width!=null?J.width:500),n(r)&&(r=J.height!=null?J.height:500),this.zimContainer_constructor(t,r),this.type="Pack",n(i)&&(i=J.items!=null?J.items:[new e.Rectangle(400,300,e.orange),new e.Rectangle(400,200,e.purple),new e.Rectangle(500,300,e.blue)]),n(o)&&(o=J.spacingH!=null?J.spacingH:10),n(l)&&(l=J.spacingV!=null?J.spacingV:10),n(f)&&(f=J.flatten!=null?J.flatten:"top"),n(d)&&(d=J.direction!=null?J.direction:"horizontal"),n(p)&&(p=J.lock!=null?J.lock:"auto"),n(w)&&(w=J.backgroundColor!=null?J.backgroundColor:e.clear),n(k)&&(k=J.align!=null?J.align:"center"),n(x)&&(x=J.valign!=null?J.valign:"center"),n(T)&&(T=J.lastAlign!=null?J.lastAlign:d=="horizontal"?"left":"top"),n(S)&&(S=J.paddingH!=null?J.paddingH:0),n(b)&&(b=J.paddingV!=null?J.paddingV:0),n(E)&&(E=J.dragOrder!=null?J.dragOrder:!1),n(R)&&(R=J.dragColor!=null?J.dragColor:e.white),n(C)&&(C=J.dragThickness!=null?J.dragThickness:2),n(O)&&(O=J.dragDashed!=null?J.dragDashed:!0),n(I)&&(I=J.reverse!=null?J.reverse:!1),n(_)&&(_=J.funnel!=null?J.funnel:!1),n(P)&&(P=J.showPacking!=null?J.showPacking:!1),n(F)&&(F=J.order!=null?J.order:null);var N=this;N.funnel=_;var te=i.length,ae=t-S*2,ee=r-b*2,pe=50;f===!1&&(f=NONE);var $=this.backing=new On({width:t,height:r,color:w,scaleDimensions:!1}).addTo(this);if(N.items=e.copy(i),i.length<=0)return this;if(i.length==1)return y(i[0]),g(i[0]),this;var X=function(we,Xe,ye){return we.width>Xe.width?1:we.width<Xe.width?-1:0};function y(we){we.scaleTo($,100-S/ae*100*2,100-b/ee*100*2),we.scale*=N.scale,we.scale<0&&(we.scale=.05)}function g(we){we.pos(k!=CENTER&&k!=MIDDLE?S:0,x!=CENTER&&x!=MIDDLE?b:0,k,x,$).addTo(N)}function h(we){var Xe=[];e.loop(we,function(ye,Ge){Xe[Ge]=N.items[ye]}),i=[],e.loop(Xe,function(ye){ye&&i.push(ye)})}var L=N.content=new e.Container,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se;e.loop(i,function(we,Xe){we.zpRotation=we.rotation,we.zpIndex=Xe}),F&&h(F),d==VERTICAL&&se(!0);function se(we){L.rotation=0;var Xe=r;r=t,t=Xe;var ye=ee;ee=ae,ae=ye;var Ge=l;l=o,o=Ge;var He=b;b=S,S=He,f==RIGHT?f=BOTTOM:f!=CENTER&&f!=NONE&&(f=TOP),T==BOTTOM?T=LEFT:T!=CENTER&&T!=MIDDLE&&(T=RIGHT),$.dispose(),$=new On(t,r,w).center(N),we?(p==HORIZONTAL?p=VERTICAL:p==VERTICAL&&(p=HORIZONTAL),e.loop(i,function(Oe,ce){var Ue=new e.Container(Oe.height,Oe.width);Oe.rotation+=90,Oe.pos(0,0,TOP,LEFT,Ue),i[ce]=Ue})):(p==HORIZONTAL?p=VERTICAL:p==VERTICAL&&(p=HORIZONTAL),L.rotation-=90,e.loop(i,function(Oe,ce){var Ue=Oe,Qe=Oe.getChildAt(0).addTo(L).sca(Ue.scale);Ue.dispose(),i[ce]=Qe}))}var me=p;function j(we){p==AUTO&&(p=HORIZONTAL),q=Math.ceil(Math.sqrt(te)),A=Math.ceil(te/q),G=null,Z=null,ge=0,Se=null,he=0,ne=0,ue=null,Te=null,Fe=null,ie=null,Ie(we,q,A),ve(L,q,A)}j(i),_e();function _e(){if(y(L),g(L),f==NONE){e.loop(i,function(Ge){Ge.surrogate?(i.splice(i.indexOf(Ge),1),Ge.dispose()):Ge.bot()},!0);var we=A*q-te;if(f==NONE&&we>0){var Xe=L.getChildAt(L.numChildren-1);if(d==HORIZONTAL&&!I&&T!=LEFT){var ye=L.getBounds().width-(Xe.x+(Xe.getBounds().x-Xe.regX)*Xe.scaleX+Xe.width);e.loop(q-we,function(Ge){L.getChildAt(L.numChildren-Ge-1).mov(T==RIGHT?ye:ye/2)})}else if(d==HORIZONTAL&&I&&T!=RIGHT){var ye=Xe.x+(Xe.getBounds().x-Xe.regX)*Xe.scaleX;e.loop(q-we,function(He){L.getChildAt(L.numChildren-He-1).mov(T==LEFT?-ye:-ye/2)})}else if(d==VERTICAL&&!I&&T!=RIGHT){var ye=Xe.x;e.loop(q-we,function(He){L.getChildAt(L.numChildren-He-1).mov(T==LEFT?-ye:-ye/2)})}else if(d==VERTICAL&&I&&T!=LEFT){var ye=L.getBounds().width-Xe.x;e.loop(q-we,function(He){L.getChildAt(L.numChildren-He-1).mov(T==RIGHT?ye:ye/2)})}}}d==VERTICAL&&(se(!1),y(L),g(L)),N.cols=q,N.rows=A,N.iterations=ge-2,N.currentItems=i,N.dispatchEvent("change")}var Re,de,Pe;E&&N.added(Me);function Me(){fe(),Pe=Math.min(30,d==HORIZONTAL?L.height/A/3*N.scale*L.scale:L.width/q/3*N.scale*L.scale),Re?Re.siz(Pe,Pe).reg(CENTER):Re=N.beacon=new e.Rectangle({width:Pe,height:Pe,borderColor:R,borderWidth:C,scaleDimensions:!1}).reg(CENTER).rot(45),de||(de=N.ghost=new e.Rectangle({width:100,height:100,borderColor:R,borderWidth:C,dashed:O,scaleDimensions:!1}).reg(CENTER));var we,Xe,ye,Ge;N.mdEvent=N.on("mousedown",function(He){if(ye=He.target,Re.top(),we=null,!(i.indexOf(ye)<0)){Ge=N.localToGlobal(N.getBounds().x,N.getBounds().y);var Oe=ye.boundsToGlobal();N.ghost.siz(Oe.width,Oe.height).reg(CENTER).loc(Oe.x+de.width/2,Oe.y+de.height/2,N.stage),de.diffX=N.stage.frame.mouseX-de.x,de.diffY=N.stage.frame.mouseY-de.y,Xe=L.getChildIndex(ye),N.stage.update()}}),N.pmEvent=N.on("pressmove",function(){if(de.parent){var He=N.stage.frame;de.loc(He.mouseX-de.diffX,He.mouseY-de.diffY);var Oe=N.getObjectUnderPoint((de.x-Ge.x)/N.scaleX,(de.y-Ge.y)/N.scaleY,1);if(i.indexOf(Oe)>=0){var ce=Oe.boundsToGlobal();d==HORIZONTAL?de.x>=ce.x+ce.width/2?(Re.loc(ce.x+ce.width+o/2*N.scaleX*L.scaleX,ce.y+ce.height/2,N.stage),we=L.getChildIndex(Oe)+(I?0:1)):(Re.loc(ce.x-o/2*N.scaleX*L.scaleX,ce.y+ce.height/2,N.stage),we=L.getChildIndex(Oe)+(I?1:0)):de.y>=ce.y+ce.height/2?(Re.loc(ce.x+ce.width/2,ce.y+ce.height+l/2,N.stage),we=L.getChildIndex(Oe)+(I?0:1)):(Re.loc(ce.x+ce.width/2,ce.y-l/2,N.stage),we=L.getChildIndex(Oe)+(I?1:0))}N.stage.update()}}),N.puEvent=N.on("pressup",function(){de.parent&&(we!=null&&(we>Xe&&we--,we!=Xe&&(ye.level=we,i=[],L.loop(function(He,Oe){i.push(He.rot(He.zpRotation||0).sca(1))}),p=me,d==VERTICAL&&se(!0),j(i),_e())),de.removeFrom(),Re.removeFrom(),N.stage.update())})}function fe(){N.mdEvent&&N.off("mousedown",N.mdEvent),N.pmEvent&&N.off("pressmove",N.pmEvent),N.puEvent&&N.off("pressup",N.puEvent),Re&&Re.removeFrom(),de&&de.removeFrom()}function ve(we,Xe,ye){if(we.scale=1,ge++>20){Se&&Se.clear();return}var Ge=!1;if(we.height>ee){if(Y=Xe+1,xe=Math.ceil(te/Y),Xe==Z&&p==VERTICAL)if(ne>he)Y=Te,xe=ie,Ge=!0;else return we}else if(we.height<=ee&&(Y=Math.max(Xe-1,1),xe=Math.ceil(te/Y),Xe==Z&&p==HORIZONTAL))if(ne>he)Y=Te,xe=ie,Ge=!0;else return we;if(Z=G,G=q,q=Y,A=xe,e.loop(i,function(He){f==NONE&&He.surrogate?(i.splice(i.indexOf(He),1),He.dispose()):He.siz(null,ee)},!0),Ie(i,q,A),ne=he,Te=ue,ie=Fe,me==AUTO||p==HORIZONTAL&&Math.round(we.width)==ae||p==VERTICAL&&Math.round(we.height)==ee?he=we.width*we.height:he=0,ue=q,Fe=A,Ge){Se&&Se.clear(),g(we),N.stage&&N.stage.update();return}P?(Se=ri(1,function(){ve(we,q,A)}),g(we),N.stage&&N.stage.update(),we.sca(1)):(we.sca(1),ve(we,q,A))}function Ie(we,Xe,ye){var Ge=0;e.loop(we,function(We,st){We.siz(null,pe),Ge+=We.width});var He=Ge/te,Oe=we;te%Xe!=0&&f==NONE&&e.loop(Xe-te%Xe,function(){var We=new e.Rectangle(He,pe,grey);We.surrogate=!0,Oe.push(We)});var ce=new ai(Oe,Xe,ye,0,0,!0),Ue=[],Qe=e.copy(ce.items2D);if(f!=NONE&&Xe*ye!=te&&Qe.length>1){var Je;if(f==BOTTOM)Je=N.funnel?Math.floor((Xe*ye-te)/2):Math.ceil((Xe*ye-te)/2),e.loop(Je,function(We){Qe[ye-1].unshift(Qe[ye-2].pop())});else{var nt=Xe*ye-te;e.loop(Qe,function(We,st,at){st!=at-1&&e.loop(We.splice(-nt,nt),function(Ae){Qe[st+1].unshift(Ae)},!0)}),Je=N.funnel?Math.floor((Xe*ye-te)/2):Math.ceil((Xe*ye-te)/2),e.loop(Je,function(We){Qe[0].push(Qe[1].shift())})}}e.loop(Qe,function(We,st,at){var Ae=0;e.loop(We,function(mt){Ae+=mt.width});var Le=(ae-o*(We.length-1))/Ae;e.loop(We,function(mt){mt.scale*=Le});var De=e.copy(We);(I&&d==HORIZONTAL||!I&&d==VERTICAL)&&De.reverse();var ft=new ai(De,We.length,1,o,0,!0);I&&ft.loop(function(mt){mt.bot()}),Ue.push(ft)}),ce.dispose();var gt=0;return L.loc($,null,N),L.removeAllChildren(),e.loop(Ue,function(We){We.loc(0,gt,L),gt+=We.height+l,We.loop(function(st,at,Ae){st.addTo(L).ord(-(Ae-at))},!0)}),e.loop(Ue,function(We){We.dispose()},!0),y(L),L}N.getOrder=function(we){if(n(we)&&(we=!1),we){if(!Xe){var Xe=N.pane=new e.Pane({displayClose:!1,container:N.stage,width:Math.min(500,N.stage.width-20),height:Math.min(500,N.stage.height-20),draggable:!0}),ye=N.textArea=new e.TextArea(Math.min(400,N.stage.width-70),Math.min(400,N.stage.height-70));ye.centerReg(Xe)}Xe.show(),ye.text=JSON.stringify(N.order)}return N.order},this.setOrder=function(we){return h(we),j(i),_e(),N},this.addAt=function(we,Xe){return n(we)||(n(Xe)&&(Xe=N.items.length),Array.isArray(we)||(we=[we]),e.loop(we,function(ye,Ge){N.items.push(ye),ye.zpIndex=N.items.length-1,N.currentItems.splice(Xe+Ge,0,ye)}),j(N.currentItems),_e()),N},this.removeAt=function(we,Xe){n(we)&&(we=1),n(Xe)&&(Xe=N.items.length);var ye=N.currentItems.splice(Xe,we);return e.loop(ye,function(Ge){var He=N.items.indexOf(Ge);N.items.splice(He,1)}),j(N.currentItems),_e(),N},Object.defineProperty(N,"order",{get:function(){var we=[];return L.loop(function(Xe){we.push(Xe.zpIndex)}),we},set:function(we){N.setOrder(we)}}),Object.defineProperty(N,"lock",{get:function(){return me},set:function(we){we!=me&&(p=we,j(i),_e(),E&&Me())}}),Object.defineProperty(N,"direction",{get:function(){return d},set:function(we){we!=d&&(d=we,L.rotation=0,i=[],L.loop(function(Xe,ye){i.push(Xe.rot(Xe.zpRotation||0).sca(1))}),d==VERTICAL&&se(!0),j(i),_e(),E&&Me())}}),Object.defineProperty(N,"spacing",{get:function(){return d==VERTICAL?l:o},set:function(we){o=l=we,j(i),_e()}}),Object.defineProperty(N,"outerWidth",{get:function(){return t},set:function(we){t!=we&&(t=we,ae=t-S*2,$&&($.widthOnly=t,$.center(N)),j(i),_e(),E&&Me())}}),Object.defineProperty(N,"outerHeight",{get:function(){return r},set:function(we){r!=we&&(r=we,ee=r-b*2,$&&($.heightOnly=r,$.center(N)),j(i),_e(),E&&Me())}}),Object.defineProperty(N,"flatten",{get:function(){return f},set:function(we){f!=we&&(f=we,j(i),_e())}}),Object.defineProperty(N,"dragOrder",{get:function(){return E},set:function(we){we?Me():(fe(),N.stage&&N.stage.update())}}),K!==!1&&e.styleTransforms(this,J),this.dispose=function(we){return E&&fe(),N.items=null,N.currentItems=null,we||this.zimContainer_dispose(!0),!0},this.clone=function(){return N.cloneProps(new e.Pack(t,r,e.copy(i,!0),o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,e.copy(N.order),this.style,this.group))}},e.extend(e.Pack,e.Container,["dispose","clone"],"zimContainer",!1),e.Beads=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E){var R="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",C;if(C=yt(e.Beads,arguments,R,this))return C;qe("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=S;var O=b===!1?{}:e.getStyle(this.type,this.group,E);n(p)&&(p=O.onTop!=null?O.onTop:!1),n(w)&&(w=O.showControls!=null?O.showControls:!1),n(k)&&(k=O.visible!=null?O.visible:!0),n(x)&&(x=O.interactive!=null?O.interactive:!0),n(t)&&(t=O.path!=null?O.path:new e.Blob({color:null,borderWidth:3,borderColor:e.blue})),t.visible=k,t.interactive=x,t.toggle(w),t.onTop=p,n(r)&&(r=O.obj!=null?O.obj:new e.Circle(10)),n(i)&&(i=O.count!=null?O.count:10),n(o)&&(o=O.angle!=null?O.angle:null),n(l)&&(l=O.startPercent!=null?O.startPercent:0),n(f)&&(f=O.endPercent!=null?O.endPercent:100),n(d)&&(d=O.percents!=null?O.percents:null);var I=f;f<l&&(I=100+f);var _;if(n(d)){var P;t.type=="Squiggle"?P=(I-l)/(i-1):P=(I-l)/(i-(l!=I%100?1:0)),d=[];var F=l-P;for(_=0;_<i;_++)d.push(F+P),F+=P,F>100&&(F-=100)}n(T)&&(T=O.clone!=null?O.clone:!0);var K=this;K.count=i,K.percents=d,K.items=[];var V;for(_=0;_<i;_++)V=e.Pick.choose(r),T&&_!=0&&(V=V.clone()),V.beadNum=_,V.startPercent=d[_],K.items.push(V);K.path=t.addTo(K),K.beads=new e.Container().addTo(K,p?0:null),K.beads.type="BeadsContainer",this.resize=function(){for(var D=t.segmentRatios,U=t.segmentPoints,Q=0;Q<K.count;Q++){var J=t.getCurvePoint(Math.max(0,Math.min(.9999,d[Q]/100)),D,U,!0);if(J){var N=K.beads.globalToLocal(J.x,J.y);N&&K.items[Q].loc(N,null,K.beads).rot(n(o)?J.angle>180?J.angle-360+t.rotation:J.angle+t.rotation:o)}}return this},K.resize(),x&&(t.on("pressmove",K.resize),t.on("update",K.resize)),b!==!1&&e.styleTransforms(this,O),this.dispose=function(D){return D||this.zimContainer_dispose(!0),K.items=[],!0},this.clone=function(D){if(D)for(var U=[],Q=0;Q<K.items.length;Q++)U.push(K.items[Q].clone(!0));return K.cloneProps(new e.Beads(t.clone(),D?e.series(U):r.clone?r.clone():r,K.count,o,l,f,d,p,w,k,x,T,this.style,this.group))}},e.extend(e.Beads,e.Container,["clone","dispose"],"zimContainer",!1),e.Layout=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",b;if(b=yt(e.Layout,arguments,S,this))return b;qe("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=x;var E=k===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=E.holder!=null?E.holder:null),n(p)&&(p=E.scalingObject!=null?E.scalingObject:null),n(t)||!t.getBounds){Hn("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");return}if(p=n(p)?t:p,!p.getBounds||!p.getBounds()){Hn("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var R=p.getBounds();t.setBounds(0,0,R.width,R.height),n(i)&&(i=E.lastMargin!=null?E.lastMargin:0),n(o)&&(o=E.lastMarginMin!=null?E.lastMarginMin:0),n(f)&&(f=E.vertical!=null?E.vertical:!0),n(l)&&(l=E.backgroundColor!=null?E.backgroundColor:""),n(w)&&(w=E.hideKey!=null?E.hideKey:"B"),n(d)&&(d=E.showRegions!=null?E.showRegions:null);var C;d&&(C=new e.Shape);var O=this.backing=new e.Shape,I=this;if(this.active=!0,n(r)&&(r=E.regions!=null?e.copy(E.regions):null),n(r))return;e.loop(r,function(y,g){y instanceof je.DisplayObject&&(r[g]={obj:y}),r[g].object&&(r[g].obj=r[g].object,delete r[g].object)}),this.regions=r;var _,P=0,F="minWidth",K="width",V="height",D="marginLeft",U="marginMinLeft",Q="maxHeight";f&&(F="minHeight",K="height",V="width",D="marginTop",U="marginMinTop",Q="maxWidth");for(var J=[],N=0,te=0;te<r.length;te++){if(_=r[te],!_.obj||!_.obj.getBounds()){ut("Layout(): each region object must have an object with setBounds() set");return}_[F]||(_[F]=0),_[K]||(_[K]=0),_.backgroundColor||(_.backgroundColor=""),_.given=0,_.maxGiven=0,_[D]=="auto"?(J[te]=!0,N++,_[U]?_[D]=_[U]:delete _[D]):_[D]&&_[U]&&_[D]<_[U]&&(_[D]=_[U]),n(_[D])&&(_[D]=1e-4),_[Q]||(_[Q]=100),f?(_.align||(_.align="middle"),_.valign||(te==0?_.valign="top":te==r.length-1?_.valign="bottom":_.valign="middle",r.length==1&&(_.valign="middle"))):(_.valign||(_.valign="top"),_.align||(te==0?_.align="left":te==r.length-1?_.align="right":_.align="middle",r.length==1&&(_.align="middle"))),_[K]&&(_[F]=0),P+=_[K]+_[D]}if(i=="auto"?(J[r.length]=!0,i=o||0):i&&o&&i<o&&(i=o),P+=i,P>100){ut("Layout(): cannot fit regions into 100% bounds");return}var ae=100-P;ee();function ee(){var y=0,g;for(g=0;g<r.length;g++)_=r[g],_.given=0,_[K]==0&&(y+=_.obj.getBounds()[K]);for(g=0;g<r.length;g++)_=r[g],_[K]==0&&(_.given=_.obj.getBounds()[K]/y*ae)}this.resize=function(){var y;if(I.active){for(R=p.getBounds(),t.setBounds(0,0,R.width,R.height),O.graphics.clear(),l!=""&&(pe(O,l),O.graphics.r(0,0,R.width,R.height)),y=0;y<r.length;y++)_=r[y],_.maxGiven=0,_.marginGiven=0;for(var g=!0,h,L,q,A,Y,xe,G=ae;g;){for(g=!1,h=!0,y=0;y<r.length;y++)_=r[y],_.given>0&&_.maxGiven==0&&(L=_.obj.getBounds()[K],q=_.obj.getBounds()[V],A=_.given*R[K]/100,Y=_[Q]*R[V]/100,xe=q/L*A,xe>Y&&_.obj.type!="Window"?(_.maxGiven=L/q*Y*100/R[K],G-=_.maxGiven):h=!1);if(h)break;var Z=0;for(y=0;y<r.length;y++)_=r[y],_[K]==0&&_.maxGiven==0&&(Z+=_.obj.getBounds()[K]);for(y=0;y<r.length;y++)_=r[y],_[K]==0&&_.maxGiven==0&&(_.given=_.obj.getBounds()[K]/Z*G)}var ge=!0;if(_=r[0],_.maxGiven>0?_.maxGiven<_[F]&&(_[K]=_[F],ge=!1):_.given>0&&_.given<_[F]&&(_[K]=_[F],ge=!1),_=r[r.length-1],_.maxGiven>0?_.maxGiven<_[F]&&(_[K]=_[F],ge=!1):_.given>0&&_.given<_[F]&&(_[K]=_[F],ge=!1),!ge){for(P=0,y=0;y<r.length;y++)_=r[y],P+=_[K]+_[D];if(P+=i,P>100){ut("zim display - Layout(): cannot fit regions into 100% bounds");return}ae=100-P,ee(),I.resize();return}var he=!0,ne=0,ue=0;for(y=0;y<r.length;y++)_=r[y],ne+=_[D],_[K]>0?ue+=_[K]:_.maxGiven>0?ue+=_.maxGiven:_.given>0&&(ue+=_.given),_[K]==0&&(he=!1);if(he||h){ne+=i;var Te=100-ue-ne;if(ne-=i+r[0][D],Te!=0&&ne!=0)for(y=0;y<r.length;y++)y!=0&&(_=r[y],_.marginGiven=_[D]/ne*(ne+Te))}if(N>0){var Fe=0,ie=0;for(y=0;y<r.length;y++)_=r[y],_.marginGiven>0?ie+=_.marginGiven:ie+=_[D],_.marginGiven=0,Fe+=_[D]>.05?_[D]:0;var Se=(ie-Fe)/N;for(y=0;y<J.length;y++)J[y]&&r[y]&&(_=r[y],_.marginGiven=(_[U]?_[U]:0)+Se)}var se=0,me=0,j,_e,Re;if(C&&C.graphics){var de=C.graphics;de.c()}for(y=0;y<r.length;y++)_=r[y],_.marginGiven>0?se+=_.marginGiven*R[K]/100:se+=_[D]*R[K]/100,_[K]>0?L=_[K]:_.maxGiven>0?L=_.maxGiven:_.given>0?L=_.given:L=0,L=L*R[K]/100,q=_[Q]*R[V]/100,me=(R[V]-q)/2,f?(_.obj.type=="Wrapper"&&_.obj.resize(q),_.obj.type=="Window"&&_.obj.resize(q,L),_.obj.type=="Region"&&_.obj.setBounds(q,L),j=e.fit(_.obj,me,se,q,L)):(_.obj.type=="Wrapper"&&_.obj.resize(L),_.obj.type=="Window"&&_.obj.resize(L,q),_.obj.type=="Region"&&_.obj.setBounds(L,q),j=e.fit(_.obj,se,me,L,q)),_.valign=="top"?_.obj.y=j.bY:_.valign=="bottom"&&(_.obj.y=j.bY+j.bHeight-j.height),_.align=="left"?_.obj.x=j.bX:_.align=="right"&&(_.obj.x=j.bX+j.bWidth-j.width),C&&C.graphics&&(de.s("white").ss(2).r(j.bX,j.bY,j.bWidth,j.bHeight),de.s("#ff8203").sd([20,20]).r(j.bX,j.bY,j.bWidth,j.bHeight).sd()),Re=_e=0,(se==0||se+L==R[K])&&(f?Re=1:_e=1),q==R[V]&&(f?_e=1:Re=1),_.backgroundColor!=""&&(pe(O,_.backgroundColor),O.graphics.r(j.bX,j.bY,j.bWidth+_e,j.bHeight+Re)),se+=L,_.obj.ZIMoutlineShape&&_.obj.outline()}};function pe(y,g){g.type=="GradientColor"?y.graphics.lf(g.colors,g.ratios,g.x0,g.y0,g.x1,g.y1):g.type=="RadialColor"?y.graphics.rf(g.colors,g.ratios,g.x0,g.y0,g.r0,g.x1,g.y1,g.r1):g.type=="BitmapColor"?y.graphics.bf(g.image,g.repetition,g.matrix):y.graphics.f(_.backgroundColor)}this.resize(),C&&t.addChild(C),t.addChildAt(O,0),le.addEventListener("keydown",$);function $(y){y||(y=event),C&&String.fromCharCode(y.keyCode)==w.toUpperCase()&&(I.toggle(),C.stage&&C.stage.update())}this.disable=function(){I.active=!1,le.removeEventListener("keydown",$),C&&(C.alpha=0)},this.enable=function(){I.active=!0,le.addEventListener("keydown",$),I.resize(),C&&(C.alpha=1)},this.removeShape=function(){C&&(C.graphics.clear(),C.dispose(),C=null,C=!1),le.removeEventListener("keydown",$)},this.toggled=!0,this.toggle=function(y){return y===!0?C.visible=!0:y===!1?C.visible=!1:C.visible=!C.visible,I.toggled=C.visible,I},this.addShape=function(y){I.removeShape(),C=y,le.addEventListener("keydown",$),t.addChild(C),I.resize()},k!==!1&&e.styleTransforms(this,E),p.added?p.added(X):X(p);function X(y){if(y&&y.frame&&y.frame.scaling=="full"){if(!e.globalManager){var g=e.globalManager=new e.Manager;g.frame=y.frame,g.event=y.frame.on("resize",function(){g.resize()})}e.globalManager.add(I)}}this.dispose=function(){if(I.resize=null,e.globalManager){var y=e.globalManager;y.remove(I),e.globalManager.items.length==0&&(y.frame.off("resize",y.event),y.dispose(),e.globalManager=null)}return I.backing&&I.backing.dispose(),I.backing=null,I.removeShape(),!0}},e.extend(e.Layout,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Accessibility=function(t,r,i,o,l,_,d,p,w,k,x,T,S,b,E){var R="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",C;if(C=yt(e.Accessibility,arguments,R,this))return C;qe("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",n(t)&&(t="application"),n(o)&&(o=!1),n(l)&&(l=2),n(_)&&(_=le.zdf),n(d)&&(d=!e.mobile()),n(p)&&(p=!1);var O=v(w);if(n(w)&&(w=O=="s"?.7:700),n(k)&&(k="brown"),n(x)&&(x=3),n(T)&&(T=5),n(S)&&(S=.8),n(E)&&(E=.8),n(b)){var I=new e.Shape({style:!1});I.mouseEnabled=!1}else b.mouseEnabled&&(b.mouseEnabled=!1);if(typeof _>"u")var _=le.zdf;if(n(_)){At&&ut("Accessibility - needs a Frame");return}var P=_.retina&&le.devicePixelRatio||1,F=this;F.cycle=o,F.decimals=l,F.alwaysHighlight=p,F.AHTime=w,F.AHColor=k,F.AHBorderWidth=x,F.AHBorderPadding=T,F.AHAlpha=S,F.AHObjectScale=E;var K=-1,V=-1,D=[],U=[],Q={RadioButtons:"option",Tabs:"tab",Pad:"key"},J,N=_.canvas.id,te=e.mobile(),ae=!1,ee=null,pe=[],$,X,y,g,h,L,q,A=150,Y;Object.defineProperty(this,"tabOrder",{get:function(){return K},set:function(ye){var Ge;for($&&$.removeEventListener("focus",Z),X&&X.removeEventListener("focus",Z),Ge=0;Ge<D.length;Ge++)D[Ge].parentElement&&(D[Ge].outerHTML="");D=[];var He,Oe;for(Ge=0;Ge<U.length;Ge++)He=K[Ge],He&&U[Ge][0].off("mousedown",U[Ge][1]);U=[],K=[];var ce=[];Y=_.shim?document.body:_.canvas,we=!1;var Ue=0;for(Ge=0;Ge<ye.length;Ge++){if(He=ye[Ge],He.type=="HotSpots"&&(ye.splice.apply(ye,[Ge,1].concat(He.hotSpots)),He=He.hotSpots[0]),He.type=="HotSpot"&&(He=He.spot),He.constructor=={}.constructor){if(Oe=He.obj,!Oe||!Oe.getStage)continue;He.title||(He.title=se(Oe,Ge+Ue))}else Oe=He,He={obj:He,title:se(He,Ge+Ue)};if(Oe.type=="RadioButtons"||Oe.type=="Tabs"||Oe.type=="Pad"){var Qe=[];Ue--;for(var Je=0;Je<Oe.buttons.length;Je++){Ue++;var nt=Oe.buttons[Je],gt={obj:nt,title:He.title+" - "+Q[Oe.type]+": "+(nt.text=="a"||nt.text=="A"?"eh":nt.text)};Qe.push(gt),nt.zimTabParent=Oe,nt.zimTabParent.zimAccessibility=F,nt.zimTabIndex=Ge+Ue,nt.tabIndex=Je,nt.zimAccessibility=F,me(gt),Y=j(N+"Tab"+(Ge+Ue),gt.title,Y,gt),U.push([nt,nt.on("mousedown",Se)]),ae||pe.push([nt,nt.on("mousedown",G)])}ce=ce.concat(Qe)}else Oe.zimTabIndex=Ge+Ue,Oe.zimTabParent=Oe,me(He),Oe.zimAccessibility=F,U.push([Oe,Oe.on("mousedown",Se)]),ae||pe.push([Oe,Oe.on("mousedown",G)]),ce.push(He),Y=j(N+"Tab"+(Ge+Ue),He.title,Y,He)}$=F.startAppTag=j(N+"PrefixTab",t+" start",_.shim?document.body:_.canvas,null,"before"),$.addEventListener("focus",Z),ae||($.addEventListener("focus",Te),g=j(N+"noAriaTab","",$,null,"before"),g.setAttribute("aria-hidden",!0),g.focusTab=$,g.addEventListener("focus",ue),L=j(N+"noAriaTab","",$),L.setAttribute("aria-hidden",!0),L.focusTab=$,L.addEventListener("focus",ue)),Y=j(N+"BufferTab","",Y),te&&Y.setAttribute("aria-hidden",!0),Y=X=F.endAppTag=j(N+"SuffixTab",t+" end",Y),X.addEventListener("focus",Z),ae||(X.addEventListener("focus",Te),Y=h=j(N+"noAriaTab","",X),h.setAttribute("aria-hidden",!0),h.focusTab=X,h.addEventListener("focus",ue),q=j(N+"noAriaTab","",X,null,"before"),q.setAttribute("aria-hidden",!0),q.focusTab=X,q.addEventListener("focus",ue)),K=ce}});function xe(){$&&($.removeEventListener("focus",Z),$.removeEventListener("focus",Te),$.parentNode&&($.outerHTML="")),g&&(g.removeEventListener("focus",ue),g.parentNode&&(g.outerHTML="")),L&&(L.removeEventListener("focus",ue),L.parentNode&&(L.outerHTML="")),Y&&Y.parentNode&&(Y.outerHTML=""),X&&(X.removeEventListener("focus",Z),X.removeEventListener("focus",Te),X.parentNode&&(X.outerHTML="")),h&&(h.removeEventListener("focus",ue),h.parentNode&&(h.outerHTML="")),q&&(q.removeEventListener("focus",ue),q.parentNode&&(q.outerHTML=""))}Object.defineProperty(this,"tabIndex",{get:function(){return V},set:function(ye){if(!Xe)return;if(ye<0||ye>=K.length)We();else{ye!=V&&gt();var Ge=K[ye].obj;if(Ge.stage){if(V=ye,Ge.focus=!0,_e=!0,Re=!1,F.changeTitle(Ge),Ge.zimTabTag.focus(),setTimeout(function(){Ge.zimTabTag.focus();var st=new je.Event("change");st.title=Ge.zimTabTag.getAttribute("aria-label"),F.dispatchEvent(st)},A),F.alwaysHighlight&&(!ee||!te)){if(F.AHObject){J=F.AHObject;var nt=e.boundsToGlobal(Ge);F.AHObject.alp(F.AHAlpha).addTo(_.stage,null,!1),F.AHObject.fit(nt.x,nt.y,nt.width,nt.height),F.AHObject.sca(F.AHObject.scaleX*F.AHObjectScale),F.AHTime>0&&(ve=setTimeout(function(){_.stage.removeChild(F.AHObject),_.stage.update()},F.AHTime*(O=="s"?1e3:1)))}else{J=I;var He=Ge.getBounds(),Oe=Ge.localToGlobal(He.x-5,He.y-5),ce=Ge.localToGlobal(He.x+He.width+5,He.y-5),Ue=Ge.localToGlobal(He.x+He.width+5,He.y+He.height+5),Qe=Ge.localToGlobal(He.x-5,He.y+He.height+5),Je=I.graphics;Je.clear(),Je.s(F.AHColor).ss(F.AHBorderWidth).mt(Oe.x-F.AHBorderPadding,Oe.y-F.AHBorderPadding).lt(ce.x+F.AHBorderPadding,ce.y-F.AHBorderPadding).lt(Ue.x+F.AHBorderPadding,Ue.y+F.AHBorderPadding).lt(Qe.x-F.AHBorderPadding,Qe.y+F.AHBorderPadding).lt(Oe.x-F.AHBorderPadding,Oe.y-F.AHBorderPadding).cp(),I.alpha=F.AHAlpha,F.AHTime>0&&(ve=setTimeout(function(){_.stage.removeChild(I),_.stage.update()},F.AHTime*(O=="s"?1e3:1)))}_.stage.addChild(J),_.stage.update()}}else We()}function gt(){if(V&&V>-1)K&&K[V]&&(K[V].obj.focus=!1);else for(var st=0;st<K.length;st++)K[st].obj.focus=!1}function We(){gt(),_e=!1,F.AHObject&&_.stage.removeChild(F.AHObject),F.alwaysHighlightShape&&_.stage.removeChild(F.alwaysHighlightShape),_.stage.update(),V=-1}}}),Object.defineProperty(this,"aria",{get:function(){return ee},set:function(ye){ee=ye,ee&&ge()}});function G(ye){var Ge=ye.currentTarget,He=Ge.boundsToGlobal(),Oe=He.x+He.width/2,ce=He.y+He.height/2,Ue=5;ye.stageX/e.scaX<Oe-Ue||ye.stageX/e.scaX>Oe+Ue||ye.stageY/e.scaY<ce-Ue||ye.stageY/e.scaY>ce+Ue?he():ge()}function Z(){y&&(y.innerHTML="")}te=="android"&&(e.ACTIONEVENT="click",Ot||(le.ACTIONEVENT="click"));function ge(){ee=!0,Fe(),y&&y.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",Ot||(le.ACTIONEVENT="click"),_.stage.removeChild(J),te&&(F.alwaysHighlight=!1),_.stage.update();for(var ye,Ge,He,Oe=0;Oe<K.length;Oe++)ye=K[Oe],Ge=ye.obj,He=Ge.zimTabTag,He.disabled=!1,ye.title=ye.title.replace(/\s\(use arrow keys\)/,""),He.setAttribute("aria-label",ye.title),He.addEventListener("focus",ne)}function he(){ee=!1;for(var ye,Ge,He,Oe=0;Oe<K.length;Oe++)ye=K[Oe],Ge=ye.obj,He=Ge.zimTabTag,He.disabled=!1;Fe(),p&&ie()}function ne(ye){var Ge=ye.currentTarget,He=Ge.zimObject;V=He.zimTabIndex,He.focus=!0;var Oe=new je.Event("change");Oe.title=Ge.getAttribute("aria-label"),F.dispatchEvent(Oe)}function ue(ye){ee=!1,ye.target.focusTab.focus()}function Te(){n(ee)||ee?ge():he()}function Fe(){ae=!0,$.removeEventListener("focus",Te),X.removeEventListener("focus",Te),g.removeEventListener("focus",ue),h.removeEventListener("focus",ue),g.parentNode&&(g.parentNode.removeChild(g),h.parentNode.removeChild(h)),L.removeEventListener("focus",ue),q.removeEventListener("focus",ue),L.parentNode&&(L.parentNode.removeChild(L),q.parentNode.removeChild(q));for(var ye=0;ye<pe.length;ye++)pe[ye][0].off("mousedown",pe[ye][1])}function ie(){for(var ye=0;ye<D.length;ye++){var Ge=D[ye];Ge.zimObject&&(Ge.zimObject.type=="Loader"||Ge.zimObject.type=="TextArea"||Ge.zimObject.type=="Tag")||(D[ye].style.left="-2000px")}}n(r)?setTimeout(function(){if(K==-1){K=[];var ye=[];e.loop(_.stage,function(Ge){Ge.type&&ye.push(Ge)}),F.tabOrder=ye,n(i)||(F.tabIndex=i)}},50):(K=[],F.tabOrder=r,n(i)||(F.tabIndex=i));function Se(ye){var Ge=ye.currentTarget;if(Ge.type=="RadioButton"||Ge.type=="TabsButton"||Ge.type=="PadButton")for(var He=0;He<Ge.zimTabParent.buttons.length;He++){var Oe=Ge.zimTabParent.buttons[He];Oe.zimTabTag.setAttribute("aria-label",Oe.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(Ge.zimTabParent.selectedIndex==Oe.tabIndex?" - currently selected.":" - currently not selected."))}F.tabIndex=ye.currentTarget.zimTabIndex,F.activatedObject=Ge}function se(ye){return ye.talk?ye.talk:ye.type=="TextArea"||ye.type=="RadioButtons"||ye.type=="Tabs"||ye.type=="Pad"?ye.type:ye.type=="Waiter"?"Waiter active - please wait":ye.text?ye.type+" - "+(ye.text=="a"||ye.text=="A"?"eh":ye.text):ye.type+(ye.type=="Dial"||ye.type=="Slider"||ye.type=="ColorPicker"||ye.type=="Stepper"?" (use arrow keys)":"")+(ye.type=="TextArea"?" (press ENTER to edit)":"")}function me(ye){var Ge=ye.obj;ye.title=ye.title.replace(/\.$/,""),Ge.type=="RadioButton"||Ge.type=="TabsButton"||Ge.type=="PadButton"?ye.title=ye.title+(Ge.tabIndex==Ge.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):Ge.type=="CheckBox"?ye.title=ye.title+(Ge.checked?" - currently checked":" - currently not checked"):Ge.type=="Stepper"?ye.title=ye.title+" - currently displaying "+Ge.currentValue:Ge.type=="Slider"||Ge.type=="Dial"?ye.title=ye.title+" - currently at "+e.decimals(Ge.currentValue,F.decimals):Ge.type=="ColorPicker"?ye.title=ye.title+" - currently at "+Ge.selectedColor:Ge.type=="TextArea"?ye.title=ye.title+(Ge.tag.value!=""?"":" - placeholder: "+Ge.tag.placeholder):Ge.type=="Indicator"?ye.title=ye.title+" - currently "+(Ge.selectedIndex>=0?"at "+(Ge.selectedIndex+1)+" of "+Ge.num:"not indicating"):Ge.type=="TextInput"&&(ye.title=ye.title+(Ge.htmlTag.value!=""?"":" - placeholder: "+Ge.htmlTag.placeholder)),ye.title+="."}function j(ye,Ge,He,Oe,ce){var Ue,Qe;if(Oe&&(Ue=Oe.obj),Oe&&(Ue.type=="TextArea"||Ue.type=="Loader"))return Qe=Ue.tag,Qe.setAttribute("aria-label",Ge),Ue&&Qe.setAttribute("aria-hidden",!Ue.stage),ce=="before"?He.parentNode.insertBefore(Qe,He):He.parentNode.insertBefore(Qe,He.nextSibling),Ue.type=="TextArea"?Qe.style.zIndex=3:Qe.style.zIndex=-5,Qe.zimObject=Ue,Oe.obj.zimTabTag=Qe,D.push(Qe),Qe;if(Oe&&Ue.type=="TextInput")return Qe=Ue.htmlTag,Qe.setAttribute("aria-label",Ge),Ue&&Qe.setAttribute("aria-hidden",!Ue.stage),ce=="before"?He.parentNode.insertBefore(Qe,He):He.parentNode.insertBefore(Qe,He.nextSibling),Qe.style.zIndex=-5,Qe.zimObject=Ue,Oe.obj.zimTabTag=Qe,D.push(Qe),Qe;var Je;if(Oe&&(Ue.type=="Dial"||Ue.type=="Slider"||Ue.type=="Stepper"||Ue.type=="ColorPicker")){var nt=[];if(Ue.type=="Dial"||Ue.type=="Slider"){var gt=Ue.step<=0?(Ue.max-Ue.min)/20:Ue.step;for(Je=Ue.min;Je<Ue.max;Je=Je+gt)nt.push(Ue.min+Je)}else Ue.type=="Stepper"?nt=Ue.stepperArray:Ue.type=="ColorPicker"&&(nt=Ue.colors);Qe=document.createElement("select"),Qe.disabled=!0,Qe.zimObject=Ue,Qe.addEventListener("change",function(Ae){!ee&&!te=="android"||(Ae.currentTarget.zimObject.zimTabParent.currentValueEvent=Ae.target.value,_.stage.update())}),Qe.size=1;var We,st;for(Je=0;Je<nt.length;Je++)We=nt[Je],st=document.createElement("option"),st.setAttribute("aria-label",We),st.innerHTML=We,Qe.add(st),We==Ue.zimTabParent.currentValue&&st.setAttribute("selected","selected");Qe.setAttribute("role","button")}else Qe=document.createElement("div"),Ue&&(Qe.zimObject=Ue),Qe.innerHTML="tag",Qe.setAttribute("role",d?"application":"button"),te=="android"&&Qe.addEventListener("click",function(){Ue.dispatchEvent("click")});if(Qe.setAttribute("id",ye),Qe.setAttribute("tabindex",0),Qe.setAttribute("aria-label",Ge),Ue&&Qe.setAttribute("aria-hidden",!Ue.stage),ce=="before"?He.parentNode.insertBefore(Qe,He):He.parentNode.insertBefore(Qe,He.nextSibling),Qe.style.position="absolute",Oe){Ue=Oe.obj;var at=Ue.boundsToGlobal();_.retina?(Qe.style.left=_.x+at.x*_.scale/P+"px",Qe.style.top=_.y+at.y*_.scale/P+"px",Qe.style.width=at.width*_.scale/P+"px",Qe.style.height=at.height*_.scale/P+"px"):(Qe.style.left=_.x+at.x*_.scale+"px",Qe.style.top=_.y+at.y*_.scale+"px",Qe.style.width=at.width*_.scale+"px",Qe.style.height=at.height*_.scale+"px"),Oe.obj.zimTabTag=Qe}else Qe.style.left="-1000px",Qe.style.top=_.y+"px";return Qe.style.overflow="hidden",Qe.style.zIndex=-5,Qe.style.fontSize="20px",Qe.style.color="rgba(0,0,0,.01)",D.push(Qe),Qe}var _e=!1,Re=!0,de=_.on("keydown",function(ye){if(ye.keyCode==9&&(Pe()||(_e=!1,F.tabIndex!=-1&&(F.tabIndex=-1)),_e?fe(ye):Me(ye)),_e&&K.length>0&&F.tabIndex>=0&&ye.keyCode==13){var Ge=K[F.tabIndex],He=Ge.obj;if(Ge&&He.stage){var Oe=new je.Event("mousedown"),ce=new je.Event("click");Oe.fromEnter=ce.fromEnter=!0,He.type=="Pane"?(He.backdrop.dispatchEvent(Oe),He.backdrop.dispatchEvent(ce)):(He.dispatchEvent(Oe),He.dispatchEvent(ce))}}});function Pe(){for(var ye=!1,Ge=0;Ge<D.length;Ge++)if(document.activeElement==D[Ge]){ye=!0;break}return!!(document.activeElement==_.canvas||ye)}function Me(ye){!_.shiftKey&&(wn(N+"PrefixTab")==document.activeElement||_.canvas==document.activeElement)?(K.length>0&&(K[K.length-1].obj.focus=!0),Re=!0,_e=!0,fe(ye)):_.shiftKey&&(wn(N+"SuffixTab")==document.activeElement||wn(N+"BufferTab")==document.activeElement)&&(K.length>0&&(K[0].obj.focus=!0),Re=!0,_e=!0,fe(ye))}function fe(ye){if(ye.ctrlKey){Ie(ye.shiftKey?-1:1);return}ye.shiftKey?F.tab(-1):F.tab(1),ye.preventDefault()}var ve;this.tab=function(ye){if(clearTimeout(ve),J&&_.stage.removeChild(J),n(ye)&&(ye=1),K.length==0){Ie(ye);return}for(var Ge=0;Ge<K.length;Ge++){var He=K[Ge].obj;if(He.focus){He.focus=!1;var Oe=Ge+ye,ce=(Oe+K.length*1e4)%K.length,Ue=K[ce];He=Ue.obj;for(var Qe=0,Je=!1;!(He.stage&&(!He.zimTabParent&&(n(He.enabled)||He.enabled)||He.zimTabParent&&(n(He.zimTabParent.enabled)||He.zimTabParent.enabled)));)if(Qe++,Oe=Oe+ye,ce=(Oe+K.length*100)%K.length,Ue=K[ce],He=Ue.obj,Qe==K.length){Je=!0;break}if(Je||!F.cycle&&Oe!=ce&&!Re){Ie(ye);return}Re=!1,F.tabIndex=ce;break}}};function Ie(ye){_e=!1,wn(N+(ye==1?"SuffixTab":"PrefixTab")).focus(),_.stage.removeChild(b),_.stage.update(),F.tabIndex=-1}this.changeTitle=function(ye,Ge,He){if(typeof ye!="number"&&(ye=ye.zimTabIndex),!n(ye)){if(He&&n(Ge)){F.tabIndex=ye;return}var Oe=K[ye],ce=Oe.obj;n(Ge)&&(Ge=ce.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),Oe.title=Ge,me(Oe),ce.zimTabTag.setAttribute("aria-label",Oe.title),He&&(F.tabIndex=ye)}};var we=!1;this.talk=function(ye){we||(y=j(N+"TalkTab","",X),y.setAttribute("role","alert"),we=!0),y.removeAttribute("role"),y.setAttribute("aria-label",ye),y.setAttribute("role","alert");var Ge=new je.Event("change");Ge.title=ye,F.dispatchEvent(Ge)},this.resize=function(ye){if(n(ye))for(var Oe=0;Oe<K.length;Oe++)ce(K[Oe].obj);else{if(typeof ye!="number"&&(ye=ye.zimTabIndex),ye<0)return;var Ge=K[ye],He=Ge.obj;!He.stage&&J&&He==F.currentObject&&(_.stage.removeChild(J),_.stage.update()),ce(He)}function ce(Ue){if(Ue.type=="TextArea"||Ue.type=="Loader"){Ue.resize();return}else{var Qe=Ue.boundsToGlobal(),Je=Ue.zimTabTag;_.retina?(Je.style.left=_.x+Qe.x*_.scale/P+"px",Je.style.top=_.y+Qe.y*_.scale/P+"px",Je.style.width=Qe.width*_.scale/P+"px",Je.style.height=Qe.height*_.scale/P+"px"):(Je.style.left=_.x+Qe.x*_.scale/P/P+"px",Je.style.top=_.y+Qe.y*_.scale/P/P+"px",Je.style.width=Qe.width*_.scale/P/P+"px",Je.style.height=Qe.height*_.scale/P/P+"px")}Je.setAttribute("aria-hidden",!Ue.stage),Je.hidden=!Ue.stage}},Object.defineProperty(this,"currentObject",{get:function(){return K[V]&&K[V].obj?K[V].obj:null},set:function(ye){for(var Ge=0;Ge<K.length;Ge++)if(K[Ge].obj==ye){F.tabIndex=Ge;break}}});var Xe=!0;Object.defineProperty(this,"enabled",{get:function(){return Xe},set:function(ye){Xe=ye}}),this.dispose=function(){I&&I.graphics.clear(),F.tabOrder=[];for(var ye=0;ye<D.length;ye++)D[ye].parentElement&&(D[ye].outerHTML="");xe(),F.removeAllEventListeners(),_.off("keydown",de)}},e.extend(e.Accessibility,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.TextureActive=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R){var C="width, height, color, color2, angle, borderColor, borderWidth, corner, interactive, animated, backingOrbit, pattern, scalePattern, style, group, inherit",O;if(O=yt(e.TextureActive,arguments,C,this))return O;qe("35.2"),this.group=E;var I=b===!1?{}:e.getStyle("TextureActive",this.group,R);n(t)&&(t=I.width!=null?I.width:le.zdf.width),n(r)&&(r=I.height!=null?I.height:le.zdf.height),n(w)&&(w=I.interactive!=null?I.interactive:!0),n(k)&&(k=I.animated!=null?I.animated:!0),n(i)&&(i=I.color!=null?I.color:null),n(o)&&(o=I.color2!=null?I.color2:null),n(l)&&(l=I.angle!=null?I.angle:null),n(f)&&(f=I.borderColor!=null?I.borderColor:null),n(d)&&(d=I.borderWidth!=null?I.borderWidth:null),f<0||d<0?f=d=null:f!=null&&d==null&&(d=1),n(p)&&(p=I.corner!=null?I.corner:10),n(x)&&(x=I.backingOrbit!=null?I.backingOrbit:!0),n(T)&&(T=I.pattern!=null?I.pattern:null),n(S)&&(S=I.scalePattern!=null?I.scalePattern:null),this.zimPage_constructor(t,r,i,o,l,T,S,null,b,E,R),this.type="TextureActive",p&&(this.backing.corner=p),n(d)||(this.backing.borderWidth=d),n(f)||(this.backing.borderColor=f),(d||!n(f))&&(this.backing.siz(this.width-d,this.height-d),this.backing.center()),this.backing.mouseChildren=!1,this.interactive=w,this.animated=k,this.backingOrbit=x,b!==!1&&e.styleTransforms(this,I),this.clone=function(){return this.cloneProps(new e.TextureActive(t,r,i,o,l,f,d,p,w,k,x,T,S,b,this.group,R))}},e.extend(e.TextureActive,e.Page,["clone"],"zimPage",!1),e.TextureActive.makeLogo=function(t,r){n(t)&&(t="light");var i=t!="dark",o=i?e.light:e.dark,l=i?e.dark:e.light,f=i?e.white:e.black,d=i?e.black:e.white,p=new e.Container(400,100),w=le.zdf.makeIcon(o,l,[o,o,o,o,o]).ske(0,30).scaleTo(p,100,100).center(p),k=new e.Rectangle((400-w.width)/2+4,80-10,new e.GradientColor([i?o:f,i?f:o,i?o:f],-70),d,.5).addTo(p),x=k.clone().pos(0,0,"right","bottom",p);return new e.Label({text:"Texture",size:50,color:l,variant:!0}).scaleTo(k,75,75).center(k),new e.Label({text:"Active",size:50,color:l,variant:!0}).scaleTo(k,72,72).center(x),r?p:p.noMouse()},e.TextureActive.makeBacking=function(t,r,i,o){n(t)&&(t=800),n(r)&&(r=600),n(i)&&(i="CANVAS WINDOW"),n(o)&&(o=e.light);var l=new e.Container(t,r);return l.icon=le.zdf.makeIcon({box:black}).scaleTo(l,75,70),l.label=new e.Label(i,30,null,o).scaleTo(l.icon,100,15),l.tile=new e.Tile({obj:[l.icon,l.label],rows:2,spacingV:l.label.width*.05,unique:!0,align:CENTER}).center(l),l.tile.items[1].mov(-l.label.width*.05),l},e.TextureActives=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C){var O="actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey, color, outerColor, style, group, inherit",I;if(I=yt(e.TextureActives,arguments,O,this))return I;qe("35.4"),this.group=R;var _=E===!1?{}:e.getStyle("TextureActives",this.group,C),P,F,K="ZIM TextureActives - need a ZIM Frame";if(n(t)&&n(t[0]))if(le.zdf)F=le.zdf,P=le.zdf.stage;else{ut(K);return}else if(n(t[0].stage))if(le.zdf)F=le.zdf,P=le.zdf.stage;else{ut(K);return}else P=t[0].stage,F=P.frame;n(t)&&(t=_.actives!=null?_.actives:null),n(r)&&(r=_.threejs!=null?_.threejs:null),n(i)&&(i=_.zimThree!=null?_.zimThree:null),n(o)&&(o=_.renderer!=null?_.renderer:null),n(l)&&(l=_.scene!=null?_.scene:null),n(f)&&(f=_.camera!=null?_.camera:null),n(d)&&(d=_.controls!=null?_.controls:null),n(p)&&(p=_.layers!=null?_.layers:[]),Array.isArray(p)||(p=[p]),n(w)&&(w=_.near!=null?_.near:void 0),n(k)&&(k=_.far!=null?_.far:void 0),n(x)&&(x=_.ignoreList!=null?_.ignoreList:[]),Array.isArray(x)||(x=[x]),n(T)&&(T=_.toggleKey!=null?_.toggleKey:"t"),n(S)&&(S=_.color!=null?_.color:e.darker),n(b)&&(b=_.outerColor!=null?_.outerColor:"black");var V=this;e.TAM||(e.TAM=new e.TextureActivesManager(P,T)),V.manager=e.TAM,this.ignoreList=x,this.raycast=!0,this.renderer=o,this.layers=p,this.animated=!1,this.interactive=!1,this.actives=[],this.threeMeshes=[];var D=!1;function U(J){n(J)&&(J=[]),Array.isArray(J)||(J=[J]);var N=0,te,ae;return e.loop(J,function(ee){V.actives.indexOf(ee)<0&&(V.actives.push(ee),ee.cache(),ee.canvas.content=ee,ee.interactive&&(te=!0,ee.canvas.isTextureActive=!0),ee.animated&&(ae=!0),N++)}),te&&!V.interactive&&(V.interactive=!0,N>0&&Q()),ae&&!V.animated&&(V.animated=!0),N}U(t),e.TAM.updateTile(V,V.actives),e.TAM.color=S,e.TAM.outerColor=b,F.canvas.style.display="none";function Q(){if(D)return;D=!0,V.pointerCheck||(V.pointerCheck=e.TAM.addPointer(V)),V.pointerData={x:F.mouseX,y:F.mouseY,mousedown:!1};var J=window.innerWidth,N=window.innerHeight,te=-1,ae=-2,ee=-1,pe=-2;V.overInterval=e.interval(.05,function(){if(ae&&ae!=te||pe&&pe!=ee){var q=new je.Event("rayover");q.mesh=V.mesh=ae,q.material=V.material=pe,pe.userData&&(q.textureActive=V.textureActive=pe.userData.ta_content),q.intersect=V.intersect,V.dispatchEvent(q),d&&!d.screenSpacePanning&&(d.activeLook=!1)}else if(!ae&&te||!pe&&ee){var q=new je.Event("rayout");q.mesh=te,q.material=ee,ee.userData&&(q.textureActive=ee.userData.ta_content),q.intersect=V.intersect,V.dispatchEvent(q),d&&!d.screenSpacePanning&&(d.activeLook=!0)}te=ae,ee=pe});var $=V.raycaster=new r.Raycaster(void 0,void 0,w,k);p.length>0&&e.loop(p,function(q){$.layers.set(q)});var X;window.addEventListener("pointerdown",y);function y(q){if(V.raycast){var A;!i||i.resizeEvent?A={x:q.clientX/window.innerWidth*2-1,y:1-q.clientY/window.innerHeight*2}:A={x:q.clientX/J*2-1,y:1-q.clientY/N*2},$.setFromCamera(A,f);var Y=$.intersectObjects(l.children);X=null;var xe,G,Z;for(G=0;G<Y.length;G++)if(xe=Y[G].object,!(V.ignoreList.indexOf(xe)>-1)){if(V.threeMeshes.indexOf(xe)>-1)if(xe.material&&Array.isArray(xe.material))Z=xe.material[Y[G].face.materialIndex];else if(xe.material)Z=xe.material;else break;if(Z&&Z.map&&Z.map.source&&Z.map.source.data&&Z.map.source.data.isTextureActive&&Z.userData.ta_content){X=xe;var ge=Z.userData.ta_content;if(V.pointerData.mousedown=!0,L(ge,Y[G],Z.userData.ta_flipped),je.handleRemotePointer(V.pointerData.x,V.pointerData.y,"down",q,P,q.pointerID),d&&d.maxAzimuthAngle&&ge)if(ge.backingOrbit){var he=ge.globalToLocal(F.mouseX,F.mouseY),ne=ge.backing;ne&&ge.getObjectUnderPoint(he.x,he.y,1)!=ne?d.enableRotate=!1:d.enableRotate=!0}else d.enableRotate=!1;var q=new je.Event("raydown");q.mesh=V.mesh=xe,q.material=V.material=Z,q.textureActive=V.textureActive=ge,q.intersect=V.intersect=Y[G],V.dispatchEvent(q);break}else break}}}window.addEventListener("pointerup",g);function g(q){if(V.raycast){if(V.pointerData.mousedown=!1,d&&d.maxAzimuthAngle&&(d.enableRotate=!0),X){var q=new je.Event("rayup");q.mesh=V.mesh,q.material=V.material,q.textureActive=V.textureActive,q.intersect=V.intersect,V.dispatchEvent(q)}X=null,je.handleRemotePointer(null,null,"up",q,P,-1)}}window.addEventListener("pointermove",h);function h(q){if(V.raycast){var A;!i||i.resizeEvent?A={x:q.clientX/window.innerWidth*2-1,y:1-q.clientY/window.innerHeight*2}:A={x:q.clientX/J*2-1,y:1-q.clientY/N*2},$.setFromCamera(A,f);var Y=!1,xe,G,Z;if(X){let ne=$.intersectObject(X);if(ne.length>0&&(xe=X,xe.material&&Array.isArray(xe.material)?Z=xe.material[ne[0].face.materialIndex]:xe.material&&(Z=xe.material),Z)){var ge=Z.userData.ta_content;L(ge,ne[0],Z.userData.ta_flipped),je.handleRemotePointer(V.pointerData.x,V.pointerData.y,"move",q,P,q.pointerID),Y=!0;var q=new je.Event("raymove");q.mesh=ae=V.mesh=xe,q.material=pe=V.material=Z,q.textureActive=V.textureActive=ge,q.intersect=V.intersect=ne[0],V.dispatchEvent(q)}}else{var he=$.intersectObjects(l.children);for(G=0;G<he.length;G++)if(xe=he[G].object,!(V.ignoreList.indexOf(xe)>-1)){if(V.threeMeshes.indexOf(xe)>-1)if(xe.material&&Array.isArray(xe.material))Z=xe.material[he[G].face.materialIndex];else if(xe.material)Z=xe.material;else break;if(Z&&Z.map&&Z.map.source&&Z.map.source.data&&Z.map.source.data.isTextureActive&&Z.userData.ta_content){var ge=Z.userData.ta_content;L(ge,he[G],Z.userData.ta_flipped),je.handleRemotePointer(V.pointerData.x,V.pointerData.y,"move",q,P,q.pointerID),Y=!0;var q=new je.Event("raymove");q.material=pe=V.material=Z,q.mesh=ae=V.mesh=xe,q.textureActive=V.textureActive=ge,q.intersect=V.intersect=he[G],V.dispatchEvent(q);break}else break}}Y||(ae=null,pe=null),e.TAM.setActive(V,Y)}}function L(q,A,Y){if(!(!q||!q.getBounds)){var xe=q.getBounds(),G=Y?xe.width-A.uv.x*xe.width:A.uv.x*xe.width,Z=(1-A.uv.y)*xe.height,ge=q.localToGlobal(G,Z);V.pointerData.x=ge.x,V.pointerData.y=ge.y}}}this.add=function(J){var N=U(J);return N>0&&e.TAM.updateTile(V,V.actives),V},this.remove=function(J){n(J)&&(J=[]),Array.isArray(J)||(J=[J]);var N=0;return e.loop(J,function(te){if(je.remoteQueue){var ae=je.remoteQueue.indexOf(te);ae>=0&&je.remoteQueue.splice(ae,1)}ae=V.actives.indexOf(te),ae>=0&&(V.actives.splice(ae,1),N++),te.textureMap&&delete te.textureMap.userData.ta_content,ae=V.threeMeshes.indexOf(te),ae>=0&&V.threeMeshes.splice(ae,1),te.dispose()},!0),N>0&&e.TAM.updateTile(V,V.actives),V},V.addMesh=function(J,N){if(n(N)||J.layers.enable(N),J.material){var te=V.threeMeshes.indexOf(J);if(te<0)V.threeMeshes.push(J);else return V;var ae;Array.isArray(J.material)?ae=J.material:ae=[J.material],e.loop(ae,function(ee){if(ee&&ee.map&&ee.map.source&&ee.map.source.data&&ee.map.source.data.content){var pe=ee.map.source.data.content;pe.mesh=J,J.textureActive=!0,ee.userData.ta_content=pe,pe.textureMaps||(pe.textureMaps=[]);var $=pe.textureMaps.indexOf(ee.map);$<0&&pe.textureMaps.push(ee.map),(pe.animated||pe.interactive)&&(je.remoteQueue||(je.remoteQueue=[]),je.remoteQueue.indexOf(pe)<0&&je.remoteQueue.push(pe))}})}return V},V.dispose=function(){V.raycast=!1,d&&(d.enableRotate=!0,d.enabled=!0),V.remove(V.actives),e.TAM.remove(V),e.TAM.count<1&&(e.TAM.dispose(),e.TAM=null),V.material=V.mesh=V.content=V.intersect=null}},e.extend(e.TextureActives,je.EventDispatcher,"dispose"),e.TextureActivesManager=function(t,r){qe("35.6");var i=this;this.type="TextureActivesManager",i.color=e.darker,i.outerColor="black",i.toggleKey=r||"t";var o=i.objects=new e.Dictionary(!0),l=t.frame;i.backing=new e.Rectangle(100,100,e.faint).addTo(t,0),i.updateTile=function(k,x,T){T||o.add(k,x);var S=[];if(e.loop(o,function(E,R){e.loop(R,function(C){S.push(C)})}),S.length<0){var b=i.message=new e.Rectangle(W,H,e.yellow);new e.Label("No TextureActives Added").center(b),S.push(b)}i.tile?(i.tile.cols=S.length,i.tile.remake(S)):i.tile=new e.Tile(S,S.length,1,20,0,!0).addTo(t),i.backing.scaleTo(i.tile,100,100,"full").siz(null,t.height,!0)},this.addPointer=function(k){var x=[];return e.loop(o,function(T){x.indexOf(T.renderer.domElement)<0&&x.push(T.renderer.domElement)}),x.indexOf(k)<0&&x.push(k.renderer.domElement),je.remotePointers?je.remotePointers=x:je.addRemotePointers(t,x),!0},this.setActive=function(k,x){if(k.active=x,!x){var T=e.loop(o,function(S){if(S.active)return!1});T&&(t.mouseInBounds=!1)}};var f=this.nav=new e.Panel({width:200,height:80,titleBar:"TextureActives",draggable:!0,close:!0}).pos(50,50,RIGHT,BOTTOM),d=this.slider=new e.Slider({min:0,max:100,damp:.1}).scaleTo(f,80);d.on("mousedown",function(){i.swiper.enabled=!1}),d.on("pressup",function(){setTimeout(function(){i.swiper.immediate(d.currentValue),i.swiper.enabled=!0},500)}),f.on("close",function(){i.hide(),f.addTo()}),this.ticker=e.Ticker.add(function(){i.tile.x=-d.currentValue*(i.tile.width-W)/100}),f.add(d,0,!0),f.removeFrom(),e.Ticker.remove(i.ticker),i.swiper=new e.Swiper({swipeOn:i.backing,target:d,property:"currentValue",sensitivity:-.1}),i.toggled=!1;var p=l.color,w=l.outerColor;this.show=function(){if(!i.toggled)return l.color=i.color,l.outerColor=i.outerColor,i.toggled=!0,e.Ticker.add(i.ticker),f.addTo(),e.loop(o,function(k){k.lastRaycast=k.raycast,k.raycast=!1,k.renderer.domElement.style.display="none"}),l.canvas.style.display="block",je.removeRemotePointers(t),this},this.hide=function(){if(i.toggled){l.color=p,l.outerColor=w,i.toggled=!1,e.Ticker.remove(i.ticker),f.removeFrom();var k=[];return e.loop(o,function(x){x.raycast=x.lastRaycast,x.renderer.domElement.style.display="block",k.push(x.renderer.domElement)}),l.canvas.style.display="none",je.addRemotePointers(t,k),this}},i.toggle=function(k){return n(k)&&(k=!i.toggled),k&&!i.toggled?i.show():!k&&i.toggled&&i.hide(),this},i.keyEvent=l.on("keydown",function(k){k.key==i.toggleKey&&(i.toggled?i.hide():i.show())}),i.remove=function(k){o.remove(k),i.updateTile(null,null,!0)},i.dispose=function(){i.hide(),f.dispose(),l.off("keydown",i.keyEvent),i.objects.dispose(),i.tile.dispose(),i.objects=i.tile=f=null}},e.extend(e.TextureActivesManager,je.EventDispatcher),e.Manager=function(t){qe("75");var r=this;this.type=t,this.items=[],this.add=function(l){return Array.isArray(l)?r.items=r.items.concat(l):r.items.push(l),r};var i,o;this.remove=function(l){if(r){if(!l)r.items=[];else for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--){o=l[i];var f=r.items.indexOf(o);f!=-1&&r.items.splice(f,1)}return r}},this.resize=function(l){if(r){if(l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.resize();else for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].resize():r.items.splice(i,1);return r}},this.toggle=function(l,f){if(r){if(f)for(Array.isArray(f)||(f=[f]),d=f.length-1;d>=0;d--)o=f[d],!o.resize&&r.items.indexOf(o)!=-1?r.items.splice(r.items.indexOf(o),1):o.toggle(l);else for(var d=r.items.length-1;d>=0;d--)r.items[d].resize?r.items[d].toggle(l):r.items.splice(d,1);return r}},this.dispose=function(l){if(r){if(r.resize=null,l)for(Array.isArray(l)||(l=[l]),i=l.length-1;i>=0;i--)o=l[i],r.items.indexOf(o)!=-1&&r.items.splice(r.items.indexOf(o)),o.dispose&&o.dispose();else{for(i=r.items.length-1;i>=0;i--)r.items[i].resize?r.items[i].dispose():r.items.splice(i,1);r.items=null}return!0}}},e.ResizeManager=function(){qe("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(t,r){qe("75.7");var i=this;this.type="TransformManager",this.persistID=r,this.items=[];function o(f){!localStorage||f&&!f.pressup||i.savePersist(f)}this.add=function(f){var d=[];Array.isArray(f)?d=f:d=[f];for(var p,w=!1,k=0;k<d.length;k++)if(p=d[k],p.transformControls&&(p.originalVisible=p.transformControls.visible),p.toggle&&p.toggle(!1),i.items.length==0&&k==0&&(w=!0),p.type=="Blob"||p.type=="Squiggle")i.persistID||w&&(w=!1,p.controlsVisible=!0,i.currentObject=p),p.on("change",function(T){var S=new je.Event("transformed");S.transformObject=T.target,S.transformType=T.controlType,i.dispatchEvent(S)}),p.on("controlsshow",function(T){var S=new je.Event("transformshow");i.currentObject=S.transformObject=T.target,i.dispatchEvent(S)}),p.on("controlshide",function(T){var S=new je.Event("transformhide");S.transformObject=T.target,i.currentObject=null,i.dispatchEvent(S)}),p.on("update",function(T){var S=new je.Event("transformed");S.transformObject=T.target,S.transformType=T.controlType,i.dispatchEvent(S)});else if(p.type=="Connectors")i.persistID||w&&(w=!1,i.currentObject=p),p.on("connection",function(T){var S=new je.Event("transformed");S.transformObject=T.target,S.transformType="connection",i.dispatchEvent(S)});else if(p.type=="Pack")i.persistID||w&&(w=!1,i.currentObject=p),p.on("change",function(T){var S=new je.Event("transformed");S.transformObject=T.target,S.transformType="change",i.dispatchEvent(S)});else{var x=p.transformControls;i.persistID||w&&p.type!="Layer"&&(w=!1,p.originalVisible&&(x.show(),i.currentObject=p)),p.on("transformed",function(T){var S=new je.Event("transformed");S.transformObject=T.target,S.transformType=T.transformType,i.dispatchEvent(S)}),p.on("transformshow",function(T){var S=new je.Event("transformshow");i.currentObject=S.transformObject=T.target,i.dispatchEvent(S)}),p.on("transformhide",function(T){var S=new je.Event("transformhide");S.transformObject=T.target,i.currentObject=null,i.dispatchEvent(S)})}i.items=i.items.concat(f),i.persist&&!n(i.persistID)&&i.persist(i.persistID)},this.remove=function(f){if(n(f)){i.items=[];return}Array.isArray(f)||(f=[f]);for(var d,p=0;p<f.length;p++){d=f[p],i.currentObject==d&&(i.currentObject=null),d.transformedEvent&&(d.off("transformed",d.transformedEvent),d.transformedEvent=null),d.type=="Blob"||d.type=="Squiggle"?d.controlsVisible=!1:d.transformControls&&d.transformControls.remove();var w=i.items.indexOf(d);w!=-1&&i.items.splice(w,1)}r&&i.savePersist()},this.show=function(f){if(!n(f)){if(f.type=="Blob"||f.type=="Squiggle")f.controlsVisible||(f.controlsVisible=!0);else{var d=f.transformControls;if(!d||d.visible)return;d.show()}i.currentObject=f}},this.hide=function(f){if(!n(f))if(i.currentObject==f&&(i.currentObject=null),f.type=="Blob"||f.type=="Squiggle")f.controlsVisible&&(f.controlsVisible=!1);else{var d=f.transformControls;if(!d||d.visible)return;d.hide()}},this.hideAll=function(f){for(var d,p,w=0;w<i.items.length;w++)if(p=i.items[w],!p||!(p.transformControls||p.update))i.items.splice(w);else{if(i.items[w]==f)continue;p.type=="Blob"||p.type=="Squiggle"?p.controlsVisible&&(p.controlsVisible=!1):(d=i.items[w].transformControls,d.visible&&d.hide())}i.currentObject=null},this.resize=function(){if(i){for(var f,d=0;d<i.items.length;d++)f=i.items[d],!f||!(f.transformControls||f.update)?i.items.splice(d):f.type=="Blob"||f.type=="Squiggle"?f.update():f.transformControls.resize();r&&i.savePersist()}},n(t)||i.add(t);var l="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(f){var d,p;if(n(f)&&At){ut(l);return}i.persistID=f;var w=0;if(localStorage&&localStorage[f]){var k=i.persistData=JSON.parse(localStorage[f]);if(k.length==i.items.length)for(p=0;p<i.items.length;p++)k[p].controls&&(i.currentObject=i.items[p]),k[p]&&(k[p].type=="Blob"||k[p].type=="Squiggle")?(i.items[p].points.length!=k[p].points.length&&(i.items[p].points=k[p].points),i.items[p].setData(k[p]),i.items[p]==i.currentObject&&i.currentObject.toggle(!0),w++,w==k.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):k[p]&&k[p].type=="Connectors"?(i.items[p].setSteps(k[p].steps),i.items[p].loc(k[p].x,k[p].y),i.items[p].sca(k[p].scale),w++,w==k.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):k[p]&&k[p].type=="Pack"?(i.items[p].setOrder(k[p].order),i.items[p].outerWidth=k[p].outerWidth,i.items[p].outerHeight=k[p].outerHeight,w++,w==k.length&&setTimeout(function(){i.dispatchEvent("persistcomplete")},100)):k[p]&&(n(i.items[p].transformControls)?-function(){var x=d=i.items[p],T=k[p];e.interval(50,function(S){x.transformControls&&(x.transformControls.setData(T),x.dispatchEvent("persistset"),w++,w==k.length&&(setTimeout(function(){x==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),S.clear()))},20,null,null,"ms")}():(i.items[p].transformControls.setData(k[p]),-function(){var x=d=i.items[p];e.interval(50,function(T){x.dispatchEvent("persistset"),w++,w==k.length&&(setTimeout(function(){x==i.currentObject&&i.currentObject.toggle(!0),i.dispatchEvent("persistcomplete")},100),T.clear())},20,null,null,"ms")}()))}for(p=0;p<i.items.length;p++)d=i.items[p],d.transformedEvent||(d.type=="Blob"||d.type=="Squiggle"?(d.transformedEvent=d.on("change",function(x){x.pressup=!0,o(x)}),d.transformedUEvent=d.on("update",function(x){x.pressup=!0,o(x)}),d.transformedSEvent=d.on("controlsshow",function(x){x.pressup=!0,o(x)}),d.transformedHEvent=d.on("controlshide",function(x){x.pressup=!0,o(x)})):d.type=="Connectors"?d.transformedEvent=d.on("connection",function(x){x.pressup=!0,o(x)}):d.type=="Pack"?d.transformedEvent=d.on("change",function(x){x.pressup=!0,o(x)}):(d.transformedEvent=d.on("transformed",o),d.transformedSEvent=d.on("transformshow",o),d.transformedHEvent=d.on("transformhide",o)))},this.savePersist=function(){for(var f=[],d=0;d<i.items.length;d++){var p=i.items[d];p.type=="Blob"||p.type=="Squiggle"?p.recordData&&f.push(p.recordData()):p.type=="Connectors"?f.push({type:p.type,x:p.x,y:p.y,scale:p.scale,steps:p.getSteps()}):p.type=="Pack"?f.push({type:p.type,outerWidth:p.outerWidth,outerHeight:p.outerHeight,order:p.getOrder()}):p.transformControls&&p.transformControls.recordData&&f.push(p.transformControls.recordData())}i.persistData=f,localStorage[i.persistID]=JSON.stringify(f)},this.clearPersist=function(f){if(n(f)&&At){ut(l);return}i.persistData=null,localStorage&&localStorage.removeItem(f)},this.stopPersist=function(){for(var f=0;f<i.items.length;f++){var d=i.items[f];d.transformedEvent&&(d.type=="Blob"||d.type=="Squiggle"?(d.off("change",d.transformedEvent),d.off("update",d.transformedUEvent),d.off("controlsshow",d.transformedSEvent),d.off("controlshide",d.transformedHEvent)):d.type=="Connectors"?d.off("connection",d.transformedEvent):d.type=="Pack"?d.off("change",d.transformedEvent):(d.off("transformed",d.transformedEvent),d.off("transformshow",d.transformedSEvent),d.off("transformhide",d.transformedHEvent)),d.transformedEvent=null,d.transformedUEvent=null,d.transformedSEvent=null,d.transformedHEvent=null)}i.persistData=null},n(r)||i.persist(r),this.dispose=function(f,d){if(n(f)&&(f=!0),i.removeAllEventListeners(),i.persistID&&f&&i.stopPersist(),d)for(var p=0;p<i.items.length;p++){var w=i.items[p];w.type=="Blob"||w.type=="Squiggle"?w.dispose():w.transformControls.dispose()}}},e.extend(e.TransformManager,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.GuideManager=function(){qe("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.GridManager=function(){qe("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.LayoutManager=function(){qe("81"),e.Manager.call(this,"LayoutManager")},e.LayoutManager.prototype=new e.Manager,e.LayoutManager.prototype.constructor=e.LayoutManager,e.SelectionSet=function(t){qe("81.5"),this.type="SelectionSet",n(t)&&(t=[]),this.selections=t,this.clear=function(){this.selections=[]},this.isSelected=function(r){return this.selections.indexOf(r)>=0},this.add=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear();var f=this.selections.indexOf(r);if(!(f>=0)){if(this.selections.push(r),!n(o)){Array.isArray(o)||(o=[o]);for(var d=0;d<=o.length;d++)o[d].add(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),d=0;d<=l.length;d++)l[d].remove(r,i)}}},this.remove=function(r,i,o,l){if(!n(r)){n(i)&&(n(this.selectionManager)||(i=this.selectionManager.multiple)),n(this.selectionManager)||this.selectionManager.setCurrent(this),i||this.clear();var f=this.selections.indexOf(r);if(n(this.selectionManager)||(this.selectionManager.setCurrent(this),!i&&this.selectionManager.multipleSets&&this.selectionManager.clear()),i||this.clear(),i?f>=0&&this.selections.splice(f,1):this.clear(),!n(o)){Array.isArray(o)||(o=[o]);for(var d=0;d<=o.length;d++)o[d].remove(r,i)}if(!n(l))for(Array.isArray(l)||(l=[l]),d=0;d<=l.length;d++)l[d].add(r,i)}},this.toggle=function(r,i,o,l){this.isSelected(r)?this.remove(r,i,o,l):this.add(r,i,o,l)},this.dispose=function(){return this.clear(),this.selections=null,!0}},e.SelectionManager=function(t,r,i){qe("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",n(t)&&(t=[]),n(i)&&(i=!0),Array.isArray(t)||(t=[t]),this.sets=t,this.multipleKey=r,this.multipleSets=i,this.multiple=!1;for(var o=this,l=0;l<t.length;l++)t[l].selectionManager=this;this.clear=function(){this.currentSet=null;for(var d=0;d<t.length;d++)t[d].clear()},this.setCurrent=function(d){this.currentSet=d;for(var p=0;p<t.length;p++)t[p]!=d&&(this.multipleSets||t[p].clear())};var f=new je.Event("keydown");this.eventRemove=f.remove,this.keydownEvent=function(d){d.remove=o.eventRemove,o.multipleKey&&(o.multiple=d[o.multipleKey+"Key"]),o.ctrlKey=d.ctrlKey,o.shiftKey=d.shiftKey,o.metaKey=d.metaKey,o.dispatchEvent(d),d.keyCode==90&&(o.ctrlKey||o.metaKey)&&o.dispatchEvent("undo")},le.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(d){o.multipleKey&&(o.multiple=d[o.multipleKey+"Key"]),o.ctrlKey=d.ctrlKey,o.shiftKey=d.shiftKey,o.metaKey=d.metaKey,d.remove=o.eventRemove,o.dispatchEvent(d)},le.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),le.removeEventListener("keydown",this.keydownEvent),le.removeEventListener("keyup",this.keyupEvent)}},e.extend(e.SelectionManager,je.EventDispatcher,null,"cjsEventDispatcher",!1),typeof m>"u")var m;e.Bind=function(t,r,i,o,l,f,d,p){var w="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",k;if(k=yt(e.Bind,arguments,w,this))return k;qe("81.8"),this.type="Bind";var x=this;n(t)&&localStorage&&n(m)&&(n(r)||r==e.LOCALSTORAGE)?(t="zimBind",r=e.LOCALSTORAGE):t&&t.match(/\/|\./)?(n(r)&&(r=e.GET),t.match(/\?/)?t+="&":t+="?"):t&&n(r)&&(r=e.LOCALSTORAGE),n(f)&&(f=!0),r==e.LOCALSTORAGE&&!localStorage&&(At&&ut("Bind() - no localStorage"),x.error="error - no localStorage"),this.connection=t,this.bindType=r,this.master=i,this.masterFilter=o,this.smartDecimals=f,n(d)&&(d=!1),(!m||p)&&(m=this),Object.defineProperty(x,"default",{get:function(){return x==m},set:function(C){!C&&m==x?m=null:C&&(m=x)}}),this.bindType==e.POST&&(x.ajax=new e.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(C,O,I,_,P){if(n(I)||n(O)||n(C))return x;if(x.bindings[C]){if(x.bindings[C].obj!=O)return At&&ut("Bind() - id can be used with only one object"),x}else{x.ids.indexOf(C)<=0&&x.ids.push(C),x.bindings[C]={obj:O,props:[]},!n(P)&&typeof P=="function"&&(x.bindings[C].filter=P);var F=x.objIDs.at(O);F?F.indexOf(C)<0&&F.push(C):x.objIDs.add(O,[C])}!Array.isArray(I)&&I.constructor!={}.constructor&&(I=[I]);var K=x.bindings[C].props;Array.isArray(I)?e.loop(I,function(D){V(x.toIDs,D,C),V(x.fromIDs,D,C),K.indexOf(D)<0&&K.push(D)}):e.loop(I,function(D,U){(U==e.BOTH||U==e.TO)&&V(x.toIDs,D,C),(U==e.BOTH||U==e.FROM)&&V(x.fromIDs,D,C),K.indexOf(D)<0&&K.push(D)});function V(D,U,Q){n(D[U])?D[U]=[Q]:D[U].indexOf(Q)<0&&D[U].push(Q)}return d&&R("Bind Report: ADD ["+C+"]",(I?" "+I:"")+(_?" "+_:"")),x.bindType==e.LOCALSTORAGE?(x.from(null,C,I,_),(!x.data||e.isEmpty(x.data))&&x.to(C,I)):(b("bind",null,[P],x.data,_),x.applyData()),x},this.updatefilter=function(C,O){var I=x.bindings[C];return I&&(n(O)?I.filter&&delete I.filter:typeof O=="function"&&(I.filter=O)),x},this.remove=function(C,O,I,_,P,F){var K;if(!n(C)&&!Array.isArray(C)&&(C=[C]),!n(C)){K=[];var V=[];e.loop(C,function(pe){typeof pe=="string"?K.push(pe):V.push(pe)})}!n(O)&&!Array.isArray(O)&&(O=[O]),n(P)&&(P=!0),C=K.concat(V),C.length==0&&(C=null);var D=T("from",C,O,!1),U=D[0];D=D[1];var Q=b("remove",_,U,D,I);if(Q=="stop")return;var J=e.copy(D);n(O)||O.length==0?(K.length>0&&e.loop(K,function(pe){ee(pe,!0)}),V.length>0&&e.loop(V,function(pe){K=x.objIDs.at(pe),K.length>0&&e.loop(K,function($){ee($,!1)}),x.objIDs.remove(pe)})):(K=[],e.loop(D,function(pe,$){var X=x.bindings[pe],y=X.props;e.loop($,function(g){var h=y.indexOf(g);h>=0&&y.splice(h,1),ae(g,pe)}),y.length==0&&K.push(pe)}),K.length>0&&x.remove(K));function N(pe){F&&typeof F=="function"&&(l&&(pe=e.couple(pe)),F(pe)),d&&R("Bind Report: REMOVE"+(I?" ["+I+"]":""),pe)}if(P){var te="type="+x.bindType+"&";x.bindType==e.LOCALSTORAGE?(x.to(),N("success")):x.bindType==e.GET?(Q=JSON.stringify(J),l&&(Q=e.couple(Q)),e.async(x.connection+te+"remove="+Q,N,"callbackRemove")):x.bindType==e.POST?x.ajax.post(x.connection+te,J,N,"remove"):x.bindType==e.SOCKET}function ae(pe,$){var X,y;X=x.fromIDs[pe],X&&(y=X.indexOf($),y>=0&&X.splice(y,1),X.length==0&&delete x.fromIDs[pe]),X=x.toIDs[pe],X&&(y=X.indexOf($),y>=0&&X.splice(y,1),X.length==0&&delete x.toIDs[pe])}function ee(pe,$){var X=x.bindings[pe].obj,y=x.bindings[pe].props,g=x.objIDs.at(X),h=g.indexOf(pe);h>=0&&g.splice(h,1),$&&g.length==0&&V.push(X),h=x.ids.indexOf(pe),h>=0&&x.ids.splice(h,1),e.loop(y,function(L){ae(L,pe)}),delete x.bindings[pe]}return x};function T(C,O,I){var _=[],P;if(n(O)&&n(I)){if(C=="from"&&x.bindType!=e.LOCALSTORAGE)return e.loop(x.bindings,function(D){D.filter&&_.push(D.filter)}),[_,"full"];P=x.ids}else!n(O)&&!Array.isArray(O)&&(O=[O]),!n(I)&&!Array.isArray(I)&&(I=[I]),O&&(P=[],e.loop(O,function(D){if(typeof D=="string")P.indexOf(D)<0&&P.push(D);else{var U=x.objIDs.at(D);U&&e.loop(U,function(Q){P.indexOf(Q)<0&&P.push(Q)})}}));var F={};return P?K(I):I&&V(),[_,F];function K(D){e.loop(P,function(U){var Q=x.bindings[U];if(Q){Q.filter&&_.push(Q.filter);var J=Q.obj;e.loop(D||Q.props,function(N){var te=x.toIDs[N];if(te&&te.indexOf(U)>=0)if(C=="from")F[U]||(F[U]=[]),F[U].push(N);else{F[U]||(F[U]={});var ae=J[N];typeof ae=="number"&&x.smartDecimals&&(ae>1?ae=e.decimals(ae,1):ae=e.decimals(ae,2)),F[U][N]=e.copy(ae)}})}})}function V(){var D=[];e.loop(I,function(U){e.loop(x.toIDs[U],function(Q){var J=x.bindings[Q];D.indexOf(Q)<0&&(J.filter&&_.push(J.filter),D.push(Q));var N=J.obj;if(C=="from")F[Q]||(F[Q]=[]),F[Q].push(U);else{F[Q]||(F[Q]={});var te=N[U];typeof te=="number"&&x.smartDecimals&&(te>1?te=e.decimals(te,1):te=e.decimals(te,2)),F[Q][U]=e.copy(te)}})})}}this.stopProcess=!1,this.stop=function(){x.stopped=!0};var S=function(){var C=this;C.stop=function(){C.stopped=!0}};function b(C,O,I,_,P){var F=new S,K=_!=null&&!e.isEmpty(_)&&x.data;if(E(F,P))return["stop",_];x.masterFilter&&typeof x.masterFilter=="function"&&(_=x.data=x.masterFilter(_,C,P,F));var V=e.loop(I,function(D){if(typeof D=="function"){if(E(F,P))return"stop";_=x.data=D(_,C,P,F)}});return V=="stop"||E(F,P)?["stop",_]:(O&&typeof O=="function"&&(_=x.data=O(_,C,P,F)),E(F,P)?["stop",_]:(K&&!x.data&&At&&ut("Bind()"+(C?" ["+C+"]":"")+(P?" ["+P+"]":"")+" - warning, a filter may not have returned data"),["go",_]))}function E(C,O){if(x.stopped||C.stopped)return R("STOP"+(O?" ["+O+"]":""),C.stopped?"process stopped":"bind stopped"),C.stopped?C.stop=null:x.stopped=!1,!0}this.to=function(C,O,I,_,P,F,K,V){var D="targets, props, extra, filter, smartDecimals, call, lock, unique",U;if(U=yt(x.to,arguments,D))return U;var Q=T("to",C,O,P),J=Q[0];Q=Q[1];var N=b("to",_,J,Q,I);if(Q=N[1],N[0]=="stop")return;if(x.bindType==e.LOCALSTORAGE)localStorage[x.connection]=JSON.stringify(Q),g(Q);else{var te="type="+x.bindType+"&";if(!Q||e.isEmpty(Q))return x;if(x.bindType==e.GET){var ae=Q;e.isJSON(ae)||(ae=JSON.stringify(ae)),l&&(ae=e.couple(ae)),d&&R("Bind Report: TO [bindings]",ae),ae=e.urlEncode(ae);var ee=n(x.master)?"":"&master="+e.urlEncode(i),pe=n(K)?"":"&lock="+e.urlEncode(K),$=n(V)?"":"&unique="+e.urlEncode(V),X=n(I)?"":"&extra="+e.urlEncode(I),y=x.connection+te+"command=to&data="+ae+ee+pe+$+X;d&&R("Bind Report: TO [url]",y),e.async(y,g,"callbackTo")}else x.bindType==e.POST&&(x.ajax.master=i,x.ajax.couple=l,x.ajax.lock=K,x.ajax.unique=V,d&&R("Bind Report: TO [bindings]",Q),x.ajax.post(x.connection+te,Q,"to",I,g))}function g(h){l&&(h=e.decouple(h)),F&&typeof F=="function"&&F(h),d&&R("Bind Report: TO"+(I?" ["+I+"]":" -"),h)}return x},this.toLock=function(C,O,I,_,P,F){var K="targets, props, extra, filter, smartDecimals, call",V;if(V=yt(x.toLock,arguments,K))return V;if(x.bindType.toLowerCase()=="localstorage")return x.to(C,O,I,_,P,F),x;var D=e.makeID();x.from(U,C,O,I,_,D);function U(){x.to(C,O,I,_,P,F,D)}return x},this.toUnique=function(C,O,I,_,P,F){var K="targets, props, extra, filter, smartDecimals, call",V;return(V=yt(x.toUnique,arguments,K))?V:(x.to(C,O,I,_,P,F,null,!0),x)},this.toggleReport=function(C){return n(C)?d=!d:d=C,x},d&&R("Bind Report: CREATE ["+r.toUpperCase()+"]",t+(i?" "+i:""));function R(C,O){x==m?kr(C,O):Pr(C,O)}return this.report=function(){var C="Bind {DATA} Report:",O=e.copy(x.data);return x==m?kr(C,O):Pr(C,O),C="Bind {BINDINGS} Report:",O=e.copy(x.bindings),x==m?kr(C,O):Pr(C,O),x},this.from=function(C,O,I,_,P,F){var K="call, targets, props, extra, filter, lock",V;if(V=yt(x.from,arguments,K))return V;var D=T("from",O,I,f),U=D[0];D=D[1];var Q=b("fromTo",P,U,D,_);if(D=Q[1],Q[0]=="stop")return;var J="type="+x.bindType+"&";if(x.bindType==e.LOCALSTORAGE)(!localStorage[x.connection]||localStorage[x.connection]==null)&&(localStorage[x.connection]="{}"),x.data=JSON.parse(localStorage[x.connection]),$(x.data);else if(x.bindType==e.GET){var N=D;e.isJSON(N)||(N=JSON.stringify(N)),l&&(N=e.couple(N)),d&&R("Bind Report: FROM [bindings]",N),N=e.urlEncode(N);var te=n(x.master)?"":"&master="+e.urlEncode(i),ae=n(F)?"":"&lock="+e.urlEncode(F),ee=n(_)?"":"&extra="+e.urlEncode(_),pe=x.connection+J+"data="+N+"&command=from"+te+ae+ee;d&&R("Bind Report: FROM [url]",pe),e.async(pe,$,"callbackFrom")}else x.bindType==e.POST&&(x.ajax.master=i,x.ajax.couple=l,x.ajax.lock=F,d&&R("Bind Report: FROM [bindings]",D),x.ajax.post(x.connection+J,D,"from",_,$));function $(X){if(x.data=X,l&&(x.data=e.decouple(x.data)),!n(F))var y=JSON.stringify(x.data);var g=b("from",P,U,x.data,_);if(g[0]!="stop"){var h=!1;(n(F)||y!=JSON.stringify(x.data))&&(h=!0,x.applyData()),d&&R("Bind Report: FROM"+(_?" ["+_+"]":" -"),h?x.data:"data not applied in toLock()"),C&&typeof C=="function"&&C(x.data)}}return x},this.applyData=function(){return e.loop(x.data,function(C,O){var I=x.bindings[C];if(I){var _=x.bindings[C].obj;e.loop(O,function(P,F){_[P]=F})}}),x},this.clear=function(){return x.bindType==e.LOCALSTORAGE&&(localStorage[x.connection]=null),x},this.removeAllBindings=function(C,O){if(n(C)&&(C=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},C){var I="type="+x.bindType+"&";if(x.bindType==e.LOCALSTORAGE)x.clear(),P("success");else if(x.bindType==e.GET){var _=n(x.master)?"":"&master="+encodeURI(i);e.async(x.connection+I+"command=removeAll"+_,P,"callbackRemoveAll")}else x.bindType==e.POST&&(x.ajax.master=i,x.ajax.post(x.connection+I,{},"removeAll",null,P,"removeAll"))}function P(F){O&&typeof O=="function"&&O(F),d&&R("Bind Report: REMOVEALL",F)}return x},x},e.Swipe=function(t,r,i,o,l){var f="obj, distance, duration, isometric, overrideNoSwipe",d;if(d=yt(e.Swipe,arguments,f,this))return d;if(qe("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",n(t)||!t.on){ut("zim controls - Swipe():\nPlease pass in object");return}n(r)&&(r=30);var p=v(i);n(i)&&(i=p=="s"?.08:80),this.distance=r,this.duration=i,this.active=!0;var w,k,x,T,S,b,E=this,R,C,O=t.on("mousedown",function(I){if(!E.active||!l&&I.target.zimNoSwipe)return;E.obj=I.target,T=w=I.stageX/e.scaX,S=k=I.stageY/e.scaY,x=!0,E.dispatchEvent("swipedown"),clearTimeout(b),b=setTimeout(function(){x&&(_(),x=!1)},E.duration*(p=="s"?1e3:1)),R=t.on("pressmove",function(P){T=P.stageX/e.scaX,S=P.stageY/e.scaY}),C=t.on("pressup",function(){x&&(_(),x=!1,clearTimeout(b))});function _(){var P=new je.Event("swipe");if(P.obj=E.obj,P.stageX=I.stageX/e.scaX,P.stageY=I.stageY/e.scaY,P.rawX=I.rawX/e.scaX,P.rawY=I.rawY/e.scaY,P.swipeX=P.swipeY=0,E.direction="none",o){if(Math.abs(T-w)>E.distance||Math.abs(S-k)>E.distance){var F=Math.atan2(S-k,T-w)*180/Math.PI;F=(F+360)%360,F>=270&&F<360?(P.swipeY=-1,E.direction="up"):F>=0&&F<90?(P.swipeX=1,E.direction="right"):F>=90&&F<180?(P.swipeY=1,E.direction="down"):F>=180&&F<270&&(P.swipeX=-1,E.direction="left")}}else Math.abs(T-w)>Math.abs(S-k)?(T-w>E.distance&&(P.swipeX=1,E.direction="right"),w-T>E.distance&&(P.swipeX=-1,E.direction="left")):(S-k>E.distance&&(P.swipeY=1,E.direction="down"),k-S>E.distance&&(P.swipeY=-1,E.direction="up"));E.dispatchEvent(P)}});this.disable=function(){E.active=!1},this.enable=function(){E.active=!0},this.dispose=function(){O&&t.off("mousedown",O),R&&t.off("pressmove",R),C&&t.off("pressup",C)}},e.extend(e.Swipe,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swiper=function(t,r,i,o,l,f,d,p,w,k,x,T,S){var b="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",E;if(E=yt(e.Swiper,arguments,b,this))return E;if(qe("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",n(t)||!t.getStage||!t.stage){ut("zim.Swiper() - please provide container on stage");return}if(n(r))return;n(o)&&(o=1),n(l)&&(l="horizontal"),n(p)&&(p=.1),n(w)&&(w=!1),n(k)&&(k=1),n(x)&&(x=!1);var R=v(T);n(T)&&(T=R=="s"?.2:200);var C=this,O=t,I,_,P=C.desiredValue=r[i],F;this.target=r,this.property=i,this.sensitivity=o;var K=!1,V=le.zdf||t.stage?t.stage.frame:{};O.canvas?(F=O,C.downEvent=O.on("stagemousedown",function(G){K=!0,$(G),C.moveEvent=O.on("stagemousemove",X),C.upEvent=O.on("stagemouseup",D),C.upEvent2=V.on("mouseupplus",D)})):(F=O.stage,A(),C.downEvent=O.on("mousedown",$),C.moveEvent=O.on("pressmove",X),C.upEvent=O.on("pressup",U),C.upEvent2=V.on("mouseupplus",U));function D(){K=!1,O.off("stagemousemove",C.moveEvent),O.off("stagemouseup",C.upEvent),C.dispatchEvent("swipeup")}function U(){K=!1,C.dispatchEvent("swipeup")}var Q,J,N,te=Math.sqrt(Math.pow(O.width,2)+Math.pow(O.height,2)),ae,ee,pe=!1;function $(G){pe=!0,F=G.target.stage,N=(O.parent?O.parent:O).localToGlobal(O.x,O.y),K=!0,l=="radial"?(ae=G.stageX/e.scaX,ee=G.stageY/e.scaY,Q=Math.atan2(ee-N.y,ae-N.x)*e.DEG):I=l=="horizontal"?G.stageX/e.scaX:G.stageY/e.scaY,_=C.target[C.property],C.dispatchEvent("swipedown")}function X(G){if(K){if(l=="radial"){C.diff=e.dist(ae,ee,G.stageX/e.scaX,G.stageY/e.scaY),J=Math.atan2(G.stageY/e.scaY-N.y,G.stageX/e.scaX-N.x)*e.DEG;var Z=e.sign(Q-J);if(Math.abs(J-Q)>180){K=!1;return}C.diff=C.diff*Z;var ge=Math.max(10,e.dist(N.x,N.y,G.stageX/e.scaX,G.stageY/e.scaY));C.diff*=(te-ge)/te}else C.diff=I-(l=="horizontal"?G.stageX/e.scaX:G.stageY/e.scaY);if(S&&(Math.abs(C.diff)<Math.abs(S.diff)?(C.override=!0,S.override=!1):(C.override=!1,S.override=!0)),!C.override){if(Math.abs(C.diff)>0&&(C.swiperMoving=!0),P=_-C.diff*C.sensitivity*k,!n(f)&&!n(d)&&x){var he=P;P=(P+(d-f)*1e4-f)%(d-f)+f,Math.abs(he-P)>Math.abs(d-f)*.8&&(C.immediate(P),I=l=="horizontal"?G.stageX/e.scaX:G.stageY/e.scaY,_=C.target[C.property])}else n(f)||(P=Math.max(P,f)),n(d)||(P=Math.min(P,d));C.desiredValue=P,C.dispatchEvent("swipemove")}}}var y=new e.Damp(C.target[C.property],p),g=P,h=P;C.swiperTicker=e.Ticker.add(function(){P==g?P!=h&&(C.pauseTimeout&&C.pauseTimeout.clear(),h=P,C.pauseTimeout=e.timeout(T,function(){K&&C.dispatchEvent("swipepause"),C.pauseTimeout=null})):(h=null,g=P,C.pauseTimeout&&C.pauseTimeout.clear()),C.swiperMoving&&(C.target[C.property]=w?Math.round(y.convert(P)):y.convert(P),pe&&!K&&Math.abs(C.target[C.property]-P)<o/2&&(C.swiperMoving=!1,pe=!1,C.target[C.property]=P,C.immediate(C.target[C.property]),C.dispatchEvent("swipestop")))},F),this.immediate=function(G){y.immediate(G),C.target[C.property]=w?Math.round(G):G,C.desiredValue=P=G};var L=!0;Object.defineProperty(C,"enabled",{get:function(){return L},set:function(G){L!=G&&(G?xe():Y(),L=!!G)}}),Object.defineProperty(C,"desiredValue",{get:function(){return P},set:function(G){C.swiperMoving=!0,P=G}}),Object.defineProperty(C,"damp",{get:function(){return p},set:function(G){p=G,y.damp=p}});function q(){O.off("stagemousedown",C.downEvent),O.off("stagemousemove",C.moveEvent),O.off("stagemouseup",C.upEvent),V.off("mouseupplus",C.upEvent2)}function A(){O.off("mousedown",C.downEvent),O.off("pressmove",C.moveEvent),O.off("pressup",C.upEvent),V.off("mouseupplus",C.upEvent2)}function Y(){O.canvas?q():A(),e.Ticker.remove(C.swiperTicker)}function xe(){O.canvas?C.downEvent=O.on("stagemousedown",C.downEvent):(C.downEvent=O.on("mousedown",C.downEvent),C.moveEvent=O.on("pressmove",C.moveEvent),C.upEvent=O.on("pressup",C.upEvent),C.upEvent2=V.on("mouseupplus",C.upEvent2)),C.immediate(C.target[C.property]),C.swiperTicker=e.Ticker.add(C.swiperTicker,F)}this.dispose=function(){Y(),y=null,C.swiperTicker=null}},e.extend(e.Swiper,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K){var V="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",D;if(D=yt(e.MotionController,arguments,V,this))return D;qe("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var U=this,Q,J="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(n(R))if(le.zdf)Q=R=le.zdf.stage;else{ut(J);return}else if(n(R.stage))if(le.zdf)Q=le.zdf.stage;else{ut(J);return}else Q=R.stage;var N=Q.frame;n(k)||(K=k),n(t)&&(t=new e.Container(1,1,null,null,!1));var te=t.type=="Accelerator";if(n(i)&&(i=r=="pressmove"?20:7),!n(r)&&r.type=="DPad"){var ae=r;r="manual",n(o)&&(o=ae.axis),o=="all"&&(o="both"),ae.on("change",function(){U.convert(t.x+ae.dirX*i,t.y+ae.dirY*i)})}(n(r)||r!="mousemove"&&r!="pressmove"&&r!="pressdrag"&&r!="keydown"&&r!="gamebutton"&&r!="gamestick"&&r!="swipe"&&r!="follow"&&r!="manual")&&(r="mousedown"),n(o)&&(o=te?"horizontal":"both"),r=="keydown"&&n(f)&&(f=[[65,37],[68,39],[87,38],[83,40]]),r=="gamebutton"&&n(f)&&(T?f=[14,15,e.GamePad.RT,e.GamePad.LT]:f=[14,15,12,13]),r=="gamestick"&&n(f)&&(T?f=[[0,2],[0,2],[1],[1]]:f=[0,0,1,1]),r=="gamestick"&&n(f)&&(f=[0,0,1,1]),n(d)&&(d=!0),(o=="horizontal"||o=="vertical")&&(d=!1),n(p)&&(p=r=="keydown"||r=="gamebutton"?1:r=="pressmove"?.5:.1),n(T)&&(T=!1),n(S)&&(S=i*.4),n(b)&&(b=4),n(E)&&(E=.2),n(O)&&(O=!0),Q.mouseMoveOutside=O,n(I)&&(I=[]),Array.isArray(I)||(I=[I]),t.type=="Pen"&&!t.move?I.push(t,t.paper):I.push(t),l&&l.getBounds&&(I?I.indexOf(l)==-1&&I.push(l):I=[l]),t.motionController=this,this.mousedownIncludes=I,n(F)&&(F=.3),U.dampKeyup=F,this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=S,this.axis=o,this.target=t,this.moveThreshold=b,this.stickThreshold=E,this.boundary=l,t.zimMCStartAngle=t.rotation;var ee=U.speed,pe=U.speed,$=0;U.rotation=t.zimMCStartAngle;var X,y;if(te){y=R.getBounds();var g;!y||o=="vertical"&&!y.height||o!="vertical"&&!y.width?g=1e3:g=o=="vertical"?y.height:y.width,n(_)&&(_=0),n(P)&&(P=100),n(this.target.percentSpeed)&&(this.target.percentSpeed=(P-_)/2),U.x=g/2,U.y=g/2,X=new e.Proportion(0,g,_,P)}else U.x=this.target.x,U.y=this.target.y;var h=U.scaleX=t.scaleX,L=U.scaleY=t.scaleY,q,A,Y,xe,G=!1,Z=!1,ge,he,ne,ue,Te;if(r=="keydown"||r=="gamebutton"){for(he=0;he<4;he++)Array.isArray(f[he])||(f[he]=[f[he]]);var Fe=[0,0,0,0],ie=[],Se=["X","X","Y","Y"],se=[-1,1,-1,1],me={dirX:0,dirY:0};if(r=="keydown")var j=N.on("keydown",we);else{ue=U.gamepad=new e.GamePad;var _e=ue.on("buttondown",we)}if(n(x))if(r=="keydown")var Re=N.on("keyup",Xe);else var de=ue.on("buttonup",Xe);Te={rotation:0,speedX:U.speed,speedY:U.speed};var Pe=e.Ticker.add(function(){if(T){Ge(me);return}var Ze=U.speed,dt=U.speed;if(U.axis=="both"&&me.dirX!=0&&me.dirY!=0){var Ee=ce(me.dirX,me.dirY);Ze=Ee.speedX,dt=Ee.speedY}(U.axis=="horizontal"||U.axis=="both")&&(U.x+=Ze*me.dirX),(U.axis=="vertical"||U.axis=="both")&&(U.y+=dt*me.dirY),He()},Q)}else if(r=="mousedown"||r=="mousemove")q=Q.on("stage"+r,function(Ze){if(Q=Ze.target.stage,r=="mousedown"){if(Array.isArray(U.mousedownIncludes)||(U.mousedownIncludes=[U.mousedownIncludes]),U.mousedownIncludes.indexOf(R)<0)for(he=0;he<R.numChildren;he++){var dt=R.getChildAt(he);if(U.mousedownIncludes.indexOf(dt)==-1&&dt.mouseEnabled&&dt.hitTestPoint&&dt.hitTestPoint(Ze.stageX/e.scaX,Ze.stageY/e.scaY))return}U.dispatchEvent("mousedown")}var Ee=R.globalToLocal(O?Ze.rawX/e.scaX:Ze.stageX/e.scaX,O?Ze.rawY/e.scaY:Ze.stageY/e.scaY);U.x=Ee.x,U.y=Ee.y,He()});else if(r=="pressmove"||r=="pressdrag"||r=="follow")t.type=="Pen"&&(t.write=!1),q=Q.on("stagemousedown",function(Ze){var dt;if(!((t.type=="Pen"||r=="pressmove")&&U.boundary&&!U.boundary.type=="Blob"&&(dt={x:Ze.stageX/e.scaX,y:Ze.stageY/e.scaY},dt.x<U.boundary.x||dt.x>U.boundary.x+U.boundary.width||dt.y<U.boundary.y||dt.y>U.boundary.y+U.boundary.height))&&!(U.boundary&&U.boundary.type=="Blob"&&(r=="pressmove"||r=="pressdrag")&&(dt={x:Ze.stageX/e.scaX,y:Ze.stageY/e.scaY},!U.boundary.shape.hitTestPoint(dt.x,dt.y)))&&!(r=="pressdrag"&&!t.hitTestPoint(Ze.stageX/e.scaX,Ze.stageY/e.scaY))){Z=!1,Array.isArray(U.mousedownIncludes)||(U.mousedownIncludes=[U.mousedownIncludes]);var Ee=!1;for(U.mouseDownIncludes&&(ge=Q.getObjectUnderPoint(Ze.stageX,Ze.stageY,1)),he=0;he<U.mousedownIncludes.length;he++)ge&&U.mousedownIncludes[he].hitTestPoint&&U.mousedownIncludes[he].hitTestPoint(Ze.stageX/e.scaX,Ze.stageY/e.scaY)&&U.mousedownIncludes[he].contains(ge)&&(Ee=!0);if(!Ee)for(he=0;he<R.numChildren;he++){var ot=R.getChildAt(he);if(U.mousedownIncludes.indexOf(ot)==-1&&ot.mouseEnabled&&ot.hitTestPoint&&ot.hitTestPoint(Ze.stageX/e.scaX,Ze.stageY/e.scaY))return}var Ve=R.globalToLocal(O?Ze.rawX/e.scaX:Ze.stageX/e.scaX,O?Ze.rawY/e.scaY:Ze.stageY/e.scaY);r!="follow"&&r!="pressdrag"&&U.immediate(o=="both"||o=="horizontal"?Ve.x:null,o=="both"||o=="vertical"?Ve.y:null),He(),U.dispatchEvent("mousedown"),G=!0,U.moveX=O?Ze.rawX/e.scaX:Ze.stageX/e.scaX,U.moveY=O?Ze.rawY/e.scaY:Ze.stageY/e.scaY,A=Q.on("stagemousemove",function(Ye){U.moveX=O?Ye.rawX/e.scaX:Ye.stageX/e.scaX,U.moveY=O?Ye.rawY/e.scaY:Ye.stageY/e.scaY,r!="follow"&&ye()}),xe&&e.Ticker.remove(xe),r=="follow"&&(xe=e.Ticker.add(ye)),t.type=="Pen"&&(t.write=!0,t.paper.noMouse(),t.zimDragCheck=!0)}}),Y=Q.on("stagemouseup",function(){t.type=="Pen"&&(t.write=!1,t.paper.mouse(),t.zimDragCheck=!1,Z&&t.stopCheck()),xe&&e.Ticker.remove(xe),Q.off("stagemousemove",A),G=!1});else if(r=="gamestick"){for(ue=this.gamepad=new e.GamePad,he=0;he<4;he++)Array.isArray(f[he])||(f[he]=[f[he]]);Te={rotation:t.zimMCStartAngle,speedX:U.speed,speedY:U.speed};var Me=ue.on("data",function(Ze){for(me={dirX:0,dirY:0},he=0;he<f[0].length;he++)if(ne=Ze.axes[f[0][he]],Math.abs(ne)>U.stickThreshold){me.dirX=ne;break}for(he=0;he<f[2].length;he++)if(ne=Ze.axes[f[2][he]],Math.abs(ne)>U.stickThreshold){me.dirY=ne;break}if(T){Ge(me);return}U.x+=U.speed*me.dirX,U.y+=U.speed*me.dirY,He()})}else if(r=="swipe")var fe=new e.Swiper(Q,U,"x",.8),ve=new e.Swiper(Q,U,"y",.8,!1),Ie=fe.on("swipemove",function(){He()});function we(Ze){var dt=r=="keydown"?Ze.keyCode:Ze.buttonCode,Ee;for(he=0;he<4;he++)if(f[he].indexOf(dt)>-1){if(!d&&U.axis=="both"&&(me.dirX=me.dirY=0),me["dir"+Se[he]]=se[he],Fe[he]=1,Ee=ie.indexOf(he),Ee==0)return;Ee>0&&ie.splice(Ee,1),ie.unshift(he);return}}function Xe(Ze){var dt=r=="keydown"?Ze.keyCode:Ze.buttonCode,Ee;for(he=0;he<4;he++)if(f[he].indexOf(dt)>-1){if(Fe[he]=0,Ee=ie.indexOf(he),Ee>=0&&ie.splice(Ee,1),U.axis!="both"||d)me["dir"+Se[he]]=-Fe[Math.floor(he/2)*2]+Fe[Math.floor(he/2)*2+1];else if(ie.length>0){me["dir"+Se[he]]=0;var ot=ie[0];me["dir"+Se[ot]]=se[ot]}else me.dirX=me.dirY=0;return}}function ye(){var Ze=R.globalToLocal(U.moveX,U.moveY);U.x=Ze.x,U.y=Ze.y,He(),t.type=="Pen"&&!Z&&t.drawing&&(Z=!0)}function Ge(Ze){Te.rotation+=Ze.dirX*U.turnSpeed,U.rotation=Te.rotation,Te.speedX=Math.sin(Te.rotation*Math.PI/180)*U.speed*-Ze.dirY,Te.speedY=-Math.cos(Te.rotation*Math.PI/180)*U.speed*-Ze.dirY,U.x+=Te.speedX,U.y+=Te.speedY}function He(){var Ze=U.x-(te?U.target.percentSpeed:U.target.x),dt=U.y-(te?U.target.percentSpeed:U.target.y),Ee=ce(Ze,dt);if(ee=Ee.speedX,pe=Ee.speedY,!!K){if(n(Ee.angle)||(U.rotation=Ee.angle+t.zimMCStartAngle),n(U.rotation)){U.rotation=U.target.rotation;return}U.rotation+=$;var ot=Oe(U.rotation),Ve=U.target.rotation=Oe(U.target.rotation);Math.abs(ot-Ve)>180&&(Ve>ot?Ve-=360:ot-=360),U.dampR.immediate(Ve),U.target.rotation=Ve,U.rotation=ot}}function Oe(Ze){return(Ze%360+360)%360}function ce(Ze,dt){var Ee=U.speed,ot=U.speed,Ve,Ye=Math.sqrt(Math.pow(Ze,2)+Math.pow(dt,2));return Ye>0&&(Ee=Math.abs(Ze)/Ye*U.speed,ot=Math.abs(dt)/Ye*U.speed,Ve=90-Math.atan2(Ze,dt)*180/Math.PI),{speedX:Ee,speedY:ot,angle:Ve}}var Ue=this.x,Qe=this.y,Je=this.x,nt=this.y,gt=this.x=te?g/2:this.target.x,We=this.y=te?g/2:this.target.y;this.dampX=new e.Damp(gt,p),this.dampY=new e.Damp(We,p),this.dampR=new e.Damp(this.target.rotation,p);var st=0,at=0,Ae=e.Ticker.add(function(){if(r=="manual"&&He(),U.boundary&&U.boundary.type!="Blob"&&(U.x=e.constrain(U.x,U.boundary.x,U.boundary.x+U.boundary.width),U.y=e.constrain(U.y,U.boundary.y,U.boundary.y+U.boundary.height)),U.axis=="horizontal"||U.axis=="both"){if(U.dirX=e.sign(U.x-gt),Math.abs(U.x-gt)<ee?gt=U.x:gt+=U.dirX*ee,me&&me.dirX==0){var Ze=U.boundary?U.boundary.width/2:Q.width/2,dt=U.x-(U.x-Ze)*(te?U.dampKeyup:0);gt=dt,U.x=gt}te&&y&&y.width?U.target.percentSpeed=X.convert(U.dampX.convert(gt)):U.target.x=U.dampX.convert(gt)}if(U.axis=="vertical"||U.axis=="both"){if(U.dirY=e.sign(U.y-We),Math.abs(U.y-We)<pe?We=U.y:We+=e.sign(U.y-We)*pe,me&&me.dirY==0){Ze=U.boundary?U.boundary.height/2:Q.height/2;var Ee=U.y-(U.y-Ze)*(te?U.dampKeyup:0);We=Ee,U.y=We}te&&y&&y.height?U.target.percentSpeed=X.convert(U.dampY.convert(We)):U.target.y=U.dampY.convert(We)}if(U.boundary&&U.boundary.type=="Blob"&&(U.boundary.shape.hitTestPoint(U.target.x,U.target.y)?(Ue=U.target.x,Qe=U.target.y):(U.target.x=U.x=Ue,U.target.y=U.y=Qe,U.immediate(Ue,Qe))),r=="pressmove"&&G&&U.dispatchEvent("pressing"),p==1?(U.movingX=Math.round(Je-U.x)!=0,U.movingY=Math.round(nt-U.y)!=0,Je=U.x,nt=U.y):(U.movingX=Math.abs(gt-(te?U.target.percentSpeed:U.target.x))>U.moveThreshold,U.movingY=Math.abs(We-(te?U.target.percentSpeed:U.target.y))>U.moveThreshold),U.moving&&!(U.movingX||U.movingY)?U.dispatchEvent("stopmoving"):!U.moving&&(U.movingX||U.movingY)&&U.dispatchEvent("startmoving"),U.moving=U.movingX||U.movingY,U.moving&&U.dispatchEvent("moving"),U.dirX!=st||U.dirY!=at){var ot=new je.Event("change"),Ve;U.dirX!=st?(Ve=["left",null,"right"],ot.dir=Ve[U.dirX+1],st=U.dirX,!t.zimMCStartAngle&&(w=="horizontal"||w=="both")&&(U.scaleX=t.scaleX=U.dirX?Math.abs(t.scaleX)*U.dirX:t.scaleX,h!=0&&Math.round(U.scaleX/h)==-1?$=180:$=0)):(Ve=["up",null,"down"],ot.dir=Ve[U.dirY+1],at=U.dirY,!t.zimMCStartAngle&&(w=="vertical"||w=="both")&&(U.scaleY=t.scaleY=U.dirY?-Math.abs(t.scaleY)*U.dirY:t.scaleY,L!=0&&Math.round(U.scaleY/L)==-1?$=180:$=0)),U.dispatchEvent(ot)}K&&!n(U.rotation)&&(U.target.rotation=U.dampR.convert(U.rotation))},Q);this.immediate=function(Ze,dt,Ee){return!n(Ze)&&U.dampX&&(U.dampX.immediate(Ze),te?U.x=U.target.percentSpeed=gt=Ze:U.x=U.target.x=gt=Ze,fe&&fe.immediate(Ze)),!n(dt)&&U.dampY&&(U.dampY.immediate(dt),te?U.y=U.target.percentSpeed=We=dt:U.y=U.target.y=We=dt,ve&&ve.immediate(dt)),!n(Ee)&&U.dampR&&(U.dampR.immediate(Ee),U.rotation=U.target.rotation=Ee),Ue=U.x,Qe=U.y,U},this.convert=function(Ze,dt){n(Ze)||(U.x=Ze),n(dt)||(U.y=dt),He()},Object.defineProperty(U,"pausingSpeed",{get:function(){return U.speed},set:function(Ze){U.speed=Ze}}),this.paused=!1;var Le;this.pause=function(Ze,dt,Ee){return n(Ze)&&(Ze=!0),n(dt)&&(dt=0),n(Ee)&&(Ee=!1),Ze?(Le=U.speed,dt>0?(e.animate({target:U,obj:{pausingSpeed:0},ticker:!1,time:dt,call:function(){U.speed=0,U.paused=!0,U.enabled=!1,U.immediate(U.target.x,U.target.y),U.dispatchEvent("pause")}}),Ee&&(G=!1,A&&Q.off("stagemousemove",A),xe&&e.Ticker.remove(xe),t.type=="Pen"&&(t.write=!1,t.zimDragCheck=!1),Y&&Q.off("stagemouseup",Y),Z&&t.stopCheck(),r=="keydown"?Re&&N.off("keyup",Re):de&&ue.off("buttonup",de))):(U.speed=0,U.paused=!0,U.enabled=!1,U.immediate(U.target.x,U.target.y),setTimeout(function(){U.dispatchEvent("pause")},10))):(U.enabled=!0,dt>0?e.animate({target:U,obj:{pausingSpeed:Le},ticker:!1,time:dt,call:function(){U.speed=Le,U.paused=!1}}):(U.speed=Le,U.paused=!1)),U};var De=!0;Object.defineProperty(U,"enabled",{get:function(){return De},set:function(Ze){De!=Ze&&(Ze?(ft(),U.paused=!1):(mt(),U.paused=!0),De=!!Ze)}});function ft(){r=="keydown"?(j=N.on("keydown",j),Re&&(Re=N.on("keyup",Re)),Pe=e.Ticker.add(Pe,Q)):r=="gamebutton"?(_e=ue.on("buttondown",_e),de&&(de=ue.on("buttonup",de)),Pe=e.Ticker.add(Pe,Q)):r=="gamestick"?Me=ue.on("data",Me):r=="swipe"?(fe.enabled=!0,ve.enabled=!0,Ie&&(Ie=fe.on("swipemove",Ie))):r=="mousedown"||r=="mousemove"?q=Q.on("stage"+r,q):r=="pressmove"&&(q=Q.on("stagemousedown",q),A&&(A=Q.on("stagemousemove",A)),Y&&(Y=Q.on("stagemouseup",Y))),Ae=e.Ticker.add(Ae,Q)}function mt(){r=="keydown"?(N.off("keydown",j),N.off("keyup",Re),e.Ticker.remove(Pe)):r=="gamebutton"?(ue.off("buttondown",_e),ue.off("buttonup",de),e.Ticker.remove(Pe)):r=="gamestick"?ue.off("data",Me):r=="swipe"?(fe.enabled=!1,ve.enabled=!1,fe.off("swipemove",Ie)):r=="mousedown"||r=="mousemove"?Q.off("stage"+r,q):r=="pressmove"&&(Q.off("stagemousedown",q),Q.off("stagemousemove",A),Q.off("stagemouseup",Y)),e.Ticker.remove(Ae)}this.dispose=function(){mt(),ue&&ue.dispose(),fe&&fe.dispose(),ve&&fe.dispose()}},e.extend(e.MotionController,je.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){if(qe("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads){this.error=!0,At&&ut("zim.GamePad() - no browswer support");return}var t;le.addEventListener("gamepadconnected",i),this.currentIndex=0;var r=this;function i(d){r.connected=!0,l("gamepadconnected",d);var p=navigator.getGamepads()[r.currentIndex];r.lastData=[];for(var w=0;w<p.buttons.length;w++)r.lastData[w]=p.buttons[w].pressed;function k(){if(t=requestAnimationFrame(k),r.data=navigator.getGamepads()[r.currentIndex],!!r.data){for(var x=r.buttons=[],T,S=0;S<r.data.buttons.length;S++)x[S]=r.data.buttons[S].pressed,x[S]!=r.lastData[S]&&(r.lastData[S]=x[S],x[S]?T=new je.Event("buttondown"):T=new je.Event("buttonup"),T.buttonCode=S,T.button=B[S],r.dispatchEvent(T));T=new je.Event("data"),T.axes=r.axes=r.data.axes,T.buttons=r.buttons,r.dispatchEvent(T)}}k()}var o=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(r.connected||i(),clearInterval(o))},500);function l(d,p){var w=new je.Event(d);w.index=p.gamepad.index,w.id=p.gamepad.id,w.buttons=p.gamepad.buttons,w.axes=p.gamepad.axes,r.dispatchEvent(w)}var f=function(d){d.gamepad.index==r.currentIndex&&(cancelAnimationFrame(t),r.connected=!1,r.dispatchEvent("gamepaddisconnected"))};le.addEventListener("gamepaddisconnected",f),this.dispose=function(){le.removeEventListener("gamepadconnected",i),le.removeEventListener("gamepaddisconnected",f),cancelAnimationFrame(t),clearInterval(o),r.connected=!1}};var B=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(fn=0;fn<B.length;fn++)e.GamePad[B[fn]]=fn;var z=["LSX","LSY","RSX","RSY"];for(fn=0;fn<z.length;fn++)e.GamePad[z[fn]]=fn;e.extend(e.GamePad,je.EventDispatcher,null,"cjsEventDispatcher"),e.Portal=function(t,r){var i="obj, lands",o;if(o=yt(e.Portal,arguments,i,this))return o;if(qe("69.96"),n(t)||!t.stage)return;this.type="Portal";var l=this,f=r&&r.numChildren&&r.numChildren>0;if(f){var d=r.getChildAt(r.numChildren-1),p=r.getChildAt(r.numChildren-2);r.setChildIndex(p,r.numChildren-1),p.setMask(t)}function w(){r.setChildIndex(d,0),d=p,p=r.getChildAt(r.numChildren-2),r.setChildIndex(p,r.numChildren-1),d.setMask(null),p.setMask(t),t.stage.update()}t.on(e.mobile()?"mousedown":"mouseover",function(){l._enabled&&(f&&w(),l.dispatchEvent("enter"))}),t.on(e.mobile()?"pressup":"mouseout",function(){l._enabled&&l.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(k){if((n(k)||!k.stage)&&At){ut("zim.Portal() - please provide a Display Object to act as the portal");return}p.setMask(t)}}),Object.defineProperty(this,"currentLand",{get:function(){return d},set:function(k){if(r.contains(k))for(;k!=d;)w()}}),Object.defineProperty(this,"nextLand",{get:function(){return p},set:function(){if(At){ut("zim.Portal() - nextLand is read only - remake Portal to change");return}}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(k){l._enabled=k}})},e.extend(e.Portal,je.EventDispatcher,null,"cjsEventDispatcher",!1),le.zimContactListener=null;var oe,Ce;function be(t,r,i,o,l,f,d,p,w,k,x,T){if(qe("69.97"),n(i)&&(i=0),o=="rectangle")t.body=t.physics.makeRectangle(t.width-i,t.height-i,r,l,d,p,w,k,x,f,T);else if(o=="circle")t.body=t.physics.makeCircle(t.width/2-i,r,l,d,p,w,k,x,f,T);else if(o=="triangle")n(t.a)&&(t.a=t.width,t.b=t.c=Math.sqrt(Math.pow(t.a/2,2)+Math.pow(t.height,2))),t.body=t.physics.makeTriangle(t.a-i,t.b-i,t.c-i,r,l,d,p,w,k,x,f,T);else if(o=="poly"){var S=[];t.reg(0,0,!0);var b=t;t.scale!=1&&(b=t.clone().transformPoints("scale",t.scale)),i&&(b=t.clone().transformPoints("scale",Math.max(0,1-i/((t.width+t.height)/4)))),e.loop(b.points,function(R){S.push({x:R[0],y:R[1]})}),t.body=t.physics.makePoly(S,t.width,t.height,r,l,d,p,w,k,x,f,T)}t.body.x=t.x,t.body.y=t.y,t.body.rotation=t.rotation,t.physics.addMap(t.body,t),t.impulse=function(R,C,O,I){n(R)&&(R=0),n(C)&&(C=0);var _=t.body.GetWorldCenter();return n(O)&&(O=_.x*t.physics.scale),n(I)&&(I=_.y*t.physics.scale),t.body.ApplyImpulse(new le.b2Vec2(R,C),new le.b2Vec2(O/t.physics.scale,I/t.physics.scale)),t},t.force=function(R,C,O,I){n(R)&&(R=0),n(C)&&(C=0);var _=t.body.GetWorldCenter();return n(O)&&(O=_.x*t.physics.scale),n(I)&&(I=_.y*t.physics.scale),t.body.ApplyForce(new le.b2Vec2(R,C),new le.b2Vec2(O/t.physics.scale,I/t.physics.scale)),t},t.setLinearVelocity=function(R,C){return t.body.SetLinearVelocity(new le.b2Vec2(R,C)),t},t.setAngularVelocity=function(R){return t.body.SetAngularVelocity(R),t},t.spin=function(R){return n(R)&&(R=10),t.body.ApplyTorque(R*1e3),t},t.torque=function(R){return n(R)&&(R=10),t.body.ApplyTorque(R),t},t.follow=function(R,C,O,I,_,P,F,K,V,D,U,Q){var J="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal",N;return(N=yt(t.follow,arguments,J))?N:(t.physics.follow(t,R,C,O,I,_,P,F,K,V,D,U,Q),t)},t.noFollow=function(){return t.physics.follow(null),t},t.control=function(R,C,O,I,_){var P="type, speed, speedY, horizontal, vertical",F;return(F=yt(t.control,arguments,P))?F:(t.physics.control(t,R,C,O,I,_),t)},t.customControl=function(R,C,O){var I="dir, speed, speedY",_;return(_=yt(t.customControl,arguments,I))?_:(t.physics.customControl(R,C,O),t)},t.noControl=function(){return t.physics.noControl(t),t},t.sleep=function(){return t.body.SetAwake(!1),t},t.wake=function(){return t.body.SetAwake(!0),t};function E(){le.zimContactListener=new le.b2ContactListener,oe=new e.Dictionary(!0),Ce=new e.Dictionary(!0),le.zimContactListener.BeginContact=R,le.zimContactListener.EndContact=C;function R(O){var I=oe.at(O.m_fixtureB.GetBody());I&&I(O.m_fixtureA.GetBody().zimObj,O.m_fixtureA.GetBody()),I=oe.at(O.m_fixtureA.GetBody()),I&&I(O.m_fixtureB.GetBody().zimObj,O.m_fixtureB.GetBody())}function C(O){var I=Ce.at(O.m_fixtureB.GetBody());I&&I(O.m_fixtureA.GetBody().zimObj,O.m_fixtureA.GetBody()),I=Ce.at(O.m_fixtureA.GetBody()),I&&I(O.m_fixtureB.GetBody().zimObj,O.m_fixtureB.GetBody())}t.physics.world.SetContactListener(le.zimContactListener)}t.contact=function(R){return le.zimContactListener||E(),oe.add(t.body,R),t},t.noContact=function(){return oe.remove(t.body),t},t.contactEnd=function(R){return le.zimContactListener||E(),Ce.add(t.body,R),t},t.noContactEnd=function(){return Ce.remove(t.body),t},t.hasOwnProperty("dynamic")||Object.defineProperty(t,"dynamic",{get:function(){return t.body.GetType()==2},set:function(R){t.body.SetType(R==!0?2:0)}})}for(e.Timeline=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E){var R="objects, width, startPaused, barColor, buttonColor, themeColor, corner, ticks, damp, loop, noLoop, call, style, group, inherit",C;if(C=yt(e.Timeline,arguments,R,this))return C;qe("69.971"),this.group=b;var O=S===!1?{}:e.getStyle("Timeline",b,E),I=this.stage?this.stage:zimDefaultFrame.stage,_=I.frame,P=I.width,F=I.height;n(i)&&(i=O.startPaused!=null?O.startPaused:!1),n(k)&&(k=O.loop!=null?O.loop:!0),n(x)&&(x=O.noLoop!=null?O.noLoop:!1),n(o)&&(o=O.barColor!=null?O.barColor:e.tin),n(l)&&(l=O.buttonColor!=null?O.buttonColor:e.light),n(f)&&(f=O.themeColor!=null?O.themeColor:e.purple),n(r)&&(r=O.width!=null?O.width:P*.5),n(p)&&(p=O.ticks!=null?O.ticks:!0),n(w)&&(w=O.damp!=null?O.damp:!1),n(Z)&&(Z=O.labels!=null?O.labels:!0),n(d)&&(d=O.corner!=null?O.corner:5);var K=50;this.zimContainer_constructor(r,K,null,null,!1),this.type="Timeline";var V=this,D=t,U=e.toBW(_.color);if(n(D)){if(!e.animatedObjects||!e.animatedObjects.objects)return ut("ZIM Timeline - add Timeline after animated objects"),V;D=e.copy(e.animatedObjects.objects)}Array.isArray(D)||(D=[D]);var Q=Date.now(),J=0;e.loop(D,function(Pe){Pe.pauseAnimate(),Pe.tweenEndTime&&Pe.tweenEndTime>J&&(J=Pe.tweenEndTime)});var N=Math.ceil((J-Q)/1e3),te=this.backing=new e.Rectangle(r,K,o,null,null,d).alp(.8).addTo(V),ae=U=="#000000"?0:1,ee=this.shade=new e.Rectangle(K-ae,K-ae*2,black,null,null,[d,0,0,d]).alp(.7).pos(ae,ae,LEFT,TOP,V),pe=this.shade2=new e.Rectangle(K-ae,K-ae*2,black,null,null,[0,d,d,0]).alp(.7).pos(ae,ae,RIGHT,TOP,V),$=new e.Container(50,50).alp(.9);new e.Rectangle(7,24,white).center($).mov(-6),new e.Rectangle(7,24,white).center($).mov(6);var X=V.controls=new e.Button({icon:new e.Triangle(30,30,30,white).reg(null,16).rot(90).alp(.9),toggleIcon:$.reg("center"),downBackgroundColor:e.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(te,null,70).center(ee).addTo(V).expand(10).tap(function(){ie.pauseAnimate(!X.toggled)});i||X.toggle();var y=new e.Container(50,50).reg("center").alp(.8).expand(10);new On(24,5,e.white).center(y).mov(0,-8),new On(24,5,e.white).center(y),new On(24,5,e.white).center(y).mov(0,8);var g=!0,h=V.menu=new e.Button({icon:y,downBackgroundColor:e.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(te,null,70).center(pe).addTo(V).tap(function(){Fe.show(),g&&Fe.loc(V.x,V.y).mov(V.width-Fe.width/2,-Fe.height/2-10)});function L(Pe){ie.rate=Pe,de.speed=Pe,V.trailInterval.time=Re.convert(de.speed),localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function q(Pe){ie.ticks.vis(Pe),ie.labels.vis(Pe),I.update(),de.labels=Pe,localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function A(Pe){k=Pe,de.looping=Pe,localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function Y(Pe){_e(),Pe&&(ie.percentComplete=0,setTimeout(function(){j()},50)),de.trailing=Pe,localStorage&&(localStorage.zim_tl=JSON.stringify(de))}function xe(Pe){return e.loop([X,h],function(Me){Me.backgroundColor=Pe,Me.toggleBackgroundColor=Pe,Me.rollBackgroundColor=Pe.lighten(.2),Me.rollToggleBackgroundColor=Pe.lighten(.2),Me.downBackgroundColor=Pe.darken(.2)}),Fe.backing.color=Pe,G.slider.bar.color=Pe,I.update(),de.color=Pe,localStorage&&(localStorage.zim_tl=JSON.stringify(de)),this}this.setThemeColor=xe;var G=e.List.slider("speed",0,2,1,L,.1),Z=e.List.checkBox("labels",!1,q),ge=e.List.checkBox("loop",!1,A),he=e.List.checkBox("trails",!1,Y),ne=e.List.colorPicker("color",e.purple,new e.ColorPicker({colors:[e.purple,e.pink,e.red,e.orange,e.brown,e.green,e.blue,e.grey,e.black],cols:9}),xe),ue=this.title=new e.Container(300,25).noMouse();new e.Rectangle(500,70,e.black.toAlpha(.4)).pos(0,-45,CENTER,TOP,ue),this.icon=_.makeIcon({edges:"white",box:faint,slats:["white","white","white","white","white"]}).alp(.6).scaleTo(ue,null,140).pos(7,-10,"left","center",ue),new e.Label({text:"Z  I  M  -  T  I  M  E  L  I  N  E",color:"white"}).alp(.6).sca(.47).loc(51,-4,ue),new e.Line(219,1,"white").alp(.6).center(ue).mov(8,3);var Te=this.list=new e.List({width:300,height:260,backdropColor:clear,borderWidth:-1,shadowColor:-1,viewNum:6,padding:12,scrollBarV:!1,list:[G,Z,ge,he,ne],swipe:!1});G.slider.bar.color=e.purple,Te.tabs.mov(0,8);var Fe=V.pane=new e.Pane({width:Te.width,height:Te.height+40,backgroundColor:e.purple,backdropColor:e.faint,draggable:!0,corner:8,content:Te,resets:!1});Fe.contentContainer.mov(0,20),Fe.backing.on("pressmove",function(){g=!1},null,!0),ue.scaleTo(Fe.contentContainer,100).pos(0,2,"center","top",Fe.contentContainer).setMask(Fe.backing);var ie=V.slider=new e.Slider({min:0,max:N,inside:!0,barColor:o,barWidth:K,barLength:r-K*2-12,tickColor:U.toAlpha(.8),damp:w,useTicks:!0,tickScale:1,tickStep:.1,semiTicks:4,semiTickScale:1,useLabels:!0,labelColor:U.toAlpha(.8)}).center(V,1);ie.bar.dye(e.faint),ie.currentValue=0,ie.ticks.mov(0,-20),ie.bar.widthOnly=ie.bar.width+14,new e.Triangle({color:e.dark}).alp(.3).scaleTo(ie.button,70,90,"full").center(ie.button),ie.animate({props:{currentValue:ie.max},time:ie.max,ease:"linear",startPaused:i,loop:!0,loopWait:.5,loopWaitCall:function(){k||(ie.pauseAnimate(),X.toggle(!1),ie.currentValue=ie.max),se&&V.trailInterval.pause(),T&&typeof T=="function"&&T()},loopCall:function(){e.loop(D,function(Pe){Pe.percentComplete=0})}}),ie.bar.on("mousedown",function(){ie.percentComplete=ie.currentValue/ie.max*100});var Se=!0;ie.button.on("mousedown",function(){Se=ie.animating,ie.pauseAnimate()}),ie.button.on("pressup",function(){Se&&ie.pauseAnimate(!1),ie.percentComplete=ie.currentValue/ie.max*100}),V.keyEvent=_.on("keydown",function(Pe){Pe.key==" "&&(X.toggled?(X.toggle(!1),ie.pauseAnimate(!0)):(X.toggle(!0),ie.pauseAnimate(!1)))}),V.tickerID=e.Ticker.add(function(){var Pe=Math.min(100,V.slider.currentValue/N*100)-.01;e.loop(D,function(Me){var fe=Q+Pe/100*(J-Q)-Me.tweenStartTime;x&&(Me.percentComplete=Math.max(0,Math.min(100,fe/(Me.tweenEndTime-Me.tweenStartTime)*100))),Me.percentComplete=fe/(Me.tweenEndTime-Me.tweenStartTime)*100})});var se;function me(){e.loop(D,function(Pe){var Me=Pe.clone().addTo(se).alp(.05);Me.color=clear,Me.borderColor=U}),se.updateCache("source-over"),se.disposeAllChildren()}V.trailInterval=e.interval(.05,function(){ie.animating&&G.slider.currentValue>0&&me()}),V.trailInterval.pause();function j(){V.trails||(se=new e.Container(P,F).addTo(I,0).cache(),V.trails=new e.Bitmap(se.cacheCanvas).addTo(I,1),V.trailInterval.pause(!1))}function _e(){V.trails&&(V.trailInterval.pause(),V.trails.dispose(),V.trails=null,se.dispose(),se=null)}var Re=new e.Proportion(.1,2,.1,.01);if(localStorage){var de=localStorage.zim_tl;de||(de=JSON.stringify({speed:1,labels:!1,looping:!1,color:purple})),de=JSON.parse(de),L(de.speed),G.slider.currentValue=de.speed,G.stepper.currentValue=de.speed,q(de.labels),Z.checkBox.checked=de.labels,A(de.looping),ge.checkBox.checked=de.looping,xe(de.color),ne.colorPicker.selectedColor=de.color,ne.swatch.color=de.color,ne.colorLabel.text=de.color.toUpperCase(),de.trailing&&j(),he.checkBox.checked=de.trailing,V.trailInterval.time=Re.convert(de.speed)}this.pos(0,20,"center","bottom"),f!=e.purple&&xe(f),this.dispose=function(Pe,Me,fe){return e.Ticker.remove(V.tickerID),_.off("keydown",V.keyEvent),fe||this.zimContainer_dispose(!0),!0},S!==!1&&e.styleTransforms(this,O)},e.extend(e.Timeline,e.Container,"dispose","zimContainer",!1),e.BlurEffect=function(t,r,i,o,l,f){var d="blurX, blurY, quality, style, group, inherit",p;if(p=yt(e.BlurEffect,arguments,d,this))return p;qe("69.972"),this.group=l;var w=o===!1?{}:e.getStyle("BlurEffect",l,f);n(t)&&(t=w.blurX!=null?w.blurX:10),n(r)&&(r=w.blurY!=null?w.blurY:10),n(i)&&(i=w.quality!=null?w.quality:1);var k=x(t,r,i);this.veeObj={blurX:k[0],blurY:k[1],quality:k[2]};function x(){return arguments}t=ct(t),r=ct(r),i=ct(i),this.createjsBlurFilter_constructor(t,r,i),this.type="BlurEffect",this.clone=function(T){return new e.BlurEffect(T||!e.isPick(k[0])?t:k[0],T||!e.isPick(k[1])?r:k[1],T||!e.isPick(k[2])?i:k[2],o,this.group,f)}},e.extend(e.BlurEffect,je.BlurFilter,"clone","createjsBlurFilter",!1),e.GlowEffect=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",b;if(b=yt(e.GlowEffect,arguments,S,this))return b;qe("69.9725"),this.group=x;var E=k===!1?{}:e.getStyle("GlowEffect",x,T);n(t)&&(t=E.color!=null?E.color:e.white),n(r)&&(r=E.alpha!=null?E.alpha:1),n(i)&&(i=E.blurX!=null?E.blurX:30),n(o)&&(o=E.blurY!=null?E.blurY:30),n(l)&&(l=E.strength!=null?E.strength:1),n(f)&&(f=E.quality!=null?E.quality:1),n(d)&&(d=E.inner!=null?E.inner:!1),n(p)&&(p=E.knockout!=null?E.knockout:!1),n(w)&&(w=E.hideObject!=null?E.hideObject:!1);var R=C(t,r,i,o,l,f,d,p,w);this.veeObj={color:R[0],alpha:R[1],blurX:R[2],blurY:R[3],strength:R[4],quality:R[5],inner:R[6],knockout:R[7],hideObject:R[8]};function C(){return arguments}i=ct(i),o=ct(o),f=ct(f),t=ct(t),this.alpha=ct(r),this.strength=ct(l),this.inner=ct(d),this.knockout=ct(p),this.hideObject=ct(w),this.createjsBlurFilter_constructor(i,o,f),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(O,I,_,P,F,K,V,D){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;K=K||O,V===void 0&&(V=I),D===void 0&&(D=_);var U=K.getImageData(V,D,P,F),Q=U.data,J=document.createElement("canvas");J.width=P,J.height=F;for(var N=J.getContext("2d",{willReadFrequently:!0}),te=N.getImageData(0,0,P,F),ae=te.data,ee=this.inner,pe=this._red,$=this._green,X=this._blue,y=0,g=ae.length;y<g;y+=4){var h=y+3,L=Q[h];ee?L!==255&&(ae[y]=pe,ae[y+1]=$,ae[y+2]=X,ae[h]=255-L):L!==0&&(ae[y]=pe,ae[y+1]=$,ae[y+2]=X,ae[h]=L)}N.putImageData(te,0,0);var q=this.strength;if(0<q){this.createjsBlurFilter_applyFilter(N,0,0,P,F),255<q&&(q=255);for(var A=1;A<q;A++)N.drawImage(J,0,0)}var Y=this.alpha;Y<0?Y=0:1<Y&&(Y=1);var xe;return this.knockout?ee?xe="source-in":xe="source-out":this.hideObject?ee?xe="source-in":xe="copy":ee?xe="source-atop":xe="destination-over",K.save(),K.setTransform(1,0,0,1,0,0),K.globalAlpha=Y,K.globalCompositeOperation=xe,K.drawImage(J,V,D),K.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(O){O=e.convertColor(O,"hexNumber"),this._red=O>>16&255,this._green=O>>8&255,this._blue=O&255}}),this.color=t,this.clone=function(O){return new e.GlowFilter(O||!e.isPick(R[0])?t:R[0],O||!e.isPick(R[1])?r:R[1],O||!e.isPick(R[2])?i:R[2],O||!e.isPick(R[3])?o:R[3],O||!e.isPick(R[4])?f:R[4],O||!e.isPick(R[5])?l:R[5],O||!e.isPick(R[6])?d:R[6],O||!e.isPick(R[7])?p:R[7],O||!e.isPick(R[8])?p:R[8],k,this.group,T)}},e.extend(e.GlowEffect,je.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),e.ShadowEffect=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b){var E="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",R;if(R=yt(e.ShadowEffect,arguments,E,this))return R;qe("69.973"),this.group=S;var C=T===!1?{}:e.getStyle("ShadowEffect",S,b);n(t)&&(t=C.distance!=null?C.distance:10),n(r)&&(r=C.angle!=null?C.angle:45),n(i)&&(i=C.color!=null?C.color:e.black),n(o)&&(o=C.alpha!=null?C.alpha:.4),n(l)&&(l=C.blurX!=null?C.blurX:15),n(f)&&(f=C.blurY!=null?C.blurY:15),n(d)&&(d=C.strength!=null?C.strength:1),n(p)&&(p=C.quality!=null?C.quality:1),n(w)&&(w=C.inner!=null?C.inner:!1),n(k)&&(k=C.knockout!=null?C.knockout:!1),n(x)&&(x=C.hideObject!=null?C.hideObject:!1);var O=I(t,r,i,o,l,f,d,p,w,k,x);this.veeObj={distance:O[0],angle:O[1],color:O[2],alpha:O[3],blurX:O[4],blurY:O[5],strength:O[6],quality:O[7],inner:O[8],knockout:O[9],hideObject:O[10]};function I(){return arguments}l=ct(l),f=ct(f),p=ct(p),i=ct(i),t=ct(t),r=ct(r);var _=this;this.alpha=ct(o),this.strength=ct(d),this.inner=ct(w),this.knockout=ct(k),this.hideObject=ct(x),this.createjsBlurFilter_constructor(l,f,p),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return r},set:function(F){r=F=(F%360+360)%360,P(t,F)}}),this.angle=r,Object.defineProperty(this,"distance",{get:function(){return t},set:function(F){t=F,P(F,r)}}),this.distance=t;function P(F,K){var V=K*e.RAD;_._offsetX=Math.cos(V)*F,_._offsetY=Math.sin(V)*F}Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(F){F=e.convertColor(F,"hexNumber"),this._red=F>>16&255,this._green=F>>8&255,this._blue=F&255}}),this.color=i,this.applyFilter=function(F,K,V,D,U,Q,J,N){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;Q=Q||F,J===void 0&&(J=K),N===void 0&&(N=V);var te=Q.getImageData(J,N,D,U),ae=te.data,ee=document.createElement("canvas");ee.width=D,ee.height=U;for(var pe=ee.getContext("2d",{willReadFrequently:!0}),$=pe.getImageData(0,0,D,U),X=$.data,y=this.inner,g=this._red,h=this._green,L=this._blue,q=0,A=X.length;q<A;q+=4){var Y=q+3,xe=ae[Y];y?xe!==255&&(X[q]=g,X[q+1]=h,X[q+2]=L,X[Y]=255-xe):xe!==0&&(X[q]=g,X[q+1]=h,X[q+2]=L,X[Y]=xe)}pe.putImageData($,0,0);var G=this.strength;if(0<G){this.createjsBlurFilter_applyFilter(pe,0,0,D,U),255<G&&(G=255);for(var Z=1;Z<G;Z++)pe.drawImage(ee,0,0)}var ge=this.alpha;ge<0?ge=0:1<ge&&(ge=1);var he;return this.knockout?y?he="source-in":he="source-out":this.hideObject?y?he="source-in":he="copy":y?he="source-atop":he="destination-over",Q.save(),Q.setTransform(1,0,0,1,0,0),Q.globalAlpha=ge,Q.globalCompositeOperation=he,Q.drawImage(ee,J+this._offsetX,N+this._offsetY),Q.restore(),!0},this.getBounds=function(F){var K=this.createjsBlurFilter_getBounds(F),V=this._offsetX,D=this._offsetY;return V!==0&&(V<0?(K.x+=V,K.width+=-V):K.width+=V),D!==0&&(D<0?(K.y+=D,K.height+=-D):K.height+=D),K},this.clone=function(F){return new e.ShadowFilter(F||!e.isPick(O[0])?t:O[0],F||!e.isPick(O[1])?r:O[1],F||!e.isPick(O[2])?i:O[2],F||!e.isPick(O[3])?o:O[3],F||!e.isPick(O[4])?l:O[4],F||!e.isPick(O[5])?f:O[5],F||!e.isPick(O[6])?p:O[6],F||!e.isPick(O[7])?d:O[7],F||!e.isPick(O[8])?w:O[8],F||!e.isPick(O[9])?k:O[9],F||!e.isPick(O[10])?x:O[10],T,this.group,b)}},e.extend(e.ShadowEffect,je.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),e.ColorEffect=function(t,r,i,o,l,f,d,p,w,k,x){var T="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",S;if(S=yt(e.ColorEffect,arguments,T,this))return S;qe("69.9735"),this.group=k;var b=w===!1?{}:e.getStyle("ColorEffect",k,x);n(t)&&(t=b.redMultiplier!=null?b.redMultiplier:1),n(r)&&(r=b.greenMultiplier!=null?b.greenMultiplier:1),n(i)&&(i=b.blueMultiplier!=null?b.blueMultiplier:1),n(o)&&(o=b.alphaMultiplier!=null?b.alphaMultiplier:1),n(l)&&(l=b.redOffset!=null?b.redOffset:0),n(f)&&(f=b.greenOffset!=null?b.greenOffset:0),n(d)&&(d=b.blueOffset!=null?b.blueOffset:0),n(p)&&(p=b.alphaOffset!=null?b.alphaOffset:0);var E=R(t,r,i,o,l,f,d,p);this.veeObj={redMultiplier:E[0],greenMultiplier:E[1],blueMultiplier:E[2],alphaMultiplier:E[3],redOffset:E[4],greenOffset:E[5],blueOffset:E[6],alphaOffset:E[7]};function R(){return arguments}t=ct(t),r=ct(r),i=ct(i),o=ct(o),l=ct(l),f=ct(f),d=ct(d),p=ct(p),this.createjsColorFilter_constructor(t,r,i,o,l,f,d,p),this.type="ColorEffect",this.clone=function(C){return new e.ColorEffect(t,r,i,o,l,f,d,p,C||!e.isPick(E[0])?t:E[0],C||!e.isPick(E[1])?r:E[1],C||!e.isPick(E[2])?i:E[2],C||!e.isPick(E[2])?o:E[3],C||!e.isPick(E[2])?l:E[4],C||!e.isPick(E[2])?f:E[5],C||!e.isPick(E[2])?d:E[6],C||!e.isPick(E[2])?p:E[7],w,this.group,x)}},e.extend(e.ColorEffect,je.ColorFilter,"clone","createjsColorFilter",!1),e.MultiEffect=function(t,r,i,o,l,f,d){var p="hue, saturation, brightness, contrast, style, group, inherit",w;if(w=yt(e.MultiEffect,arguments,p,this))return w;qe("69.974"),this.group=f;var k=l===!1?{}:e.getStyle("MultiEffect",f,d);n(t)&&(t=k.hue!=null?k.hue:0),n(r)&&(r=k.saturation!=null?k.saturation:0),n(i)&&(i=k.brightness!=null?k.brightness:0),n(o)&&(o=k.contrast!=null?k.contrast:0);var x=T(t,r,i,o);this.veeObj={hue:x[0],saturation:x[1],brightness:x[2],contrast:x[3]};function T(){return arguments}t=ct(t),this.createjsColorMatrixFilter_constructor(new je.ColorMatrix().adjustColor(i,o,r,t)),this.type="MultiEffect",this.adjustColor=function(S,b,E,R){n(t)||(t=ct(S)),n(r)||(r=ct(b)),n(i)||(i=ct(E)),n(o)||(o=ct(R)),this.matrix.reset().adjustColor(S,b,E,R)},Object.defineProperty(this,"brightness",{get:function(){return i},set:function(S){i=ct(S),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"contrast",{get:function(){return o},set:function(S){o=ct(S),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"saturation",{get:function(){return r},set:function(S){r=ct(S),this.matrix.reset().adjustColor(i,o,r,t)}}),Object.defineProperty(this,"hue",{get:function(){return t},set:function(S){t=ct(S),this.matrix=new je.ColorMatrix().adjustColor(i,o,r,t),this.applyFilter()}}),this.clone=function(S){return new e.MultiEffect(S||!e.isPick(x[0])?t:x[0],S||!e.isPick(x[0])?r:x[0],S||!e.isPick(x[0])?i:x[0],S||!e.isPick(x[0])?o:x[0],l,this.group,d)}},e.extend(e.MultiEffect,je.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),e.AlphaEffect=function(t,r,i,o){var l="mask, style, group, inherit",f;if(f=yt(e.AlphaEffect,arguments,l,this))return f;qe("69.9745"),this.group=i;var d=r===!1?{}:e.getStyle("AlphaEffect",i,o);n(t)&&(t=d.mask!=null?d.mask:null);var p=w(t);this.veeObj={mask:p[0]};function w(){return arguments}t=ct(t),t.type=="Bitmap"?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(k){return new e.AlphaEffect(k||!e.isPick(p[0])?t:p[0],r,this.group,o)}},e.extend(e.AlphaEffect,je.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),e.Pixel=function(t,r,i,o,l,f,d,p,w,k,x,T,S){var b="obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",E;if(E=yt(e.Pixel,arguments,b,this))return E;qe("69.9747"),this.group=T;var R=x===!1?{}:e.getStyle("Pixel",T,S);n(t)&&(t=R.obj!=null?R.obj:null),n(r)&&(r=R.amount!=null?R.amount:.5),n(i)&&(i=R.amountY!=null?R.amountY:null);var C=!1;i==null&&(C=!0,i=r),n(o)&&(o=R.blur!=null?R.blur:0),n(l)&&(l=R.dynamic!=null?R.dynamic:!1),n(f)&&(f=R.blendmode!=null?R.blendmode:null),n(d)&&(d=R.boundary!=null?R.boundary:new e.Boundary(t.getBounds())),n(p)&&(p=R.expand!=null?R.expand:0),n(w)&&(w=R.amountFactor!=null?R.amountFactor:.6),n(k)&&(k=R.blurFactor!=null?R.blurFactor:.6);var O=I(t,r,i,o,f,w,k);this.veeObj={obj:O[0],amount:O[1],amountY:O[2],blur:O[3],blendmode:O[4],amountFactor:O[5],blurFactor:O[6]};function I(){return arguments}t=ct(t),r=ct(r),i=ct(i),o=ct(o),f=ct(f),w=ct(w),k=ct(k),p&&(Array.isArray(p)?p.length==1?d.contract(-p):p.length==2?d.contract(-p[0],-p[1]):d.contract(-p[0],-p[1],-p[2],-p[3]):d.contract(-p));var _=e.constrain(w*10,0,10),P=e.constrain(k*10,0,10),F=this,K=Math.pow(Math.E,-r*_),V=Math.pow(Math.E,-i*_),D=Math.pow(Math.E,-o*P);n(t)&&(t=new e.Tile(new e.Circle(20,[e.green,e.blue,e.yellow,e.pink,e.purple]),5,5,5,5));var U=document.createElement("canvas"),Q=U.getContext("2d"),J=document.createElement("canvas"),N=J.getContext("2d"),te=D;this.update=function(){!t.cacheCanvas||D!=te?(t.cache(d.x,d.y,d.width,d.height,D),te=D):t.updateCache(f);var ae=t.width,ee=t.height,pe=t.width*K,$=t.height*V;U.width=ae,U.height=ee,J.width=ae,J.height=ee,N.msImageSmoothingEnabled=!1,N.mozImageSmoothingEnabled=!1,N.webkitImageSmoothingEnabled=!1,N.imageSmoothingEnabled=!1,Q.drawImage(t.cacheCanvas,0,0,pe,$),N.drawImage(U,0,0,pe,$,-p*t.scale,-p*t.scale,J.width+p*2*t.scaleX,J.height+p*2*t.scaleY)},this.update(),this.zimBitmap_constructor(J),l&&(this.dynamicTicker=e.Ticker.add(function(){F.update()})),Object.defineProperty(this,"amount",{get:function(){return r},set:function(ae){r=ae,K=Math.pow(Math.E,-r*_),C&&(V=Math.pow(Math.E,-r*_),i=r),F.update()}}),Object.defineProperty(this,"amountX",{get:function(){return r},set:function(ae){r=ae,C=!1,K=Math.pow(Math.E,-r*_),F.update()}}),Object.defineProperty(this,"amountY",{get:function(){return i},set:function(ae){i=ae,C=!1,V=Math.pow(Math.E,-i*_),F.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return w},set:function(ae){w=ae,_=e.constrain(w*10,0,10),K=Math.pow(Math.E,-r*_),V=Math.pow(Math.E,-i*_),F.update()}}),Object.defineProperty(this,"blur",{get:function(){return o},set:function(ae){o=ae,D=Math.pow(Math.E,-o*P),F.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return k},set:function(ae){k=ae,P=e.constrain(k*10,0,10),D=Math.pow(Math.E,-o*P),F.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return l},set:function(ae){l!=ae&&(l=ae,l?F.dynamicTicker?F.dynamicTicker=e.Ticker.add(F.dynamicTicker):F.dynamicTicker=e.Ticker.add(F.update):F.dynamicTicker&&e.Ticker.remove(F.dynamicTicker))}}),this.dispose=function(){F.dynamicTicker&&e.Ticker.remove(F.dynamicTicker),this.zimBitmap_dispose()},x!==!1&&e.styleTransforms(this,R),this.clone=function(ae){return F.cloneProps(new e.Pixel(ae||!e.isPick(O[0])?t:O[0],ae||!e.isPick(O[1])?r:O[1],ae||!e.isPick(O[2])?i:O[2],ae||!e.isPick(O[3])?o:O[3],l,ae||!e.isPick(O[4])?f:O[4],d,p,ae||!e.isPick(O[5])?w:O[5],ae||!e.isPick(O[6])?k:O[6],x,this.group,S))}},e.extend(e.Pixel,e.Bitmap,["clone","dispose"],"zimBitmap",!1),e.Parallax=function(t,r,i,o,l,f,d){var p="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",w;if(w=yt(e.Parallax,arguments,p,this))return w;if(qe("68"),this.type="Parallax",n(o))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)o=t[0].obj.stage;else if(le.zdf)o=le.zdf.stage;else return;n(i)?i=!0:i=!1,n(l)&&(l=!1),n(f)&&(f=!1);var k=o.getBounds().width,x=o.getBounds().height;o.mouseMoveOutside=f;var T=this;T.stageEvent=o.on("stagemousemove",function(O){T.mouseX=O.rawX/e.scaX,T.mouseY=O.rawY/e.scaY});var S=n(r)?.1:r;this.addLayer=function(O){if(!(n(O.obj)||n(O.prop)||n(O.propChange))){var I={obj:O.obj,prop:O.prop};I[I.prop]=O.propChange,n(O.input)&&(O.input="mouseX"),I.input=O.input,I.split=n(O.split)?!!(O.input=="mouseX"&&i):O.split;var _=n(O.inMin)?0:O.inMin,P=n(O.inMax)?O.input=="mouseX"||O.input=="scrollX"?k:x:O.inMax,F=n(O.factor)?1:O.factor,K=n(O.integer)?!1:O.integer;return I["p_"+I.prop]=new e.ProportionDamp(_,P,0,I[I.prop],S,F,K,d),I.prop=="scale"?I["s_"+I.prop]=I.obj.scaleX:I.prop=="frame"?I["s_"+I.prop]=I.obj.currentFrame:I["s_"+I.prop]=I.obj[I.prop],n(O.immediate)||I["p_"+I.prop].immediate(O.immediate),b.push(I),T}},this.removeLayer=function(O){if(!n(O)){var I=b[O];return I["p_"+I.prop].dispose(),b.splice(O,1),T}},this.immediate=function(O){for(var I,_=0;_<b.length;_++)I=b[_],I["p_"+I.prop].immediate(O[_]);return T},this.dispose=function(){return o.off("stagemousemove",T.stageEvent),b=null,i&&e.Ticker.remove(R),!0},t=n(t)?[]:t;for(var b=[],E=0;E<t.length;E++)this.addLayer(t[E]);if(i){var R=e.Ticker.add(C,o);l&&e.Ticker.remove(R)}function C(){T.step()}this.step=function(O){for(var I,_,P=0;P<b.length;P++)I=b[P],n(O)?I.input=="mouseX"?_=T.mouseX:I.input=="mouseY"?_=T.mouseY:I.input=="scrollX"?_=e.scrollX():I.input=="scrollY"&&(_=e.scrollY()):_=O,I.prop=="scale"?I.obj.scaleX=I.obj.scaleY=I["s_"+I.prop]+I["p_"+I.prop].convert(_):I.prop=="frame"?I.obj.gotoAndStop(I["s_"+I.prop]+I["p_"+I.prop].convert(_)):(I.obj[I.prop]=I["s_"+I.prop]+I["p_"+I.prop].convert(_),I.split&&(I.obj[I.prop]-=I[I.prop]/2));return T},T.paused=l,T.pause=function(O){return n(O)&&(O=!0),T.paused!=O&&(T.paused=O,R&&(O?e.Ticker.remove(R):R=e.Ticker.add(R))),T},Object.defineProperty(T,"damp",{get:function(){return S},set:function(O){S=O;for(var I,_=0;_<b.length;_++)I=b[_],I["p_"+I.prop].damp=S}})},e.Flipper=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b){var E="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",R;if(R=yt(e.Flipper,arguments,E,this))return R;qe("68.5"),this.group=S;var C=T===!1?{}:e.getStyle("Flipper",this.group,b);if(n(t)&&(t=C.front!=null?C.front:le.zdf.makeIcon().sca(2)),n(r)&&(r=C.back!=null?C.back:new e.Page(t.width,t.height,e.dark)),this.front=t,this.back=r,f){var O=t;t=r,r=O}var I=Math.max(t.width,r.width),_=Math.max(t.height,r.height);this.zimContainer_constructor(I,_),this.type="Flipper",n(o)&&(o=C.time!=null?C.time:.2),n(l)&&(l=C.vertical!=null?C.vertical:!1),n(i)&&(i=C.interactive!=null?C.interactive:!1),n(f)&&(f=C.flipped!=null?C.flipped:!1),n(d)&&(d=C.easeRoot!=null?C.easeRoot:"quad"),n(p)&&(p=C.frontPress!=null?C.frontPress:!0),n(w)&&(w=C.backPress!=null?C.backPress:!0),n(k)&&(k=C.reverse!=null?C.reverse:!1),n(x)&&(x=C.continuous!=null?C.continuous:!1);var P=f;this.flipped=f;var F=this;t.centerReg(this);var K;(p&&!f||w&&f)&&(K=i&&t.backing?t.backing:t,K.on("mousedown",function(){V(t,r)}),K.cur()),(w&&!f||p&&f)&&(K=i&&r.backing?r.backing:r,K.on("mousedown",function(){V(r,t,-1)}),K.cur()),t.oScale=t.scale,r.oScale=r.scale,t.flipper=F,t.other=r,r.flipper=F,r.other=t,i||(t.mouseChildren=r.mouseChildren=!1),this.flip=function(D,U){D!=F.flipped&&(F.flipped?V(P?t:r,P?r:t,-1,U):V(P?r:t,P?t:r,1,U))};function V(D,U,Q,J){if(n(Q)&&(Q=1),Q*=k?-1:1,x&&(Q=k?P?1:-1:P?-1:1),n(J)&&(J=o),F.flipped=!F.flipped,F.dispatchEvent("flip"),J==0){F.removeAllChildren(),U.scale=U.oScale,U.skewX=U.skewY=0,U.centerReg(F),F.dispatchEvent("flipped");return}var N,te;l?(N={skewX:-90*Q,scaleY:D.oScale/2},te={skewX:0,scaleY:U.oScale},U.ske(90*Q,0).sca(U.oScale,U.oScale/2)):(N={skewY:-90*Q,scaleX:D.oScale/2},te={skewY:0,scaleX:U.oScale},U.ske(0,90*Q).sca(U.oScale/2,U.oScale)),D.animate({props:N,time:o,ease:d+"In",call:function(){D.removeFrom(),U.centerReg(F).animate({props:te,time:o,ease:d+"Out",call:function(){F.dispatchEvent("flipped")}})}})}T!==!1&&e.styleTransforms(this,C),this.clone=function(){return F.cloneProps(new e.Flipper(t.clone(),r.clone(),i,o,l,f,d,p,w,k,x,T,this.group,b))}},e.extend(e.Flipper,e.Container,"clone","zimContainer"),e.Book=function(t,r,i,o,l,f,d,p){var w="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",k;if(k=yt(e.Book,arguments,w,this))return k;qe("68.7"),n(t)&&(t=le.zdf?le.zdf.stage.width:1024),n(r)&&(r=le.zdf?le.zdf.stage.height:768),this.zimContainer_constructor(t,r),this.type="Book",n(i)&&(i=[]),n(o)&&(o=0),n(l)&&(l=!0),n(d)&&(d=e.darker),n(p)&&(p=!0);var x=v(),T=this;if(i.length==0)return;T.backing=new e.Rectangle(t-2,r-2,d),e.loop(i,function(F,K){typeof F=="string"&&(i[K]=e.asset(F)),i[K].zimBookIndex=K,C(F)}),T.added(R);var S,b,E;function R(F){S=F,b=S.frame;var K=new e.Shape,V,D,U,Q,J,N,te;T._currentPage=o;function ae(L){if(T._currentPage=L,T.removeAllChildren(),T.backing.loc(1,1,T),T.setMask(T.backing),K.addTo(T),K.c().f(e.black).dr(0,0,0,0),T.moving=!1,i[L-1]?V=i[L-1].reg(0,0).rot(0).loc(0,0,T):L>0&&te.reg(0,0).rot(0).loc(0,0,T).setMask(null),i[L-2]?D=i[L-2].reg(t/2,r).loc(0,r,T).rot(-90):D=new e.Rectangle(t/2,r,d).reg(t/2,r).loc(0,r,T).rot(-90),i[L-3]?U=i[L-3].rot(0).loc(0,0,T).setMask(K):U=new e.Rectangle(t/2,r,d).loc(0,0,T).setMask(K),i[L])Q=i[L].rot(0).reg(0,0).pos(0,0,e.RIGHT,e.TOP,T);else{S.update();return}i[L+1]?J=i[L+1].reg(0,r).loc(t,r,T).rot(90):(J=new e.Rectangle(t/2,r,d).reg(0,r).loc(t,r,T).rot(90),te=J),i[L+2]?N=i[L+2].rot(0).pos(0,0,e.RIGHT,e.TOP,T).setMask(K):N=new e.Rectangle(t/2,r,d).pos(0,0,e.RIGHT,e.TOP,T).setMask(K),S.update()}ae(o),Object.defineProperty(T,"directPage",{get:function(){return T._currentPage},set:function(L){P(),o%2==1?L=Math.ceil(L/2)*2-1:L=Math.ceil(L/2)*2,L!=T.page&&(L>T.page?(J.reg(0,0),N.setMask(null)):(D.reg(0,0),U.setMask(null)),ae(L),T.moving=!1,ee=!1,T.currentW=0,T.currentH=0,_())}});var ee=!1;T.currentW=0,T.currentH=0,T.moving=!1;function pe(){T.stageEvent=S.on("stagemousedown",function(){var L,q;if(!T.moving){var A=T.globalToLocal(b.mouseX,b.mouseY);if(!(A.x<0||A.x>t||A.y<0||A.y>r)&&!(f>0&&e.dist(A,new e.Point(0,r))>f&&e.dist(A,new e.Point(t,r))>f)){var Y=A.x>t/2?"right":"left";Y=="right"&&T._currentPage>=i.length-1||Y=="left"&&T._currentPage<=1||(T.moving=!0,Y=="right"?(Q.addTo(T),J.addTo(T),N.addTo(T),T.pageNext=N.zimBookIndex):(V.addTo(T),D.addTo(T),U.addTo(T),T.rolledUp&&y(0,0,"right"),T.pageNext=D.zimBookIndex),P(),T.direction=Y,T.dispatchEvent("rollpress"),T.moveEvent=S.on("stagemousemove",function(){$&&($.clear(),$=null);var xe=T.globalToLocal(b.mouseX,b.mouseY);Y=="right"?L=t-xe.x:L=xe.x,q=r-xe.y+L,T.currentW=L=e.constrain(L,0,t/2),T.currentH=q=e.constrain(q,0,r),y(L,q,Y)}),T.upEvent=S.on("stagemouseup",function(){S.off("stagemousemove",T.moveEvent),!ee&&X(L,q,Y)},null,!0))}}})}if(pe(),T.rollUp=function(L,q,A,Y,xe){if(!T.moving&&!(A=="right"&&T._currentPage>=i.length-1)&&!(A=="left"&&T._currentPage<=1)){A=="right"?(Q.addTo(T),J.addTo(T),N.addTo(T)):(T.rolledUp&&y(0,0,"right"),V.addTo(T),D.addTo(T),U.addTo(T)),T.moving=!0,n(Y)&&(Y=x=="s"?.5:.5/1e3),n(xe)&&(xe=null),T.animate({props:{currentW:L,currentH:q},time:Y,ease:xe,call:function(){e.Ticker.remove(G),T.moving=!1,y(L,q,A)}});var G=e.Ticker.add(function(){y(T.currentW,T.currentH,A)})}},l!==!1){T.rolledUp=!0,l===!0&&(l=x=="s"?1:1/1e3);var $=e.timeout(l,function(){T.rollUp(60,130,"right",.5),T.dispatchEvent("rollup")})}T.rollDown=function(L,q,A,Y){T.moving||A=="right"&&T._currentPage>=i.length-1||A=="left"&&T._currentPage<=1||X(L,q,A,Y)};function X(L,q,A,Y){T.moving=!0,T.rolledUp=!1,n(Y)&&(Y=x=="s"?.7:.7/1e3),T.animate({props:{currentW:0,currentH:0},time:Y,call:function(){e.Ticker.remove(xe),y(0,0,A),T.moving=!1,_(),T.dispatchEvent("rolldown")}});var xe=e.Ticker.add(function(){y(T.currentW,T.currentH,A)})}function y(L,q,A){var Y;A=="right"?(K.c().mt(t,r).lt(t-L,r).lt(t,r-q).cp(),Y=Math.atan2(L,q),J.loc(t-(L+L*Math.cos(2*Y)),r-L*Math.sin(2*Y)).rot(Y*2*e.DEG),!ee&&L>=t/2&&q>=r&&g()):(K.c().mt(0,r).lt(L,r).lt(0,r-q).cp(),Y=Math.atan2(L,q),D.loc(L+L*Math.cos(2*Y),r-L*Math.sin(2*Y)).rot(-Y*2*e.DEG),!ee&&L>=t/2&&q>=r&&h()),S.update()}function g(){P(),ee=!0,T.moving=!0,T.moveEvent&&S.off("stagemousemove",T.moveEvent),T.upEvent&&S.off("stagemouseup",T.upEvent),T.currentW=0,T.currentH=0,T.lastPage=e.constrain(T._currentPage),T.direction="right",T.pageNext=N.zimBookIndex,T.dispatchEvent("pageanimate"),T.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(L),J.reg(0,0),N.setMask(null),ae(T._currentPage+2),T.moving=!1,ee=!1,T.currentW=0,T.currentH=0,_(),T.dispatchEvent("page")}});var L=e.Ticker.add(function(){K.c().mt(t,r).lt(t/2,r).lt(t-T.currentW,0).lt(t,0).cp()});J.reg(t/2,r).loc(t/2,r,T).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function h(){P(),ee=!0,T.moving=!0,T.moveEvent&&S.off("stagemousemove",T.moveEvent),T.upEvent&&S.off("stagemouseup",T.upEvent),T.currentW=0,T.currentH=0,T.lastPage=e.constrain(T._currentPage),T.direction="left",T.pageNext=D.zimBookIndex,T.dispatchEvent("pageanimate"),T.animate({ease:"quadOut",props:{currentW:t/2},time:.3,timeUnit:"s",call:function(){e.Ticker.remove(L),D.reg(0,0),U.setMask(null),ae(T._currentPage-2),T.moving=!1,ee=!1,T.currentW=0,T.currentH=0,_(),T.dispatchEvent("page")}});var L=e.Ticker.add(function(){K.c().mt(0,r).lt(t/2,r).lt(T.currentW,0).lt(0,0).cp()});D.reg(0,r).loc(t/2,r,T).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}p&&(p===!0&&(p=.2),T.keydown=b.on("keydown",function(L){L.keyCode==39?T.nextPage(p):L.keyCode==37&&T.prevPage(p)})),T.changeFrame=function(L){return T.stageEvent&&S.off("stagemousedown",T.stageEvent),T.moveEvent&&S.off("stagemousemove",T.moveEvent),T.upEvent&&S.off("stagemouseup",T.upEvent),b=L,S=L.stage,pe(),T},_()}T.nextPage=function(F){if(n(T.rollUp))return setTimeout(function(){T.nextPage(F)},10),T;T.moving||T.rollUp(t/2+.1,r+.1,"right",F,"quadIn")},T.prevPage=function(F){if(n(T.rollUp))return setTimeout(function(){T.prevPage(F)},10),T;T.moving||T.rollUp(t/2+.1,r+.1,"left",F,"quadIn")},T.gotoPage=function(F,K){if(n(T.rollUp))return setTimeout(function(){T.gotoPage(F,K)},10),T;F=e.constrain(F,0,T.pages.length-1),n(K)&&(K=x=="s"?.3:300);var V=K+(x=="s"?.35:350);T.pageInterval=e.interval(V,function(D){var U=!1;T._currentPage<F?T.nextPage(K):T._currentPage>F?T.prevPage(K):U=!0,T.dispatchEvent("pageturn"),D.count==D.total-1&&(U?(_(),T.dispatchEvent("pagedone")):e.timeout(V,function(){_(),T.dispatchEvent("pagedone")}))},Math.floor(Math.abs(F-T._currentPage)/2+1),!0)};function C(F){F.addChild&&(F.zimHTMLList=new e.Dictionary,I(F),F.parent&&F.parent.removeChild(data.page))}function O(F){if(!(n(F)||!F.addChild))for(F.removedHTML=!1,E=0;E<F.zimHTMLList.length;E++)F.addChildAt(F.zimHTMLList.values[E].obj,F.zimHTMLList.values[E].depth)}function I(F){if(!(F.removedHTML||!F.addChild)){F.removedHTML=!0,F.zimHTMLList.clear();var K,V;for(V=0;V<F.numChildren;V++)if(K=F.getChildAt(V),K.type=="TextArea"||K.type=="Loader"||K.type=="Tag"){var D={obj:K,depth:F.getChildIndex(K)};F.zimHTMLList.add(K,D)}for(V=F.numChildren-1;V>=0;V--)K=F.getChildAt(V),(K.type=="TextArea"||K.type=="Loader"||K.type=="Tag")&&F.removeChild(K)}}function _(){T.pages[T.page]&&O(T.pages[T.page]),T.pages[T.page-1]&&O(T.pages[T.page-1])}function P(){T.pages[T.page]&&I(T.pages[T.page]),T.pages[T.page-1]&&I(T.pages[T.page-1])}Object.defineProperty(T,"page",{get:function(){return T._currentPage},set:function(F){T.gotoPage(F,x=="s"?.1:100)}}),Object.defineProperty(T,"pages",{get:function(){return i},set:function(){At&&ut("Book() - pages is read only")}}),this.dispose=function(F,K,V){return T.stageEvent&&S.off("stagemousedown",T.stageEvent),T.moveEvent&&S.off("stagemousemove",T.moveEvent),T.upEvent&&S.off("stagemouseup",T.upEvent),T.keydown&&b.off("keydown",T.keydown),T.removeFrom(),V||this.zimContainer_dispose(!0),!0}},e.extend(e.Book,e.Container,["clone","dispose"],"zimContainer"),e.Scrambler=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b){var E="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",R;if(R=yt(e.Scrambler,arguments,E,this))return R;qe("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=S;var C=T===!1?{}:e.getStyle(this.type,this.group,b);n(t)&&(t=C.tile!=null?C.tile:t),n(r)&&(r=C.keys!=null?C.keys:null),n(i)&&(i=C.keyProperty!=null?C.keyProperty:null),n(o)&&(o=C.scramble!=null?C.scramble:!0),n(l)&&(l=C.time!=null?C.time:0),n(f)&&(f=C.wait!=null?C.wait:0),n(d)&&(d=C.num!=null?C.num:1),n(p)&&(p=C.shadowColor!=null?C.shadowColor:"rgba(0,0,0,.3)"),n(w)&&(w=C.shadowBlur!=null?C.shadowBlur:5),n(k)&&(k=C.swap!=null?C.swap:!1),n(x)&&(x=C.swapLock!=null?C.swapLock:!1),x&&(k=!0),n(t)&&(t=new e.Tile(new e.Rectangle(100,100,e.series(e.silver,e.tin,e.grey,e.dark,e.darker)),5,1,5)),t.addTo(this);var O=this;O.complete=!0;var I=v(l);v(f);var _=(t.width+t.spacingH)/t.cols,P=(t.height+t.spacingV)/t.rows,F=le.zdf,K=e.makeID(null,10),V,D,U,Q=!1;t.pointers={},t.on("mousedown",function(X){if(Q)return;Q=!0,N(X.target),O.myDownCheck=!0,U=X.target;var y="id"+Math.abs(X.pointerID+1);if(t.pointers[y]=!0,V=X.target.x,D=X.target.y,x){var g=t.current;if(O.testItem(X.target,g.indexOf(X.target))){X.target.noMouse(),X.target.noDrag(),X.target.locked=!0,O.myDownCheck=Q=!1,te();return}}if(p!=-1&&w>0){var h=new je.Shadow(p,3,3,w);X.target.backing?X.target.backing.shadow=h:X.target.shadow=h}F&&(O.scrmu||(O.scrmu=F.on("mouseupplusonly",function(A){if(O.myDownCheck){O.myDownCheck=!1;var Y=e.loop(t.pointers,function(xe,G){return G});Y||(t.pointers.id0=!0),A={target:U,pointerID:A.pointerID?Y:-1},L(A)}}))),O.upEvent&&t.off("pressup",O.upEvent),O.upEvent=t.on("pressup",function(A){var Y="id"+Math.abs(A.pointerID+1);t.pointers[Y]&&(O.myDownCheck=Q=!1,L(A))});function L(A){var Y="id"+Math.abs(A.pointerID+1);if(t.pointers[Y]){delete t.pointers[Y];var xe=!0;if(te(),Q=!1,O.moveEvent&&t.off("pressmove",O.moveEvent),x){var G=A.target.boundsToGlobal(),Z=t.hitTestGrid(t.width,t.height,t.cols,t.rows,G.x+G.width/2,G.y+G.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(n(Z))xe=!1;else{var ge=g[Z[0]];A.target==ge?xe=!1:xe=!O.testItem(ge,Z[0])}}k&&xe&&J(A),A.target.mouseEnabled=!1,A.target.animate({props:{x:V,y:D},time:.1,id:K,timeUnit:"seconds",pauseOnBlur:!1,call:q,params:A})}}function q(A){!O.complete&&O.test()&&(O.complete=!0,O.dispatchEvent("complete")),p!=-1&&w>0&&(A.target.backing?A.target.backing.shadow=null:A.target.shadow=null),A.target.mouseEnabled=!0}k||(O.moveEvent&&t.off("pressmove",O.moveEvent),O.moveEvent=t.on("pressmove",function(A){J(A)}))});function J(X){var y=X.target;y.stopAnimate();var g=y.boundsToGlobal(),h=t.hitTestGrid(t.width,t.height,t.cols,t.rows,g.x+g.width/2,g.y+g.height/2,null,null,t.spacingH,t.spacingV,null,"open");n(h)||e.loop(t,function(L){if(!(L==y||L.paused===!1)){var q=L.boundsToGlobal(),A=t.hitTestGrid(t.width,t.height,t.cols,t.rows,q.x+q.width/2,q.y+q.height/2,null,null,t.spacingH,t.spacingV,null,"open");if(!n(A)){var Y;h[2]==A[2]&&(L.x>=y.x&&L.x<=y.x+_/2||L.x<=y.x&&L.x>=y.x-_/2)&&(Y=L.x,L.top().ord(-1),L.animate({props:{x:V},time:.2,id:K,timeUnit:"seconds",call:function(){k&&!O.complete&&O.test()&&(O.complete=!0,O.dispatchEvent("complete"))}}),V=Y),h[1]==A[1]&&(L.y>=y.y&&L.y<=y.y+P/2||L.y<=y.y&&L.y>=y.y-P/2)&&(Y=L.y,L.top().ord(-1),L.animate({props:{y:D},time:.201,override:!1,id:K,timeUnit:"seconds",call:function(){k&&!O.complete&&O.test()&&(O.complete=!0,O.dispatchEvent("complete"))}}),D=Y)}}},!0)}function N(X){t.loop(function(y){y!=X&&y.noMouse()})}function te(){t.loop(function(X){X.locked||X.mouse()})}this.test=function(){var X=t.current;return e.loop(X,function(y,g){if(n(y)||!O.testItem(y,g))return!1})},this.testItem=function(X,y){if(!n(X)){if(n(y)&&(y=t.current.indexOf(X)),r){var g=n(i)?X.key:X[i];if(g!=r[y])return!1}else if(t.items[y]!=X)return!1;return!0}},this.starts=[];var ae=[];e.loop(t.rows*t.cols,function(X){ae.push(X)});var ee=ae.slice();t.loop(function(X){X.mouseChildren=!1,O.starts.push({x:X.x,y:X.y})}),this.inactive=!1,this.scramble=function(X,y,g){n(y)&&(y=0),n(X)&&(X=0),(n(g)||X==0)&&(g=1),pe(),e.timeout(y,function(){X>0?e.interval(X/g,h,g,!0):h()}),setTimeout(function(){O.complete=!1,t.loop(function(L){L.mouse(),L.locked=!1}),O.mouse(),t.drag({boundary:t,singleTouch:!0}),Q=!1},I=="s"?(y+X)*1e3:y+X);function h(){for(var L=!0,q=0;L&&q<50;)q++,e.shuffle(ae),L=e.loop(ae,function(A,Y){var xe=t.getChildAt(A);if(r){var G=n(i)?xe.key:xe[i];if(G!=r[Y])return!1}else if(t.items[Y]!=xe)return!1});$(ae,X/g),e.timeout(X,function(){O.dispatchEvent("scrambled")})}return O},o?O.scramble(l,f,d):O.added(function(){t.drag({boundary:t,singleTouch:!0})});function pe(){O.upEvent&&t.off("pressup",O.upEvent),O.moveEvent&&t.off("pressmove",O.moveEvent),t.noDrag(),f+l>0&&O.noMouse()}function $(X,y,g){e.stopAnimate(K),e.loop(t.items,function(h,L,q){var A=O.starts[X[L]];y?h.animate({props:{x:A.x,y:A.y},time:y,ease:g?"quadInOut":"quadOut",wait:g,timeUnit:"seconds",id:K}):(h.loc(A),O.stage?h.drag({boundary:t,singleTouch:!0}):L==q-1&&O.added(function(){t.drag({boundary:t,singleTouch:!0})}))})}this.solve=function(X,y,g){n(g)&&(g=!0),n(y)&&(y=0),n(X)&&(X=0),y+X==0&&g&&O.noMouse(),setTimeout(function(){ae=ee.slice(),pe(),$(ae,X,0,g)},I=="s"?y*1e3:y),g||setTimeout(function(){O.mouse(),t.drag({boundary:t,singleTouch:!0})},I=="s"?(y+X)*1e3:y+X)},this._enabled=!0,Object.defineProperty(O,"enabled",{get:function(){return O._enabled},set:function(X){c(O,X),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&O.stage&&O.stage.update()}}),Object.defineProperty(O,"order",{get:function(){var X=[],y=e.loop(t.current,function(g){if(!g)return!1;X.push(g.tileNum)});return!y||X.length!=ae.length||(ae=X),ae},set:function(X){var y=[];e.loop(X,function(g){y.push(t.items[g])}),t.remake(y),t.stage&&t.stage.update()}}),this.dispose=function(X,y,g){return O.scrmu&&F.off("mouseupplus",O.scrmu),t.removeAllEventListeners(),g||(O.zimContainer_dispose(!0),O.stage&&O.stage.update()),!0},T!==!1&&e.styleTransforms(this,C),this.clone=function(){return O.cloneProps(new e.Scrambler(t.clone(),r,i,o,l,f,d,p,w,k,x,T,O.group,b))}},e.extend(e.Scrambler,e.Container,["clone","dispose"],"zimContainer",!1),e.Scroller=function(t,r,i,o,l,f,d,p,w,k){var x="backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",T;if(T=yt(e.Scroller,arguments,x,this))return T;qe("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=w;var S=p===!1?{}:e.getStyle(this.type,this.group,k);if(n(t)&&(t=S.backing!=null?S.backing:null),n(t))return;var b=this.backing1=t;if(n(b)||!b.getBounds)return;var E=this.backing2=t.clone(!0);n(o)&&(o=S.horizontal!=null?S.horizontal:!0),n(l)&&(l=S.gapFix!=null?S.gapFix:0),n(d)&&(d=S.container!=null?S.container:null),n(f)&&(f=S.stage!=null?S.stage:null);var R=this;n(r)&&(r=S.speed!=null?S.speed:1),this.speed=r;var C=this.baseSpeed=this.speed;n(i)&&(i=S.direction!=null?S.direction:1),this.direction=i;var O=o?b.scaleX:b.scaleY;if(b.type=="AC"){ut("ZIM Scroller(): please provide Pic() with dimensions for backing objects");return}if(!b.getBounds()){ut("ZIM Scroller(): please setBounds() on backing objects");return}if(!f&&!b.stage){ut("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start");return}if(!b.parent){ut("ZIM Scroller(): please add object to container or stage before adding to Scroller");return}if(b.parent.addChildAt(E,b.parent.getChildIndex(b)),f=f||b.stage,n(d)&&(d=f),!d.getBounds()){ut("zim display - Scroller(): please setBounds() on container or stage if no container");return}var I=b.getBounds().width*O-l,_=b.getBounds().height*O-l,P,F;o?E.x=I:E.y=_;var K=!1,V=e.Ticker.add(D,f);function D(){P||(P=d.getBounds().width,F=d.getBounds().height),!(R.speed==0||R.direction==0)&&(o?(b.x-=R.speed*R.direction,b.x<E.x?E.x=b.x+I:E.x=b.x-I,R.direction*R.speed>0?E.x<0&&b.x<E.x?b.x=E.x+I:b.x<0&&E.x<b.x&&(E.x=b.x+I):E.x>P&&E.x>b.x?E.x=b.x-I:b.x>P&&b.x>E.x&&(b.x=E.x-I)):(b.y-=R.speed*R.direction,b.y<E.y?E.y=b.y+_:E.y=b.y-_,R.direction*R.speed>0?E.y<0&&b.y<E.y?b.y=E.y+_:b.y<0&&E.y<b.y&&(E.y=b.y+_):E.y>F&&E.y>b.y?E.y=b.y-_:b.y>F&&b.y>E.y&&(b.y=E.y-_)))}this.paused=!1,this.pause=function(U,Q){return n(U)&&(U=!0),n(Q)&&(Q=0),U?(C=R.speed,Q>0?(K=!0,e.animate({target:R,obj:{pausingSpeed:0},ticker:!1,time:Q,call:function(){R.speed=0,R.paused=!0,K=!1,R.dispatchEvent("pause")}})):(K=!1,R.speed=0,R.paused=!0,setTimeout(function(){R.dispatchEvent("pause")},10))):(K=!1,Q>0?e.animate({target:R,obj:{pausingSpeed:C},ticker:!1,time:Q,call:function(){R.speed=C,R.paused=!1,K=!1}}):(R.speed=C,R.paused=!1)),R},Object.defineProperty(R,"percentSpeed",{get:function(){return R.baseSpeed==0?NaN:R.speed/R.baseSpeed*100},set:function(U){K||R.paused||(R.speed=R.baseSpeed*U/100)}}),Object.defineProperty(R,"pausingSpeed",{get:function(){return R.baseSpeed==0?NaN:R.speed/R.baseSpeed*100},set:function(U){R.speed=R.baseSpeed*U/100}}),Object.defineProperty(R,"percentComplete",{get:function(){return o?b.x<0&&b.x>E.x?-b.x/b.width*100:(-E.x/E.width*100+1e9)%100:b.y<0&&b.y>E.y?-b.y/b.height*100:(-E.y/E.height*100+1e9)%100},set:function(U){U=(U+1e9)%100,o?(b.x=-U*b.width/100,E.x=b.x+I):(b.y=-U*b.height/100,E.y=b.y+_)}}),p!==!1&&e.styleTransforms(this,S),this.dispose=function(){return e.Ticker.remove(V),!0}},e.extend(e.Scroller,je.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",b;if(b=yt(e.Dynamo,arguments,S,this))return b;qe("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=x;var E=k===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=E.sprite!=null?E.sprite:null),n(t))return;var R=this.frames=t.parseFrames(i,o,l,!0);if(R.length==0)return;this.totalFrames=R.length;var C=0;n(r)&&(r=E.speed!=null?E.speed:30),n(d)&&(d=E.reversible!=null?E.reversible:!0);var O=this.baseSpeed=this.speed=r;n(f)&&(f=E.update!=null?E.update:!1),n(p)&&(p=E.flip!=null?E.flip:null),n(p)&&d==!1&&(p=!0);var I=this,_,P,F=Date.now(),K,V,D,U=!1;I.scaleX=t.scaleX,I.scaleY=t.scaleY;function Q(){if(_=requestAnimationFrame(Q),P=R[C].s,!(I.speed==0||P==0)&&(V=1e3/Math.abs(I.speed)*P,K=Date.now(),K-F>V)){F=K;var J=I.frame+(I.speed>0||!d?1:-1),N=!1;J>=R.length&&(N=!0,J=0),J<0&&(N=!0,J=R.length-1),I.frame=J,p&&(I.speed<0?t.scaleX=-I.scaleX:t.scaleX=I.scaleX),w&&(I.speed<0?t.scaleY=-I.scaleY:t.scaleY=I.scaleY),N&&I.dispatchEvent("loop"),I.dispatchEvent("change"),f&&t.stage&&t.stage.update(),!n(D)&&D==I.frame&&(U=!1,I.speed=0,I.paused=!0,I.dispatchEvent("pause"))}}Q(),this.paused=!1,this.pause=function(J,N,te){if(n(J)&&(J=!0),J!=I.paused)return n(N)&&(N=0),J?(O=I.speed,typeof te>"u"?N>0?(U=!0,e.animate({target:I,obj:{pausingSpeed:0},ticker:!1,time:N,call:function(){U=!1,I.speed=0,I.paused=!0,I.dispatchEvent("pause")}})):(U=!1,I.speed=0,I.paused=!0,setTimeout(function(){I.dispatchEvent("pause")},10)):(U=!0,D=te)):(D=null,N>0?(U=!0,e.animate({target:I,obj:{pausingSpeed:O},ticker:!1,time:N,call:function(){U=!1,I.speed=O,I.paused=!1}})):(U=!1,I.speed=O,I.paused=!1)),I},Object.defineProperty(I,"frame",{get:function(){return C},set:function(J){C=Math.round(J)%R.length;var N=R[C];n(N)||(t.frame=N.f)}}),Object.defineProperty(I,"percentSpeed",{get:function(){return I.baseSpeed==0?NaN:U||I.paused?O/I.baseSpeed*100:I.speed/I.baseSpeed*100},set:function(J){if(U||I.paused){O=I.baseSpeed*J/100;return}I.speed=I.baseSpeed*J/100}}),Object.defineProperty(I,"pausingSpeed",{get:function(){return I.baseSpeed==0?NaN:I.speed/I.baseSpeed*100},set:function(J){I.speed=I.baseSpeed*J/100}}),k!==!1&&e.styleTransforms(this,E),this.dispose=function(){cancelAnimationFrame(_)}},e.extend(e.Dynamo,je.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(t){qe("69.3"),this.cjsEventDispatcher_constructor();var r=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,f=0;f<o.length;f++)l=r.items.indexOf(o[f]),l<0&&r.items.push(o[f]);return r},t&&this.add(t),this.remove=function(i){var o;Array.isArray(i)?o=i:o=[i];for(var l,f=0;f<o.length;f++)l=r.items.indexOf(o[f]),l>=0&&r.items.splice(l,1);return r},this.pause=function(i,o,l){if(n(i)&&(i=!0),i==r.paused)return;var f=[];if(i){n(l)||(o=null);for(var d=!1,p=0;p<r.items.length;p++)(!n(o)&&n(l)&&!r.items[p].totalFrames||r.items[p].totalFrames&&(!n(o)||!n(l)))&&(r.items[p].pause(!0,o,l),d=!0,f[p]=1,r.items[p].on("pause",function(){r.paused||(w(!0),r.paused=!0,r.dispatchEvent("pause"))},null,!0));d||(w(),r.paused=!0,setTimeout(function(){r.dispatchEvent("pause")},10))}else r.paused=!1,w();function w(){for(var k=0;k<r.items.length;k++)f[k]!=1&&r.items[k].pause(i)}},Object.defineProperty(r,"percentSpeed",{get:function(){return r._percentSpeed},set:function(i){r._percentSpeed=i;for(var o=0;o<r.items.length;o++)r.items[o].percentSpeed=i}}),this.dispose=function(){for(var i=0;i<r.items.length;i++)r.items[i].dispose();return r.items=null,!0}},e.extend(e.Accelerator,je.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y){var g="obj, width, height, interval, num, life, fade, shrink, warm, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, focusWarm, style, group, inherit",h;if(h=yt(e.Emitter,arguments,g,this))return h;qe("69.9"),this.type="Emitter",this.group=X;var L=$===!1?{}:e.getStyle(this.type,this.group,y);n(t)&&(t=L.obj!=null?L.obj:[new e.Circle(20,e.pink),new e.Circle(20,e.green),new e.Circle(20,e.blue)]),n(r)&&(r=L.width!=null?L.width:300),n(i)&&(i=L.height!=null?L.height:300);var q=v(o);n(o)&&(o=L.interval!=null?L.interval:q=="s"?.02:20),typeof o=="number"&&(o=Math.max(q=="s"?.01:10,o)),n(l)&&(l=L.num!=null?L.num:1),n(T)&&(T=L.trace!=null?T.size:!1),n(S)&&(S=L.traceFadeTime!=null?L.traceFadeTime:k),n(b)&&(b=L.traceShiftX!=null?L.traceShiftX:0),n(E)&&(E=L.traceShiftY!=null?L.traceShiftY:0),a(f,q),n(f)&&(f=L.life!=null?L.life:q=="s"?1:1e3),n(d)&&(d=L.fade!=null?L.fade:!0),n(p)&&(p=L.shrink!=null?L.shrink:!T),n(w)&&(w=L.warm!=null?L.warm:null),a(k,q),n(k)&&(k=L.decayTime!=null?L.decayTime:q=="s"?1:1e3),n(R)&&(R=L.angle!=null?L.angle:{min:0,max:360}),n(C)&&(C=L.force!=null?L.force:5),n(O)&&(O=L.gravity!=null?L.gravity:9.8),n(I)&&(I=L.wind!=null?L.wind:0),n(_)&&(_=L.layers!=null?L.layers:"top"),n(r)&&(r=L.width!=null?L.width:100),n(i)&&(i=L.height!=null?L.height:100),n(K)&&(K=L.horizontal!=null?L.horizontal:!1),n(V)&&(V=L.vertical!=null?L.vertical:!1),n(D)&&(D=L.sink!=null?L.sink:null),!n(D)&&n(U)&&(U=L.sinkForce!=null?L.sinkForce:10),n(J)&&(J=L.events!=null?L.events:!1),n(N)&&(N=L.startPaused!=null?L.startPaused:!1),n(te)&&(te=L.pool!=null?L.pool:!0),n(ae)&&(ae=L.poolMin!=null?L.poolMin:0),n(ee)&&(ee=L.particles!=null?L.particles:new e.Container),n(pe)&&(pe=L.focusWarm!=null?L.focusWarm:!0),t.type=="shape"&&(pe=!1),ee.type="Particles",ee.emitter=this,this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var A=this;this.regX=r/2,this.regY=i/2,A.obj=t,A.particles=ee,A.interval=o,A.num=l,A.life=f,A.fade=d,A.shrink=p,A.decayTime=k,A.decayStart=x,A.trace=T,A.traceFadeTime=S,A.traceShiftX=b,A.traceShiftY=E,A.angle=R,A.emitterForce=C,A.gravity=O,A.wind=I,A.layers=_,A.animation=P,A.random=F,A.horizontal=K,A.vertical=V,A.sink=D,A.sinkForce=U,A.events=J,A.startEmitterPaused=A.emitterPaused=N,A.pool=te,A.poolMin=ae,A.particlesEmitted=0;var Y=[],xe=0,G=0,Z,ge;e.added(A,he);function he(ie){if(A.emitterPaused=null,A.on("added",function(){e.loop(A.particles,function(me){me.visible=!1}),A.particles.addTo(A.parent)}),ge=ie,n(Q)&&(ge.isWebGL?Q=!1:Q=e.mobile()),Q&&(ge.snapToPixelEnabled=!0),ge){let me=function(){var _e=e.isPick(A.life)?e.Pick.getMinMax(A.life).max:A.life;if(n(_e)&&(_e=q=="s"?1:1e3),A.startEmitterPaused){A.pauseEmitter();return}if(t=Array.isArray(A.obj)?A.obj:[A.obj],t.length<=0)return;var Re,de;function Pe(Me,fe){return Me-fe}Array.isArray(A.interval)?(A.interval.sort(Pe),Re=A.interval[0]):A.interval.constructor=={}.constructor?Re=A.interval.min:Re=A.interval,Array.isArray(A.num)?(A.num.sort(Pe),de=A.num[A.num.length-1]):A.num.constructor=={}.constructor?de=A.num.max:de=A.num,e.loop(e.Pick.choose(A.num),function(){if(A.decayTime>0){var Me={};A.shrink&&(Me.scale=0),A.fade&&(Me.alpha=0)}var fe,ve,Ie;if(A.pool&&Y.length>0&&G>=Math.max(A.poolMin,_e/Re*de))fe=Y[xe++%Y.length],fe.visible=!0,Ie=fe.trace?fe.getChildAt(0):fe,Ie.emitShape&&(ve=Ie.template,Ie.graphics.c().s(ve.s?e.Pick.choose(ve.s):null).ss(ve.ss?e.Pick.choose(ve.ss):null).sd(ve.sd?e.Pick.choose(ve.sd):null,ve.offset?e.Pick.choose(ve.offset):null)),fe.trace&&fe.cacheCanvas&&fe.updateCache(),A.layers=="top"?Ie.emitShape?fe.addTo(ee,null,!1):fe.addTo(ee,ee.numChildren-1):Ie.emitShape?fe.addTo(ee,A.layers=="bottom"?0:e.rand(ee.numChildren),!1):fe.addTo(ee,A.layers=="bottom"?0:e.rand(ee.numChildren)),T||fe.reg("center"),fe.scaleX=1,fe.scaleY=1,fe.alpha=fe.originalAlpha,Ie.scaleX=Ie.originalScaleX,Ie.scaleY=Ie.originalScaleY,Ie.rotation=Ie.originalRotation,Ie.color=Ie.originalColor,Ie.endSpurt=!1;else{G++,A.trace&&(fe=new e.Container(r,i,null,null,!1),fe.trace=!0);var we=e.Pick.choose(e.shuffle(t)[0]);we.type=="shape"?(ve=we,Ie=new e.Shape(1,1,null,null,null,!1),Ie.emitShape=!0,Ie.template=ve,Ie.graphics.s(ve.s?e.Pick.choose(ve.s):null).ss(ve.ss?e.Pick.choose(ve.ss):null).sd(ve.sd?e.Pick.choose(ve.sd):null,ve.offset?e.Pick.choose(ve.offset):null),A.trace?Ie.addTo(fe,null,!1):A.layers=="top"?Ie.addTo(ee,null,!1):Ie.addTo(ee,A.layers=="bottom"?0:e.rand(ee.numChildren),null,!1)):(Ie=we.clone(),Ie.centerReg||Wn(Ie),A.trace?Ie.centerReg(fe).loc(-1e3,-1e3):A.layers=="top"?Ie.centerReg(ee):Ie.centerReg(ee,A.layers=="bottom"?0:e.rand(ee.numChildren))),A.trace&&(A.layers=="top"?fe.addTo(ee,null,!1):fe.addTo(ee,A.layers=="bottom"?0:e.rand(ee.numChildren),!1),fe.cache(b,E,r*2,i*2)),A.trace||(fe=Ie),fe.particle=Ie,fe.originalAlpha=fe.alpha,Ie.originalAlpha=Ie.alpha,Ie.originalScaleX=Ie.scaleX,Ie.originalScaleY=Ie.scaleY,Ie.originalRotation=Ie.rotation,Ie.originalColor=Ie.color}A.currentParticle=Ie,A.particlesEmitted++,fe.particleNormal=!0,fe.particleDecaying=!1,fe.particleFizzing=!1;var Xe=e.Pick.choose(A.angle),ye=e.Pick.choose(A.emitterForce),Ge=ye*Math.cos(Xe*Math.PI/180),He=ye*Math.sin(Xe*Math.PI/180);Ie.info={position:{x:A.x,y:A.y},velocity:{x:Ge,y:He},sink:n(U)?null:ct(U)},A.horizontal&&(Ie.info.position={x:A.x-A.regX+e.rand(0,r),y:A.y-A.regY+(A.vertical?i/2:0)}),A.vertical&&(Ie.info.position={x:A.x-A.regX+(A.horizontal?r/2:0),y:A.y-A.regY+e.rand(0,i)}),Ie.emitShape?Ie.graphics.mt(Ie.info.position.x,Ie.info.position.y):(Ie.x=Ie.info.position.x,Ie.y=Ie.info.position.y),Ie.alpha=Ie.originalAlpha,A.random&&e.loop(A.random,function(Je,nt){var gt=e.Pick.choose(nt);Je=="scale"?Ie.sca(gt):(Je=="x"?Ie.info.position.x=A.horizontal||A.vertical?gt:gt+r/2:Je=="y"&&(Ie.info.position.y=A.horizontal||A.vertical?gt:gt+i/2),(Je=="x"||Je=="y")&&Ie.emitShape&&Ie.graphics.mt(Ie.info.position.x,Ie.info.position.y),Ie[Je]=gt,Ie.emitShape&&(Ie.x=0,Ie.y=0))}),Q&&!Ie.emitShape&&Ie.cache(Ie.getBounds().x-10,Ie.getBounds().y-10,Ie.getBounds().width+20,Ie.getBounds().height+20);var Oe=Ie.emitShape?!1:A.shrink,ce=(fe||Ie).life=ct(A.life);if(A.decayTime>0&&(A.fade||Oe||A.trace&&A.traceFadeTime>0)){if(A.trace&&A.traceFadeTime>0&&fe.animate({obj:{alpha:0},time:A.traceFadeTime,wait:ce-A.traceFadeTime,waitedCall:function(Je){Je.particleNormal=!1,Je.particleFizzing=!0},call:ne,override:!1,id:"decay"}),A.fade||Oe){var Ue={};A.fade&&(Ue.alpha=0),Oe&&(Ue.scaleX=0,Ue.scaleY=0),Ie.animate({obj:Ue,time:A.decayTime,wait:n(A.decayStart)?ce-A.decayTime:A.decayStart,waitedCall:function(Je){Je.parent!=A&&(Je=Je.parent),Je.particleNormal=!1,Je.particleDecaying=!0},call:function(Je){A.events&&ue("decayed",Je),Je.endSpurt&&ue("spurtdecayed",Je),A.trace&&A.traceFadeTime>0||(n(A.decayStart)||A.decayStart+A.decayTime>A.life?Je.parent&&ne(Je.parent.trace?Je.parent:Je):-function(){var nt=fe;e.timeout(ce-(A.decayStart+A.decayTime),function(){ne(nt)})}())},override:!1,id:"decay"})}}else fe.life=A.life,A.life>0&&-function(){var Je=fe;Je.timeOut=e.timeout(A.life,function(){ne(Je)})}();if(A.events&&ue("emitted",fe),Te(Ie),A.animation){var Qe=e.Pick.choose(A.animation);Array.isArray(Qe)?e.loop(Qe,function(Je){n(Je.override)&&(Je.override=!1),Ie.animate(e.copy(Je))}):(n(Qe.override)&&(Qe.override=!1),Ie.animate(e.copy(Qe)))}})},j=function(){e.loop(ee,function(_e){if(_e.trace){var Re=_e;_e=_e.getChildAt(0)}var de=_e.info,Pe=0,Me=0;if(!n(A.sink)){var fe=A.particles.localToGlobal(de.position.x,de.position.y),ve;A.sink.parent&&A.sink.parent.localToGlobal?ve=A.sink.parent.localToGlobal(A.sink.x,A.sink.y):ve=new je.Point(e.Pick.choose(A.sink.x),e.Pick.choose(A.sink.y));var Ie=e.angle(fe.x,fe.y,ve.x,ve.y);Pe=de.sink*Math.cos(Ie*Math.PI/180),Me=de.sink*Math.sin(Ie*Math.PI/180)}var we=A.wind+Pe,Xe=A.gravity+Me;de.velocity.x+=we*se,de.velocity.y+=Xe*se,de.position.x+=de.velocity.x*se*100,de.position.y+=de.velocity.y*se*100,_e.emitShape?_e.graphics.lt(de.position.x,de.position.y):(_e.x=de.position.x,_e.y=de.position.y),A.trace&&Re&&Re.cacheCanvas&&Re.updateCache(_e.emitShape?null:"source-over")})};var Se=A.parent.getChildIndex(A);A.parent.addChildAt(ee,Se),!K&&!V&&A.centerReg(null,null,!1),A.zimInterval=e.interval(A.interval,me,null,!0,!0);var se=0;Z=A.emitterTicker=e.Ticker.add(j,ge),se=1/e.Ticker.framerate,A.focusWarm=pe,A.doWarm=function(_e){if(n(_e)||_e===!0){var Re;f.max?Re=f.max:Array.isArray(f)?Re=e.arrayMinMax(f).max:Re=ct(f);var de;o.min?de=o.min:Array.isArray(o)?de=e.arrayMinmin(o).min:de=ct(o),_e=Math.min(200,Math.round(Re/de))}var Pe=A.pool;A.pool=!1;var Me=Math.round(o*e.Ticker.framerate);e.loop(Math.round(_e*o*e.Ticker.framerate),function(fe){fe%Me==0&&me(),e.loop(ee,function(ve){ve.warmTick?ve.warmTick++:ve.warmTick=1,ve.warmTick/e.Ticker.framerate>ve.life&&ne(ve)}),j()}),e.loop(ee,function(fe){if(fe.zimTweens){var ve=fe.warmTick/e.Ticker.framerate/fe.life*100;ve>=100&&(fe.alpha=0),fe.percentComplete=ve}}),A.pool=Pe},w&&A.doWarm(w)}}A.particles.noMouse();function ne(ie){if(A.events&&ue("fizzed",ie),(ie.trace?ie.getChildAt(0).endSpurt:ie.endSpurt)&&(ue("spurtfizzed",ie),A.spurting=!1),A.pool&&ie.pooled!="end")if(ie.pooled){ie.visible=!1;return}else{ie.pooled=!0,Y&&Y.push(ie),ie.visible=!1;return}A.removeChild(ie),A.trace&&ie.uncache(),ie=null}function ue(ie,Se){if(!n(Se)){var se=new je.Event(ie);se.particle=Se.trace?Se.getChildAt(0):Se,A.dispatchEvent(se)}}function Te(ie){n(A.spurtCount)&&n(A.spurtNum)||(A.spurtCount++,A.spurtCount>=A.spurtNum&&Fe(ie))}function Fe(ie){A.pauseEmitter(),A.spurtCount=A.spurtNum=null,!n(ie)&&(ue("spurted",ie),ie.endSpurt=!0)}Object.defineProperty(A,"interval",{get:function(){return o},set:function(ie){o=ie,A.zimInterval&&(A.zimInterval.time=o)}}),this.removeFrom=function(){A.parent&&A.parent.removeChild(A),A.particles.removeFrom()},this.spurting=!1,this.spurt=function(ie,Se,se){var me="num, time, restart",j;return(j=yt(A.spurt,arguments,me))?j:(n(Se)||(e.timeout(e.Pick.choose(Se),function(){Fe(A.currentParticle)},!0),A.spurting=!0),n(ie)||(A.spurtNum=e.Pick.choose(ie),A.spurtCount=0,A.spurting=!0),A.pauseEmitter(!1,se,null,!0),A)},this.clearPool=function(){e.loop(A.particles,function(ie){ie.pooled="end",ie.visible||A.removeChild(ie)},!0),G=0,xe=0,Y=[]},A.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(ie,Se,se,me){if(A.startEmitterPaused=null,n(ie)&&(ie=!0),n(Se)&&(Se=!1),n(se)&&(se=!1),ie){if(A.emitterPaused)return A;se&&(Z&&e.Ticker.remove(Z),e.loop(A.particles,function(j){j.pauseAnimate(),j.trace&&j.getChildAt(0).pauseAnimate(),j.timeOut&&j.timeOut.pause()})),A.zimInterval.pause(),A.emitterPaused=!0}else{if(!A.emitterPaused)return A;Se&&(e.loop(A.particles,function(j){j.stopAnimate(),j.timeOut&&j.timeOut.clear(),j.trace&&j.getChildAt(0).pauseAnimate()}),A.removeAllChildren()),ge&&Z&&!e.Ticker.has(ge,Z)&&(e.Ticker.add(Z,ge),e.loop(A.particles,function(j){j.pauseAnimate(!1),j.timeOut&&j.timeOut.pause(!1),j.trace&&j.getChildAt(0).pauseAnimate(!1)})),A.zimInterval&&A.zimInterval.pause(!1,me),A.emitterPaused=!1}return A},this.resize=function(ie,Se){n(ie)||(r=ie),n(Se)||(i=Se),A.setBounds(0,0,r,i),!K&&!V&&A.centerReg(),A.clearPool()},$!==!1&&e.styleTransforms(this,L),this.clone=function(ie){var Se;return Array.isArray(A.obj)||A.obj.constructor=={}.constructor?Se=e.copy(A.obj):A.obj.clone?Se=A.obj.clone(ie):Se=A.obj,A.cloneProps(new e.Emitter(Se,r,i,A.interval,A.num,A.life,A.fade,A.shrink,A.decayTime,A.decayStart,A.trace,A.traceFadeTime,A.traceShiftX,A.traceShiftY,A.angle,A.emitterForce,A.gravity,A.wind,A.layers,A.animation,e.copy(A.random),A.horizontal,A.vertical,A.sink,A.sinkForce,Q,A.events,N,A.pool,A.poolMin,$,A.group,y))},this.dispose=function(){return A.zimInterval&&A.zimInterval.clear(),Z&&e.Ticker.remove(Z),e.loop(Y,function(ie){ie&&ie.dispose()}),ee&&ee.dispose&&ee.dispose(),A.currentParticle&&A.currentParticle.dispose&&A.currentParticle.dispose(),t&&Array.isArray(t)?e.loop(t,function(ie){ie.dispose&&ie.dispose()}):t&&t.dispose&&t.dispose(),ee=A.currentParticle=A.particles=t=A.obj=Y=A.poolList=null,!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.Generator=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F){var K="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",V;if(V=yt(e.Generator,arguments,K,this))return V;qe("69.92"),this.group=P;var D=_===!1?{}:e.getStyle("Generator",this.group,F);n(R)&&(R=D.frame!=null?D.frame:le.zdf);var U=R.stage;n(t)&&(t=D.color!=null?D.color:null),n(r)&&(r=D.strokeColor!=null?D.strokeColor:e.white),n(i)&&(i=D.strokeWidth!=null?D.strokeWidth:1),n(d)&&(d=D.maxCount!=null?D.maxCount:1e3),n(p)&&(p=D.boundary!=null?D.boundary:new e.Boundary(0,0,U.width,U.height)),n(w)&&(w=D.drawCount!=null?D.drawCount:1),n(k)&&(k=D.drawPause!=null?D.drawPause:!0),n(x)&&(x=D.drawSpacebarPause!=null?D.drawSpacebarPause:!0),n(T)&&(T=D.startX!=null?D.startX:U.width/2),n(S)&&(S=D.startY!=null?D.startY:U.height/2),n(b)&&(b=D.cache!=null?D.cache:!1);var Q=this.drawing=new e.Container(p.x,p.y,p.width,p.height).addTo(U),J=this.shape=new e.Shape(p.width,p.height).addTo(Q);this.drawCount=w,n(k)&&(k=!0),b&&J.cache(p.x,p.y,p.width,p.height),this.zimContainer_constructor(p.x,p.y,p.width,p.height),this.type="Generator";var N=this;if(N.draw=null,O){N.drawCount=10,!n(l)&&n(o)&&(o=l),l=null;var te=new e.Loader;N.outputNum=0,N.outputName=O===!0?"gen_":O.match(/_$/)?O:O+"_"}this.color=t,this.strokeColor=r,this.strokeWidth=i;var ae=T,ee=S;this.fill=function(g){return N.color=g,N.currentColor=ct(N.color),J.f(N.currentColor),this},this.stroke=function(g,h){return n(g)||(N.strokeColor=g,N.currentStrokeColor=ct(N.strokeColor),J.s(N.currentStrokeColor)),n(h)||(N.strokeWidth=h,N.currentStrokeWidth=ct(N.strokeWidth),J.ss(N.currentStrokeWidth)),this},this.noStroke=function(){return N.strokeColor=N.currentStrokeColor=null,N.strokeWidth=N.currentStrokeWidth=null,J.s(),J.ss(1),this},J.matrix=J.getMatrix(),this.translate=function(g,h){n(g)&&(g=0),n(h)&&(h=0),g=ct(g),h=ct(h);var L=J.matrix.transformPoint(g,h);return ae=L.x,ee=L.y,J.mt(ae,ee),J.matrix.translate(g,h),this},this.rotate=function(g){return n(g)&&(g=0),g=ct(g),J.matrix.rotate(g),this},this.scale=function(g,h){return n(g)&&(g=1),n(h)&&(h=g),g=ct(g),h=ct(h),J.matrix.scale(g,h),this},this.skew=function(g,h){return n(g)&&(g=0),n(h)&&(h=0),g=ct(g),h=ct(h),J.matrix.skew(g,h),this},E&&(N.linePoints=[]),this.line=function(g,h,L,q){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=0),n(q)&&(q=0),g=ct(g),h=ct(h),L=ct(L),q=ct(q),(E=="zero"||E=="nonzero"&&g&&h)&&N.linePoints.push([g,h]),N.translate(g,h);var A=J.matrix.transformPoint(L,q);return ae=A.x,ee=A.y,J.lt(ae,ee),E&&N.linePoints.push([ae,ee]),J.matrix.translate(L,q),this},this.arc=function(g,h,L,q,A,Y){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=50),g=ct(g),h=ct(h),L=ct(L),L=Math.abs(L),n(q)&&(q=0),n(A)&&(A=180),q=ct(q),A=ct(A),n(Y)&&(Y=!1),Y=ct(Y),N.translate(g,h);var xe=J.matrix.transformPoint(0,0);J.decomp||(J.decomp={}),J.matrix.decompose(J.decomp);var G=(Math.abs(J.decomp.scaleX)+Math.abs(J.decomp.scaleY))/2,Z=J.decomp.rotation||0,ge=L*G;return J.mt(xe.x+ge*Math.cos((q+Z)*Math.PI/180),xe.y+ge*Math.sin((q+Z)*Math.PI/180)),J.a(xe.x,xe.y,ge,(q+Z)*Math.PI/180,(A+Z)*Math.PI/180,Y),this},this.curve=function(g,h,L,q,A,Y){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=50),n(q)&&(q=50),n(A)&&(A=100),n(Y)&&(Y=0),g=ct(g),h=ct(h),L=ct(L),q=ct(q),A=ct(A),Y=ct(Y),N.translate(g,h);var xe=J.matrix.transformPoint(L,q),G=J.matrix.transformPoint(A,Y),Z=G.x,ge=G.y;return J.qt(xe.x,xe.y,Z,ge),J.matrix.translate(A,Y),this},this.bezier=function(g,h,L,q,A,Y,xe,G){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=50),n(q)&&(q=50),n(A)&&(A=-50),n(Y)&&(Y=-50),n(xe)&&(xe=100),n(G)&&(G=0),g=ct(g),h=ct(h),L=ct(L),q=ct(q),A=ct(A),Y=ct(Y),xe=ct(xe),G=ct(G),N.translate(g,h);var Z=J.matrix.transformPoint(L,q),ge=J.matrix.transformPoint(A,Y),he=J.matrix.transformPoint(xe,G),ne=he.x,ue=he.y;return J.bt(Z.x,Z.y,ge.x,ge.y,ne,ue),J.matrix.translate(xe,G),this},this.rectangle=function(g,h,L,q,A,Y,xe,G){if(n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=100),n(q)&&(q=L),g=ct(g),h=ct(h),L=ct(L),q=ct(q),!A&&!Y&&!xe&&!G){N.translate(g,h);var Z=J.matrix.transformPoint(0,0),ge=J.matrix.transformPoint(L,0),he=J.matrix.transformPoint(L,q),ne=J.matrix.transformPoint(0,q);return J.mt(Z.x,Z.y).lt(ge.x,ge.y).lt(he.x,he.y).lt(ne.x,ne.y).lt(Z.x,Z.y).lt(ge.x,ge.y),J.mt(Z.x,Z.y),this}n(A)&&(A=0),n(Y)&&(Y=A),n(xe)&&(xe=A),n(G)&&(G=A),A=ct(A),Y=ct(Y),xe=ct(xe),G=ct(G);var ue=(L<q?L:q)/2,Te=0,Fe=0,ie=0,Se=0;ue=Math.abs(ue),A<0&&(A*=Te=-1),A>ue&&(A=ue),Y<0&&(Y*=Fe=-1),Y>ue&&(Y=ue),xe<0&&(xe*=ie=-1),xe>ue&&(xe=ue),G<0&&(G*=Se=-1),G>ue&&(G=ue),N.translate(g,h),J.decomp||(J.decomp={}),J.matrix.decompose(J.decomp);var se=(Math.abs(J.decomp.scaleX)+Math.abs(J.decomp.scaleY))/2,me=L<0?-1:1,j=q<0?-1:1,_e=J.matrix.transformPoint(L-Y*me,0),Re=J.matrix.transformPoint(L+Y*Fe*me,-Y*Fe*j),de=J.matrix.transformPoint(L,Y*j),Pe=J.matrix.transformPoint(L,q-xe*j),Me=J.matrix.transformPoint(L+xe*ie*me,q+xe*ie*j),fe=J.matrix.transformPoint(L-xe*me,q),ve=J.matrix.transformPoint(G*me,q),Ie=J.matrix.transformPoint(-G*Se*me,q+G*Se*j),we=J.matrix.transformPoint(0,q-G*j),Xe=J.matrix.transformPoint(0,A*j),ye=J.matrix.transformPoint(-A*Te*me,-A*Te*j),Ge=J.matrix.transformPoint(A*me,0);return J.mt(_e.x,_e.y).at(Re.x,Re.y,de.x,de.y,Y*se).lt(Pe.x,Pe.y).at(Me.x,Me.y,fe.x,fe.y,xe*se).lt(ve.x,ve.y).at(Ie.x,Ie.y,we.x,we.y,G*se).lt(Xe.x,Xe.y).at(ye.x,ye.y,Ge.x,Ge.y,A*se).cp(),this},this.circle=function(g,h,L,q,A){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=50),n(q)&&(q=100),n(A)&&(A=!0),g=ct(g),h=ct(h),L=ct(L),q=ct(q),L=Math.abs(L),N.translate(g,h);var Y=J.matrix.transformPoint(0,0);J.decomp||(J.decomp={}),J.matrix.decompose(J.decomp);var xe=(Math.abs(J.decomp.scaleX)+Math.abs(J.decomp.scaleY))/2,G=J.decomp.rotation||0,Z=L*xe;if(N.circleHeight=Z*2,typeof q=="number"&&q>=0&&q<100){var ge=360*q/100/2;J.mt(Y.x+Z*Math.cos((-ge-90+G)*Math.PI/180),Y.y+Z*Math.sin((-ge-90+G)*Math.PI/180)),J.a(Y.x,Y.y,Z,(-ge-90+G)*Math.PI/180,(ge-90+G)*Math.PI/180,!1),A&&J.cp(),N.circleHeight=Z-Math.cos(ge*Math.PI/180)*Z}else J.mt(Y.x+Z,Y.y),J.a(Y.x,Y.y,Z,0,Math.PI*2);return this},this.elipse=function(g,h,L,q){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=100),n(q)&&(q=50),g=ct(g),h=ct(h),L=ct(L),q=ct(q),N.translate(g,h);var A=J.matrix.transformPoint(-L/2,-q/2);J.decomp||(J.decomp={}),J.matrix.decompose(J.decomp);var Y=J.decomp.scaleX,xe=J.decomp.scaleY;return J.de(A.x,A.y,L*Y,q*xe),this},this.poly=function(g,h,L,q,A,Y){n(g)&&(g=0),n(h)&&(h=0),n(L)&&(L=100),n(q)&&(q=5),n(A)&&(A=0),n(Y)&&(Y=0),g=ct(g),h=ct(h),L=ct(L),q=ct(q),A=ct(A),Y=ct(Y),L=Math.abs(L),N.translate(g,h);var xe=J.matrix.transformPoint(0,0);J.decomp||(J.decomp={}),J.matrix.decompose(J.decomp);var G=(Math.abs(J.decomp.scaleX)+Math.abs(J.decomp.scaleY))/2,Z=J.decomp.rotation||0,ge=L*G;return J.dp(xe.x,xe.y,ge,q,A,Z),this},this.closePath=this.close=this.cp=function(){return J.cp(),this},this._noise=new e.Noise(C),this.noise=function(){if(arguments.length==1)return(this._noise.simplex1D.apply(null,arguments)+1)/2;if(arguments.length==2)return(this._noise.simplex2D.apply(null,arguments)+1)/2;if(arguments.length==3)return(this._noise.simplex3D.apply(null,arguments)+1)/2;if(arguments.length==4)return(this._noise.simplex4D.apply(null,arguments)+1)/2},this.stack=[],this.colorStrokeStack=[],this.push=function(){return N.stack.push(J.matrix.clone()),N.colorStrokeStack.push([N.color,N.strokeColor,N.strokeWidth,N.currentColor,N.currentStrokeColor,N.currentStrokeWidth]),this},this.pop=function(){J.matrix=N.stack.pop()||J.matrix;var g=N.colorStrokeStack.pop()||[N.color,N.strokeColor,N.strokeWidth,N.currentColor,N.currentStrokeColor,N.currentStrokeWidth];return N.color=g[0],N.strokeColor=g[1],N.strokeWidth=g[2],N.currentColor=g[3],N.currentStrokeColor=g[4],N.currentStrokeWidth=g[5],J.f(N.currentColor).s(N.currentStrokeColor).ss(N.currentStrokeWidth),J.mt(J.matrix.x,J.matrix.y),this},this.blit=function(){return J.updateCache("source-over"),J.c(),this},this.step=function(){return N.draw&&y(),this},n(N.color)||this.fill(N.color),!n(N.strokeColor)&&N.strokeWidth?this.stroke(N.strokeColor,N.strokeWidth):N.noStroke(),this.translate(ae,ee),typeof f=="function"&&(this.setup=f,e.timeout(.01,function(){f(0,N.count,N),b&&J.updateCache(),U.update()}));var pe=0;this.maxCount=d,this.resetup=function(g){return n(g)&&(g=!0),pe=0,g&&N.shape.c(),n(N.color)||this.fill(N.color),!n(N.strokeColor)&&N.strokeWidth?this.stroke(N.strokeColor,N.strokeWidth):N.noStroke(),this.reset(),this.setup&&(f(0,N.count,N),b&&J.updateCache(),U.update()),this},this.stampNum=0,typeof l=="function"&&(this.stamp=l,e.timeout(.015,function(){X(0)})),this.restamp=function(g,h){return n(g)&&(g=!0),n(h)&&(h=!0),pe=0,g&&N.shape.c(),h&&N.resetup(g),X(0),this},this.reset=function(){return this.fill(t),!n(r)&&i?this.stroke(r,i):this.noStroke(),J.matrix.identity(),this.translate(T,S),this},this.clear=function(){return this.shape.c(),this};function $(){te.save({content:U,filename:N.outputName+e.decimals(N.outputNum,null,null,6),type:I}),N.outputNum++}O&&(U.update(),$());function X(g){N.stampNum++;var h=e.loop(N.maxCount,function(L,q){if(N.paused)return N.pausedCount=L,!1;if(N.changeCount)return N.changeCount=!1,!1;pe=L+1;var A=l(L+1,q,N,N.stampNum);if(N.currentColor=ct(N.color),J.f(N.currentColor),N.currentStrokeColor=ct(N.strokeColor),J.s(N.currentStrokeColor),N.currentStrokeWidth=ct(N.strokeWidth),J.ss(N.currentStrokeWidth),O&&(U.update(),$()),A)return A},null,null,g);b&&J.updateCache(),h&&N.dispatchEvent("complete"),U.update()}N.iterator=0,typeof o=="function"&&(this.draw=o,f?setTimeout(function(){N.ticker=e.Ticker.add(y)},100):this.ticker=e.Ticker.add(y),N.generatorPaused=!1,k&&(N.pauseEvent=U.on("stagemousedown",function(){N.count>=N.maxCount||N.pauseTimeout||(e.Ticker.has(N.ticker)?(e.Ticker.remove(N.ticker),N.generatorPaused=!0,N.dispatchEvent("generatorpaused")):(N.ticker=e.Ticker.add(N.ticker),N.generatorPaused=!1,N.dispatchEvent("generatorunpaused")))})),x&&(N.pauseSpacebarEvent=R.on("keydown",function(g){N.count>=N.maxCount||N.pauseTimeout||g.keyCode==20&&(e.Ticker.has(N.ticker)?(e.Ticker.remove(N.ticker),N.generatorPaused=!0,N.dispatchEvent("generatorpaused")):(N.ticker=e.Ticker.add(N.ticker),N.generatorPaused=!1,N.dispatchEvent("generatorunpaused")))})));function y(){N.iterator++,N.iterator%Math.ceil(N.drawCount)==0&&(N.count++,N.draw(N.count,N.maxCount,N),b&&N.blit(),N.currentColor=ct(N.color),J.f(N.currentColor),N.currentStrokeColor=ct(N.strokeColor),J.s(N.currentStrokeColor),N.currentStrokeWidth=ct(N.strokeWidth),J.ss(N.currentStrokeWidth),N.dispatchEvent("drawing"),U.update(),O&&$()),N.maxCount&&N.count>=N.maxCount&&(N.dispatchEvent("complete"),e.Ticker.remove(N.ticker))}this.redraw=function(g,h){return n(g)&&(g=!0),N.reset(),n(h)&&(h=!0),N.ticker&&e.Ticker.remove(N.ticker),N.iterator=0,N.count=0,g&&N.shape.c(),h?(N.resetup(g),setTimeout(function(){N.ticker&&(N.ticker=e.Ticker.add(N.ticker))},100)):N.ticker&&(N.ticker=e.Ticker.add(N.ticker)),this},this.paused=!1,this.pause=function(g,h){if(n(g)&&(g=!0),!(N.count>=N.maxCount)){if(g==this.paused)return this;this.paused=g,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?N.ticker&&e.Ticker.remove(N.ticker):N.ticker?N.ticker=e.Ticker.add(N.ticker):X(N.pausedCount,N.maxCount),setTimeout(function(){U.update()},20),h&&(this.pauseTimeout=e.timeout(h,function(){N.pause(!N.paused),N.pauseTimeout=null})),N.dispatchEvent(N.paused?"paused":"unpaused")}},this.outOfBounds=function(g,h){n(g)&&(g=0),n(h)&&(h=g);var L=N.shape.stage;if(L)return N.currentX>L.width-g||N.currentX<0+g||N.currentY>L.height-h||N.currentY<0+h},this.stop=function(){N.pause(),N.pauseEvent&&U.off("stagemousedown",N.pauseEvent),N.pauseSpaceEvent&&R.off("keydown",N.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return pe},set:function(g){pe=g,N.stamp&&(N.changeCount=!0,setTimeout(function(){X(pe,N.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return ae},set:function(){At&&ut("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return ee},set:function(){At&&ut("Generator() - currentY is read only")}}),this.clone=function(){return N.cloneProps(new e.Generator(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,_,N.group,F))},N.dispose=function(g,h,L){return N.pause(),N.ticker&&e.Ticker.remove(N.ticker),N.pauseEvent&&U.off("stagemousedown",N.pauseEvent),N.pauseSpacebarEvent&&R.off("keydown",N.pauseSpacebarEvent),N._noise&&(N._noise=null),N.shape&&N.shape.dispose(),N.drawing&&N.drawing.dispose(),N.shape=N.drawing=null,L||N.zimContainer_dispose(),!0},_!==!1&&e.styleTransforms(this,D)},e.extend(e.Generator,e.Container,["clone","dispose"],"zimContainer",!1),e.Pen=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te){var ae="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",ee;if(ee=yt(e.Pen,arguments,ae,this))return ee;qe("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=N;var pe=J===!1?{}:e.getStyle(this.type,this.group,te);n(i)&&(i=pe.penType!=null?pe.penType:"line");var $={size:2,color:e.dark,spread:{min:5,max:20},borderColor:e.darker,borderWidth:0},X={line:{size:2},kitetail:{size:{min:5,max:20},color:e.series(e.pink,e.blue,e.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:e.green,size:3,spread:{min:10,max:30}},hair:{color:[e.pink,e.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[e.dark,e.darker,e.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};n(X[i])&&(i="line"),n(t)&&(t=pe.size!=null?pe.size:n(X[i].size)?$.size:X[i].size),n(r)&&(r=pe.color!=null?pe.color:n(X[i].color)?$.color:X[i].color),n(o)&&(o=pe.damp!=null?pe.damp:.5),o===!1&&(o=1),n(l)&&(l=pe.spread!=null?pe.spread:n(X[i].spread)?$.spread:X[i].spread),n(f)&&(f=pe.borderColor!=null?pe.borderColor:n(X[i].borderColor)?$.borderColor:X[i].borderColor),n(d)&&(d=pe.borderWidth!=null?pe.borderWidth:n(X[i].borderWidth)?$.borderWidth:X[i].borderWidth),n(p)&&(p=pe.end!=null?pe.end:e.isPick(t)||e.isPick(r)||i!="line"?"butt":"round"),n(S)&&(S=pe.cropScale!=null?pe.cropScale:1),n(x)&&(x=pe.cache!=null?pe.cache:!0),n(b)&&(b=pe.undo!=null?pe.undo:0),n(E)&&(E=pe.undoKeys!=null?pe.undoKeys:!0),n(R)&&(R=pe.move!=null?pe.move:!0),n(O)&&(O=pe.deleteable!=null?pe.deleteable:!0),n(I)&&(I=pe.doubleClickDelete!=null?pe.doubleClickDelete:!0),n(_)&&(_=pe.holdDelete!=null?pe.holdDelete:!0),n(C)&&(C=pe.onTop!=null?pe.onTop:!0),n(P)&&(P=pe.immediateStop!=null?pe.immediateStop:"both"),n(F)&&(F=pe.lineAlpha!=null?pe.lineAlpha:1),n(K)&&(K=pe.lineBlendMode!=null?pe.lineBlendMode:"normal"),n(w)&&(w=pe.paper!=null?pe.paper:new e.Container),n(k)&&(k=pe.nib!=null?pe.nib.clone():null),n(V)&&(V=pe.frame!=null?pe.frame:le.zdf),n(D)&&(D=pe.dashed!=null?pe.dashed:null),D===!0&&(D=[3,100]),n(U)&&(U=pe.pullColor!=null?pe.pullColor:null),n(Q)&&(Q=pe.pullThickness!=null?pe.pullThickness:1);var y=this;this.dampX=new e.Damp(null,o),this.dampY=new e.Damp(null,o);var g=!0;this.drawing=!1,this.immediateStop=P,this.undoLevels=b,this.undoKeys=E,this.move=R,this.draggable=!0,this.lineAlpha=F,this.lineBlendMode=K;var h=y.shape=new e.Shape,L=V.stage.width,q=V.stage.height,A,Y,xe,G;y.paperNum=0,y.sizeScale=1,y.spreadScale=1,y.sizeFactor=1,y.spreadFactor=1,y.pullThickness=Q,y.stop=function(){};var Z;this.added(function(se){Z=se,y.paper=w,L=y.stage.width,q=y.stage.height,n(k)?y.stageDown=Z.on("stagemousedown",function(de){y.dispatchEvent("start")}):y.zimDown?y.nib=k.addTo(y):(y.nib=k.addTo(y.parent,y.parent.getChildIndex(y)),y.nib.x=y.x,y.nib.y=y.y,y.nib.mouseEnabled=!1,y.stageDown=Z.on("stagemousedown",function(de){Z=de.target.stage,y.nibEvent=Z.on("stagemousemove",me),y.dispatchEvent("start")}),y.stageUp=Z.on("stagemouseup",function(){Z.off("stagemousemove",y.nibEvent)}));function me(de){y.drawing&&(y.nib.x=de.stageX/e.scaX,y.nib.y=de.stageY/e.scaY)}y.zimDragCheck=!1,y.stop=function(){y.stopCheck(!0)},y.infinite=!1,y.stopCheck=function(de){if(de)y.drawing=!1,y.infinite=!1;else if(y.infinite||y.zimDragCheck||!y.immediateStop&&y.drawing)return;y.immediate(y.x,y.y),setTimeout(function(){var Pe;if(!y.drawing){if(x?(h.cache(-(L*S-L)/2,-(q*S-q)/2,L*S,q*S),Pe=w.bitmap=new e.Bitmap(h.cacheCanvas).reg((L*S-L)/2,(q*S-q)/2).addTo(w),h.graphics.clear(),h.uncache(),h.top()):Pe=h,y.undoLevels>0){var Me={paper:w,line:Pe};b.push(Me),b.length>y.undoLevels&&b.shift(),y.dispatchEvent("recordUndo")}x||(h=new e.Shape().clone().addTo(w)),y.lastSegment=Pe,y.lastSelected=Pe,Pe.alpha=y.lineAlpha,Pe.blendMode=y.lineBlendMode,Pe.paper=w,y.dispatchEvent("stop"),y.dispatchEvent("change")}},y.immediateStop||de?0:50)};var j=0;y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.drawX=y.x,y.lastY=y.lastMidY=y.drawY=y.y;var _e,Re;y.ticker=e.Ticker.add(function(){if(y.parent){var de=y.dampX.convert(g?y.x:y.finishX),Pe=y.dampY.convert(g?y.y:y.finishY),Me=y.parent.localToLocal(de,Pe,h);if(Math.abs(y.lastX-de)+Math.abs(y.lastY-Pe)<1){if(y.drawing&&(y.drawing=!1,y.zimDown?(y.x=y.lastX=y.lastMidX=g?y.x:y.finishX,y.y=y.lastY=y.lastMidY=g?y.y:y.finishY):(y.x=y.finishX=y.lastX=y.lastMidX=de,y.y=y.finishY=y.lastY=y.lastMidY=Pe),y.stopCheck(),_e=Re=null),y.lastX=y.lastMidX=de,y.lastY=y.lastMidY=Pe,w){var fe=w.localToLocal(0,0,y.parent);y.lastMidX-=fe.x,y.lastMidY-=fe.y}return}else{var ve=e.Pick.choose(t)*y.sizeScale*y.sizeFactor,Ie=e.Pick.choose(l)*y.spreadScale*y.spreadFactor;y.drawing||(ne=[],w.getChildIndex(h)!=w.numChildren-1&&h.top()),y.drawing=!0,y.dispatchEvent("drawing")}var we=y.parent.localToLocal(y.lastX,y.lastY,h),Xe;w?Xe=w.localToLocal(y.lastMidX,y.lastMidY,h):Xe=y.parent.localToLocal(y.lastMidX,y.lastMidY,h);var ye,Ge,He;if(i=="splatter")for(var Oe=0;Oe<=3;Oe++){var ce=e.rand(360)*Math.PI/180,Ue=Ie,Qe={x:de+Ue*Math.cos(ce),y:Pe+Ue*Math.sin(ce)},Je=y.parent.localToLocal(Qe.x,Qe.y,h);h.graphics.mt(Je.x,Je.y).f(e.Pick.choose(r)).dc(Je.x,Je.y,ve/2)}else i=="grass"||i=="hair"||i=="city"?((i=="grass"||i=="hair")&&(ye=y.lastX+(de-y.lastX)/2,Ge=y.lastY+(Pe-y.lastY)/2,He=y.parent.localToLocal(ye,Ge,h),h.graphics.s(e.Pick.choose(r)).ss(ve,p).mt(He.x,He.y).lt(He.x+e.rand(-Ie/4,Ie/4),i=="hair"?He.y+Ie:He.y-Ie)),(i=="grass"||i=="hair"||i=="city"&&j%3==0)&&h.graphics.s(e.Pick.choose(r)).ss(ve,p).mt(Me.x,Me.y).lt(Me.x+(i=="city"?0:e.rand(-Ie/4,Ie/4)),i=="hair"?He.y+Ie:Me.y-Ie),j++):(i=="kitetail"&&h.graphics.s(e.Pick.choose(r)).ss(ve,p),i=="barbwire"?(h.graphics.s(e.Pick.choose(r)).ss(ve,p),ye=y.lastX+(de-y.lastX)/2+e.rand(-Ie,Ie),Ge=y.lastY+(Pe-y.lastY)/2+e.rand(-Ie,Ie)):(ye=y.lastX+(de-y.lastX)/2,Ge=y.lastY+(Pe-y.lastY)/2),He=y.parent.localToLocal(ye,Ge,h),i!="line"&&h.graphics.qt(we.x,we.y,He.x,He.y));if(d>0&&i!="line"&&(ye=y.lastX+(de-y.lastX)/2,Ge=y.lastY+(Pe-y.lastY)/2,He=y.parent.localToLocal(ye,Ge,h),h.graphics.s(e.Pick.choose(f)).ss(e.Pick.choose(d)).mt(Xe.x,Xe.y).qt(we.x,we.y,He.x,He.y),i=="splatter"&&h.graphics.es()),i=="splatter")h.graphics.f(e.Pick.choose(r));else if(i!="kitetail")if(i=="line"){if(e.isPick(r)||ve!=Re){var nt=e.Pick.choose(r);(nt!=_e||ve!=Re)&&h.graphics.s(nt).ss(ve,p),_e=nt,Re=ve}}else h.graphics.s(e.Pick.choose(r)).ss(ve,p);i!="grass"&&i!="hair"&&i!="city"&&i!="splatter"&&h.graphics.mt(Xe.x,Xe.y).qt(we.x,we.y,He.x,He.y),D&&h.graphics.sd(D),y.lastX=de,y.lastY=Pe,He&&(y.lastMidX=He.x,y.lastMidY=He.y),y.drawX=y.lastMidX||0,y.drawY=y.lastMidY||0}}),n(U)||ge(Z),y.mouseChildren=!1});function ge(se){var me=se.frame;y.ppdEvent&&y.off("drawing",y.ppdEvent),y.ppsEvent&&y.off("stop",y.ppsEvent),y.ppmEvent&&se.off("stagemousedown",y.ppmEvent),y.pullShape||(y.pullShape=new e.Shape),y.ppdEvent=y.on("drawing",function(){setTimeout(function(){var j=w.localToGlobal(y.drawX,y.drawY);y.pullShape.c().s(U).ss(y.pullThickness).mt(me.mouseX,me.mouseY).lt(j.x,j.y)},10)}),y.ppsEvent=y.on("stop",function(){y.pullShape.removeFrom(),y.pullShape.c()}),y.ppmEvent=se.on("stagemousedown",function(){y.pullShape.addTo(se),y.immediate(me.mouseX,me.mouseY),y.motionController&&y.motionController.immediate(me.mouseX,me.mouseY)})}function he(){y.ppdEvent&&y.off("drawing",y.ppdEvent),y.ppsEvent&&y.off("stop",y.ppsEvent),y.ppmEvent&&y.off("stagemousedown",y.ppmEvent),y.pullShape&&y.pullShape.dispose()}b=[];var ne=[];this.saveState=function(se,me,j){var _e=se.type=="Container"?"paper":"line",Re={paper:y.paper};Re[_e]=se,Re[_e+"Transform"]={x:se.x,y:se.y,r:se.rotation,a:se.alpha,rX:se.regX,rY:se.regY,sX:se.scaleX,sY:se.scaleY,skX:se.skewX,skY:se.skewY,v:se.visible},!n(me)&&!n(j)&&me!=j&&(Re.startLayer=me,Re.endLayer=j),b.push(Re),y.dispatchEvent("recordUndo"),b.length>y.undoLevels&&b.shift()};var ue={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var se=b.pop();if(se){if(ne.push(se),se.clear){for(var me=0;me<se.clear.length;me++)se.paper.addChild(se.clear[me]);se.paper.addChild(h)}else se.line&&se.lineTransform?(n(se.startLayer)||(h.top(),se.paper.setChildIndex(se.line,xe)),Te("line",se.line)):se.line?se.line.removeFrom():se.paperTransform&&Te("paper",se.paper);y.lastPaper=y.paper,se.paper!=y.paper&&(y.paper=se.paper,y.dispatchEvent("paperChange")),y.dispatchEvent("change"),y.dispatchEvent("undo"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&y.stage&&y.stage.update()}};function Te(se,me){for(var j,_e=b.length-1;_e>=0;_e--)if(b[_e][se]==me&&b[_e][se+"Transform"]){j=b[_e][se+"Transform"];break}j||(j=e.copy(ue)),me.x=j.x,me.y=j.y,me.alpha=j.a,me.rotation=j.r,me.regX=j.rX,me.regY=j.rY,me.scaleX=j.sX,me.scaleY=j.sY,me.skewX=j.skX,me.skewY=j.skY,me.visible=j.v,se=="line"&&x&&(me.regX=(L*S-L)/2,me.regY=(q*S-q)/2)}this.redo=function(){var se=ne.pop(),me,j;se&&(b.push(se),se.clear?(se.paper.removeAllChildren(),se.paper.addChild(h)):se.line&&se.lineTransform?(n(se.endLayer)||(h.top(),se.paper.setChildIndex(se.line,G)),j=se.lineTransform,me=se.line):se.line?se.line.addTo(se.paper):se.paperTransform&&(j=se.paperTransform,me=se.paper),me&&(me.x=j.x,me.y=j.y,me.alpha=j.a,me.rotation=j.r,me.regX=j.rX,me.regY=j.rY,me.scaleX=j.sX,me.scaleY=j.sY,me.skewX=j.skX,me.skewY=j.skY,me.visible=j.v),y.lastPaper=y.paper,se.paper!=y.paper&&(y.paper=se.paper,y.dispatchEvent("paperChange")),y.dispatchEvent("change"),y.dispatchEvent("redo"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&y.stage&&y.stage.update())},y.ctrlKey=!1,y.shiftKey=!1,y.ctrlKeyCheck=!1,y.zimkeydownEvent=function(se){y.ctrlKey=se.ctrlKey,y.shiftKey=se.shiftKey,se.keyCode==17&&R&&!y.ctrlKeyCheck&&(y.ctrlKeyCheck=!0,w.noDrag(),w.drag({onTop:C,all:!0})),!(y.undoLevels<=0)&&y.undoKeys&&(se.ctrlKey&&(se.shiftKey&&se.keyCode==90||se.keyCode==89)?y.redo():se.ctrlKey&&se.keyCode==90&&y.undo(),V&&V.ctrlKey&&y.write&&(y.lastWrite=y.write,y.write=!1))},le.addEventListener("keydown",y.zimkeydownEvent),y.zimkeyupEvent=function(se){se.keyCode==17&&R&&y.ctrlKeyCheck&&(y.ctrlKeyCheck=!1,w.noDrag(),w.drag({onTop:C})),se.ctrlKey||(y.ctrlKey=!1),se.shiftKey||(y.shiftKey=!1),V&&!V.ctrlKey&&y.write==!1&&(y.write=y.lastWrite)},le.addEventListener("keyup",y.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return w},set:function(se){se.type=="Container"&&(w=se,h.addTo(w,0,!1),w.shape=h,y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.finishX=y.x,y.lastY=y.lastMidY=y.finishY=y.y,i=="barbwire"&&h.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*y.sizeScale*y.sizeFactor,p),h.graphics.mt(y.x,y.y),w.parent||w.addTo(y.parent,y.parent.getChildIndex(y)),n(w.paperNum)&&(w.paperNum=++y.paperNum,O&&w.on("mousedown",function(me){y.lastSelected=me.target,y.nibEvent&&y.stage.off("stagemousemove",y.nibEvent);var j=me.target.paper;j&&(j!=y.paper&&(y.paper=j,y.dispatchEvent("paperChange")),y.shiftKey&&(y.ctrlKey?y.clear():(me.target.visible=!1,y.undoLevels>0&&y.saveState(me.target),y.dispatchEvent("change"))))}),I&&w.on("dblclick",function(me){me.target.visible=!1,y.undoLevels>0&&y.saveState(me.target)}),I&&w.hold(function(me){me.target.visible=!1,y.undoLevels>0&&y.saveState(me.target)}),R&&(w.on("mousedown",function(me){Z=me.target.stage,y.draggingCheck=!0,!(y.shiftKey&&O)&&(A=me.stageX/e.scaX,Y=me.stageY/e.scaY,h.top(),xe=w.getChildIndex(me.target))}),w.drag({onTop:C}),w.on("pressup",function(me){if(!(O&&y.shiftKey)&&me.target.visible!=!1&&!(y.undoLevels<=0)){if(Math.abs(me.stageX/e.scaX-A)<1&&Math.abs(me.stageY/e.scaY-Y)<1){C&&(h.top(),G=w.getChildIndex(me.target),xe!=G&&y.saveState(me.target,xe,G));return}y.ctrlKey?(y.saveState(w),y.dispatchEvent("paperChange")):(h.top(),G=w.getChildIndex(me.target),y.saveState(me.target,xe,G)),y.dispatchEvent("change"),h.top()}}))))}}),Object.defineProperty(this,"write",{get:function(){return g},set:function(se){g&&se===!1&&(y.finishX=y.x,y.finishY=y.y),!g&&se&&(h.graphics.es(),h.graphics.ef(),y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.x,y.lastY=y.lastMidY=y.y),g=se}}),Object.defineProperty(this,"size",{get:function(){return t},set:function(se){h.graphics.es(),h.graphics.ef(),t=se,i!="splatter"&&h.graphics.ss(e.Pick.choose(t)*y.sizeScale*y.sizeFactor,p)}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(se){r=se,h.graphics.es(),h.graphics.ef(),i!="splatter"&&h.graphics.s(e.Pick.choose(r))}}),Object.defineProperty(this,"penType",{get:function(){return i},set:function(se){i=se,h.graphics.ef().es(),i!="splatter"?h.graphics.s(e.Pick.choose(r)):h.graphics.s(e.Pick.choose(r)).ss(e.Pick.choose(t)*y.sizeScale*y.sizeFactor,p)}}),Object.defineProperty(this,"end",{get:function(){return p},set:function(se){p=se}}),Object.defineProperty(this,"damp",{get:function(){return o},set:function(se){o=se,y.dampX.damp=o,y.dampY.damp=o}}),Object.defineProperty(this,"spread",{get:function(){return l},set:function(se){l=se}});var Fe,ie;this.setColorRange=function(se,me){return n(me)?(Fe=y.color,ie=se):n(se)?(Fe=y.color,ie=me):(Fe=se,ie=me),y};var Se=0;Object.defineProperty(y,"colorRange",{get:function(){return Se},set:function(se){Se=se,!n(Fe)&&!n(ie)&&(y.color=e.colorRange(Fe,ie,se))}}),Object.defineProperty(this,"borderColor",{get:function(){return f},set:function(se){f=se}}),Object.defineProperty(this,"borderWidth",{get:function(){return d},set:function(se){d=se}}),Object.defineProperty(this,"pullColor",{get:function(){return U},set:function(se){if(n(se||se==-1))he(),U=null;else if(n(U)){U=se;var me=Z||zdf.stage;ge(me)}else U=se}}),y.setPen=function(se){y.dampX.immediate(y.x),y.dampY.immediate(y.y),y.lastX=y.lastMidX=y.finishX=y.x,y.lastY=y.lastMidY=y.finishY=y.y,n(se)&&(se=i),n(X[se])&&(se="line"),y.penType=i=se;var me=e.merge($,X[se]);for(var j in me)y[j]!=me[j]&&(y[j]=me[j]);return y},y.immediate=function(se,me){return n(se)||(y.x=se,y.dampX.immediate(y.x),y.lastX=y.lastMidX=y.finishX=y.x),n(me)||(y.y=me,y.dampY.immediate(y.y),y.lastY=y.lastMidY=y.finishY=y.y),y},y.clear=function(){for(var se=[],me=0;me<w.numChildren-1;me++)se.push(w.getChildAt(me));return b.push({paper:w,clear:se}),b.length>y.undoLevels&&b.shift(),y.dispatchEvent("recordUndo"),w.removeAllChildren(),h.graphics.clear(),w.addChild(h),y.dispatchEvent("change"),y.stage&&y.stage.update(),y},this.deleteSegment=function(se){se.visible=!1,y.undoLevels>0&&y.saveState(se)},this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Pen(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te)))},y.dispose=function(se,me,j){return n(se)&&(se=!0),le.removeEventListener("keydown",y.zimkeydownEvent),le.removeEventListener("keyup",y.zimkeyupEvent),Z&&y.nibEvent&&Z.off("stagemousemove",y.nibEvent),Z&&y.stageDown&&Z.off("stagemousedown",y.stageDown),Z&&y.stageUp&&Z.off("stagemouseup",y.stageUp),Z&&y.upEvent&&Z.off("stagemouseup",y.upEvent),e.Ticker.remove(y.ticker),y.removeAllEventListeners(),k&&k.removeFrom(),se&&(y.shape&&y.shape.dispose(),y.paper&&y.paper.dispose(),x&&(y.bitmap&&y.bitmap.dispose(),y.bitmap=null),y.zimContainer_dispose(j),w=h=y.shape=null),!0},J!==!1&&e.styleTransforms(this,pe)},e.extend(e.Pen,e.Container,["dispose","clone"],"zimContainer",!1),e.SoundWave=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",b;if(b=yt(e.SoundWave,arguments,S,this))return b;qe("69.95"),this.type="SoundWave",n(t)&&(t=120),n(r)&&(r="mic"),n(i)&&(i=120/1024),n(o)&&(o=.85),n(l)&&(l=r=="mic"?-80:(r.oscillator,-100)),n(f)&&(f=r=="mic"?-40:(r.oscillator,-10)),n(d)&&(d=function(F,K){return F*(.5+K*1/Math.pow(e.SoundWave.bufferLength,.95))}),n(p)&&(p=r=="mic"?0:(r.oscillator,30)),n(w)&&(w=r=="mic"?1:r.oscillator?5:10),n(k)&&(k=0),n(x)&&(x=5),e.SoundWave.bufferLength=1024;var E=t,R=this;R.baseline=p,R.magnify=w,R.reduce=k,R.input=r,R.adjust=x;var C;r.type=="Tone"||r.type=="SynthSound"?C=r.audioContext:C=new(le.AudioContext||le.webkitAudioContext);var O=R.analyser=C.createAnalyser();O.minDecibels=l,O.maxDecibels=f,O.smoothingTimeConstant=o,Object.defineProperty(this,"smoothing",{get:function(){return O.smoothingTimeConstant},set:function(F){O.smoothingTimeConstant=F}}),Object.defineProperty(this,"num",{get:function(){return E},set:function(F){E=F,I=Math.floor(i*e.SoundWave.bufferLength/E),I<1&&ut("ZIM SoundWave: num is too big")}}),this.setInput=function(F){if(R.input=F,F=="mic"){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(D){var U=R.source=C.createMediaStreamSource(D);P(U)}).catch(function(D){ut("ZIM SoundWave: Error occured: "+D)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(D){var U=R.source=C.createMediaStreamSource(D);P(U)},function(D){ut("ZIM SoundWave: Error occured: "+D)}):ut("ZIM SoundWave: Sorry, mic not supported");return}else if(F.type=="Tone")P(F.compressor);else if(F.type=="SynthSound")P(F.gain);else{if(F.type&&F.type=="sound"){ut("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");return}var K,V;F.playbackResource?(K=F.playbackResource,V=C.createMediaElementSource(K)):(K=F,V=C.createMediaElementSource(K)),P(V)}},this.setInput(r);var I,_;function P(F){if(_&&_.disconnect(O),_=F,n(T)||T!==0&&T!==1)F.connect(O),r!="mic"&&O.connect(C.destination);else{var K=new ChannelSplitterNode(C,{numberOfOutputs:2});F.connect(K),K.connect(O,T);var V=new ChannelMergerNode(C,{numberOfInputs:2});O.connect(V,0,T),r!="mic"&&V.connect(C.destination)}if(O.fftSize=e.SoundWave.bufferLength*2,I=Math.floor(i*e.SoundWave.bufferLength/E),I<1){ut("ZIM SoundWave: include param is too small or num param is too big");return}var D=O.frequencyBinCount,U=new Uint8Array(D),Q=300,J=0,N=0,te=Math.round(60*R.adjust*.8),ae=new e.Damp(Q,.01);R.calculate=function(ee){n(ee)&&(ee=!0),O.getByteFrequencyData(U);var pe=U.map(d);if(I==1&&!ee)return pe;var $=[],X=0,y;for(y=0;y<=i*e.SoundWave.bufferLength;y++)X+=pe[y],y!=0&&y%I==0&&($.push(Math.max(0,(X/I-R.baseline)*R.magnify-R.reduce)),X=0);var g=$.length;if(r!="mic"&&($[0]*=.75,$[1]*=.85,$[2]*=.9,$[g-2]*=.8,$[g-1]*=.75),$[g-1]*=1.3,$[g-2]*=1.2,$[g-3]*=1.1,ee){var h=[];te++,te>=60*R.adjust&&(Q=J/te,J=0,N=0,te=0);var L=ae.convert(Q);for(y=0;y<g;y++)$[y]>N&&(N=$[y]),h[y]=Math.min(1,L!=0?$[y]/L:0);return J+=N,h}return $},setTimeout(function(){R.dispatchEvent("ready")},50)}this.dispose=function(F){return F&&C&&C.close(),O&&O.disconnect(),!0}},e.extend(e.SoundWave,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Synth=function(t,r){qe("69.955"),this.type="Synth",n(t)&&(t=.3),n(r)&&(r=220),this.volume=t,this.frequency=r;var i=this,o;this.play=function(l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se){var se=Array.prototype.slice.call(arguments);if(se=se.shift(),!o&&(le.AudioContext||le.webkitAudioContext)&&(o=new(le.AudioContext||le.webkitAudioContext),o.z=o.createBufferSource,o.createBufferSource=function(_e){return _e==null&&(_e=o.z()),_e.start=_e.start||function(Re){o.noteOn(Re)},_e}),!!o){for(l=l!=null?ct(l):0,f=f!=null?ct(f):.3,d=d!=null?ct(d):.05,p=p!=null?ct(p):220,w=w!=null?ct(w):0,k=k!=null?ct(k):0,x=x!=null?ct(x):.1,T=T!=null?ct(T):0,S=S!=null?ct(S):1,b=b!=null?ct(b):0,E=E!=null?ct(E):0,R=R!=null?ct(R):0,C=C!=null?ct(C):0,O=O!=null?ct(O):0,I=I!=null?ct(I):0,_=_!=null?ct(_):0,P=P!=null?ct(P):0,F=F!=null?ct(F):0,D=D!=null?ct(D):0,K=K!=null?ct(K):1,V=V!=null?ct(V):0,ee=ee!=null?ct(ee):44100,pe==null&&(pe=99+w*ee),$==null&&($=k*ee),X==null&&(X=x*ee),y==null&&(y=V*ee),g==null&&(g=F*ee),h==null&&(h=Math.PI*2),L==null&&(L=function(_e){return _e>0?1:-1}),q==null&&(q=pe+y+$+X+g),A==null&&(A=b*=500*h/Math.pow(ee,2)),Y==null&&(Y=p*=(1+d*2*Math.random()-d)*h/ee),xe==null&&(xe=L(_)*h/4),G==null&&(G=0),Z==null&&(Z=0),ge==null&&(ge=0),he==null&&(he=0),ne==null&&(ne=0),ue==null&&(ue=0),Te==null&&(Te=1),Fe==null&&(Fe=[]),ie==null&&(ie=o.createBufferSource()),Se==null&&(Se=o.createBuffer(1,q,ee)),ie.connect(o.destination);ge<Math.floor(q);Fe[ge++]=ue)++ne>P*100&&(ne=0,ue=G*p*Math.sin(Z*_*h/ee-xe),ue=T?T>1?T>2?T>3?Math.sin(Math.pow(ue%h,3)):Math.max(Math.min(Math.tan(ue),1),-1):1-(2*ue/h%2+2)%2:1-4*Math.abs(Math.round(ue/h)-ue/h):Math.sin(ue),ue=(O?1-D+D*Math.sin(h*ge/O):1)*L(ue)*Math.pow(Math.abs(ue),S)*f*i.volume*(ge<pe?ge/pe:ge<pe+y?1-(ge-pe)/y*(1-K):ge<pe+y+$?K:ge<q-g?(q-ge-g)/X*K:0),ue=g?ue/2+(g>ge?0:(ge<q-g?1:(ge-q)/g)*Fe[ge-g|0]/2):ue),G+=1-I+(Math.sin(ge)+1)*1e9%2*I,Z+=1-I+(Math.pow(Math.sin(ge),2)+1)*1e9%2*I,p+=b+=E*500*h/Math.pow(ee,3),Te&&++Te>C*ee&&(p+=R*h/ee,Y+=R*h/ee,Te=0),O&&++he>O*ee&&(p=Y,b=A,he=1,Te=Te||1);Se.getChannelData(0).set(Fe),ie.buffer=Se;var me=new je.EventDispatcher;me.type="SynthSound",me.audioContext=o,me.gain=o.createGain(),ie.connect(me.gain),me.gain.connect(o.destination),me.pan=o.createStereoPanner(),me.pan.pan.value=l,ie.connect(me.pan),me.pan.connect(o.destination),ie.start(),me.duration=Fe.length/ee,me.playing=!0,me.stop=function(){clearTimeout(me.completeID),clearInterval(me.repeatID),me.gain.gain.setTargetAtTime(0,o.currentTime,.1),me.playing=!1,setTimeout(function(){o.close()},.1*1e3)};var j;return me.repeat=me.loop=function(_e,Re){j=0,_e===!0&&(_e=null),n(Re)&&(Re=0),clearTimeout(me.completeID);function de(){return me.duration+ct(Re)}return me.repeatID=e.interval(de,function(){j++,_e&&j>=_e?(me.dispatchEvent("complete"),me.repeatID.clear(),me.playing=!1):(me.dispatchEvent("loop"),i.play.apply(i,se))}),me},me.play=function(){return i.play.apply(i,se),me.playing=!0,me},me.completeID=setTimeout(function(){me.dispatchEvent("complete")},(Fe.length/ee+.1)*1e3),me}},this.Tone=function(l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V){var D="volume, note, shape, pan, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",U;if(U=yt(i.Tone,arguments,D,this))return U;this.type="Tone";var Q=this,J;n(l)&&(l=i.volume),n(f)&&(f=i.frequency),n(d)&&(d=e.SINE),n(p)&&(p=0),n(k)&&(k=.02),n(x)&&(x=.05),n(K)&&(K=0),le.AudioContext||le.webkitAudioContext?J=this.audioContext=new(le.AudioContext||le.webkitAudioContext):At&&ut("Synth tone() needs AudioContext"),l=ct(l),f=ct(f),d=ct(d),p=ct(p),w=ct(w),k=ct(k),x=ct(x),T=ct(T),S=ct(S),b=ct(b),E=ct(E),R=ct(R),C=ct(C),O=ct(O),I=ct(I),_=ct(_),P=ct(P),F=ct(F),K=ct(K);var N=v(w);i.duration=w,w&&(w=w*(N=="s"?1:1/1e3)),K&&(v(K),K=K*(N=="s"?1:1/1e3)),i.attack=k,i.release=x,i.rampDuration=.02,i.hush=.1;var te=this.note=this.oscillator=J.createOscillator();te.frequency.value=e.Synth.note(f),e.Synth.setShape(te,d);var ae=this.filter=J.createBiquadFilter();ae.type="bandpass",ae.frequency.value=te.frequency.value,ae.Q.value=0;var ee=this.gain=te.gain=J.createGain();ee.type="gain",ee.gain.setValueAtTime(0,J.currentTime);var pe=this.compressor=J.createDynamicsCompressor();pe.threshold.setValueAtTime(-50,J.currentTime),pe.knee.setValueAtTime(40,J.currentTime),pe.ratio.setValueAtTime(12,J.currentTime),pe.attack.setValueAtTime(0,J.currentTime),pe.release.setValueAtTime(.25,J.currentTime);var $=this.panNode=J.createStereoPanner();this.panNode.pan.value=p,te.connect(ae),ae.connect($),$.connect(ee),ee.connect(pe),pe.connect(J.destination);function X(ne,ue){n(ne)&&(ne=J.currentTime),n(ue)&&(ue=i.attack),te.start(ne);var Te=le.zdf&&new Date().getTime()-le.zdf.startTime<200?.1:i.attack;ee.gain.setValueAtTime(0,J.currentTime+.1),ee.gain.linearRampToValueAtTime(l*i.hush,J.currentTime+.1+Te)}X(K),this.stop=function(ne){n(ne)&&(ne=i.release),ee&&g(ee.gain,0,!0,ne),Z&&g(Z.gain,0,!0,ne),Y&&g(Y.gain,0,!0,ne),setTimeout(function(){Q.dispatchEvent("complete")},(.6+ne+i.rampDuration)*1e3),setTimeout(function(){J&&!J.iamClosed&&(J.iamClosed=!0,J.close())},(ne+1)*1e3),setTimeout(function(){h&&Q.removeWah()},(ne+1)*1e3)},w&&this.stop(K+w-.1);var y=this.notes=[te];this.addNote=function(ne,ue,Te,Fe,ie,Se){n(Fe)&&(Fe=!0),n(ie)&&(ie=!1),n(ne)&&(ne=.1),n(Se)&&(Se=0);var se={type:"Note"};se._volume=ne,se._note=e.Synth.note(ue),y.push(se);var me=se.oscillator=J.createOscillator();me.frequency.value=se._note,me.type=e.Synth.setShape(me,Te);var j=se.gain=J.createGain();return g(j.gain,se._volume,!0),j.connect(Fe?ae:ee),me.connect(j),Y&&ie&&Y.connect(me.frequency),me.start(J.currentTime+Se),Object.defineProperty(se,"volume",{get:function(){return se._volume},set:function(_e){n(_e)||(se._volume=ct(_e),g(se.gain.gain,se._volume,!0))}}),Object.defineProperty(se,"note",{get:function(){return se._note},set:function(_e){n(_e)||(se._note=ct(_e),g(se.oscillator.frequency,e.Synth.note(se._note)))}}),se},this.removeNote=function(ne){var ue=y.indexOf(ne);return ue>=0&&y.splice(ue,1),ne.oscillator.disconnect(),ne=null,this};function g(ne,ue,Te,Fe){n(ue)&&(ue=0),n(Fe)&&(Fe=i.rampDuration),Te?(ne.cancelScheduledValues(J.currentTime),ne.linearRampToValueAtTime(ne.value,J.currentTime+.02),ne.linearRampToValueAtTime(ue,J.currentTime+.05+Fe)):(ne.cancelScheduledValues(J.currentTime),ne.setTargetAtTime(ue,J.currentTime,Fe))}this.ramp=function(ne,ue){g(ee.gain,ne*i.hush,!0,ue)},this.rampPan=function(ne,ue){g($.pan,ne,!1,ue)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.wiggle.apply(null,arguments),this},e.addWires(this);var h,L;function q(){n(T)&&(T=1e3),n(S)&&(S=1),n(b)&&(b="sine"),n(E)&&(E=5),n(R)?R=Q.oscillator.frequency.value:R=e.Synth.note(R),n(L)&&(L=200),Q.filter.Q.value=E,h=Q.wah=i.oscillator(S,T/2,b,R+T/2+L),h.ticker=e.Ticker.add(function(){Q.filter.frequency.value=Q.wah.amplitude})}(T||S||!n(b)||!n(E))&&q(),Q.removeWah=function(){e.Ticker.remove(h.ticker),h.dispose(),h=Q.wah=null,Q.filter.Q.value=0};var A,Y;function xe(){n(O)&&(O=5),n(I)&&(I="sine"),n(C)&&(C=10),A=Q.vibrato=J.createOscillator(),Y=Q.vibratoGain=J.createGain(),Y.gain.value=0,A.frequency.value=O,e.Synth.setShape(A,I),A.connect(Y),Y.connect(te.frequency),A.start(0),Y.gain.setValueAtTime(0,J.currentTime+.1),Y.gain.linearRampToValueAtTime(C,J.currentTime+.1+i.attack)}(C||O||!n(I))&&xe(),Q.removeVibrato=function(){g(Y.gain,0,!0),setTimeout(function(){Y.disconnect(),A.disconnect(),A.stop(),A=null},(i.rampDuration+1)*1e3)};var G,Z;function ge(){n(P)&&(P=5),n(F)&&(F="sine"),G=Q.tremelo=J.createOscillator(),Z=Q.tremeloGain=J.createGain(),Z.gain.value=0,G.frequency.value=P,e.Synth.setShape(G,F),G.connect(Z),Z.connect(ee.gain),G.start(0);var ne=le.zdf&&new Date().getTime()-le.zdf.startTime<200?.1:i.attack;Z.gain.setValueAtTime(0,J.currentTime+.1),Z.gain.linearRampToValueAtTime(l*i.hush,J.currentTime+.1+ne)}(_||P||!n(F))&&ge(),Q.removeTremelo=function(){g(Z.gain,0,!0),setTimeout(function(){Z.disconnect(),G.disconnect(),G.stop(),G=null},(i.rampDuration+1)*1e3)},Object.defineProperty(this,"volume",{get:function(){return l},set:function(ne){if(!n(ne)){var ue;G?(ee.gain.value?ue=Z.gain.value/ee.gain.value:ue=l?_/l:0,l=ct(ne),l=e.constrain(l,.001),g(Z.gain,l*ue*i.hush,!0)):l=ct(ne),g(ee.gain,l*i.hush,!1,i.rampDuration)}}}),this.paused=!1;var he=l;this.pause=function(ne){n(ne)&&(ne=!0),ne?(he=Q.volume,Q.volume=0):Q.volume=he},V&&(n(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return r},set:function(ne){n(ne)||(r=ct(ne),g(te.frequency,ne))}}),Object.defineProperty(this,"note",{get:function(){return f},set:function(ne){n(ne)||(f=ct(ne),te.frequency.value=e.Synth.note(f))}}),Object.defineProperty(this,"shape",{get:function(){return d},set:function(ne){d=ct(ne),e.Synth.setShape(te,d)}}),Object.defineProperty(this,"pan",{get:function(){return p},set:function(ne){n(ne)||(p=ct(ne),g($.pan,p,!1,.1))}}),Object.defineProperty(this,"currentTime",{get:function(){return J.currentTime},set:function(){At&&ut("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return T},set:function(ne){n(ne)||(T=ct(ne),T=e.constrain(T,i.wahAmountMin,i.wahAmountMax),n(h)?q():h.gain=T/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return S},set:function(ne){n(ne)||(S=ct(ne),S=e.constrain(S,i.wahRateMin,i.wahRateMax),n(h)?q():h.frequency=S)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return E},set:function(ne){E=ct(ne),E=e.constrain(E,i.wahThroatMin,i.wahThroatMax),n(h)?q():ae.Q.value=E}}),Object.defineProperty(this,"wahNote",{get:function(){return R},set:function(ne){n(ne)||(R=ct(ne),n(h)?q():h.offset=R+T/2+L)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return L},set:function(ne){n(ne)||(L=ct(ne),n(h)?q():h.offset=R+T/2+L)}}),Object.defineProperty(this,"wahShape",{get:function(){return b},set:function(ne){b=ct(ne),n(h)?q():h.shape=b}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return _},set:function(ne){n(ne)||(_=ct(ne),n(G)?ge():Z.gain.setValueAtTime(_,J.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return P},set:function(ne){n(ne)||(P=ct(ne),n(h)?ge():G.frequency.value=P)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return F},set:function(ne){F=ct(ne),n(G)?ge():e.Synth.setShape(G,F)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return C},set:function(ne){n(ne)||(C=ct(ne),n(A)?xe():Y.gain.setValueAtTime(C,J.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return O},set:function(ne){n(ne)||(O=ct(ne),n(A)?xe():A.frequency.value=O)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return I},set:function(ne){I=ct(ne),n(A)?xe():e.Synth.setShape(A,I)}})},e.extend(this.Tone,je.EventDispatcher),this.tone=function(l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(l,f,d,p){var w="frequency, gain, shape, offset",k;if(k=yt(i.Oscillator,arguments,w,this))return k;this.type="Oscillator",n(l)&&(l=1),n(f)&&(f=10),n(d)&&(d="sine"),n(p)&&(p=0),this.frequency=ct(l),this.gain=ct(f),this.shape=ct(d),this.shape=="saw"&&(this.shape="sawtooth"),this.offset=ct(p),this.paused=!1;var x=this,T=0,S=e.Ticker.framerate;this.ticker=e.Ticker.add(function(){if(!x.paused){var b=0;x.shape=="sine"?b=Math.sin(x.frequency*(Math.PI*2*(T/S))):x.shape=="square"?(b=Math.sin(x.frequency*(Math.PI*2*(T/S))),b=b<=0?0:1):x.shape=="triangle"?b=2/Math.PI*Math.asin(Math.sin(x.frequency*Math.PI*2*T/S)):x.shape=="sawtooth"||x.shape=="saw"?b=-2/Math.PI*Math.atan(1/Math.tan(x.frequency*Math.PI*T/S)):x.shape=="zap"&&(b=2/Math.PI*Math.atan(1/Math.tan(x.frequency*Math.PI*T/S))),x.amplitude=b*x.gain+x.offset,T++}}),this.pause=function(b){x.paused=b},this.dispose=function(){e.Ticker.remove(this.ticker)}},this.oscillator=function(l,f,d,p){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},e.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],e.Synth.major=["C","D","E","F","G","A","B","C4"],e.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],e.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],e.Synth.setShape=function(t,r){if(!n(t)){n(r)&&(r="sine"),r=="saw"&&(r="sawtooth");var i;if(typeof r=="number")r=e.Synth.shapes[r],r||(r="sine");else if(r.real&&r.imag)i=t.context.createPeriodicWave(new Float32Array(r.real),new Float32Array(r.imag));else if(r.constructor==PeriodicWave)i=r;else if(typeof r=="string"){var o=e.Synth.shapes.indexOf(r);if(o<0&&(r="sine"),r=="noise"){for(var l=4096,f=new Float32Array(l),d=new Float32Array(l),p=1;p<l;p+=2)d[p]=e.shuffle([0,.5,1])[0];i=t.context.createPeriodicWave(f,d)}else r=="tan"&&(r="sawtooth")}else r="sine";i?(t.setPeriodicWave(i),r="custom"):t.type=r}},e.Synth.getNote=function(t,r){return n(r)&&(r=0),t*Math.pow(2,r/12)},e.Synth.note=function(t){if(typeof t=="string"){var r=t.substr(0,1).toUpperCase(),i=e.loop(t,function(p){if(!isNaN(p))return Number(p)});i=i!==!0&&!isNaN(i)?i:3;var o=e.Synth.notes.indexOf(r);o<0&&(o=9);var l=t.match(/b/g),f=t.match(/#/g);l=l?l.length:0,f=f?f.length:0;var d=(i-3)*12+o+f-l;return e.Synth.getNote(e.Synth.getNote(220,-9),d)}else return typeof t!="number"&&(t=220),t},e.Synth.wave=function(t,r){if(le.AudioContext||le.webkitAudioContext){var i=new(le.AudioContext||le.webkitAudioContext);if(t.real)r=t.imag,t=t.real;else if(n(r)&&At){ut("Synth.wave() - pass in asset('wave.json') or real and imag properties");return}return t.constructor!==Float32Array&&(t=new Float32Array(t)),r.constructor!==Float32Array&&(r=new Float32Array(r)),i.createPeriodicWave(t,r)}},e.Synth.drawWave=function(t,r,i,o,l,f,d,p,w){var k="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV",x;if(x=yt(e.Synth.drawWave,arguments,k))return x;var T=45,S=45;t=ct(t),n(i)&&(i=2),n(r)&&(r=e.darker),n(p)&&(p=8),n(w)&&(w=p);var b=p,E=w,R=new e.Container(T,S);R.mouseChildren=!1,n(o)||(R.backing=new e.Rectangle(T,S,o,l,f,d).addTo(R)),R.shape=new e.Shape(T,S).addTo(R).s(r).ss(i);var C=T-b*2;return t=="square"?R.shape.mt(b,S/2).lt(b,E+3).lt(T/2,E+3).lt(T/2,S-E-3).lt(T-b,S-E-3).lt(T-b,S/2):t=="triangle"?R.shape.mt(b,S/2).lt(b+C/4,E+3).lt(b+C*3/4,S-E-3).lt(T-b,S/2):t=="sawtooth"||t=="saw"?R.shape.mt(b,S/2).lt(T/2,E+2).lt(T/2,S-E-2).lt(T-b,S/2):t=="zap"?R.shape.mt(b,S/2).lt(T/2,S-E-2).lt(T/2,E+2).lt(T-b,S/2):R.shape.mt(b,S/2).bt(T/2,0-15,T/2,S+15,T-b,S/2),R.type=t,R},e.VR=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",b;if(b=yt(e.VR,arguments,S,this))return b;if(qe("69.98"),this.type="VR",!le.zdf){At&&ut("VR() - please use ZIM Frame");return}var E=le.zdf;(n(T)||!T.getBounds||!T.getBounds().width)&&(T=E.stage),n(r)&&(r=0),n(i)&&(i=100),n(f)&&(f=.5),n(o)&&(o=0),n(l)&&(l=60),n(d)&&(d=.1),n(p)&&(p=0),n(w)&&(w=!1),n(k)&&(k=!0),n(x)&&(x=!0),this.angle=r,this.currentAngle=p,e.mobile()&&(x=!1);var R=this,C=T.width,O=T.height;R.zimContainer_constructor();var I=R.left=new e.Container(C/2,O,null,null,!1),_=new e.Rectangle(C/2,O,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1);I.addChild(_);var P=R.right=I.clone();R.addChild(I,P),P.x=C/2;var F=R.contentLeft=R.content=t,K=R.contentRight=t.clone();if(p!=0)var V=setTimeout(D,100);else D();function D(){F.addTo(I,null,!1).setMask(I.getChildAt(0)).pos({y:(T.height-F.height)/2,reg:!0}),K.addTo(P,null,!1).setMask(P.getChildAt(0)).pos({y:(T.height-F.height)/2,reg:!0})}var U=[],Q=[];function J(se,me,j,_e){se.vrMatch=me,me.vrMatch=se,se.cacheCanvas&&me.cache(),se.dep&&!n(se.depth)&&(U.push(se),Q.push(me),n(j)||j.push(se),n(_e)||_e.push(me),me.dep(se.depth)),e.loop(se,function(Re,de){J(Re,me.getChildAt(de),j,_e)})}J(F,K);function N(se,me){e.loop(se,function(j){j.vrChannel=me,j.vrStartX=j.x,r!=0&&i!=0&&(j.vrAngle=r,j.vrDistance=i),o!=0&&i!=0&&(j.vrParallax=o/100,j.vrParallaxDistance=0,r!=0&&(j.vrParallaxDamp=new e.Damp(0,d))),j.dep(j.depth)})}if(N(U,"left"),N(Q,"right"),r!=0&&i!=0){var te=new e.Damp(180+p,f);te.immediate(180+p);var ae=!1,ee=!1;E.on("deviceorientation",function(se){pe(te.convert((se.rotation.z>180?-180:180)+se.rotation.z+p)-180)}),e.Ticker.always()}function pe(se){R.currentAngle=se;var me=-R.currentAngle*i/r;R.contentLeft.x=me,R.contentRight.x=me;var j;Math.round(R.currentAngle)<=-r/2&&!ae?(j=new je.Event("boundaryout"),j.boundary="left",ae=!0,R.dispatchEvent(j)):Math.round(R.currentAngle)>=r/2&&!ee?(j=new je.Event("boundaryout"),j.boundary="right",ee=!0,R.dispatchEvent(j)):Math.round(R.currentAngle)>-r/2&&Math.round(R.currentAngle)<r/2&&(j=new je.Event("boundaryin"),ae?(j.boundary="left",R.dispatchEvent(j),ae=!1):ee&&(j.boundary="right",R.dispatchEvent(j),ee=!1))}function $(se){var me=se.parent.localToLocal(se.vrStartX,0,T),j=se.vrParallaxDamp.convert(se.vrChannel=="left"?R.contentLeft.x+me.x-C/4:R.contentRight.x+me.x-C/2-C/4);se.depth<=0&&!w&&(j=0),se.vrParallaxDistance=Math.max(-i/r*l/2,Math.min(i/r*l/2,j)),se.dep(se.depth)}if(o!=0&&i!=0){var X=new e.ProportionDamp(180-l/2,180+l/2,-l/2,l/2,d);X.immediate(180),E.on("deviceorientation",function(se){var me=0;r==0&&o!=0&&i!=0&&(me=X.convert((se.rotation.z>180?-180:180)+se.rotation.z)),g(me)}),e.Ticker.always()}function y(se,me){se.vrParallaxDistance=se.depth<=0&&!w?0:me,se.dep(se.depth)}function g(se){r!=0&&i!=0?(e.loop(U,$),e.loop(Q,$)):(e.loop(U,function(me){y(me,se)}),e.loop(Q,function(me){y(me,se)}))}x&&i!=0&&(r!=0||o!=0)&&R.added(function(){var se={swipeAngle:0};R.swiper=new e.Swiper({swipeOn:R,target:se,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),e.Ticker.add(function(){r!=0&&i!=0&&pe(se.swipeAngle),o!=0&&i!=0&&g(X.convert(se.swipeAngle+180))})});var h=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,L=h,q=!1;F.startRegX=F.regX,K.startRegX=K.regX;var A=this.adjuster=new e.Container(800,300,null,null,!1);_=A.backing=new e.Rectangle(A.width,A.height,e.lighter,null,null,null,null,null,null,!1).center(A).alp(1).sha("rgba(0,0,0,.2)",0,0,30),A.strip=new e.Rectangle(A.width,A.height/3,e.white,null,null,null,null,null,null,!1).center(A).alp(1),A.label=new e.Label({text:"slide to adjust center of left and right",size:28,color:e.dark,align:"center",valign:"center"}).center(A).pos({y:50,reg:!0});var Y=A.close=new e.Rectangle(50,50,e.light,null,null,null,null,null,null,!1).addTo(A).mov(A.width-70,26),xe=new e.Shape(-40,-40,80,80,null,!1);xe.graphics.f(e.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),xe.center(Y).sca(.3),Y.cur("pointer"),Y.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){R.hideAdjuster(),ge.currentValue=(ge.max-ge.min)/2+L,R.dispatchEvent("closed")});var G=new e.Circle(30,e.dark,null,null,null,null,null,null,!1).center(A).pos({x:A.width/4,reg:!0});G.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,!1).center(G);var Z=new e.Circle(30,e.dark,null,null,null,null,null,!1).center(A).pos({x:A.width/4*3,reg:!0});Z.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,null,!1).center(Z);var ge=A.slider=new e.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(A).pos({y:A.height-40,reg:!0});ge.currentValue=(ge.max-ge.min)/2+h;var he=new e.Proportion(ge.min,ge.max,G.x-A.width/4,G.x+A.width/4,-1),ne=new e.Proportion(ge.min,ge.max,Z.x-A.width/4,Z.x+A.width/4);ge.on("change",function(){G.x=he.convert(ge.currentValue),Z.x=ne.convert(ge.currentValue)}),new e.Label("closer",24,null,e.silver).centerReg(A).pos({x:ge.x-220,y:ge.y,reg:!0}),new e.Label("farther",24,null,e.silver).centerReg(A).pos({x:ge.x+220,y:ge.y,reg:!0});var ue=R.ok=new e.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:e.blue,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(A).sca(.8).pos({x:A.width-58,y:ge.y,reg:!0});ue.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=ge.currentValue-(ge.max-ge.min)/2),ie(),R.hideAdjuster(),R.dispatchEvent("saved"),R.dispatchEvent("closed")});var Te=R.zero=new e.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:e.yellow,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(A).sca(.8).pos({x:58,y:ge.y,reg:!0});Te.on((Ot?e.ACTIONEVENT=="mousedown":le.ACTIONEVENT=="mousedown")?"mousedown":"click",function(){ge.currentValue=(ge.max-ge.min)/2,G.x=he.convert(ge.currentValue),Z.x=ne.convert(ge.currentValue)});var Fe=new e.Proportion(0,30,-T.width/4,T.width/4);function ie(){var se=Fe.convert(ge.currentValue);F.regX=F.startRegX+se,K.regX=K.startRegX-se}ie(),this.showAdjuster=function(){if(q)return R;q=!0,G.x=he.convert(ge.currentValue),Z.x=ne.convert(ge.currentValue),L=ge.currentValue-(ge.max-ge.min)/2,A.scaleTo(T,100,100).center(this),T.stage.update()},this.hideAdjuster=function(){if(!q)return R;q=!1,A.removeFrom(this),T.stage.update()},this.position=function(se,me,j){_e(se),_e(se.vrMatch);function _e(Re){Re.vrStartX=me,Re.vrParallaxDamp&&Re.vrParallaxDamp.immediate(me),Re.mov(me,j)}return se},this.register=function(se){if(!se.parent||!se.parent.vrMatch)return At&&ut("ZIM VR() - please only register objects already inside content container"),se;var me=se.clone().addTo(se.parent.vrMatch),j=[],_e=[];return J(se,me,j,_e),N(j,"left"),N(_e,"right"),se},r!=0&&i!=0&&k&&(R.boundaryRight=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(R.boundaryRight).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(-90).center(R.boundaryRight).dep(-6),R.boundaryRight.center(t).mov(i/2+24),R.boundaryLeft=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(R.boundaryLeft).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,null,-3,null,null,!1).rot(90).center(R.boundaryLeft).dep(-6),R.boundaryLeft.center(t).mov(-i/2-24),R.register(R.boundaryRight),R.register(R.boundaryLeft));function Se(se){var me=U.indexOf(se);U.indexOf(se)>=0&&(U.splice(me,1),Q.splice(me,1)),e.loop(se,function(j){Se(j)})}this.remove=function(){return e.loop(arguments,function(se,me){t.contains(me)&&(Se(me),me.parent.removeChild(me),me.vrMatch.parent.removeChild(me.vrMatch))}),R},this.resize=function(){C=T.width,O=T.height,I.getChildAt(0).widthOnly=P.getChildAt(0).widthOnly=C/2,I.getChildAt(0).heightOnly=P.getChildAt(0).heightOnly=O,P.x=C/2,I.setBounds(0,0,C/2,O),P.setBounds(0,0,C/2,O),p!=0?(clearTimeout(V),V=setTimeout(D,100)):D(),A.scaleTo(T,100,100).center(this,null,!1)}},e.extend(e.VR,e.Container,"clone","zimContainer",!1),e.scaX=1,e.scaY=1,e.Frame=function(t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe){var $="scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",X;if(X=yt(e.Frame,arguments,$,this))return X;qe("83"),At&&oi("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var y=this;(!le.zdf||!le.zdf.type)&&(le.zimDefaultFrame=le.zdf=le.F=this),le.M=e.mobile();var g=Date;this.startTime=new g().getTime(),n(I)&&(I=!0);var h=!!le.HTMLCanvasElement;if(!h&&I){setTimeout(function(){y.dispatchEvent("failed")},100);return}var L=e.mobile();n(t)&&(t="full"),t=="outside"&&(t="fill"),n(p)||(le.PATH=p),n(x)&&(x=!L),n(T)&&(T=!0),n(S)&&(S=!1),n(b)&&(b="center"),n(E)&&(E="center");var q="";n(R)&&(le.zdf!=this?(q=e.makeID(null,5),R="myCanvas"+q):R="myCanvas");var A=v(O);n(C)&&(C=20),n(O)&&(O=L?A=="s"?1:1e3:A=="s"?.03:30),n(_)&&(_=!1),n(V)&&(V=!1),n(D)&&(D="circles"),this.loadFailObj=D,n(U)&&(U=!1),n(Q)&&(Q=!0),this.retina=Q,n(J)&&(J=!1),n(N)&&(N=!0),n(te)&&(te=!1),n(ae)&&(ae=10),n(pe)&&(pe=!1),pe&&(T=!0);var Y=ae;y.maxNum=ee,_&&(Q=!1),this.retina=Q;var xe=!1,G=!1;this.leftMouseDown=!1;function Z(Be){y.leftMouseDown=Be.buttons===void 0?Be.which===1:Be.buttons===1,xe&&!y.leftMouseDown&&y.dispatchEvent("mouseupplus"),G&&!y.leftMouseDown&&y.dispatchEvent("mouseupplusonly"),xe=G=y.leftMouseDown}var ge=["fit","fill","full"],he,ne,ue;if(te){this.shim=!0,te.stage.frame=this;var Te=this.canvas=te.canvas;this.scale=te.stage.scaleX;var Fe,ie;setTimeout(function(){Se(),ie=function(){Se(),Fe&&clearTimeout(Fe),Fe=setTimeout(Se,50)},le.addEventListener("resize",ie)},20),he=te.stage,ne=he.getBounds()?he.getBounds().width:Te.width/he.scaleX,ue=he.getBounds()?he.getBounds().height:Te.height/he.scaleY,he.getBounds()||he.setBounds(0,0,ne,ue),o=Te.style.backgroundColor,Je(),Se()}else this.scale=1,this.x=0,this.y=0;function Se(){y.scale=te.stage.scaleX;var Be=Te.getBoundingClientRect();y.x=Be.x+e.scrollX(),y.y=Be.y+e.scrollY(),e.scaX=je.stageTransformable?1:te.stage.scaleX,e.scaY=je.stageTransformable?1:te.stage.scaleY}var se,me,j=!1,_e,Re,de=!1,Pe=!1,Me=!1;te||(document.readyState==="interactive"||document.readyState==="complete"?setTimeout(function(){ce()},200):document.addEventListener("DOMContentLoaded",ce));var fe,ve=!1,Ie=t=="full"&&typeof InstallTrigger<"u";if(this.swapRotation=!1,L&&!le.parent){var we=isNaN(le.innerWidth)?le.clientWidth:le.innerWidth,Xe=isNaN(le.innerHeight)?le.clientHeight:le.innerHeight;this.swapRotation=(le.orientation==0||le.orientation==180)&&we>Xe||Math.abs(le.orientation)==90&&Xe>we}le.addEventListener("resize",Ge);var ye;function Ge(){if(te){if(he.canvas){var Be=ne=he.canvas.width,it=ue=he.canvas.height;he.setBounds(0,0,Be,it)}y.dispatchEvent("resize");return}ye=Date.now()+O*(A=="s"?1e3:1),Ie?ve||(ve=!0,fe=e.Ticker.update,e.tickerFrame||(e.Ticker.update=!1,e.tickerFrame=y),gt(),at(),clearInterval(y.frameTime),y.frameTime=setInterval(function(){if(Date.now()>ye){clearInterval(y.frameTime),ve=!1,y==e.tickerFrame&&(e.Ticker.update=fe);return}gt(),at()},50)):(gt(),at(),clearInterval(y.frameTime),y.frameTime=setInterval(function(){if(Date.now()>ye){clearInterval(y.frameTime);return}gt(),at()},O*(A=="s"?1e3:1)<50?O*(A=="s"?1e3:1)+5:50))}y.loadAssetsCount=0,n(e.assets)&&(e.assets={},e.assetIDs={});var He=[];He[0]="h",He[1]="c",He[2]="o",He[3]="p",He[4]="e";var Oe=!1;function ce(){if(Me)return;if(Me=!0,ge.indexOf(t)==-1){if(_e=t,n(wn(_e))){ut("Frame - scaling: HTML tag with id="+t+" must exist");return}Re=y.tag=wn(_e),y.scaling=t=n(r)||n(i)?"tag":"inline",R.indexOf("myCanvas")==0&&(R=_e+"Canvas"),Re.tagName.toLowerCase()=="canvas"&&(Oe=!0,R=_e)}else y.scaling=t;y.canvasID=R,n(r)&&(r=500),n(i)&&(i=500),ne=r,ue=i,n(l)||(y.outerColor=l),Qe(),nt(),L?(S&&setTimeout(function(){le.scrollTo(0,0)},50),setTimeout(Be,100),O*(A=="s"?1e3:1)!=100&&setTimeout(Be,O*(A=="s"?1e3:1))):(de=!0,Ue());function Be(){gt(),de=!0,Ue(),at(),he&&he.update()}if(n(d))Pe=!0,Ue();else{var it;d.constructor=={}.constructor&&!(d.audioSprite||d.id||d.data||d.src)?it=y.loadAssets(e.merge(d,{progress:w,queueOnly:!0})):it=y.loadAssets({assets:d,path:p,progress:w,queueOnly:!0}),n(it)||!it.on?(At&&ut("Frame() - load failed"),Pe=!0,Ue()):it.on("complete",function(){Pe=!0,Ue()})}}function Ue(){if(de&&Pe&&!j)if(he.width>=1&&he.height>=1){if(!n(w)&&w.show&&w.hide(),y==le.zdf&&(le.S=he,le.W=he.width,le.H=he.height),f&&typeof f=="function"&&f(y,he,he.width,he.height),!y)return;if(k&&typeof k=="function"){var Be=0;if(!y)return;y.updateID=e.Ticker.add(function(){k(++Be,y,he,he.width,he.height)}),y.pauseTicker=function(it){n(it)&&(it=!0),it?e.Ticker.remove(y.updateID):e.Ticker.add(y.updateID)}}y.dispatchEvent("ready"),j=!0,at(),he.update()}else setTimeout(function(){gt(),Ue()},50)}function Qe(){var Be;Oe?Be=y.canvas=y.tag:(Be=y.canvas=document.createElement("canvas"),Be.setAttribute("id",R)),Be.setAttribute("tabindex",0);var it=e.windowWidth(),vt=e.windowHeight(),et=le.devicePixelRatio||1;t=="full"||t=="tag"?Q?(y.scale=et,Be.setAttribute("width",it*y.scale),Be.setAttribute("height",vt*y.scale),t=="full"&&(Be.style.width=it+"px",Be.style.height=vt+"px")):(Be.setAttribute("width",it),Be.setAttribute("height",vt)):(Be.setAttribute("width",ne),Be.setAttribute("height",ue));var wt=wn(R+"Alternative");wt&&Be.appendChild(wt),Oe||(t=="tag"||t=="inline"?Re.appendChild(Be):document.body.appendChild(Be)),n(o)||(Be.style.backgroundColor=o),t=="full"||t=="fit"||t=="fill"?(Be.style.position="absolute",V||(document.body.style.overflow="hidden")):getComputedStyle(Be.parentElement).position=="static"&&(Be.parentElement.style.position="relative"),Be.addEventListener("pointerdown",function(xt){Be.setPointerCapture(xt.pointerId),y.dispatchEvent(xt)}),Be.addEventListener("pointerup",function(xt){Be.releasePointerCapture(xt.pointerId),y.dispatchEvent(xt)}),Be.addEventListener("pointermove",function(xt){y.dispatchEvent(xt)}),Be.addEventListener("pointerenter",function(xt){y.dispatchEvent(xt)}),Be.addEventListener("pointerleave",function(xt){y.dispatchEvent(xt)})}function Je(){N&&(y.mouseX=0,y.mouseY=0,y.mousedownEvent=he.on("stagemousedown",function(Be){y.mouseX=Be.stageX/e.scaX,y.mouseY=Be.stageY/e.scaY}),y.mousemoveEvent=he.on("stagemousemove",function(Be){y.mouseX=Be.stageX/e.scaX,y.mouseY=Be.stageY/e.scaY})),le.removeEventListener("mousedown",Z,!0),le.removeEventListener("mousemove",Z,!0),le.removeEventListener("mouseup",Z),le.addEventListener("mousedown",Z,!0),le.addEventListener("mousemove",Z,!0),le.addEventListener("mouseup",Z)}function nt(){gt(),ge.indexOf(t)!=-1&&!V&&(y.zil=Fr()),y.mousedownEvent&&he&&he.off("stagemousedown",y.mousedownEvent),y.mousemoveEvent&&he&&he.off("stagemousemove",y.mousemoveEvent),he=_?new e.StageGL(R,P):new e.Stage(R),he.frame=y,he.mouseMoveOutside=J,!n(o)&&_&&he.setClearColor(e.convertColor(o)),he.setBounds(0,0,ne,ue),he.width=ne,he.height=ue,Q&&gt(),x&&he.enableMouseOver(C),T&&(pe?je.Touch.enable(he,!0,V):je.Touch.enable(he,!1,V)),V&&(he.preventSelection=!1),F&&(he.nextStage=F.stage),K&&(he.nextStage=K),Je(),he.on("stagemouseup",function(){G=!1})}function gt(){if(y){var Be=wn(R),it=e.windowWidth(),vt=e.windowHeight(),et,wt,xt,_t;if(se=y.orientation=it>vt?"horizontal":"vertical",se!=me&&(me=se,y.dispatchEvent("orientation")),L&&S&&setTimeout(function(){le.scrollTo(0,0)},100),!!Be){if(t=="fit")y.scale=it/vt>=ne/ue?vt/ue:it/ne;else if(t=="fill")y.scale=it/vt>=ne/ue?it/ne:vt/ue;else if(t=="full"){Be.style.left=Be.style.top="0px",Be.width=ne=it,Be.height=ue=vt,he&&(he.setBounds(0,0,ne,ue),Q?(xt=le.devicePixelRatio||1,Be.width=it*xt,Be.height=vt*xt,Be.style.width=it+"px",Be.style.height=vt+"px",y.scale=xt,he.scaleX=he.scaleY=y.scale):he.scaleX=he.scaleY=1,he.tickOnUpdate=!1,he.update(),he.tickOnUpdate=!0,he.width=ne,he.height=ue,_&&he.updateViewport(ne/he.scaleX,ue/he.scaleY),e.scaX=je.stageTransformable?1:he.scaleX,e.scaY=je.stageTransformable?1:he.scaleY),V||(e.scrollX(0),e.scrollY(0)),st();return}else if(t=="tag"){ne=Re.style.width==""?Re.getAttribute("width")||Re.offsetWidth:Re.style.width,ue=Re.style.height==""?Re.getAttribute("height")||Re.offsetHeight:Re.style.height,Q?(Be.width=ne*y.scale,Be.height=ue*y.scale,Be.style.width=ne+"px",Be.style.height=ue+"px",he&&(he.scaleX=he.scaleY=y.scale)):(he&&(he.scaleX=he.scaleY=1),Be.width=ne,Be.height=ue),he&&(he.tickOnUpdate=!1,he.update(),he.tickOnUpdate=!0,he.setBounds(0,0,ne,ue),he.width=ne,he.height=ue,_&&he.updateViewport(ne/he.scaleX,ue/he.scaleY),e.scaX=je.stageTransformable?1:he.scaleX,e.scaY=je.stageTransformable?1:he.scaleY),Re.style.overflow="hidden",Be.style.left=Be.style.top="0px",_t=Be.getBoundingClientRect(),y.x=_t.x+e.scrollX(),y.y=_t.y+e.scrollY(),st();return}else if(t=="inline"){if(Q){if(document.styleSheets[0])try{for(var lt=document.styleSheets[0].rules||document.styleSheets[0].cssRules,Dt=0;Dt<lt.length;Dt++){var Pt=lt[Dt];if(Pt.selectorText=="#"+R){var It=Pt.style.getPropertyValue("width");if(It){var Vt=Zn(Be.style.width),Gt=Zn(Be.style.height);Be.style.width=It}}}}catch(Lt){+function(){}()}var jt=le.getComputedStyle(Be),sn=Zn(jt.getPropertyValue("width"));Vt&&(Be.style.height=Gt*sn/Vt+"px",jt=le.getComputedStyle(Be));var Kt=Zn(jt.getPropertyValue("height"));xt=le.devicePixelRatio||1,y.scale=sn/r*xt,Be.width=ne*y.scale,Be.height=ue*y.scale,Be.style.width=sn+"px",Be.style.height=Kt+"px",he&&(he.scaleX=he.scaleY=y.scale)}else he&&(he.scaleX=he.scaleY=1);he&&(he.tickOnUpdate=!1,he.update(),he.tickOnUpdate=!0,he.setBounds(0,0,ne,ue),he.width=ne,he.height=ue,_&&he.updateViewport(ne/he.scaleX,ue/he.scaleY),e.scaX=je.stageTransformable?1:he.scaleX,e.scaY=je.stageTransformable?1:he.scaleY),Be.style.left=Be.style.top="0px",_t=Be.getBoundingClientRect(),y.x=_t.x+e.scrollX(),y.y=_t.y+e.scrollY(),st();return}wt=ue*y.scale,et=ne*y.scale,Q?(xt=le.devicePixelRatio||1,y.scale*=xt,Be.width=ne*y.scale,Be.height=ue*y.scale,Be.style.width=ne*y.scale/xt+"px",Be.style.height=ue*y.scale/xt+"px",he&&(he.scaleX=he.scaleY=y.scale)):(he&&(he.scaleX=he.scaleY=1),Be.style.width=et+"px",Be.style.height=wt+"px"),he&&(he.tickOnUpdate=!1,he.update(),he.tickOnUpdate=!0),b=="left"?y.x=0:b=="right"?y.x=it-et:y.x=(it-et)/2,E=="top"?y.y=0:E=="bottom"?y.y=vt-wt:y.y=(vt-wt)/2,Be.style.left=y.x+"px",Be.style.top=y.y+"px",V||(e.scrollX(0),e.scrollY(0)),st(),he&&(e.scaX=je.stageTransformable?1:he.scaleX,e.scaY=je.stageTransformable?1:he.scaleY)}}}var We=He.reverse().join("");this.update=function(){gt(),y.dispatchEvent("update")};function st(){if(t=="fill"){var Be=(Zn(y.canvas.style.width)-e.windowWidth())/2;b=="left"?(y.visibleLeft=0,y.visibleRight=e.windowWidth()/(e.windowWidth()+Be*2)*ne):b=="right"?(y.visibleLeft=Be*2/(e.windowWidth()+Be*2)*ne,y.visibleRight=ne):(y.visibleLeft=Be/(e.windowWidth()+Be*2)*ne,y.visibleRight=(e.windowWidth()+Be)/(e.windowWidth()+Be*2)*ne);var it=(Zn(y.canvas.style.height)-e.windowHeight())/2;E=="top"?(y.visibleTop=0,y.visibleBottom=e.windowHeight()/(e.windowHeight()+it*2)*ue):E=="bottom"?(y.visibleTop=it*2/(e.windowHeight()+it*2)*ue,y.visibleBottom=ue):(y.visibleTop=it/(e.windowHeight()+it*2)*ue,y.visibleBottom=(e.windowHeight()+it)/(e.windowHeight()+it*2)*ue)}else y.visibleLeft=y.visibleTop=0,y.visibleRight=ne,y.visibleBottom=ue}function at(){if(!(!j||!y)){y==le.zdf&&(le.W=y.width,le.H=y.height),y.dispatchEvent("resize");var Be=new Date().getTime();setTimeout(function(){new Date().getTime()-Be>80&&(gt(),y==le.zdf&&(le.W=y.width,le.H=y.height),setTimeout(function(){y.dispatchEvent("resize"),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&he&&(t=="full"||t=="tag")&&he.update()},100))},100),!e.OPTIMIZE&&(Ot||!le.OPTIMIZE)&&he&&(t=="full"||t=="tag")&&he.update()}}setTimeout(function(){y&&y.dispatchEvent("orientation")},250);var Ae=["ttf","otf","woff2","woff","fnt"];g[We]=function(){var vt=g.now(),Be=Math.floor(vt/1e3%10),it=(it=vt.toString()).substring(0,it.length-2)+(10+Be-3)%10+it.substring(it.length-1),vt=Math.floor(vt/1e4%10);return it=(it=it.substring(0,it.length-1)+(vt+1)%10).substring(0,it.length-3)+(Be+vt+3)%10+it.substring(it.length-2),Number(it)},this.loadAssets=function(Be,it,vt,et,wt,xt,_t,lt,Dt,Pt,It,Vt){if(n(Be))return Kt();if(n(Be.src)){var Gt="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum",jt;if(jt=yt(y.loadAssets,arguments,Gt))return jt}n(it)||(le.PATH=it);var sn=v(wt||null);if(!n(vt)&&vt.type=="ProgressBar"&&n(et)&&(et=!0),n(et)&&(et=!0),Array.isArray(Be)||(Be=[Be]),Be.length==0)return Kt();function Kt(){var qt=new e.Queue;return qt.isLoading=!1,qt.loadAssetsCount=0,setTimeout(function(){qt.dispatchEvent("complete"),y.dispatchEvent("complete")},10),qt}n(wt)&&(wt=0),n(xt)&&(xt=sn=="s"?8:8e3),n(_t)&&(_t=!1),n(lt)&&(lt="anonymous"),n(Pt)&&(Pt=!1),n(It)&&(It=Y),n(Vt)&&(Vt=y.maxNum);var Lt=!1,Qt=[],rt,bt,Rt,Mt,Nt,kt=/\.([^.]+)$/i,Bt=[],Wt=[],Zt=[],en=0,Ht=!0;for(Rt=0;Rt<Be.length;Rt++){if(rt=Be[Rt],rt.assets){var vn=[];for(Be.splice(Rt,1),Array.isArray(rt.assets)||(rt.assets=[rt.assets]),Mt=0;Mt<rt.assets.length;Mt++){var Jt=rt.assets[Mt];if(Jt.split){var Sn=Jt.split("?");bt=Sn[0].match(kt)}bt&&Ae.indexOf(bt[1])>=0?Bt.push(Jt):Jt.match&&Jt.match(/fonts\.googleapis\.com/i)?Wt.push(Jt):Jt.font?(Jt.src?Jt.src=rt.path+Jt.src:Jt.font=rt.path+Jt.font,Bt.push(Jt)):e.assetIDs[Jt]?vn.push({id:rt.path+Jt,src:rt.path+Jt,path:null,loadTimeout:rt.loadTimeout,maxNum:rt.maxNum,noCORSonImage:rt.noCORSonImage}):vn.push({id:Jt,src:Jt,path:rt.path,loadTimeout:rt.loadTimeout,maxNum:rt.maxNum,noCORSonImage:rt.noCORSonImage})}for(var $e=vn.length-1;$e>=0;$e--)Be.splice(Rt,0,vn[$e]);if(rt=vn[0],rt==null)continue}if(rt.constructor=={}.constructor){var Tt=0;for(var Xt in rt)Tt++;Tt==1&&rt.src&&!rt.src.match(/fonts\.googleapis\.com/i)&&(rt=rt.src)}var $t;if(rt.constructor=={}.constructor)if(rt.audioSprite){Nt=e.copy(rt),rt=Nt.src,Cn(rt);var cn=[],an;for(Mt=0;Mt<Nt.audioSprite.length;Mt++)an=Nt.audioSprite[Mt],cn.push({id:an[0],startTime:Math.round(an[1]*1e3),duration:Math.round((an[2]-an[1])*1e3)});delete Nt.audioSprite,Nt.data={audioSprite:cn},Qt.push(Nt)}else if(rt.data&&rt.data.audioSprite)Nt=e.copy(rt),rt=Nt.src,Cn(rt),Qt.push(Nt);else if(rt.id){if(rt.path){var zt,St;if(rt.path.match(/http/i))rt.src=rt.path+rt.src;else if(rt.path.match(/^\//))zt=le.location.href,St=zt.match(/(.*?)([^/])\/[^/]/),zt=St[1]+St[2],rt.src=zt+rt.path+rt.src;else{var Ft=le.location.pathname;zt=le.location.href;var hn=zt.split(Ft)[0]+Ft;St=hn.match(/(.*)\//),rt.src=St[1]+"/"+rt.path+rt.src}delete rt.path}if(rt.noCORSonImage){var pn=new Image;Zt.push(pn),pn.src=rt.src,pn.id=rt.id;var mn;pn.onload=function(qt){var ln=qt.currentTarget,on=e.assets[ln.id]=new e.Bitmap({image:ln,style:!1}).expand(0);mn=new je.Event("assetload"),on&&typeof on!="string"&&typeof on!="number"&&(on.file=ln.id,on.src=ln.src),mn.asset=on,rn.dispatchEvent(mn),Pt||(mn=new je.Event("assetload"),mn.asset=on,y.dispatchEvent(mn)),rn.loadAssetsCount--,rn.loadAssetsCount==0&&In()}}else{e.assetIDs[rt.id]=rt.src;var bn=rt.maxNum;n(bn)&&(bn=Vt);var ar=rt.type,Jn=n(rt.loadTimeout)?xt:rt.loadTimeout;rt=rt.src,Cn(rt),$t={src:rt,loadTimeout:Jn*(sn=="s"?1e3:1),data:bn,type:ar},n(Dt)||($t.type=Dt),Qt.push($t)}}else rt.src&&rt.src.match(/fonts\.googleapis\.com/i)?Wt.push(rt):Bt.push(rt);else{var tr=Cn(rt);tr&&Ae.indexOf(tr[1])>=0?(Bt.push(rt),en--):rt.match(/fonts\.googleapis\.com/i)?(Wt.push(rt),en--):($t={src:rt,loadTimeout:xt*(sn=="s"?1e3:1),data:Vt},n(Dt)||($t.type=Dt),Qt.push($t))}if(Lt&&Ht){var pr=document.createElement("audio");pr.setAttribute("src",(!n(it)&&!rt.match(/^http:\/\/|https:\/\//i)?it:"")+rt),document.body.appendChild(pr),Ht=!1}}function Cn(qt){if(bt=null,qt.split){var ln=qt.split("?");bt=ln[0].match(kt),bt&&je.Sound.SUPPORTED_EXTENSIONS.indexOf(bt[1])>=0&&(Lt=!0)}return en++,bt}y.loadAssetsCount++,y.isLoading=!0;var rn=new e.Queue;rn.isLoading=!0,rn.loadAssetsCount=0,!n(vt)&&vt.show&&(vt.zimActiveLoader=rn,vt.show());var tn;if(Bt.length>0){var or=[],An,nn;for(Rt=0;Rt<Bt.length;Rt++){if(nn=Bt[Rt],nn.font&&!nn.src){nn.src=nn.font,nn.font=nn.font.split(".")[0];var nr=nn.font.split("/");nn.font=nr[nr.length-1]}typeof nn=="string"&&(nn={font:nn.split(".")[0],src:nn}),An={src:"url("+(nn.src.match(/\//i)?"":it||"")+nn.src+")"+(nn.type?" format('"+nn.type+"')":""),family:nn.font},nn.weight&&(An.weight=nn.weight),nn.style&&(An.style=nn.style),or.push(An)}tn=new je.FontLoader({src:or},!0),tn.on("complete",qn),tn.on("error",qn),tn.load(),rn.loadAssetsCount++}if(Wt.length>0)for(Rt=0;Rt<Wt.length;Rt++)nn=Wt[Rt],typeof nn=="string"&&(nn={src:nn}),An={src:nn.src,type:"fontcss"},rn.loadAssetsCount++,tn=new je.FontLoader(An,!0),tn.on("complete",qn),tn.on("error",qn),tn.load();function qn(){rn.loadAssetsCount--,rn.loadAssetsCount==0&&In()}if(Zt.length>0)for(Rt=0;Rt<Zt.length;Rt++)rn.loadAssetsCount++;function Bn(qt,ln){rn.loadAssetsCount--;var on=ln.item,xn=e.assets[on.id]=qt;xn.src=on.src,xn.file=on.id,xn.item=on,xn.svg=ln.svg;var Ln=new je.Event("assetload");Ln.item=on,Ln.asset=xn,xn.type="SVG",rn.dispatchEvent(Ln),Pt||(Ln=new je.Event("assetload"),Ln.item=on,Ln.asset=xn,y.dispatchEvent(Ln)),rn.loadAssetsCount==0&&In()}var Un=Date.now(),Yn=new je.Event("complete");if(en>0){rn.loadAssetsCount++;var Pn=rn.preload=y.preload=new je.LoadQueue(et,it,lt);It!=1&&Pn.setMaxConnections(It),Lt&&Pn.installPlugin(je.Sound),Pn.on("progress",function(qt){rn.dispatchEvent(qt),Pt||y.dispatchEvent(qt)}),Pn.on("error",function(qt){rn.dispatchEvent(qt),Pt||y.dispatchEvent(qt)}),Pn.on("fileload",function(qt){if(!qt.result||(qt.result.nodeName=="IMG"||qt.result.nodeName=="SVG")&&!qt.rawResult&&et){var ln=new je.Event("error");ln=new je.Event("error"),ln.item=qt.item,rn.dispatchEvent(ln),ln=new je.Event("error"),ln.item=qt.item,y.dispatchEvent(ln)}else{var on=qt.item,xn=qt.item.type,Ln=on.id.match(kt),_n;if(xn&&xn=="sound"){var $n=[];if(on.data&&on.data.audioSprite)for(var Xn=0;Xn<on.data.audioSprite.length;Xn++)$n.push(on.data.audioSprite[Xn].id);else $n.push(on.id);for(Xn=0;Xn<$n.length;Xn++)~function(){var Nn=$n[Xn],gr=qt.item.src,vr=qt.item;_n=e.assets[Nn]={type:"sound",path:it,id:Nn,file:Nn,src:gr,item:vr,dispose:function(){delete e.assets[Nn],_n=null},play:function(Qn,lr,yr,mr,xr,wr,yn){var jn="volume, loop, loopCount, pan, offset, delay, interrupt",zn;if(zn=yt(e.assets[Nn].play,arguments,jn))return zn;var Tn={volume:Qn,loop:lr,loopCount:yr,pan:mr,offset:xr,delay:wr,interrupt:yn},Mn=v(Tn.offset,null,30);Mn=="s"&&(Tn.offset&&(Tn.offset*=1e3),Tn.delay&&(Tn.delay*=1e3)),Tn.loop===!0&&(Tn.loop=-1),Tn.loopCount&&(Tn.loop=Tn.loopCount,delete Tn.loopCount);var kn=je.Sound.play(Nn,Tn);return kn.getStage=function(){return he},kn.dispose=function(){kn.destroy()},kn}}}()}else if(xn=="image")qt.result.width&&(_n=e.assets[on.id]=new e.Bitmap({image:qt.result,width:qt.result.width,height:qt.result.height,style:!1}),on.avoidCORS&&_n.expand(0));else if(xn=="svg"){rn.loadAssetsCount++,e.svgToBitmap(qt.result,Bn,null,null,{svg:qt.result,item:on,type:xn,ext:Ln});return}else _n=e.assets[on.id]=qt.result;_n&&typeof _n!="string"&&typeof _n!="number"&&xn!="json"&&xn!="xml"&&(_n.file=qt.item.id,_n.src=qt.item.src,_n.item=qt.item),ln=new je.Event("assetload"),ln.item=on,ln.asset=_n,rn.dispatchEvent(ln),Pt||(ln=new je.Event("assetload"),ln.item=on,ln.asset=_n,y.dispatchEvent(ln))}}),y.preloadEvent=Pn.on("complete",function(qt){Yn=qt,rn.loadAssetsCount--,rn.loadAssetsCount==0&&In()});try{Pn.loadManifest(Qt)}catch(qt){+function(){}()}}function In(){var qt=Date.now();wt=Math.max(0,wt-(qt-Un)),setTimeout(function(){y.loadAssetsCount--,y.loadAssetsCount<=0&&(y.isLoading=!1),rn.isLoading=!1,rn.dispatchEvent(Yn),!n(vt)&&vt.show&&vt.hide(),Pt||y.dispatchEvent(Yn)},wt*(sn=="s"?1e3:1))}return rn},this.ac=function(Be,it,vt){vt?(vt.commands||(vt.commands=[]),vt.commands.push([Be,it,vt])):(it[0].commands||(it[0].commands=[]),it[0].commands.push([Be,it]))},e.asset=this.asset=function(Be,it,vt,et,wt){if(!n(Be)){Be=ct(Be);var xt=e.assetIDs[Be];if(xt&&(Be=xt),e.assets[Be]&&(!e.assets[Be].type||e.assets[Be].type&&e.assets[Be].type.substr(0,2)!="AC"))return e.assets[Be];if(le.PATH!=null&&(e.PATH=le.PATH),wt){var _t;return y.loadFailObj=="circles"?_t=y.makeCircles(14):_t=y.loadFailObj,_t&&(_t.type="EmptyAsset",_t.id=Be,_t.play=function(){if(At)return ut("Frame - asset("+Be+") not found"),{}}),_t}else{var lt=new e.Container(it,vt);e.assets[Be]=lt,it&&vt?lt.type="ACWD":lt.type="AC";var Dt=y.loadAssets({assets:Be,path:Be.split("/").length==1?e.PATH:null,queueOnly:!0,maxNum:et}),Pt=Be.split(".");return je.Sound.SUPPORTED_EXTENSIONS.indexOf(Pt[Pt.length-1])>=0&&(lt.play=function(){return lt.playParams=arguments,lt.proxy=new je.EventDispatcher,Object.defineProperty(lt.proxy,"volume",{get:function(){return lt.sound?lt.sound.volume:null},set:function(It){lt.volume=It,lt.sound&&(lt.sound.volume=It)}}),Object.defineProperty(lt.proxy,"pan",{get:function(){return lt.sound?lt.sound.pan:null},set:function(It){lt.pan=It,lt.sound&&(lt.sound.pan=It)}}),lt.proxy}),Dt.on("complete",function(){Be.id?Be=Be.id:Be.src&&(Be=Be.src);var It=y.asset(Be,null,null,null,!0),Vt=Be.split("."),Gt;if(je.Sound.SUPPORTED_EXTENSIONS.indexOf(Vt[Vt.length-1])>=0)lt.play=It.play,lt.type="Sound",lt.src=It.src,lt.item=It.item,lt.playParams&&(lt.sound=lt.play.apply(null,lt.playParams),lt.volume!=null&&(lt.sound.volume=lt.volume),lt.pan!=null&&(lt.sound.pan=lt.pan),lt.sound.on("complete",function(){lt.proxy.dispatchEvent("complete")}));else if(It.type=="Bitmap"||It.type=="Image"||It.type=="Pic"){if(It.type=="Bitmap"?(It.addTo(lt),lt.bitmap=It,lt.image=It.image,lt.id=It.id,lt.item=It.item):(lt.bitmap=It.getChildAt(0).clone(),lt.bitmap.addTo(lt),lt.image=lt.bitmap.image,lt.id=lt.bitmap.id,lt.item=lt.bitmap.item),lt.mouseChildren=!1,lt.type="Image",lt.commands)for(Gt=0;Gt<lt.commands.length;Gt++)lt.commands[Gt][2]?lt[lt.commands[Gt][0]].apply(lt,lt.commands[Gt][1]):e[lt.commands[Gt][0]].apply(lt,lt.commands[Gt][1]);lt.commands=null,lt.stage&&lt.stage.update()}else if(It.type=="EmptyAsset"){if(It.addTo(lt),lt.mouseChildren=!1,lt.type="EmptyAsset",lt.commands)for(Gt=0;Gt<lt.commands.length;Gt++)lt.commands[Gt][2]?lt[lt.commands[Gt][0]].apply(lt,lt.commands[Gt][1]):e[lt.commands[Gt][0]].apply(lt,lt.commands[Gt][1]);lt.commands=null,lt.stage&&lt.stage.update()}else if(It.type=="SVG"){if(It.addTo(lt),lt.mouseChildren=!1,lt.type="SVG",lt.bitmap=It,lt.svg=It.svg,lt.commands)for(Gt=0;Gt<lt.commands.length;Gt++)lt.commands[Gt][2]?lt[lt.commands[Gt][0]].apply(lt,lt.commands[Gt][1]):e[lt.commands[Gt][0]].apply(lt,lt.commands[Gt][1]);lt.commands=null,lt.stage&&lt.stage.update()}e.assets[Be]=lt,lt.dispatchEvent("assetLoad"),lt.dispatchEvent("complete")}),Dt.on("error",function(It){var Vt=new je.Event("error");Vt.id=It.id,Vt.item=It.item,lt.dispatchEvent(Vt)}),lt}}},e.asset.getIDs=function(){var Be=[];for(var it in e.assetIDs)Be.push(it);return Be},e.image=function(Be,it,vt,et,wt){return Be.match(/^htt/i)&&(Be="https://cors.zimjs.com/"+Be),e.asset(Be,it,vt,et,wt)},e.zimObjectIDs={},e.object=this.object=function(Be){return e.zimObjectIDs[Be]},e.object.getNames=function(){var Be=[];for(var it in e.zimObjectIDs)Be.push(it);return Be},le.zns||(le.asset=this.asset,le.image=e.image,le.object=this.object),this.setDefault=function(){return le.zimDefaultFrame=le.zdf=le.F=y,le.S=he,le.W=he.width,le.H=he.height,y},Object.defineProperty(y,"isDefault",{get:function(){return le.zdf==y},set:function(){ut("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(y,"stage",{get:function(){return he},set:function(){ut("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(y,"width",{get:function(){return ne},set:function(){ut("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(y,"height",{get:function(){return ue},set:function(){ut("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(Be){o=Be,n(Be)?y.canvas.style.backgroundColor="default":(y.canvas.style.backgroundColor=o,!n(o)&&_&&he.setClearColor(e.convertColor(o)))}});var Le;Object.defineProperty(this,"outerColor",{get:function(){return Le},set:function(Be){Le=Be,dr("body").css({backgroundColor:Le})}}),Object.defineProperty(y,"allowDefault",{get:function(){return V},set:function(Be){Be?(he.preventSelection=!1,document.body.style.overflow="visible",y.zil&&(le.removeEventListener("keydown",y.zil[0]),le.removeEventListener("wheel",y.zil[1]),le.removeEventListener("DOMMouseScroll",y.zil[2]),y.zil=null)):(he.preventSelection=!0,he.enableDOMEvents(!0),(t=="full"||t=="fit"||t=="fill")&&(document.body.style.overflow="hidden"),n(y.zil)&&(y.zil=Fr())),V=Be,he.__touch&&(he.__touch.preventDefault=!V)}});var De;Object.defineProperty(y,"cursors",{get:function(){return De},set:function(Be){De=Be&&Be.constructor=={}.constructor?Be:null,De?ft(De):mt()}}),y.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],y.cursorList=new e.Dictionary(!0);function ft(Be){e.loop(Be,function(xt,_t){_t.noMouse&&_t.noMouse()}),y.pme&&mt(),e.loop(y.cursorList,function(xt){!xt._cursor&&xt.cursor&&Be[xt.cursor]&&(xt._cursor=xt.cursor,y.cursorList.add(xt,xt._cursor),xt.cursor="none")}),Be.default&&(document.body.style.cursor="none"),y.pme=y.on("pointermove",function(xt){if(y.cursorObj){var _t=y.cursorObj,lt=y.stage.getObjectUnderPoint(y.mouseX,y.mouseY,1);lt&&(lt._cursor||lt.cursor)?wt(lt):Be.default?(Ze("none"),y.cursorObj=Be.default,Be.default.addTo(y.stage)):Ze(),y.cursorObj!=_t&&_t.removeFrom&&_t.removeFrom(),y.cursorObj.x=y.mouseX,y.cursorObj.y=y.mouseY,y.cursorObj.top(),e.Ticker.isUpdating(y.stage)||y.stage.update()}});var it=!1;if(y.mouseX!=0&&y.mouseY!=0){it=!0;var vt=y.stage.getObjectUnderPoint(y.mouseX,y.mouseY,1);vt&&(vt._cursor||vt.cursor)?(Hn("setting"),wt(vt)):Be.default?(Ze("none"),Be.default.x=y.mouseX,Be.default.y=y.mouseY,y.cursorObj=Be.default,y.cursorObj.mouseChildren=!1,y.cursorObj.mouseEnabled=!1,Be.default.addTo(y.stage)):Ze(),y.stage.update()}function et(xt){Ze("none"),y.cursorObj=xt,y.cursorObj.x=y.mouseX,y.cursorObj.y=y.mouseY,y.cursorObj.mouseChildren=!1,y.cursorObj.mouseEnabled=!1,y.cursorObj.addTo(y.stage)}y.pee=y.on("pointerenter",function(xt){if(it){it=!1;return}setTimeout(function(){var _t=y.stage.getObjectUnderPoint(y.mouseX,y.mouseY,1);_t&&(_t._cursor||_t.cursor)||(Be.default?et(Be.default):Ze(),y.stage.update())},50)}),y.smo=y.stage.on("mouseover",function(xt){wt(xt.target)});function wt(xt){var _t=y.cursorsExclude;if(_t&&(Array.isArray(_t)||(_t=[_t]),_t.includes(xt))){xt.cursor=y.cursorTypes.includes(xt._cursor)?xt._cursor:"default";return}if(xt._cursor&&Be[xt._cursor]){if(Be[xt._cursor]==y.cursorObj)return;y.cursorObj&&y.cursorObj.removeFrom(),et(Be[xt._cursor])}else if(Be.default&&(!xt.cursor||!y.cursorTypes.includes(xt.cursor))){if(Be.default==y.cursorObj)return;y.cursorObj&&y.cursorObj.removeFrom(),et(Be.default)}else y.cursorTypes.includes(xt.cursor)||(xt.cursor="default"),y.cursorObj&&y.cursorObj.removeFrom();y.stage.update()}y.ple=y.on("pointerdown",function(xt){y.cursorObj&&e.interval(.001,function(){y.cursorObj&&y.cursorObj.top(),y.stage.update()},2,!0)}),y.pde=y.on("pointerleave",function(xt){it=!1,y.cursorObj&&y.cursorObj.removeFrom(),y.stage.update()}),y.smu=y.stage.on("mouseout",function(xt){y.cursorObj&&y.cursorObj.removeFrom(),Be.default?et(Be.default):Ze()})}function mt(){y.pme&&y.off("pointermove",y.pme),y.pee&&y.off("pointerenter",y.pee),y.ple&&y.off("pointerdown",y.ple),y.pde&&y.off("pointerleave",y.pde),y.smo&&y.stage.off("mouseover",y.smo),y.smu&&y.stage.off("mouseout",y.smu),y.pme=y.pee=y.ple=y.pde=y.smo=y.smu=null,e.loop(y.cursorList,function(Be,it){it!==!0&&(Be.cursor=it),Be._cursor=null}),e.loop(y.cursorList,function(Be){y.cursorList.add(Be,!0)}),y.cursorObj&&(y.cursorObj.dispose(),y.cursorObj=null,y.stage.update()),Ze()}function Ze(Be){Be!="none"&&(y.cursorObj=null),y.canvas.parentElement&&(y.canvas.parentElement.style.cursor=Be||"default")}function dt(Be){y.dispatchEvent(Be)}le.addEventListener("contextmenu",dt,!1);var Ee=new je.Event("keydown");this.eventRemove=Ee.remove;function ot(Be){Be.remove=y.eventRemove,y.altKey=Be.altKey,y.ctrlKey=Be.ctrlKey,y.metaKey=Be.metaKey,y.shiftKey=Be.shiftKey,y.dispatchEvent(Be)}le.addEventListener("keydown",ot);function Ve(Be){y.altKey=Be.altKey,y.ctrlKey=Be.ctrlKey,y.metaKey=Be.metaKey,y.shiftKey=Be.shiftKey,Be.remove=y.eventRemove,y.dispatchEvent(Be)}le.addEventListener("keyup",Ve);function Ye(Be){y.dispatchEvent(Be)}le.addEventListener("wheel",Ye);function Ke(Be){Be.remove=y.eventRemove,y.dispatchEvent(Be)}U&&le.DeviceMotionEvent&&le.addEventListener("devicemotion",Ke);function ze(Be){Be.remove=y.eventRemove;var it=360-Be.alpha;Math.abs(it-tt)>180-45&&Math.abs(it-tt)<180+45&&(ht=ht==0?180:0),tt=it,Be.rotation={x:Be.beta,y:Be.gamma,z:(it+ht)%360},y.dispatchEvent(Be)}if(U&&le.DeviceOrientationEvent){var tt=0,ht=0;le.addEventListener("deviceorientation",ze)}this.isFullscreen=!!document.fullscreenElement,this.htmlobc=dr("html").css("backgroundColor"),this.fullscreen=function(Be){if(n(Be)&&(Be=!0),Be){if(document.fullscreenElement)return;var it=y.canvas.parent?y.canvas.parent:document.body;it.requestFullscreen?it.requestFullscreen():it.webkitRequestFullscreen?it.webkitRequestFullscreen():it.mozRequestFullscreen?it.mozRequestFullscreen():it.msRequestFullscreen&&it.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=Be},document.addEventListener("fullscreenchange",function(){y.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(dr("html").css("backgroundColor",y.color),y.dispatchEvent("fullscreenenter")):(dr("html").css("backgroundColor",y.htmlobc?y.htmlobc:"transparent"),y.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(Be,it){if(t!="full"){n(Be)&&(Be=ne),n(it)&&(it=ue),wn(R)&&wn(R).parentNode.removeChild(wn(R)),ne=Be,ue=it;for(var vt=[],et=0;et<y.stage.numChildren;et++)vt.push(y.stage.getChildAt(et));for(Qe(),nt(),et=0;et<vt.length;et++)y.stage.addChild(vt[et])}},this.follow=function(Be,it,vt,et,wt,xt,_t,lt,Dt,Pt,It,Vt,Gt,jt){var sn="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag",Kt;if(Kt=yt(y.follow,arguments,sn))return Kt;if(y.followObj=null,y.followTicker&&e.Ticker.remove(y.followTicker),n(Be))return;Be.dirX=Be.dirY=0,y.followObj=Be,Be.followDampX=null,Be.followDampY=null,n(it)&&(it=new e.Boundary(0,0,y.stage.width,y.stage.height)),y.followBoundary=it,n(vt)&&(vt=.05),n(et)&&(et=vt),n(wt)&&(wt=0),n(xt)&&(xt=0),n(_t)&&(_t=0),n(lt)&&(lt=0),n(Dt)&&(Dt=.02),n(Pt)&&(Pt=Dt),n(It)&&(It=!0),n(Vt)&&(Vt=!0),n(Gt)&&(Gt=!1),n(jt)&&(jt=!1),Be.parent?Lt():Be.on("added",Lt);function Lt(){var Qt=Be.parent;y.frameBorderLock=Gt,It&&(y.followDampX=new e.Damp(Qt.x,vt),y.offsetDampX=new e.Damp(it.x+wt+(it.width-wt-xt)/2,Dt)),Vt&&(y.followDampY=new e.Damp(Qt.y,et),y.offsetDampY=new e.Damp(it.y+_t+(it.height-_t-lt)/2,Pt)),y.followTicker=e.Ticker.add(function(){var rt=y.followBoundary;if(It){var bt=rt.x+wt+(rt.width-wt-xt)/2;y.followOffsetX=[jt?rt.x+rt.width-wt:bt,bt,jt?rt.x+wt:bt],y.followObj&&(Qt.x=y.followDampX.convert(y.offsetDampX.convert(y.followOffsetX[Be.motionController?Be.motionController.dirX+1:1])-Be.x))}if(Vt){var Rt=rt.y+_t+(rt.height-_t-lt)/2;y.followOffsetY=[jt?rt.y+rt.height-lt:Rt,Rt,jt?rt.y+_t:Rt],y.followObj&&(Qt.y=y.followDampY.convert(y.offsetDampY.convert(y.followOffsetY[Be.motionController?Be.motionController.dirY+1:1])-Be.y))}y.frameBorderLock&&(Qt.x>y.followBoundary.x&&(Qt.x=y.followBoundary.x),Qt.y>y.followBoundary.y&&(Qt.y=y.followBoundary.y),Qt.x<y.followBoundary.x+y.followBoundary.width-Qt.width&&(Qt.x=y.followBoundary.x+y.followBoundary.width-Qt.width),Qt.y<y.followBoundary.y+y.followBoundary.height-Qt.height&&(Qt.y=y.followBoundary.y+y.followBoundary.height-Qt.height))})}return Be},n(e.blurCheck)&&e.setBlurDetect(),this.keyboardMessage=function(Be,it,Pt,et,wt){var xt="color, backgroundColor, message, response, percent",_t;if(_t=yt(y.keyboardMessage,arguments,xt))return _t;n(Be)&&(Be=e.yellow),n(it)&&(it="black"),n(Pt)&&(Pt="PRESS SCREEN FOR KEYBOARD CONTROL"),n(et)&&(et="YOU HAVE KEYBOARD CONTROL"),n(wt)&&(wt=80);function lt(){try{return window.self!==window.top}catch(Vt){return!0}}var Dt=lt();Dt&&(y.canvas.style.pointerEvents="none");var Pt=new e.Label({text:Pt,size:40,color:Be,backgroundColor:it,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(y.stage,wt).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM);document.addEventListener("mousedown",It),document.addEventListener("pointerdown",It);function It(){Dt&&(y.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",It),document.removeEventListener("pointerdown",It),Pt&&(Pt.text=et,Pt.animate({props:{alpha:0},wait:1,call:()=>{Pt.dispose(),Pt=null}}),y.stage.update())}return Pt},this.dispose=function(){y.zil&&y.zil.length&&(le.removeEventListener("keydown",y.zil[0]),le.removeEventListener("wheel",y.zil[1]),le.removeEventListener("DOMMouseScroll",y.zil[2])),Te&&Te.removeAllEventListeners(),ie&&le.removeEventListener("resize",ie),le.removeEventListener("resize",Ge),le.removeEventListener("contextmenu",dt),le.removeEventListener("keydown",ot),le.removeEventListener("keyup",Ve),le.removeEventListener("wheel",Ye),le.removeEventListener("devicemotion",Ke),le.removeEventListener("deviceorientation",ze),le.removeEventListener("mousedown",Z,!0),le.removeEventListener("mousemove",Z,!0),le.removeEventListener("mouseup",Z),V||(document.body.style.overflow="auto"),Be(he);function Be(it){if(it.dispose)it.dispose();else{if(it.removeAllEventListeners(),it.numChildren)for(var vt=it.numChildren-1;vt>=0;vt--)Be(it.getChildAt(vt));it.parent&&it.parent.removeChild(it)}it=null}return wn(R)&&wn(R).parentNode.removeChild(wn(R)),y==e.tickerFrame&&(e.tickerFrame=null),y===le.zdf&&(le.zdf=le.S=le.W=le.H=null),he=null,y=null,!0},this.makeCircles=function(Be,it){n(Be)&&(Be=100);var vt=[e.orange,e.green,e.pink,e.blue,e.brown,e.dark],et,wt;if(it)for(et=new e.Container({style:!1}),et.radius=Be,wt=0;wt<vt.length;wt++)et.addChild(new e.Circle(et.radius/vt.length*(vt.length-wt),vt[wt],null,null,null,null,null,null,!1));else{et=new e.Shape({style:!1});var xt=et.graphics;for(et.radius=Be,wt=0;wt<vt.length;wt++)xt.f(vt[wt]).dc(0,0,et.radius/vt.length*(vt.length-wt));et.setBounds(-et.radius,-et.radius,et.radius*2,et.radius*2)}return et},this.madeWith=function(Be,it,vt,et,wt,xt,_t){var lt="color, text, edges, box, slats, borderColor, borderWidth",Dt;if(Dt=yt(y.madeWith,arguments,lt))return Dt;n(Be)&&(Be=e.dark),n(it)&&(it="Made with ZIM");var Pt=new e.Container,It=Pt.icon=y.makeIcon(vt,et,wt,xt,_t).sca(.5).alp(.92).hov(1).addTo(Pt).tap(function(){It.alp(.92),It.stage.update(),sr("https://zimjs.com","_blank")});return Pt.label=new e.Label(it,16,null,Be).sca(.7).pos(0,-19,e.CENTER,e.BOTTOM,Pt),Pt},this.makeIcon=function(Be,it,vt,et,wt){var xt="edges, box, slats, borderColor, borderWidth",_t;if(_t=yt(y.makeIcon,arguments,xt))return _t;var lt=new e.Container(-20,-13,102,120).reg(-20,-13);n(Be)&&(Be=e.light),n(it)&&(it=e.dark),vt===!0&&(vt=[e.silver,e.silver,e.silver,e.silver,e.silver]),new e.Rectangle(lt.width,lt.height,it,et,wt).loc(-20,-13,lt);var Dt=[[vt?vt[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[vt?vt[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[vt?vt[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[vt?vt[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[vt?vt[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[Be,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return e.loop(Dt,function(Pt){var It=new e.Shape().addTo(lt);It.graphics.f(Pt[0]).p(Pt[1]),It.setTransform(Pt[2],Pt[3])}),lt.mouseChildren=!1,lt},this.makeAbstract=function(Be){n(Be)&&(Be="black");var it=[[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],vt=new e.Rectangle(200,200);e.loop(it,function(wt){var xt=new e.Shape().f(wt[2]).p(wt[3]);xt.setTransform(wt[0]+20,wt[1]+27),xt.addTo(vt)},!0);var et=new e.Container;return vt.sca(.4).addTo(et),et.mouseChildren=!1,et},this.makeCat=function(Be){n(Be)&&(Be=246);var it=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],vt=new e.Container(157.5,246);e.loop(it,function(wt){var xt=new e.Shape().f(wt[2]).s(wt[3]).ss(wt[4]?wt[4][0]:null,wt[4]?wt[4][1]:null,wt[4]?wt[4][2]:null).p(wt[5]);xt.setTransform(wt[0],wt[1]),xt.addTo(vt)},!0);var et=new e.Container;return vt.sca(Be/246).addTo(et).mov(0,-.4),L&&et.cache(),et.mouseChildren=!1,et}},e.extend(e.Frame,je.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},e.extend(e.Queue,je.EventDispatcher,null,"cjsEventDispatcher"),e.Pic=function(t,r,i,o,l,f,d){var p="file, width, height, noCors, style, group, inherit",w;if(w=yt(e.Pic,arguments,p,this))return w;qe("83.03"),this.group=f;var k=l===!1?{}:e.getStyle("Pic",this.group,d);if(n(t)&&(t=k.file!=null?k.file:null),n(o)&&(o=k.noCors!=null?k.noCors:!1),n(t)){At&&ut("ZIM Pic - needs a file");return}this.zimContainer_constructor(r,i);var x=this,T=t;t=x.file=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var S=o?e.image(t):e.asset(t);x.mouseChildren=!1,S.type=="Bitmap"||S.type=="Image"?(S.type=="Bitmap"?x.bitmap=S.clone().addTo(x):x.bitmap=S.getChildAt(0).clone().addTo(x),x.id=S.id,x.image=x.bitmap.image,x.src=x.bitmap.src,x.item=x.bitmap.item,x.setBounds(null),x.type="Pic",setTimeout(function(){x.dispatchEvent("ready"),x.dispatchEvent("complete")},20)):S.on("complete",function(){if(x.bitmap=S.getChildAt(0).clone().addTo(x),x.id=S.id,x.setBounds(null),x.type="Pic",x.commands)for(var b=0;b<x.commands.length;b++)x.commands[b][2]?x[x.commands[b][0]].apply(x,x.commands[b][1]):e[x.commands[b][0]].apply(x,x.commands[b][1]);x.image=x.bitmap.image,x.src=x.bitmap.src,x.item=x.bitmap.item,x.commands=null,x.dispatchEvent("ready"),x.dispatchEvent("complete"),x.stage&&x.stage.update()}),x.keyOut=function(b,E,R){return x.type=="AC"&&le.zdf?(le.zdf.ac("keyOut",arguments,x),x):(x.bitmap&&x.bitmap.keyOut(b,E,R),x.stage&&x.stage.update(),x)},e.styleTransforms(this,k),x.clone=function(b){return this.cloneProps(new e.Pic(b?t:T,r,i,o,l,this.group,d))}},e.extend(e.Pic,e.Container,["clone"],"zimContainer",!1),e.Aud=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",b;if(b=yt(e.Aud,arguments,S,this))return b;qe("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=x;var E=k===!1?{}:e.getStyle(this.type,this.group,T);if(n(t)&&(t=E.file!=null?E.file:null),n(t)){At&&ut("ZIM Sound - needs a file");return}n(r)&&(r=E.volume!=null?E.volume:1),n(i)&&(i=E.loop!=null?E.loop:!1),n(o)&&(o=E.loopCount!=null?E.loopCount:null),n(l)&&(l=E.pan!=null?E.pan:0),n(f)&&(f=E.offset!=null?E.offset:0),n(d)&&(d=E.delay!=null?E.delay:0),n(p)&&(p=E.interrupt!=null?E.interrupt:"none"),n(w)&&(w=E.maxNum!=null?E.maxNum:null);var R=this;t=R.file=e.Pick.choose(t);var C=R.sound=e.asset(t,null,null,w);C.type=="AC"?C.on("complete",function(){R.src=C.src,R.item=C.item,R.dispatchEvent("ready"),R.dispatchEvent("complete")}):setTimeout(function(){R.src=C.src,R.item=C.item,R.dispatchEvent("ready"),R.dispatchEvent("complete")},20),R.volume=r,R.loop=i,R.loopCount=o,R.pan=l,R.offset=f,R.delay=d,R.interrupt=p,R.maxNum=w,R.play=function(O,I,_,P,F,K,V){var D="volume, loop, loopCount, pan, offset, delay, interrupt",U;return(U=yt(R.play,arguments,D))?U:(n(O)&&(O=R.volume),n(I)&&(I=R.loop),n(_)&&(_=R.loopCount),n(P)&&(P=R.pan),n(F)&&(F=R.offset),n(K)&&(K=R.delay),n(V)&&(V=R.interrupt),R.sound.play(O,I,_,P,F,K,V))},R.dispose=function(){return R.sound&&R.sound.dispose(),R.sound=null,!0}},e.extend(e.Aud,je.EventDispatcher,null,"cjsEventDispatcher"),e.Vid=function(t,r,i,o,l,f,d,p,w,k,x,T){var S="file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",b;if(b=yt(e.Vid,arguments,S,this))return b;qe("83.07"),this.group=x;var E=k===!1?{}:e.getStyle("Vid",this.group,T);if(n(t)&&(t=E.file!=null?E.file:null),n(t)){At&&ut("ZIM Vid - needs a file");return}n(r)&&(r=E.width!=null?E.width:null),n(i)&&(i=E.height!=null?E.height:null),n(o)&&(o="fit"),n(f)&&(f=E.loop!=null?E.loop:!1),n(l)&&(l=E.volume!=null?E.volume:1),n(d)&&(d=E.align!=null?E.align:"center"),n(p)&&(p=E.valign!=null?E.valign:"center"),n(w)&&(w=E.type!=null?E.type:"video/mp4"),this.zimContainer_constructor(r,i),r&&i?this.type="ACWD":this.type="AC";var R=this,C,O=t;t=e.Pick.choose(t),R.file=t,le.PATH!=null&&(e.PATH=le.PATH);var I="";t.split("/").length==1&&e.PATH&&(I=e.PATH),this.mouseChildren=!1;var _=R.source=document.createElement("video");document.body.appendChild(_),_.style.display="none",_.setAttribute("autoplay","autoplay"),_.setAttribute("playsinline","playsinline"),_.setAttribute("crossorigin","anonymous"),f&&_.setAttribute("loop","loop");var P=R.innerSource=document.createElement("source");t.split("?").length==1&&(t+="?playsinline=1"),P.setAttribute("src",I+t),P.setAttribute("type",w),_.appendChild(P),K();var F=0;function K(){F++>5&&R.dispatchEvent("error"),_.addEventListener("stalled",K),_.addEventListener("error",K),_.addEventListener("canplay",V)}function V(){R.type="Vid",_.removeEventListener("stalled",K),_.removeEventListener("error",K),_.removeEventListener("canplay",V),_.pause();var D=_.videoWidth,U=_.videoHeight;if(R.setBounds(0,0,r||D,i||U),C=R.bitmap=new e.Bitmap(_,D,U).addTo(R),C.setBounds(0,0,D,U),C.scaleTo(R,100,100,o).pos(0,0,d,p,R),R.commands)for(var Q=0;Q<R.commands.length;Q++)R.commands[Q][2]?R[R.commands[Q][0]].apply(R,R.commands[Q][1]):e[R.commands[Q][0]].apply(R,R.commands[Q][1]);R.commands=null,R.dispatchEvent("ready")}R.videoPaused=!0,R.play=function(){if(!C){At&&ut("ZIM Vid - no file found");return}if(_.play(),_.volume=l,R.videoPaused=!1,!R.ticker)if(R.keyObj){var D=R.keyObj.color,U=R.keyObj.tolerance,Q=R.keyObj.replacement;R.ticker=e.Ticker.add(function(){C.keyOut(D,U,Q)})}else R.ticker=e.Ticker.add(function(){});return R},R.keyOut=function(D,U,Q){return R.ticker?(e.Ticker.remove(R.ticker),R.ticker=e.Ticker.add(function(){C.keyOut(D,U,Q)})):R.keyObj={color:D,tolerance:U,replacement:Q},R},R.pause=function(D){return n(D)&&(D=!0),R.videoPaused=D,D?_.pause():_.play(),R},Object.defineProperty(this,"duration",{get:function(){return _.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return _.currentTime},set:function(D){_.currentTime=D}}),Object.defineProperty(this,"volume",{get:function(){return _.volume},set:function(D){l=D,_.volume=D}}),e.styleTransforms(this,E),R.clone=function(D){return this.cloneProps(new e.Vid(D?t:O,r,i,o,l,f,d,p,w,k,this.group,T))},R.dispose=function(D,U,Q){this.ticker&&e.Ticker.remove(this.ticker);var J=R.stage;return R.bitmap.dispose(),C=R.bitmap=null,_.pause(),_.removeAttribute("src"),_.load(),_.remove(),_=null,Q||this.zimContainer_dispose(!0),J&&J.update(),!0}},e.extend(e.Vid,e.Container,["clone","dispose"],"zimContainer",!1),e.SVG=function(t,r,i,o,l,f,d,p,w,k,x){var T="svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",S;if(S=yt(e.SVG,arguments,T,this))return S;qe("83.09"),this.group=k;var b=w===!1?{}:e.getStyle("SVG",this.group,x);if(n(t)&&(t=b.svg!=null?b.svg:null),n(t)){At&&ut("ZIM SVG - needs a svg value");return}n(o)&&(o=b.bitmap!=null?b.bitmap:!0),n(l)&&(l=b.splitTypes!=null?b.splitTypes:!1),n(f)&&(f=b.geometric!=null?b.geometric:!0),n(d)&&(d=b.showControls!=null?b.showControls:!0),n(p)&&(p=b.interactive!=null?b.interactive:!0),this.zimContainer_constructor(r,i);var E=this;o&&(this.mouseChildren=!1);var R=t;t=e.Pick.choose(t),r&&i?this.type="ACWD":this.type="AC";var C=e.assets[t];if(C&&(E.src=C.src,E.file=C.file,E.item=C.item,E.svg=C.svg),C&&C.type=="Bitmap")E.type="SVG",E.bitmap=C.clone(),I();else if(C&&C.type=="AC")C.on("complete",function(){E.type="SVG",E.bitmap=C.bitmap.clone(),I(n(r)&&n(i))});else if(C&&C.type=="ACWB")n(r)&&n(i)&&E.setBounds(0,0,C.width,C.height),C.on("complete",function(){E.type="SVG",E.bitmap=C.bitmap.clone(),I()});else if(C&&C.type=="SVG")E.type="SVG",C.bitmap?E.bitmap=C.bitmap.clone():E.bitmap=C.clone(),I();else if(t&&t.match(/<svg/i)&&(E.svg=t),E.svg&&E.svg.match(/<svg/i))E.type="SVG",I();else{var O=e.asset(t);O.on("complete",function(){E.type="SVG",O.bitmap&&(E.src=O.bitmap.src,E.file=O.bitmap.file,E.item=O.bitmap.item,E.svg=O.bitmap.svg,E.bitmap=O.bitmap.clone()),I(n(r)&&n(i))})}function I(P){if(o)E.bitmap?(E.svg=E.bitmap.svg,E.bitmap.addTo(E),P&&_(),setTimeout(function(){E.dispatchEvent("ready"),E.dispatchEvent("complete")},20)):e.svgToBitmap(E.svg,function(V){E.bitmap=V,E.bitmap.addTo(E),_(),E.dispatchEvent("ready"),E.dispatchEvent("complete"),E.stage&&E.stage.update()});else if(E.bitmap&&(E.svg=E.bitmap.svg),t.match(/<svg/i)||C&&C.type=="SVG"||P){var F=new e.SVGContainer(E.svg);F.loop(function(V){V&&V.addTo(E)},!0),P&&_(),setTimeout(function(){E.dispatchEvent("ready"),E.dispatchEvent("complete")},20)}else{var K=e.asset(t);K.on("complete",function(){var V=new e.SVGContainer(K);V.loop(function(D){D&&D.addTo(E)},!0),_(),E.dispatchEvent("ready"),E.dispatchEvent("complete"),E.stage&&E.stage.update()})}}function _(){if(n(r)&&n(i)&&E.setBounds(null),E.type="SVG",E.commands)for(var P=0;P<E.commands.length;P++)E.commands[P][2]?E[E.commands[P][0]].apply(E,E.commands[P][1]):e[E.commands[P][0]].apply(E,E.commands[P][1]);E.commands=null}E.keyOut=function(P,F,K){return E.type=="AC"&&le.zdf?(le.zdf.ac("keyOut",arguments,E),E):(E.bitmap&&E.bitmap.keyOut(P,F,K),E.stage&&E.stage.update(),E)},e.styleTransforms(this,b),E.clone=function(P){return this.cloneProps(new e.SVG(P?t:R,r,i,o,l,f,d,p,w,this.group,x))}},e.extend(e.SVG,e.Container,["clone"],"zimContainer",!1),e.SensorAsk=function(t,r,i,o,l,f,d){var p="callback, sensorType, color, backgroundColor, style, group, inherit",w;if(w=yt(e.SensorAsk,arguments,p,this))return w;qe("83.01"),this.group=f;var k=l===!1?{}:e.getStyle("SensorAsk",this.group,d);if(n(r)&&(r=k.sensorType!=null?k.sensorType:"deviceorientation"),r!="devicemotion"&&(r="deviceorientation"),this.sensorType=r,!n(t)){n(i)&&(i=k.color!=null?k.color:e.dark),n(o)&&(o=k.backgroundColor!=null?k.backgroundColor:e.lighter),this.zimPane_constructor("",o,i,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="SensorAsk";var x=this;if(Style.addGroup("sensorAsk",{width:100,color:i,rollColor:o,corner:10,backgroundColor:e.faint,rollBackgroundColor:i,borderColor:i,borderWidth:2}),x.yes=new e.Button({label:"YES",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){x.hide(!0);var S=DeviceMotionEvent;r!="devicemotion"&&(S=DeviceOrientationEvent),S.requestPermission().then(function(b){b!="denied"?t(!0):t(!1)})}),x.label=new e.Label("Use sensor?",null,null,i,null,null,null,"center").sca(.9).centerReg(this),x.no=new e.Button({label:"NO",group:"sensorAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){x.hide(!1),t(!1)}),new e.Circle(110,e.clear,i,1).center(this).alp(.8),new e.Circle(120,e.clear,i,1).center(this).alp(.5),new e.Circle(130,e.clear,i,1).center(this).alp(.2),e.styleTransforms(this,k),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")x.show();else{let S=function(b){r=="deviceorientation"?b.alpha==null||b.alpha==0&&b.beta==0&&b.gamma==0?t(!1):t(!0):!b.acceleration||b.acceleration.x==null||b.acceleration.x==0&&b.acceleration.y==0&&b.acceleration.z==0?t(!1):t(!0),T=!0,le.removeEventListener(r,S)};var T=!1;le.addEventListener(r,S),setTimeout(function(){T||t(!1)},100)}}},e.extend(e.SensorAsk,e.Pane,null,"zimPane",!1),e.colorsHex=["#fb4758","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#112233","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],e.colors=["red","orange","yellow","green","blue","purple","pink","brown","interstellar","black","darker","licorice","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],fn=0;fn<e.colors.length;fn++)e[e.colors[fn]]=e.colorsHex[fn];return String.prototype.darken=function(t){return e.darken(this,t)},String.prototype.lighten=function(t){return e.lighten(this,t)},String.prototype.toColor=function(t,r){return e.toColor(this,t,r)},String.prototype.toAlpha=function(t){return e.toAlpha(this,t)},e.FIT="fit",e.FILL="fill",e.FULL="full",e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.MIDDLE="middle",e.START="start",e.END="end",e.TOP="top",e.BOTTOM="bottom",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.BOTH="both",e.RADIAL="radial",e.UP="up",e.DOWN="down",e.NEXT="next",e.PREV="prev",e.AUTO="auto",e.AVE="ave",e.DEFAULT="default",e.ALL="all",e.NONE="none",e.GET="get",e.POST="post",e.LOCALSTORAGE="localStorage",e.SOCKET="socket",e.TO="to",e.FROM="from",e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAW="saw",e.SAWTOOTH="saw",e.ZAP="zap",e.DISTILL=!1,e.distillery=[],e.distill=function(){!le.zns&&e&&(e.DISTILL||le.DISTILL)&&e.distillery.push("83.3","83.35");function t(r,i,o){return o.indexOf(r)===i}e.distillery.length>0?(e.distillery=e.distillery.filter(t),ut("zim.distill() - go to https://zimjs.com/distill and enter the following:"),Hn(e.distillery.join(" "))):ut("must set zim.DISTILL = true;")},e.parseAudioSprite=function(t,r){if(qe("83.25"),!(n(t)||n(t.resources)||n(t.spritemap))){var i=t,o=i.resources[0],l=i.spritemap,f=[],d,p={src:o,data:{}};for(var w in l)d=l[w],f.push({id:w,startTime:Math.round(d.start*1e3),duration:Math.round((d.end-d.start)*1e3)});return p.data.audioSprite=f,r&&ut(JSON.stringify(p)),p}},e.previewAudioSprite=function(t,r,i){if(qe("83.26"),!n(t)){if(n(r)&&(r=3),typeof i>"u"){if(n(le.zdf))return;var i=le.zdf}var o=i.width,l=t,f=[],d=[];if(l.constructor=={}.constructor)l.resources&&(l=e.parseAudioSprite(l)),l.audioSprite?e.loop(l.audioSprite,function(w){f.push(w[0].substr(0,r)),d.push(w[0])}):l.data&&l.data.audioSprite&&e.loop(l.data.audioSprite,function(w){f.push(w.id.substr(0,r)),d.push(w.id)});else return;var p=new e.Tabs({tabs:f,width:o,currentEnabled:!0}).addTo();return p.on("change",function(){i.asset(d[p.selectedIndex]).play()}),p}},e.svgToBitmap=function(t,r,i,o,l){if(qe("83.27"),!n(t.draggable)){var f=new DOMParser;t=t.innerHTML?f.parseFromString(t.innerHTML,"text/xml"):t;var d=t.getElementsByTagName("svg"),p=d?t.getElementsByTagName("svg")[0]:null;t=p}if(!XMLSerializer&&At){ut("ZIM svgToBitmap() - sorry, not supported in Browser");return}var w=typeof t=="string"?t:new XMLSerializer().serializeToString(t);if(w){var k=w.split(">")[0];if(k.length>1){var x=k.split(/width/i);if(x.length==1){var T=100,S=100,b=k.split(/viewBox/i);if(b.length>1){var E=b[1].split('"')[1];if(E){var R=E.split(" ");R.length>1&&(T=R[R.length-2],S=R[R.length-1])}}w=w.replace(/svg /i,'svg  width="'+T+'" height="'+S+'" ')}}w.match(/xmlns/i)||(w=w.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var C=self.URL||self.webkitURL||self,O=new Image;O.onload=function(){var _=new e.Bitmap(O,i,o);r(_,l),C.revokeObjectURL(I)};var I=C.createObjectURL(new document.Blob([w],{type:"image/svg+xml"}));O.src=I},e.makeContent=function(t,r,i){qe("83.29");var o;if(n(i)&&(i=e.dark),typeof t=="string"||typeof t=="number")t=this.message=new e.Label(t,null,null,i);else if(t.constructor=={}.constructor){var l=t;l.buttonScale||(l.buttonScale=.5),n(l.spacingH)&&(l.spacingH=20*l.buttonScale),n(l.spacingV)&&(l.spacingV=20);var f=l.spacingH,d=l.spacingV;l.align||(l.align="center"),t=new e.Container;var p=new ii(10,d).addTo(t);if(l.header&&l.header.pos(0,d,"left","top",t),l.message)var w=new e.Label(l.message,null,null,n(l.color)?i:l.color).loc(0,t.height+(l.header?d:0),t);if(l.display&&l.display.pos(0,-l.display.height-(l.header||l.message?d:0),"left","bottom",t),l.buttons){Array.isArray(l.buttons)||(l.buttons=[l.buttons]);for(var k=l.length*100,x=new e.Container().loc(0,t.height+(l.header||l.message||l.display?d:0),t),T=0;T<l.buttons.length;T++){var S=l.buttons[T],b=S.call||function(){};S.button||(S.button=new e.Button({width:S.width,label:S.label,backgroundColor:S.backgroundColor||S.bgColor,color:S.color,rollBackgroundColor:S.rollBackgroundColor||S.rollBgColor,rollColor:S.rollColor})),S.button.call=b,S.button.sca(l.buttonScale).loc(T==0?0:x.width+f,0,x).tap(function(R){R.target.call(R.target)})}}for(o=0;o<t.numChildren;o++){var E=t.getChildAt(o);E.lastY=E.y,l.align=="center"?E.center(t).loc(null,E.lastY):l.align=="right"&&E.pos(0,null,"right")}if(r&&typeof r=="number"&&(t.width=Math.min(t.width,r-f*2-(l.scrollBar===!0?12:l.scrollBar>0?l.scrollBar:0))),new e.Container(10,d).pos(0,-p.height,"center","bottom",t).bot(),p.top(),t.config=l,t.header=l.header,t.message=w,t.text=l.message,t.display=l.display,l.buttons)for(t.buttons=[],o=0;o<x.numChildren;o++)t.buttons.push(x.getChildAt(o))}return t},e}(ke||{});function qe(e){ke&&(ke.DISTILL||le.DISTILL)&&ke.distillery.push(e)}function Wn(e,v,a,u,c,m){if(qe("83.3"),e&&e.noDrag)return e;m!==!0&&(m=null);var B={drag:function(be,t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C){return dn(arguments)?(arguments[0].obj=this,ke.drag(arguments[0])):ke.drag(this,be,t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C)},noDrag:function(be){return ke.noDrag(this,be)},mouse:function(){return ke.mouse(this)},noMouse:function(){return ke.noMouse(this)},effect:function(be,t,r,i,o){return ke.effect(this,be,t,r,i,o)},noEffect:function(be,t){return ke.noEffect(this,be,t)},updateEffects:function(be){return ke.updateEffects(this,be)},wire:function(be,t,r,i,o,l,f){return dn(arguments)?(arguments[0].source=this,ke.wire(arguments[0])):ke.wire(this,be,t,r,i,o,l,f)},noWire:function(be,t,r){return dn(arguments)?(arguments[0].source=this,ke.noWire(arguments[0])):ke.noWire(this,be,t,r)},wired:function(be,t,r,i,o,l,f){return dn(arguments)?(arguments[0].target=this,ke.wired(arguments[0])):ke.wired(this,be,t,r,i,o,l,f)},noWired:function(be,t,r){return dn(arguments)?(arguments[0].target=this,ke.noWired(arguments[0])):ke.noWired(this,be,t,r)},bind:function(be,t,r,i,o){return dn(arguments)?(arguments[0].obj=this,ke.bind(arguments[0])):ke.bind(this,be,t,r,i,o)},noBind:function(be,t,r,i){return dn(arguments)?(arguments[0].obj=this,ke.noBind(arguments[0])):ke.noBind(this,be,t,r,i)},dragBoundary:function(be){return ke.dragBoundary(this,be)},dragRect:function(be){return ke.dragBoundary(this,be)},transform:function(be,t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q){return dn(arguments)?(arguments[0].obj=this,ke.transform(arguments[0])):ke.transform(this,be,t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q)},setSwipe:function(be){return ke.setSwipe(this,be)},gesture:function(be,t,r,i,o,l,f,d,p,w,k,x,T,S,b){return dn(arguments)?(arguments[0].obj=this,ke.gesture(arguments[0])):ke.gesture(this,be,t,r,i,o,l,f,d,p,w,k,x,T,S,b)},noGesture:function(be,t,r){return dn(arguments)?(arguments[0].obj=this,ke.noGesture(arguments[0])):ke.noGesture(this,be,t,r)},gestureBoundary:function(be,t){return ke.gestureBoundary(this,be,t)},gestureRect:function(be,t){return ke.gestureBoundary(this,be,t)},addPhysics:function(be,t,r,i,o,l,f,d,p,w,k){return dn(arguments)?(arguments[0].obj=this,ke.addPhysics(arguments[0])):ke.addPhysics(this,be,t,r,i,o,l,f,d,p,w,k)},removePhysics:function(){return ke.removePhysics(this)},hitTestPoint:function(be,t,r){return ke.hitTestPoint(this,be,t,r)},hitTestReg:function(be,t){return ke.hitTestReg(this,be,t)},hitTestRect:function(be,t,r,i){return ke.hitTestRect(this,be,t,r,i)},hitTestCircle:function(be,t,r,i){return ke.hitTestCircle(this,be,t,r,i)},hitTestCircleRect:function(be,t){return ke.hitTestCircleRect(this,be,t)},hitTestCircles:function(be,t){return ke.hitTestCircles(this,be,t)},hitTestBounds:function(be,t,r){return ke.hitTestBounds(this,be,t,r)},boundsToGlobal:function(be,t,r,i){return ke.boundsToGlobal(this,be,t,r,i)},resetBounds:function(be,t,r,i,o){return dn(arguments)?(arguments[0].obj=this,ke.resetBounds(arguments[0])):ke.resetBounds(this,be,t,r,i,o)},hitTestPath:function(be,t,r,i,o){return ke.hitTestPath(this,be,t,r,i,o)},hitTestGrid:function(be,t,r,i,o,l,f,d,p,w,k,x){return ke.hitTestGrid(this,be,t,r,i,o,l,f,d,p,w,k,x)},animate:function(be,t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j){return be&&(be.props||be.obj)&&dn(arguments)?(arguments[0].target=this,ke.animate(arguments[0])):ke.animate(this,be,t,r,i,o,l,f,d,p,w,k,x,T,S,b,E,R,C,O,I,_,P,F,K,V,D,U,Q,J,N,te,ae,ee,pe,$,X,y,g,h,L,q,A,Y,xe,G,Z,ge,he,ne,ue,Te,Fe,ie,Se,se,me,j)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(be,t,r,i,o,l,f,d,p,w,k,x,T,S,b){return dn(arguments)?(arguments[0].target=this,ke.wiggle(arguments[0])):ke.wiggle(this,be,t,r,i,o,l,f,d,p,w,k,x,T,S,b)},loop:function(be,t,r,i,o,l,f,d){return ke.loop(this,be,t,r,i,o,l,f,d)},copyMatrix:function(be){return ke.copyMatrix(this,be)},duplicate:function(be){return ke.duplicate(this,be)},cur:function(be){return ke.cur(this,be)},sha:function(be,t,r,i){return ke.sha(this,be,t,r,i)},pos:function(be,t,r,i,o,l,f,d,p,w){return dn(arguments)?(arguments[0].obj=this,ke.pos(arguments[0])):ke.pos(this,be,t,r,i,o,l,f,d,p,w)},loc:function(be,t,r,i,o,l,f){return dn(arguments)?(arguments[0].obj=this,ke.loc(arguments[0])):ke.loc(this,be,t,r,i,o,l,f)},mov:function(be,t){return dn(arguments)?(arguments[0].obj=this,ke.mov(arguments[0])):ke.mov(this,be,t)},top:function(){return ke.top(this)},bot:function(){return ke.bot(this)},ord:function(be){return ke.ord(this,be)},dep:function(be){return ke.dep(this,be)},nam:function(be){return ke.nam(this,be)},alp:function(be){return ke.alp(this,be)},vis:function(be){return ke.vis(this,be)},ble:function(be){return ke.ble(this,be)},dye:function(be){return ke.dye(this,be)},hov:function(be,t){return ke.hov(this,be,t)},rot:function(be,t,r){return ke.rot(this,be,t,r)},siz:function(be,t,r){return ke.siz(this,be,t,r)},ske:function(be,t){return ke.ske(this,be,t)},reg:function(be,t,r){return ke.reg(this,be,t,r)},sca:function(be,t){return ke.sca(this,be,t)},scaleTo:function(be,t,r,i,o){return dn(arguments)?(arguments[0].obj=this,ke.scaleTo(arguments[0])):ke.scaleTo(this,be,t,r,i,o)},fit:function(be,t,r,i,o){return dn(arguments)?(arguments[0].obj=this,ke.fit(arguments[0])):ke.fit(this,be,t,r,i,o)},outline:function(be,t,r){return dn(arguments)?(arguments[0].obj=this,ke.outline(arguments[0])):ke.outline(this,be,t,r)},blendmodes:function(be){return ke.blendmodes(this,be)},addTo:function(be,t,r){return dn(arguments)?(arguments[0].obj=this,ke.addTo(arguments[0])):ke.addTo(this,be,t,r)},removeFrom:function(be){return ke.removeFrom(this,be)},added:function(be,t,r){return ke.added(this,be,t,r)},movement:function(be,t){return ke.movement(this,be,t)},noMovement:function(){return ke.noMovement(this)},tap:function(be,t,r,i,o,l,f,d,p){return dn(arguments)?(arguments[0].obj=this,ke.tap(arguments[0])):ke.tap(this,be,t,r,i,o,l,f,d,p)},noTap:function(){return ke.noTap(this)},hold:function(be,t,r,i){return ke.hold(this,be,t,r,i)},noHold:function(){return ke.noHold(this)},change:function(be,t){return ke.change(this,be,t)},noChange:function(){return ke.noChange(this)},centerReg:function(be,t,r){return dn(arguments)?(arguments[0].obj=this,ke.centerReg(arguments[0])):ke.centerReg(this,be,t,r)},center:function(be,t,r){return dn(arguments)?(arguments[0].obj=this,ke.center(arguments[0])):ke.center(this,be,t,r)},place:function(be){return ke.place(this,be)},placeReg:function(be){return ke.placeReg(this,be)},expand:function(be,t,r,i){return dn(arguments)?(arguments[0].obj=this,ke.expand(arguments[0])):ke.expand(this,be,t,r,i)},setMask:function(be,t){return ke.setMask(this,be,t)},cloneProps:function(be){return be.type=this.type,be.group=this.group,be.style=this.style,be.alpha=this.alpha,be.rotation=this.rotation,be.mouseEnabled=this.mouseEnabled,be.mouseChildren=this.mouseChildren,be.tickEnabled=this.tickEnabled,be.x=this.x,be.y=this.y,be.scaleX=this.scaleX,be.scaleY=this.scaleY,be.skewX=this.skewX,be.skewY=this.skewY,be.name&&(be.name=this.name),be.regX=this.regX*be.width/(this.width||1),be.regY=this.regY*be.height/(this.height||1),be.visible=this.visible,be.shadow=this.shadow,(!this.type||this.type=="Shape")&&ke.copyMatrix(be,this),be.compositeOperation=this.compositeOperation,be.snapToPixel=this.snapToPixel,this.filters&&this.filters.length>0&&(be.filters=this.filters.slice(0),be.cache()),be.mask=this.mask,be.hitArea=this.hitArea,(!this.type||this.type=="Shape"||this.type=="Blob"||this.type=="Squiggle")&&this._bounds&&be.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),be},cloneChildren:function(be,t){be.children.length&&be.removeAllChildren();for(var r=be.children,i=0,o=this.children.length;i<o;i++){var l=this.children[i].clone(t);l.parent=be,r.push(l)}return be}};if(!n(m)){m=[];for(var z in B)m.push(z);return m}for(var oe in B)Object.prototype.hasOwnProperty.call(B,oe)&&(e[oe]=B[oe]);if(ke&&(e.cjsLocalToGlobal=e.localToGlobal,e.cjsGlobalToLocal=e.globalToLocal,e.cjsLocalToLocal=e.localToLocal,e.localToGlobal=function(be,t){return ke.localToGlobal(be,t,e,e.cjsLocalToGlobal)},e.globalToLocal=function(be,t){return ke.globalToLocal(be,t,e,e.cjsGlobalToLocal)},e.localToLocal=function(be,t,r){return ke.localToLocal(be,t,r,e)},e.hueBatch||ke.displayBase(e)),!n(v)&&!n(a)&&!n(u)&&!n(c)?v=v:!n(v)&&!n(a)&&(u=v,c=a,v=0,a=0),!n(v)&&!n(a)&&!n(u)&&!n(c))e.setBounds(v,a,u,c);else if(e.nominalBounds!=null&&e.getBounds&&e.getBounds()==null){var Ce=e.nominalBounds;e.setBounds(Ce.x,Ce.y,Ce.width,Ce.height)}return e.parent&&e.parent.actionFrames&&!e.parent.addPhysics&&Wn(e.parent,zdf?zdf.width:null,zdf?zdf.height:null),e}var Li;function Di(e){qe("83.35"),document.Window=Bi,document.Blob=ci,Li="ignore",n(e)&&(e=[]),Array.isArray(e)||(e=[e]);var v=Wn(null,null,null,null,null,!0),a=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var u in ke)(v.indexOf(u)==-1||a.indexOf(u)>=0)&&e.indexOf(u)==-1&&(window[u]=ke[u])}ke.fastFrame=function(e,v){if(qe("83.355"),je=e,n(le.zdf))return v.frame=new ke.Frame({shim:{stage:v,canvas:v.canvas}}),le.zimDefaultFrame=le.zdf=v.frame,ke.scaX=je.stageTransformable?1:v.scaleX,ke.scaY=je.stageTransformable?1:v.scaleY,v.frame};ke.addWires=function(e){return qe("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),ke.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),ke.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),ke.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),ke.noWired.apply(null,arguments),e},e};ke.setBlurDetect=function(){qe("83.36"),ke.blurCheck=!0,ke.pauseAnimateOnBlur=!0,ke.pauseOnBlur=[],ke.blurDetect=function(){var e,v,a={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in a)if(e in document){v=a[e];break}return function(u){return u&&document.addEventListener(v,u),!document[e]}}(),ke.blurDetect(function(){var e,v,a;if(ke.blurDetect())setTimeout(function(){if(ke.pauseOnBlur)for(e=0;e<ke.pauseOnBlur.length;e++)v=ke.pauseOnBlur[e],v.pauseOnBlurPaused||v.pause(!1);if(ke.pauseAnimateOnBlur&&ke.animatedObjects){var u=[],c;for(e=0;e<ke.animatedObjects.objects.length;e++){v=ke.animatedObjects.objects[e];var m=ke.copy(v.tweenStates);if(!v.tweenStates)v.pauseAnimate(!1);else if(n(m.all)||m.all){if(v.pauseAnimate(!1),!v.dynamicAnimation)for(a in m)a!="all"&&m[a]===!1&&v.pauseAnimate(!0,a)}else{v.pauseAnimate(!0);for(a in m)a!="all"&&m[a]&&v.pauseAnimate(!1,a)}v.type=="Sprite"&&(v.paused=!0),v.parent&&v.parent.type=="Particles"&&v.parent.emitter&&v.parent.emitter.focusWarm&&(c=v.parent.emitter,u.indexOf(v.parent.emitter)<0&&u.push(v.parent.emitter))}if(u.length>0)for(e=0;e<u.length;e++)u[e].doWarm(u[e].focusWarm)}},300),le.zdf&&le.zdf.dispatchEvent("tabfocus");else{if(ke.pauseOnBlur)for(e=0;e<ke.pauseOnBlur.length;e++)v=ke.pauseOnBlur[e],v.pauseOnBlurPaused=v.paused,v.pause(!0);ke.pauseAnimateOnBlur&&ke.animatedObjects&&ke.pauseAnimate(!0,"pauseOnBlur"),le.zdf&&le.zdf.dispatchEvent("tabblur")}})};var fi=!1;ke=function(e){e.ZIMON={stringify:function(a,u){if(qe("83.39"),n(a))return;if(!fi){At&&ut("ZIMON - set ZIMONON=true before using ZIMON.stringify()");return}return a=e.copy(a),c(a),JSON.stringify({obj:a,key:u,zimon:1,info:"https://zimjs.com/zimon/"});function c(m,B,z){if(!n(m))if(Array.isArray(m))e.loop(m,function(Ce,be){c(Ce,m,be)});else if(m.constructor=={}.constructor)e.loop(m,function(Ce,be){c(be,m,Ce)});else if(m.type){var oe={zimon:m.type};m.arguments&&(oe.args=Array.prototype.slice.call(m.arguments),c(oe.args)),m.type=="series"&&(oe.args=Array.prototype.slice.call(m.array),c(oe.args)),u&&u[m.type]&&u[m.type].props&&(oe.props=[],e.loop(u[m.type].props,function(Ce){oe.props.push(m[Ce])})),B?B[z]=oe:a=oe}else typeof m!="string"&&typeof m!="number"&&typeof m!="boolean"&&m!==null&&At&&ut("ZIMON - potentially bad JSON value"+m)}},parse:function(a,u){if(qe("83.39"),n(a))return;var c=JSON.parse(a),m=c.obj;return u=c.key,z(m),m;function B(oe){try{return Function("return("+oe+")")()}catch(Ce){return At&&ut("ZIMON - bad function scope or name: "+oe),null}}function z(oe,Ce,be){if(!n(oe)){if(Array.isArray(oe))e.loop(oe,function(f,d){z(f,oe,d)});else if(n(oe.zimon)&&oe.constructor=={}.constructor)e.loop(oe,function(f,d){z(d,oe,f)});else if(oe.zimon){var t=oe.zimon,r="";u&&(u[t]&&u[t].scope?r=u[t].scope+".":u.scope&&(r=u.scope+"."));var i=B(r+t),o=oe.args;n(o)&&(o=[]),z(o);var l;oe.type=="series"?l=e.series(o):l=i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(o)))):null,Ce?Ce[be]=l:m=l,u&&u[t]&&u[t].props&&l&&e.loop(u[t].props,function(f,d){n(oe.props[d])||(l[f]=oe.props[d])})}}}}},e.Wonder=function(a,u,c,m,B){var z="wid, client, app, notes, server",oe;if(oe=yt(e.Wonder,arguments,z,this))return oe;if(qe("82"),n(a)){ut("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");return}n(B)&&(B="https://wonder.zimjs.org/wonder");var Ce=this;n(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var be=[],t=setInterval(i,1e3),r=0;function i(){be.length>0&&(e.async(B+"?wonder="+JSON.stringify(be)),be=[],r++)}var o,l=setInterval(function(){r>28&&(be.push({id:a,c:u,a:c,n:m,k:o,t:"e",v:"frequency max - terminated",s:e.wonderSession}),ut("zim.Wonder() - frequency max - terminated"),Ce.dispose()),r=0},30*1e3);this.countsOff={},this.timesOff={},this.ordersOff={};function f(w,k){return n(w)?(ut("zim.Wonder "+k+" - please provide a keyword"),!1):!Ce[k+"sOff"][w]}this.count=function(w){f(w,"count")&&(o=w,be.push({id:a,c:u,a:c,n:m,k:w,t:"c",v:1,s:e.wonderSession}))};var d={};this.timeStart=function(w){f(w,"time")&&(Ce.timeEnd(w),o=w,d[w]=new Date().getTime())};var p={};this.timePause=function(w){f(w,"time")&&(p[w]||(p[w]=new Date().getTime()))},this.timeUnpause=function(w){if(f(w,"time")&&p[w]){var k=new Date().getTime()-p[w];d[w]&&(d[w]+=k),delete p[w]}},this.timeEnd=function(w){if(f(w,"time")&&d[w]){var k=p[w]?p[w]:new Date().getTime(),x=Math.round((k-d[w])/1e3);delete p[w],delete d[w],be.push({id:a,c:u,a:c,n:m,k:w,t:"t",v:x,s:e.wonderSession})}},this.order=function(w,k){if(f(w,"order")){if(o=w,n(k)){ut("zim.Wonder order() - please provide an item");return}be.push({id:a,c:u,a:c,n:m,k:w,t:"o",v:k,s:e.wonderSession})}},this.countOff=function(w){Ce.countsOff[w]=1},this.countOn=function(w){delete Ce.countOff[w]},this.timeOff=function(w){Ce.timesOff[w]=1},this.timeOn=function(w){delete Ce.timesOff[w]},this.orderOff=function(w){Ce.ordersOff[w]=1},this.orderOn=function(w){delete Ce.ordersOff[w]},this.dispose=function(){return i(),clearInterval(t),clearInterval(l),!0}},e.VERSION="015/zim",e.getLatestVersions=function(a){qe("82.2");var u="https://zimjs.com/live/getLatestVersions.php";function c(m){a(JSON.parse(m))}e.async(u,c,"returnLatestVersions")},typeof je<"u"&&(e.PWA=function(a,u,c,m,B,z,oe){var Ce="call, label, backgroundColor, color, backdropColor, pane, noScale",be;if(be=yt(e.PWA,arguments,Ce,this))return be;qe("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var t,r=this,i=le.M=="ios"?"In Safari, please add to\nhome screen as an app":"Please add to\nhome screen as an app";if(n(u)&&(u=new e.Label({text:i,align:e.LEFT,lineHeight:44,color:m})),n(c)&&(c=e.yellow),n(z)){z=new e.Pane({width:1200,height:230,content:u,backgroundColor:c,backdropColor:B});var o=new e.Container;new e.Shape().s(e.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(o),new e.Shape().s(e.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(o).mov(0,-38);var l=new e.Tile([o,u],2,1,40,0,!0);l.width>zdf.stage.width*.7&&(l.width=zdf.stage.width*.7),l.setBounds(-70,-10,480,100),o.mov(-30,35),l.center(z)}M&&!(le.matchMedia("(display-mode: standalone)").matches||le.navigator.standalone||document.referrer.includes("android-app://"))?f():(a&&a.constructor===Function&&a(),setTimeout(function(){r.dispatchEvent("ready")},20));function f(){r.pane=t=z.show(),t.on("close",function(){a&&a.constructor===Function&&a(),r.scaleEvent&&d.off("resize",r.scaleEvent),r.dispatchEvent("ready"),le.zdf.stage.update()});var d=d||le.zdf;d&&!oe&&(t.scaleTo(d.stage,105).center(),(d.scaling=="full"||d.scaling=="tag")&&(r.scaleEvent=d.on("resize",function(){t.scaleTo(d.stage,105).center()})),d.stage.update())}this.show=function(){return f(),this}},e.extend(e.PWA,je.EventDispatcher,null,"cjsEventDispatcher",!1)),e.QR=function(a,u,c,m,B,z){var oe="url, color, backgroundColor, size, clickable, correctLevel",Ce;if(Ce=yt(e.QR,arguments,oe,this))return Ce;qe("82.5"),n(a)&&(a="https://zimjs.com"),n(m)&&(m=256),n(u)&&(u=e.black),n(c)&&(c=e.white),n(B)&&(B=!0),n(z)&&(z=2);var be=document.createElement("div");if(typeof QRCode>"u"){ut("ZIM QR - needs qrcode.js library - see docs");return}var t=new QRCode(be,{text:a,width:m,height:m,colorDark:u,colorLight:c,correctLevel:z});this.zimBitmap_constructor(t._oDrawing._oContext.canvas),B&&this.cur().on("click",function(){sr(a,"_blank")}),be=null},e.extend(e.QR,e.Bitmap,null,"zimBitmap",!1),e.GIF=function(a,u,c,m){var B="file, width, height, startPaused",z;if(z=yt(e.GIF,arguments,B,this))return z;if(qe("82.7"),typeof gifler>"u"){ut("ZIM GIF - needs gifler.js library - see docs");return}n(u)&&(u=100),n(c)&&(c=100);var oe=this;oe.paused=!1,this.zimBitmap_constructor(null,u,c),this.cache();var Ce,be,t;if(le.PATH!=null&&(e.PATH=le.PATH),a.match(/http/)||a.match(/^\//)?t=a:t=(e.PATH?e.PATH:"")+a,oe.gifler=gifler(t).animate(this.cacheCanvas).then(function(l){oe.animator=l,m&&(Ce=setInterval(function(){oe.animator.running()&&(be=setTimeout(function(){oe.animator.stop(),oe.paused=!0},.1),clearInterval(Ce))},.05))}),!oe.ticker)if(oe.keyObj){var r=oe.keyObj.color,i=oe.keyObj.tolerance,o=oe.keyObj.replacement;oe.ticker=e.Ticker.add(function(){oe.keyOut(r,i,o)})}else oe.ticker=e.Ticker.add(function(){});oe.keyOut=function(l,f,d){return oe.ticker?(e.Ticker.remove(oe.ticker),oe.ticker=e.Ticker.add(function(){oe.keyOut(l,f,d)})):oe.keyObj={color:l,tolerance:f,replacement:d},oe},this.pause=function(l){return n(l)&&(l=!0),oe.animator&&(Ce&&clearInterval(Ce),be&&clearTimeout(be),l&&oe.animator.running()?(oe.animator.stop(),e.Ticker.remove(oe.ticker)):!l&&!oe.animator.running()&&(oe.animator.start(),e.Ticker.add(oe.ticker))),oe.paused=l,oe},this.stop=function(){oe.dispose()},this.reset=function(){return oe.animator.reset(),oe.paused&&(oe.animator.start(),e.Ticker.add(oe.ticker)),oe},this.clone=function(){return this.cloneProps(new e.GIF(a,u,c,m))},this.dispose=function(){oe.animator.stop(),oe.parent&&oe.removeFrom(),e.Ticker.remove(oe.ticker),e.gD(this)}},e.extend(e.GIF,e.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),e.Theme={set:function(a,u,c,m,B){var z="name, lightenRatio, tint, tintRatio, exclude",oe;if(oe=yt(e.Theme.set,arguments,z))return oe;qe("82.8"),n(a)&&(a="zim");var Ce=a.toLowerCase();n(u)&&(u=0),c==-1&&(c=null),n(m)&&(m=0),B==-1&&(B=null),!n(B)&&!Array.isArray(B)&&(B=[B]),e.THEME=window.THEME={name:Ce,lightenRatio:u,tint:c,tintRatio:m,exclude:B};var be={},t,r=e.colors.slice(0,8),i=e.colors.slice(8,25);Ce=="zim"?e.loop(e.colors,function(o,l){o=="clear"||o=="faint"||(be[o]=e.colorsHex[l])}):Ce=="html"?(e.loop(r,function(o){be[o]=o}),e.loop(i,function(o,l){be[o]=e.colorsHex[l+8]})):Ce=="future"?(t=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],e.loop(r,function(o,l){be[o]="#"+t[l]}),e.loop(i,function(o,l){be[o]=e.colorsHex[l+8].toColor("#1dcfae",.4-l*.025)})):Ce=="invert"?(be={},e.loop(e.colorsHex,function(o,l,f){if(l==f-2)return 1;be[e.colors[l]]=e.invertColor(o)})):Ce=="greyscale"?(t=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],e.loop(r,function(o,l){be[o]="#"+t[l]})):Ce=="neon"?(t=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],e.loop(r,function(o,l){be[o]="#"+t[l]}),e.loop(i,function(o,l){be[o]=e.colorsHex[l+8].toColor("#000",.9)}),be.light=e.lighter,be.moon=e.lighter,be.lighter=e.white,be.white=e.white):Ce=="seventies"?(t=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],e.loop(r,function(o,l){be[o]="#"+t[l]}),e.loop(i,function(o,l){be[o]=e.colorsHex[l+8].toColor(l<8?"#344f00":"#f4a127",.8-l*.04)})):Ce=="warm"?(t=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],e.loop(r,function(o,l){be[o]="#"+t[l]}),e.loop(i,function(o,l){be[o]=e.colorsHex[l+8].toColor(l<8?"#4e352e":"#745c58",.8-l*.05)})):Ce.constructor=={}.constructor&&(be=Ce,e.loop(be,function(o){e.colors.indexOf(o)==-1&&delete be[o]})),e.loop(B,function(o){o.toLowerCase()=="colors"?e.loop(e.colors,function(l,f){if(f>=8)return 1;B.push(l)}):(o.toLowerCase()=="greys"||o.toLowerCase()=="grays")&&e.loop(e.colors,function(l,f){f<8||B.push(l)})}),e.loop(be,function(o,l){B&&B.indexOf(o)!=-1||(c&&(l=l.toColor(c,m)),u!=0&&(l=l.lighten(u)),Ot||(window[o]=l),e[o]=l)})},apply:function(a,u,c,m,B){var z="name, lightenRatio, tint, tintRatio, exclude",oe;if(oe=yt(e.Theme.apply,arguments,z))return oe;if(localStorage){n(a)&&(a="zim");var Ce=a.toLowerCase();n(u)&&(u=0),n(c)&&(c=-1),n(m)&&(m=0),n(B)?B=-1:Array.isArray(B)||(B=[B]),localStorage.setItem(v,JSON.stringify({name:Ce,lightenRatio:u,tint:c,tintRatio:m,exclude:B})),window.location.reload()}else ut("ZIM applyTheme() - needs localStorage")},clear:function(){localStorage&&localStorage.getItem(v)&&localStorage.removeItem(v),window.location.reload()}};var v=window.location.href.replace(/[.\/:]/g,"");return localStorage&&localStorage.getItem(v)?(e.THEME=window.THEME=JSON.parse(localStorage.getItem(v)),e.Theme.set(hr.name,hr.lightenRatio,hr.tint,hr.tintRatio,hr.exclude)):e.THEME=window.THEME=null,e}(ke||{});var ti=[["zog",Hn],["zid",wn],["zss",Si],["zgo",sr],["zum",Zn],["zot",n],["zop",Ii],["zil",Fr],["zet",dr],["zob",yt],["zik",ct],["zta",Mi],["zor",Oi],["zogg",oi],["zogp",Pi],["zogb",Xr],["zogr",li],["zogy",ut],["zogo",ui],["zogl",kr],["zogd",Pr],["zimplify",Di],["zimify",Wn]];for(fn=0;fn<ti.length;fn++)Kn=ti[fn],le[Kn[0]]=ke[Kn[0]]=Kn[1];var Kn,ni=[["FIT",ke.FIT],["FILL",ke.FILL],["FULL",ke.FULL],["LEFT",ke.LEFT],["RIGHT",ke.RIGHT],["CENTER",ke.CENTER],["MIDDLE",ke.MIDDLE],["START",ke.START],["END",ke.END],["TOP",ke.TOP],["BOTTOM",ke.BOTTOM],["HORIZONTAL",ke.HORIZONTAL],["VERTICAL",ke.VERTICAL],["BOTH",ke.BOTH],["RADIAL",ke.RADIAL],["UP",ke.UP],["DOWN",ke.DOWN],["NEXT",ke.NEXT],["PREV",ke.PREV],["AUTO",ke.AUTO],["AVE",ke.AVE],["DEFAULT",ke.DEFAULT],["ALL",ke.ALL],["NONE",ke.NONE],["GET",ke.GET],["POST",ke.POST],["LOCALSTORAGE",ke.LOCALSTORAGE],["SOCKET",ke.SOCKET],["TO",ke.TO],["FROM",ke.FROM],["SINE",ke.SINE],["SQUARE",ke.SQUARE],["TRIANGLE",ke.TRIANGLE],["SAW",ke.SAW],["SAWTOOTH",ke.SAWTOOTH],["ZAP",ke.ZAP],["TAU",ke.TAU],["DEG",ke.DEG],["RAD",ke.RAD],["PHI",ke.PHI]];for(fn=0;fn<ni.length;fn++)Kn=ni[fn],le[Kn[0]]=Kn[1];var Kn;for(fn=0;fn<ke.colors.length;fn++)le[ke.colors[fn]]=ke.colorsHex[fn];var Xi=ke;le.zim=ke;var Fi=ke.chop,Gi=ke.shuffle,Ui=ke.pluck,Vi=ke.rand,Hi=ke.seedRandom,Wi=ke.odds,qi=ke.rarity,Qi=ke.repeats,Zi=ke.series,Ki=ke.loop,Ji=ke.getTIME,ri=ke.timeout,Ri=ke.interval,$i=ke.async,ji=ke.couple,zi=ke.decouple,es=ke.convertColor,ts=ke.colorRange,ns=ke.lighten,rs=ke.darken,is=ke.toColor,ss=ke.toAlpha,as=ke.toBW,os=ke.invertColor,ls=ke.zimEase,us=ke.spline,fs=ke.pointAlongCurve,cs=ke.distanceAlongCurve,hs=ke.closestPointAlongCurve,ds=ke.transformPoints,ps=ke.trimEndPoints,gs=ke.reversePoints,vs=ke.appendPoints,ys=ke.prependPoints,ms=ke.splitPoints,xs=ke.makeID,ws=ke.makeSyllable,_s=ke.makePrimitive,Ts=ke.makeMath,Cs=ke.swapProperties,As=ke.mobile,Es=ke.vee,bs=ke.extend,ks=ke.copy,Ps=ke.merge,Ss=ke.sortObject,Is=ke.arraysEqual,Ms=ke.arrayMinMax,Os=ke.isEmpty,Ls=ke.isJSON,Ds=ke.isPick,Rs=ke.decimals,Bs=ke.countDecimals,Ys=ke.sign,Ns=ke.constrain,Xs=ke.dist,Fs=ke.rectIntersect,Gs=ke.boundsAroundPoints,Us=ke.angle,Vs=ke.smoothStep,Hs=ke.unicodeToUTF,Ws=ke.capitalizeFirst,qs=ke.Ajax,Qs=ke.Noise,Zs=ke.Point,Ks=ke.Bezier,Js=ke.Boundary,$s=ke.GradientColor,js=ke.RadialColor,zs=ke.BitmapColor,ea=ke.Damp,ta=ke.Proportion,na=ke.ProportionDamp,ra=ke.Dictionary,ia=ke.Hierarchy,sa=ke.Pick,aa=ke.scrollX,oa=ke.scrollY,la=ke.windowWidth,ua=ke.windowHeight,fa=ke.browserZoom,ca=ke.getQueryString,ha=ke.swapHTML,da=ke.urlEncode,pa=ke.urlDecode,ga=ke.setCookie,va=ke.getCookie,ya=ke.deleteCookie,ma=ke.Stage,xa=ke.StageGL,ii=ke.Container,wa=ke.Shape,_a=ke.Bitmap,Ta=ke.Sprite,Ca=ke.MovieClip,Aa=ke.SVGContainer,Ea=ke.CustomShape,ba=ke.Circle,On=ke.Rectangle,ka=ke.Triangle,Pa=ke.Poly,Sa=ke.Line,Ia=ke.Squiggle,ci=ke.Blob,Bi=ke.Window,Ma=ke.Flare,Oa=ke.MultiFlare,La=ke.FlareBox,si=ke.Label,Da=ke.LabelOnPath,Ra=ke.LabelOnArc,Ba=ke.LabelLetters,Ya=ke.Emoji,Na=ke.Button,Xa=ke.CheckBox,Fa=ke.RadioButtons,Ga=ke.Toggle,Ua=ke.Tip,Va=ke.Pane,Ha=ke.Panel,Wa=ke.Page,qa=ke.Layer,Qa=ke.Waiter,Za=ke.ProgressBar,Ka=ke.Indicator,Ja=ke.TextInput,$a=ke.List,ja=ke.Stepper,za=ke.Slider,eo=ke.Selector,to=ke.Dial,no=ke.Tabs,ro=ke.Pad,io=ke.NumPad,so=ke.DPad,ao=ke.Radial,oo=ke.RadialMenu,lo=ke.ColorPicker,uo=ke.EmojiPicker,fo=ke.TextEditor,co=ke.Keyboard,ho=ke.Organizer,po=ke.Connectors,go=ke.Marquee,vo=ke.Carousel,yo=ke.Loader,mo=ke.TextArea,xo=ke.Tag,wo=ke.localToGlobal,_o=ke.globalToLocal,To=ke.localToLocal,Co=ke.addTo,Ao=ke.removeFrom,Eo=ke.added,bo=ke.centerReg,ko=ke.center,Po=ke.place,So=ke.placeReg,Io=ke.pos,Mo=ke.loc,Oo=ke.mov,Lo=ke.sca,Do=ke.alp,Ro=ke.vis,Bo=ke.ble,Yo=ke.dye,No=ke.hov,Xo=ke.rot,Fo=ke.siz,Go=ke.ske,Uo=ke.reg,Vo=ke.top,Ho=ke.bot,Wo=ke.ord,qo=ke.cur,Qo=ke.sha,Zo=ke.dep,Ko=ke.nam,Jo=ke.movement,$o=ke.noMovement,jo=ke.tap,zo=ke.noTap,el=ke.hold,tl=ke.noHold,nl=ke.change,rl=ke.noChange,il=ke.drag,sl=ke.noDrag,al=ke.dragBoundary,ol=ke.mouse,ll=ke.noMouse,ul=ke.wire,fl=ke.noWire,cl=ke.wired,hl=ke.noWired,dl=ke.bind,pl=ke.noBind,gl=ke.transform,vl=ke.gesture,yl=ke.noGesture,ml=ke.gestureBoundary,xl=ke.effect,wl=ke.updateEffects,_l=ke.noEffect,Tl=ke.addPhysics,Cl=ke.removePhysics,Al=ke.hitTestPoint,El=ke.hitTestReg,bl=ke.hitTestRect,kl=ke.hitTestCircle,Pl=ke.hitTestCircleRect,Sl=ke.hitTestCircles,Il=ke.hitTestBounds,Ml=ke.hitTestPath,Ol=ke.hitTestGrid,Ll=ke.animate,Dl=ke.stopAnimate,Rl=ke.pauseAnimate,Bl=ke.wiggle,Yl=ke.scaleTo,Nl=ke.fit,Xl=ke.boundsToGlobal,Fl=ke.resetBounds,Gl=ke.copyMatrix,Ul=ke.duplicate,Vl=ke.expand,Hl=ke.setSwipe,Wl=ke.setMask,ql=ke.outline,Ql=ke.blendmodes,Zl=ke.Pages,Kl=ke.Arrow,Jl=ke.HotSpots,$l=ke.HotSpot,jl=ke.Guide,zl=ke.Grid,eu=ke.Wrapper,ai=ke.Tile,tu=ke.Pack,nu=ke.Beads,ru=ke.Layout,iu=ke.Accessibility,su=ke.TextureActive,au=ke.TextureActives,ou=ke.TextureActivesManager,lu=ke.Manager,uu=ke.ResizeManager,fu=ke.TransformManager,cu=ke.GuideManager,hu=ke.GridManager,du=ke.LayoutManager,pu=ke.SelectionSet,gu=ke.SelectionManager,vu=ke.Bind,yu=ke.Swipe,mu=ke.Swiper,xu=ke.MotionController,wu=ke.GamePad,_u=ke.Portal,Tu=ke.Physics,Cu=ke.TimeLine,Au=ke.BlurEffect,Eu=ke.GlowEffect,bu=ke.ShadowEffect,ku=ke.ColorEffect,Pu=ke.MultiEffect,Su=ke.AlphaEffect,Iu=ke.Pixel,Mu=ke.Parallax,Ou=ke.Flipper,Lu=ke.Book,Du=ke.Scrambler,Ru=ke.Scroller,Bu=ke.Dynamo,Yu=ke.Accelerator,Nu=ke.Emitter,Xu=ke.Generator,Fu=ke.Pen,Gu=ke.SoundWave,Uu=ke.Synth,Vu=ke.VR,Hu=ke.Frame,Wu=ke.Pic,qu=ke.Aud,Qu=ke.Vid,Zu=ke.SVG,Ku=ke.SensorAsk,Ju=ke.distill,$u=ke.parseAudioSprite,ju=ke.previewAudioSprite,zu=ke.svgToBitmap,ef=ke.makeContent,tf=ke.fastFrame,nf=ke.addWires,rf=ke.setBlurDetect,sf=ke.Wonder,af=ke.getLatestVersions,of=ke.PWA,lf=ke.QR,uf=ke.GIF,hr=ke.THEME;})();
/*! ZIM - JavaScript Canvas Framework - Code Creativity
https://zimjs.com (c) 2023 modified MIT License
Donations welcome https://zimjs.com/donate
Node module - also see ES6 modules at https://zimjs.com/cdn
*/
/*! Bundled license information:

@danzen/createjs/create.js:
  (*!
  * CreateJS
  * Visit http://createjs.com/ for documentation, updates and examples.
  *
  * Copyright (c) 2010 gskinner.com, inc.
  *
  * Permission is hereby granted, free of charge, to any person
  * obtaining a copy of this software and associated documentation
  * files (the "Software"), to deal in the Software without
  * restriction, including without limitation the rights to use,
  * copy, modify, merge, publish, distribute, sublicense, and/or sell
  * copies of the Software, and to permit persons to whom the
  * Software is furnished to do so, subject to the following
  * conditions:
  *
  * The above copyright notice and this permission notice shall be
  * included in all copies or substantial portions of the Software.
  *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  * OTHER DEALINGS IN THE SOFTWARE.
  *)
*/

export default zim;
window.zim = zim;
window.zns || zimplify();